/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 281);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {var require;;(function(global,factory){ true?module.exports=factory():undefined;})(this,function(){'use strict';var hookCallback;function hooks(){return hookCallback.apply(null,arguments);}function setHookCallback(callback){hookCallback=callback;}function isArray(input){return input instanceof Array||Object.prototype.toString.call(input)==='[object Array]';}function isObject(input){return input!=null&&Object.prototype.toString.call(input)==='[object Object]';}function isObjectEmpty(obj){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(obj).length===0;}else{var k;for(k in obj){if(obj.hasOwnProperty(k)){return false;}}return true;}}function isUndefined(input){return input===void 0;}function isNumber(input){return typeof input==='number'||Object.prototype.toString.call(input)==='[object Number]';}function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==='[object Date]';}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i));}return res;}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b);}function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i];}}if(hasOwnProp(b,'toString')){a.toString=b.toString;}if(hasOwnProp(b,'valueOf')){a.valueOf=b.valueOf;}return a;}function createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc();}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false};}function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags();}return m._pf;}var some;if(Array.prototype.some){some=Array.prototype.some;}else{some=function(fun){var t=Object(this);var len=t.length>>>0;for(var i=0;i<len;i++){if(i in t&&fun.call(this,t[i],i,t)){return true;}}return false;};}function isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);var parsedParts=some.call(flags.parsedDateParts,function(i){return i!=null;});var isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.weekdayMismatch&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||flags.meridiem&&parsedParts);if(m._strict){isNowValid=isNowValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined;}if(Object.isFrozen==null||!Object.isFrozen(m)){m._isValid=isNowValid;}else{return isNowValid;}}return m._isValid;}function createInvalid(flags){var m=createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags);}else{getParsingFlags(m).userInvalidated=true;}return m;}var momentProperties=hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(!isUndefined(from._isAMomentObject)){to._isAMomentObject=from._isAMomentObject;}if(!isUndefined(from._i)){to._i=from._i;}if(!isUndefined(from._f)){to._f=from._f;}if(!isUndefined(from._l)){to._l=from._l;}if(!isUndefined(from._strict)){to._strict=from._strict;}if(!isUndefined(from._tzm)){to._tzm=from._tzm;}if(!isUndefined(from._isUTC)){to._isUTC=from._isUTC;}if(!isUndefined(from._offset)){to._offset=from._offset;}if(!isUndefined(from._pf)){to._pf=getParsingFlags(from);}if(!isUndefined(from._locale)){to._locale=from._locale;}if(momentProperties.length>0){for(i=0;i<momentProperties.length;i++){prop=momentProperties[i];val=from[prop];if(!isUndefined(val)){to[prop]=val;}}}return to;}var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN);}if(updateInProgress===false){updateInProgress=true;hooks.updateOffset(this);updateInProgress=false;}}function isMoment(obj){return obj instanceof Moment||obj!=null&&obj._isAMomentObject!=null;}function absFloor(number){if(number<0){return Math.ceil(number)||0;}else{return Math.floor(number);}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber);}return value;}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i])){diffs++;}}return diffs+lengthDiff;}function warn(msg){if(hooks.suppressDeprecationWarnings===false&&typeof console!=='undefined'&&console.warn){console.warn('Deprecation warning: '+msg);}}function deprecate(msg,fn){var firstTime=true;return extend(function(){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(null,msg);}if(firstTime){var args=[];var arg;for(var i=0;i<arguments.length;i++){arg='';if(typeof arguments[i]==='object'){arg+='\n['+i+'] ';for(var key in arguments[0]){arg+=key+': '+arguments[0][key]+', ';}arg=arg.slice(0,-2);}else{arg=arguments[i];}args.push(arg);}warn(msg+'\nArguments: '+Array.prototype.slice.call(args).join('')+'\n'+new Error().stack);firstTime=false;}return fn.apply(this,arguments);},fn);}var deprecations={};function deprecateSimple(name,msg){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(name,msg);}if(!deprecations[name]){warn(msg);deprecations[name]=true;}}hooks.suppressDeprecationWarnings=false;hooks.deprecationHandler=null;function isFunction(input){return input instanceof Function||Object.prototype.toString.call(input)==='[object Function]';}function set(config){var prop,i;for(i in config){prop=config[i];if(isFunction(prop)){this[i]=prop;}else{this['_'+i]=prop;}}this._config=config;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+'|'+/\d{1,2}/.source);}function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig){if(hasOwnProp(childConfig,prop)){if(isObject(parentConfig[prop])&&isObject(childConfig[prop])){res[prop]={};extend(res[prop],parentConfig[prop]);extend(res[prop],childConfig[prop]);}else if(childConfig[prop]!=null){res[prop]=childConfig[prop];}else{delete res[prop];}}}for(prop in parentConfig){if(hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])){res[prop]=extend({},res[prop]);}}return res;}function Locale(config){if(config!=null){this.set(config);}}var keys;if(Object.keys){keys=Object.keys;}else{keys=function(obj){var i,res=[];for(i in obj){if(hasOwnProp(obj,i)){res.push(i);}}return res;};}var defaultCalendar={sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'};function calendar(key,mom,now){var output=this._calendar[key]||this._calendar['sameElse'];return isFunction(output)?output.call(mom,now):output;}var defaultLongDateFormat={LTS:'h:mm:ss A',LT:'h:mm A',L:'MM/DD/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY h:mm A',LLLL:'dddd, MMMM D, YYYY h:mm A'};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format;}this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1);});return this._longDateFormat[key];}var defaultInvalidDate='Invalid date';function invalidDate(){return this._invalidDate;}var defaultOrdinal='%d';var defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace('%d',number);}var defaultRelativeTime={future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'};function relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number);}function pastFuture(diff,output){var format=this._relativeTime[diff>0?'future':'past'];return isFunction(format)?format(output):format.replace(/%s/i,output);}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+'s']=aliases[shorthand]=unit;}function normalizeUnits(units){return typeof units==='string'?aliases[units]||aliases[units.toLowerCase()]:undefined;}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop];}}}return normalizedInput;}var priorities={};function addUnitPriority(unit,priority){priorities[unit]=priority;}function getPrioritizedUnits(unitsObj){var units=[];for(var u in unitsObj){units.push({unit:u,priority:priorities[u]});}units.sort(function(a,b){return a.priority-b.priority;});return units;}function zeroFill(number,targetLength,forceSign){var absNumber=''+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?forceSign?'+':'':'-')+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber;}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==='string'){func=function(){return this[callback]();};}if(token){formatTokenFunctions[token]=func;}if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2]);};}if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token);};}}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,'');}return input.replace(/\\/g,'');}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]];}else{array[i]=removeFormattingTokens(array[i]);}}return function(mom){var output='',i;for(i=0;i<length;i++){output+=isFunction(array[i])?array[i].call(mom,format):array[i];}return output;};}function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate();}format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m);}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input;}localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1;}return format;}var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match3to4=/\d\d\d\d?/;var match5to6=/\d\d\d\d\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return isStrict&&strictRegex?strictRegex:regex;};}function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token));}return regexes[token](config._strict,config._locale);}function unescapeFormat(s){return regexEscape(s.replace('\\','').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4;}));}function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');}var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==='string'){token=[token];}if(isNumber(callback)){func=function(input,array){array[callback]=toInt(input);};}for(i=0;i<token.length;i++){tokens[token[i]]=func;}}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token);});}function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token);}}var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;var WEEK=7;var WEEKDAY=8;addFormatToken('Y',0,0,function(){var y=this.year();return y<=9999?''+y:'+'+y;});addFormatToken(0,['YY',2],0,function(){return this.year()%100;});addFormatToken(0,['YYYY',4],0,'year');addFormatToken(0,['YYYYY',5],0,'year');addFormatToken(0,['YYYYYY',6,true],0,'year');addUnitAlias('year','y');addUnitPriority('year',1);addRegexToken('Y',matchSigned);addRegexToken('YY',match1to2,match2);addRegexToken('YYYY',match1to4,match4);addRegexToken('YYYYY',match1to6,match6);addRegexToken('YYYYYY',match1to6,match6);addParseToken(['YYYYY','YYYYYY'],YEAR);addParseToken('YYYY',function(input,array){array[YEAR]=input.length===2?hooks.parseTwoDigitYear(input):toInt(input);});addParseToken('YY',function(input,array){array[YEAR]=hooks.parseTwoDigitYear(input);});addParseToken('Y',function(input,array){array[YEAR]=parseInt(input,10);});function daysInYear(year){return isLeapYear(year)?366:365;}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0;}hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2000);};var getSetYear=makeGetSet('FullYear',true);function getIsLeapYear(){return isLeapYear(this.year());}function makeGetSet(unit,keepTime){return function(value){if(value!=null){set$1(this,unit,value);hooks.updateOffset(this,keepTime);return this;}else{return get(this,unit);}};}function get(mom,unit){return mom.isValid()?mom._d['get'+(mom._isUTC?'UTC':'')+unit]():NaN;}function set$1(mom,unit,value){if(mom.isValid()&&!isNaN(value)){if(unit==='FullYear'&&isLeapYear(mom.year())&&mom.month()===1&&mom.date()===29){mom._d['set'+(mom._isUTC?'UTC':'')+unit](value,mom.month(),daysInMonth(value,mom.month()));}else{mom._d['set'+(mom._isUTC?'UTC':'')+unit](value);}}}function stringGet(units){units=normalizeUnits(units);if(isFunction(this[units])){return this[units]();}return this;}function stringSet(units,value){if(typeof units==='object'){units=normalizeObjectUnits(units);var prioritized=getPrioritizedUnits(units);for(var i=0;i<prioritized.length;i++){this[prioritized[i].unit](units[prioritized[i].unit]);}}else{units=normalizeUnits(units);if(isFunction(this[units])){return this[units](value);}}return this;}function mod(n,x){return(n%x+x)%x;}var indexOf;if(Array.prototype.indexOf){indexOf=Array.prototype.indexOf;}else{indexOf=function(o){var i;for(i=0;i<this.length;++i){if(this[i]===o){return i;}}return-1;};}function daysInMonth(year,month){if(isNaN(year)||isNaN(month)){return NaN;}var modMonth=mod(month,12);year+=(month-modMonth)/12;return modMonth===1?isLeapYear(year)?29:28:31-modMonth%7%2;}addFormatToken('M',['MM',2],'Mo',function(){return this.month()+1;});addFormatToken('MMM',0,0,function(format){return this.localeData().monthsShort(this,format);});addFormatToken('MMMM',0,0,function(format){return this.localeData().months(this,format);});addUnitAlias('month','M');addUnitPriority('month',8);addRegexToken('M',match1to2);addRegexToken('MM',match1to2,match2);addRegexToken('MMM',function(isStrict,locale){return locale.monthsShortRegex(isStrict);});addRegexToken('MMMM',function(isStrict,locale){return locale.monthsRegex(isStrict);});addParseToken(['M','MM'],function(input,array){array[MONTH]=toInt(input)-1;});addParseToken(['MMM','MMMM'],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month;}else{getParsingFlags(config).invalidMonth=input;}});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var defaultLocaleMonths='January_February_March_April_May_June_July_August_September_October_November_December'.split('_');function localeMonths(m,format){if(!m){return isArray(this._months)?this._months:this._months['standalone'];}return isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?'format':'standalone'][m.month()];}var defaultLocaleMonthsShort='Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');function localeMonthsShort(m,format){if(!m){return isArray(this._monthsShort)?this._monthsShort:this._monthsShort['standalone'];}return isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?'format':'standalone'][m.month()];}function handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){mom=createUTC([2000,i]);this._shortMonthsParse[i]=this.monthsShort(mom,'').toLocaleLowerCase();this._longMonthsParse[i]=this.months(mom,'').toLocaleLowerCase();}}if(strict){if(format==='MMM'){ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null;}}else{if(format==='MMM'){ii=indexOf.call(this._shortMonthsParse,llc);if(ii!==-1){return ii;}ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._longMonthsParse,llc);if(ii!==-1){return ii;}ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null;}}}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact){return handleStrictParse.call(this,monthName,format,strict);}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];}for(i=0;i<12;i++){mom=createUTC([2000,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp('^'+this.months(mom,'').replace('.','')+'$','i');this._shortMonthsParse[i]=new RegExp('^'+this.monthsShort(mom,'').replace('.','')+'$','i');}if(!strict&&!this._monthsParse[i]){regex='^'+this.months(mom,'')+'|^'+this.monthsShort(mom,'');this._monthsParse[i]=new RegExp(regex.replace('.',''),'i');}if(strict&&format==='MMMM'&&this._longMonthsParse[i].test(monthName)){return i;}else if(strict&&format==='MMM'&&this._shortMonthsParse[i].test(monthName)){return i;}else if(!strict&&this._monthsParse[i].test(monthName)){return i;}}}function setMonth(mom,value){var dayOfMonth;if(!mom.isValid()){return mom;}if(typeof value==='string'){if(/^\d+$/.test(value)){value=toInt(value);}else{value=mom.localeData().monthsParse(value);if(!isNumber(value)){return mom;}}}dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d['set'+(mom._isUTC?'UTC':'')+'Month'](value,dayOfMonth);return mom;}function getSetMonth(value){if(value!=null){setMonth(this,value);hooks.updateOffset(this,true);return this;}else{return get(this,'Month');}}function getDaysInMonth(){return daysInMonth(this.year(),this.month());}var defaultMonthsShortRegex=matchWord;function monthsShortRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,'_monthsRegex')){computeMonthsParse.call(this);}if(isStrict){return this._monthsShortStrictRegex;}else{return this._monthsShortRegex;}}else{if(!hasOwnProp(this,'_monthsShortRegex')){this._monthsShortRegex=defaultMonthsShortRegex;}return this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex;}}var defaultMonthsRegex=matchWord;function monthsRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,'_monthsRegex')){computeMonthsParse.call(this);}if(isStrict){return this._monthsStrictRegex;}else{return this._monthsRegex;}}else{if(!hasOwnProp(this,'_monthsRegex')){this._monthsRegex=defaultMonthsRegex;}return this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex;}}function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length;}var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++){mom=createUTC([2000,i]);shortPieces.push(this.monthsShort(mom,''));longPieces.push(this.months(mom,''));mixedPieces.push(this.months(mom,''));mixedPieces.push(this.monthsShort(mom,''));}shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<12;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);}for(i=0;i<24;i++){mixedPieces[i]=regexEscape(mixedPieces[i]);}this._monthsRegex=new RegExp('^('+mixedPieces.join('|')+')','i');this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp('^('+longPieces.join('|')+')','i');this._monthsShortStrictRegex=new RegExp('^('+shortPieces.join('|')+')','i');}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<100&&y>=0&&isFinite(date.getFullYear())){date.setFullYear(y);}return date;}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<100&&y>=0&&isFinite(date.getUTCFullYear())){date.setUTCFullYear(y);}return date;}function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1;}function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset,resYear,resDayOfYear;if(dayOfYear<=0){resYear=year-1;resDayOfYear=daysInYear(resYear)+dayOfYear;}else if(dayOfYear>daysInYear(year)){resYear=year+1;resDayOfYear=dayOfYear-daysInYear(year);}else{resYear=year;resDayOfYear=dayOfYear;}return{year:resYear,dayOfYear:resDayOfYear};}function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;if(week<1){resYear=mom.year()-1;resWeek=week+weeksInYear(resYear,dow,doy);}else if(week>weeksInYear(mom.year(),dow,doy)){resWeek=week-weeksInYear(mom.year(),dow,doy);resYear=mom.year()+1;}else{resYear=mom.year();resWeek=week;}return{week:resWeek,year:resYear};}function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7;}addFormatToken('w',['ww',2],'wo','week');addFormatToken('W',['WW',2],'Wo','isoWeek');addUnitAlias('week','w');addUnitAlias('isoWeek','W');addUnitPriority('week',5);addUnitPriority('isoWeek',5);addRegexToken('w',match1to2);addRegexToken('ww',match1to2,match2);addRegexToken('W',match1to2);addRegexToken('WW',match1to2,match2);addWeekParseToken(['w','ww','W','WW'],function(input,week,config,token){week[token.substr(0,1)]=toInt(input);});function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week;}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow;}function localeFirstDayOfYear(){return this._week.doy;}function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,'d');}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,'d');}addFormatToken('d',0,'do','day');addFormatToken('dd',0,0,function(format){return this.localeData().weekdaysMin(this,format);});addFormatToken('ddd',0,0,function(format){return this.localeData().weekdaysShort(this,format);});addFormatToken('dddd',0,0,function(format){return this.localeData().weekdays(this,format);});addFormatToken('e',0,0,'weekday');addFormatToken('E',0,0,'isoWeekday');addUnitAlias('day','d');addUnitAlias('weekday','e');addUnitAlias('isoWeekday','E');addUnitPriority('day',11);addUnitPriority('weekday',11);addUnitPriority('isoWeekday',11);addRegexToken('d',match1to2);addRegexToken('e',match1to2);addRegexToken('E',match1to2);addRegexToken('dd',function(isStrict,locale){return locale.weekdaysMinRegex(isStrict);});addRegexToken('ddd',function(isStrict,locale){return locale.weekdaysShortRegex(isStrict);});addRegexToken('dddd',function(isStrict,locale){return locale.weekdaysRegex(isStrict);});addWeekParseToken(['dd','ddd','dddd'],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);if(weekday!=null){week.d=weekday;}else{getParsingFlags(config).invalidWeekday=input;}});addWeekParseToken(['d','e','E'],function(input,week,config,token){week[token]=toInt(input);});function parseWeekday(input,locale){if(typeof input!=='string'){return input;}if(!isNaN(input)){return parseInt(input,10);}input=locale.weekdaysParse(input);if(typeof input==='number'){return input;}return null;}function parseIsoWeekday(input,locale){if(typeof input==='string'){return locale.weekdaysParse(input)%7||7;}return isNaN(input)?null:input;}var defaultLocaleWeekdays='Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');function localeWeekdays(m,format){if(!m){return isArray(this._weekdays)?this._weekdays:this._weekdays['standalone'];}return isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?'format':'standalone'][m.day()];}var defaultLocaleWeekdaysShort='Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');function localeWeekdaysShort(m){return m?this._weekdaysShort[m.day()]:this._weekdaysShort;}var defaultLocaleWeekdaysMin='Su_Mo_Tu_We_Th_Fr_Sa'.split('_');function localeWeekdaysMin(m){return m?this._weekdaysMin[m.day()]:this._weekdaysMin;}function handleStrictParse$1(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){mom=createUTC([2000,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(mom,'').toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(mom,'').toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(mom,'').toLocaleLowerCase();}}if(strict){if(format==='dddd'){ii=indexOf.call(this._weekdaysParse,llc);return ii!==-1?ii:null;}else if(format==='ddd'){ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}}else{if(format==='dddd'){ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii;}ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}else if(format==='ddd'){ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii;}ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null;}else{ii=indexOf.call(this._minWeekdaysParse,llc);if(ii!==-1){return ii;}ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii;}ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null;}}}function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact){return handleStrictParse$1.call(this,weekdayName,format,strict);}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[];}for(i=0;i<7;i++){mom=createUTC([2000,1]).day(i);if(strict&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp('^'+this.weekdays(mom,'').replace('.','\.?')+'$','i');this._shortWeekdaysParse[i]=new RegExp('^'+this.weekdaysShort(mom,'').replace('.','\.?')+'$','i');this._minWeekdaysParse[i]=new RegExp('^'+this.weekdaysMin(mom,'').replace('.','\.?')+'$','i');}if(!this._weekdaysParse[i]){regex='^'+this.weekdays(mom,'')+'|^'+this.weekdaysShort(mom,'')+'|^'+this.weekdaysMin(mom,'');this._weekdaysParse[i]=new RegExp(regex.replace('.',''),'i');}if(strict&&format==='dddd'&&this._fullWeekdaysParse[i].test(weekdayName)){return i;}else if(strict&&format==='ddd'&&this._shortWeekdaysParse[i].test(weekdayName)){return i;}else if(strict&&format==='dd'&&this._minWeekdaysParse[i].test(weekdayName)){return i;}else if(!strict&&this._weekdaysParse[i].test(weekdayName)){return i;}}}function getSetDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,'d');}else{return day;}}function getSetLocaleDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,'d');}function getSetISODayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN;}if(input!=null){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7);}else{return this.day()||7;}}var defaultWeekdaysRegex=matchWord;function weekdaysRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,'_weekdaysRegex')){computeWeekdaysParse.call(this);}if(isStrict){return this._weekdaysStrictRegex;}else{return this._weekdaysRegex;}}else{if(!hasOwnProp(this,'_weekdaysRegex')){this._weekdaysRegex=defaultWeekdaysRegex;}return this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex;}}var defaultWeekdaysShortRegex=matchWord;function weekdaysShortRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,'_weekdaysRegex')){computeWeekdaysParse.call(this);}if(isStrict){return this._weekdaysShortStrictRegex;}else{return this._weekdaysShortRegex;}}else{if(!hasOwnProp(this,'_weekdaysShortRegex')){this._weekdaysShortRegex=defaultWeekdaysShortRegex;}return this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;}}var defaultWeekdaysMinRegex=matchWord;function weekdaysMinRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,'_weekdaysRegex')){computeWeekdaysParse.call(this);}if(isStrict){return this._weekdaysMinStrictRegex;}else{return this._weekdaysMinRegex;}}else{if(!hasOwnProp(this,'_weekdaysMinRegex')){this._weekdaysMinRegex=defaultWeekdaysMinRegex;}return this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;}}function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length;}var minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[],i,mom,minp,shortp,longp;for(i=0;i<7;i++){mom=createUTC([2000,1]).day(i);minp=this.weekdaysMin(mom,'');shortp=this.weekdaysShort(mom,'');longp=this.weekdays(mom,'');minPieces.push(minp);shortPieces.push(shortp);longPieces.push(longp);mixedPieces.push(minp);mixedPieces.push(shortp);mixedPieces.push(longp);}minPieces.sort(cmpLenRev);shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<7;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);mixedPieces[i]=regexEscape(mixedPieces[i]);}this._weekdaysRegex=new RegExp('^('+mixedPieces.join('|')+')','i');this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp('^('+longPieces.join('|')+')','i');this._weekdaysShortStrictRegex=new RegExp('^('+shortPieces.join('|')+')','i');this._weekdaysMinStrictRegex=new RegExp('^('+minPieces.join('|')+')','i');}function hFormat(){return this.hours()%12||12;}function kFormat(){return this.hours()||24;}addFormatToken('H',['HH',2],0,'hour');addFormatToken('h',['hh',2],0,hFormat);addFormatToken('k',['kk',2],0,kFormat);addFormatToken('hmm',0,0,function(){return''+hFormat.apply(this)+zeroFill(this.minutes(),2);});addFormatToken('hmmss',0,0,function(){return''+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2);});addFormatToken('Hmm',0,0,function(){return''+this.hours()+zeroFill(this.minutes(),2);});addFormatToken('Hmmss',0,0,function(){return''+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2);});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase);});}meridiem('a',true);meridiem('A',false);addUnitAlias('hour','h');addUnitPriority('hour',13);function matchMeridiem(isStrict,locale){return locale._meridiemParse;}addRegexToken('a',matchMeridiem);addRegexToken('A',matchMeridiem);addRegexToken('H',match1to2);addRegexToken('h',match1to2);addRegexToken('k',match1to2);addRegexToken('HH',match1to2,match2);addRegexToken('hh',match1to2,match2);addRegexToken('kk',match1to2,match2);addRegexToken('hmm',match3to4);addRegexToken('hmmss',match5to6);addRegexToken('Hmm',match3to4);addRegexToken('Hmmss',match5to6);addParseToken(['H','HH'],HOUR);addParseToken(['k','kk'],function(input,array,config){var kInput=toInt(input);array[HOUR]=kInput===24?0:kInput;});addParseToken(['a','A'],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input;});addParseToken(['h','hh'],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true;});addParseToken('hmm',function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));getParsingFlags(config).bigHour=true;});addParseToken('hmmss',function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));getParsingFlags(config).bigHour=true;});addParseToken('Hmm',function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));});addParseToken('Hmmss',function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));});function localeIsPM(input){return(input+'').toLowerCase().charAt(0)==='p';}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?'pm':'PM';}else{return isLower?'am':'AM';}}var getSetHour=makeGetSet('Hours',true);var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse};var locales={};var localeFamilies={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace('_','-'):key;}function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split('-');j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split('-'):null;while(j>0){locale=loadLocale(split.slice(0,j).join('-'));if(locale){return locale;}if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break;}j--;}i++;}return globalLocale;}function loadLocale(name){var oldLocale=null;if(!locales[name]&&typeof module!=='undefined'&&module&&module.exports){try{oldLocale=globalLocale._abbr;var aliasedRequire=require;__webpack_require__(398)("./"+name);getSetGlobalLocale(oldLocale);}catch(e){}}return locales[name];}function getSetGlobalLocale(key,values){var data;if(key){if(isUndefined(values)){data=getLocale(key);}else{data=defineLocale(key,values);}if(data){globalLocale=data;}else{if(typeof console!=='undefined'&&console.warn){console.warn('Locale '+key+' not found. Did you forget to load it?');}}}return globalLocale._abbr;}function defineLocale(name,config){if(config!==null){var locale,parentConfig=baseConfig;config.abbr=name;if(locales[name]!=null){deprecateSimple('defineLocaleOverride','use moment.updateLocale(localeName, config) to change '+'an existing locale. moment.defineLocale(localeName, '+'config) should only be used for creating a new locale '+'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');parentConfig=locales[name]._config;}else if(config.parentLocale!=null){if(locales[config.parentLocale]!=null){parentConfig=locales[config.parentLocale]._config;}else{locale=loadLocale(config.parentLocale);if(locale!=null){parentConfig=locale._config;}else{if(!localeFamilies[config.parentLocale]){localeFamilies[config.parentLocale]=[];}localeFamilies[config.parentLocale].push({name:name,config:config});return null;}}}locales[name]=new Locale(mergeConfigs(parentConfig,config));if(localeFamilies[name]){localeFamilies[name].forEach(function(x){defineLocale(x.name,x.config);});}getSetGlobalLocale(name);return locales[name];}else{delete locales[name];return null;}}function updateLocale(name,config){if(config!=null){var locale,tmpLocale,parentConfig=baseConfig;tmpLocale=loadLocale(name);if(tmpLocale!=null){parentConfig=tmpLocale._config;}config=mergeConfigs(parentConfig,config);locale=new Locale(config);locale.parentLocale=locales[name];locales[name]=locale;getSetGlobalLocale(name);}else{if(locales[name]!=null){if(locales[name].parentLocale!=null){locales[name]=locales[name].parentLocale;}else if(locales[name]!=null){delete locales[name];}}}return locales[name];}function getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr;}if(!key){return globalLocale;}if(!isArray(key)){locale=loadLocale(key);if(locale){return locale;}key=[key];}return chooseLocale(key);}function listLocales(){return keys(locales);}function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0)?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE;}if(getParsingFlags(m)._overflowWeeks&&overflow===-1){overflow=WEEK;}if(getParsingFlags(m)._overflowWeekday&&overflow===-1){overflow=WEEKDAY;}getParsingFlags(m).overflow=overflow;}return m;}function defaults(a,b,c){if(a!=null){return a;}if(b!=null){return b;}return c;}function currentDateArray(config){var nowValue=new Date(hooks.now());if(config._useUTC){return[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()];}return[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()];}function configFromArray(config){var i,date,input=[],currentDate,expectedWeekday,yearToUse;if(config._d){return;}currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config);}if(config._dayOfYear!=null){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)||config._dayOfYear===0){getParsingFlags(config)._overflowDayOfYear=true;}date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate();}for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i];}for(;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i];}if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0;}config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);expectedWeekday=config._useUTC?config._d.getUTCDay():config._d.getDay();if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);}if(config._nextDay){config._a[HOUR]=24;}if(config._w&&typeof config._w.d!=='undefined'&&config._w.d!==expectedWeekday){getParsingFlags(config).weekdayMismatch=true;}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);if(weekday<1||weekday>7){weekdayOverflow=true;}}else{dow=config._locale._week.dow;doy=config._locale._week.doy;var curWeek=weekOfYear(createLocal(),dow,doy);weekYear=defaults(w.gg,config._a[YEAR],curWeek.year);week=defaults(w.w,curWeek.week);if(w.d!=null){weekday=w.d;if(weekday<0||weekday>6){weekdayOverflow=true;}}else if(w.e!=null){weekday=w.e+dow;if(w.e<0||w.e>6){weekdayOverflow=true;}}else{weekday=dow;}}if(week<1||week>weeksInYear(weekYear,dow,doy)){getParsingFlags(config)._overflowWeeks=true;}else if(weekdayOverflow!=null){getParsingFlags(config)._overflowWeekday=true;}else{temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear;}}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var tzRegex=/Z|[+-]\d\d(?::?\d\d)?/;var isoDates=[['YYYYYY-MM-DD',/[+-]\d{6}-\d\d-\d\d/],['YYYY-MM-DD',/\d{4}-\d\d-\d\d/],['GGGG-[W]WW-E',/\d{4}-W\d\d-\d/],['GGGG-[W]WW',/\d{4}-W\d\d/,false],['YYYY-DDD',/\d{4}-\d{3}/],['YYYY-MM',/\d{4}-\d\d/,false],['YYYYYYMMDD',/[+-]\d{10}/],['YYYYMMDD',/\d{8}/],['GGGG[W]WWE',/\d{4}W\d{3}/],['GGGG[W]WW',/\d{4}W\d{2}/,false],['YYYYDDD',/\d{7}/]];var isoTimes=[['HH:mm:ss.SSSS',/\d\d:\d\d:\d\d\.\d+/],['HH:mm:ss,SSSS',/\d\d:\d\d:\d\d,\d+/],['HH:mm:ss',/\d\d:\d\d:\d\d/],['HH:mm',/\d\d:\d\d/],['HHmmss.SSSS',/\d\d\d\d\d\d\.\d+/],['HHmmss,SSSS',/\d\d\d\d\d\d,\d+/],['HHmmss',/\d\d\d\d\d\d/],['HHmm',/\d\d\d\d/],['HH',/\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat;if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0];allowTime=isoDates[i][2]!==false;break;}}if(dateFormat==null){config._isValid=false;return;}if(match[3]){for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||' ')+isoTimes[i][0];break;}}if(timeFormat==null){config._isValid=false;return;}}if(!allowTime&&timeFormat!=null){config._isValid=false;return;}if(match[4]){if(tzRegex.exec(match[4])){tzFormat='Z';}else{config._isValid=false;return;}}config._f=dateFormat+(timeFormat||'')+(tzFormat||'');configFromStringAndFormat(config);}else{config._isValid=false;}}var rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function extractFromRFC2822Strings(yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr){var result=[untruncateYear(yearStr),defaultLocaleMonthsShort.indexOf(monthStr),parseInt(dayStr,10),parseInt(hourStr,10),parseInt(minuteStr,10)];if(secondStr){result.push(parseInt(secondStr,10));}return result;}function untruncateYear(yearStr){var year=parseInt(yearStr,10);if(year<=49){return 2000+year;}else if(year<=999){return 1900+year;}return year;}function preprocessRFC2822(s){return s.replace(/\([^)]*\)|[\n\t]/g,' ').replace(/(\s\s+)/g,' ').trim();}function checkWeekday(weekdayStr,parsedInput,config){if(weekdayStr){var weekdayProvided=defaultLocaleWeekdaysShort.indexOf(weekdayStr),weekdayActual=new Date(parsedInput[0],parsedInput[1],parsedInput[2]).getDay();if(weekdayProvided!==weekdayActual){getParsingFlags(config).weekdayMismatch=true;config._isValid=false;return false;}}return true;}var obsOffsets={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function calculateOffset(obsOffset,militaryOffset,numOffset){if(obsOffset){return obsOffsets[obsOffset];}else if(militaryOffset){return 0;}else{var hm=parseInt(numOffset,10);var m=hm%100,h=(hm-m)/100;return h*60+m;}}function configFromRFC2822(config){var match=rfc2822.exec(preprocessRFC2822(config._i));if(match){var parsedArray=extractFromRFC2822Strings(match[4],match[3],match[2],match[5],match[6],match[7]);if(!checkWeekday(match[1],parsedArray,config)){return;}config._a=parsedArray;config._tzm=calculateOffset(match[8],match[9],match[10]);config._d=createUTCDate.apply(null,config._a);config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);getParsingFlags(config).rfc2822=true;}else{config._isValid=false;}}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return;}configFromISO(config);if(config._isValid===false){delete config._isValid;}else{return;}configFromRFC2822(config);if(config._isValid===false){delete config._isValid;}else{return;}hooks.createFromInputFallback(config);}hooks.createFromInputFallback=deprecate('value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), '+'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are '+'discouraged and will be removed in an upcoming major release. Please refer to '+'http://momentjs.com/guides/#/warnings/js-date/ for more info.',function(config){config._d=new Date(config._i+(config._useUTC?' UTC':''));});hooks.ISO_8601=function(){};hooks.RFC_2822=function(){};function configFromStringAndFormat(config){if(config._f===hooks.ISO_8601){configFromISO(config);return;}if(config._f===hooks.RFC_2822){configFromRFC2822(config);return;}config._a=[];getParsingFlags(config).empty=true;var string=''+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped);}string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length;}if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false;}else{getParsingFlags(config).unusedTokens.push(token);}addTimeToArrayFromToken(token,parsedInput,config);}else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token);}}getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string);}if(config._a[HOUR]<=12&&getParsingFlags(config).bigHour===true&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined;}getParsingFlags(config).parsedDateParts=config._a.slice(0);getParsingFlags(config).meridiem=config._meridiem;config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config);}function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour;}if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem);}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12;}if(!isPm&&hour===12){hour=0;}return hour;}else{return hour;}}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return;}for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC;}tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!isValid(tempConfig)){continue;}currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig;}}extend(config,bestMoment||tempConfig);}function configFromObject(config){if(config._d){return;}var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10);});configFromArray(config);}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,'d');res._nextDay=undefined;}return res;}function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||getLocale(config._l);if(input===null||format===undefined&&input===''){return createInvalid({nullInput:true});}if(typeof input==='string'){config._i=input=config._locale.preparse(input);}if(isMoment(input)){return new Moment(checkOverflow(input));}else if(isDate(input)){config._d=input;}else if(isArray(format)){configFromStringAndArray(config);}else if(format){configFromStringAndFormat(config);}else{configFromInput(config);}if(!isValid(config)){config._d=null;}return config;}function configFromInput(config){var input=config._i;if(isUndefined(input)){config._d=new Date(hooks.now());}else if(isDate(input)){config._d=new Date(input.valueOf());}else if(typeof input==='string'){configFromString(config);}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10);});configFromArray(config);}else if(isObject(input)){configFromObject(config);}else if(isNumber(input)){config._d=new Date(input);}else{hooks.createFromInputFallback(config);}}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(locale===true||locale===false){strict=locale;locale=undefined;}if(isObject(input)&&isObjectEmpty(input)||isArray(input)&&input.length===0){input=undefined;}c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c);}function createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false);}var prototypeMin=deprecate('moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other<this?this:other;}else{return createInvalid();}});var prototypeMax=deprecate('moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other>this?this:other;}else{return createInvalid();}});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0];}if(!moments.length){return createLocal();}res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i];}}return res;}function min(){var args=[].slice.call(arguments,0);return pickBy('isBefore',args);}function max(){var args=[].slice.call(arguments,0);return pickBy('isAfter',args);}var now=function(){return Date.now?Date.now():+new Date();};var ordering=['year','quarter','month','week','day','hour','minute','second','millisecond'];function isDurationValid(m){for(var key in m){if(!(indexOf.call(ordering,key)!==-1&&(m[key]==null||!isNaN(m[key])))){return false;}}var unitHasDecimal=false;for(var i=0;i<ordering.length;++i){if(m[ordering[i]]){if(unitHasDecimal){return false;}if(parseFloat(m[ordering[i]])!==toInt(m[ordering[i]])){unitHasDecimal=true;}}}return true;}function isValid$1(){return this._isValid;}function createInvalid$1(){return createDuration(NaN);}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._isValid=isDurationValid(normalizedInput);this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*1000*60*60;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=getLocale();this._bubble();}function isDuration(obj){return obj instanceof Duration;}function absRound(number){if(number<0){return Math.round(-1*number)*-1;}else{return Math.round(number);}}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign='+';if(offset<0){offset=-offset;sign='-';}return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2);});}offset('Z',':');offset('ZZ','');addRegexToken('Z',matchShortOffset);addRegexToken('ZZ',matchShortOffset);addParseToken(['Z','ZZ'],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(matchShortOffset,input);});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=(string||'').match(matcher);if(matches===null){return null;}var chunk=matches[matches.length-1]||[];var parts=(chunk+'').match(chunkOffset)||['-',0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return minutes===0?0:parts[0]==='+'?minutes:-minutes;}function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?input.valueOf():createLocal(input).valueOf())-res.valueOf();res._d.setTime(res._d.valueOf()+diff);hooks.updateOffset(res,false);return res;}else{return createLocal(input).local();}}function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15;}hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime,keepMinutes){var offset=this._offset||0,localAdjust;if(!this.isValid()){return input!=null?this:NaN;}if(input!=null){if(typeof input==='string'){input=offsetFromString(matchShortOffset,input);if(input===null){return this;}}else if(Math.abs(input)<16&&!keepMinutes){input=input*60;}if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this);}this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,'m');}if(offset!==input){if(!keepLocalTime||this._changeInProgress){addSubtract(this,createDuration(input-offset,'m'),1,false);}else if(!this._changeInProgress){this._changeInProgress=true;hooks.updateOffset(this,true);this._changeInProgress=null;}}return this;}else{return this._isUTC?offset:getDateOffset(this);}}function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=='string'){input=-input;}this.utcOffset(input,keepLocalTime);return this;}else{return-this.utcOffset();}}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime);}function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),'m');}}return this;}function setOffsetToParsedOffset(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true);}else if(typeof this._i==='string'){var tZone=offsetFromString(matchOffset,this._i);if(tZone!=null){this.utcOffset(tZone);}else{this.utcOffset(0,true);}}return this;}function hasAlignedHourOffset(input){if(!this.isValid()){return false;}input=input?createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0;}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset();}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted)){return this._isDSTShifted;}var c={};copyConfig(c,this);c=prepareConfig(c);if(c._a){var other=c._isUTC?createUTC(c._a):createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0;}else{this._isDSTShifted=false;}return this._isDSTShifted;}function isLocal(){return this.isValid()?!this._isUTC:false;}function isUtcOffset(){return this.isValid()?this._isUTC:false;}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:false;}var aspNetRegex=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months};}else if(isNumber(input)){duration={};if(key){duration[key]=input;}else{duration.milliseconds=input;}}else if(!!(match=aspNetRegex.exec(input))){sign=match[1]==='-'?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(absRound(match[MILLISECOND]*1000))*sign};}else if(!!(match=isoRegex.exec(input))){sign=match[1]==='-'?-1:match[1]==='+'?1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)};}else if(duration==null){duration={};}else if(typeof duration==='object'&&('from'in duration||'to'in duration)){diffRes=momentsDifference(createLocal(duration.from),createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months;}ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,'_locale')){ret._locale=input._locale;}return ret;}createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(',','.'));return(isNaN(res)?0:res)*sign;}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,'M').isAfter(other)){--res.months;}res.milliseconds=+other-+base.clone().add(res.months,'M');return res;}function momentsDifference(base,other){var res;if(!(base.isValid()&&other.isValid())){return{milliseconds:0,months:0};}other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other);}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months;}return res;}function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,'moment().'+name+'(period, number) is deprecated. Please use moment().'+name+'(number, period). '+'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');tmp=val;val=period;period=tmp;}val=typeof val==='string'?+val:val;dur=createDuration(val,period);addSubtract(this,dur,direction);return this;};}function addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);if(!mom.isValid()){return;}updateOffset=updateOffset==null?true:updateOffset;if(months){setMonth(mom,get(mom,'Month')+months*isAdding);}if(days){set$1(mom,'Date',get(mom,'Date')+days*isAdding);}if(milliseconds){mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding);}if(updateOffset){hooks.updateOffset(mom,days||months);}}var add=createAdder(1,'add');var subtract=createAdder(-1,'subtract');function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,'days',true);return diff<-6?'sameElse':diff<-1?'lastWeek':diff<0?'lastDay':diff<1?'sameDay':diff<2?'nextDay':diff<7?'nextWeek':'sameElse';}function calendar$1(time,formats){var now=time||createLocal(),sod=cloneWithOffset(now,this).startOf('day'),format=hooks.calendarFormat(this,sod)||'sameElse';var output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,createLocal(now)));}function clone(){return new Moment(this);}function isAfter(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false;}units=normalizeUnits(!isUndefined(units)?units:'millisecond');if(units==='millisecond'){return this.valueOf()>localInput.valueOf();}else{return localInput.valueOf()<this.clone().startOf(units).valueOf();}}function isBefore(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false;}units=normalizeUnits(!isUndefined(units)?units:'millisecond');if(units==='millisecond'){return this.valueOf()<localInput.valueOf();}else{return this.clone().endOf(units).valueOf()<localInput.valueOf();}}function isBetween(from,to,units,inclusivity){inclusivity=inclusivity||'()';return(inclusivity[0]==='('?this.isAfter(from,units):!this.isBefore(from,units))&&(inclusivity[1]===')'?this.isBefore(to,units):!this.isAfter(to,units));}function isSame(input,units){var localInput=isMoment(input)?input:createLocal(input),inputMs;if(!(this.isValid()&&localInput.isValid())){return false;}units=normalizeUnits(units||'millisecond');if(units==='millisecond'){return this.valueOf()===localInput.valueOf();}else{inputMs=localInput.valueOf();return this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf();}}function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units);}function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units);}function diff(input,units,asFloat){var that,zoneDelta,output;if(!this.isValid()){return NaN;}that=cloneWithOffset(input,this);if(!that.isValid()){return NaN;}zoneDelta=(that.utcOffset()-this.utcOffset())*6e4;units=normalizeUnits(units);switch(units){case'year':output=monthDiff(this,that)/12;break;case'month':output=monthDiff(this,that);break;case'quarter':output=monthDiff(this,that)/3;break;case'second':output=(this-that)/1e3;break;case'minute':output=(this-that)/6e4;break;case'hour':output=(this-that)/36e5;break;case'day':output=(this-that-zoneDelta)/864e5;break;case'week':output=(this-that-zoneDelta)/6048e5;break;default:output=this-that;}return asFloat?output:absFloor(output);}function monthDiff(a,b){var wholeMonthDiff=(b.year()-a.year())*12+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,'months'),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,'months');adjust=(b-anchor)/(anchor-anchor2);}else{anchor2=a.clone().add(wholeMonthDiff+1,'months');adjust=(b-anchor)/(anchor2-anchor);}return-(wholeMonthDiff+adjust)||0;}hooks.defaultFormat='YYYY-MM-DDTHH:mm:ssZ';hooks.defaultFormatUtc='YYYY-MM-DDTHH:mm:ss[Z]';function toString(){return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');}function toISOString(keepOffset){if(!this.isValid()){return null;}var utc=keepOffset!==true;var m=utc?this.clone().utc():this;if(m.year()<0||m.year()>9999){return formatMoment(m,utc?'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]':'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ');}if(isFunction(Date.prototype.toISOString)){if(utc){return this.toDate().toISOString();}else{return new Date(this.valueOf()+this.utcOffset()*60*1000).toISOString().replace('Z',formatMoment(m,'Z'));}}return formatMoment(m,utc?'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]':'YYYY-MM-DD[T]HH:mm:ss.SSSZ');}function inspect(){if(!this.isValid()){return'moment.invalid(/* '+this._i+' */)';}var func='moment';var zone='';if(!this.isLocal()){func=this.utcOffset()===0?'moment.utc':'moment.parseZone';zone='Z';}var prefix='['+func+'("]';var year=0<=this.year()&&this.year()<=9999?'YYYY':'YYYYYY';var datetime='-MM-DD[T]HH:mm:ss.SSS';var suffix=zone+'[")]';return this.format(prefix+year+datetime+suffix);}function format(inputString){if(!inputString){inputString=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat;}var output=formatMoment(this,inputString);return this.localeData().postformat(output);}function from(time,withoutSuffix){if(this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())){return createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix);}else{return this.localeData().invalidDate();}}function fromNow(withoutSuffix){return this.from(createLocal(),withoutSuffix);}function to(time,withoutSuffix){if(this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())){return createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix);}else{return this.localeData().invalidDate();}}function toNow(withoutSuffix){return this.to(createLocal(),withoutSuffix);}function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr;}else{newLocaleData=getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData;}return this;}}var lang=deprecate('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',function(key){if(key===undefined){return this.localeData();}else{return this.locale(key);}});function localeData(){return this._locale;}function startOf(units){units=normalizeUnits(units);switch(units){case'year':this.month(0);case'quarter':case'month':this.date(1);case'week':case'isoWeek':case'day':case'date':this.hours(0);case'hour':this.minutes(0);case'minute':this.seconds(0);case'second':this.milliseconds(0);}if(units==='week'){this.weekday(0);}if(units==='isoWeek'){this.isoWeekday(1);}if(units==='quarter'){this.month(Math.floor(this.month()/3)*3);}return this;}function endOf(units){units=normalizeUnits(units);if(units===undefined||units==='millisecond'){return this;}if(units==='date'){units='day';}return this.startOf(units).add(1,units==='isoWeek'?'week':units).subtract(1,'ms');}function valueOf(){return this._d.valueOf()-(this._offset||0)*60000;}function unix(){return Math.floor(this.valueOf()/1000);}function toDate(){return new Date(this.valueOf());}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()];}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()};}function toJSON(){return this.isValid()?this.toISOString():null;}function isValid$2(){return isValid(this);}function parsingFlags(){return extend({},getParsingFlags(this));}function invalidAt(){return getParsingFlags(this).overflow;}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict};}addFormatToken(0,['gg',2],0,function(){return this.weekYear()%100;});addFormatToken(0,['GG',2],0,function(){return this.isoWeekYear()%100;});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter);}addWeekYearFormatToken('gggg','weekYear');addWeekYearFormatToken('ggggg','weekYear');addWeekYearFormatToken('GGGG','isoWeekYear');addWeekYearFormatToken('GGGGG','isoWeekYear');addUnitAlias('weekYear','gg');addUnitAlias('isoWeekYear','GG');addUnitPriority('weekYear',1);addUnitPriority('isoWeekYear',1);addRegexToken('G',matchSigned);addRegexToken('g',matchSigned);addRegexToken('GG',match1to2,match2);addRegexToken('gg',match1to2,match2);addRegexToken('GGGG',match1to4,match4);addRegexToken('gggg',match1to4,match4);addRegexToken('GGGGG',match1to6,match6);addRegexToken('ggggg',match1to6,match6);addWeekParseToken(['gggg','ggggg','GGGG','GGGGG'],function(input,week,config,token){week[token.substr(0,2)]=toInt(input);});addWeekParseToken(['gg','GG'],function(input,week,config,token){week[token]=hooks.parseTwoDigitYear(input);});function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy);}function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4);}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4);}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy);}function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;if(input==null){return weekOfYear(this,dow,doy).year;}else{weeksTarget=weeksInYear(input,dow,doy);if(week>weeksTarget){week=weeksTarget;}return setWeekAll.call(this,input,week,weekday,dow,doy);}}function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);this.year(date.getUTCFullYear());this.month(date.getUTCMonth());this.date(date.getUTCDate());return this;}addFormatToken('Q',0,'Qo','quarter');addUnitAlias('quarter','Q');addUnitPriority('quarter',7);addRegexToken('Q',match1);addParseToken('Q',function(input,array){array[MONTH]=(toInt(input)-1)*3;});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3);}addFormatToken('D',['DD',2],'Do','date');addUnitAlias('date','D');addUnitPriority('date',9);addRegexToken('D',match1to2);addRegexToken('DD',match1to2,match2);addRegexToken('Do',function(isStrict,locale){return isStrict?locale._dayOfMonthOrdinalParse||locale._ordinalParse:locale._dayOfMonthOrdinalParseLenient;});addParseToken(['D','DD'],DATE);addParseToken('Do',function(input,array){array[DATE]=toInt(input.match(match1to2)[0]);});var getSetDayOfMonth=makeGetSet('Date',true);addFormatToken('DDD',['DDDD',3],'DDDo','dayOfYear');addUnitAlias('dayOfYear','DDD');addUnitPriority('dayOfYear',4);addRegexToken('DDD',match1to3);addRegexToken('DDDD',match3);addParseToken(['DDD','DDDD'],function(input,array,config){config._dayOfYear=toInt(input);});function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf('day')-this.clone().startOf('year'))/864e5)+1;return input==null?dayOfYear:this.add(input-dayOfYear,'d');}addFormatToken('m',['mm',2],0,'minute');addUnitAlias('minute','m');addUnitPriority('minute',14);addRegexToken('m',match1to2);addRegexToken('mm',match1to2,match2);addParseToken(['m','mm'],MINUTE);var getSetMinute=makeGetSet('Minutes',false);addFormatToken('s',['ss',2],0,'second');addUnitAlias('second','s');addUnitPriority('second',15);addRegexToken('s',match1to2);addRegexToken('ss',match1to2,match2);addParseToken(['s','ss'],SECOND);var getSetSecond=makeGetSet('Seconds',false);addFormatToken('S',0,0,function(){return~~(this.millisecond()/100);});addFormatToken(0,['SS',2],0,function(){return~~(this.millisecond()/10);});addFormatToken(0,['SSS',3],0,'millisecond');addFormatToken(0,['SSSS',4],0,function(){return this.millisecond()*10;});addFormatToken(0,['SSSSS',5],0,function(){return this.millisecond()*100;});addFormatToken(0,['SSSSSS',6],0,function(){return this.millisecond()*1000;});addFormatToken(0,['SSSSSSS',7],0,function(){return this.millisecond()*10000;});addFormatToken(0,['SSSSSSSS',8],0,function(){return this.millisecond()*100000;});addFormatToken(0,['SSSSSSSSS',9],0,function(){return this.millisecond()*1000000;});addUnitAlias('millisecond','ms');addUnitPriority('millisecond',16);addRegexToken('S',match1to3,match1);addRegexToken('SS',match1to3,match2);addRegexToken('SSS',match1to3,match3);var token;for(token='SSSS';token.length<=9;token+='S'){addRegexToken(token,matchUnsigned);}function parseMs(input,array){array[MILLISECOND]=toInt(('0.'+input)*1000);}for(token='S';token.length<=9;token+='S'){addParseToken(token,parseMs);}var getSetMillisecond=makeGetSet('Milliseconds',false);addFormatToken('z',0,0,'zoneAbbr');addFormatToken('zz',0,0,'zoneName');function getZoneAbbr(){return this._isUTC?'UTC':'';}function getZoneName(){return this._isUTC?'Coordinated Universal Time':'';}var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from;proto.fromNow=fromNow;proto.to=to;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$2;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate('dates accessor is deprecated. Use date instead.',getSetDayOfMonth);proto.months=deprecate('months accessor is deprecated. Use month instead',getSetMonth);proto.years=deprecate('years accessor is deprecated. Use year instead',getSetYear);proto.zone=deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/',getSetZone);proto.isDSTShifted=deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information',isDaylightSavingTimeShifted);function createUnix(input){return createLocal(input*1000);}function createInZone(){return createLocal.apply(null,arguments).parseZone();}function preParsePostFormat(string){return string;}var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(format,index,field,setter){var locale=getLocale();var utc=createUTC().set(setter,index);return locale[field](utc,format);}function listMonthsImpl(format,index,field){if(isNumber(format)){index=format;format=undefined;}format=format||'';if(index!=null){return get$1(format,index,field,'month');}var i;var out=[];for(i=0;i<12;i++){out[i]=get$1(format,i,field,'month');}return out;}function listWeekdaysImpl(localeSorted,format,index,field){if(typeof localeSorted==='boolean'){if(isNumber(format)){index=format;format=undefined;}format=format||'';}else{format=localeSorted;index=format;localeSorted=false;if(isNumber(format)){index=format;format=undefined;}format=format||'';}var locale=getLocale(),shift=localeSorted?locale._week.dow:0;if(index!=null){return get$1(format,(index+shift)%7,field,'day');}var i;var out=[];for(i=0;i<7;i++){out[i]=get$1(format,(i+shift)%7,field,'day');}return out;}function listMonths(format,index){return listMonthsImpl(format,index,'months');}function listMonthsShort(format,index){return listMonthsImpl(format,index,'monthsShort');}function listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,'weekdays');}function listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,'weekdaysShort');}function listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,'weekdaysMin');}getSetGlobalLocale('en',{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=toInt(number%100/10)===1?'th':b===1?'st':b===2?'nd':b===3?'rd':'th';return number+output;}});hooks.lang=deprecate('moment.lang is deprecated. Use moment.locale instead.',getSetGlobalLocale);hooks.langData=deprecate('moment.langData is deprecated. Use moment.localeData instead.',getLocale);var mathAbs=Math.abs;function abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this;}function addSubtract$1(duration,input,value,direction){var other=createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble();}function add$1(input,value){return addSubtract$1(this,input,value,1);}function subtract$1(input,value){return addSubtract$1(this,input,value,-1);}function absCeil(number){if(number<0){return Math.floor(number);}else{return Math.ceil(number);}}function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years,monthsFromDays;if(!(milliseconds>=0&&days>=0&&months>=0||milliseconds<=0&&days<=0&&months<=0)){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0;}data.milliseconds=milliseconds%1000;seconds=absFloor(milliseconds/1000);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this;}function daysToMonths(days){return days*4800/146097;}function monthsToDays(months){return months*146097/4800;}function as(units){if(!this.isValid()){return NaN;}var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==='month'||units==='year'){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);return units==='month'?months:months/12;}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case'week':return days/7+milliseconds/6048e5;case'day':return days+milliseconds/864e5;case'hour':return days*24+milliseconds/36e5;case'minute':return days*1440+milliseconds/6e4;case'second':return days*86400+milliseconds/1000;case'millisecond':return Math.floor(days*864e5)+milliseconds;default:throw new Error('Unknown unit '+units);}}}function valueOf$1(){if(!this.isValid()){return NaN;}return this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6;}function makeAs(alias){return function(){return this.as(alias);};}var asMilliseconds=makeAs('ms');var asSeconds=makeAs('s');var asMinutes=makeAs('m');var asHours=makeAs('h');var asDays=makeAs('d');var asWeeks=makeAs('w');var asMonths=makeAs('M');var asYears=makeAs('y');function clone$1(){return createDuration(this);}function get$2(units){units=normalizeUnits(units);return this.isValid()?this[units+'s']():NaN;}function makeGetter(name){return function(){return this.isValid()?this._data[name]:NaN;};}var milliseconds=makeGetter('milliseconds');var seconds=makeGetter('seconds');var minutes=makeGetter('minutes');var hours=makeGetter('hours');var days=makeGetter('days');var months=makeGetter('months');var years=makeGetter('years');function weeks(){return absFloor(this.days()/7);}var round=Math.round;var thresholds={ss:44,s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture);}function relativeTime$1(posNegDuration,withoutSuffix,locale){var duration=createDuration(posNegDuration).abs();var seconds=round(duration.as('s'));var minutes=round(duration.as('m'));var hours=round(duration.as('h'));var days=round(duration.as('d'));var months=round(duration.as('M'));var years=round(duration.as('y'));var a=seconds<=thresholds.ss&&['s',seconds]||seconds<thresholds.s&&['ss',seconds]||minutes<=1&&['m']||minutes<thresholds.m&&['mm',minutes]||hours<=1&&['h']||hours<thresholds.h&&['hh',hours]||days<=1&&['d']||days<thresholds.d&&['dd',days]||months<=1&&['M']||months<thresholds.M&&['MM',months]||years<=1&&['y']||['yy',years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a);}function getSetRelativeTimeRounding(roundingFunction){if(roundingFunction===undefined){return round;}if(typeof roundingFunction==='function'){round=roundingFunction;return true;}return false;}function getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false;}if(limit===undefined){return thresholds[threshold];}thresholds[threshold]=limit;if(threshold==='s'){thresholds.ss=limit-1;}return true;}function humanize(withSuffix){if(!this.isValid()){return this.localeData().invalidDate();}var locale=this.localeData();var output=relativeTime$1(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output);}return locale.postformat(output);}var abs$1=Math.abs;function sign(x){return(x>0)-(x<0)||+x;}function toISOString$1(){if(!this.isValid()){return this.localeData().invalidDate();}var seconds=abs$1(this._milliseconds)/1000;var days=abs$1(this._days);var months=abs$1(this._months);var minutes,hours,years;minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;var Y=years;var M=months;var D=days;var h=hours;var m=minutes;var s=seconds?seconds.toFixed(3).replace(/\.?0+$/,''):'';var total=this.asSeconds();if(!total){return'P0D';}var totalSign=total<0?'-':'';var ymSign=sign(this._months)!==sign(total)?'-':'';var daysSign=sign(this._days)!==sign(total)?'-':'';var hmsSign=sign(this._milliseconds)!==sign(total)?'-':'';return totalSign+'P'+(Y?ymSign+Y+'Y':'')+(M?ymSign+M+'M':'')+(D?daysSign+D+'D':'')+(h||m||s?'T':'')+(h?hmsSign+h+'H':'')+(m?hmsSign+m+'M':'')+(s?hmsSign+s+'S':'');}var proto$2=Duration.prototype;proto$2.isValid=isValid$1;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.clone=clone$1;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',toISOString$1);proto$2.lang=lang;addFormatToken('X',0,0,'unix');addFormatToken('x',0,0,'valueOf');addRegexToken('x',matchSigned);addRegexToken('X',matchTimestamp);addParseToken('X',function(input,array,config){config._d=new Date(parseFloat(input,10)*1000);});addParseToken('x',function(input,array,config){config._d=new Date(toInt(input));});hooks.version='2.22.1';setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;hooks.HTML5_FMT={DATETIME_LOCAL:'YYYY-MM-DDTHH:mm',DATETIME_LOCAL_SECONDS:'YYYY-MM-DDTHH:mm:ss',DATETIME_LOCAL_MS:'YYYY-MM-DDTHH:mm:ss.SSS',DATE:'YYYY-MM-DD',TIME:'HH:mm',TIME_SECONDS:'HH:mm:ss',TIME_MS:'HH:mm:ss.SSS',WEEK:'YYYY-[W]WW',MONTH:'YYYY-MM'};return hooks;});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(82)(module)))

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

var before=__webpack_require__(399);function once(func){return before(2,func);}module.exports=once;

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

var isObject=__webpack_require__(9),now=__webpack_require__(393),toNumber=__webpack_require__(124);var FUNC_ERROR_TEXT='Expected a function';var nativeMax=Math.max,nativeMin=Math.min;function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}wait=toNumber(wait)||0;if(isObject(options)){leading=!!options.leading;maxing='maxWait'in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing='trailing'in options?!!options.trailing:trailing;}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result;}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result;}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting;}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait;}function timerExpired(){var time=now();if(shouldInvoke(time)){return trailingEdge(time);}timerId=setTimeout(timerExpired,remainingWait(time));}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time);}lastArgs=lastThis=undefined;return result;}function cancel(){if(timerId!==undefined){clearTimeout(timerId);}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined;}function flush(){return timerId===undefined?result:trailingEdge(now());}function debounced(){var time=now(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime);}if(maxing){timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime);}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait);}return result;}debounced.cancel=cancel;debounced.flush=flush;return debounced;}module.exports=debounce;

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

var MapCache=__webpack_require__(397);var FUNC_ERROR_TEXT='Expected a function';function memoize(func,resolver){if(typeof func!='function'||resolver!=null&&typeof resolver!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result;};memoized.cache=new(memoize.Cache||MapCache)();return memoized;}memoize.Cache=MapCache;module.exports=memoize;

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

var convert=__webpack_require__(17),func=convert('flow',__webpack_require__(350));func.placeholder=__webpack_require__(14);module.exports=func;

/***/ }),
/* 5 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 6 */
/***/ (function(module, exports) {

var isArray=Array.isArray;module.exports=isArray;

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

var baseRest=__webpack_require__(19),pullAll=__webpack_require__(396);var pull=baseRest(pullAll);module.exports=pull;

/***/ }),
/* 8 */
/***/ (function(module, exports) {

function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined;}module.exports=last;

/***/ }),
/* 9 */
/***/ (function(module, exports) {

function isObject(value){var type=typeof value;return value!=null&&(type=='object'||type=='function');}module.exports=isObject;

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

var debounce=__webpack_require__(2),isObject=__webpack_require__(9);var FUNC_ERROR_TEXT='Expected a function';function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}if(isObject(options)){leading='leading'in options?!!options.leading:leading;trailing='trailing'in options?!!options.trailing:trailing;}return debounce(func,wait,{'leading':leading,'maxWait':wait,'trailing':trailing});}module.exports=throttle;

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

var baseIsEqual=__webpack_require__(99);function isEqual(value,other){return baseIsEqual(value,other);}module.exports=isEqual;

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

var convert=__webpack_require__(17),func=convert('map',__webpack_require__(332));func.placeholder=__webpack_require__(14);module.exports=func;

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

var baseKeys=__webpack_require__(105),getTag=__webpack_require__(45),isArguments=__webpack_require__(44),isArray=__webpack_require__(6),isArrayLike=__webpack_require__(67),isBuffer=__webpack_require__(35),isPrototype=__webpack_require__(107),isTypedArray=__webpack_require__(48);var mapTag='[object Map]',setTag='[object Set]';var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function isEmpty(value){if(value==null){return true;}if(isArrayLike(value)&&(isArray(value)||typeof value=='string'||typeof value.splice=='function'||isBuffer(value)||isTypedArray(value)||isArguments(value))){return!value.length;}var tag=getTag(value);if(tag==mapTag||tag==setTag){return!value.size;}if(isPrototype(value)){return!baseKeys(value).length;}for(var key in value){if(hasOwnProperty.call(value,key)){return false;}}return true;}module.exports=isEmpty;

/***/ }),
/* 14 */
/***/ (function(module, exports) {

module.exports={};

/***/ }),
/* 15 */
/***/ (function(module, exports) {

function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array);}return result;}module.exports=arrayMap;

/***/ }),
/* 16 */
/***/ (function(module, exports) {

function compact(array){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value){result[resIndex++]=value;}}return result;}module.exports=compact;

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

var baseConvert=__webpack_require__(375),util=__webpack_require__(373);function convert(name,func,options){return baseConvert(util,name,func,options);}module.exports=convert;

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

var freeGlobal=__webpack_require__(392);var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();module.exports=root;

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

var identity=__webpack_require__(127),overRest=__webpack_require__(126),setToString=__webpack_require__(125);function baseRest(func,start){return setToString(overRest(func,start,identity),func+'');}module.exports=baseRest;

/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

var convert=__webpack_require__(17),func=convert('filter',__webpack_require__(317));func.placeholder=__webpack_require__(14);module.exports=func;

/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten=__webpack_require__(68),baseOrderBy=__webpack_require__(331),baseRest=__webpack_require__(19),isIterateeCall=__webpack_require__(43);var sortBy=baseRest(function(collection,iteratees){if(collection==null){return[];}var length=iteratees.length;if(length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])){iteratees=[];}else if(length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])){iteratees=[iteratees[0]];}return baseOrderBy(collection,baseFlatten(iteratees,1),[]);});module.exports=sortBy;

/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

var defineProperty=__webpack_require__(371);function baseAssignValue(object,key,value){if(key=='__proto__'&&defineProperty){defineProperty(object,key,{'configurable':true,'enumerable':true,'value':value,'writable':true});}else{object[key]=value;}}module.exports=baseAssignValue;

/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

var assignValue=__webpack_require__(71),baseAssignValue=__webpack_require__(22);function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key];}if(isNew){baseAssignValue(object,key,newValue);}else{assignValue(object,key,newValue);}}return object;}module.exports=copyObject;

/***/ }),
/* 24 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 25 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee=__webpack_require__(5),baseUniq=__webpack_require__(98);function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,baseIteratee(iteratee,2)):[];}module.exports=uniqBy;

/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

var baseClamp=__webpack_require__(318),toNumber=__webpack_require__(124);function clamp(number,lower,upper){if(upper===undefined){upper=lower;lower=undefined;}if(upper!==undefined){upper=toNumber(upper);upper=upper===upper?upper:0;}if(lower!==undefined){lower=toNumber(lower);lower=lower===lower?lower:0;}return baseClamp(toNumber(number),lower,upper);}module.exports=clamp;

/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

var convert=__webpack_require__(17),func=convert('keyBy',__webpack_require__(84));func.placeholder=__webpack_require__(14);module.exports=func;

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

var convert=__webpack_require__(17),func=convert('sortBy',__webpack_require__(21));func.placeholder=__webpack_require__(14);module.exports=func;

/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

var baseRest=__webpack_require__(19),unzipWith=__webpack_require__(346);var zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;iteratee=typeof iteratee=='function'?(arrays.pop(),iteratee):undefined;return unzipWith(arrays,iteratee);});module.exports=zipWith;

/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

var baseDifference=__webpack_require__(97),baseFlatten=__webpack_require__(68),baseRest=__webpack_require__(19),isArrayLikeObject=__webpack_require__(33);var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true)):[];});module.exports=difference;

/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

var arrayEach=__webpack_require__(76),baseCreate=__webpack_require__(79),baseForOwn=__webpack_require__(75),baseIteratee=__webpack_require__(5),getPrototype=__webpack_require__(74),isArray=__webpack_require__(6),isBuffer=__webpack_require__(35),isFunction=__webpack_require__(49),isObject=__webpack_require__(9),isTypedArray=__webpack_require__(48);function transform(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);iteratee=baseIteratee(iteratee,4);if(accumulator==null){var Ctor=object&&object.constructor;if(isArrLike){accumulator=isArr?new Ctor():[];}else if(isObject(object)){accumulator=isFunction(Ctor)?baseCreate(getPrototype(object)):{};}else{accumulator={};}}(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object);});return accumulator;}module.exports=transform;

/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

var isArrayLike=__webpack_require__(67),isObjectLike=__webpack_require__(34);function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value);}module.exports=isArrayLikeObject;

/***/ }),
/* 34 */
/***/ (function(module, exports) {

function isObjectLike(value){return value!=null&&typeof value=='object';}module.exports=isObjectLike;

/***/ }),
/* 35 */
/***/ (function(module, exports) {

function stubFalse(){return false;}module.exports=stubFalse;

/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

var isArray=__webpack_require__(6),isKey=__webpack_require__(115),stringToPath=__webpack_require__(114),toString=__webpack_require__(78);function castPath(value,object){if(isArray(value)){return value;}return isKey(value,object)?[value]:stringToPath(toString(value));}module.exports=castPath;

/***/ }),
/* 37 */
/***/ (function(module, exports) {

function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index];}return array;}module.exports=copyArray;

/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

var baseAssignValue=__webpack_require__(22),baseForOwn=__webpack_require__(75),baseIteratee=__webpack_require__(5);function mapValues(object,iteratee){var result={};iteratee=baseIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object));});return result;}module.exports=mapValues;

/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap=__webpack_require__(15),baseIteratee=__webpack_require__(5),basePickBy=__webpack_require__(101),getAllKeysIn=__webpack_require__(109);function pickBy(object,predicate){if(object==null){return{};}var props=arrayMap(getAllKeysIn(object),function(prop){return[prop];});predicate=baseIteratee(predicate);return basePickBy(object,props,function(value,path){return predicate(value,path[0]);});}module.exports=pickBy;

/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

var baseAssignValue=__webpack_require__(22),createAggregator=__webpack_require__(72);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value);}else{baseAssignValue(result,key,[value]);}});module.exports=groupBy;

/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {

var baseIndexOf=__webpack_require__(80);function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1;}module.exports=arrayIncludes;

/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

var isArray=__webpack_require__(6);function castArray(){if(!arguments.length){return[];}var value=arguments[0];return isArray(value)?value:[value];}module.exports=castArray;

/***/ }),
/* 43 */
/***/ (function(module, exports) {

function stubFalse(){return false;}module.exports=stubFalse;

/***/ }),
/* 44 */
/***/ (function(module, exports) {

function stubFalse(){return false;}module.exports=stubFalse;

/***/ }),
/* 45 */
/***/ (function(module, exports) {

var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value);}module.exports=objectToString;

/***/ }),
/* 46 */
/***/ (function(module, exports) {

function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key);}}return result;}module.exports=nativeKeysIn;

/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

var Stack=__webpack_require__(70),arrayEach=__webpack_require__(76),assignValue=__webpack_require__(71),baseAssign=__webpack_require__(112),baseAssignIn=__webpack_require__(368),cloneBuffer=__webpack_require__(111),copyArray=__webpack_require__(37),copySymbols=__webpack_require__(367),copySymbolsIn=__webpack_require__(365),getAllKeys=__webpack_require__(110),getAllKeysIn=__webpack_require__(109),getTag=__webpack_require__(45),initCloneArray=__webpack_require__(363),initCloneByTag=__webpack_require__(362),initCloneObject=__webpack_require__(108),isArray=__webpack_require__(6),isBuffer=__webpack_require__(35),isMap=__webpack_require__(361),isObject=__webpack_require__(9),isSet=__webpack_require__(360),keys=__webpack_require__(51);var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var argsTag='[object Arguments]',arrayTag='[object Array]',boolTag='[object Boolean]',dateTag='[object Date]',errorTag='[object Error]',funcTag='[object Function]',genTag='[object GeneratorFunction]',mapTag='[object Map]',numberTag='[object Number]',objectTag='[object Object]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',symbolTag='[object Symbol]',weakMapTag='[object WeakMap]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer){result=object?customizer(value,key,object,stack):customizer(value);}if(result!==undefined){return result;}if(!isObject(value)){return value;}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result);}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep);}if(tag==objectTag||tag==argsTag||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value));}}else{if(!cloneableTags[tag]){return object?value:{};}result=initCloneByTag(value,tag,isDeep);}}stack||(stack=new Stack());var stacked=stack.get(value);if(stacked){return stacked;}stack.set(value,result);if(isSet(value)){value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack));});return result;}if(isMap(value)){value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack));});return result;}var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key];}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack));});return result;}module.exports=baseClone;

/***/ }),
/* 48 */
/***/ (function(module, exports) {

function stubFalse(){return false;}module.exports=stubFalse;

/***/ }),
/* 49 */
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag=__webpack_require__(73),isObject=__webpack_require__(9);var asyncTag='[object AsyncFunction]',funcTag='[object Function]',genTag='[object GeneratorFunction]',proxyTag='[object Proxy]';function isFunction(value){if(!isObject(value)){return false;}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag;}module.exports=isFunction;

/***/ }),
/* 50 */
/***/ (function(module, exports) {

function overArg(func,transform){return function(arg){return func(transform(arg));};}module.exports=overArg;

/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

var overArg=__webpack_require__(50);var nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys;

/***/ }),
/* 52 */
/***/ (function(module, exports) {

function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start;}end=end>length?length:end;if(end<0){end+=length;}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start];}return result;}module.exports=baseSlice;

/***/ }),
/* 53 */
/***/ (function(module, exports) {

function stubFalse(){return false;}module.exports=stubFalse;

/***/ }),
/* 54 */
/***/ (function(module, exports) {

var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=='number'||type!='symbol'&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}module.exports=isIndex;

/***/ }),
/* 55 */
/***/ (function(module, exports, __webpack_require__) {

var baseCreate=__webpack_require__(79),isObject=__webpack_require__(9);function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor();case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding;};}module.exports=createCtor;

/***/ }),
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

var baseSetData=__webpack_require__(391),createBind=__webpack_require__(390),createCurry=__webpack_require__(389),createHybrid=__webpack_require__(123),createPartial=__webpack_require__(384),getData=__webpack_require__(116),mergeData=__webpack_require__(383),setData=__webpack_require__(120),setWrapToString=__webpack_require__(119),toInteger=__webpack_require__(25);var FUNC_ERROR_TEXT='Expected a function';var WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64;var nativeMax=Math.max;function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var length=partials?partials.length:0;if(!length){bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG);partials=holders=undefined;}ary=ary===undefined?ary:nativeMax(toInteger(ary),0);arity=arity===undefined?arity:toInteger(arity);length-=holders?holders.length:0;if(bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined;}var data=isBindKey?undefined:getData(func);var newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);}func=newData[0];bitmask=newData[1];thisArg=newData[2];partials=newData[3];holders=newData[4];arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0);if(!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)){bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG);}if(!bitmask||bitmask==WRAP_BIND_FLAG){var result=createBind(func,bitmask,thisArg);}else if(bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG){result=createCurry(func,bitmask,arity);}else if((bitmask==WRAP_PARTIAL_FLAG||bitmask==(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG))&&!holders.length){result=createPartial(func,bitmask,thisArg,partials);}else{result=createHybrid.apply(undefined,newData);}var setter=data?baseSetData:setData;return setWrapToString(setter(result,newData),func,bitmask);}module.exports=createWrap;

/***/ }),
/* 57 */
/***/ (function(module, exports) {

function baseUnary(func){return function(value){return func(value);};}module.exports=baseUnary;

/***/ }),
/* 58 */
/***/ (function(module, exports) {

function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2]);}return func.apply(thisArg,args);}module.exports=apply;

/***/ }),
/* 59 */
/***/ (function(module, exports, __webpack_require__) {

var eq=__webpack_require__(81);function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}module.exports=assocIndexOf;

/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

var baseClone=__webpack_require__(47);var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG);}module.exports=cloneDeep;

/***/ }),
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

var baseDifference=__webpack_require__(97),baseRest=__webpack_require__(19),isArrayLikeObject=__webpack_require__(33);var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[];});module.exports=without;

/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

var baseExtremum=__webpack_require__(309),baseGt=__webpack_require__(308),baseIteratee=__webpack_require__(5);function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,baseIteratee(iteratee,2),baseGt):undefined;}module.exports=maxBy;

/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

var createWrap=__webpack_require__(56);var WRAP_CURRY_RIGHT_FLAG=16;function curryRight(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curryRight.placeholder;return result;}curryRight.placeholder={};module.exports=curryRight;

/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

var baseAssignValue=__webpack_require__(22),baseForOwn=__webpack_require__(75),baseIteratee=__webpack_require__(5);function mapKeys(object,iteratee){var result={};iteratee=baseIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value);});return result;}module.exports=mapKeys;

/***/ }),
/* 65 */
/***/ (function(module, exports) {

function arrayIncludesWith(array,value,comparator){var index=-1,length=array==null?0:array.length;while(++index<length){if(comparator(value,array[index])){return true;}}return false;}module.exports=arrayIncludesWith;

/***/ }),
/* 66 */
/***/ (function(module, exports, __webpack_require__) {

var baseIndexOf=__webpack_require__(80);function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1;}module.exports=arrayIncludes;

/***/ }),
/* 67 */
/***/ (function(module, exports, __webpack_require__) {

var isFunction=__webpack_require__(49),isLength=__webpack_require__(103);function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}module.exports=isArrayLike;

/***/ }),
/* 68 */
/***/ (function(module, exports, __webpack_require__) {

var arrayPush=__webpack_require__(354),isFlattenable=__webpack_require__(353);function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result);}else{arrayPush(result,value);}}else if(!isStrict){result[result.length]=value;}}return result;}module.exports=baseFlatten;

/***/ }),
/* 69 */
/***/ (function(module, exports, __webpack_require__) {

var flatten=__webpack_require__(85),overRest=__webpack_require__(126),setToString=__webpack_require__(125);function flatRest(func){return setToString(overRest(func,undefined,flatten),func+'');}module.exports=flatRest;

/***/ }),
/* 70 */
/***/ (function(module, exports, __webpack_require__) {

var listCacheClear=__webpack_require__(132),listCacheDelete=__webpack_require__(131),listCacheGet=__webpack_require__(130),listCacheHas=__webpack_require__(129),listCacheSet=__webpack_require__(128);function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache;

/***/ }),
/* 71 */
/***/ (function(module, exports, __webpack_require__) {

var baseAssignValue=__webpack_require__(22),eq=__webpack_require__(81);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value);}}module.exports=assignValue;

/***/ }),
/* 72 */
/***/ (function(module, exports, __webpack_require__) {

var arrayAggregator=__webpack_require__(377),baseAggregator=__webpack_require__(376),baseIteratee=__webpack_require__(5),isArray=__webpack_require__(6);function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,baseIteratee(iteratee,2),accumulator);};}module.exports=createAggregator;

/***/ }),
/* 73 */
/***/ (function(module, exports) {

var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value);}module.exports=objectToString;

/***/ }),
/* 74 */
/***/ (function(module, exports, __webpack_require__) {

var overArg=__webpack_require__(50);var getPrototype=overArg(Object.getPrototypeOf,Object);module.exports=getPrototype;

/***/ }),
/* 75 */
/***/ (function(module, exports, __webpack_require__) {

var baseFor=__webpack_require__(113),keys=__webpack_require__(51);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys);}module.exports=baseForOwn;

/***/ }),
/* 76 */
/***/ (function(module, exports) {

function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break;}}return array;}module.exports=arrayEach;

/***/ }),
/* 77 */
/***/ (function(module, exports, __webpack_require__) {

var castPath=__webpack_require__(36),toKey=__webpack_require__(24);function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])];}return index&&index==length?object:undefined;}module.exports=baseGet;

/***/ }),
/* 78 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 79 */
/***/ (function(module, exports, __webpack_require__) {

var isObject=__webpack_require__(9);var objectCreate=Object.create;var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{};}if(objectCreate){return objectCreate(proto);}object.prototype=proto;var result=new object();object.prototype=undefined;return result;};}();module.exports=baseCreate;

/***/ }),
/* 80 */
/***/ (function(module, exports) {

function strictIndexOf(array,value,fromIndex){var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index;}}return-1;}module.exports=strictIndexOf;

/***/ }),
/* 81 */
/***/ (function(module, exports) {

function eq(value,other){return value===other||value!==value&&other!==other;}module.exports=eq;

/***/ }),
/* 82 */
/***/ (function(module, exports) {

module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];if(!module.children)module.children=[];Object.defineProperty(module,"loaded",{enumerable:true,get:function(){return module.l;}});Object.defineProperty(module,"id",{enumerable:true,get:function(){return module.i;}});module.webpackPolyfill=1;}return module;};

/***/ }),
/* 83 */
/***/ (function(module, exports) {

function head(array){return array&&array.length?array[0]:undefined;}module.exports=head;

/***/ }),
/* 84 */
/***/ (function(module, exports, __webpack_require__) {

var baseAssignValue=__webpack_require__(22),createAggregator=__webpack_require__(72);var keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value);});module.exports=keyBy;

/***/ }),
/* 85 */
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten=__webpack_require__(68);function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[];}module.exports=flatten;

/***/ }),
/* 86 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});var elementResizeDetectorMaker=__webpack_require__(303);var ResizeObserverLite=function(){function ResizeObserverLite(handler){var _this=this;this.handler=handler;this.listenedElement=null;this.hasResizeObserver=typeof window.ResizeObserver!=='undefined';if(this.hasResizeObserver){this.rz=new ResizeObserver(function(entries){_this.handler(getSize(entries[0].target));});}else{this.erd=elementResizeDetectorMaker({strategy:'object'});}}ResizeObserverLite.prototype.observe=function(element){var _this=this;if(this.listenedElement!==element){if(this.listenedElement){this.disconnect();}if(element){if(this.hasResizeObserver){this.rz.observe(element);}else{this.erd.listenTo(element,function(element){_this.handler(getSize(element));});}}this.listenedElement=element;}};ResizeObserverLite.prototype.disconnect=function(){if(this.listenedElement){if(this.hasResizeObserver){this.rz.disconnect();}else{this.erd.uninstall(this.listenedElement);}this.listenedElement=null;}};return ResizeObserverLite;}();exports.default=ResizeObserverLite;function getSize(element){return{width:getNumber(window.getComputedStyle(element)['width']),height:getNumber(window.getComputedStyle(element)['height'])};}function getNumber(str){var m=/^([0-9\.]+)px$/.exec(str);return m?parseFloat(m[1]):0;}

/***/ }),
/* 87 */
/***/ (function(module, exports, __webpack_require__) {

var baseUniq=__webpack_require__(98);function uniq(array){return array&&array.length?baseUniq(array):[];}module.exports=uniq;

/***/ }),
/* 88 */
/***/ (function(module, exports, __webpack_require__) {

var createFind=__webpack_require__(312),findIndex=__webpack_require__(311);var find=createFind(findIndex);module.exports=find;

/***/ }),
/* 89 */
/***/ (function(module, exports, __webpack_require__) {

var baseClone=__webpack_require__(47),baseMatchesProperty=__webpack_require__(316);var CLONE_DEEP_FLAG=1;function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG));}module.exports=matchesProperty;

/***/ }),
/* 90 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;(function(Math){var trimLeft=/^\s+/,trimRight=/\s+$/,tinyCounter=0,mathRound=Math.round,mathMin=Math.min,mathMax=Math.max,mathRandom=Math.random;function tinycolor(color,opts){color=color?color:'';opts=opts||{};if(color instanceof tinycolor){return color;}if(!(this instanceof tinycolor)){return new tinycolor(color,opts);}var rgb=inputToRGB(color);this._originalInput=color,this._r=rgb.r,this._g=rgb.g,this._b=rgb.b,this._a=rgb.a,this._roundA=mathRound(100*this._a)/100,this._format=opts.format||rgb.format;this._gradientType=opts.gradientType;if(this._r<1){this._r=mathRound(this._r);}if(this._g<1){this._g=mathRound(this._g);}if(this._b<1){this._b=mathRound(this._b);}this._ok=rgb.ok;this._tc_id=tinyCounter++;}tinycolor.prototype={isDark:function(){return this.getBrightness()<128;},isLight:function(){return!this.isDark();},isValid:function(){return this._ok;},getOriginalInput:function(){return this._originalInput;},getFormat:function(){return this._format;},getAlpha:function(){return this._a;},getBrightness:function(){var rgb=this.toRgb();return(rgb.r*299+rgb.g*587+rgb.b*114)/1000;},getLuminance:function(){var rgb=this.toRgb();var RsRGB,GsRGB,BsRGB,R,G,B;RsRGB=rgb.r/255;GsRGB=rgb.g/255;BsRGB=rgb.b/255;if(RsRGB<=0.03928){R=RsRGB/12.92;}else{R=Math.pow((RsRGB+0.055)/1.055,2.4);}if(GsRGB<=0.03928){G=GsRGB/12.92;}else{G=Math.pow((GsRGB+0.055)/1.055,2.4);}if(BsRGB<=0.03928){B=BsRGB/12.92;}else{B=Math.pow((BsRGB+0.055)/1.055,2.4);}return 0.2126*R+0.7152*G+0.0722*B;},setAlpha:function(value){this._a=boundAlpha(value);this._roundA=mathRound(100*this._a)/100;return this;},toHsv:function(){var hsv=rgbToHsv(this._r,this._g,this._b);return{h:hsv.h*360,s:hsv.s,v:hsv.v,a:this._a};},toHsvString:function(){var hsv=rgbToHsv(this._r,this._g,this._b);var h=mathRound(hsv.h*360),s=mathRound(hsv.s*100),v=mathRound(hsv.v*100);return this._a==1?"hsv("+h+", "+s+"%, "+v+"%)":"hsva("+h+", "+s+"%, "+v+"%, "+this._roundA+")";},toHsl:function(){var hsl=rgbToHsl(this._r,this._g,this._b);return{h:hsl.h*360,s:hsl.s,l:hsl.l,a:this._a};},toHslString:function(){var hsl=rgbToHsl(this._r,this._g,this._b);var h=mathRound(hsl.h*360),s=mathRound(hsl.s*100),l=mathRound(hsl.l*100);return this._a==1?"hsl("+h+", "+s+"%, "+l+"%)":"hsla("+h+", "+s+"%, "+l+"%, "+this._roundA+")";},toHex:function(allow3Char){return rgbToHex(this._r,this._g,this._b,allow3Char);},toHexString:function(allow3Char){return'#'+this.toHex(allow3Char);},toHex8:function(allow4Char){return rgbaToHex(this._r,this._g,this._b,this._a,allow4Char);},toHex8String:function(allow4Char){return'#'+this.toHex8(allow4Char);},toRgb:function(){return{r:mathRound(this._r),g:mathRound(this._g),b:mathRound(this._b),a:this._a};},toRgbString:function(){return this._a==1?"rgb("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+")":"rgba("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+", "+this._roundA+")";},toPercentageRgb:function(){return{r:mathRound(bound01(this._r,255)*100)+"%",g:mathRound(bound01(this._g,255)*100)+"%",b:mathRound(bound01(this._b,255)*100)+"%",a:this._a};},toPercentageRgbString:function(){return this._a==1?"rgb("+mathRound(bound01(this._r,255)*100)+"%, "+mathRound(bound01(this._g,255)*100)+"%, "+mathRound(bound01(this._b,255)*100)+"%)":"rgba("+mathRound(bound01(this._r,255)*100)+"%, "+mathRound(bound01(this._g,255)*100)+"%, "+mathRound(bound01(this._b,255)*100)+"%, "+this._roundA+")";},toName:function(){if(this._a===0){return"transparent";}if(this._a<1){return false;}return hexNames[rgbToHex(this._r,this._g,this._b,true)]||false;},toFilter:function(secondColor){var hex8String='#'+rgbaToArgbHex(this._r,this._g,this._b,this._a);var secondHex8String=hex8String;var gradientType=this._gradientType?"GradientType = 1, ":"";if(secondColor){var s=tinycolor(secondColor);secondHex8String='#'+rgbaToArgbHex(s._r,s._g,s._b,s._a);}return"progid:DXImageTransform.Microsoft.gradient("+gradientType+"startColorstr="+hex8String+",endColorstr="+secondHex8String+")";},toString:function(format){var formatSet=!!format;format=format||this._format;var formattedString=false;var hasAlpha=this._a<1&&this._a>=0;var needsAlphaFormat=!formatSet&&hasAlpha&&(format==="hex"||format==="hex6"||format==="hex3"||format==="hex4"||format==="hex8"||format==="name");if(needsAlphaFormat){if(format==="name"&&this._a===0){return this.toName();}return this.toRgbString();}if(format==="rgb"){formattedString=this.toRgbString();}if(format==="prgb"){formattedString=this.toPercentageRgbString();}if(format==="hex"||format==="hex6"){formattedString=this.toHexString();}if(format==="hex3"){formattedString=this.toHexString(true);}if(format==="hex4"){formattedString=this.toHex8String(true);}if(format==="hex8"){formattedString=this.toHex8String();}if(format==="name"){formattedString=this.toName();}if(format==="hsl"){formattedString=this.toHslString();}if(format==="hsv"){formattedString=this.toHsvString();}return formattedString||this.toHexString();},clone:function(){return tinycolor(this.toString());},_applyModification:function(fn,args){var color=fn.apply(null,[this].concat([].slice.call(args)));this._r=color._r;this._g=color._g;this._b=color._b;this.setAlpha(color._a);return this;},lighten:function(){return this._applyModification(lighten,arguments);},brighten:function(){return this._applyModification(brighten,arguments);},darken:function(){return this._applyModification(darken,arguments);},desaturate:function(){return this._applyModification(desaturate,arguments);},saturate:function(){return this._applyModification(saturate,arguments);},greyscale:function(){return this._applyModification(greyscale,arguments);},spin:function(){return this._applyModification(spin,arguments);},_applyCombination:function(fn,args){return fn.apply(null,[this].concat([].slice.call(args)));},analogous:function(){return this._applyCombination(analogous,arguments);},complement:function(){return this._applyCombination(complement,arguments);},monochromatic:function(){return this._applyCombination(monochromatic,arguments);},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments);},triad:function(){return this._applyCombination(triad,arguments);},tetrad:function(){return this._applyCombination(tetrad,arguments);}};tinycolor.fromRatio=function(color,opts){if(typeof color=="object"){var newColor={};for(var i in color){if(color.hasOwnProperty(i)){if(i==="a"){newColor[i]=color[i];}else{newColor[i]=convertToPercentage(color[i]);}}}color=newColor;}return tinycolor(color,opts);};function inputToRGB(color){var rgb={r:0,g:0,b:0};var a=1;var s=null;var v=null;var l=null;var ok=false;var format=false;if(typeof color=="string"){color=stringInputToObject(color);}if(typeof color=="object"){if(isValidCSSUnit(color.r)&&isValidCSSUnit(color.g)&&isValidCSSUnit(color.b)){rgb=rgbToRgb(color.r,color.g,color.b);ok=true;format=String(color.r).substr(-1)==="%"?"prgb":"rgb";}else if(isValidCSSUnit(color.h)&&isValidCSSUnit(color.s)&&isValidCSSUnit(color.v)){s=convertToPercentage(color.s);v=convertToPercentage(color.v);rgb=hsvToRgb(color.h,s,v);ok=true;format="hsv";}else if(isValidCSSUnit(color.h)&&isValidCSSUnit(color.s)&&isValidCSSUnit(color.l)){s=convertToPercentage(color.s);l=convertToPercentage(color.l);rgb=hslToRgb(color.h,s,l);ok=true;format="hsl";}if(color.hasOwnProperty("a")){a=color.a;}}a=boundAlpha(a);return{ok:ok,format:color.format||format,r:mathMin(255,mathMax(rgb.r,0)),g:mathMin(255,mathMax(rgb.g,0)),b:mathMin(255,mathMax(rgb.b,0)),a:a};}function rgbToRgb(r,g,b){return{r:bound01(r,255)*255,g:bound01(g,255)*255,b:bound01(b,255)*255};}function rgbToHsl(r,g,b){r=bound01(r,255);g=bound01(g,255);b=bound01(b,255);var max=mathMax(r,g,b),min=mathMin(r,g,b);var h,s,l=(max+min)/2;if(max==min){h=s=0;}else{var d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}h/=6;}return{h:h,s:s,l:l};}function hslToRgb(h,s,l){var r,g,b;h=bound01(h,360);s=bound01(s,100);l=bound01(l,100);function hue2rgb(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p;}if(s===0){r=g=b=l;}else{var q=l<0.5?l*(1+s):l+s-l*s;var p=2*l-q;r=hue2rgb(p,q,h+1/3);g=hue2rgb(p,q,h);b=hue2rgb(p,q,h-1/3);}return{r:r*255,g:g*255,b:b*255};}function rgbToHsv(r,g,b){r=bound01(r,255);g=bound01(g,255);b=bound01(b,255);var max=mathMax(r,g,b),min=mathMin(r,g,b);var h,s,v=max;var d=max-min;s=max===0?0:d/max;if(max==min){h=0;}else{switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}h/=6;}return{h:h,s:s,v:v};}function hsvToRgb(h,s,v){h=bound01(h,360)*6;s=bound01(s,100);v=bound01(v,100);var i=Math.floor(h),f=h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),mod=i%6,r=[v,q,p,p,t,v][mod],g=[t,v,v,q,p,p][mod],b=[p,p,t,v,v,q][mod];return{r:r*255,g:g*255,b:b*255};}function rgbToHex(r,g,b,allow3Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];if(allow3Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)){return hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0);}return hex.join("");}function rgbaToHex(r,g,b,a,allow4Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16)),pad2(convertDecimalToHex(a))];if(allow4Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)&&hex[3].charAt(0)==hex[3].charAt(1)){return hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0)+hex[3].charAt(0);}return hex.join("");}function rgbaToArgbHex(r,g,b,a){var hex=[pad2(convertDecimalToHex(a)),pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return hex.join("");}tinycolor.equals=function(color1,color2){if(!color1||!color2){return false;}return tinycolor(color1).toRgbString()==tinycolor(color2).toRgbString();};tinycolor.random=function(){return tinycolor.fromRatio({r:mathRandom(),g:mathRandom(),b:mathRandom()});};function desaturate(color,amount){amount=amount===0?0:amount||10;var hsl=tinycolor(color).toHsl();hsl.s-=amount/100;hsl.s=clamp01(hsl.s);return tinycolor(hsl);}function saturate(color,amount){amount=amount===0?0:amount||10;var hsl=tinycolor(color).toHsl();hsl.s+=amount/100;hsl.s=clamp01(hsl.s);return tinycolor(hsl);}function greyscale(color){return tinycolor(color).desaturate(100);}function lighten(color,amount){amount=amount===0?0:amount||10;var hsl=tinycolor(color).toHsl();hsl.l+=amount/100;hsl.l=clamp01(hsl.l);return tinycolor(hsl);}function brighten(color,amount){amount=amount===0?0:amount||10;var rgb=tinycolor(color).toRgb();rgb.r=mathMax(0,mathMin(255,rgb.r-mathRound(255*-(amount/100))));rgb.g=mathMax(0,mathMin(255,rgb.g-mathRound(255*-(amount/100))));rgb.b=mathMax(0,mathMin(255,rgb.b-mathRound(255*-(amount/100))));return tinycolor(rgb);}function darken(color,amount){amount=amount===0?0:amount||10;var hsl=tinycolor(color).toHsl();hsl.l-=amount/100;hsl.l=clamp01(hsl.l);return tinycolor(hsl);}function spin(color,amount){var hsl=tinycolor(color).toHsl();var hue=(hsl.h+amount)%360;hsl.h=hue<0?360+hue:hue;return tinycolor(hsl);}function complement(color){var hsl=tinycolor(color).toHsl();hsl.h=(hsl.h+180)%360;return tinycolor(hsl);}function triad(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+120)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+240)%360,s:hsl.s,l:hsl.l})];}function tetrad(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+90)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+180)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+270)%360,s:hsl.s,l:hsl.l})];}function splitcomplement(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+72)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+216)%360,s:hsl.s,l:hsl.l})];}function analogous(color,results,slices){results=results||6;slices=slices||30;var hsl=tinycolor(color).toHsl();var part=360/slices;var ret=[tinycolor(color)];for(hsl.h=(hsl.h-(part*results>>1)+720)%360;--results;){hsl.h=(hsl.h+part)%360;ret.push(tinycolor(hsl));}return ret;}function monochromatic(color,results){results=results||6;var hsv=tinycolor(color).toHsv();var h=hsv.h,s=hsv.s,v=hsv.v;var ret=[];var modification=1/results;while(results--){ret.push(tinycolor({h:h,s:s,v:v}));v=(v+modification)%1;}return ret;}tinycolor.mix=function(color1,color2,amount){amount=amount===0?0:amount||50;var rgb1=tinycolor(color1).toRgb();var rgb2=tinycolor(color2).toRgb();var p=amount/100;var rgba={r:(rgb2.r-rgb1.r)*p+rgb1.r,g:(rgb2.g-rgb1.g)*p+rgb1.g,b:(rgb2.b-rgb1.b)*p+rgb1.b,a:(rgb2.a-rgb1.a)*p+rgb1.a};return tinycolor(rgba);};tinycolor.readability=function(color1,color2){var c1=tinycolor(color1);var c2=tinycolor(color2);return(Math.max(c1.getLuminance(),c2.getLuminance())+0.05)/(Math.min(c1.getLuminance(),c2.getLuminance())+0.05);};tinycolor.isReadable=function(color1,color2,wcag2){var readability=tinycolor.readability(color1,color2);var wcag2Parms,out;out=false;wcag2Parms=validateWCAG2Parms(wcag2);switch(wcag2Parms.level+wcag2Parms.size){case"AAsmall":case"AAAlarge":out=readability>=4.5;break;case"AAlarge":out=readability>=3;break;case"AAAsmall":out=readability>=7;break;}return out;};tinycolor.mostReadable=function(baseColor,colorList,args){var bestColor=null;var bestScore=0;var readability;var includeFallbackColors,level,size;args=args||{};includeFallbackColors=args.includeFallbackColors;level=args.level;size=args.size;for(var i=0;i<colorList.length;i++){readability=tinycolor.readability(baseColor,colorList[i]);if(readability>bestScore){bestScore=readability;bestColor=tinycolor(colorList[i]);}}if(tinycolor.isReadable(baseColor,bestColor,{"level":level,"size":size})||!includeFallbackColors){return bestColor;}else{args.includeFallbackColors=false;return tinycolor.mostReadable(baseColor,["#fff","#000"],args);}};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var hexNames=tinycolor.hexNames=flip(names);function flip(o){var flipped={};for(var i in o){if(o.hasOwnProperty(i)){flipped[o[i]]=i;}}return flipped;}function boundAlpha(a){a=parseFloat(a);if(isNaN(a)||a<0||a>1){a=1;}return a;}function bound01(n,max){if(isOnePointZero(n)){n="100%";}var processPercent=isPercentage(n);n=mathMin(max,mathMax(0,parseFloat(n)));if(processPercent){n=parseInt(n*max,10)/100;}if(Math.abs(n-max)<0.000001){return 1;}return n%max/parseFloat(max);}function clamp01(val){return mathMin(1,mathMax(0,val));}function parseIntFromHex(val){return parseInt(val,16);}function isOnePointZero(n){return typeof n=="string"&&n.indexOf('.')!=-1&&parseFloat(n)===1;}function isPercentage(n){return typeof n==="string"&&n.indexOf('%')!=-1;}function pad2(c){return c.length==1?'0'+c:''+c;}function convertToPercentage(n){if(n<=1){n=n*100+"%";}return n;}function convertDecimalToHex(d){return Math.round(parseFloat(d)*255).toString(16);}function convertHexToDecimal(h){return parseIntFromHex(h)/255;}var matchers=function(){var CSS_INTEGER="[-\\+]?\\d+%?";var CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?";var CSS_UNIT="(?:"+CSS_NUMBER+")|(?:"+CSS_INTEGER+")";var PERMISSIVE_MATCH3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";var PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";return{CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};}();function isValidCSSUnit(color){return!!matchers.CSS_UNIT.exec(color);}function stringInputToObject(color){color=color.replace(trimLeft,'').replace(trimRight,'').toLowerCase();var named=false;if(names[color]){color=names[color];named=true;}else if(color=='transparent'){return{r:0,g:0,b:0,a:0,format:"name"};}var match;if(match=matchers.rgb.exec(color)){return{r:match[1],g:match[2],b:match[3]};}if(match=matchers.rgba.exec(color)){return{r:match[1],g:match[2],b:match[3],a:match[4]};}if(match=matchers.hsl.exec(color)){return{h:match[1],s:match[2],l:match[3]};}if(match=matchers.hsla.exec(color)){return{h:match[1],s:match[2],l:match[3],a:match[4]};}if(match=matchers.hsv.exec(color)){return{h:match[1],s:match[2],v:match[3]};}if(match=matchers.hsva.exec(color)){return{h:match[1],s:match[2],v:match[3],a:match[4]};}if(match=matchers.hex8.exec(color)){return{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),a:convertHexToDecimal(match[4]),format:named?"name":"hex8"};}if(match=matchers.hex6.exec(color)){return{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),format:named?"name":"hex"};}if(match=matchers.hex4.exec(color)){return{r:parseIntFromHex(match[1]+''+match[1]),g:parseIntFromHex(match[2]+''+match[2]),b:parseIntFromHex(match[3]+''+match[3]),a:convertHexToDecimal(match[4]+''+match[4]),format:named?"name":"hex8"};}if(match=matchers.hex3.exec(color)){return{r:parseIntFromHex(match[1]+''+match[1]),g:parseIntFromHex(match[2]+''+match[2]),b:parseIntFromHex(match[3]+''+match[3]),format:named?"name":"hex"};}return false;}function validateWCAG2Parms(parms){var level,size;parms=parms||{"level":"AA","size":"small"};level=(parms.level||"AA").toUpperCase();size=(parms.size||"small").toLowerCase();if(level!=="AA"&&level!=="AAA"){level="AA";}if(size!=="small"&&size!=="large"){size="small";}return{"level":level,"size":size};}if(typeof module!=="undefined"&&module.exports){module.exports=tinycolor;}else if(true){!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(){return tinycolor;}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));}else{}})(Math);

/***/ }),
/* 91 */
/***/ (function(module, exports, __webpack_require__) {

var createAggregator=__webpack_require__(72);var partition=createAggregator(function(result,value,key){result[key?0:1].push(value);},function(){return[[],[]];});module.exports=partition;

/***/ }),
/* 92 */
/***/ (function(module, exports) {

function safeGet(object,key){return key=='__proto__'?undefined:object[key];}module.exports=safeGet;

/***/ }),
/* 93 */
/***/ (function(module, exports, __webpack_require__) {

var baseAssignValue=__webpack_require__(22),eq=__webpack_require__(81);function assignMergeValue(object,key,value){if(value!==undefined&&!eq(object[key],value)||value===undefined&&!(key in object)){baseAssignValue(object,key,value);}}module.exports=assignMergeValue;

/***/ }),
/* 94 */
/***/ (function(module, exports, __webpack_require__) {

var baseSlice=__webpack_require__(52);function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index);}module.exports=baseWhile;

/***/ }),
/* 95 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var detector=module.exports={};detector.isIE=function(version){function isAnyIeVersion(){var agent=navigator.userAgent.toLowerCase();return agent.indexOf("msie")!==-1||agent.indexOf("trident")!==-1||agent.indexOf(" edge/")!==-1;}if(!isAnyIeVersion()){return false;}if(!version){return true;}var ieVersion=function(){var undef,v=3,div=document.createElement("div"),all=div.getElementsByTagName("i");do{div.innerHTML="<!--[if gt IE "+ ++v+"]><i></i><![endif]-->";}while(all[0]);return v>4?v:undef;}();return version===ieVersion;};detector.isLegacyOpera=function(){return!!window.opera;};

/***/ }),
/* 96 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var utils=module.exports={};utils.forEach=function(collection,callback){for(var i=0;i<collection.length;i++){var result=callback(collection[i]);if(result){return result;}}};

/***/ }),
/* 97 */
/***/ (function(module, exports, __webpack_require__) {

var SetCache=__webpack_require__(42),arrayIncludes=__webpack_require__(66),arrayIncludesWith=__webpack_require__(65),arrayMap=__webpack_require__(15),baseUnary=__webpack_require__(57),cacheHas=__webpack_require__(41);var LARGE_ARRAY_SIZE=200;function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=true,length=array.length,result=[],valuesLength=values.length;if(!length){return result;}if(iteratee){values=arrayMap(values,baseUnary(iteratee));}if(comparator){includes=arrayIncludesWith;isCommon=false;}else if(values.length>=LARGE_ARRAY_SIZE){includes=cacheHas;isCommon=false;values=new SetCache(values);}outer:while(++index<length){var value=array[index],computed=iteratee==null?value:iteratee(value);value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===computed){continue outer;}}result.push(value);}else if(!includes(values,computed,comparator)){result.push(value);}}return result;}module.exports=baseDifference;

/***/ }),
/* 98 */
/***/ (function(module, exports, __webpack_require__) {

var SetCache=__webpack_require__(42),arrayIncludes=__webpack_require__(66),arrayIncludesWith=__webpack_require__(65),cacheHas=__webpack_require__(41),createSet=__webpack_require__(307),setToArray=__webpack_require__(306);var LARGE_ARRAY_SIZE=200;function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon=false;includes=arrayIncludesWith;}else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set){return setToArray(set);}isCommon=false;includes=cacheHas;seen=new SetCache();}else{seen=iteratee?[]:result;}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer;}}if(iteratee){seen.push(computed);}result.push(value);}else if(!includes(seen,computed,comparator)){if(seen!==result){seen.push(computed);}result.push(value);}}return result;}module.exports=baseUniq;

/***/ }),
/* 99 */
/***/ (function(module, exports, __webpack_require__) {

var baseIsEqualDeep=__webpack_require__(326),isObjectLike=__webpack_require__(34);function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true;}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other;}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack);}module.exports=baseIsEqual;

/***/ }),
/* 100 */
/***/ (function(module, exports, __webpack_require__) {

var baseHasIn=__webpack_require__(338),hasPath=__webpack_require__(337);function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn);}module.exports=hasIn;

/***/ }),
/* 101 */
/***/ (function(module, exports, __webpack_require__) {

var baseGet=__webpack_require__(77),baseSet=__webpack_require__(339),castPath=__webpack_require__(36);function basePickBy(object,paths,predicate){var index=-1,length=paths.length,result={};while(++index<length){var path=paths[index],value=baseGet(object,path);if(predicate(value,path)){baseSet(result,castPath(path,object),value);}}return result;}module.exports=basePickBy;

/***/ }),
/* 102 */
/***/ (function(module, exports, __webpack_require__) {

var baseRest=__webpack_require__(19),isIterateeCall=__webpack_require__(43);function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=='function'?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1;}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer);}}return object;});}module.exports=createAssigner;

/***/ }),
/* 103 */
/***/ (function(module, exports) {

var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}module.exports=isLength;

/***/ }),
/* 104 */
/***/ (function(module, exports, __webpack_require__) {

var arrayFilter=__webpack_require__(345),arrayMap=__webpack_require__(15),baseProperty=__webpack_require__(344),baseTimes=__webpack_require__(343),isArrayLikeObject=__webpack_require__(33);var nativeMax=Math.max;function unzip(array){if(!(array&&array.length)){return[];}var length=0;array=arrayFilter(array,function(group){if(isArrayLikeObject(group)){length=nativeMax(group.length,length);return true;}});return baseTimes(length,function(index){return arrayMap(array,baseProperty(index));});}module.exports=unzip;

/***/ }),
/* 105 */
/***/ (function(module, exports, __webpack_require__) {

var overArg=__webpack_require__(50);var nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys;

/***/ }),
/* 106 */
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag=__webpack_require__(73),getPrototype=__webpack_require__(74),isObjectLike=__webpack_require__(34);var objectTag='[object Object]';var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectCtorString=funcToString.call(Object);function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag){return false;}var proto=getPrototype(value);if(proto===null){return true;}var Ctor=hasOwnProperty.call(proto,'constructor')&&proto.constructor;return typeof Ctor=='function'&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString;}module.exports=isPlainObject;

/***/ }),
/* 107 */
/***/ (function(module, exports) {

function stubFalse(){return false;}module.exports=stubFalse;

/***/ }),
/* 108 */
/***/ (function(module, exports, __webpack_require__) {

var baseCreate=__webpack_require__(79),getPrototype=__webpack_require__(74),isPrototype=__webpack_require__(107);function initCloneObject(object){return typeof object.constructor=='function'&&!isPrototype(object)?baseCreate(getPrototype(object)):{};}module.exports=initCloneObject;

/***/ }),
/* 109 */
/***/ (function(module, exports) {

function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key);}}return result;}module.exports=nativeKeysIn;

/***/ }),
/* 110 */
/***/ (function(module, exports, __webpack_require__) {

var overArg=__webpack_require__(50);var nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys;

/***/ }),
/* 111 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {var root=__webpack_require__(18);var freeExports=typeof exports=='object'&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined;function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice();}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result;}module.exports=cloneBuffer;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(82)(module)))

/***/ }),
/* 112 */
/***/ (function(module, exports, __webpack_require__) {

var copyObject=__webpack_require__(23),keys=__webpack_require__(51);function baseAssign(object,source){return object&&copyObject(source,keys(source),object);}module.exports=baseAssign;

/***/ }),
/* 113 */
/***/ (function(module, exports, __webpack_require__) {

var createBaseFor=__webpack_require__(378);var baseFor=createBaseFor();module.exports=baseFor;

/***/ }),
/* 114 */
/***/ (function(module, exports, __webpack_require__) {

var memoizeCapped=__webpack_require__(380);var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46){result.push('');}string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,'$1'):number||match);});return result;});module.exports=stringToPath;

/***/ }),
/* 115 */
/***/ (function(module, exports, __webpack_require__) {

var isArray=__webpack_require__(6),isSymbol=__webpack_require__(53);var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false;}var type=typeof value;if(type=='number'||type=='symbol'||type=='boolean'||value==null||isSymbol(value)){return true;}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object);}module.exports=isKey;

/***/ }),
/* 116 */
/***/ (function(module, exports) {

function noop(){}module.exports=noop;

/***/ }),
/* 117 */
/***/ (function(module, exports) {

function stubArray(){return[];}module.exports=stubArray;

/***/ }),
/* 118 */
/***/ (function(module, exports) {

function noop(){}module.exports=noop;

/***/ }),
/* 119 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 120 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 121 */
/***/ (function(module, exports) {

function stubFalse(){return false;}module.exports=stubFalse;

/***/ }),
/* 122 */
/***/ (function(module, exports, __webpack_require__) {

var isLaziable=__webpack_require__(121),setData=__webpack_require__(120),setWrapToString=__webpack_require__(119);var WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64;function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG);if(!(bitmask&WRAP_CURRY_BOUND_FLAG)){bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG);}var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity];var result=wrapFunc.apply(undefined,newData);if(isLaziable(func)){setData(result,newData);}result.placeholder=placeholder;return setWrapToString(result,func,bitmask);}module.exports=createRecurry;

/***/ }),
/* 123 */
/***/ (function(module, exports, __webpack_require__) {

var composeArgs=__webpack_require__(388),composeArgsRight=__webpack_require__(387),countHolders=__webpack_require__(386),createCtor=__webpack_require__(55),createRecurry=__webpack_require__(122),getHolder=__webpack_require__(118),reorder=__webpack_require__(385),replaceHolders=__webpack_require__(117),root=__webpack_require__(18);var WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_ARY_FLAG=128,WRAP_FLIP_FLAG=512;function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length;while(index--){args[index]=arguments[index];}if(isCurried){var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder);}if(partials){args=composeArgs(args,partials,holders,isCurried);}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight,isCurried);}length-=holdersCount;if(isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length);}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;length=args.length;if(argPos){args=reorder(args,argPos);}else if(isFlip&&length>1){args.reverse();}if(isAry&&ary<length){args.length=ary;}if(this&&this!==root&&this instanceof wrapper){fn=Ctor||createCtor(fn);}return fn.apply(thisBinding,args);}return wrapper;}module.exports=createHybrid;

/***/ }),
/* 124 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 125 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 126 */
/***/ (function(module, exports, __webpack_require__) {

var apply=__webpack_require__(58);var nativeMax=Math.max;function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index];}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index];}otherArgs[start]=transform(array);return apply(func,this,otherArgs);};}module.exports=overRest;

/***/ }),
/* 127 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 128 */
/***/ (function(module, exports, __webpack_require__) {

var assocIndexOf=__webpack_require__(59);function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value]);}else{data[index][1]=value;}return this;}module.exports=listCacheSet;

/***/ }),
/* 129 */
/***/ (function(module, exports, __webpack_require__) {

var assocIndexOf=__webpack_require__(59);function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}module.exports=listCacheHas;

/***/ }),
/* 130 */
/***/ (function(module, exports, __webpack_require__) {

var assocIndexOf=__webpack_require__(59);function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}module.exports=listCacheGet;

/***/ }),
/* 131 */
/***/ (function(module, exports, __webpack_require__) {

var assocIndexOf=__webpack_require__(59);var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}--this.size;return true;}module.exports=listCacheDelete;

/***/ }),
/* 132 */
/***/ (function(module, exports) {

function listCacheClear(){this.__data__=[];this.size=0;}module.exports=listCacheClear;

/***/ }),
/* 133 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var zhTw=moment.defineLocale('zh-tw',{months:'___________'.split('_'),monthsShort:'1_2_3_4_5_6_7_8_9_10_11_12'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY/MM/DD',LL:'YYYYMD',LLL:'YYYYMD HH:mm',LLLL:'YYYYMDdddd HH:mm',l:'YYYY/M/D',ll:'YYYYMD',lll:'YYYYMD HH:mm',llll:'YYYYMDdddd HH:mm'},meridiemParse:/|||||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''||meridiem===''||meridiem===''){return hour;}else if(meridiem===''){return hour>=11?hour:hour+12;}else if(meridiem===''||meridiem===''){return hour+12;}},meridiem:function(hour,minute,isLower){var hm=hour*100+minute;if(hm<600){return'';}else if(hm<900){return'';}else if(hm<1130){return'';}else if(hm<1230){return'';}else if(hm<1800){return'';}else{return'';}},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'[]dddd LT',lastDay:'[] LT',lastWeek:'[]dddd LT',sameElse:'L'},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(number,period){switch(period){case'd':case'D':case'DDD':return number+'';case'M':return number+'';case'w':case'W':return number+'';default:return number;}},relativeTime:{future:'%s',past:'%s',s:'',ss:'%d ',m:'1 ',mm:'%d ',h:'1 ',hh:'%d ',d:'1 ',dd:'%d ',M:'1 ',MM:'%d ',y:'1 ',yy:'%d '}});return zhTw;});

/***/ }),
/* 134 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var zhHk=moment.defineLocale('zh-hk',{months:'___________'.split('_'),monthsShort:'1_2_3_4_5_6_7_8_9_10_11_12'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY/MM/DD',LL:'YYYYMD',LLL:'YYYYMD HH:mm',LLLL:'YYYYMDdddd HH:mm',l:'YYYY/M/D',ll:'YYYYMD',lll:'YYYYMD HH:mm',llll:'YYYYMDdddd HH:mm'},meridiemParse:/|||||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''||meridiem===''||meridiem===''){return hour;}else if(meridiem===''){return hour>=11?hour:hour+12;}else if(meridiem===''||meridiem===''){return hour+12;}},meridiem:function(hour,minute,isLower){var hm=hour*100+minute;if(hm<600){return'';}else if(hm<900){return'';}else if(hm<1130){return'';}else if(hm<1230){return'';}else if(hm<1800){return'';}else{return'';}},calendar:{sameDay:'[]LT',nextDay:'[]LT',nextWeek:'[]ddddLT',lastDay:'[]LT',lastWeek:'[]ddddLT',sameElse:'L'},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(number,period){switch(period){case'd':case'D':case'DDD':return number+'';case'M':return number+'';case'w':case'W':return number+'';default:return number;}},relativeTime:{future:'%s',past:'%s',s:'',ss:'%d ',m:'1 ',mm:'%d ',h:'1 ',hh:'%d ',d:'1 ',dd:'%d ',M:'1 ',MM:'%d ',y:'1 ',yy:'%d '}});return zhHk;});

/***/ }),
/* 135 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var zhCn=moment.defineLocale('zh-cn',{months:'___________'.split('_'),monthsShort:'1_2_3_4_5_6_7_8_9_10_11_12'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY/MM/DD',LL:'YYYYMD',LLL:'YYYYMDAhmm',LLLL:'YYYYMDddddAhmm',l:'YYYY/M/D',ll:'YYYYMD',lll:'YYYYMD HH:mm',llll:'YYYYMDdddd HH:mm'},meridiemParse:/|||||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''||meridiem===''||meridiem===''){return hour;}else if(meridiem===''||meridiem===''){return hour+12;}else{return hour>=11?hour:hour+12;}},meridiem:function(hour,minute,isLower){var hm=hour*100+minute;if(hm<600){return'';}else if(hm<900){return'';}else if(hm<1130){return'';}else if(hm<1230){return'';}else if(hm<1800){return'';}else{return'';}},calendar:{sameDay:'[]LT',nextDay:'[]LT',nextWeek:'[]ddddLT',lastDay:'[]LT',lastWeek:'[]ddddLT',sameElse:'L'},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(number,period){switch(period){case'd':case'D':case'DDD':return number+'';case'M':return number+'';case'w':case'W':return number+'';default:return number;}},relativeTime:{future:'%s',past:'%s',s:'',ss:'%d ',m:'1 ',mm:'%d ',h:'1 ',hh:'%d ',d:'1 ',dd:'%d ',M:'1 ',MM:'%d ',y:'1 ',yy:'%d '},week:{dow:1,doy:4}});return zhCn;});

/***/ }),
/* 136 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var yo=moment.defineLocale('yo',{months:'Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p'.split('_'),monthsShort:'Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p'.split('_'),weekdays:'Aiku_Aje_Isgun_jru_jb_ti_Abamta'.split('_'),weekdaysShort:'Aik_Aje_Is_jr_jb_ti_Aba'.split('_'),weekdaysMin:'Ai_Aj_Is_r_b_t_Ab'.split('_'),longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendar:{sameDay:'[Oni ni] LT',nextDay:'[la ni] LT',nextWeek:'dddd [s ton\'b] [ni] LT',lastDay:'[Ana ni] LT',lastWeek:'dddd [s tol] [ni] LT',sameElse:'L'},relativeTime:{future:'ni %s',past:'%s kja',s:'isju aaya die',ss:'aaya %d',m:'isju kan',mm:'isju %d',h:'wakati kan',hh:'wakati %d',d:'j kan',dd:'j %d',M:'osu kan',MM:'osu %d',y:'dun kan',yy:'dun %d'},dayOfMonthOrdinalParse:/j\s\d{1,2}/,ordinal:'j %d',week:{dow:1,doy:4}});return yo;});

/***/ }),
/* 137 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var xPseudo=moment.defineLocale('x-pseudo',{months:'J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr'.split('_'),monthsShort:'J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc'.split('_'),monthsParseExact:true,weekdays:'S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d'.split('_'),weekdaysShort:'S~_~M_~T_~Wd_~Th_~Fr_~St'.split('_'),weekdaysMin:'S~_M~_T_~W_T~h_Fr~_S'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[T~d~ t] LT',nextDay:'[T~m~rr~w t] LT',nextWeek:'dddd [t] LT',lastDay:'[~st~rd~ t] LT',lastWeek:'[L~st] dddd [t] LT',sameElse:'L'},relativeTime:{future:'~ %s',past:'%s ~g',s:' ~fw ~sc~ds',ss:'%d s~c~ds',m:' ~m~t',mm:'%d m~~ts',h:'~ h~r',hh:'%d h~rs',d:' ~d',dd:'%d d~s',M:' ~m~th',MM:'%d m~t~hs',y:' ~r',yy:'%d ~rs'},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?'th':b===1?'st':b===2?'nd':b===3?'rd':'th';return number+output;},week:{dow:1,doy:4}});return xPseudo;});

/***/ }),
/* 138 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var vi=moment.defineLocale('vi',{months:'thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12'.split('_'),monthsShort:'Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12'.split('_'),monthsParseExact:true,weekdays:'ch nht_th hai_th ba_th t_th nm_th su_th by'.split('_'),weekdaysShort:'CN_T2_T3_T4_T5_T6_T7'.split('_'),weekdaysMin:'CN_T2_T3_T4_T5_T6_T7'.split('_'),weekdaysParseExact:true,meridiemParse:/sa|ch/i,isPM:function(input){return /^ch$/i.test(input);},meridiem:function(hours,minutes,isLower){if(hours<12){return isLower?'sa':'SA';}else{return isLower?'ch':'CH';}},longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM [nm] YYYY',LLL:'D MMMM [nm] YYYY HH:mm',LLLL:'dddd, D MMMM [nm] YYYY HH:mm',l:'DD/M/YYYY',ll:'D MMM YYYY',lll:'D MMM YYYY HH:mm',llll:'ddd, D MMM YYYY HH:mm'},calendar:{sameDay:'[Hm nay lc] LT',nextDay:'[Ngy mai lc] LT',nextWeek:'dddd [tun ti lc] LT',lastDay:'[Hm qua lc] LT',lastWeek:'dddd [tun ri lc] LT',sameElse:'L'},relativeTime:{future:'%s ti',past:'%s trc',s:'vi giy',ss:'%d giy',m:'mt pht',mm:'%d pht',h:'mt gi',hh:'%d gi',d:'mt ngy',dd:'%d ngy',M:'mt thng',MM:'%d thng',y:'mt nm',yy:'%d nm'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(number){return number;},week:{dow:1,doy:4}});return vi;});

/***/ }),
/* 139 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var uzLatn=moment.defineLocale('uz-latn',{months:'Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr'.split('_'),monthsShort:'Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek'.split('_'),weekdays:'Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba'.split('_'),weekdaysShort:'Yak_Dush_Sesh_Chor_Pay_Jum_Shan'.split('_'),weekdaysMin:'Ya_Du_Se_Cho_Pa_Ju_Sha'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'D MMMM YYYY, dddd HH:mm'},calendar:{sameDay:'[Bugun soat] LT [da]',nextDay:'[Ertaga] LT [da]',nextWeek:'dddd [kuni soat] LT [da]',lastDay:'[Kecha soat] LT [da]',lastWeek:'[O\'tgan] dddd [kuni soat] LT [da]',sameElse:'L'},relativeTime:{future:'Yaqin %s ichida',past:'Bir necha %s oldin',s:'soniya',ss:'%d soniya',m:'bir daqiqa',mm:'%d daqiqa',h:'bir soat',hh:'%d soat',d:'bir kun',dd:'%d kun',M:'bir oy',MM:'%d oy',y:'bir yil',yy:'%d yil'},week:{dow:1,doy:7}});return uzLatn;});

/***/ }),
/* 140 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var uz=moment.defineLocale('uz',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'D MMMM YYYY, dddd HH:mm'},calendar:{sameDay:'[ ] LT []',nextDay:'[] LT []',nextWeek:'dddd [ ] LT []',lastDay:'[ ] LT []',lastWeek:'[] dddd [ ] LT []',sameElse:'L'},relativeTime:{future:' %s ',past:'  %s ',s:'',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},week:{dow:1,doy:7}});return uz;});

/***/ }),
/* 141 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var months=['','','','','','','','','','','',''];var days=['','','','','','',''];var ur=moment.defineLocale('ur',{months:months,monthsShort:months,weekdays:days,weekdaysShort:days,weekdaysMin:days,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(input){return''===input;},meridiem:function(hour,minute,isLower){if(hour<12){return'';}return'';},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',nextWeek:'dddd [] LT',lastDay:'[  ] LT',lastWeek:'[] dddd [] LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},preparse:function(string){return string.replace(//g,',');},postformat:function(string){return string.replace(/,/g,'');},week:{dow:1,doy:4}});return ur;});

/***/ }),
/* 142 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function plural(word,num){var forms=word.split('_');return num%10===1&&num%100!==11?forms[0]:num%10>=2&&num%10<=4&&(num%100<10||num%100>=20)?forms[1]:forms[2];}function relativeTimeWithPlural(number,withoutSuffix,key){var format={'ss':withoutSuffix?'__':'__','mm':withoutSuffix?'__':'__','hh':withoutSuffix?'__':'__','dd':'__','MM':'__','yy':'__'};if(key==='m'){return withoutSuffix?'':'';}else if(key==='h'){return withoutSuffix?'':'';}else{return number+' '+plural(format[key],+number);}}function weekdaysCaseReplace(m,format){var weekdays={'nominative':'______'.split('_'),'accusative':'______'.split('_'),'genitive':'______'.split('_')};if(!m){return weekdays['nominative'];}var nounCase=/(\[[]\]) ?dddd/.test(format)?'accusative':/\[?(?:|)? ?\] ?dddd/.test(format)?'genitive':'nominative';return weekdays[nounCase][m.day()];}function processHoursFunction(str){return function(){return str+''+(this.hours()===11?'':'')+'] LT';};}var uk=moment.defineLocale('uk',{months:{'format':'___________'.split('_'),'standalone':'___________'.split('_')},monthsShort:'___________'.split('_'),weekdays:weekdaysCaseReplace,weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY .',LLL:'D MMMM YYYY ., HH:mm',LLLL:'dddd, D MMMM YYYY ., HH:mm'},calendar:{sameDay:processHoursFunction('[ '),nextDay:processHoursFunction('[ '),lastDay:processHoursFunction('[ '),nextWeek:processHoursFunction('[] dddd ['),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return processHoursFunction('[] dddd [').call(this);case 1:case 2:case 4:return processHoursFunction('[] dddd [').call(this);}},sameElse:'L'},relativeTime:{future:' %s',past:'%s ',s:' ',ss:relativeTimeWithPlural,m:relativeTimeWithPlural,mm:relativeTimeWithPlural,h:'',hh:relativeTimeWithPlural,d:'',dd:relativeTimeWithPlural,M:'',MM:relativeTimeWithPlural,y:'',yy:relativeTimeWithPlural},meridiemParse:/|||/,isPM:function(input){return /^(|)$/.test(input);},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<12){return'';}else if(hour<17){return'';}else{return'';}},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(number,period){switch(period){case'M':case'd':case'DDD':case'w':case'W':return number+'-';case'D':return number+'-';default:return number;}},week:{dow:1,doy:7}});return uk;});

/***/ }),
/* 143 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var ugCn=moment.defineLocale('ug-cn',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'YYYY-M-D-',LLL:'YYYY-M-D- HH:mm',LLLL:'dddd YYYY-M-D- HH:mm'},meridiemParse:/ || || |/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===' '||meridiem===''||meridiem===' '){return hour;}else if(meridiem===' '||meridiem===''){return hour+12;}else{return hour>=11?hour:hour+12;}},meridiem:function(hour,minute,isLower){var hm=hour*100+minute;if(hm<600){return' ';}else if(hm<900){return'';}else if(hm<1130){return' ';}else if(hm<1230){return'';}else if(hm<1800){return' ';}else{return'';}},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',nextWeek:'[] dddd [] LT',lastDay:'[] LT',lastWeek:'[] dddd [] LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},dayOfMonthOrdinalParse:/\d{1,2}(-|-|-)/,ordinal:function(number,period){switch(period){case'd':case'D':case'DDD':return number+'-';case'w':case'W':return number+'-';default:return number;}},preparse:function(string){return string.replace(//g,',');},postformat:function(string){return string.replace(/,/g,'');},week:{dow:1,doy:7}});return ugCn;});

/***/ }),
/* 144 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var tzmLatn=moment.defineLocale('tzm-latn',{months:'innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir'.split('_'),monthsShort:'innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir'.split('_'),weekdays:'asamas_aynas_asinas_akras_akwas_asimwas_asiyas'.split('_'),weekdaysShort:'asamas_aynas_asinas_akras_akwas_asimwas_asiyas'.split('_'),weekdaysMin:'asamas_aynas_asinas_akras_akwas_asimwas_asiyas'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[asdkh g] LT',nextDay:'[aska g] LT',nextWeek:'dddd [g] LT',lastDay:'[assant g] LT',lastWeek:'dddd [g] LT',sameElse:'L'},relativeTime:{future:'dadkh s yan %s',past:'yan %s',s:'imik',ss:'%d imik',m:'minu',mm:'%d minu',h:'saa',hh:'%d tassain',d:'ass',dd:'%d ossan',M:'ayowr',MM:'%d iyyirn',y:'asgas',yy:'%d isgasn'},week:{dow:6,doy:12}});return tzmLatn;});

/***/ }),
/* 145 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var tzm=moment.defineLocale('tzm',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',nextWeek:'dddd [] LT',lastDay:'[ ] LT',lastWeek:'dddd [] LT',sameElse:'L'},relativeTime:{future:'   %s',past:' %s',s:'',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d o',M:'o',MM:'%d ',y:'',yy:'%d '},week:{dow:6,doy:12}});return tzm;});

/***/ }),
/* 146 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var tzl=moment.defineLocale('tzl',{months:'Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar'.split('_'),monthsShort:'Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec'.split('_'),weekdays:'Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi'.split('_'),weekdaysShort:'Sl_Ln_Mai_Mr_Xh_Vi_St'.split('_'),weekdaysMin:'S_L_Ma_M_Xh_Vi_S'.split('_'),longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD.MM.YYYY',LL:'D. MMMM [dallas] YYYY',LLL:'D. MMMM [dallas] YYYY HH.mm',LLLL:'dddd, [li] D. MMMM [dallas] YYYY HH.mm'},meridiemParse:/d\'o|d\'a/i,isPM:function(input){return'd\'o'===input.toLowerCase();},meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?'d\'o':'D\'O';}else{return isLower?'d\'a':'D\'A';}},calendar:{sameDay:'[oxhi ] LT',nextDay:'[dem ] LT',nextWeek:'dddd [] LT',lastDay:'[ieiri ] LT',lastWeek:'[sr el] dddd [lasteu ] LT',sameElse:'L'},relativeTime:{future:'osprei %s',past:'ja%s',s:processRelativeTime,ss:processRelativeTime,m:processRelativeTime,mm:processRelativeTime,h:processRelativeTime,hh:processRelativeTime,d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});function processRelativeTime(number,withoutSuffix,key,isFuture){var format={'s':['viensas secunds','\'iensas secunds'],'ss':[number+' secunds',''+number+' secunds'],'m':['\'n mut','\'iens mut'],'mm':[number+' muts',''+number+' muts'],'h':['\'n ora','\'iensa ora'],'hh':[number+' oras',''+number+' oras'],'d':['\'n ziua','\'iensa ziua'],'dd':[number+' ziuas',''+number+' ziuas'],'M':['\'n mes','\'iens mes'],'MM':[number+' mesen',''+number+' mesen'],'y':['\'n ar','\'iens ar'],'yy':[number+' ars',''+number+' ars']};return isFuture?format[key][0]:withoutSuffix?format[key][0]:format[key][1];}return tzl;});

/***/ }),
/* 147 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var suffixes={1:'\'inci',5:'\'inci',8:'\'inci',70:'\'inci',80:'\'inci',2:'\'nci',7:'\'nci',20:'\'nci',50:'\'nci',3:'\'nc',4:'\'nc',100:'\'nc',6:'\'nc',9:'\'uncu',10:'\'uncu',30:'\'uncu',60:'\'nc',90:'\'nc'};var tr=moment.defineLocale('tr',{months:'Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk'.split('_'),monthsShort:'Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara'.split('_'),weekdays:'Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi'.split('_'),weekdaysShort:'Paz_Pts_Sal_ar_Per_Cum_Cts'.split('_'),weekdaysMin:'Pz_Pt_Sa_a_Pe_Cu_Ct'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[bugn saat] LT',nextDay:'[yarn saat] LT',nextWeek:'[gelecek] dddd [saat] LT',lastDay:'[dn] LT',lastWeek:'[geen] dddd [saat] LT',sameElse:'L'},relativeTime:{future:'%s sonra',past:'%s nce',s:'birka saniye',ss:'%d saniye',m:'bir dakika',mm:'%d dakika',h:'bir saat',hh:'%d saat',d:'bir gn',dd:'%d gn',M:'bir ay',MM:'%d ay',y:'bir yl',yy:'%d yl'},ordinal:function(number,period){switch(period){case'd':case'D':case'Do':case'DD':return number;default:if(number===0){return number+'\'nc';}var a=number%10,b=number%100-a,c=number>=100?100:null;return number+(suffixes[a]||suffixes[b]||suffixes[c]);}},week:{dow:1,doy:7}});return tr;});

/***/ }),
/* 148 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var numbersNouns='pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut'.split('_');function translateFuture(output){var time=output;time=output.indexOf('jaj')!==-1?time.slice(0,-3)+'leS':output.indexOf('jar')!==-1?time.slice(0,-3)+'waQ':output.indexOf('DIS')!==-1?time.slice(0,-3)+'nem':time+' pIq';return time;}function translatePast(output){var time=output;time=output.indexOf('jaj')!==-1?time.slice(0,-3)+'Hu':output.indexOf('jar')!==-1?time.slice(0,-3)+'wen':output.indexOf('DIS')!==-1?time.slice(0,-3)+'ben':time+' ret';return time;}function translate(number,withoutSuffix,string,isFuture){var numberNoun=numberAsNoun(number);switch(string){case'ss':return numberNoun+' lup';case'mm':return numberNoun+' tup';case'hh':return numberNoun+' rep';case'dd':return numberNoun+' jaj';case'MM':return numberNoun+' jar';case'yy':return numberNoun+' DIS';}}function numberAsNoun(number){var hundred=Math.floor(number%1000/100),ten=Math.floor(number%100/10),one=number%10,word='';if(hundred>0){word+=numbersNouns[hundred]+'vatlh';}if(ten>0){word+=(word!==''?' ':'')+numbersNouns[ten]+'maH';}if(one>0){word+=(word!==''?' ':'')+numbersNouns[one];}return word===''?'pagh':word;}var tlh=moment.defineLocale('tlh',{months:'tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha'.split('_'),monthsShort:'jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha'.split('_'),monthsParseExact:true,weekdays:'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),weekdaysShort:'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),weekdaysMin:'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[DaHjaj] LT',nextDay:'[waleS] LT',nextWeek:'LLL',lastDay:'[waHu] LT',lastWeek:'LLL',sameElse:'L'},relativeTime:{future:translateFuture,past:translatePast,s:'puS lup',ss:translate,m:'wa tup',mm:translate,h:'wa rep',hh:translate,d:'wa jaj',dd:translate,M:'wa jar',MM:translate,y:'wa DIS',yy:translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return tlh;});

/***/ }),
/* 149 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var tlPh=moment.defineLocale('tl-ph',{months:'Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre'.split('_'),monthsShort:'Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis'.split('_'),weekdays:'Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado'.split('_'),weekdaysShort:'Lin_Lun_Mar_Miy_Huw_Biy_Sab'.split('_'),weekdaysMin:'Li_Lu_Ma_Mi_Hu_Bi_Sab'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'MM/D/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY HH:mm',LLLL:'dddd, MMMM DD, YYYY HH:mm'},calendar:{sameDay:'LT [ngayong araw]',nextDay:'[Bukas ng] LT',nextWeek:'LT [sa susunod na] dddd',lastDay:'LT [kahapon]',lastWeek:'LT [noong nakaraang] dddd',sameElse:'L'},relativeTime:{future:'sa loob ng %s',past:'%s ang nakalipas',s:'ilang segundo',ss:'%d segundo',m:'isang minuto',mm:'%d minuto',h:'isang oras',hh:'%d oras',d:'isang araw',dd:'%d araw',M:'isang buwan',MM:'%d buwan',y:'isang taon',yy:'%d taon'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(number){return number;},week:{dow:1,doy:4}});return tlPh;});

/***/ }),
/* 150 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var th=moment.defineLocale('th',{months:'___________'.split('_'),monthsShort:'.._.._.._.._.._.._.._.._.._.._.._..'.split('_'),monthsParseExact:true,weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'._._._._._._.'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY  H:mm',LLLL:'dddd D MMMM YYYY  H:mm'},meridiemParse:/|/,isPM:function(input){return input==='';},meridiem:function(hour,minute,isLower){if(hour<12){return'';}else{return'';}},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',nextWeek:'dddd[ ] LT',lastDay:'[ ] LT',lastWeek:'[]dddd[ ] LT',sameElse:'L'},relativeTime:{future:' %s',past:'%s',s:'',ss:'%d ',m:'1 ',mm:'%d ',h:'1 ',hh:'%d ',d:'1 ',dd:'%d ',M:'1 ',MM:'%d ',y:'1 ',yy:'%d '}});return th;});

/***/ }),
/* 151 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var suffixes={0:'-',1:'-',2:'-',3:'-',4:'-',5:'-',6:'-',7:'-',8:'-',9:'-',10:'-',12:'-',13:'-',20:'-',30:'-',40:'-',50:'-',60:'-',70:'-',80:'-',90:'-',100:'-'};var tg=moment.defineLocale('tg',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',lastDay:'[ ] LT',nextWeek:'dddd[] [  ] LT',lastWeek:'dddd[] [  ] LT',sameElse:'L'},relativeTime:{future:' %s',past:'%s ',s:' ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''){return hour<4?hour:hour+12;}else if(meridiem===''){return hour;}else if(meridiem===''){return hour>=11?hour:hour+12;}else if(meridiem===''){return hour+12;}},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<11){return'';}else if(hour<16){return'';}else if(hour<19){return'';}else{return'';}},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(number){var a=number%10,b=number>=100?100:null;return number+(suffixes[number]||suffixes[a]||suffixes[b]);},week:{dow:1,doy:7}});return tg;});

/***/ }),
/* 152 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var tet=moment.defineLocale('tet',{months:'Janeiru_Fevereiru_Marsu_Abril_Maiu_Juu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru'.split('_'),monthsShort:'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),weekdays:'Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu'.split('_'),weekdaysShort:'Dom_Seg_Ters_Kua_Kint_Sest_Sab'.split('_'),weekdaysMin:'Do_Seg_Te_Ku_Ki_Ses_Sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Ohin iha] LT',nextDay:'[Aban iha] LT',nextWeek:'dddd [iha] LT',lastDay:'[Horiseik iha] LT',lastWeek:'dddd [semana kotuk] [iha] LT',sameElse:'L'},relativeTime:{future:'iha %s',past:'%s liuba',s:'minutu balun',ss:'minutu %d',m:'minutu ida',mm:'minutu %d',h:'oras ida',hh:'oras %d',d:'loron ida',dd:'loron %d',M:'fulan ida',MM:'fulan %d',y:'tinan ida',yy:'tinan %d'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?'th':b===1?'st':b===2?'nd':b===3?'rd':'th';return number+output;},week:{dow:1,doy:4}});return tet;});

/***/ }),
/* 153 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var te=moment.defineLocale('te',{months:'___________'.split('_'),monthsShort:'._.__.____._._._._.'.split('_'),monthsParseExact:true,weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'A h:mm',LTS:'A h:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm',LLLL:'dddd, D MMMM YYYY, A h:mm'},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'dddd, LT',lastDay:'[] LT',lastWeek:'[] dddd, LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''){return hour<4?hour:hour+12;}else if(meridiem===''){return hour;}else if(meridiem===''){return hour>=10?hour:hour+12;}else if(meridiem===''){return hour+12;}},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<10){return'';}else if(hour<17){return'';}else if(hour<20){return'';}else{return'';}},week:{dow:0,doy:6}});return te;});

/***/ }),
/* 154 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};var ta=moment.defineLocale('ta',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, HH:mm',LLLL:'dddd, D MMMM YYYY, HH:mm'},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'dddd, LT',lastDay:'[] LT',lastWeek:'[ ] dddd, LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:'  ',ss:'%d ',m:' ',mm:'%d ',h:'  ',hh:'%d  ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(number){return number+'';},preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];});},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];});},meridiemParse:/|||||/,meridiem:function(hour,minute,isLower){if(hour<2){return' ';}else if(hour<6){return' ';}else if(hour<10){return' ';}else if(hour<14){return' ';}else if(hour<18){return' ';}else if(hour<22){return' ';}else{return' ';}},meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''){return hour<2?hour:hour+12;}else if(meridiem===''||meridiem===''){return hour;}else if(meridiem===''){return hour>=10?hour:hour+12;}else{return hour+12;}},week:{dow:0,doy:6}});return ta;});

/***/ }),
/* 155 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var sw=moment.defineLocale('sw',{months:'Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba'.split('_'),monthsShort:'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des'.split('_'),weekdays:'Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi'.split('_'),weekdaysShort:'Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos'.split('_'),weekdaysMin:'J2_J3_J4_J5_Al_Ij_J1'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[leo saa] LT',nextDay:'[kesho saa] LT',nextWeek:'[wiki ijayo] dddd [saat] LT',lastDay:'[jana] LT',lastWeek:'[wiki iliyopita] dddd [saat] LT',sameElse:'L'},relativeTime:{future:'%s baadaye',past:'tokea %s',s:'hivi punde',ss:'sekunde %d',m:'dakika moja',mm:'dakika %d',h:'saa limoja',hh:'masaa %d',d:'siku moja',dd:'masiku %d',M:'mwezi mmoja',MM:'miezi %d',y:'mwaka mmoja',yy:'miaka %d'},week:{dow:1,doy:7}});return sw;});

/***/ }),
/* 156 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var sv=moment.defineLocale('sv',{months:'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),monthsShort:'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),weekdays:'sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag'.split('_'),weekdaysShort:'sn_mn_tis_ons_tor_fre_lr'.split('_'),weekdaysMin:'s_m_ti_on_to_fr_l'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'D MMMM YYYY',LLL:'D MMMM YYYY [kl.] HH:mm',LLLL:'dddd D MMMM YYYY [kl.] HH:mm',lll:'D MMM YYYY HH:mm',llll:'ddd D MMM YYYY HH:mm'},calendar:{sameDay:'[Idag] LT',nextDay:'[Imorgon] LT',lastDay:'[Igr] LT',nextWeek:'[P] dddd LT',lastWeek:'[I] dddd[s] LT',sameElse:'L'},relativeTime:{future:'om %s',past:'fr %s sedan',s:'ngra sekunder',ss:'%d sekunder',m:'en minut',mm:'%d minuter',h:'en timme',hh:'%d timmar',d:'en dag',dd:'%d dagar',M:'en mnad',MM:'%d mnader',y:'ett r',yy:'%d r'},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?'e':b===1?'a':b===2?'a':b===3?'e':'e';return number+output;},week:{dow:1,doy:4}});return sv;});

/***/ }),
/* 157 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var ss=moment.defineLocale('ss',{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split('_'),monthsShort:'Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo'.split('_'),weekdays:'Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo'.split('_'),weekdaysShort:'Lis_Umb_Lsb_Les_Lsi_Lsh_Umg'.split('_'),weekdaysMin:'Li_Us_Lb_Lt_Ls_Lh_Ug'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendar:{sameDay:'[Namuhla nga] LT',nextDay:'[Kusasa nga] LT',nextWeek:'dddd [nga] LT',lastDay:'[Itolo nga] LT',lastWeek:'dddd [leliphelile] [nga] LT',sameElse:'L'},relativeTime:{future:'nga %s',past:'wenteka nga %s',s:'emizuzwana lomcane',ss:'%d mzuzwana',m:'umzuzu',mm:'%d emizuzu',h:'lihora',hh:'%d emahora',d:'lilanga',dd:'%d emalanga',M:'inyanga',MM:'%d tinyanga',y:'umnyaka',yy:'%d iminyaka'},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(hours,minutes,isLower){if(hours<11){return'ekuseni';}else if(hours<15){return'emini';}else if(hours<19){return'entsambama';}else{return'ebusuku';}},meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem==='ekuseni'){return hour;}else if(meridiem==='emini'){return hour>=11?hour:hour+12;}else if(meridiem==='entsambama'||meridiem==='ebusuku'){if(hour===0){return 0;}return hour+12;}},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',week:{dow:1,doy:4}});return ss;});

/***/ }),
/* 158 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var translator={words:{ss:['','',''],m:[' ',' '],mm:['','',''],h:[' ',' '],hh:['','',''],dd:['','',''],MM:['','',''],yy:['','','']},correctGrammaticalCase:function(number,wordKey){return number===1?wordKey[0]:number>=2&&number<=4?wordKey[1]:wordKey[2];},translate:function(number,withoutSuffix,key){var wordKey=translator.words[key];if(key.length===1){return withoutSuffix?wordKey[0]:wordKey[1];}else{return number+' '+translator.correctGrammaticalCase(number,wordKey);}}};var srCyrl=moment.defineLocale('sr-cyrl',{months:'___________'.split('_'),monthsShort:'._._._.____._._._._.'.split('_'),monthsParseExact:true,weekdays:'______'.split('_'),weekdaysShort:'._._._._._._.'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',nextWeek:function(){switch(this.day()){case 0:return'[] [] [] LT';case 3:return'[] [] [] LT';case 6:return'[] [] [] LT';case 1:case 2:case 4:case 5:return'[] dddd [] LT';}},lastDay:'[ ] LT',lastWeek:function(){var lastWeekDays=['[] [] [] LT','[] [] [] LT','[] [] [] LT','[] [] [] LT','[] [] [] LT','[] [] [] LT','[] [] [] LT'];return lastWeekDays[this.day()];},sameElse:'L'},relativeTime:{future:' %s',past:' %s',s:' ',ss:translator.translate,m:translator.translate,mm:translator.translate,h:translator.translate,hh:translator.translate,d:'',dd:translator.translate,M:'',MM:translator.translate,y:'',yy:translator.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}});return srCyrl;});

/***/ }),
/* 159 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var translator={words:{ss:['sekunda','sekunde','sekundi'],m:['jedan minut','jedne minute'],mm:['minut','minute','minuta'],h:['jedan sat','jednog sata'],hh:['sat','sata','sati'],dd:['dan','dana','dana'],MM:['mesec','meseca','meseci'],yy:['godina','godine','godina']},correctGrammaticalCase:function(number,wordKey){return number===1?wordKey[0]:number>=2&&number<=4?wordKey[1]:wordKey[2];},translate:function(number,withoutSuffix,key){var wordKey=translator.words[key];if(key.length===1){return withoutSuffix?wordKey[0]:wordKey[1];}else{return number+' '+translator.correctGrammaticalCase(number,wordKey);}}};var sr=moment.defineLocale('sr',{months:'januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar'.split('_'),monthsShort:'jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.'.split('_'),monthsParseExact:true,weekdays:'nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota'.split('_'),weekdaysShort:'ned._pon._uto._sre._et._pet._sub.'.split('_'),weekdaysMin:'ne_po_ut_sr_e_pe_su'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[danas u] LT',nextDay:'[sutra u] LT',nextWeek:function(){switch(this.day()){case 0:return'[u] [nedelju] [u] LT';case 3:return'[u] [sredu] [u] LT';case 6:return'[u] [subotu] [u] LT';case 1:case 2:case 4:case 5:return'[u] dddd [u] LT';}},lastDay:'[jue u] LT',lastWeek:function(){var lastWeekDays=['[prole] [nedelje] [u] LT','[prolog] [ponedeljka] [u] LT','[prolog] [utorka] [u] LT','[prole] [srede] [u] LT','[prolog] [etvrtka] [u] LT','[prolog] [petka] [u] LT','[prole] [subote] [u] LT'];return lastWeekDays[this.day()];},sameElse:'L'},relativeTime:{future:'za %s',past:'pre %s',s:'nekoliko sekundi',ss:translator.translate,m:translator.translate,mm:translator.translate,h:translator.translate,hh:translator.translate,d:'dan',dd:translator.translate,M:'mesec',MM:translator.translate,y:'godinu',yy:translator.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}});return sr;});

/***/ }),
/* 160 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var sq=moment.defineLocale('sq',{months:'Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor'.split('_'),monthsShort:'Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj'.split('_'),weekdays:'E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun'.split('_'),weekdaysShort:'Die_Hn_Mar_Mr_Enj_Pre_Sht'.split('_'),weekdaysMin:'D_H_Ma_M_E_P_Sh'.split('_'),weekdaysParseExact:true,meridiemParse:/PD|MD/,isPM:function(input){return input.charAt(0)==='M';},meridiem:function(hours,minutes,isLower){return hours<12?'PD':'MD';},longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Sot n] LT',nextDay:'[Nesr n] LT',nextWeek:'dddd [n] LT',lastDay:'[Dje n] LT',lastWeek:'dddd [e kaluar n] LT',sameElse:'L'},relativeTime:{future:'n %s',past:'%s m par',s:'disa sekonda',ss:'%d sekonda',m:'nj minut',mm:'%d minuta',h:'nj or',hh:'%d or',d:'nj dit',dd:'%d dit',M:'nj muaj',MM:'%d muaj',y:'nj vit',yy:'%d vite'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return sq;});

/***/ }),
/* 161 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function processRelativeTime(number,withoutSuffix,key,isFuture){var result=number+' ';switch(key){case's':return withoutSuffix||isFuture?'nekaj sekund':'nekaj sekundami';case'ss':if(number===1){result+=withoutSuffix?'sekundo':'sekundi';}else if(number===2){result+=withoutSuffix||isFuture?'sekundi':'sekundah';}else if(number<5){result+=withoutSuffix||isFuture?'sekunde':'sekundah';}else{result+=withoutSuffix||isFuture?'sekund':'sekund';}return result;case'm':return withoutSuffix?'ena minuta':'eno minuto';case'mm':if(number===1){result+=withoutSuffix?'minuta':'minuto';}else if(number===2){result+=withoutSuffix||isFuture?'minuti':'minutama';}else if(number<5){result+=withoutSuffix||isFuture?'minute':'minutami';}else{result+=withoutSuffix||isFuture?'minut':'minutami';}return result;case'h':return withoutSuffix?'ena ura':'eno uro';case'hh':if(number===1){result+=withoutSuffix?'ura':'uro';}else if(number===2){result+=withoutSuffix||isFuture?'uri':'urama';}else if(number<5){result+=withoutSuffix||isFuture?'ure':'urami';}else{result+=withoutSuffix||isFuture?'ur':'urami';}return result;case'd':return withoutSuffix||isFuture?'en dan':'enim dnem';case'dd':if(number===1){result+=withoutSuffix||isFuture?'dan':'dnem';}else if(number===2){result+=withoutSuffix||isFuture?'dni':'dnevoma';}else{result+=withoutSuffix||isFuture?'dni':'dnevi';}return result;case'M':return withoutSuffix||isFuture?'en mesec':'enim mesecem';case'MM':if(number===1){result+=withoutSuffix||isFuture?'mesec':'mesecem';}else if(number===2){result+=withoutSuffix||isFuture?'meseca':'mesecema';}else if(number<5){result+=withoutSuffix||isFuture?'mesece':'meseci';}else{result+=withoutSuffix||isFuture?'mesecev':'meseci';}return result;case'y':return withoutSuffix||isFuture?'eno leto':'enim letom';case'yy':if(number===1){result+=withoutSuffix||isFuture?'leto':'letom';}else if(number===2){result+=withoutSuffix||isFuture?'leti':'letoma';}else if(number<5){result+=withoutSuffix||isFuture?'leta':'leti';}else{result+=withoutSuffix||isFuture?'let':'leti';}return result;}}var sl=moment.defineLocale('sl',{months:'januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december'.split('_'),monthsShort:'jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.'.split('_'),monthsParseExact:true,weekdays:'nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota'.split('_'),weekdaysShort:'ned._pon._tor._sre._et._pet._sob.'.split('_'),weekdaysMin:'ne_po_to_sr_e_pe_so'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[danes ob] LT',nextDay:'[jutri ob] LT',nextWeek:function(){switch(this.day()){case 0:return'[v] [nedeljo] [ob] LT';case 3:return'[v] [sredo] [ob] LT';case 6:return'[v] [soboto] [ob] LT';case 1:case 2:case 4:case 5:return'[v] dddd [ob] LT';}},lastDay:'[veraj ob] LT',lastWeek:function(){switch(this.day()){case 0:return'[prejnjo] [nedeljo] [ob] LT';case 3:return'[prejnjo] [sredo] [ob] LT';case 6:return'[prejnjo] [soboto] [ob] LT';case 1:case 2:case 4:case 5:return'[prejnji] dddd [ob] LT';}},sameElse:'L'},relativeTime:{future:'ez %s',past:'pred %s',s:processRelativeTime,ss:processRelativeTime,m:processRelativeTime,mm:processRelativeTime,h:processRelativeTime,hh:processRelativeTime,d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}});return sl;});

/***/ }),
/* 162 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var months='janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december'.split('_'),monthsShort='jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec'.split('_');function plural(n){return n>1&&n<5;}function translate(number,withoutSuffix,key,isFuture){var result=number+' ';switch(key){case's':return withoutSuffix||isFuture?'pr seknd':'pr sekundami';case'ss':if(withoutSuffix||isFuture){return result+(plural(number)?'sekundy':'seknd');}else{return result+'sekundami';}break;case'm':return withoutSuffix?'minta':isFuture?'mintu':'mintou';case'mm':if(withoutSuffix||isFuture){return result+(plural(number)?'minty':'mint');}else{return result+'mintami';}break;case'h':return withoutSuffix?'hodina':isFuture?'hodinu':'hodinou';case'hh':if(withoutSuffix||isFuture){return result+(plural(number)?'hodiny':'hodn');}else{return result+'hodinami';}break;case'd':return withoutSuffix||isFuture?'de':'dom';case'dd':if(withoutSuffix||isFuture){return result+(plural(number)?'dni':'dn');}else{return result+'dami';}break;case'M':return withoutSuffix||isFuture?'mesiac':'mesiacom';case'MM':if(withoutSuffix||isFuture){return result+(plural(number)?'mesiace':'mesiacov');}else{return result+'mesiacmi';}break;case'y':return withoutSuffix||isFuture?'rok':'rokom';case'yy':if(withoutSuffix||isFuture){return result+(plural(number)?'roky':'rokov');}else{return result+'rokmi';}break;}}var sk=moment.defineLocale('sk',{months:months,monthsShort:monthsShort,weekdays:'nedea_pondelok_utorok_streda_tvrtok_piatok_sobota'.split('_'),weekdaysShort:'ne_po_ut_st_t_pi_so'.split('_'),weekdaysMin:'ne_po_ut_st_t_pi_so'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd D. MMMM YYYY H:mm'},calendar:{sameDay:'[dnes o] LT',nextDay:'[zajtra o] LT',nextWeek:function(){switch(this.day()){case 0:return'[v nedeu o] LT';case 1:case 2:return'[v] dddd [o] LT';case 3:return'[v stredu o] LT';case 4:return'[vo tvrtok o] LT';case 5:return'[v piatok o] LT';case 6:return'[v sobotu o] LT';}},lastDay:'[vera o] LT',lastWeek:function(){switch(this.day()){case 0:return'[minul nedeu o] LT';case 1:case 2:return'[minul] dddd [o] LT';case 3:return'[minul stredu o] LT';case 4:case 5:return'[minul] dddd [o] LT';case 6:return'[minul sobotu o] LT';}},sameElse:'L'},relativeTime:{future:'za %s',past:'pred %s',s:translate,ss:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return sk;});

/***/ }),
/* 163 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var si=moment.defineLocale('si',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'a h:mm',LTS:'a h:mm:ss',L:'YYYY/MM/DD',LL:'YYYY MMMM D',LLL:'YYYY MMMM D, a h:mm',LLLL:'YYYY MMMM D [] dddd, a h:mm:ss'},calendar:{sameDay:'[] LT[]',nextDay:'[] LT[]',nextWeek:'dddd LT[]',lastDay:'[] LT[]',lastWeek:'[] dddd LT[]',sameElse:'L'},relativeTime:{future:'%s',past:'%s ',s:' ',ss:' %d',m:'',mm:' %d',h:'',hh:' %d',d:'',dd:' %d',M:'',MM:' %d',y:'',yy:' %d'},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(number){return number+' ';},meridiemParse:/ | |.|../,isPM:function(input){return input==='..'||input===' ';},meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?'..':' ';}else{return isLower?'..':' ';}}});return si;});

/***/ }),
/* 164 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var se=moment.defineLocale('se',{months:'oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu'.split('_'),monthsShort:'oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov'.split('_'),weekdays:'sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat'.split('_'),weekdaysShort:'sotn_vuos_ma_gask_duor_bear_lv'.split('_'),weekdaysMin:'s_v_m_g_d_b_L'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'MMMM D. [b.] YYYY',LLL:'MMMM D. [b.] YYYY [ti.] HH:mm',LLLL:'dddd, MMMM D. [b.] YYYY [ti.] HH:mm'},calendar:{sameDay:'[otne ti] LT',nextDay:'[ihttin ti] LT',nextWeek:'dddd [ti] LT',lastDay:'[ikte ti] LT',lastWeek:'[ovddit] dddd [ti] LT',sameElse:'L'},relativeTime:{future:'%s geaes',past:'mait %s',s:'moadde sekunddat',ss:'%d sekunddat',m:'okta minuhta',mm:'%d minuhtat',h:'okta diimmu',hh:'%d diimmut',d:'okta beaivi',dd:'%d beaivvit',M:'okta mnnu',MM:'%d mnut',y:'okta jahki',yy:'%d jagit'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return se;});

/***/ }),
/* 165 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var months=['','','','','','','','','','','',''];var days=['','','','','','',''];var sd=moment.defineLocale('sd',{months:months,monthsShort:months,weekdays:days,weekdaysShort:days,weekdaysMin:days,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(input){return''===input;},meridiem:function(hour,minute,isLower){if(hour<12){return'';}return'';},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'dddd [  ] LT',lastDay:'[] LT',lastWeek:'[ ] dddd [] LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},preparse:function(string){return string.replace(//g,',');},postformat:function(string){return string.replace(/,/g,'');},week:{dow:1,doy:4}});return sd;});

/***/ }),
/* 166 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function plural(word,num){var forms=word.split('_');return num%10===1&&num%100!==11?forms[0]:num%10>=2&&num%10<=4&&(num%100<10||num%100>=20)?forms[1]:forms[2];}function relativeTimeWithPlural(number,withoutSuffix,key){var format={'ss':withoutSuffix?'__':'__','mm':withoutSuffix?'__':'__','hh':'__','dd':'__','MM':'__','yy':'__'};if(key==='m'){return withoutSuffix?'':'';}else{return number+' '+plural(format[key],+number);}}var monthsParse=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];var ru=moment.defineLocale('ru',{months:{format:'___________'.split('_'),standalone:'___________'.split('_')},monthsShort:{format:'._._._.____._._._._.'.split('_'),standalone:'._.__.____._._._._.'.split('_')},weekdays:{standalone:'______'.split('_'),format:'______'.split('_'),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),monthsParse:monthsParse,longMonthsParse:monthsParse,shortMonthsParse:monthsParse,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY .',LLL:'D MMMM YYYY ., H:mm',LLLL:'dddd, D MMMM YYYY ., H:mm'},calendar:{sameDay:'[, ] LT',nextDay:'[, ] LT',lastDay:'[, ] LT',nextWeek:function(now){if(now.week()!==this.week()){switch(this.day()){case 0:return'[ ] dddd, [] LT';case 1:case 2:case 4:return'[ ] dddd, [] LT';case 3:case 5:case 6:return'[ ] dddd, [] LT';}}else{if(this.day()===2){return'[] dddd, [] LT';}else{return'[] dddd, [] LT';}}},lastWeek:function(now){if(now.week()!==this.week()){switch(this.day()){case 0:return'[ ] dddd, [] LT';case 1:case 2:case 4:return'[ ] dddd, [] LT';case 3:case 5:case 6:return'[ ] dddd, [] LT';}}else{if(this.day()===2){return'[] dddd, [] LT';}else{return'[] dddd, [] LT';}}},sameElse:'L'},relativeTime:{future:' %s',past:'%s ',s:' ',ss:relativeTimeWithPlural,m:relativeTimeWithPlural,mm:relativeTimeWithPlural,h:'',hh:relativeTimeWithPlural,d:'',dd:relativeTimeWithPlural,M:'',MM:relativeTimeWithPlural,y:'',yy:relativeTimeWithPlural},meridiemParse:/|||/i,isPM:function(input){return /^(|)$/.test(input);},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<12){return'';}else if(hour<17){return'';}else{return'';}},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(number,period){switch(period){case'M':case'd':case'DDD':return number+'-';case'D':return number+'-';case'w':case'W':return number+'-';default:return number;}},week:{dow:1,doy:4}});return ru;});

/***/ }),
/* 167 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function relativeTimeWithPlural(number,withoutSuffix,key){var format={'ss':'secunde','mm':'minute','hh':'ore','dd':'zile','MM':'luni','yy':'ani'},separator=' ';if(number%100>=20||number>=100&&number%100===0){separator=' de ';}return number+separator+format[key];}var ro=moment.defineLocale('ro',{months:'ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie'.split('_'),monthsShort:'ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.'.split('_'),monthsParseExact:true,weekdays:'duminic_luni_mari_miercuri_joi_vineri_smbt'.split('_'),weekdaysShort:'Dum_Lun_Mar_Mie_Joi_Vin_Sm'.split('_'),weekdaysMin:'Du_Lu_Ma_Mi_Jo_Vi_S'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY H:mm',LLLL:'dddd, D MMMM YYYY H:mm'},calendar:{sameDay:'[azi la] LT',nextDay:'[mine la] LT',nextWeek:'dddd [la] LT',lastDay:'[ieri la] LT',lastWeek:'[fosta] dddd [la] LT',sameElse:'L'},relativeTime:{future:'peste %s',past:'%s n urm',s:'cteva secunde',ss:relativeTimeWithPlural,m:'un minut',mm:relativeTimeWithPlural,h:'o or',hh:relativeTimeWithPlural,d:'o zi',dd:relativeTimeWithPlural,M:'o lun',MM:relativeTimeWithPlural,y:'un an',yy:relativeTimeWithPlural},week:{dow:1,doy:7}});return ro;});

/***/ }),
/* 168 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var ptBr=moment.defineLocale('pt-br',{months:'janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro'.split('_'),monthsShort:'jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez'.split('_'),weekdays:'Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado'.split('_'),weekdaysShort:'Dom_Seg_Ter_Qua_Qui_Sex_Sb'.split('_'),weekdaysMin:'Do_2_3_4_5_6_S'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D [de] MMMM [de] YYYY',LLL:'D [de] MMMM [de] YYYY [s] HH:mm',LLLL:'dddd, D [de] MMMM [de] YYYY [s] HH:mm'},calendar:{sameDay:'[Hoje s] LT',nextDay:'[Amanh s] LT',nextWeek:'dddd [s] LT',lastDay:'[Ontem s] LT',lastWeek:function(){return this.day()===0||this.day()===6?'[ltimo] dddd [s] LT':'[ltima] dddd [s] LT';},sameElse:'L'},relativeTime:{future:'em %s',past:'h %s',s:'poucos segundos',ss:'%d segundos',m:'um minuto',mm:'%d minutos',h:'uma hora',hh:'%d horas',d:'um dia',dd:'%d dias',M:'um ms',MM:'%d meses',y:'um ano',yy:'%d anos'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d'});return ptBr;});

/***/ }),
/* 169 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var pt=moment.defineLocale('pt',{months:'janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro'.split('_'),monthsShort:'jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez'.split('_'),weekdays:'Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado'.split('_'),weekdaysShort:'Dom_Seg_Ter_Qua_Qui_Sex_Sb'.split('_'),weekdaysMin:'Do_2_3_4_5_6_S'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D [de] MMMM [de] YYYY',LLL:'D [de] MMMM [de] YYYY HH:mm',LLLL:'dddd, D [de] MMMM [de] YYYY HH:mm'},calendar:{sameDay:'[Hoje s] LT',nextDay:'[Amanh s] LT',nextWeek:'dddd [s] LT',lastDay:'[Ontem s] LT',lastWeek:function(){return this.day()===0||this.day()===6?'[ltimo] dddd [s] LT':'[ltima] dddd [s] LT';},sameElse:'L'},relativeTime:{future:'em %s',past:'h %s',s:'segundos',ss:'%d segundos',m:'um minuto',mm:'%d minutos',h:'uma hora',hh:'%d horas',d:'um dia',dd:'%d dias',M:'um ms',MM:'%d meses',y:'um ano',yy:'%d anos'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',week:{dow:1,doy:4}});return pt;});

/***/ }),
/* 170 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var monthsNominative='stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie'.split('_'),monthsSubjective='stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia'.split('_');function plural(n){return n%10<5&&n%10>1&&~~(n/10)%10!==1;}function translate(number,withoutSuffix,key){var result=number+' ';switch(key){case'ss':return result+(plural(number)?'sekundy':'sekund');case'm':return withoutSuffix?'minuta':'minut';case'mm':return result+(plural(number)?'minuty':'minut');case'h':return withoutSuffix?'godzina':'godzin';case'hh':return result+(plural(number)?'godziny':'godzin');case'MM':return result+(plural(number)?'miesice':'miesicy');case'yy':return result+(plural(number)?'lata':'lat');}}var pl=moment.defineLocale('pl',{months:function(momentToFormat,format){if(!momentToFormat){return monthsNominative;}else if(format===''){return'('+monthsSubjective[momentToFormat.month()]+'|'+monthsNominative[momentToFormat.month()]+')';}else if(/D MMMM/.test(format)){return monthsSubjective[momentToFormat.month()];}else{return monthsNominative[momentToFormat.month()];}},monthsShort:'sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru'.split('_'),weekdays:'niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota'.split('_'),weekdaysShort:'ndz_pon_wt_r_czw_pt_sob'.split('_'),weekdaysMin:'Nd_Pn_Wt_r_Cz_Pt_So'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Dzi o] LT',nextDay:'[Jutro o] LT',nextWeek:function(){switch(this.day()){case 0:return'[W niedziel o] LT';case 2:return'[We wtorek o] LT';case 3:return'[W rod o] LT';case 6:return'[W sobot o] LT';default:return'[W] dddd [o] LT';}},lastDay:'[Wczoraj o] LT',lastWeek:function(){switch(this.day()){case 0:return'[W zesz niedziel o] LT';case 3:return'[W zesz rod o] LT';case 6:return'[W zesz sobot o] LT';default:return'[W zeszy] dddd [o] LT';}},sameElse:'L'},relativeTime:{future:'za %s',past:'%s temu',s:'kilka sekund',ss:translate,m:translate,mm:translate,h:translate,hh:translate,d:'1 dzie',dd:'%d dni',M:'miesic',MM:translate,y:'rok',yy:translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return pl;});

/***/ }),
/* 171 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};var paIn=moment.defineLocale('pa-in',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'A h:mm ',LTS:'A h:mm:ss ',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm ',LLLL:'dddd, D MMMM YYYY, A h:mm '},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'dddd, LT',lastDay:'[] LT',lastWeek:'[] dddd, LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];});},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];});},meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''){return hour<4?hour:hour+12;}else if(meridiem===''){return hour;}else if(meridiem===''){return hour>=10?hour:hour+12;}else if(meridiem===''){return hour+12;}},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<10){return'';}else if(hour<17){return'';}else if(hour<20){return'';}else{return'';}},week:{dow:0,doy:6}});return paIn;});

/***/ }),
/* 172 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var nn=moment.defineLocale('nn',{months:'januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember'.split('_'),monthsShort:'jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_'),weekdays:'sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag'.split('_'),weekdaysShort:'sun_mn_tys_ons_tor_fre_lau'.split('_'),weekdaysMin:'su_m_ty_on_to_fr_l'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY [kl.] H:mm',LLLL:'dddd D. MMMM YYYY [kl.] HH:mm'},calendar:{sameDay:'[I dag klokka] LT',nextDay:'[I morgon klokka] LT',nextWeek:'dddd [klokka] LT',lastDay:'[I gr klokka] LT',lastWeek:'[Fregande] dddd [klokka] LT',sameElse:'L'},relativeTime:{future:'om %s',past:'%s sidan',s:'nokre sekund',ss:'%d sekund',m:'eit minutt',mm:'%d minutt',h:'ein time',hh:'%d timar',d:'ein dag',dd:'%d dagar',M:'ein mnad',MM:'%d mnader',y:'eit r',yy:'%d r'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return nn;});

/***/ }),
/* 173 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var monthsShortWithDots='jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.'.split('_'),monthsShortWithoutDots='jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec'.split('_');var monthsParse=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i];var monthsRegex=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;var nlBe=moment.defineLocale('nl-be',{months:'januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december'.split('_'),monthsShort:function(m,format){if(!m){return monthsShortWithDots;}else if(/-MMM-/.test(format)){return monthsShortWithoutDots[m.month()];}else{return monthsShortWithDots[m.month()];}},monthsRegex:monthsRegex,monthsShortRegex:monthsRegex,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:monthsParse,longMonthsParse:monthsParse,shortMonthsParse:monthsParse,weekdays:'zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag'.split('_'),weekdaysShort:'zo._ma._di._wo._do._vr._za.'.split('_'),weekdaysMin:'zo_ma_di_wo_do_vr_za'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[vandaag om] LT',nextDay:'[morgen om] LT',nextWeek:'dddd [om] LT',lastDay:'[gisteren om] LT',lastWeek:'[afgelopen] dddd [om] LT',sameElse:'L'},relativeTime:{future:'over %s',past:'%s geleden',s:'een paar seconden',ss:'%d seconden',m:'n minuut',mm:'%d minuten',h:'n uur',hh:'%d uur',d:'n dag',dd:'%d dagen',M:'n maand',MM:'%d maanden',y:'n jaar',yy:'%d jaar'},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(number){return number+(number===1||number===8||number>=20?'ste':'de');},week:{dow:1,doy:4}});return nlBe;});

/***/ }),
/* 174 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var monthsShortWithDots='jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.'.split('_'),monthsShortWithoutDots='jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec'.split('_');var monthsParse=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i];var monthsRegex=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;var nl=moment.defineLocale('nl',{months:'januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december'.split('_'),monthsShort:function(m,format){if(!m){return monthsShortWithDots;}else if(/-MMM-/.test(format)){return monthsShortWithoutDots[m.month()];}else{return monthsShortWithDots[m.month()];}},monthsRegex:monthsRegex,monthsShortRegex:monthsRegex,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:monthsParse,longMonthsParse:monthsParse,shortMonthsParse:monthsParse,weekdays:'zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag'.split('_'),weekdaysShort:'zo._ma._di._wo._do._vr._za.'.split('_'),weekdaysMin:'zo_ma_di_wo_do_vr_za'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD-MM-YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[vandaag om] LT',nextDay:'[morgen om] LT',nextWeek:'dddd [om] LT',lastDay:'[gisteren om] LT',lastWeek:'[afgelopen] dddd [om] LT',sameElse:'L'},relativeTime:{future:'over %s',past:'%s geleden',s:'een paar seconden',ss:'%d seconden',m:'n minuut',mm:'%d minuten',h:'n uur',hh:'%d uur',d:'n dag',dd:'%d dagen',M:'n maand',MM:'%d maanden',y:'n jaar',yy:'%d jaar'},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(number){return number+(number===1||number===8||number>=20?'ste':'de');},week:{dow:1,doy:4}});return nl;});

/***/ }),
/* 175 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};var ne=moment.defineLocale('ne',{months:'___________'.split('_'),monthsShort:'._.__.___._._._._._.'.split('_'),monthsParseExact:true,weekdays:'______'.split('_'),weekdaysShort:'._._._._._._.'.split('_'),weekdaysMin:'._._._._._._.'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'A h:mm ',LTS:'A h:mm:ss ',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm ',LLLL:'dddd, D MMMM YYYY, A h:mm '},preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];});},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];});},meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''){return hour<4?hour:hour+12;}else if(meridiem===''){return hour;}else if(meridiem===''){return hour>=10?hour:hour+12;}else if(meridiem===''){return hour+12;}},meridiem:function(hour,minute,isLower){if(hour<3){return'';}else if(hour<12){return'';}else if(hour<16){return'';}else if(hour<20){return'';}else{return'';}},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'[] dddd[,] LT',lastDay:'[] LT',lastWeek:'[] dddd[,] LT',sameElse:'L'},relativeTime:{future:'%s',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},week:{dow:0,doy:6}});return ne;});

/***/ }),
/* 176 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var nb=moment.defineLocale('nb',{months:'januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember'.split('_'),monthsShort:'jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.'.split('_'),monthsParseExact:true,weekdays:'sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag'.split('_'),weekdaysShort:'s._ma._ti._on._to._fr._l.'.split('_'),weekdaysMin:'s_ma_ti_on_to_fr_l'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY [kl.] HH:mm',LLLL:'dddd D. MMMM YYYY [kl.] HH:mm'},calendar:{sameDay:'[i dag kl.] LT',nextDay:'[i morgen kl.] LT',nextWeek:'dddd [kl.] LT',lastDay:'[i gr kl.] LT',lastWeek:'[forrige] dddd [kl.] LT',sameElse:'L'},relativeTime:{future:'om %s',past:'%s siden',s:'noen sekunder',ss:'%d sekunder',m:'ett minutt',mm:'%d minutter',h:'en time',hh:'%d timer',d:'en dag',dd:'%d dager',M:'en mned',MM:'%d mneder',y:'ett r',yy:'%d r'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return nb;});

/***/ }),
/* 177 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};var my=moment.defineLocale('my',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[.] LT []',nextDay:'[] LT []',nextWeek:'dddd LT []',lastDay:'[.] LT []',lastWeek:'[] dddd LT []',sameElse:'L'},relativeTime:{future:' %s ',past:' %s ',s:'.',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d ',M:'',MM:'%d ',y:'',yy:'%d '},preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];});},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];});},week:{dow:1,doy:4}});return my;});

/***/ }),
/* 178 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var mt=moment.defineLocale('mt',{months:'Jannar_Frar_Marzu_April_Mejju_unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diembru'.split('_'),monthsShort:'Jan_Fra_Mar_Apr_Mej_un_Lul_Aww_Set_Ott_Nov_Di'.split('_'),weekdays:'Il-add_It-Tnejn_It-Tlieta_L-Erbga_Il-amis_Il-imga_Is-Sibt'.split('_'),weekdaysShort:'ad_Tne_Tli_Erb_am_im_Sib'.split('_'),weekdaysMin:'a_Tn_Tl_Er_a_i_Si'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Illum fil-]LT',nextDay:'[Gada fil-]LT',nextWeek:'dddd [fil-]LT',lastDay:'[Il-biera fil-]LT',lastWeek:'dddd [li gadda] [fil-]LT',sameElse:'L'},relativeTime:{future:'f %s',past:'%s ilu',s:'ftit sekondi',ss:'%d sekondi',m:'minuta',mm:'%d minuti',h:'siega',hh:'%d siegat',d:'urnata',dd:'%d ranet',M:'xahar',MM:'%d xhur',y:'sena',yy:'%d sni'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',week:{dow:1,doy:4}});return mt;});

/***/ }),
/* 179 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var msMy=moment.defineLocale('ms-my',{months:'Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember'.split('_'),monthsShort:'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis'.split('_'),weekdays:'Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu'.split('_'),weekdaysShort:'Ahd_Isn_Sel_Rab_Kha_Jum_Sab'.split('_'),weekdaysMin:'Ah_Is_Sl_Rb_Km_Jm_Sb'.split('_'),longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY [pukul] HH.mm',LLLL:'dddd, D MMMM YYYY [pukul] HH.mm'},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem==='pagi'){return hour;}else if(meridiem==='tengahari'){return hour>=11?hour:hour+12;}else if(meridiem==='petang'||meridiem==='malam'){return hour+12;}},meridiem:function(hours,minutes,isLower){if(hours<11){return'pagi';}else if(hours<15){return'tengahari';}else if(hours<19){return'petang';}else{return'malam';}},calendar:{sameDay:'[Hari ini pukul] LT',nextDay:'[Esok pukul] LT',nextWeek:'dddd [pukul] LT',lastDay:'[Kelmarin pukul] LT',lastWeek:'dddd [lepas pukul] LT',sameElse:'L'},relativeTime:{future:'dalam %s',past:'%s yang lepas',s:'beberapa saat',ss:'%d saat',m:'seminit',mm:'%d minit',h:'sejam',hh:'%d jam',d:'sehari',dd:'%d hari',M:'sebulan',MM:'%d bulan',y:'setahun',yy:'%d tahun'},week:{dow:1,doy:7}});return msMy;});

/***/ }),
/* 180 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var ms=moment.defineLocale('ms',{months:'Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember'.split('_'),monthsShort:'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis'.split('_'),weekdays:'Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu'.split('_'),weekdaysShort:'Ahd_Isn_Sel_Rab_Kha_Jum_Sab'.split('_'),weekdaysMin:'Ah_Is_Sl_Rb_Km_Jm_Sb'.split('_'),longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY [pukul] HH.mm',LLLL:'dddd, D MMMM YYYY [pukul] HH.mm'},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem==='pagi'){return hour;}else if(meridiem==='tengahari'){return hour>=11?hour:hour+12;}else if(meridiem==='petang'||meridiem==='malam'){return hour+12;}},meridiem:function(hours,minutes,isLower){if(hours<11){return'pagi';}else if(hours<15){return'tengahari';}else if(hours<19){return'petang';}else{return'malam';}},calendar:{sameDay:'[Hari ini pukul] LT',nextDay:'[Esok pukul] LT',nextWeek:'dddd [pukul] LT',lastDay:'[Kelmarin pukul] LT',lastWeek:'dddd [lepas pukul] LT',sameElse:'L'},relativeTime:{future:'dalam %s',past:'%s yang lepas',s:'beberapa saat',ss:'%d saat',m:'seminit',mm:'%d minit',h:'sejam',hh:'%d jam',d:'sehari',dd:'%d hari',M:'sebulan',MM:'%d bulan',y:'setahun',yy:'%d tahun'},week:{dow:1,doy:7}});return ms;});

/***/ }),
/* 181 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};function relativeTimeMr(number,withoutSuffix,string,isFuture){var output='';if(withoutSuffix){switch(string){case's':output=' ';break;case'ss':output='%d ';break;case'm':output=' ';break;case'mm':output='%d ';break;case'h':output=' ';break;case'hh':output='%d ';break;case'd':output=' ';break;case'dd':output='%d ';break;case'M':output=' ';break;case'MM':output='%d ';break;case'y':output=' ';break;case'yy':output='%d ';break;}}else{switch(string){case's':output=' ';break;case'ss':output='%d ';break;case'm':output=' ';break;case'mm':output='%d ';break;case'h':output=' ';break;case'hh':output='%d ';break;case'd':output=' ';break;case'dd':output='%d ';break;case'M':output=' ';break;case'MM':output='%d ';break;case'y':output=' ';break;case'yy':output='%d ';break;}}return output.replace(/%d/i,number);}var mr=moment.defineLocale('mr',{months:'___________'.split('_'),monthsShort:'._._._._._._._._._._._.'.split('_'),monthsParseExact:true,weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'A h:mm ',LTS:'A h:mm:ss ',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm ',LLLL:'dddd, D MMMM YYYY, A h:mm '},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'dddd, LT',lastDay:'[] LT',lastWeek:'[] dddd, LT',sameElse:'L'},relativeTime:{future:'%s',past:'%s',s:relativeTimeMr,ss:relativeTimeMr,m:relativeTimeMr,mm:relativeTimeMr,h:relativeTimeMr,hh:relativeTimeMr,d:relativeTimeMr,dd:relativeTimeMr,M:relativeTimeMr,MM:relativeTimeMr,y:relativeTimeMr,yy:relativeTimeMr},preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];});},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];});},meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''){return hour<4?hour:hour+12;}else if(meridiem===''){return hour;}else if(meridiem===''){return hour>=10?hour:hour+12;}else if(meridiem===''){return hour+12;}},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<10){return'';}else if(hour<17){return'';}else if(hour<20){return'';}else{return'';}},week:{dow:0,doy:6}});return mr;});

/***/ }),
/* 182 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function translate(number,withoutSuffix,key,isFuture){switch(key){case's':return withoutSuffix?' ':' ';case'ss':return number+(withoutSuffix?' ':' ');case'm':case'mm':return number+(withoutSuffix?' ':' ');case'h':case'hh':return number+(withoutSuffix?' ':' ');case'd':case'dd':return number+(withoutSuffix?' ':' ');case'M':case'MM':return number+(withoutSuffix?' ':' ');case'y':case'yy':return number+(withoutSuffix?' ':' ');default:return number;}}var mn=moment.defineLocale('mn',{months:' _ _ _ _ _ _ _ _ _ _  _  '.split('_'),monthsShort:'1 _2 _3 _4 _5 _6 _7 _8 _9 _10 _11 _12 '.split('_'),monthsParseExact:true,weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'YYYY  MMMM D',LLL:'YYYY  MMMM D HH:mm',LLLL:'dddd, YYYY  MMMM D HH:mm'},meridiemParse:/|/i,isPM:function(input){return input==='';},meridiem:function(hour,minute,isLower){if(hour<12){return'';}else{return'';}},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'[] dddd LT',lastDay:'[] LT',lastWeek:'[] dddd LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:translate,ss:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(number,period){switch(period){case'd':case'D':case'DDD':return number+' ';default:return number;}}});return mn;});

/***/ }),
/* 183 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var ml=moment.defineLocale('ml',{months:'___________'.split('_'),monthsShort:'._._._.___._._._._._.'.split('_'),monthsParseExact:true,weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'A h:mm -',LTS:'A h:mm:ss -',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm -',LLLL:'dddd, D MMMM YYYY, A h:mm -'},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'dddd, LT',lastDay:'[] LT',lastWeek:'[] dddd, LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},meridiemParse:/|| ||/i,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''&&hour>=4||meridiem===' '||meridiem===''){return hour+12;}else{return hour;}},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<12){return'';}else if(hour<17){return' ';}else if(hour<20){return'';}else{return'';}}});return ml;});

/***/ }),
/* 184 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var mk=moment.defineLocale('mk',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'e_o_____a'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'D.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY H:mm',LLLL:'dddd, D MMMM YYYY H:mm'},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',nextWeek:'[] dddd [] LT',lastDay:'[ ] LT',lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return'[] dddd [] LT';case 1:case 2:case 4:case 5:return'[] dddd [] LT';}},sameElse:'L'},relativeTime:{future:' %s',past:' %s',s:' ',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d ',M:'',MM:'%d ',y:'',yy:'%d '},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(number){var lastDigit=number%10,last2Digits=number%100;if(number===0){return number+'-';}else if(last2Digits===0){return number+'-';}else if(last2Digits>10&&last2Digits<20){return number+'-';}else if(lastDigit===1){return number+'-';}else if(lastDigit===2){return number+'-';}else if(lastDigit===7||lastDigit===8){return number+'-';}else{return number+'-';}},week:{dow:1,doy:7}});return mk;});

/***/ }),
/* 185 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var mi=moment.defineLocale('mi',{months:'Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea'.split('_'),monthsShort:'Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki'.split('_'),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:'Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei'.split('_'),weekdaysShort:'Ta_Ma_T_We_Ti_Pa_H'.split('_'),weekdaysMin:'Ta_Ma_T_We_Ti_Pa_H'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY [i] HH:mm',LLLL:'dddd, D MMMM YYYY [i] HH:mm'},calendar:{sameDay:'[i teie mahana, i] LT',nextDay:'[apopo i] LT',nextWeek:'dddd [i] LT',lastDay:'[inanahi i] LT',lastWeek:'dddd [whakamutunga i] LT',sameElse:'L'},relativeTime:{future:'i roto i %s',past:'%s i mua',s:'te hkona ruarua',ss:'%d hkona',m:'he meneti',mm:'%d meneti',h:'te haora',hh:'%d haora',d:'he ra',dd:'%d ra',M:'he marama',MM:'%d marama',y:'he tau',yy:'%d tau'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',week:{dow:1,doy:4}});return mi;});

/***/ }),
/* 186 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var translator={words:{ss:['sekund','sekunda','sekundi'],m:['jedan minut','jednog minuta'],mm:['minut','minuta','minuta'],h:['jedan sat','jednog sata'],hh:['sat','sata','sati'],dd:['dan','dana','dana'],MM:['mjesec','mjeseca','mjeseci'],yy:['godina','godine','godina']},correctGrammaticalCase:function(number,wordKey){return number===1?wordKey[0]:number>=2&&number<=4?wordKey[1]:wordKey[2];},translate:function(number,withoutSuffix,key){var wordKey=translator.words[key];if(key.length===1){return withoutSuffix?wordKey[0]:wordKey[1];}else{return number+' '+translator.correctGrammaticalCase(number,wordKey);}}};var me=moment.defineLocale('me',{months:'januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar'.split('_'),monthsShort:'jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.'.split('_'),monthsParseExact:true,weekdays:'nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota'.split('_'),weekdaysShort:'ned._pon._uto._sri._et._pet._sub.'.split('_'),weekdaysMin:'ne_po_ut_sr_e_pe_su'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[danas u] LT',nextDay:'[sjutra u] LT',nextWeek:function(){switch(this.day()){case 0:return'[u] [nedjelju] [u] LT';case 3:return'[u] [srijedu] [u] LT';case 6:return'[u] [subotu] [u] LT';case 1:case 2:case 4:case 5:return'[u] dddd [u] LT';}},lastDay:'[jue u] LT',lastWeek:function(){var lastWeekDays=['[prole] [nedjelje] [u] LT','[prolog] [ponedjeljka] [u] LT','[prolog] [utorka] [u] LT','[prole] [srijede] [u] LT','[prolog] [etvrtka] [u] LT','[prolog] [petka] [u] LT','[prole] [subote] [u] LT'];return lastWeekDays[this.day()];},sameElse:'L'},relativeTime:{future:'za %s',past:'prije %s',s:'nekoliko sekundi',ss:translator.translate,m:translator.translate,mm:translator.translate,h:translator.translate,hh:translator.translate,d:'dan',dd:translator.translate,M:'mjesec',MM:translator.translate,y:'godinu',yy:translator.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}});return me;});

/***/ }),
/* 187 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var units={'ss':'sekundes_sekundm_sekunde_sekundes'.split('_'),'m':'mintes_mintm_minte_mintes'.split('_'),'mm':'mintes_mintm_minte_mintes'.split('_'),'h':'stundas_stundm_stunda_stundas'.split('_'),'hh':'stundas_stundm_stunda_stundas'.split('_'),'d':'dienas_dienm_diena_dienas'.split('_'),'dd':'dienas_dienm_diena_dienas'.split('_'),'M':'mnea_mneiem_mnesis_mnei'.split('_'),'MM':'mnea_mneiem_mnesis_mnei'.split('_'),'y':'gada_gadiem_gads_gadi'.split('_'),'yy':'gada_gadiem_gads_gadi'.split('_')};function format(forms,number,withoutSuffix){if(withoutSuffix){return number%10===1&&number%100!==11?forms[2]:forms[3];}else{return number%10===1&&number%100!==11?forms[0]:forms[1];}}function relativeTimeWithPlural(number,withoutSuffix,key){return number+' '+format(units[key],number,withoutSuffix);}function relativeTimeWithSingular(number,withoutSuffix,key){return format(units[key],number,withoutSuffix);}function relativeSeconds(number,withoutSuffix){return withoutSuffix?'daas sekundes':'dam sekundm';}var lv=moment.defineLocale('lv',{months:'janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris'.split('_'),monthsShort:'jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec'.split('_'),weekdays:'svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena'.split('_'),weekdaysShort:'Sv_P_O_T_C_Pk_S'.split('_'),weekdaysMin:'Sv_P_O_T_C_Pk_S'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY.',LL:'YYYY. [gada] D. MMMM',LLL:'YYYY. [gada] D. MMMM, HH:mm',LLLL:'YYYY. [gada] D. MMMM, dddd, HH:mm'},calendar:{sameDay:'[odien pulksten] LT',nextDay:'[Rt pulksten] LT',nextWeek:'dddd [pulksten] LT',lastDay:'[Vakar pulksten] LT',lastWeek:'[Pagju] dddd [pulksten] LT',sameElse:'L'},relativeTime:{future:'pc %s',past:'pirms %s',s:relativeSeconds,ss:relativeTimeWithPlural,m:relativeTimeWithSingular,mm:relativeTimeWithPlural,h:relativeTimeWithSingular,hh:relativeTimeWithPlural,d:relativeTimeWithSingular,dd:relativeTimeWithPlural,M:relativeTimeWithSingular,MM:relativeTimeWithPlural,y:relativeTimeWithSingular,yy:relativeTimeWithPlural},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return lv;});

/***/ }),
/* 188 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var units={'ss':'sekund_sekundi_sekundes','m':'minut_minuts_minut','mm':'minuts_minui_minutes','h':'valanda_valandos_valand','hh':'valandos_valand_valandas','d':'diena_dienos_dien','dd':'dienos_dien_dienas','M':'mnuo_mnesio_mnes','MM':'mnesiai_mnesi_mnesius','y':'metai_met_metus','yy':'metai_met_metus'};function translateSeconds(number,withoutSuffix,key,isFuture){if(withoutSuffix){return'kelios sekunds';}else{return isFuture?'keli sekundi':'kelias sekundes';}}function translateSingular(number,withoutSuffix,key,isFuture){return withoutSuffix?forms(key)[0]:isFuture?forms(key)[1]:forms(key)[2];}function special(number){return number%10===0||number>10&&number<20;}function forms(key){return units[key].split('_');}function translate(number,withoutSuffix,key,isFuture){var result=number+' ';if(number===1){return result+translateSingular(number,withoutSuffix,key[0],isFuture);}else if(withoutSuffix){return result+(special(number)?forms(key)[1]:forms(key)[0]);}else{if(isFuture){return result+forms(key)[1];}else{return result+(special(number)?forms(key)[1]:forms(key)[2]);}}}var lt=moment.defineLocale('lt',{months:{format:'sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio'.split('_'),standalone:'sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis'.split('_'),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:'sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd'.split('_'),weekdays:{format:'sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien'.split('_'),standalone:'sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis'.split('_'),isFormat:/dddd HH:mm/},weekdaysShort:'Sek_Pir_Ant_Tre_Ket_Pen_e'.split('_'),weekdaysMin:'S_P_A_T_K_Pn_'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'YYYY [m.] MMMM D [d.]',LLL:'YYYY [m.] MMMM D [d.], HH:mm [val.]',LLLL:'YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]',l:'YYYY-MM-DD',ll:'YYYY [m.] MMMM D [d.]',lll:'YYYY [m.] MMMM D [d.], HH:mm [val.]',llll:'YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]'},calendar:{sameDay:'[iandien] LT',nextDay:'[Rytoj] LT',nextWeek:'dddd LT',lastDay:'[Vakar] LT',lastWeek:'[Prajus] dddd LT',sameElse:'L'},relativeTime:{future:'po %s',past:'prie %s',s:translateSeconds,ss:translate,m:translateSingular,mm:translate,h:translateSingular,hh:translate,d:translateSingular,dd:translate,M:translateSingular,MM:translate,y:translateSingular,yy:translate},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(number){return number+'-oji';},week:{dow:1,doy:4}});return lt;});

/***/ }),
/* 189 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var lo=moment.defineLocale('lo',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(input){return input==='';},meridiem:function(hour,minute,isLower){if(hour<12){return'';}else{return'';}},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'[]dddd[] LT',lastDay:'[] LT',lastWeek:'[]dddd[] LT',sameElse:'L'},relativeTime:{future:' %s',past:'%s',s:'',ss:'%d ',m:'1 ',mm:'%d ',h:'1 ',hh:'%d ',d:'1 ',dd:'%d ',M:'1 ',MM:'%d ',y:'1 ',yy:'%d '},dayOfMonthOrdinalParse:/()\d{1,2}/,ordinal:function(number){return''+number;}});return lo;});

/***/ }),
/* 190 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function processRelativeTime(number,withoutSuffix,key,isFuture){var format={'m':['eng Minutt','enger Minutt'],'h':['eng Stonn','enger Stonn'],'d':['een Dag','engem Dag'],'M':['ee Mount','engem Mount'],'y':['ee Joer','engem Joer']};return withoutSuffix?format[key][0]:format[key][1];}function processFutureTime(string){var number=string.substr(0,string.indexOf(' '));if(eifelerRegelAppliesToNumber(number)){return'a '+string;}return'an '+string;}function processPastTime(string){var number=string.substr(0,string.indexOf(' '));if(eifelerRegelAppliesToNumber(number)){return'viru '+string;}return'virun '+string;}function eifelerRegelAppliesToNumber(number){number=parseInt(number,10);if(isNaN(number)){return false;}if(number<0){return true;}else if(number<10){if(4<=number&&number<=7){return true;}return false;}else if(number<100){var lastDigit=number%10,firstDigit=number/10;if(lastDigit===0){return eifelerRegelAppliesToNumber(firstDigit);}return eifelerRegelAppliesToNumber(lastDigit);}else if(number<10000){while(number>=10){number=number/10;}return eifelerRegelAppliesToNumber(number);}else{number=number/1000;return eifelerRegelAppliesToNumber(number);}}var lb=moment.defineLocale('lb',{months:'Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),monthsShort:'Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.'.split('_'),monthsParseExact:true,weekdays:'Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg'.split('_'),weekdaysShort:'So._M._D._M._Do._Fr._Sa.'.split('_'),weekdaysMin:'So_M_D_M_Do_Fr_Sa'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'H:mm [Auer]',LTS:'H:mm:ss [Auer]',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm [Auer]',LLLL:'dddd, D. MMMM YYYY H:mm [Auer]'},calendar:{sameDay:'[Haut um] LT',sameElse:'L',nextDay:'[Muer um] LT',nextWeek:'dddd [um] LT',lastDay:'[Gschter um] LT',lastWeek:function(){switch(this.day()){case 2:case 4:return'[Leschten] dddd [um] LT';default:return'[Leschte] dddd [um] LT';}}},relativeTime:{future:processFutureTime,past:processPastTime,s:'e puer Sekonnen',ss:'%d Sekonnen',m:processRelativeTime,mm:'%d Minutten',h:processRelativeTime,hh:'%d Stonnen',d:processRelativeTime,dd:'%d Deeg',M:processRelativeTime,MM:'%d Mint',y:processRelativeTime,yy:'%d Joer'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return lb;});

/***/ }),
/* 191 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var suffixes={0:'-',1:'-',2:'-',3:'-',4:'-',5:'-',6:'-',7:'-',8:'-',9:'-',10:'-',20:'-',30:'-',40:'-',50:'-',60:'-',70:'-',80:'-',90:'-',100:'-'};var ky=moment.defineLocale('ky',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',nextWeek:'dddd [] LT',lastDay:'[ ] LT',lastWeek:'[ ] dddd [] [] LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},dayOfMonthOrdinalParse:/\d{1,2}-(|||)/,ordinal:function(number){var a=number%10,b=number>=100?100:null;return number+(suffixes[number]||suffixes[a]||suffixes[b]);},week:{dow:1,doy:7}});return ky;});

/***/ }),
/* 192 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var ko=moment.defineLocale('ko',{months:'1_2_3_4_5_6_7_8_9_10_11_12'.split('_'),monthsShort:'1_2_3_4_5_6_7_8_9_10_11_12'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'A h:mm',LTS:'A h:mm:ss',L:'YYYY.MM.DD.',LL:'YYYY MMMM D',LLL:'YYYY MMMM D A h:mm',LLLL:'YYYY MMMM D dddd A h:mm',l:'YYYY.MM.DD.',ll:'YYYY MMMM D',lll:'YYYY MMMM D A h:mm',llll:'YYYY MMMM D dddd A h:mm'},calendar:{sameDay:' LT',nextDay:' LT',nextWeek:'dddd LT',lastDay:' LT',lastWeek:' dddd LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:' ',ss:'%d',m:'1',mm:'%d',h:' ',hh:'%d',d:'',dd:'%d',M:' ',MM:'%d',y:' ',yy:'%d'},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(number,period){switch(period){case'd':case'D':case'DDD':return number+'';case'M':return number+'';case'w':case'W':return number+'';default:return number;}},meridiemParse:/|/,isPM:function(token){return token==='';},meridiem:function(hour,minute,isUpper){return hour<12?'':'';}});return ko;});

/***/ }),
/* 193 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};var kn=moment.defineLocale('kn',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),monthsParseExact:true,weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'A h:mm',LTS:'A h:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm',LLLL:'dddd, D MMMM YYYY, A h:mm'},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'dddd, LT',lastDay:'[] LT',lastWeek:'[] dddd, LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];});},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];});},meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''){return hour<4?hour:hour+12;}else if(meridiem===''){return hour;}else if(meridiem===''){return hour>=10?hour:hour+12;}else if(meridiem===''){return hour+12;}},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<10){return'';}else if(hour<17){return'';}else if(hour<20){return'';}else{return'';}},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(number){return number+'';},week:{dow:0,doy:6}});return kn;});

/***/ }),
/* 194 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};var km=moment.defineLocale('km',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(input){return input==='';},meridiem:function(hour,minute,isLower){if(hour<12){return'';}else{return'';}},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',nextWeek:'dddd [] LT',lastDay:'[ ] LT',lastWeek:'dddd [] [] LT',sameElse:'L'},relativeTime:{future:'%s',past:'%s',s:'',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d ',M:'',MM:'%d ',y:'',yy:'%d '},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];});},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];});},week:{dow:1,doy:4}});return km;});

/***/ }),
/* 195 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var suffixes={0:'-',1:'-',2:'-',3:'-',4:'-',5:'-',6:'-',7:'-',8:'-',9:'-',10:'-',20:'-',30:'-',40:'-',50:'-',60:'-',70:'-',80:'-',90:'-',100:'-'};var kk=moment.defineLocale('kk',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',nextWeek:'dddd [] LT',lastDay:'[ ] LT',lastWeek:'[ ] dddd [] LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(number){var a=number%10,b=number>=100?100:null;return number+(suffixes[number]||suffixes[a]||suffixes[b]);},week:{dow:1,doy:7}});return kk;});

/***/ }),
/* 196 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var ka=moment.defineLocale('ka',{months:{standalone:'___________'.split('_'),format:'___________'.split('_')},monthsShort:'___________'.split('_'),weekdays:{standalone:'______'.split('_'),format:'______'.split('_'),isFormat:/(|)/},weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendar:{sameDay:'[] LT[-]',nextDay:'[] LT[-]',lastDay:'[] LT[-]',nextWeek:'[] dddd LT[-]',lastWeek:'[] dddd LT-',sameElse:'L'},relativeTime:{future:function(s){return /(|||)/.test(s)?s.replace(/$/,''):s+'';},past:function(s){if(/(||||)/.test(s)){return s.replace(/(|)$/,' ');}if(//.test(s)){return s.replace(/$/,' ');}},s:' ',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d ',M:'',MM:'%d ',y:'',yy:'%d '},dayOfMonthOrdinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(number){if(number===0){return number;}if(number===1){return number+'-';}if(number<20||number<=100&&number%20===0||number%100===0){return'-'+number;}return number+'-';},week:{dow:1,doy:7}});return ka;});

/***/ }),
/* 197 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var jv=moment.defineLocale('jv',{months:'Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des'.split('_'),weekdays:'Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu'.split('_'),weekdaysShort:'Min_Sen_Sel_Reb_Kem_Jem_Sep'.split('_'),weekdaysMin:'Mg_Sn_Sl_Rb_Km_Jm_Sp'.split('_'),longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY [pukul] HH.mm',LLLL:'dddd, D MMMM YYYY [pukul] HH.mm'},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem==='enjing'){return hour;}else if(meridiem==='siyang'){return hour>=11?hour:hour+12;}else if(meridiem==='sonten'||meridiem==='ndalu'){return hour+12;}},meridiem:function(hours,minutes,isLower){if(hours<11){return'enjing';}else if(hours<15){return'siyang';}else if(hours<19){return'sonten';}else{return'ndalu';}},calendar:{sameDay:'[Dinten puniko pukul] LT',nextDay:'[Mbenjang pukul] LT',nextWeek:'dddd [pukul] LT',lastDay:'[Kala wingi pukul] LT',lastWeek:'dddd [kepengker pukul] LT',sameElse:'L'},relativeTime:{future:'wonten ing %s',past:'%s ingkang kepengker',s:'sawetawis detik',ss:'%d detik',m:'setunggal menit',mm:'%d menit',h:'setunggal jam',hh:'%d jam',d:'sedinten',dd:'%d dinten',M:'sewulan',MM:'%d wulan',y:'setaun',yy:'%d taun'},week:{dow:1,doy:7}});return jv;});

/***/ }),
/* 198 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var ja=moment.defineLocale('ja',{months:'1_2_3_4_5_6_7_8_9_10_11_12'.split('_'),monthsShort:'1_2_3_4_5_6_7_8_9_10_11_12'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY/MM/DD',LL:'YYYYMD',LLL:'YYYYMD HH:mm',LLLL:'YYYYMD dddd HH:mm',l:'YYYY/MM/DD',ll:'YYYYMD',lll:'YYYYMD HH:mm',llll:'YYYYMD(ddd) HH:mm'},meridiemParse:/|/i,isPM:function(input){return input==='';},meridiem:function(hour,minute,isLower){if(hour<12){return'';}else{return'';}},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:function(now){if(now.week()<this.week()){return'[]dddd LT';}else{return'dddd LT';}},lastDay:'[] LT',lastWeek:function(now){if(this.week()<now.week()){return'[]dddd LT';}else{return'dddd LT';}},sameElse:'L'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(number,period){switch(period){case'd':case'D':case'DDD':return number+'';default:return number;}},relativeTime:{future:'%s',past:'%s',s:'',ss:'%d',m:'1',mm:'%d',h:'1',hh:'%d',d:'1',dd:'%d',M:'1',MM:'%d',y:'1',yy:'%d'}});return ja;});

/***/ }),
/* 199 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var it=moment.defineLocale('it',{months:'gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre'.split('_'),monthsShort:'gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic'.split('_'),weekdays:'domenica_luned_marted_mercoled_gioved_venerd_sabato'.split('_'),weekdaysShort:'dom_lun_mar_mer_gio_ven_sab'.split('_'),weekdaysMin:'do_lu_ma_me_gi_ve_sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Oggi alle] LT',nextDay:'[Domani alle] LT',nextWeek:'dddd [alle] LT',lastDay:'[Ieri alle] LT',lastWeek:function(){switch(this.day()){case 0:return'[la scorsa] dddd [alle] LT';default:return'[lo scorso] dddd [alle] LT';}},sameElse:'L'},relativeTime:{future:function(s){return(/^[0-9].+$/.test(s)?'tra':'in')+' '+s;},past:'%s fa',s:'alcuni secondi',ss:'%d secondi',m:'un minuto',mm:'%d minuti',h:'un\'ora',hh:'%d ore',d:'un giorno',dd:'%d giorni',M:'un mese',MM:'%d mesi',y:'un anno',yy:'%d anni'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',week:{dow:1,doy:4}});return it;});

/***/ }),
/* 200 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function plural(n){if(n%100===11){return true;}else if(n%10===1){return false;}return true;}function translate(number,withoutSuffix,key,isFuture){var result=number+' ';switch(key){case's':return withoutSuffix||isFuture?'nokkrar sekndur':'nokkrum sekndum';case'ss':if(plural(number)){return result+(withoutSuffix||isFuture?'sekndur':'sekndum');}return result+'seknda';case'm':return withoutSuffix?'mnta':'mntu';case'mm':if(plural(number)){return result+(withoutSuffix||isFuture?'mntur':'mntum');}else if(withoutSuffix){return result+'mnta';}return result+'mntu';case'hh':if(plural(number)){return result+(withoutSuffix||isFuture?'klukkustundir':'klukkustundum');}return result+'klukkustund';case'd':if(withoutSuffix){return'dagur';}return isFuture?'dag':'degi';case'dd':if(plural(number)){if(withoutSuffix){return result+'dagar';}return result+(isFuture?'daga':'dgum');}else if(withoutSuffix){return result+'dagur';}return result+(isFuture?'dag':'degi');case'M':if(withoutSuffix){return'mnuur';}return isFuture?'mnu':'mnui';case'MM':if(plural(number)){if(withoutSuffix){return result+'mnuir';}return result+(isFuture?'mnui':'mnuum');}else if(withoutSuffix){return result+'mnuur';}return result+(isFuture?'mnu':'mnui');case'y':return withoutSuffix||isFuture?'r':'ri';case'yy':if(plural(number)){return result+(withoutSuffix||isFuture?'r':'rum');}return result+(withoutSuffix||isFuture?'r':'ri');}}var is=moment.defineLocale('is',{months:'janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember'.split('_'),monthsShort:'jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des'.split('_'),weekdays:'sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur'.split('_'),weekdaysShort:'sun_mn_ri_mi_fim_fs_lau'.split('_'),weekdaysMin:'Su_M_r_Mi_Fi_F_La'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY [kl.] H:mm',LLLL:'dddd, D. MMMM YYYY [kl.] H:mm'},calendar:{sameDay:'[ dag kl.] LT',nextDay:'[ morgun kl.] LT',nextWeek:'dddd [kl.] LT',lastDay:'[ gr kl.] LT',lastWeek:'[sasta] dddd [kl.] LT',sameElse:'L'},relativeTime:{future:'eftir %s',past:'fyrir %s san',s:translate,ss:translate,m:translate,mm:translate,h:'klukkustund',hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return is;});

/***/ }),
/* 201 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var id=moment.defineLocale('id',{months:'Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des'.split('_'),weekdays:'Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu'.split('_'),weekdaysShort:'Min_Sen_Sel_Rab_Kam_Jum_Sab'.split('_'),weekdaysMin:'Mg_Sn_Sl_Rb_Km_Jm_Sb'.split('_'),longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY [pukul] HH.mm',LLLL:'dddd, D MMMM YYYY [pukul] HH.mm'},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem==='pagi'){return hour;}else if(meridiem==='siang'){return hour>=11?hour:hour+12;}else if(meridiem==='sore'||meridiem==='malam'){return hour+12;}},meridiem:function(hours,minutes,isLower){if(hours<11){return'pagi';}else if(hours<15){return'siang';}else if(hours<19){return'sore';}else{return'malam';}},calendar:{sameDay:'[Hari ini pukul] LT',nextDay:'[Besok pukul] LT',nextWeek:'dddd [pukul] LT',lastDay:'[Kemarin pukul] LT',lastWeek:'dddd [lalu pukul] LT',sameElse:'L'},relativeTime:{future:'dalam %s',past:'%s yang lalu',s:'beberapa detik',ss:'%d detik',m:'semenit',mm:'%d menit',h:'sejam',hh:'%d jam',d:'sehari',dd:'%d hari',M:'sebulan',MM:'%d bulan',y:'setahun',yy:'%d tahun'},week:{dow:1,doy:7}});return id;});

/***/ }),
/* 202 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var hyAm=moment.defineLocale('hy-am',{months:{format:'___________'.split('_'),standalone:'___________'.split('_')},monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY .',LLL:'D MMMM YYYY ., HH:mm',LLLL:'dddd, D MMMM YYYY ., HH:mm'},calendar:{sameDay:'[] LT',nextDay:'[] LT',lastDay:'[] LT',nextWeek:function(){return'dddd [ ] LT';},lastWeek:function(){return'[] dddd [ ] LT';},sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:'  ',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d ',M:'',MM:'%d ',y:'',yy:'%d '},meridiemParse:/|||/,isPM:function(input){return /^(|)$/.test(input);},meridiem:function(hour){if(hour<4){return'';}else if(hour<12){return'';}else if(hour<17){return'';}else{return'';}},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(number,period){switch(period){case'DDD':case'w':case'W':case'DDDo':if(number===1){return number+'-';}return number+'-';default:return number;}},week:{dow:1,doy:7}});return hyAm;});

/***/ }),
/* 203 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var weekEndings='vasrnap htfn kedden szerdn cstrtkn pnteken szombaton'.split(' ');function translate(number,withoutSuffix,key,isFuture){var num=number;switch(key){case's':return isFuture||withoutSuffix?'nhny msodperc':'nhny msodperce';case'ss':return num+(isFuture||withoutSuffix)?' msodperc':' msodperce';case'm':return'egy'+(isFuture||withoutSuffix?' perc':' perce');case'mm':return num+(isFuture||withoutSuffix?' perc':' perce');case'h':return'egy'+(isFuture||withoutSuffix?' ra':' rja');case'hh':return num+(isFuture||withoutSuffix?' ra':' rja');case'd':return'egy'+(isFuture||withoutSuffix?' nap':' napja');case'dd':return num+(isFuture||withoutSuffix?' nap':' napja');case'M':return'egy'+(isFuture||withoutSuffix?' hnap':' hnapja');case'MM':return num+(isFuture||withoutSuffix?' hnap':' hnapja');case'y':return'egy'+(isFuture||withoutSuffix?' v':' ve');case'yy':return num+(isFuture||withoutSuffix?' v':' ve');}return'';}function week(isFuture){return(isFuture?'':'[mlt] ')+'['+weekEndings[this.day()]+'] LT[-kor]';}var hu=moment.defineLocale('hu',{months:'janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december'.split('_'),monthsShort:'jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec'.split('_'),weekdays:'vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat'.split('_'),weekdaysShort:'vas_ht_kedd_sze_cst_pn_szo'.split('_'),weekdaysMin:'v_h_k_sze_cs_p_szo'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'YYYY.MM.DD.',LL:'YYYY. MMMM D.',LLL:'YYYY. MMMM D. H:mm',LLLL:'YYYY. MMMM D., dddd H:mm'},meridiemParse:/de|du/i,isPM:function(input){return input.charAt(1).toLowerCase()==='u';},meridiem:function(hours,minutes,isLower){if(hours<12){return isLower===true?'de':'DE';}else{return isLower===true?'du':'DU';}},calendar:{sameDay:'[ma] LT[-kor]',nextDay:'[holnap] LT[-kor]',nextWeek:function(){return week.call(this,true);},lastDay:'[tegnap] LT[-kor]',lastWeek:function(){return week.call(this,false);},sameElse:'L'},relativeTime:{future:'%s mlva',past:'%s',s:translate,ss:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return hu;});

/***/ }),
/* 204 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function translate(number,withoutSuffix,key){var result=number+' ';switch(key){case'ss':if(number===1){result+='sekunda';}else if(number===2||number===3||number===4){result+='sekunde';}else{result+='sekundi';}return result;case'm':return withoutSuffix?'jedna minuta':'jedne minute';case'mm':if(number===1){result+='minuta';}else if(number===2||number===3||number===4){result+='minute';}else{result+='minuta';}return result;case'h':return withoutSuffix?'jedan sat':'jednog sata';case'hh':if(number===1){result+='sat';}else if(number===2||number===3||number===4){result+='sata';}else{result+='sati';}return result;case'dd':if(number===1){result+='dan';}else{result+='dana';}return result;case'MM':if(number===1){result+='mjesec';}else if(number===2||number===3||number===4){result+='mjeseca';}else{result+='mjeseci';}return result;case'yy':if(number===1){result+='godina';}else if(number===2||number===3||number===4){result+='godine';}else{result+='godina';}return result;}}var hr=moment.defineLocale('hr',{months:{format:'sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca'.split('_'),standalone:'sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac'.split('_')},monthsShort:'sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.'.split('_'),monthsParseExact:true,weekdays:'nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota'.split('_'),weekdaysShort:'ned._pon._uto._sri._et._pet._sub.'.split('_'),weekdaysMin:'ne_po_ut_sr_e_pe_su'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[danas u] LT',nextDay:'[sutra u] LT',nextWeek:function(){switch(this.day()){case 0:return'[u] [nedjelju] [u] LT';case 3:return'[u] [srijedu] [u] LT';case 6:return'[u] [subotu] [u] LT';case 1:case 2:case 4:case 5:return'[u] dddd [u] LT';}},lastDay:'[juer u] LT',lastWeek:function(){switch(this.day()){case 0:case 3:return'[prolu] dddd [u] LT';case 6:return'[prole] [subote] [u] LT';case 1:case 2:case 4:case 5:return'[proli] dddd [u] LT';}},sameElse:'L'},relativeTime:{future:'za %s',past:'prije %s',s:'par sekundi',ss:translate,m:translate,mm:translate,h:translate,hh:translate,d:'dan',dd:translate,M:'mjesec',MM:translate,y:'godinu',yy:translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}});return hr;});

/***/ }),
/* 205 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};var hi=moment.defineLocale('hi',{months:'___________'.split('_'),monthsShort:'._.__.___._._._._._.'.split('_'),monthsParseExact:true,weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'A h:mm ',LTS:'A h:mm:ss ',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm ',LLLL:'dddd, D MMMM YYYY, A h:mm '},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'dddd, LT',lastDay:'[] LT',lastWeek:'[] dddd, LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:'  ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];});},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];});},meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''){return hour<4?hour:hour+12;}else if(meridiem===''){return hour;}else if(meridiem===''){return hour>=10?hour:hour+12;}else if(meridiem===''){return hour+12;}},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<10){return'';}else if(hour<17){return'';}else if(hour<20){return'';}else{return'';}},week:{dow:0,doy:6}});return hi;});

/***/ }),
/* 206 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var he=moment.defineLocale('he',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D []MMMM YYYY',LLL:'D []MMMM YYYY HH:mm',LLLL:'dddd, D []MMMM YYYY HH:mm',l:'D/M/YYYY',ll:'D MMM YYYY',lll:'D MMM YYYY HH:mm',llll:'ddd, D MMM YYYY HH:mm'},calendar:{sameDay:'[ ]LT',nextDay:'[ ]LT',nextWeek:'dddd [] LT',lastDay:'[ ]LT',lastWeek:'[] dddd [ ] LT',sameElse:'L'},relativeTime:{future:' %s',past:' %s',s:' ',ss:'%d ',m:'',mm:'%d ',h:'',hh:function(number){if(number===2){return'';}return number+' ';},d:'',dd:function(number){if(number===2){return'';}return number+' ';},M:'',MM:function(number){if(number===2){return'';}return number+' ';},y:'',yy:function(number){if(number===2){return'';}else if(number%10===0&&number!==10){return number+' ';}return number+' ';}},meridiemParse:/"|"| | | ||/i,isPM:function(input){return /^("| |)$/.test(input);},meridiem:function(hour,minute,isLower){if(hour<5){return' ';}else if(hour<10){return'';}else if(hour<12){return isLower?'"':' ';}else if(hour<18){return isLower?'"':' ';}else{return'';}}});return he;});

/***/ }),
/* 207 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};var gu=moment.defineLocale('gu',{months:'___________'.split('_'),monthsShort:'._.__.___._._._._._.'.split('_'),monthsParseExact:true,weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'A h:mm ',LTS:'A h:mm:ss ',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm ',LLLL:'dddd, D MMMM YYYY, A h:mm '},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'dddd, LT',lastDay:'[] LT',lastWeek:'[] dddd, LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];});},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];});},meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''){return hour<4?hour:hour+12;}else if(meridiem===''){return hour;}else if(meridiem===''){return hour>=10?hour:hour+12;}else if(meridiem===''){return hour+12;}},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<10){return'';}else if(hour<17){return'';}else if(hour<20){return'';}else{return'';}},week:{dow:0,doy:6}});return gu;});

/***/ }),
/* 208 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function processRelativeTime(number,withoutSuffix,key,isFuture){var format={'s':['thodde secondanim','thodde second'],'ss':[number+' secondanim',number+' second'],'m':['eka mintan','ek minute'],'mm':[number+' mintanim',number+' mintam'],'h':['eka horan','ek hor'],'hh':[number+' horanim',number+' horam'],'d':['eka disan','ek dis'],'dd':[number+' disanim',number+' dis'],'M':['eka mhoinean','ek mhoino'],'MM':[number+' mhoineanim',number+' mhoine'],'y':['eka vorsan','ek voros'],'yy':[number+' vorsanim',number+' vorsam']};return withoutSuffix?format[key][0]:format[key][1];}var gomLatn=moment.defineLocale('gom-latn',{months:'Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr'.split('_'),monthsShort:'Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.'.split('_'),monthsParseExact:true,weekdays:'Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son\'var'.split('_'),weekdaysShort:'Ait._Som._Mon._Bud._Bre._Suk._Son.'.split('_'),weekdaysMin:'Ai_Sm_Mo_Bu_Br_Su_Sn'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'A h:mm [vazta]',LTS:'A h:mm:ss [vazta]',L:'DD-MM-YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY A h:mm [vazta]',LLLL:'dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]',llll:'ddd, D MMM YYYY, A h:mm [vazta]'},calendar:{sameDay:'[Aiz] LT',nextDay:'[Faleam] LT',nextWeek:'[Ieta to] dddd[,] LT',lastDay:'[Kal] LT',lastWeek:'[Fatlo] dddd[,] LT',sameElse:'L'},relativeTime:{future:'%s',past:'%s adim',s:processRelativeTime,ss:processRelativeTime,m:processRelativeTime,mm:processRelativeTime,h:processRelativeTime,hh:processRelativeTime,d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(number,period){switch(period){case'D':return number+'er';default:case'M':case'Q':case'DDD':case'd':case'w':case'W':return number;}},week:{dow:1,doy:4},meridiemParse:/rati|sokalli|donparam|sanje/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem==='rati'){return hour<4?hour:hour+12;}else if(meridiem==='sokalli'){return hour;}else if(meridiem==='donparam'){return hour>12?hour:hour+12;}else if(meridiem==='sanje'){return hour+12;}},meridiem:function(hour,minute,isLower){if(hour<4){return'rati';}else if(hour<12){return'sokalli';}else if(hour<16){return'donparam';}else if(hour<20){return'sanje';}else{return'rati';}}});return gomLatn;});

/***/ }),
/* 209 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var gl=moment.defineLocale('gl',{months:'xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro'.split('_'),monthsShort:'xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.'.split('_'),monthsParseExact:true,weekdays:'domingo_luns_martes_mrcores_xoves_venres_sbado'.split('_'),weekdaysShort:'dom._lun._mar._mr._xov._ven._sb.'.split('_'),weekdaysMin:'do_lu_ma_m_xo_ve_s'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD/MM/YYYY',LL:'D [de] MMMM [de] YYYY',LLL:'D [de] MMMM [de] YYYY H:mm',LLLL:'dddd, D [de] MMMM [de] YYYY H:mm'},calendar:{sameDay:function(){return'[hoxe '+(this.hours()!==1?'s':'')+'] LT';},nextDay:function(){return'[ma '+(this.hours()!==1?'s':'')+'] LT';},nextWeek:function(){return'dddd ['+(this.hours()!==1?'s':'a')+'] LT';},lastDay:function(){return'[onte '+(this.hours()!==1?'':'a')+'] LT';},lastWeek:function(){return'[o] dddd [pasado '+(this.hours()!==1?'s':'a')+'] LT';},sameElse:'L'},relativeTime:{future:function(str){if(str.indexOf('un')===0){return'n'+str;}return'en '+str;},past:'hai %s',s:'uns segundos',ss:'%d segundos',m:'un minuto',mm:'%d minutos',h:'unha hora',hh:'%d horas',d:'un da',dd:'%d das',M:'un mes',MM:'%d meses',y:'un ano',yy:'%d anos'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',week:{dow:1,doy:4}});return gl;});

/***/ }),
/* 210 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var months=['Am Faoilleach','An Gearran','Am Mrt','An Giblean','An Citean','An t-gmhios','An t-Iuchar','An Lnastal','An t-Sultain','An Dmhair','An t-Samhain','An Dbhlachd'];var monthsShort=['Faoi','Gear','Mrt','Gibl','Cit','gmh','Iuch','Ln','Sult','Dmh','Samh','Dbh'];var weekdays=['Didmhnaich','Diluain','Dimirt','Diciadain','Diardaoin','Dihaoine','Disathairne'];var weekdaysShort=['Did','Dil','Dim','Dic','Dia','Dih','Dis'];var weekdaysMin=['D','Lu','M','Ci','Ar','Ha','Sa'];var gd=moment.defineLocale('gd',{months:months,monthsShort:monthsShort,monthsParseExact:true,weekdays:weekdays,weekdaysShort:weekdaysShort,weekdaysMin:weekdaysMin,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[An-diugh aig] LT',nextDay:'[A-mireach aig] LT',nextWeek:'dddd [aig] LT',lastDay:'[An-d aig] LT',lastWeek:'dddd [seo chaidh] [aig] LT',sameElse:'L'},relativeTime:{future:'ann an %s',past:'bho chionn %s',s:'beagan diogan',ss:'%d diogan',m:'mionaid',mm:'%d mionaidean',h:'uair',hh:'%d uairean',d:'latha',dd:'%d latha',M:'mos',MM:'%d mosan',y:'bliadhna',yy:'%d bliadhna'},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(number){var output=number===1?'d':number%10===2?'na':'mh';return number+output;},week:{dow:1,doy:4}});return gd;});

/***/ }),
/* 211 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var monthsShortWithDots='jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.'.split('_'),monthsShortWithoutDots='jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_');var fy=moment.defineLocale('fy',{months:'jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber'.split('_'),monthsShort:function(m,format){if(!m){return monthsShortWithDots;}else if(/-MMM-/.test(format)){return monthsShortWithoutDots[m.month()];}else{return monthsShortWithDots[m.month()];}},monthsParseExact:true,weekdays:'snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon'.split('_'),weekdaysShort:'si._mo._ti._wo._to._fr._so.'.split('_'),weekdaysMin:'Si_Mo_Ti_Wo_To_Fr_So'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD-MM-YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[hjoed om] LT',nextDay:'[moarn om] LT',nextWeek:'dddd [om] LT',lastDay:'[juster om] LT',lastWeek:'[frne] dddd [om] LT',sameElse:'L'},relativeTime:{future:'oer %s',past:'%s lyn',s:'in pear sekonden',ss:'%d sekonden',m:'ien mint',mm:'%d minuten',h:'ien oere',hh:'%d oeren',d:'ien dei',dd:'%d dagen',M:'ien moanne',MM:'%d moannen',y:'ien jier',yy:'%d jierren'},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(number){return number+(number===1||number===8||number>=20?'ste':'de');},week:{dow:1,doy:4}});return fy;});

/***/ }),
/* 212 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var frCh=moment.defineLocale('fr-ch',{months:'janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre'.split('_'),monthsShort:'janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.'.split('_'),monthsParseExact:true,weekdays:'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),weekdaysShort:'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),weekdaysMin:'di_lu_ma_me_je_ve_sa'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Aujourdhui ] LT',nextDay:'[Demain ] LT',nextWeek:'dddd [] LT',lastDay:'[Hier ] LT',lastWeek:'dddd [dernier ] LT',sameElse:'L'},relativeTime:{future:'dans %s',past:'il y a %s',s:'quelques secondes',ss:'%d secondes',m:'une minute',mm:'%d minutes',h:'une heure',hh:'%d heures',d:'un jour',dd:'%d jours',M:'un mois',MM:'%d mois',y:'un an',yy:'%d ans'},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(number,period){switch(period){default:case'M':case'Q':case'D':case'DDD':case'd':return number+(number===1?'er':'e');case'w':case'W':return number+(number===1?'re':'e');}},week:{dow:1,doy:4}});return frCh;});

/***/ }),
/* 213 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var frCa=moment.defineLocale('fr-ca',{months:'janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre'.split('_'),monthsShort:'janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.'.split('_'),monthsParseExact:true,weekdays:'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),weekdaysShort:'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),weekdaysMin:'di_lu_ma_me_je_ve_sa'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Aujourdhui ] LT',nextDay:'[Demain ] LT',nextWeek:'dddd [] LT',lastDay:'[Hier ] LT',lastWeek:'dddd [dernier ] LT',sameElse:'L'},relativeTime:{future:'dans %s',past:'il y a %s',s:'quelques secondes',ss:'%d secondes',m:'une minute',mm:'%d minutes',h:'une heure',hh:'%d heures',d:'un jour',dd:'%d jours',M:'un mois',MM:'%d mois',y:'un an',yy:'%d ans'},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(number,period){switch(period){default:case'M':case'Q':case'D':case'DDD':case'd':return number+(number===1?'er':'e');case'w':case'W':return number+(number===1?'re':'e');}}});return frCa;});

/***/ }),
/* 214 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var fr=moment.defineLocale('fr',{months:'janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre'.split('_'),monthsShort:'janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.'.split('_'),monthsParseExact:true,weekdays:'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),weekdaysShort:'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),weekdaysMin:'di_lu_ma_me_je_ve_sa'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Aujourdhui ] LT',nextDay:'[Demain ] LT',nextWeek:'dddd [] LT',lastDay:'[Hier ] LT',lastWeek:'dddd [dernier ] LT',sameElse:'L'},relativeTime:{future:'dans %s',past:'il y a %s',s:'quelques secondes',ss:'%d secondes',m:'une minute',mm:'%d minutes',h:'une heure',hh:'%d heures',d:'un jour',dd:'%d jours',M:'un mois',MM:'%d mois',y:'un an',yy:'%d ans'},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(number,period){switch(period){case'D':return number+(number===1?'er':'');default:case'M':case'Q':case'DDD':case'd':return number+(number===1?'er':'e');case'w':case'W':return number+(number===1?'re':'e');}},week:{dow:1,doy:4}});return fr;});

/***/ }),
/* 215 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var fo=moment.defineLocale('fo',{months:'januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember'.split('_'),monthsShort:'jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_'),weekdays:'sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur'.split('_'),weekdaysShort:'sun_mn_ts_mik_hs_fr_ley'.split('_'),weekdaysMin:'su_m_t_mi_h_fr_le'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D. MMMM, YYYY HH:mm'},calendar:{sameDay:'[ dag kl.] LT',nextDay:'[ morgin kl.] LT',nextWeek:'dddd [kl.] LT',lastDay:'[ gjr kl.] LT',lastWeek:'[sstu] dddd [kl] LT',sameElse:'L'},relativeTime:{future:'um %s',past:'%s sani',s:'f sekund',ss:'%d sekundir',m:'ein minutt',mm:'%d minuttir',h:'ein tmi',hh:'%d tmar',d:'ein dagur',dd:'%d dagar',M:'ein mnai',MM:'%d mnair',y:'eitt r',yy:'%d r'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return fo;});

/***/ }),
/* 216 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var numbersPast='nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn'.split(' '),numbersFuture=['nolla','yhden','kahden','kolmen','neljn','viiden','kuuden',numbersPast[7],numbersPast[8],numbersPast[9]];function translate(number,withoutSuffix,key,isFuture){var result='';switch(key){case's':return isFuture?'muutaman sekunnin':'muutama sekunti';case'ss':return isFuture?'sekunnin':'sekuntia';case'm':return isFuture?'minuutin':'minuutti';case'mm':result=isFuture?'minuutin':'minuuttia';break;case'h':return isFuture?'tunnin':'tunti';case'hh':result=isFuture?'tunnin':'tuntia';break;case'd':return isFuture?'pivn':'piv';case'dd':result=isFuture?'pivn':'piv';break;case'M':return isFuture?'kuukauden':'kuukausi';case'MM':result=isFuture?'kuukauden':'kuukautta';break;case'y':return isFuture?'vuoden':'vuosi';case'yy':result=isFuture?'vuoden':'vuotta';break;}result=verbalNumber(number,isFuture)+' '+result;return result;}function verbalNumber(number,isFuture){return number<10?isFuture?numbersFuture[number]:numbersPast[number]:number;}var fi=moment.defineLocale('fi',{months:'tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu'.split('_'),monthsShort:'tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu'.split('_'),weekdays:'sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai'.split('_'),weekdaysShort:'su_ma_ti_ke_to_pe_la'.split('_'),weekdaysMin:'su_ma_ti_ke_to_pe_la'.split('_'),longDateFormat:{LT:'HH.mm',LTS:'HH.mm.ss',L:'DD.MM.YYYY',LL:'Do MMMM[ta] YYYY',LLL:'Do MMMM[ta] YYYY, [klo] HH.mm',LLLL:'dddd, Do MMMM[ta] YYYY, [klo] HH.mm',l:'D.M.YYYY',ll:'Do MMM YYYY',lll:'Do MMM YYYY, [klo] HH.mm',llll:'ddd, Do MMM YYYY, [klo] HH.mm'},calendar:{sameDay:'[tnn] [klo] LT',nextDay:'[huomenna] [klo] LT',nextWeek:'dddd [klo] LT',lastDay:'[eilen] [klo] LT',lastWeek:'[viime] dddd[na] [klo] LT',sameElse:'L'},relativeTime:{future:'%s pst',past:'%s sitten',s:translate,ss:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return fi;});

/***/ }),
/* 217 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};var fa=moment.defineLocale('fa',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'\u200c__\u200c__\u200c__'.split('_'),weekdaysShort:'\u200c__\u200c__\u200c__'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},meridiemParse:/  |  /,isPM:function(input){return /  /.test(input);},meridiem:function(hour,minute,isLower){if(hour<12){return'  ';}else{return'  ';}},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',nextWeek:'dddd [] LT',lastDay:'[ ] LT',lastWeek:'dddd [] [] LT',sameElse:'L'},relativeTime:{future:' %s',past:'%s ',s:' ',ss:' d%',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},preparse:function(string){return string.replace(/[-]/g,function(match){return numberMap[match];}).replace(//g,',');},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];}).replace(/,/g,'');},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',week:{dow:6,doy:12}});return fa;});

/***/ }),
/* 218 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var eu=moment.defineLocale('eu',{months:'urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua'.split('_'),monthsShort:'urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.'.split('_'),monthsParseExact:true,weekdays:'igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata'.split('_'),weekdaysShort:'ig._al._ar._az._og._ol._lr.'.split('_'),weekdaysMin:'ig_al_ar_az_og_ol_lr'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'YYYY[ko] MMMM[ren] D[a]',LLL:'YYYY[ko] MMMM[ren] D[a] HH:mm',LLLL:'dddd, YYYY[ko] MMMM[ren] D[a] HH:mm',l:'YYYY-M-D',ll:'YYYY[ko] MMM D[a]',lll:'YYYY[ko] MMM D[a] HH:mm',llll:'ddd, YYYY[ko] MMM D[a] HH:mm'},calendar:{sameDay:'[gaur] LT[etan]',nextDay:'[bihar] LT[etan]',nextWeek:'dddd LT[etan]',lastDay:'[atzo] LT[etan]',lastWeek:'[aurreko] dddd LT[etan]',sameElse:'L'},relativeTime:{future:'%s barru',past:'duela %s',s:'segundo batzuk',ss:'%d segundo',m:'minutu bat',mm:'%d minutu',h:'ordu bat',hh:'%d ordu',d:'egun bat',dd:'%d egun',M:'hilabete bat',MM:'%d hilabete',y:'urte bat',yy:'%d urte'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}});return eu;});

/***/ }),
/* 219 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function processRelativeTime(number,withoutSuffix,key,isFuture){var format={'s':['mne sekundi','mni sekund','paar sekundit'],'ss':[number+'sekundi',number+'sekundit'],'m':['he minuti','ks minut'],'mm':[number+' minuti',number+' minutit'],'h':['he tunni','tund aega','ks tund'],'hh':[number+' tunni',number+' tundi'],'d':['he peva','ks pev'],'M':['kuu aja','kuu aega','ks kuu'],'MM':[number+' kuu',number+' kuud'],'y':['he aasta','aasta','ks aasta'],'yy':[number+' aasta',number+' aastat']};if(withoutSuffix){return format[key][2]?format[key][2]:format[key][1];}return isFuture?format[key][0]:format[key][1];}var et=moment.defineLocale('et',{months:'jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember'.split('_'),monthsShort:'jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets'.split('_'),weekdays:'phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev'.split('_'),weekdaysShort:'P_E_T_K_N_R_L'.split('_'),weekdaysMin:'P_E_T_K_N_R_L'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[Tna,] LT',nextDay:'[Homme,] LT',nextWeek:'[Jrgmine] dddd LT',lastDay:'[Eile,] LT',lastWeek:'[Eelmine] dddd LT',sameElse:'L'},relativeTime:{future:'%s prast',past:'%s tagasi',s:processRelativeTime,ss:processRelativeTime,m:processRelativeTime,mm:processRelativeTime,h:processRelativeTime,hh:processRelativeTime,d:processRelativeTime,dd:'%d peva',M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return et;});

/***/ }),
/* 220 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var monthsShortDot='ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),monthsShort='ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_');var esUs=moment.defineLocale('es-us',{months:'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),monthsShort:function(m,format){if(!m){return monthsShortDot;}else if(/-MMM-/.test(format)){return monthsShort[m.month()];}else{return monthsShortDot[m.month()];}},monthsParseExact:true,weekdays:'domingo_lunes_martes_mircoles_jueves_viernes_sbado'.split('_'),weekdaysShort:'dom._lun._mar._mi._jue._vie._sb.'.split('_'),weekdaysMin:'do_lu_ma_mi_ju_vi_s'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'MM/DD/YYYY',LL:'MMMM [de] D [de] YYYY',LLL:'MMMM [de] D [de] YYYY h:mm A',LLLL:'dddd, MMMM [de] D [de] YYYY h:mm A'},calendar:{sameDay:function(){return'[hoy a la'+(this.hours()!==1?'s':'')+'] LT';},nextDay:function(){return'[maana a la'+(this.hours()!==1?'s':'')+'] LT';},nextWeek:function(){return'dddd [a la'+(this.hours()!==1?'s':'')+'] LT';},lastDay:function(){return'[ayer a la'+(this.hours()!==1?'s':'')+'] LT';},lastWeek:function(){return'[el] dddd [pasado a la'+(this.hours()!==1?'s':'')+'] LT';},sameElse:'L'},relativeTime:{future:'en %s',past:'hace %s',s:'unos segundos',ss:'%d segundos',m:'un minuto',mm:'%d minutos',h:'una hora',hh:'%d horas',d:'un da',dd:'%d das',M:'un mes',MM:'%d meses',y:'un ao',yy:'%d aos'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',week:{dow:0,doy:6}});return esUs;});

/***/ }),
/* 221 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var monthsShortDot='ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),monthsShort='ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_');var monthsParse=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i];var monthsRegex=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;var esDo=moment.defineLocale('es-do',{months:'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),monthsShort:function(m,format){if(!m){return monthsShortDot;}else if(/-MMM-/.test(format)){return monthsShort[m.month()];}else{return monthsShortDot[m.month()];}},monthsRegex:monthsRegex,monthsShortRegex:monthsRegex,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:monthsParse,longMonthsParse:monthsParse,shortMonthsParse:monthsParse,weekdays:'domingo_lunes_martes_mircoles_jueves_viernes_sbado'.split('_'),weekdaysShort:'dom._lun._mar._mi._jue._vie._sb.'.split('_'),weekdaysMin:'do_lu_ma_mi_ju_vi_s'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D [de] MMMM [de] YYYY',LLL:'D [de] MMMM [de] YYYY h:mm A',LLLL:'dddd, D [de] MMMM [de] YYYY h:mm A'},calendar:{sameDay:function(){return'[hoy a la'+(this.hours()!==1?'s':'')+'] LT';},nextDay:function(){return'[maana a la'+(this.hours()!==1?'s':'')+'] LT';},nextWeek:function(){return'dddd [a la'+(this.hours()!==1?'s':'')+'] LT';},lastDay:function(){return'[ayer a la'+(this.hours()!==1?'s':'')+'] LT';},lastWeek:function(){return'[el] dddd [pasado a la'+(this.hours()!==1?'s':'')+'] LT';},sameElse:'L'},relativeTime:{future:'en %s',past:'hace %s',s:'unos segundos',ss:'%d segundos',m:'un minuto',mm:'%d minutos',h:'una hora',hh:'%d horas',d:'un da',dd:'%d das',M:'un mes',MM:'%d meses',y:'un ao',yy:'%d aos'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',week:{dow:1,doy:4}});return esDo;});

/***/ }),
/* 222 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var monthsShortDot='ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),monthsShort='ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_');var monthsParse=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i];var monthsRegex=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;var es=moment.defineLocale('es',{months:'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),monthsShort:function(m,format){if(!m){return monthsShortDot;}else if(/-MMM-/.test(format)){return monthsShort[m.month()];}else{return monthsShortDot[m.month()];}},monthsRegex:monthsRegex,monthsShortRegex:monthsRegex,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:monthsParse,longMonthsParse:monthsParse,shortMonthsParse:monthsParse,weekdays:'domingo_lunes_martes_mircoles_jueves_viernes_sbado'.split('_'),weekdaysShort:'dom._lun._mar._mi._jue._vie._sb.'.split('_'),weekdaysMin:'do_lu_ma_mi_ju_vi_s'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD/MM/YYYY',LL:'D [de] MMMM [de] YYYY',LLL:'D [de] MMMM [de] YYYY H:mm',LLLL:'dddd, D [de] MMMM [de] YYYY H:mm'},calendar:{sameDay:function(){return'[hoy a la'+(this.hours()!==1?'s':'')+'] LT';},nextDay:function(){return'[maana a la'+(this.hours()!==1?'s':'')+'] LT';},nextWeek:function(){return'dddd [a la'+(this.hours()!==1?'s':'')+'] LT';},lastDay:function(){return'[ayer a la'+(this.hours()!==1?'s':'')+'] LT';},lastWeek:function(){return'[el] dddd [pasado a la'+(this.hours()!==1?'s':'')+'] LT';},sameElse:'L'},relativeTime:{future:'en %s',past:'hace %s',s:'unos segundos',ss:'%d segundos',m:'un minuto',mm:'%d minutos',h:'una hora',hh:'%d horas',d:'un da',dd:'%d das',M:'un mes',MM:'%d meses',y:'un ao',yy:'%d aos'},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',week:{dow:1,doy:4}});return es;});

/***/ }),
/* 223 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var eo=moment.defineLocale('eo',{months:'januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro'.split('_'),monthsShort:'jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec'.split('_'),weekdays:'dimano_lundo_mardo_merkredo_ado_vendredo_sabato'.split('_'),weekdaysShort:'dim_lun_mard_merk_a_ven_sab'.split('_'),weekdaysMin:'di_lu_ma_me_a_ve_sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'D[-a de] MMMM, YYYY',LLL:'D[-a de] MMMM, YYYY HH:mm',LLLL:'dddd, [la] D[-a de] MMMM, YYYY HH:mm'},meridiemParse:/[ap]\.t\.m/i,isPM:function(input){return input.charAt(0).toLowerCase()==='p';},meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?'p.t.m.':'P.T.M.';}else{return isLower?'a.t.m.':'A.T.M.';}},calendar:{sameDay:'[Hodia je] LT',nextDay:'[Morga je] LT',nextWeek:'dddd [je] LT',lastDay:'[Hiera je] LT',lastWeek:'[pasinta] dddd [je] LT',sameElse:'L'},relativeTime:{future:'post %s',past:'anta %s',s:'sekundoj',ss:'%d sekundoj',m:'minuto',mm:'%d minutoj',h:'horo',hh:'%d horoj',d:'tago',dd:'%d tagoj',M:'monato',MM:'%d monatoj',y:'jaro',yy:'%d jaroj'},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:'%da',week:{dow:1,doy:7}});return eo;});

/***/ }),
/* 224 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var enNz=moment.defineLocale('en-nz',{months:'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),weekdays:'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),weekdaysShort:'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),weekdaysMin:'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?'th':b===1?'st':b===2?'nd':b===3?'rd':'th';return number+output;},week:{dow:1,doy:4}});return enNz;});

/***/ }),
/* 225 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var enIl=moment.defineLocale('en-il',{months:'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),weekdays:'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),weekdaysShort:'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),weekdaysMin:'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?'th':b===1?'st':b===2?'nd':b===3?'rd':'th';return number+output;}});return enIl;});

/***/ }),
/* 226 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var enIe=moment.defineLocale('en-ie',{months:'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),weekdays:'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),weekdaysShort:'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),weekdaysMin:'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD-MM-YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?'th':b===1?'st':b===2?'nd':b===3?'rd':'th';return number+output;},week:{dow:1,doy:4}});return enIe;});

/***/ }),
/* 227 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var enGb=moment.defineLocale('en-gb',{months:'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),weekdays:'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),weekdaysShort:'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),weekdaysMin:'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?'th':b===1?'st':b===2?'nd':b===3?'rd':'th';return number+output;},week:{dow:1,doy:4}});return enGb;});

/***/ }),
/* 228 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var enCa=moment.defineLocale('en-ca',{months:'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),weekdays:'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),weekdaysShort:'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),weekdaysMin:'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'YYYY-MM-DD',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY h:mm A',LLLL:'dddd, MMMM D, YYYY h:mm A'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?'th':b===1?'st':b===2?'nd':b===3?'rd':'th';return number+output;}});return enCa;});

/***/ }),
/* 229 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var enAu=moment.defineLocale('en-au',{months:'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),monthsShort:'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),weekdays:'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),weekdaysShort:'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),weekdaysMin:'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?'th':b===1?'st':b===2?'nd':b===3?'rd':'th';return number+output;},week:{dow:1,doy:4}});return enAu;});

/***/ }),
/* 230 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function isFunction(input){return input instanceof Function||Object.prototype.toString.call(input)==='[object Function]';}var el=moment.defineLocale('el',{monthsNominativeEl:'___________'.split('_'),monthsGenitiveEl:'___________'.split('_'),months:function(momentToFormat,format){if(!momentToFormat){return this._monthsNominativeEl;}else if(typeof format==='string'&&/D/.test(format.substring(0,format.indexOf('MMMM')))){return this._monthsGenitiveEl[momentToFormat.month()];}else{return this._monthsNominativeEl[momentToFormat.month()];}},monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?'':'';}else{return isLower?'':'';}},isPM:function(input){return(input+'').toLowerCase()[0]==='';},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendarEl:{sameDay:'[ {}] LT',nextDay:'[ {}] LT',nextWeek:'dddd [{}] LT',lastDay:'[ {}] LT',lastWeek:function(){switch(this.day()){case 6:return'[ ] dddd [{}] LT';default:return'[ ] dddd [{}] LT';}},sameElse:'L'},calendar:function(key,mom){var output=this._calendarEl[key],hours=mom&&mom.hours();if(isFunction(output)){output=output.apply(mom);}return output.replace('{}',hours%12===1?'':'');},relativeTime:{future:' %s',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:'%d',week:{dow:1,doy:4}});return el;});

/***/ }),
/* 231 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var months=['','','','','','','','','','','',''],weekdays=['','','','','','',''];var dv=moment.defineLocale('dv',{months:months,monthsShort:months,weekdays:weekdays,weekdaysShort:weekdays,weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'D/M/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(input){return''===input;},meridiem:function(hour,minute,isLower){if(hour<12){return'';}else{return'';}},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'dddd LT',lastDay:'[] LT',lastWeek:'[] dddd LT',sameElse:'L'},relativeTime:{future:' %s',past:' %s',s:'',ss:'d% ',m:'',mm:' %d',h:'',hh:' %d',d:'',dd:' %d',M:'',MM:' %d',y:'',yy:' %d'},preparse:function(string){return string.replace(//g,',');},postformat:function(string){return string.replace(/,/g,'');},week:{dow:7,doy:12}});return dv;});

/***/ }),
/* 232 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function processRelativeTime(number,withoutSuffix,key,isFuture){var format={'m':['eine Minute','einer Minute'],'h':['eine Stunde','einer Stunde'],'d':['ein Tag','einem Tag'],'dd':[number+' Tage',number+' Tagen'],'M':['ein Monat','einem Monat'],'MM':[number+' Monate',number+' Monaten'],'y':['ein Jahr','einem Jahr'],'yy':[number+' Jahre',number+' Jahren']};return withoutSuffix?format[key][0]:format[key][1];}var deCh=moment.defineLocale('de-ch',{months:'Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),monthsShort:'Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.'.split('_'),monthsParseExact:true,weekdays:'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),weekdaysShort:'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),weekdaysMin:'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY HH:mm',LLLL:'dddd, D. MMMM YYYY HH:mm'},calendar:{sameDay:'[heute um] LT [Uhr]',sameElse:'L',nextDay:'[morgen um] LT [Uhr]',nextWeek:'dddd [um] LT [Uhr]',lastDay:'[gestern um] LT [Uhr]',lastWeek:'[letzten] dddd [um] LT [Uhr]'},relativeTime:{future:'in %s',past:'vor %s',s:'ein paar Sekunden',ss:'%d Sekunden',m:processRelativeTime,mm:'%d Minuten',h:processRelativeTime,hh:'%d Stunden',d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return deCh;});

/***/ }),
/* 233 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function processRelativeTime(number,withoutSuffix,key,isFuture){var format={'m':['eine Minute','einer Minute'],'h':['eine Stunde','einer Stunde'],'d':['ein Tag','einem Tag'],'dd':[number+' Tage',number+' Tagen'],'M':['ein Monat','einem Monat'],'MM':[number+' Monate',number+' Monaten'],'y':['ein Jahr','einem Jahr'],'yy':[number+' Jahre',number+' Jahren']};return withoutSuffix?format[key][0]:format[key][1];}var deAt=moment.defineLocale('de-at',{months:'Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),monthsShort:'Jn._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.'.split('_'),monthsParseExact:true,weekdays:'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),weekdaysShort:'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),weekdaysMin:'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY HH:mm',LLLL:'dddd, D. MMMM YYYY HH:mm'},calendar:{sameDay:'[heute um] LT [Uhr]',sameElse:'L',nextDay:'[morgen um] LT [Uhr]',nextWeek:'dddd [um] LT [Uhr]',lastDay:'[gestern um] LT [Uhr]',lastWeek:'[letzten] dddd [um] LT [Uhr]'},relativeTime:{future:'in %s',past:'vor %s',s:'ein paar Sekunden',ss:'%d Sekunden',m:processRelativeTime,mm:'%d Minuten',h:processRelativeTime,hh:'%d Stunden',d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return deAt;});

/***/ }),
/* 234 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function processRelativeTime(number,withoutSuffix,key,isFuture){var format={'m':['eine Minute','einer Minute'],'h':['eine Stunde','einer Stunde'],'d':['ein Tag','einem Tag'],'dd':[number+' Tage',number+' Tagen'],'M':['ein Monat','einem Monat'],'MM':[number+' Monate',number+' Monaten'],'y':['ein Jahr','einem Jahr'],'yy':[number+' Jahre',number+' Jahren']};return withoutSuffix?format[key][0]:format[key][1];}var de=moment.defineLocale('de',{months:'Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),monthsShort:'Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.'.split('_'),monthsParseExact:true,weekdays:'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),weekdaysShort:'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),weekdaysMin:'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY HH:mm',LLLL:'dddd, D. MMMM YYYY HH:mm'},calendar:{sameDay:'[heute um] LT [Uhr]',sameElse:'L',nextDay:'[morgen um] LT [Uhr]',nextWeek:'dddd [um] LT [Uhr]',lastDay:'[gestern um] LT [Uhr]',lastWeek:'[letzten] dddd [um] LT [Uhr]'},relativeTime:{future:'in %s',past:'vor %s',s:'ein paar Sekunden',ss:'%d Sekunden',m:processRelativeTime,mm:'%d Minuten',h:processRelativeTime,hh:'%d Stunden',d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return de;});

/***/ }),
/* 235 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var da=moment.defineLocale('da',{months:'januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december'.split('_'),monthsShort:'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),weekdays:'sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag'.split('_'),weekdaysShort:'sn_man_tir_ons_tor_fre_lr'.split('_'),weekdaysMin:'s_ma_ti_on_to_fr_l'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY HH:mm',LLLL:'dddd [d.] D. MMMM YYYY [kl.] HH:mm'},calendar:{sameDay:'[i dag kl.] LT',nextDay:'[i morgen kl.] LT',nextWeek:'p dddd [kl.] LT',lastDay:'[i gr kl.] LT',lastWeek:'[i] dddd[s kl.] LT',sameElse:'L'},relativeTime:{future:'om %s',past:'%s siden',s:'f sekunder',ss:'%d sekunder',m:'et minut',mm:'%d minutter',h:'en time',hh:'%d timer',d:'en dag',dd:'%d dage',M:'en mned',MM:'%d mneder',y:'et r',yy:'%d r'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return da;});

/***/ }),
/* 236 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var cy=moment.defineLocale('cy',{months:'Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr'.split('_'),monthsShort:'Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag'.split('_'),weekdays:'Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn'.split('_'),weekdaysShort:'Sul_Llun_Maw_Mer_Iau_Gwe_Sad'.split('_'),weekdaysMin:'Su_Ll_Ma_Me_Ia_Gw_Sa'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Heddiw am] LT',nextDay:'[Yfory am] LT',nextWeek:'dddd [am] LT',lastDay:'[Ddoe am] LT',lastWeek:'dddd [diwethaf am] LT',sameElse:'L'},relativeTime:{future:'mewn %s',past:'%s yn l',s:'ychydig eiliadau',ss:'%d eiliad',m:'munud',mm:'%d munud',h:'awr',hh:'%d awr',d:'diwrnod',dd:'%d diwrnod',M:'mis',MM:'%d mis',y:'blwyddyn',yy:'%d flynedd'},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(number){var b=number,output='',lookup=['','af','il','ydd','ydd','ed','ed','ed','fed','fed','fed','eg','fed','eg','eg','fed','eg','eg','fed','eg','fed'];if(b>20){if(b===40||b===50||b===60||b===80||b===100){output='fed';}else{output='ain';}}else if(b>0){output=lookup[b];}return number+output;},week:{dow:1,doy:4}});return cy;});

/***/ }),
/* 237 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var cv=moment.defineLocale('cv',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD-MM-YYYY',LL:'YYYY [] MMMM [] D[-]',LLL:'YYYY [] MMMM [] D[-], HH:mm',LLLL:'dddd, YYYY [] MMMM [] D[-], HH:mm'},calendar:{sameDay:'[] LT []',nextDay:'[] LT []',lastDay:'[] LT []',nextWeek:'[] dddd LT []',lastWeek:'[] dddd LT []',sameElse:'L'},relativeTime:{future:function(output){var affix=/$/i.exec(output)?'':/$/i.exec(output)?'':'';return output+affix;},past:'%s ',s:'- ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},dayOfMonthOrdinalParse:/\d{1,2}-/,ordinal:'%d-',week:{dow:1,doy:7}});return cv;});

/***/ }),
/* 238 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var months='leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec'.split('_'),monthsShort='led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro'.split('_');function plural(n){return n>1&&n<5&&~~(n/10)!==1;}function translate(number,withoutSuffix,key,isFuture){var result=number+' ';switch(key){case's':return withoutSuffix||isFuture?'pr sekund':'pr sekundami';case'ss':if(withoutSuffix||isFuture){return result+(plural(number)?'sekundy':'sekund');}else{return result+'sekundami';}break;case'm':return withoutSuffix?'minuta':isFuture?'minutu':'minutou';case'mm':if(withoutSuffix||isFuture){return result+(plural(number)?'minuty':'minut');}else{return result+'minutami';}break;case'h':return withoutSuffix?'hodina':isFuture?'hodinu':'hodinou';case'hh':if(withoutSuffix||isFuture){return result+(plural(number)?'hodiny':'hodin');}else{return result+'hodinami';}break;case'd':return withoutSuffix||isFuture?'den':'dnem';case'dd':if(withoutSuffix||isFuture){return result+(plural(number)?'dny':'dn');}else{return result+'dny';}break;case'M':return withoutSuffix||isFuture?'msc':'mscem';case'MM':if(withoutSuffix||isFuture){return result+(plural(number)?'msce':'msc');}else{return result+'msci';}break;case'y':return withoutSuffix||isFuture?'rok':'rokem';case'yy':if(withoutSuffix||isFuture){return result+(plural(number)?'roky':'let');}else{return result+'lety';}break;}}var cs=moment.defineLocale('cs',{months:months,monthsShort:monthsShort,monthsParse:function(months,monthsShort){var i,_monthsParse=[];for(i=0;i<12;i++){_monthsParse[i]=new RegExp('^'+months[i]+'$|^'+monthsShort[i]+'$','i');}return _monthsParse;}(months,monthsShort),shortMonthsParse:function(monthsShort){var i,_shortMonthsParse=[];for(i=0;i<12;i++){_shortMonthsParse[i]=new RegExp('^'+monthsShort[i]+'$','i');}return _shortMonthsParse;}(monthsShort),longMonthsParse:function(months){var i,_longMonthsParse=[];for(i=0;i<12;i++){_longMonthsParse[i]=new RegExp('^'+months[i]+'$','i');}return _longMonthsParse;}(months),weekdays:'nedle_pondl_ter_steda_tvrtek_ptek_sobota'.split('_'),weekdaysShort:'ne_po_t_st_t_p_so'.split('_'),weekdaysMin:'ne_po_t_st_t_p_so'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd D. MMMM YYYY H:mm',l:'D. M. YYYY'},calendar:{sameDay:'[dnes v] LT',nextDay:'[ztra v] LT',nextWeek:function(){switch(this.day()){case 0:return'[v nedli v] LT';case 1:case 2:return'[v] dddd [v] LT';case 3:return'[ve stedu v] LT';case 4:return'[ve tvrtek v] LT';case 5:return'[v ptek v] LT';case 6:return'[v sobotu v] LT';}},lastDay:'[vera v] LT',lastWeek:function(){switch(this.day()){case 0:return'[minulou nedli v] LT';case 1:case 2:return'[minul] dddd [v] LT';case 3:return'[minulou stedu v] LT';case 4:case 5:return'[minul] dddd [v] LT';case 6:return'[minulou sobotu v] LT';}},sameElse:'L'},relativeTime:{future:'za %s',past:'ped %s',s:translate,ss:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return cs;});

/***/ }),
/* 239 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var ca=moment.defineLocale('ca',{months:{standalone:'gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre'.split('_'),format:'de gener_de febrer_de mar_d\'abril_de maig_de juny_de juliol_d\'agost_de setembre_d\'octubre_de novembre_de desembre'.split('_'),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:'gen._febr._mar_abr._maig_juny_jul._ag._set._oct._nov._des.'.split('_'),monthsParseExact:true,weekdays:'diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte'.split('_'),weekdaysShort:'dg._dl._dt._dc._dj._dv._ds.'.split('_'),weekdaysMin:'dg_dl_dt_dc_dj_dv_ds'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM [de] YYYY',ll:'D MMM YYYY',LLL:'D MMMM [de] YYYY [a les] H:mm',lll:'D MMM YYYY, H:mm',LLLL:'dddd D MMMM [de] YYYY [a les] H:mm',llll:'ddd D MMM YYYY, H:mm'},calendar:{sameDay:function(){return'[avui a '+(this.hours()!==1?'les':'la')+'] LT';},nextDay:function(){return'[dem a '+(this.hours()!==1?'les':'la')+'] LT';},nextWeek:function(){return'dddd [a '+(this.hours()!==1?'les':'la')+'] LT';},lastDay:function(){return'[ahir a '+(this.hours()!==1?'les':'la')+'] LT';},lastWeek:function(){return'[el] dddd [passat a '+(this.hours()!==1?'les':'la')+'] LT';},sameElse:'L'},relativeTime:{future:'d\'aqu %s',past:'fa %s',s:'uns segons',ss:'%d segons',m:'un minut',mm:'%d minuts',h:'una hora',hh:'%d hores',d:'un dia',dd:'%d dies',M:'un mes',MM:'%d mesos',y:'un any',yy:'%d anys'},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(number,period){var output=number===1?'r':number===2?'n':number===3?'r':number===4?'t':'';if(period==='w'||period==='W'){output='a';}return number+output;},week:{dow:1,doy:4}});return ca;});

/***/ }),
/* 240 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function translate(number,withoutSuffix,key){var result=number+' ';switch(key){case'ss':if(number===1){result+='sekunda';}else if(number===2||number===3||number===4){result+='sekunde';}else{result+='sekundi';}return result;case'm':return withoutSuffix?'jedna minuta':'jedne minute';case'mm':if(number===1){result+='minuta';}else if(number===2||number===3||number===4){result+='minute';}else{result+='minuta';}return result;case'h':return withoutSuffix?'jedan sat':'jednog sata';case'hh':if(number===1){result+='sat';}else if(number===2||number===3||number===4){result+='sata';}else{result+='sati';}return result;case'dd':if(number===1){result+='dan';}else{result+='dana';}return result;case'MM':if(number===1){result+='mjesec';}else if(number===2||number===3||number===4){result+='mjeseca';}else{result+='mjeseci';}return result;case'yy':if(number===1){result+='godina';}else if(number===2||number===3||number===4){result+='godine';}else{result+='godina';}return result;}}var bs=moment.defineLocale('bs',{months:'januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar'.split('_'),monthsShort:'jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.'.split('_'),monthsParseExact:true,weekdays:'nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota'.split('_'),weekdaysShort:'ned._pon._uto._sri._et._pet._sub.'.split('_'),weekdaysMin:'ne_po_ut_sr_e_pe_su'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY H:mm',LLLL:'dddd, D. MMMM YYYY H:mm'},calendar:{sameDay:'[danas u] LT',nextDay:'[sutra u] LT',nextWeek:function(){switch(this.day()){case 0:return'[u] [nedjelju] [u] LT';case 3:return'[u] [srijedu] [u] LT';case 6:return'[u] [subotu] [u] LT';case 1:case 2:case 4:case 5:return'[u] dddd [u] LT';}},lastDay:'[juer u] LT',lastWeek:function(){switch(this.day()){case 0:case 3:return'[prolu] dddd [u] LT';case 6:return'[prole] [subote] [u] LT';case 1:case 2:case 4:case 5:return'[proli] dddd [u] LT';}},sameElse:'L'},relativeTime:{future:'za %s',past:'prije %s',s:'par sekundi',ss:translate,m:translate,mm:translate,h:translate,hh:translate,d:'dan',dd:translate,M:'mjesec',MM:translate,y:'godinu',yy:translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:7}});return bs;});

/***/ }),
/* 241 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function relativeTimeWithMutation(number,withoutSuffix,key){var format={'mm':'munutenn','MM':'miz','dd':'devezh'};return number+' '+mutation(format[key],number);}function specialMutationForYears(number){switch(lastNumber(number)){case 1:case 3:case 4:case 5:case 9:return number+' bloaz';default:return number+' vloaz';}}function lastNumber(number){if(number>9){return lastNumber(number%10);}return number;}function mutation(text,number){if(number===2){return softMutation(text);}return text;}function softMutation(text){var mutationTable={'m':'v','b':'v','d':'z'};if(mutationTable[text.charAt(0)]===undefined){return text;}return mutationTable[text.charAt(0)]+text.substring(1);}var br=moment.defineLocale('br',{months:'Genver_C\'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu'.split('_'),monthsShort:'Gen_C\'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker'.split('_'),weekdays:'Sul_Lun_Meurzh_Merc\'her_Yaou_Gwener_Sadorn'.split('_'),weekdaysShort:'Sul_Lun_Meu_Mer_Yao_Gwe_Sad'.split('_'),weekdaysMin:'Su_Lu_Me_Mer_Ya_Gw_Sa'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'h[e]mm A',LTS:'h[e]mm:ss A',L:'DD/MM/YYYY',LL:'D [a viz] MMMM YYYY',LLL:'D [a viz] MMMM YYYY h[e]mm A',LLLL:'dddd, D [a viz] MMMM YYYY h[e]mm A'},calendar:{sameDay:'[Hiziv da] LT',nextDay:'[Warc\'hoazh da] LT',nextWeek:'dddd [da] LT',lastDay:'[Dec\'h da] LT',lastWeek:'dddd [paset da] LT',sameElse:'L'},relativeTime:{future:'a-benn %s',past:'%s \'zo',s:'un nebeud segondenno',ss:'%d eilenn',m:'ur vunutenn',mm:relativeTimeWithMutation,h:'un eur',hh:'%d eur',d:'un devezh',dd:relativeTimeWithMutation,M:'ur miz',MM:relativeTimeWithMutation,y:'ur bloaz',yy:specialMutationForYears},dayOfMonthOrdinalParse:/\d{1,2}(a|vet)/,ordinal:function(number){var output=number===1?'a':'vet';return number+output;},week:{dow:1,doy:4}});return br;});

/***/ }),
/* 242 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};var bo=moment.defineLocale('bo',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'A h:mm',LTS:'A h:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm',LLLL:'dddd, D MMMM YYYY, A h:mm'},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'[], LT',lastDay:'[] LT',lastWeek:'[] dddd, LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:'',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d ',M:'',MM:'%d ',y:'',yy:'%d '},preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];});},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];});},meridiemParse:/||||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''&&hour>=4||meridiem===''&&hour<5||meridiem===''){return hour+12;}else{return hour;}},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<10){return'';}else if(hour<17){return'';}else if(hour<20){return'';}else{return'';}},week:{dow:0,doy:6}});return bo;});

/***/ }),
/* 243 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};var bn=moment.defineLocale('bn',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'A h:mm ',LTS:'A h:mm:ss ',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY, A h:mm ',LLLL:'dddd, D MMMM YYYY, A h:mm '},calendar:{sameDay:'[] LT',nextDay:'[] LT',nextWeek:'dddd, LT',lastDay:'[] LT',lastWeek:'[] dddd, LT',sameElse:'L'},relativeTime:{future:'%s ',past:'%s ',s:' ',ss:'%d ',m:' ',mm:'%d ',h:' ',hh:'%d ',d:' ',dd:'%d ',M:' ',MM:'%d ',y:' ',yy:'%d '},preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];});},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];});},meridiemParse:/||||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}if(meridiem===''&&hour>=4||meridiem===''&&hour<5||meridiem===''){return hour+12;}else{return hour;}},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<10){return'';}else if(hour<17){return'';}else if(hour<20){return'';}else{return'';}},week:{dow:0,doy:6}});return bn;});

/***/ }),
/* 244 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var bm=moment.defineLocale('bm',{months:'Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mkalo_Zuwnkalo_Zuluyekalo_Utikalo_Stanburukalo_kutburukalo_Nowanburukalo_Desanburukalo'.split('_'),monthsShort:'Zan_Few_Mar_Awi_M_Zuw_Zul_Uti_St_ku_Now_Des'.split('_'),weekdays:'Kari_Ntnn_Tarata_Araba_Alamisa_Juma_Sibiri'.split('_'),weekdaysShort:'Kar_Nt_Tar_Ara_Ala_Jum_Sib'.split('_'),weekdaysMin:'Ka_Nt_Ta_Ar_Al_Ju_Si'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'MMMM [tile] D [san] YYYY',LLL:'MMMM [tile] D [san] YYYY [lr] HH:mm',LLLL:'dddd MMMM [tile] D [san] YYYY [lr] HH:mm'},calendar:{sameDay:'[Bi lr] LT',nextDay:'[Sini lr] LT',nextWeek:'dddd [don lr] LT',lastDay:'[Kunu lr] LT',lastWeek:'dddd [tmnen lr] LT',sameElse:'L'},relativeTime:{future:'%s kn',past:'a b %s b',s:'sanga dama dama',ss:'sekondi %d',m:'miniti kelen',mm:'miniti %d',h:'lr kelen',hh:'lr %d',d:'tile kelen',dd:'tile %d',M:'kalo kelen',MM:'kalo %d',y:'san kelen',yy:'san %d'},week:{dow:1,doy:4}});return bm;});

/***/ }),
/* 245 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var bg=moment.defineLocale('bg',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'D.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY H:mm',LLLL:'dddd, D MMMM YYYY H:mm'},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',nextWeek:'dddd [] LT',lastDay:'[ ] LT',lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return'[ ] dddd [] LT';case 1:case 2:case 4:case 5:return'[ ] dddd [] LT';}},sameElse:'L'},relativeTime:{future:' %s',past:' %s',s:' ',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d ',M:'',MM:'%d ',y:'',yy:'%d '},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(number){var lastDigit=number%10,last2Digits=number%100;if(number===0){return number+'-';}else if(last2Digits===0){return number+'-';}else if(last2Digits>10&&last2Digits<20){return number+'-';}else if(lastDigit===1){return number+'-';}else if(lastDigit===2){return number+'-';}else if(lastDigit===7||lastDigit===8){return number+'-';}else{return number+'-';}},week:{dow:1,doy:7}});return bg;});

/***/ }),
/* 246 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';function plural(word,num){var forms=word.split('_');return num%10===1&&num%100!==11?forms[0]:num%10>=2&&num%10<=4&&(num%100<10||num%100>=20)?forms[1]:forms[2];}function relativeTimeWithPlural(number,withoutSuffix,key){var format={'ss':withoutSuffix?'__':'__','mm':withoutSuffix?'__':'__','hh':withoutSuffix?'__':'__','dd':'__','MM':'__','yy':'__'};if(key==='m'){return withoutSuffix?'':'';}else if(key==='h'){return withoutSuffix?'':'';}else{return number+' '+plural(format[key],+number);}}var be=moment.defineLocale('be',{months:{format:'___________'.split('_'),standalone:'___________'.split('_')},monthsShort:'___________'.split('_'),weekdays:{format:'______'.split('_'),standalone:'______'.split('_'),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY .',LLL:'D MMMM YYYY ., HH:mm',LLLL:'dddd, D MMMM YYYY ., HH:mm'},calendar:{sameDay:'[ ] LT',nextDay:'[ ] LT',lastDay:'[ ] LT',nextWeek:function(){return'[] dddd [] LT';},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return'[ ] dddd [] LT';case 1:case 2:case 4:return'[ ] dddd [] LT';}},sameElse:'L'},relativeTime:{future:' %s',past:'%s ',s:' ',m:relativeTimeWithPlural,mm:relativeTimeWithPlural,h:relativeTimeWithPlural,hh:relativeTimeWithPlural,d:'',dd:relativeTimeWithPlural,M:'',MM:relativeTimeWithPlural,y:'',yy:relativeTimeWithPlural},meridiemParse:/|||/,isPM:function(input){return /^(|)$/.test(input);},meridiem:function(hour,minute,isLower){if(hour<4){return'';}else if(hour<12){return'';}else if(hour<17){return'';}else{return'';}},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(number,period){switch(period){case'M':case'd':case'DDD':case'w':case'W':return(number%10===2||number%10===3)&&number%100!==12&&number%100!==13?number+'-':number+'-';case'D':return number+'-';default:return number;}},week:{dow:1,doy:7}});return be;});

/***/ }),
/* 247 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var suffixes={1:'-inci',5:'-inci',8:'-inci',70:'-inci',80:'-inci',2:'-nci',7:'-nci',20:'-nci',50:'-nci',3:'-nc',4:'-nc',100:'-nc',6:'-nc',9:'-uncu',10:'-uncu',30:'-uncu',60:'-nc',90:'-nc'};var az=moment.defineLocale('az',{months:'yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr'.split('_'),monthsShort:'yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek'.split('_'),weekdays:'Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb'.split('_'),weekdaysShort:'Baz_BzE_Ax_r_CAx_Cm_n'.split('_'),weekdaysMin:'Bz_BE_A__CA_C_'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[bugn saat] LT',nextDay:'[sabah saat] LT',nextWeek:'[gln hft] dddd [saat] LT',lastDay:'[dnn] LT',lastWeek:'[ken hft] dddd [saat] LT',sameElse:'L'},relativeTime:{future:'%s sonra',past:'%s vvl',s:'birne saniyy',ss:'%d saniy',m:'bir dqiq',mm:'%d dqiq',h:'bir saat',hh:'%d saat',d:'bir gn',dd:'%d gn',M:'bir ay',MM:'%d ay',y:'bir il',yy:'%d il'},meridiemParse:/gec|shr|gndz|axam/,isPM:function(input){return /^(gndz|axam)$/.test(input);},meridiem:function(hour,minute,isLower){if(hour<4){return'gec';}else if(hour<12){return'shr';}else if(hour<17){return'gndz';}else{return'axam';}},dayOfMonthOrdinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(number){if(number===0){return number+'-nc';}var a=number%10,b=number%100-a,c=number>=100?100:null;return number+(suffixes[a]||suffixes[b]||suffixes[c]);},week:{dow:1,doy:7}});return az;});

/***/ }),
/* 248 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var arTn=moment.defineLocale('ar-tn',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[  ] LT',nextDay:'[  ] LT',nextWeek:'dddd [ ] LT',lastDay:'[  ] LT',lastWeek:'dddd [ ] LT',sameElse:'L'},relativeTime:{future:' %s',past:' %s',s:'',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d ',M:'',MM:'%d ',y:'',yy:'%d '},week:{dow:1,doy:4}});return arTn;});

/***/ }),
/* 249 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'};var arSa=moment.defineLocale('ar-sa',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(input){return''===input;},meridiem:function(hour,minute,isLower){if(hour<12){return'';}else{return'';}},calendar:{sameDay:'[  ] LT',nextDay:'[  ] LT',nextWeek:'dddd [ ] LT',lastDay:'[  ] LT',lastWeek:'dddd [ ] LT',sameElse:'L'},relativeTime:{future:' %s',past:' %s',s:'',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d ',M:'',MM:'%d ',y:'',yy:'%d '},preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];}).replace(//g,',');},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];}).replace(/,/g,'');},week:{dow:0,doy:6}});return arSa;});

/***/ }),
/* 250 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var arMa=moment.defineLocale('ar-ma',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[  ] LT',nextDay:'[  ] LT',nextWeek:'dddd [ ] LT',lastDay:'[  ] LT',lastWeek:'dddd [ ] LT',sameElse:'L'},relativeTime:{future:' %s',past:' %s',s:'',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d ',M:'',MM:'%d ',y:'',yy:'%d '},week:{dow:6,doy:12}});return arMa;});

/***/ }),
/* 251 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'1','2':'2','3':'3','4':'4','5':'5','6':'6','7':'7','8':'8','9':'9','0':'0'},pluralForm=function(n){return n===0?0:n===1?1:n===2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5;},plurals={s:['  ',' ',['',''],'%d ','%d ','%d '],m:['  ',' ',['',''],'%d ','%d ','%d '],h:['  ',' ',['',''],'%d ','%d ','%d '],d:['  ',' ',['',''],'%d ','%d ','%d '],M:['  ',' ',['',''],'%d ','%d ','%d '],y:['  ',' ',['',''],'%d ','%d ','%d ']},pluralize=function(u){return function(number,withoutSuffix,string,isFuture){var f=pluralForm(number),str=plurals[u][pluralForm(number)];if(f===2){str=str[withoutSuffix?0:1];}return str.replace(/%d/i,number);};},months=['','','','','','','','','','','',''];var arLy=moment.defineLocale('ar-ly',{months:months,monthsShort:months,weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'D/\u200FM/\u200FYYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(input){return''===input;},meridiem:function(hour,minute,isLower){if(hour<12){return'';}else{return'';}},calendar:{sameDay:'[  ] LT',nextDay:'[  ] LT',nextWeek:'dddd [ ] LT',lastDay:'[  ] LT',lastWeek:'dddd [ ] LT',sameElse:'L'},relativeTime:{future:' %s',past:' %s',s:pluralize('s'),ss:pluralize('s'),m:pluralize('m'),mm:pluralize('m'),h:pluralize('h'),hh:pluralize('h'),d:pluralize('d'),dd:pluralize('d'),M:pluralize('M'),MM:pluralize('M'),y:pluralize('y'),yy:pluralize('y')},preparse:function(string){return string.replace(//g,',');},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];}).replace(/,/g,'');},week:{dow:6,doy:12}});return arLy;});

/***/ }),
/* 252 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var arKw=moment.defineLocale('ar-kw',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[  ] LT',nextDay:'[  ] LT',nextWeek:'dddd [ ] LT',lastDay:'[  ] LT',lastWeek:'dddd [ ] LT',sameElse:'L'},relativeTime:{future:' %s',past:' %s',s:'',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d ',M:'',MM:'%d ',y:'',yy:'%d '},week:{dow:0,doy:12}});return arKw;});

/***/ }),
/* 253 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var arDz=moment.defineLocale('ar-dz',{months:'___________'.split('_'),monthsShort:'___________'.split('_'),weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[  ] LT',nextDay:'[  ] LT',nextWeek:'dddd [ ] LT',lastDay:'[  ] LT',lastWeek:'dddd [ ] LT',sameElse:'L'},relativeTime:{future:' %s',past:' %s',s:'',ss:'%d ',m:'',mm:'%d ',h:'',hh:'%d ',d:'',dd:'%d ',M:'',MM:'%d ',y:'',yy:'%d '},week:{dow:0,doy:4}});return arDz;});

/***/ }),
/* 254 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var symbolMap={'1':'','2':'','3':'','4':'','5':'','6':'','7':'','8':'','9':'','0':''},numberMap={'':'1','':'2','':'3','':'4','':'5','':'6','':'7','':'8','':'9','':'0'},pluralForm=function(n){return n===0?0:n===1?1:n===2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5;},plurals={s:['  ',' ',['',''],'%d ','%d ','%d '],m:['  ',' ',['',''],'%d ','%d ','%d '],h:['  ',' ',['',''],'%d ','%d ','%d '],d:['  ',' ',['',''],'%d ','%d ','%d '],M:['  ',' ',['',''],'%d ','%d ','%d '],y:['  ',' ',['',''],'%d ','%d ','%d ']},pluralize=function(u){return function(number,withoutSuffix,string,isFuture){var f=pluralForm(number),str=plurals[u][pluralForm(number)];if(f===2){str=str[withoutSuffix?0:1];}return str.replace(/%d/i,number);};},months=['','','','','','','','','','','',''];var ar=moment.defineLocale('ar',{months:months,monthsShort:months,weekdays:'______'.split('_'),weekdaysShort:'______'.split('_'),weekdaysMin:'______'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'D/\u200FM/\u200FYYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},meridiemParse:/|/,isPM:function(input){return''===input;},meridiem:function(hour,minute,isLower){if(hour<12){return'';}else{return'';}},calendar:{sameDay:'[  ] LT',nextDay:'[  ] LT',nextWeek:'dddd [ ] LT',lastDay:'[  ] LT',lastWeek:'dddd [ ] LT',sameElse:'L'},relativeTime:{future:' %s',past:' %s',s:pluralize('s'),ss:pluralize('s'),m:pluralize('m'),mm:pluralize('m'),h:pluralize('h'),hh:pluralize('h'),d:pluralize('d'),dd:pluralize('d'),M:pluralize('M'),MM:pluralize('M'),y:pluralize('y'),yy:pluralize('y')},preparse:function(string){return string.replace(/[]/g,function(match){return numberMap[match];}).replace(//g,',');},postformat:function(string){return string.replace(/\d/g,function(match){return symbolMap[match];}).replace(/,/g,'');},week:{dow:6,doy:12}});return ar;});

/***/ }),
/* 255 */
/***/ (function(module, exports, __webpack_require__) {

;(function(global,factory){ true?factory(__webpack_require__(0)):undefined;})(this,function(moment){'use strict';var af=moment.defineLocale('af',{months:'Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember'.split('_'),monthsShort:'Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des'.split('_'),weekdays:'Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag'.split('_'),weekdaysShort:'Son_Maa_Din_Woe_Don_Vry_Sat'.split('_'),weekdaysMin:'So_Ma_Di_Wo_Do_Vr_Sa'.split('_'),meridiemParse:/vm|nm/i,isPM:function(input){return /^nm$/i.test(input);},meridiem:function(hours,minutes,isLower){if(hours<12){return isLower?'vm':'VM';}else{return isLower?'nm':'NM';}},longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Vandag om] LT',nextDay:'[Mre om] LT',nextWeek:'dddd [om] LT',lastDay:'[Gister om] LT',lastWeek:'[Laas] dddd [om] LT',sameElse:'L'},relativeTime:{future:'oor %s',past:'%s gelede',s:'\'n paar sekondes',ss:'%d sekondes',m:'\'n minuut',mm:'%d minute',h:'\'n uur',hh:'%d ure',d:'\'n dag',dd:'%d dae',M:'\'n maand',MM:'%d maande',y:'\'n jaar',yy:'%d jaar'},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(number){return number+(number===1||number===8||number>=20?'ste':'de');},week:{dow:1,doy:4}});return af;});

/***/ }),
/* 256 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee=__webpack_require__(5),baseWhile=__webpack_require__(94);function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,baseIteratee(predicate,3),false,true):[];}module.exports=takeRightWhile;

/***/ }),
/* 257 */
/***/ (function(module, exports, __webpack_require__) {

module.exports=__webpack_require__(83);

/***/ }),
/* 258 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;;(function(global,factory){ true?module.exports=factory(global):undefined;})(typeof self!=='undefined'?self:typeof window!=='undefined'?window:typeof global!=='undefined'?global:this,function(global){'use strict';var _Base64=global.Base64;var version="2.4.3";var buffer;if(typeof module!=='undefined'&&module.exports){try{buffer=__webpack_require__(285).Buffer;}catch(err){}}var b64chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';var b64tab=function(bin){var t={};for(var i=0,l=bin.length;i<l;i++)t[bin.charAt(i)]=i;return t;}(b64chars);var fromCharCode=String.fromCharCode;var cb_utob=function(c){if(c.length<2){var cc=c.charCodeAt(0);return cc<0x80?c:cc<0x800?fromCharCode(0xc0|cc>>>6)+fromCharCode(0x80|cc&0x3f):fromCharCode(0xe0|cc>>>12&0x0f)+fromCharCode(0x80|cc>>>6&0x3f)+fromCharCode(0x80|cc&0x3f);}else{var cc=0x10000+(c.charCodeAt(0)-0xD800)*0x400+(c.charCodeAt(1)-0xDC00);return fromCharCode(0xf0|cc>>>18&0x07)+fromCharCode(0x80|cc>>>12&0x3f)+fromCharCode(0x80|cc>>>6&0x3f)+fromCharCode(0x80|cc&0x3f);}};var re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g;var utob=function(u){return u.replace(re_utob,cb_utob);};var cb_encode=function(ccc){var padlen=[0,2,1][ccc.length%3],ord=ccc.charCodeAt(0)<<16|(ccc.length>1?ccc.charCodeAt(1):0)<<8|(ccc.length>2?ccc.charCodeAt(2):0),chars=[b64chars.charAt(ord>>>18),b64chars.charAt(ord>>>12&63),padlen>=2?'=':b64chars.charAt(ord>>>6&63),padlen>=1?'=':b64chars.charAt(ord&63)];return chars.join('');};var btoa=global.btoa?function(b){return global.btoa(b);}:function(b){return b.replace(/[\s\S]{1,3}/g,cb_encode);};var _encode=buffer?buffer.from&&buffer.from!==Uint8Array.from?function(u){return(u.constructor===buffer.constructor?u:buffer.from(u)).toString('base64');}:function(u){return(u.constructor===buffer.constructor?u:new buffer(u)).toString('base64');}:function(u){return btoa(utob(u));};var encode=function(u,urisafe){return!urisafe?_encode(String(u)):_encode(String(u)).replace(/[+\/]/g,function(m0){return m0=='+'?'-':'_';}).replace(/=/g,'');};var encodeURI=function(u){return encode(u,true);};var re_btou=new RegExp(['[\xC0-\xDF][\x80-\xBF]','[\xE0-\xEF][\x80-\xBF]{2}','[\xF0-\xF7][\x80-\xBF]{3}'].join('|'),'g');var cb_btou=function(cccc){switch(cccc.length){case 4:var cp=(0x07&cccc.charCodeAt(0))<<18|(0x3f&cccc.charCodeAt(1))<<12|(0x3f&cccc.charCodeAt(2))<<6|0x3f&cccc.charCodeAt(3),offset=cp-0x10000;return fromCharCode((offset>>>10)+0xD800)+fromCharCode((offset&0x3FF)+0xDC00);case 3:return fromCharCode((0x0f&cccc.charCodeAt(0))<<12|(0x3f&cccc.charCodeAt(1))<<6|0x3f&cccc.charCodeAt(2));default:return fromCharCode((0x1f&cccc.charCodeAt(0))<<6|0x3f&cccc.charCodeAt(1));}};var btou=function(b){return b.replace(re_btou,cb_btou);};var cb_decode=function(cccc){var len=cccc.length,padlen=len%4,n=(len>0?b64tab[cccc.charAt(0)]<<18:0)|(len>1?b64tab[cccc.charAt(1)]<<12:0)|(len>2?b64tab[cccc.charAt(2)]<<6:0)|(len>3?b64tab[cccc.charAt(3)]:0),chars=[fromCharCode(n>>>16),fromCharCode(n>>>8&0xff),fromCharCode(n&0xff)];chars.length-=[0,0,2,1][padlen];return chars.join('');};var atob=global.atob?function(a){return global.atob(a);}:function(a){return a.replace(/[\s\S]{1,4}/g,cb_decode);};var _decode=buffer?buffer.from&&buffer.from!==Uint8Array.from?function(a){return(a.constructor===buffer.constructor?a:buffer.from(a,'base64')).toString();}:function(a){return(a.constructor===buffer.constructor?a:new buffer(a,'base64')).toString();}:function(a){return btou(atob(a));};var decode=function(a){return _decode(String(a).replace(/[-_]/g,function(m0){return m0=='-'?'+':'/';}).replace(/[^A-Za-z0-9\+\/]/g,''));};var noConflict=function(){var Base64=global.Base64;global.Base64=_Base64;return Base64;};global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict};if(typeof Object.defineProperty==='function'){var noEnum=function(v){return{value:v,enumerable:false,writable:true,configurable:true};};global.Base64.extendString=function(){Object.defineProperty(String.prototype,'fromBase64',noEnum(function(){return decode(this);}));Object.defineProperty(String.prototype,'toBase64',noEnum(function(urisafe){return encode(this,urisafe);}));Object.defineProperty(String.prototype,'toBase64URI',noEnum(function(){return encode(this,true);}));};}if(global['Meteor']){Base64=global.Base64;}if(typeof module!=='undefined'&&module.exports){module.exports.Base64=global.Base64;}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function(){return global.Base64;}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));}return{Base64:global.Base64};});

/***/ }),
/* 259 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */(function(global,factory){if(true){!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));}else {}})(this,function(){var numeral,_,VERSION='2.0.6',formats={},locales={},defaults={currentLocale:'en',zeroFormat:null,nullFormat:null,defaultFormat:'0,0',scalePercentBy100:true},options={currentLocale:defaults.currentLocale,zeroFormat:defaults.zeroFormat,nullFormat:defaults.nullFormat,defaultFormat:defaults.defaultFormat,scalePercentBy100:defaults.scalePercentBy100};function Numeral(input,number){this._input=input;this._value=number;}numeral=function(input){var value,kind,unformatFunction,regexp;if(numeral.isNumeral(input)){value=input.value();}else if(input===0||typeof input==='undefined'){value=0;}else if(input===null||_.isNaN(input)){value=null;}else if(typeof input==='string'){if(options.zeroFormat&&input===options.zeroFormat){value=0;}else if(options.nullFormat&&input===options.nullFormat||!input.replace(/[^0-9]+/g,'').length){value=null;}else{for(kind in formats){regexp=typeof formats[kind].regexps.unformat==='function'?formats[kind].regexps.unformat():formats[kind].regexps.unformat;if(regexp&&input.match(regexp)){unformatFunction=formats[kind].unformat;break;}}unformatFunction=unformatFunction||numeral._.stringToNumber;value=unformatFunction(input);}}else{value=Number(input)||null;}return new Numeral(input,value);};numeral.version=VERSION;numeral.isNumeral=function(obj){return obj instanceof Numeral;};numeral._=_={numberToFormat:function(value,format,roundingFunction){var locale=locales[numeral.options.currentLocale],negP=false,optDec=false,leadingCount=0,abbr='',trillion=1000000000000,billion=1000000000,million=1000000,thousand=1000,decimal='',neg=false,abbrForce,abs,min,max,power,int,precision,signed,thousands,output;value=value||0;abs=Math.abs(value);if(numeral._.includes(format,'(')){negP=true;format=format.replace(/[\(|\)]/g,'');}else if(numeral._.includes(format,'+')||numeral._.includes(format,'-')){signed=numeral._.includes(format,'+')?format.indexOf('+'):value<0?format.indexOf('-'):-1;format=format.replace(/[\+|\-]/g,'');}if(numeral._.includes(format,'a')){abbrForce=format.match(/a(k|m|b|t)?/);abbrForce=abbrForce?abbrForce[1]:false;if(numeral._.includes(format,' a')){abbr=' ';}format=format.replace(new RegExp(abbr+'a[kmbt]?'),'');if(abs>=trillion&&!abbrForce||abbrForce==='t'){abbr+=locale.abbreviations.trillion;value=value/trillion;}else if(abs<trillion&&abs>=billion&&!abbrForce||abbrForce==='b'){abbr+=locale.abbreviations.billion;value=value/billion;}else if(abs<billion&&abs>=million&&!abbrForce||abbrForce==='m'){abbr+=locale.abbreviations.million;value=value/million;}else if(abs<million&&abs>=thousand&&!abbrForce||abbrForce==='k'){abbr+=locale.abbreviations.thousand;value=value/thousand;}}if(numeral._.includes(format,'[.]')){optDec=true;format=format.replace('[.]','.');}int=value.toString().split('.')[0];precision=format.split('.')[1];thousands=format.indexOf(',');leadingCount=(format.split('.')[0].split(',')[0].match(/0/g)||[]).length;if(precision){if(numeral._.includes(precision,'[')){precision=precision.replace(']','');precision=precision.split('[');decimal=numeral._.toFixed(value,precision[0].length+precision[1].length,roundingFunction,precision[1].length);}else{decimal=numeral._.toFixed(value,precision.length,roundingFunction);}int=decimal.split('.')[0];if(numeral._.includes(decimal,'.')){decimal=locale.delimiters.decimal+decimal.split('.')[1];}else{decimal='';}if(optDec&&Number(decimal.slice(1))===0){decimal='';}}else{int=numeral._.toFixed(value,0,roundingFunction);}if(abbr&&!abbrForce&&Number(int)>=1000&&abbr!==locale.abbreviations.trillion){int=String(Number(int)/1000);switch(abbr){case locale.abbreviations.thousand:abbr=locale.abbreviations.million;break;case locale.abbreviations.million:abbr=locale.abbreviations.billion;break;case locale.abbreviations.billion:abbr=locale.abbreviations.trillion;break;}}if(numeral._.includes(int,'-')){int=int.slice(1);neg=true;}if(int.length<leadingCount){for(var i=leadingCount-int.length;i>0;i--){int='0'+int;}}if(thousands>-1){int=int.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,'$1'+locale.delimiters.thousands);}if(format.indexOf('.')===0){int='';}output=int+decimal+(abbr?abbr:'');if(negP){output=(negP&&neg?'(':'')+output+(negP&&neg?')':'');}else{if(signed>=0){output=signed===0?(neg?'-':'+')+output:output+(neg?'-':'+');}else if(neg){output='-'+output;}}return output;},stringToNumber:function(string){var locale=locales[options.currentLocale],stringOriginal=string,abbreviations={thousand:3,million:6,billion:9,trillion:12},abbreviation,value,i,regexp;if(options.zeroFormat&&string===options.zeroFormat){value=0;}else if(options.nullFormat&&string===options.nullFormat||!string.replace(/[^0-9]+/g,'').length){value=null;}else{value=1;if(locale.delimiters.decimal!=='.'){string=string.replace(/\./g,'').replace(locale.delimiters.decimal,'.');}for(abbreviation in abbreviations){regexp=new RegExp('[^a-zA-Z]'+locale.abbreviations[abbreviation]+'(?:\\)|(\\'+locale.currency.symbol+')?(?:\\))?)?$');if(stringOriginal.match(regexp)){value*=Math.pow(10,abbreviations[abbreviation]);break;}}value*=(string.split('-').length+Math.min(string.split('(').length-1,string.split(')').length-1))%2?1:-1;string=string.replace(/[^0-9\.]+/g,'');value*=Number(string);}return value;},isNaN:function(value){return typeof value==='number'&&isNaN(value);},includes:function(string,search){return string.indexOf(search)!==-1;},insert:function(string,subString,start){return string.slice(0,start)+subString+string.slice(start);},reduce:function(array,callback){if(this===null){throw new TypeError('Array.prototype.reduce called on null or undefined');}if(typeof callback!=='function'){throw new TypeError(callback+' is not a function');}var t=Object(array),len=t.length>>>0,k=0,value;if(arguments.length===3){value=arguments[2];}else{while(k<len&&!(k in t)){k++;}if(k>=len){throw new TypeError('Reduce of empty array with no initial value');}value=t[k++];}for(;k<len;k++){if(k in t){value=callback(value,t[k],k,t);}}return value;},multiplier:function(x){var parts=x.toString().split('.');return parts.length<2?1:Math.pow(10,parts[1].length);},correctionFactor:function(){var args=Array.prototype.slice.call(arguments);return args.reduce(function(accum,next){var mn=_.multiplier(next);return accum>mn?accum:mn;},1);},toFixed:function(value,maxDecimals,roundingFunction,optionals){var splitValue=value.toString().split('.'),minDecimals=maxDecimals-(optionals||0),boundedPrecision,optionalsRegExp,power,output;if(splitValue.length===2){boundedPrecision=Math.min(Math.max(splitValue[1].length,minDecimals),maxDecimals);}else{boundedPrecision=minDecimals;}power=Math.pow(10,boundedPrecision);output=(roundingFunction(value+'e+'+boundedPrecision)/power).toFixed(boundedPrecision);if(optionals>maxDecimals-boundedPrecision){optionalsRegExp=new RegExp('\\.?0{1,'+(optionals-(maxDecimals-boundedPrecision))+'}$');output=output.replace(optionalsRegExp,'');}return output;}};numeral.options=options;numeral.formats=formats;numeral.locales=locales;numeral.locale=function(key){if(key){options.currentLocale=key.toLowerCase();}return options.currentLocale;};numeral.localeData=function(key){if(!key){return locales[options.currentLocale];}key=key.toLowerCase();if(!locales[key]){throw new Error('Unknown locale : '+key);}return locales[key];};numeral.reset=function(){for(var property in defaults){options[property]=defaults[property];}};numeral.zeroFormat=function(format){options.zeroFormat=typeof format==='string'?format:null;};numeral.nullFormat=function(format){options.nullFormat=typeof format==='string'?format:null;};numeral.defaultFormat=function(format){options.defaultFormat=typeof format==='string'?format:'0.0';};numeral.register=function(type,name,format){name=name.toLowerCase();if(this[type+'s'][name]){throw new TypeError(name+' '+type+' already registered.');}this[type+'s'][name]=format;return format;};numeral.validate=function(val,culture){var _decimalSep,_thousandSep,_currSymbol,_valArray,_abbrObj,_thousandRegEx,localeData,temp;if(typeof val!=='string'){val+='';if(console.warn){console.warn('Numeral.js: Value is not string. It has been co-erced to: ',val);}}val=val.trim();if(!!val.match(/^\d+$/)){return true;}if(val===''){return false;}try{localeData=numeral.localeData(culture);}catch(e){localeData=numeral.localeData(numeral.locale());}_currSymbol=localeData.currency.symbol;_abbrObj=localeData.abbreviations;_decimalSep=localeData.delimiters.decimal;if(localeData.delimiters.thousands==='.'){_thousandSep='\\.';}else{_thousandSep=localeData.delimiters.thousands;}temp=val.match(/^[^\d]+/);if(temp!==null){val=val.substr(1);if(temp[0]!==_currSymbol){return false;}}temp=val.match(/[^\d]+$/);if(temp!==null){val=val.slice(0,-1);if(temp[0]!==_abbrObj.thousand&&temp[0]!==_abbrObj.million&&temp[0]!==_abbrObj.billion&&temp[0]!==_abbrObj.trillion){return false;}}_thousandRegEx=new RegExp(_thousandSep+'{2}');if(!val.match(/[^\d.,]/g)){_valArray=val.split(_decimalSep);if(_valArray.length>2){return false;}else{if(_valArray.length<2){return!!_valArray[0].match(/^\d+.*\d$/)&&!_valArray[0].match(_thousandRegEx);}else{if(_valArray[0].length===1){return!!_valArray[0].match(/^\d+$/)&&!_valArray[0].match(_thousandRegEx)&&!!_valArray[1].match(/^\d+$/);}else{return!!_valArray[0].match(/^\d+.*\d$/)&&!_valArray[0].match(_thousandRegEx)&&!!_valArray[1].match(/^\d+$/);}}}}return false;};numeral.fn=Numeral.prototype={clone:function(){return numeral(this);},format:function(inputString,roundingFunction){var value=this._value,format=inputString||options.defaultFormat,kind,output,formatFunction;roundingFunction=roundingFunction||Math.round;if(value===0&&options.zeroFormat!==null){output=options.zeroFormat;}else if(value===null&&options.nullFormat!==null){output=options.nullFormat;}else{for(kind in formats){if(format.match(formats[kind].regexps.format)){formatFunction=formats[kind].format;break;}}formatFunction=formatFunction||numeral._.numberToFormat;output=formatFunction(value,format,roundingFunction);}return output;},value:function(){return this._value;},input:function(){return this._input;},set:function(value){this._value=Number(value);return this;},add:function(value){var corrFactor=_.correctionFactor.call(null,this._value,value);function cback(accum,curr,currI,O){return accum+Math.round(corrFactor*curr);}this._value=_.reduce([this._value,value],cback,0)/corrFactor;return this;},subtract:function(value){var corrFactor=_.correctionFactor.call(null,this._value,value);function cback(accum,curr,currI,O){return accum-Math.round(corrFactor*curr);}this._value=_.reduce([value],cback,Math.round(this._value*corrFactor))/corrFactor;return this;},multiply:function(value){function cback(accum,curr,currI,O){var corrFactor=_.correctionFactor(accum,curr);return Math.round(accum*corrFactor)*Math.round(curr*corrFactor)/Math.round(corrFactor*corrFactor);}this._value=_.reduce([this._value,value],cback,1);return this;},divide:function(value){function cback(accum,curr,currI,O){var corrFactor=_.correctionFactor(accum,curr);return Math.round(accum*corrFactor)/Math.round(curr*corrFactor);}this._value=_.reduce([this._value,value],cback);return this;},difference:function(value){return Math.abs(numeral(this._value).subtract(value).value());}};numeral.register('locale','en',{delimiters:{thousands:',',decimal:'.'},abbreviations:{thousand:'k',million:'m',billion:'b',trillion:'t'},ordinal:function(number){var b=number%10;return~~(number%100/10)===1?'th':b===1?'st':b===2?'nd':b===3?'rd':'th';},currency:{symbol:'$'}});(function(){numeral.register('format','bps',{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(value,format,roundingFunction){var space=numeral._.includes(format,' BPS')?' ':'',output;value=value*10000;format=format.replace(/\s?BPS/,'');output=numeral._.numberToFormat(value,format,roundingFunction);if(numeral._.includes(output,')')){output=output.split('');output.splice(-1,0,space+'BPS');output=output.join('');}else{output=output+space+'BPS';}return output;},unformat:function(string){return+(numeral._.stringToNumber(string)*0.0001).toFixed(15);}});})();(function(){var decimal={base:1000,suffixes:['B','KB','MB','GB','TB','PB','EB','ZB','YB']},binary={base:1024,suffixes:['B','KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB']};var allSuffixes=decimal.suffixes.concat(binary.suffixes.filter(function(item){return decimal.suffixes.indexOf(item)<0;}));var unformatRegex=allSuffixes.join('|');unformatRegex='('+unformatRegex.replace('B','B(?!PS)')+')';numeral.register('format','bytes',{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(unformatRegex)},format:function(value,format,roundingFunction){var output,bytes=numeral._.includes(format,'ib')?binary:decimal,suffix=numeral._.includes(format,' b')||numeral._.includes(format,' ib')?' ':'',power,min,max;format=format.replace(/\s?i?b/,'');for(power=0;power<=bytes.suffixes.length;power++){min=Math.pow(bytes.base,power);max=Math.pow(bytes.base,power+1);if(value===null||value===0||value>=min&&value<max){suffix+=bytes.suffixes[power];if(min>0){value=value/min;}break;}}output=numeral._.numberToFormat(value,format,roundingFunction);return output+suffix;},unformat:function(string){var value=numeral._.stringToNumber(string),power,bytesMultiplier;if(value){for(power=decimal.suffixes.length-1;power>=0;power--){if(numeral._.includes(string,decimal.suffixes[power])){bytesMultiplier=Math.pow(decimal.base,power);break;}if(numeral._.includes(string,binary.suffixes[power])){bytesMultiplier=Math.pow(binary.base,power);break;}}value*=bytesMultiplier||1;}return value;}});})();(function(){numeral.register('format','currency',{regexps:{format:/(\$)/},format:function(value,format,roundingFunction){var locale=numeral.locales[numeral.options.currentLocale],symbols={before:format.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:format.match(/([\+|\-|\)|\s|\$]*)$/)[0]},output,symbol,i;format=format.replace(/\s?\$\s?/,'');output=numeral._.numberToFormat(value,format,roundingFunction);if(value>=0){symbols.before=symbols.before.replace(/[\-\(]/,'');symbols.after=symbols.after.replace(/[\-\)]/,'');}else if(value<0&&!numeral._.includes(symbols.before,'-')&&!numeral._.includes(symbols.before,'(')){symbols.before='-'+symbols.before;}for(i=0;i<symbols.before.length;i++){symbol=symbols.before[i];switch(symbol){case'$':output=numeral._.insert(output,locale.currency.symbol,i);break;case' ':output=numeral._.insert(output,' ',i+locale.currency.symbol.length-1);break;}}for(i=symbols.after.length-1;i>=0;i--){symbol=symbols.after[i];switch(symbol){case'$':output=i===symbols.after.length-1?output+locale.currency.symbol:numeral._.insert(output,locale.currency.symbol,-(symbols.after.length-(1+i)));break;case' ':output=i===symbols.after.length-1?output+' ':numeral._.insert(output,' ',-(symbols.after.length-(1+i)+locale.currency.symbol.length-1));break;}}return output;}});})();(function(){numeral.register('format','exponential',{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(value,format,roundingFunction){var output,exponential=typeof value==='number'&&!numeral._.isNaN(value)?value.toExponential():'0e+0',parts=exponential.split('e');format=format.replace(/e[\+|\-]{1}0/,'');output=numeral._.numberToFormat(Number(parts[0]),format,roundingFunction);return output+'e'+parts[1];},unformat:function(string){var parts=numeral._.includes(string,'e+')?string.split('e+'):string.split('e-'),value=Number(parts[0]),power=Number(parts[1]);power=numeral._.includes(string,'e-')?power*=-1:power;function cback(accum,curr,currI,O){var corrFactor=numeral._.correctionFactor(accum,curr),num=accum*corrFactor*(curr*corrFactor)/(corrFactor*corrFactor);return num;}return numeral._.reduce([value,Math.pow(10,power)],cback,1);}});})();(function(){numeral.register('format','ordinal',{regexps:{format:/(o)/},format:function(value,format,roundingFunction){var locale=numeral.locales[numeral.options.currentLocale],output,ordinal=numeral._.includes(format,' o')?' ':'';format=format.replace(/\s?o/,'');ordinal+=locale.ordinal(value);output=numeral._.numberToFormat(value,format,roundingFunction);return output+ordinal;}});})();(function(){numeral.register('format','percentage',{regexps:{format:/(%)/,unformat:/(%)/},format:function(value,format,roundingFunction){var space=numeral._.includes(format,' %')?' ':'',output;if(numeral.options.scalePercentBy100){value=value*100;}format=format.replace(/\s?\%/,'');output=numeral._.numberToFormat(value,format,roundingFunction);if(numeral._.includes(output,')')){output=output.split('');output.splice(-1,0,space+'%');output=output.join('');}else{output=output+space+'%';}return output;},unformat:function(string){var number=numeral._.stringToNumber(string);if(numeral.options.scalePercentBy100){return number*0.01;}return number;}});})();(function(){numeral.register('format','time',{regexps:{format:/(:)/,unformat:/(:)/},format:function(value,format,roundingFunction){var hours=Math.floor(value/60/60),minutes=Math.floor((value-hours*60*60)/60),seconds=Math.round(value-hours*60*60-minutes*60);return hours+':'+(minutes<10?'0'+minutes:minutes)+':'+(seconds<10?'0'+seconds:seconds);},unformat:function(string){var timeArray=string.split(':'),seconds=0;if(timeArray.length===3){seconds=seconds+Number(timeArray[0])*60*60;seconds=seconds+Number(timeArray[1])*60;seconds=seconds+Number(timeArray[2]);}else if(timeArray.length===2){seconds=seconds+Number(timeArray[0])*60;seconds=seconds+Number(timeArray[1]);}return Number(seconds);}});})();return numeral;});

/***/ }),
/* 260 */
/***/ (function(module, exports, __webpack_require__) {

var baseMerge=__webpack_require__(291),createAssigner=__webpack_require__(102);var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex);});module.exports=merge;

/***/ }),
/* 261 */
/***/ (function(module, exports, __webpack_require__) {

var baseRest=__webpack_require__(19),unzip=__webpack_require__(104);var zip=baseRest(unzip);module.exports=zip;

/***/ }),
/* 262 */
/***/ (function(module, exports, __webpack_require__) {

var convert=__webpack_require__(17),func=convert('mapValues',__webpack_require__(38));func.placeholder=__webpack_require__(14);module.exports=func;

/***/ }),
/* 263 */
/***/ (function(module, exports, __webpack_require__) {

var convert=__webpack_require__(17),func=convert('slice',__webpack_require__(292));func.placeholder=__webpack_require__(14);module.exports=func;

/***/ }),
/* 264 */
/***/ (function(module, exports, __webpack_require__) {

(function(){'use strict';var PI=Math.PI,sin=Math.sin,cos=Math.cos,tan=Math.tan,asin=Math.asin,atan=Math.atan2,acos=Math.acos,rad=PI/180;var dayMs=1000*60*60*24,J1970=2440588,J2000=2451545;function toJulian(date){return date.valueOf()/dayMs-0.5+J1970;}function fromJulian(j){return new Date((j+0.5-J1970)*dayMs);}function toDays(date){return toJulian(date)-J2000;}var e=rad*23.4397;function rightAscension(l,b){return atan(sin(l)*cos(e)-tan(b)*sin(e),cos(l));}function declination(l,b){return asin(sin(b)*cos(e)+cos(b)*sin(e)*sin(l));}function azimuth(H,phi,dec){return atan(sin(H),cos(H)*sin(phi)-tan(dec)*cos(phi));}function altitude(H,phi,dec){return asin(sin(phi)*sin(dec)+cos(phi)*cos(dec)*cos(H));}function siderealTime(d,lw){return rad*(280.16+360.9856235*d)-lw;}function astroRefraction(h){if(h<0)h=0;return 0.0002967/Math.tan(h+0.00312536/(h+0.08901179));}function solarMeanAnomaly(d){return rad*(357.5291+0.98560028*d);}function eclipticLongitude(M){var C=rad*(1.9148*sin(M)+0.02*sin(2*M)+0.0003*sin(3*M)),P=rad*102.9372;return M+C+P+PI;}function sunCoords(d){var M=solarMeanAnomaly(d),L=eclipticLongitude(M);return{dec:declination(L,0),ra:rightAscension(L,0)};}var SunCalc={};SunCalc.getPosition=function(date,lat,lng){var lw=rad*-lng,phi=rad*lat,d=toDays(date),c=sunCoords(d),H=siderealTime(d,lw)-c.ra;return{azimuth:azimuth(H,phi,c.dec),altitude:altitude(H,phi,c.dec)};};var times=SunCalc.times=[[-0.833,'sunrise','sunset'],[-0.3,'sunriseEnd','sunsetStart'],[-6,'dawn','dusk'],[-12,'nauticalDawn','nauticalDusk'],[-18,'nightEnd','night'],[6,'goldenHourEnd','goldenHour']];SunCalc.addTime=function(angle,riseName,setName){times.push([angle,riseName,setName]);};var J0=0.0009;function julianCycle(d,lw){return Math.round(d-J0-lw/(2*PI));}function approxTransit(Ht,lw,n){return J0+(Ht+lw)/(2*PI)+n;}function solarTransitJ(ds,M,L){return J2000+ds+0.0053*sin(M)-0.0069*sin(2*L);}function hourAngle(h,phi,d){return acos((sin(h)-sin(phi)*sin(d))/(cos(phi)*cos(d)));}function getSetJ(h,lw,phi,dec,n,M,L){var w=hourAngle(h,phi,dec),a=approxTransit(w,lw,n);return solarTransitJ(a,M,L);}SunCalc.getTimes=function(date,lat,lng){var lw=rad*-lng,phi=rad*lat,d=toDays(date),n=julianCycle(d,lw),ds=approxTransit(0,lw,n),M=solarMeanAnomaly(ds),L=eclipticLongitude(M),dec=declination(L,0),Jnoon=solarTransitJ(ds,M,L),i,len,time,Jset,Jrise;var result={solarNoon:fromJulian(Jnoon),nadir:fromJulian(Jnoon-0.5)};for(i=0,len=times.length;i<len;i+=1){time=times[i];Jset=getSetJ(time[0]*rad,lw,phi,dec,n,M,L);Jrise=Jnoon-(Jset-Jnoon);result[time[1]]=fromJulian(Jrise);result[time[2]]=fromJulian(Jset);}return result;};function moonCoords(d){var L=rad*(218.316+13.176396*d),M=rad*(134.963+13.064993*d),F=rad*(93.272+13.229350*d),l=L+rad*6.289*sin(M),b=rad*5.128*sin(F),dt=385001-20905*cos(M);return{ra:rightAscension(l,b),dec:declination(l,b),dist:dt};}SunCalc.getMoonPosition=function(date,lat,lng){var lw=rad*-lng,phi=rad*lat,d=toDays(date),c=moonCoords(d),H=siderealTime(d,lw)-c.ra,h=altitude(H,phi,c.dec),pa=atan(sin(H),tan(phi)*cos(c.dec)-sin(c.dec)*cos(H));h=h+astroRefraction(h);return{azimuth:azimuth(H,phi,c.dec),altitude:h,distance:c.dist,parallacticAngle:pa};};SunCalc.getMoonIllumination=function(date){var d=toDays(date||new Date()),s=sunCoords(d),m=moonCoords(d),sdist=149598000,phi=acos(sin(s.dec)*sin(m.dec)+cos(s.dec)*cos(m.dec)*cos(s.ra-m.ra)),inc=atan(sdist*sin(phi),m.dist-sdist*cos(phi)),angle=atan(cos(s.dec)*sin(s.ra-m.ra),sin(s.dec)*cos(m.dec)-cos(s.dec)*sin(m.dec)*cos(s.ra-m.ra));return{fraction:(1+cos(inc))/2,phase:0.5+0.5*inc*(angle<0?-1:1)/Math.PI,angle:angle};};function hoursLater(date,h){return new Date(date.valueOf()+h*dayMs/24);}SunCalc.getMoonTimes=function(date,lat,lng,inUTC){var t=new Date(date);if(inUTC)t.setUTCHours(0,0,0,0);else t.setHours(0,0,0,0);var hc=0.133*rad,h0=SunCalc.getMoonPosition(t,lat,lng).altitude-hc,h1,h2,rise,set,a,b,xe,ye,d,roots,x1,x2,dx;for(var i=1;i<=24;i+=2){h1=SunCalc.getMoonPosition(hoursLater(t,i),lat,lng).altitude-hc;h2=SunCalc.getMoonPosition(hoursLater(t,i+1),lat,lng).altitude-hc;a=(h0+h2)/2-h1;b=(h2-h0)/2;xe=-b/(2*a);ye=(a*xe+b)*xe+h1;d=b*b-4*a*h1;roots=0;if(d>=0){dx=Math.sqrt(d)/(Math.abs(a)*2);x1=xe-dx;x2=xe+dx;if(Math.abs(x1)<=1)roots++;if(Math.abs(x2)<=1)roots++;if(x1<-1)x1=x2;}if(roots===1){if(h0<0)rise=i+x1;else set=i+x1;}else if(roots===2){rise=i+(ye<0?x2:x1);set=i+(ye<0?x1:x2);}if(rise&&set)break;h0=h2;}var result={};if(rise)result.rise=hoursLater(t,rise);if(set)result.set=hoursLater(t,set);if(!rise&&!set)result[ye>0?'alwaysUp':'alwaysDown']=true;return result;};if(true)module.exports=SunCalc;else {}})();

/***/ }),
/* 265 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee=__webpack_require__(5),baseWhile=__webpack_require__(94);function dropWhile(array,predicate){return array&&array.length?baseWhile(array,baseIteratee(predicate,3),true):[];}module.exports=dropWhile;

/***/ }),
/* 266 */
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAAAkCAYAAACQePQGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABcVJREFUeNrsmr9LZFcUx4+bZKIJrBKbUZKMEAgSAo5sYzcjbGGzaBGCndoskkZh/wC1SRfUzq1U0lgEVLaRbRybXTu1SBAbFULUBLO6wiKSZPI+1xxz5857b96M4zor78D13Xd/nnO+55x77hvrRCTrlVWJqWboXqyCGJSYYlBiUGKKQbm79H5Y59TUt5JOfxZ5sYsf9yTx+4VsHh/L6IsXJccnk0np6ekpaFtfX5ft7W2pr683fel02rSfnJzIysqKHB4eSl9fn3nyzrj+/v6ree3t7dLV1SWbm5tmfYpNc3NzMjg4WNCmazc1NRXxwzrsZbefn5+b/fb29kJloZ+x8KT8tbW1STabNX25XK58UAAkk/kyMij7Px1LqiUReTwKhUmUAvMIxvvMzIxRPO8wT0HRKH9hYcHM4x1BGU9hPkIDIu8omTproFSbdE8Uzjr6zj7UGc96Lp/aTh1FT01NmXn2GNZkjPIxOztrQEAexgMcPMFfRZ7y3cXf8mb/WJKHr6Vn5eeSSu47bZBUQ0LSzc2Se/TItGWfPSs5D0GwGhhHmNbWVsM4SgYEiPrw8LDpZzzCoRgEh6gzhyfKUyBQmlqkrWht58m+rKOWr96h4/AgCEUqcHgbvPhZO/toOTo6MvPYA/5ZizmuoUQG5ZfEeyKpZo+RY1kfL63cLEA0NEljIiGZlpbIHqNWpQq23V9JhcAiXVAQXsOdKtUOKxquWI/wZbdreAN0JTsMoUCbD5cvP1lsY4M3niojcgSFrUigVIPGHzy4jOU7O7J3duY7BuuhwLAdqzUWa8hRy9VQRT+0tLRkFKljbAXbQPhZM2AyXkOhnju24l1jIeS5nmefWcy1PUm9krZSgLwVUMb+AyV3cBAICoy6zKrSR0dHjVDqEQoS1ke/AkQ/yqKucV4VOj4+XqA0BZfQiKLsMAjZiYB9INvt6gEuqZepBwK6awy3Csqr849l649L5hL3mr2/vxUxiNC2EpVQGAekKgsFAIiGMZTPXPUK+lCErSi/uK17ah/7kEAAqF+o0sPdbqfOfraC3THwZZ9N2h8FlLrQD5K5JyJkX2s73qgfygYl3dQnn9Z3mPqv51uyebIUX0Kue0+5DSIO66GooQ2L8/Omu0x4St635J7kJf/08hk0JqS033+Y//7rXVOoh431zo685955P/IAyXvnQsF43m2y+0uRB7LZL+p6QevSxlo2IYOXtBTM89Lhorne+RSoixv9zPJP/i9p/rDNFOpBxOE7OTkpqVTKt7+xsVHGxsZ8D9ZKqKOjw+xXjfXcrwPIQHJiZ5ZcGm1aW1vzzQhr5tsXDA8MDEQaWy1QbHDszKwSgqeJiYnCjNMzIL2vsL5tbKenp0VA1hQonBsjIyMFbcvLy9LZ2Sl1dXUyNDRkrAqan58vKUwQoTQtW1tboZZe0V3MU/z+/n6RsZE9uvIxNuzyeesHvasQAOBzhB3WKPYnkEqVZq+5u7tbEG6qJcvq6v9JbCaTMZdaVz43lNWcp2BJ7tmiGZheKCm0a70alh3p0uuFIM5yu4QRvE1PTxedheWErZpMidUbOByxtCDhr+MptieaL9tO2LluGGN9P++LErZq9p5yU1YflvlVi7hLkXktLi5WFLZqAhT3QoiV6WWxu7v7qt2O1dUkkoeg7AtFul4ZBq4S5wjJBJmdn6fWPCgI0Nvbe/VOpoLl6u8rN0V6TwjzEvZ3lRkFFD9je6c+swAKbm0fiBsbGyYtBhgSgaCzpRwivb47374OvhB52Sby5ycij8u/ZB1+kJS5+5cH6dmrj7w/xRZFRuLGYLzH9iC/ZOAuUzgoZ1+JJDxL/dyrP/6m7MVfe+Wlvjx/E+gtXBJdj/EjUs5qHszvJihviVA04OA1+ju9AkT8J5TpWROUGtvv7mePKBS2Xrnr6r2qUu8O/z0lpluh+J/xYlBiikGJQYkpBuUOE9kX/5OZjlVRO/SvAAMADC1T3Wo5vNkAAAAASUVORK5CYII="

/***/ }),
/* 267 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**
 * @license MIT
 * @fileOverview Favico animations
 * @author Miroslav Magda, http://blog.ejci.net
 * @version 0.3.10
 */(function(){var Favico=function(opt){'use strict';opt=opt?opt:{};var _def={bgColor:'#d00',textColor:'#fff',fontFamily:'sans-serif',fontStyle:'bold',type:'circle',position:'down',animation:'slide',elementId:false,dataUrl:false,win:window};var _opt,_orig,_h,_w,_canvas,_context,_img,_ready,_lastBadge,_running,_readyCb,_stop,_browser,_animTimeout,_drawTimeout,_doc;_browser={};_browser.ff=typeof InstallTrigger!='undefined';_browser.chrome=!!window.chrome;_browser.opera=!!window.opera||navigator.userAgent.indexOf('Opera')>=0;_browser.ie=false;_browser.safari=Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor')>0;_browser.supported=_browser.chrome||_browser.ff||_browser.opera;var _queue=[];_readyCb=function(){};_ready=_stop=false;var init=function(){_opt=merge(_def,opt);_opt.bgColor=hexToRgb(_opt.bgColor);_opt.textColor=hexToRgb(_opt.textColor);_opt.position=_opt.position.toLowerCase();_opt.animation=animation.types[''+_opt.animation]?_opt.animation:_def.animation;_doc=_opt.win.document;var isUp=_opt.position.indexOf('up')>-1;var isLeft=_opt.position.indexOf('left')>-1;if(isUp||isLeft){for(var i=0;i<animation.types[''+_opt.animation].length;i++){var step=animation.types[''+_opt.animation][i];if(isUp){if(step.y<0.6){step.y=step.y-0.4;}else{step.y=step.y-2*step.y+(1-step.w);}}if(isLeft){if(step.x<0.6){step.x=step.x-0.4;}else{step.x=step.x-2*step.x+(1-step.h);}}animation.types[''+_opt.animation][i]=step;}}_opt.type=type[''+_opt.type]?_opt.type:_def.type;_orig=link.getIcon();_canvas=document.createElement('canvas');_img=document.createElement('img');if(_orig.hasAttribute('href')){_img.setAttribute('crossOrigin','anonymous');_img.onload=function(){_h=_img.height>0?_img.height:32;_w=_img.width>0?_img.width:32;_canvas.height=_h;_canvas.width=_w;_context=_canvas.getContext('2d');icon.ready();};_img.setAttribute('src',_orig.getAttribute('href'));}else{_img.onload=function(){_h=32;_w=32;_img.height=_h;_img.width=_w;_canvas.height=_h;_canvas.width=_w;_context=_canvas.getContext('2d');icon.ready();};_img.setAttribute('src','');}};var icon={};icon.ready=function(){_ready=true;icon.reset();_readyCb();};icon.reset=function(){if(!_ready){return;}_queue=[];_lastBadge=false;_running=false;_context.clearRect(0,0,_w,_h);_context.drawImage(_img,0,0,_w,_h);link.setIcon(_canvas);window.clearTimeout(_animTimeout);window.clearTimeout(_drawTimeout);};icon.start=function(){if(!_ready||_running){return;}var finished=function(){_lastBadge=_queue[0];_running=false;if(_queue.length>0){_queue.shift();icon.start();}};if(_queue.length>0){_running=true;var run=function(){['type','animation','bgColor','textColor','fontFamily','fontStyle'].forEach(function(a){if(a in _queue[0].options){_opt[a]=_queue[0].options[a];}});animation.run(_queue[0].options,function(){finished();},false);};if(_lastBadge){animation.run(_lastBadge.options,function(){run();},true);}else{run();}}};var type={};var options=function(opt){opt.n=typeof opt.n==='number'?Math.abs(opt.n|0):opt.n;opt.x=_w*opt.x;opt.y=_h*opt.y;opt.w=_w*opt.w;opt.h=_h*opt.h;opt.len=(""+opt.n).length;return opt;};type.circle=function(opt){opt=options(opt);var more=false;if(opt.len===2){opt.x=opt.x-opt.w*0.4;opt.w=opt.w*1.4;more=true;}else if(opt.len>=3){opt.x=opt.x-opt.w*0.65;opt.w=opt.w*1.65;more=true;}_context.clearRect(0,0,_w,_h);_context.drawImage(_img,0,0,_w,_h);_context.beginPath();_context.font=_opt.fontStyle+" "+Math.floor(opt.h*(opt.n>99?0.85:1))+"px "+_opt.fontFamily;_context.textAlign='center';if(more){_context.moveTo(opt.x+opt.w/2,opt.y);_context.lineTo(opt.x+opt.w-opt.h/2,opt.y);_context.quadraticCurveTo(opt.x+opt.w,opt.y,opt.x+opt.w,opt.y+opt.h/2);_context.lineTo(opt.x+opt.w,opt.y+opt.h-opt.h/2);_context.quadraticCurveTo(opt.x+opt.w,opt.y+opt.h,opt.x+opt.w-opt.h/2,opt.y+opt.h);_context.lineTo(opt.x+opt.h/2,opt.y+opt.h);_context.quadraticCurveTo(opt.x,opt.y+opt.h,opt.x,opt.y+opt.h-opt.h/2);_context.lineTo(opt.x,opt.y+opt.h/2);_context.quadraticCurveTo(opt.x,opt.y,opt.x+opt.h/2,opt.y);}else{_context.arc(opt.x+opt.w/2,opt.y+opt.h/2,opt.h/2,0,2*Math.PI);}_context.fillStyle='rgba('+_opt.bgColor.r+','+_opt.bgColor.g+','+_opt.bgColor.b+','+opt.o+')';_context.fill();_context.closePath();_context.beginPath();_context.stroke();_context.fillStyle='rgba('+_opt.textColor.r+','+_opt.textColor.g+','+_opt.textColor.b+','+opt.o+')';if(typeof opt.n==='number'&&opt.n>999){_context.fillText((opt.n>9999?9:Math.floor(opt.n/1000))+'k+',Math.floor(opt.x+opt.w/2),Math.floor(opt.y+opt.h-opt.h*0.2));}else{_context.fillText(opt.n,Math.floor(opt.x+opt.w/2),Math.floor(opt.y+opt.h-opt.h*0.15));}_context.closePath();};type.rectangle=function(opt){opt=options(opt);if(opt.len===2){opt.x=opt.x-opt.w*0.4;opt.w=opt.w*1.4;true;}else if(opt.len>=3){opt.x=opt.x-opt.w*0.65;opt.w=opt.w*1.65;true;}_context.clearRect(0,0,_w,_h);_context.drawImage(_img,0,0,_w,_h);_context.beginPath();_context.font=_opt.fontStyle+" "+Math.floor(opt.h*(opt.n>99?0.9:1))+"px "+_opt.fontFamily;_context.textAlign='center';_context.fillStyle='rgba('+_opt.bgColor.r+','+_opt.bgColor.g+','+_opt.bgColor.b+','+opt.o+')';_context.fillRect(opt.x,opt.y,opt.w,opt.h);_context.fillStyle='rgba('+_opt.textColor.r+','+_opt.textColor.g+','+_opt.textColor.b+','+opt.o+')';if(typeof opt.n==='number'&&opt.n>999){_context.fillText((opt.n>9999?9:Math.floor(opt.n/1000))+'k+',Math.floor(opt.x+opt.w/2),Math.floor(opt.y+opt.h-opt.h*0.2));}else{_context.fillText(opt.n,Math.floor(opt.x+opt.w/2),Math.floor(opt.y+opt.h-opt.h*0.15));}_context.closePath();};var badge=function(number,opts){opts=(typeof opts==='string'?{animation:opts}:opts)||{};_readyCb=function(){try{if(typeof number==='number'?number>0:number!==''){var q={type:'badge',options:{n:number}};if('animation'in opts&&animation.types[''+opts.animation]){q.options.animation=''+opts.animation;}if('type'in opts&&type[''+opts.type]){q.options.type=''+opts.type;}['bgColor','textColor'].forEach(function(o){if(o in opts){q.options[o]=hexToRgb(opts[o]);}});['fontStyle','fontFamily'].forEach(function(o){if(o in opts){q.options[o]=opts[o];}});_queue.push(q);if(_queue.length>100){throw new Error('Too many badges requests in queue.');}icon.start();}else{icon.reset();}}catch(e){throw new Error('Error setting badge. Message: '+e.message);}};if(_ready){_readyCb();}};var image=function(imageElement){_readyCb=function(){try{var w=imageElement.width;var h=imageElement.height;var newImg=document.createElement('img');var ratio=w/_w<h/_h?w/_w:h/_h;newImg.setAttribute('crossOrigin','anonymous');newImg.onload=function(){_context.clearRect(0,0,_w,_h);_context.drawImage(newImg,0,0,_w,_h);link.setIcon(_canvas);};newImg.setAttribute('src',imageElement.getAttribute('src'));newImg.height=h/ratio;newImg.width=w/ratio;}catch(e){throw new Error('Error setting image. Message: '+e.message);}};if(_ready){_readyCb();}};var video=function(videoElement){_readyCb=function(){try{if(videoElement==='stop'){_stop=true;icon.reset();_stop=false;return;}videoElement.addEventListener('play',function(){drawVideo(this);},false);}catch(e){throw new Error('Error setting video. Message: '+e.message);}};if(_ready){_readyCb();}};var webcam=function(action){if(!window.URL||!window.URL.createObjectURL){window.URL=window.URL||{};window.URL.createObjectURL=function(obj){return obj;};}if(_browser.supported){var newVideo=false;navigator.getUserMedia=navigator.getUserMedia||navigator.oGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia;_readyCb=function(){try{if(action==='stop'){_stop=true;icon.reset();_stop=false;return;}newVideo=document.createElement('video');newVideo.width=_w;newVideo.height=_h;navigator.getUserMedia({video:true,audio:false},function(stream){newVideo.src=URL.createObjectURL(stream);newVideo.play();drawVideo(newVideo);},function(){});}catch(e){throw new Error('Error setting webcam. Message: '+e.message);}};if(_ready){_readyCb();}}};function drawVideo(video){if(video.paused||video.ended||_stop){return false;}try{_context.clearRect(0,0,_w,_h);_context.drawImage(video,0,0,_w,_h);}catch(e){}_drawTimeout=setTimeout(function(){drawVideo(video);},animation.duration);link.setIcon(_canvas);}var link={};link.getIcon=function(){var elm=false;var getLink=function(){var link=_doc.getElementsByTagName('head')[0].getElementsByTagName('link');for(var l=link.length,i=l-1;i>=0;i--){if(/(^|\s)icon(\s|$)/i.test(link[i].getAttribute('rel'))){return link[i];}}return false;};if(_opt.element){elm=_opt.element;}else if(_opt.elementId){elm=_doc.getElementById(_opt.elementId);elm.setAttribute('href',elm.getAttribute('src'));}else{elm=getLink();if(elm===false){elm=_doc.createElement('link');elm.setAttribute('rel','icon');_doc.getElementsByTagName('head')[0].appendChild(elm);}}elm.setAttribute('type','image/png');return elm;};link.setIcon=function(canvas){var url=canvas.toDataURL('image/png');if(_opt.dataUrl){_opt.dataUrl(url);}if(_opt.element){_opt.element.setAttribute('href',url);_opt.element.setAttribute('src',url);}else if(_opt.elementId){var elm=_doc.getElementById(_opt.elementId);elm.setAttribute('href',url);elm.setAttribute('src',url);}else{if(_browser.ff||_browser.opera){var old=_orig;_orig=_doc.createElement('link');if(_browser.opera){_orig.setAttribute('rel','icon');}_orig.setAttribute('rel','icon');_orig.setAttribute('type','image/png');_doc.getElementsByTagName('head')[0].appendChild(_orig);_orig.setAttribute('href',url);if(old.parentNode){old.parentNode.removeChild(old);}}else{_orig.setAttribute('href',url);}}};function hexToRgb(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b;});var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:false;}function merge(def,opt){var mergedOpt={};var attrname;for(attrname in def){mergedOpt[attrname]=def[attrname];}for(attrname in opt){mergedOpt[attrname]=opt[attrname];}return mergedOpt;}function isPageHidden(){return _doc.hidden||_doc.msHidden||_doc.webkitHidden||_doc.mozHidden;}var animation={};animation.duration=40;animation.types={};animation.types.fade=[{x:0.4,y:0.4,w:0.6,h:0.6,o:0.0},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.1},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.2},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.3},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.4},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.5},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.6},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.7},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.8},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.9},{x:0.4,y:0.4,w:0.6,h:0.6,o:1.0}];animation.types.none=[{x:0.4,y:0.4,w:0.6,h:0.6,o:1}];animation.types.pop=[{x:1,y:1,w:0,h:0,o:1},{x:0.9,y:0.9,w:0.1,h:0.1,o:1},{x:0.8,y:0.8,w:0.2,h:0.2,o:1},{x:0.7,y:0.7,w:0.3,h:0.3,o:1},{x:0.6,y:0.6,w:0.4,h:0.4,o:1},{x:0.5,y:0.5,w:0.5,h:0.5,o:1},{x:0.4,y:0.4,w:0.6,h:0.6,o:1}];animation.types.popFade=[{x:0.75,y:0.75,w:0,h:0,o:0},{x:0.65,y:0.65,w:0.1,h:0.1,o:0.2},{x:0.6,y:0.6,w:0.2,h:0.2,o:0.4},{x:0.55,y:0.55,w:0.3,h:0.3,o:0.6},{x:0.50,y:0.50,w:0.4,h:0.4,o:0.8},{x:0.45,y:0.45,w:0.5,h:0.5,o:0.9},{x:0.4,y:0.4,w:0.6,h:0.6,o:1}];animation.types.slide=[{x:0.4,y:1,w:0.6,h:0.6,o:1},{x:0.4,y:0.9,w:0.6,h:0.6,o:1},{x:0.4,y:0.9,w:0.6,h:0.6,o:1},{x:0.4,y:0.8,w:0.6,h:0.6,o:1},{x:0.4,y:0.7,w:0.6,h:0.6,o:1},{x:0.4,y:0.6,w:0.6,h:0.6,o:1},{x:0.4,y:0.5,w:0.6,h:0.6,o:1},{x:0.4,y:0.4,w:0.6,h:0.6,o:1}];animation.run=function(opt,cb,revert,step){var animationType=animation.types[isPageHidden()?'none':_opt.animation];if(revert===true){step=typeof step!=='undefined'?step:animationType.length-1;}else{step=typeof step!=='undefined'?step:0;}cb=cb?cb:function(){};if(step<animationType.length&&step>=0){type[_opt.type](merge(opt,animationType[step]));_animTimeout=setTimeout(function(){if(revert){step=step-1;}else{step=step+1;}animation.run(opt,cb,revert,step);},animation.duration);link.setIcon(_canvas);}else{cb();return;}};init();return{badge:badge,video:video,image:image,webcam:webcam,reset:icon.reset,browser:{supported:_browser.supported}};};if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function(){return Favico;}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));}else {}})();

/***/ }),
/* 268 */
/***/ (function(module, exports, __webpack_require__) {

var baseSlice=__webpack_require__(52),toInteger=__webpack_require__(25);function takeRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[];}n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,n<0?0:n,length);}module.exports=takeRight;

/***/ }),
/* 269 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap=__webpack_require__(15),baseIntersection=__webpack_require__(305),baseRest=__webpack_require__(19),castArrayLikeObject=__webpack_require__(304);var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[];});module.exports=intersection;

/***/ }),
/* 270 */
/***/ (function(module, exports, __webpack_require__) {

var toString=__webpack_require__(78);var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);function escapeRegExp(string){string=toString(string);return string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,'\\$&'):string;}module.exports=escapeRegExp;

/***/ }),
/* 271 */
/***/ (function(module, exports, __webpack_require__) {

var convert=__webpack_require__(17),func=convert('groupBy',__webpack_require__(40));func.placeholder=__webpack_require__(14);module.exports=func;

/***/ }),
/* 272 */
/***/ (function(module, exports, __webpack_require__) {

var baseRandom=__webpack_require__(320),isIterateeCall=__webpack_require__(43),toFinite=__webpack_require__(319);var freeParseFloat=parseFloat;var nativeMin=Math.min,nativeRandom=Math.random;function random(lower,upper,floating){if(floating&&typeof floating!='boolean'&&isIterateeCall(lower,upper,floating)){upper=floating=undefined;}if(floating===undefined){if(typeof upper=='boolean'){floating=upper;upper=undefined;}else if(typeof lower=='boolean'){floating=lower;lower=undefined;}}if(lower===undefined&&upper===undefined){lower=0;upper=1;}else{lower=toFinite(lower);if(upper===undefined){upper=lower;lower=0;}else{upper=toFinite(upper);}}if(lower>upper){var temp=lower;lower=upper;upper=temp;}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat('1e-'+((rand+'').length-1))),upper);}return baseRandom(lower,upper);}module.exports=random;

/***/ }),
/* 273 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee=__webpack_require__(5),negate=__webpack_require__(321),pickBy=__webpack_require__(39);function omitBy(object,predicate){return pickBy(object,negate(baseIteratee(predicate)));}module.exports=omitBy;

/***/ }),
/* 274 */
/***/ (function(module, exports) {



(function (window, $) {
    'use strict';

    var Pasteurizer = {};
    module.exports.Pasteurizer = Pasteurizer;

    var SCHEME_FILTER = /(:(?!$)|[^:a-z0-9\.\-\+])/ig;

    Pasteurizer.DEFAULT_CONFIG = {
        elemWhitelist: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'span', 'div', 'code', 'br', 'hr', 'p', 'a', 'img', 'pre', 'blockquote', 'table', 'thead', 'tbody', 'tfoot', 'tr', 'th', 'td', 'strong', 'em', 'i', 'b', 'u', 'ul', 'ol', 'li', 'dl', 'dt', 'dd', 'font', 'center', 'small', 's', 'q', 'sub', 'sup', 'del'],

        attrWhitelist: ['title', 'colspan', 'rowspan', 'cellspacing', 'cellpadding', 'scope', 'face', 'color', 'size', 'bgcolor', 'align'],

        tagAttrWhitelist: {
            'img': ['src', 'alt'],
            'a': ['href']
        },

        schemeWhitelist: ['http:', 'https:', 'ftp:', 'mailto:', 'git:', 'steam:', 'irc:', 'news:', 'mumble:', 'ssh:', 'ircs:', 'ts3server:', ':'],

        hoistOrphanedContents: true,

        hoistBlacklist: ['script', 'style']
    };

    Pasteurizer.scrubNode = function (node, config) {
        var jNode = $(node);
        var nodeName = node.nodeName.toLowerCase();
        var nodeType = node.nodeType;

        var validNode = false;

        if (nodeType === 1) {
            validNode = config.elemWhitelist.indexOf(nodeName) !== -1;
        } else if (nodeType < 6 || nodeType === 9 || nodeType === 11) {
            validNode = true;
        }

        if (validNode && node.nodeType === 1) {
            if (nodeName === 'a') {
                if (node.protocol !== undefined) {
                    var scrubbedProto = node.protocol.replace(SCHEME_FILTER, '');

                    if (config.schemeWhitelist.indexOf(scrubbedProto) === -1 && scrubbedProto !== document.location.protocol) {
                        validNode = false;
                    }
                } else {
                    throw 'Pasteurizer: a.protocol unsupported.';
                }
            }
        }

        if (validNode && node.nodeType === 1) {
            var attrs = $.map(node.attributes, function (attr) {
                return attr.nodeName;
            });

            attrs.forEach(function (attrName) {
                if (config.attrWhitelist.indexOf(attrName) !== -1) {
                    return;
                }

                if (nodeName in config.tagAttrWhitelist && config.tagAttrWhitelist[nodeName].indexOf(attrName) !== -1) {
                    return;
                }

                node.removeAttribute(attrName);
            });
        }

        var canHoist = config.hoistOrphanedContents && config.hoistBlacklist.indexOf(nodeName) === -1;

        if (!validNode && !canHoist) {
            jNode.remove();
            return;
        }

        jNode.contents().each(function (i, child) {
            Pasteurizer.scrubNode(child, config);
        });

        if (!validNode) {
            jNode.contents().detach().insertAfter(jNode);
            jNode.remove();
        }
    };

    Pasteurizer.safeParseHTML = function (html, config) {

        if (!config || $.isEmptyObject(config)) {
            config = Pasteurizer.DEFAULT_CONFIG;
        }

        var parser = new DOMParser();

        var parsed = parser.parseFromString(html, 'text/html');

        var body = $(parsed).find('body').first();

        body.contents().each(function (i, node) {
            Pasteurizer.scrubNode(node, config);
        });
        return body.contents();
    };
})(window, jQuery);

/***/ }),
/* 275 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document");}return factory(w);};}else{factory(global);}})(typeof window!=="undefined"?window:this,function(window,noGlobal){"use strict";var arr=[];var document=window.document;var getProto=Object.getPrototypeOf;var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var fnToString=hasOwn.toString;var ObjectFunctionString=fnToString.call(Object);var support={};var isFunction=function isFunction(obj){return typeof obj==="function"&&typeof obj.nodeType!=="number";};var isWindow=function isWindow(obj){return obj!=null&&obj===obj.window;};var preservedScriptAttributes={type:true,src:true,noModule:true};function DOMEval(code,doc,node){doc=doc||document;var i,script=doc.createElement("script");script.text=code;if(node){for(i in preservedScriptAttributes){if(node[i]){script[i]=node[i];}}}doc.head.appendChild(script).parentNode.removeChild(script);}function toType(obj){if(obj==null){return obj+"";}return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj;}var version="3.3.1",jQuery=function(selector,context){return new jQuery.fn.init(selector,context);},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,length:0,toArray:function(){return slice.call(this);},get:function(num){if(num==null){return slice.call(this);}return num<0?this[num+this.length]:this[num];},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;return ret;},each:function(callback){return jQuery.each(this,callback);},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},slice:function(){return this.pushStack(slice.apply(this,arguments));},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[]);},end:function(){return this.prevObject||this.constructor();},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++;}if(typeof target!=="object"&&!isFunction(target)){target={};}if(i===length){target=this;i--;}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=Array.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&Array.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}return target;};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg);},noop:function(){},isPlainObject:function(obj){var proto,Ctor;if(!obj||toString.call(obj)!=="[object Object]"){return false;}proto=getProto(obj);if(!proto){return true;}Ctor=hasOwn.call(proto,"constructor")&&proto.constructor;return typeof Ctor==="function"&&fnToString.call(Ctor)===ObjectFunctionString;},isEmptyObject:function(obj){var name;for(name in obj){return false;}return true;},globalEval:function(code){DOMEval(code);},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++){if(callback.call(obj[i],i,obj[i])===false){break;}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break;}}}return obj;},trim:function(text){return text==null?"":(text+"").replace(rtrim,"");},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArrayLike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr);}else{push.call(ret,arr);}}return ret;},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i);},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j];}first.length=i;return first;},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i]);}}return matches;},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value);}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value);}}}return concat.apply([],ret);},guid:1,support:support});if(typeof Symbol==="function"){jQuery.fn[Symbol.iterator]=arr[Symbol.iterator];}jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=toType(obj);if(isFunction(obj)||isWindow(obj)){return false;}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj;}var Sizzle=function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date(),preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true;}return 0;},hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++){if(list[i]===elem){return i;}}return-1;},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+identifier+")"),"CLASS":new RegExp("^\\.("+identifier+")"),"TAG":new RegExp("^("+identifier+"|[*])"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"bool":new RegExp("^(?:"+booleans+")$","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-0x10000;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+0x10000):String.fromCharCode(high>>10|0xD800,high&0x3FF|0xDC00);},rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fcssescape=function(ch,asCodePoint){if(asCodePoint){if(ch==="\0"){return"\uFFFD";}return ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" ";}return"\\"+ch;},unloadHandler=function(){setDocument();},disabledAncestor=addCombinator(function(elem){return elem.disabled===true&&("form"in elem||"label"in elem);},{dir:"parentNode",next:"legend"});try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType;}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els));}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]){}target.length=j-1;}};}function Sizzle(selector,context,results,seed){var m,i,elem,nid,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results;}if(!seed){if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context);}context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if(m=match[1]){if(nodeType===9){if(elem=context.getElementById(m)){if(elem.id===m){results.push(elem);return results;}}else{return results;}}else{if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results;}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results;}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results;}}if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nodeType!==1){newContext=context;newSelector=selector;}else if(context.nodeName.toLowerCase()!=="object"){if(nid=context.getAttribute("id")){nid=nid.replace(rcssescape,fcssescape);}else{context.setAttribute("id",nid=expando);}groups=tokenize(selector);i=groups.length;while(i--){groups[i]="#"+nid+" "+toSelector(groups[i]);}newSelector=groups.join(",");newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results;}catch(qsaError){}finally{if(nid===expando){context.removeAttribute("id");}}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed);}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()];}return cache[key+" "]=value;}return cache;}function markFunction(fn){fn[expando]=true;return fn;}function assert(fn){var el=document.createElement("fieldset");try{return!!fn(el);}catch(e){return false;}finally{if(el.parentNode){el.parentNode.removeChild(el);}el=null;}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=arr.length;while(i--){Expr.attrHandle[arr[i]]=handler;}}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&a.sourceIndex-b.sourceIndex;if(diff){return diff;}if(cur){while(cur=cur.nextSibling){if(cur===b){return-1;}}}return a?1:-1;}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type;};}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type;};}function createDisabledPseudo(disabled){return function(elem){if("form"in elem){if(elem.parentNode&&elem.disabled===false){if("label"in elem){if("label"in elem.parentNode){return elem.parentNode.disabled===disabled;}else{return elem.disabled===disabled;}}return elem.isDisabled===disabled||elem.isDisabled!==!disabled&&disabledAncestor(elem)===disabled;}return elem.disabled===disabled;}else if("label"in elem){return elem.disabled===disabled;}return false;};}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[j=matchIndexes[i]]){seed[j]=!(matches[j]=seed[j]);}}});});}function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context;}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};setDocument=Sizzle.setDocument=function(node){var hasCompare,subWindow,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document;}document=doc;docElem=document.documentElement;documentIsHTML=!isXML(document);if(preferredDoc!==document&&(subWindow=document.defaultView)&&subWindow.top!==subWindow){if(subWindow.addEventListener){subWindow.addEventListener("unload",unloadHandler,false);}else if(subWindow.attachEvent){subWindow.attachEvent("onunload",unloadHandler);}}support.attributes=assert(function(el){el.className="i";return!el.getAttribute("className");});support.getElementsByTagName=assert(function(el){el.appendChild(document.createComment(""));return!el.getElementsByTagName("*").length;});support.getElementsByClassName=rnative.test(document.getElementsByClassName);support.getById=assert(function(el){docElem.appendChild(el).id=expando;return!document.getElementsByName||!document.getElementsByName(expando).length;});if(support.getById){Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId;};};Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var elem=context.getElementById(id);return elem?[elem]:[];}};}else{Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId;};};Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var node,i,elems,elem=context.getElementById(id);if(elem){node=elem.getAttributeNode("id");if(node&&node.value===id){return[elem];}elems=context.getElementsByName(id);i=0;while(elem=elems[i++]){node=elem.getAttributeNode("id");if(node&&node.value===id){return[elem];}}}return[];}};}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag);}else if(support.qsa){return context.querySelectorAll(tag);}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while(elem=results[i++]){if(elem.nodeType===1){tmp.push(elem);}}return tmp;}return results;};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML){return context.getElementsByClassName(className);}};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(document.querySelectorAll)){assert(function(el){docElem.appendChild(el).innerHTML="<a id='"+expando+"'></a>"+"<select id='"+expando+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(el.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")");}if(!el.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");}if(!el.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=");}if(!el.querySelectorAll(":checked").length){rbuggyQSA.push(":checked");}if(!el.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]");}});assert(function(el){el.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var input=document.createElement("input");input.setAttribute("type","hidden");el.appendChild(input).setAttribute("name","D");if(el.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=");}if(el.querySelectorAll(":enabled").length!==2){rbuggyQSA.push(":enabled",":disabled");}docElem.appendChild(el).disabled=true;if(el.querySelectorAll(":disabled").length!==2){rbuggyQSA.push(":enabled",":disabled");}el.querySelectorAll("*,:x");rbuggyQSA.push(",.*:");});}if(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)){assert(function(el){support.disconnectedMatch=matches.call(el,"*");matches.call(el,"[s!='']:x");rbuggyMatches.push("!=",pseudos);});}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16));}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return true;}}}return false;};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0;}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare;}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1;}if(b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1;}return sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;}return compare&4?-1:1;}:function(a,b){if(a===b){hasDuplicate=true;return 0;}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;}else if(aup===bup){return siblingCheck(a,b);}cur=a;while(cur=cur.parentNode){ap.unshift(cur);}cur=b;while(cur=cur.parentNode){bp.unshift(cur);}while(ap[i]===bp[i]){i++;}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0;};return document;};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements);};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem);}expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret;}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0;};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context);}return contains(context,elem);};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem);}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null;};Sizzle.escape=function(sel){return(sel+"").replace(rcssescape,fcssescape);};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i);}}while(j--){results.splice(duplicates[j],1);}}sortInput=null;return results;};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=getText(node);}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent;}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}return ret;};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" ";}return match.slice(0,4);},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0]);}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd");}else if(match[3]){Sizzle.error(match[0]);}return match;},"PSEUDO":function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null;}if(match[3]){match[2]=match[4]||match[5]||"";}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess);}return match.slice(0,3);}},filter:{"TAG":function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true;}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName;};},"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"");});},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!=";}if(!operator){return true;}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false;};},"CHILD":function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode;}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while(node=node[dir]){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false;}}start=dir=type==="only"&&!start&&"nextSibling";}return true;}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){node=parent;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if(node.nodeType===1&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break;}}}else{if(useCache){node=elem;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex;}if(diff===false){while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});uniqueCache[type]=[dirruns,diff];}if(node===elem){break;}}}}}diff-=last;return diff===first||diff%first===0&&diff/first>=0;}};},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument);}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i]);}}):function(elem){return fn(elem,0,args);};}return fn;}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if(elem=unmatched[i]){seed[i]=!(matches[i]=elem);}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop();};}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0;};}),"contains":markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1;};}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang);}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0;}}while((elem=elem.parentNode)&&elem.nodeType===1);return false;};}),"target":function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id;},"root":function(elem){return elem===docElem;},"focus":function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex);},"enabled":createDisabledPseudo(false),"disabled":createDisabledPseudo(true),"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected;},"selected":function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}return elem.selected===true;},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false;}}return true;},"parent":function(elem){return!Expr.pseudos["empty"](elem);},"header":function(elem){return rheader.test(elem.nodeName);},"input":function(elem){return rinputs.test(elem.nodeName);},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button";},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text");},"first":createPositionalPseudo(function(){return[0];}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1];}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument];}),"even":createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i);}return matchIndexes;}),"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i);}return matchIndexes;}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i);}return matchIndexes;}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i);}return matchIndexes;})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i);}for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i);}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters();tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0);}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar;}groups.push(tokens=[]);}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length);}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length);}}if(!matched){break;}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0);};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value;}return selector;}function addCombinator(matcher,combinator,base){var dir=combinator.dir,skip=combinator.next,key=skip||dir,checkNonElements=base&&key==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml);}}return false;}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true;}}}}else{while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={});if(skip&&skip===elem.nodeName.toLowerCase()){elem=elem[dir]||elem;}else if((oldCache=uniqueCache[key])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return newCache[2]=oldCache[2];}else{uniqueCache[key]=newCache;if(newCache[2]=matcher(elem,context,xml)){return true;}}}}}return false;};}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false;}}return true;}:matchers[0];}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results);}return results;}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if(elem=unmatched[i]){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i);}}}}return newUnmatched;}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter);}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector);}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml);}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if(elem=temp[i]){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if(elem=matcherOut[i]){temp.push(matcherIn[i]=elem);}}postFinder(null,matcherOut=[],temp,xml);}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem);}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml);}else{push.apply(results,matcherOut);}}});}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext;},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1;},implicitRelative,true),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret;}];for(;i<len;i++){if(matcher=Expr.relative[tokens[i].type]){matchers=[addCombinator(elementMatcher(matchers),matcher)];}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break;}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens));}matchers.push(matcher);}}return elementMatcher(matchers);}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||0.1,len=elems.length;if(outermost){outermostContext=context===document||context||outermost;}for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!==document){setDocument(elem);xml=!documentIsHTML;}while(matcher=elementMatchers[j++]){if(matcher(elem,context||document,xml)){results.push(elem);break;}}if(outermost){dirruns=dirrunsUnique;}}if(bySet){if(elem=!matcher&&elem){matchedCount--;}if(seed){unmatched.push(elem);}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++]){matcher(unmatched,setMatched,context,xml);}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results);}}}setMatched=condense(setMatched);}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1){Sizzle.uniqueSort(results);}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup;}return unmatched;};return bySet?markFunction(superMatcher):superMatcher;}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector);}i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached);}else{elementMatchers.push(cached);}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector;}return cached;};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results;}else if(compiled){context=context.parentNode;}selector=selector.slice(tokens.shift().value.length);}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type]){break;}if(find=Expr.find[type]){if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results;}break;}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results;};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(el){return el.compareDocumentPosition(document.createElement("fieldset"))&1;});if(!assert(function(el){el.innerHTML="<a href='#'></a>";return el.firstChild.getAttribute("href")==="#";})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2);}});}if(!support.attributes||!assert(function(el){el.innerHTML="<input/>";el.firstChild.setAttribute("value","");return el.firstChild.getAttribute("value")==="";})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue;}});}if(!assert(function(el){return el.getAttribute("disabled")==null;})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null;}});}return Sizzle;}(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;jQuery.escapeSelector=Sizzle.escape;var dir=function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break;}matched.push(elem);}}return matched;};var siblings=function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n);}}return matched;};var rneedsContext=jQuery.expr.match.needsContext;function nodeName(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase();};var rsingleTag=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function winnow(elements,qualifier,not){if(isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not;});}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem===qualifier!==not;});}if(typeof qualifier!=="string"){return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>-1!==not;});}return jQuery.filter(qualifier,elements,not);}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")";}if(elems.length===1&&elem.nodeType===1){return jQuery.find.matchesSelector(elem,expr)?[elem]:[];}return jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1;}));};jQuery.fn.extend({find:function(selector){var i,ret,len=this.length,self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true;}}}));}ret=this.pushStack([]);for(i=0;i<len;i++){jQuery.find(selector,self[i],ret);}return len>1?jQuery.uniqueSort(ret):ret;},filter:function(selector){return this.pushStack(winnow(this,selector||[],false));},not:function(selector){return this.pushStack(winnow(this,selector||[],true));},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length;}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector){return this;}root=root||rootjQuery;if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null];}else{match=rquickExpr.exec(selector);}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(isFunction(this[match])){this[match](context[match]);}else{this.attr(match,context[match]);}}}return this;}else{elem=document.getElementById(match[2]);if(elem){this[0]=elem;this.length=1;}return this;}}else if(!context||context.jquery){return(context||root).find(selector);}else{return this.constructor(context).find(selector);}}else if(selector.nodeType){this[0]=selector;this.length=1;return this;}else if(isFunction(selector)){return root.ready!==undefined?root.ready(selector):selector(jQuery);}return jQuery.makeArray(selector,this);};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],targets=typeof selectors!=="string"&&jQuery(selectors);if(!rneedsContext.test(selectors)){for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(targets?targets.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break;}}}}return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched);},index:function(elem){if(!elem){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1;}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0]);}return indexOf.call(this,elem.jquery?elem[0]:elem);},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))));},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur;}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until);},next:function(elem){return sibling(elem,"nextSibling");},prev:function(elem){return sibling(elem,"previousSibling");},nextAll:function(elem){return dir(elem,"nextSibling");},prevAll:function(elem){return dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until);},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem);},children:function(elem){return siblings(elem.firstChild);},contents:function(elem){if(nodeName(elem,"iframe")){return elem.contentDocument;}if(nodeName(elem,"template")){elem=elem.content||elem;}return jQuery.merge([],elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until;}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched);}if(this.length>1){if(!guaranteedUnique[name]){jQuery.uniqueSort(matched);}if(rparentsprev.test(name)){matched.reverse();}}return this.pushStack(matched);};});var rnothtmlwhite=/[^\x20\t\r\n\f]+/g;function createOptions(options){var object={};jQuery.each(options.match(rnothtmlwhite)||[],function(_,flag){object[flag]=true;});return object;}jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){locked=locked||options.once;fired=firing=true;for(;queue.length;firingIndex=-1){memory=queue.shift();while(++firingIndex<list.length){if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false;}}}if(!options.memory){memory=false;}firing=false;if(locked){if(memory){list=[];}else{list="";}}},self={add:function(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory);}(function add(args){jQuery.each(args,function(_,arg){if(isFunction(arg)){if(!options.unique||!self.has(arg)){list.push(arg);}}else if(arg&&arg.length&&toType(arg)!=="string"){add(arg);}});})(arguments);if(memory&&!firing){fire();}}return this;},remove:function(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(index<=firingIndex){firingIndex--;}}});return this;},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0;},empty:function(){if(list){list=[];}return this;},disable:function(){locked=queue=[];list=memory="";return this;},disabled:function(){return!list;},lock:function(){locked=queue=[];if(!memory&&!firing){list=memory="";}return this;},locked:function(){return!!locked;},fireWith:function(context,args){if(!locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing){fire();}}return this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return!!fired;}};return self;};function Identity(v){return v;}function Thrower(ex){throw ex;}function adoptValue(value,resolve,reject,noValue){var method;try{if(value&&isFunction(method=value.promise)){method.call(value).done(resolve).fail(reject);}else if(value&&isFunction(method=value.then)){method.call(value,resolve,reject);}else{resolve.apply(undefined,[value].slice(noValue));}}catch(value){reject.apply(undefined,[value]);}}jQuery.extend({Deferred:function(func){var tuples=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],state="pending",promise={state:function(){return state;},always:function(){deferred.done(arguments).fail(arguments);return this;},"catch":function(fn){return promise.then(null,fn);},pipe:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=isFunction(fns[tuple[4]])&&fns[tuple[4]];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&isFunction(returned.promise)){returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject);}else{newDefer[tuple[0]+"With"](this,fn?[returned]:arguments);}});});fns=null;}).promise();},then:function(onFulfilled,onRejected,onProgress){var maxDepth=0;function resolve(depth,deferred,handler,special){return function(){var that=this,args=arguments,mightThrow=function(){var returned,then;if(depth<maxDepth){return;}returned=handler.apply(that,args);if(returned===deferred.promise()){throw new TypeError("Thenable self-resolution");}then=returned&&(typeof returned==="object"||typeof returned==="function")&&returned.then;if(isFunction(then)){if(special){then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special));}else{maxDepth++;then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special),resolve(maxDepth,deferred,Identity,deferred.notifyWith));}}else{if(handler!==Identity){that=undefined;args=[returned];}(special||deferred.resolveWith)(that,args);}},process=special?mightThrow:function(){try{mightThrow();}catch(e){if(jQuery.Deferred.exceptionHook){jQuery.Deferred.exceptionHook(e,process.stackTrace);}if(depth+1>=maxDepth){if(handler!==Thrower){that=undefined;args=[e];}deferred.rejectWith(that,args);}}};if(depth){process();}else{if(jQuery.Deferred.getStackHook){process.stackTrace=jQuery.Deferred.getStackHook();}window.setTimeout(process);}};}return jQuery.Deferred(function(newDefer){tuples[0][3].add(resolve(0,newDefer,isFunction(onProgress)?onProgress:Identity,newDefer.notifyWith));tuples[1][3].add(resolve(0,newDefer,isFunction(onFulfilled)?onFulfilled:Identity));tuples[2][3].add(resolve(0,newDefer,isFunction(onRejected)?onRejected:Thrower));}).promise();},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise;}},deferred={};jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[5];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString;},tuples[3-i][2].disable,tuples[3-i][3].disable,tuples[0][2].lock,tuples[0][3].lock);}list.add(tuple[3].fire);deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?undefined:this,arguments);return this;};deferred[tuple[0]+"With"]=list.fireWith;});promise.promise(deferred);if(func){func.call(deferred,deferred);}return deferred;},when:function(singleValue){var remaining=arguments.length,i=remaining,resolveContexts=Array(i),resolveValues=slice.call(arguments),master=jQuery.Deferred(),updateFunc=function(i){return function(value){resolveContexts[i]=this;resolveValues[i]=arguments.length>1?slice.call(arguments):value;if(! --remaining){master.resolveWith(resolveContexts,resolveValues);}};};if(remaining<=1){adoptValue(singleValue,master.done(updateFunc(i)).resolve,master.reject,!remaining);if(master.state()==="pending"||isFunction(resolveValues[i]&&resolveValues[i].then)){return master.then();}}while(i--){adoptValue(resolveValues[i],updateFunc(i),master.reject);}return master.promise();}});var rerrorNames=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;jQuery.Deferred.exceptionHook=function(error,stack){if(window.console&&window.console.warn&&error&&rerrorNames.test(error.name)){window.console.warn("jQuery.Deferred exception: "+error.message,error.stack,stack);}};jQuery.readyException=function(error){window.setTimeout(function(){throw error;});};var readyList=jQuery.Deferred();jQuery.fn.ready=function(fn){readyList.then(fn).catch(function(error){jQuery.readyException(error);});return this;};jQuery.extend({isReady:false,readyWait:1,ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return;}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}readyList.resolveWith(document,[jQuery]);}});jQuery.ready.then=readyList.then;function completed(){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed);jQuery.ready();}if(document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll){window.setTimeout(jQuery.ready);}else{document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed);}var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(toType(key)==="object"){chainable=true;for(i in key){access(elems,fn,i,key[i],true,emptyGet,raw);}}else if(value!==undefined){chainable=true;if(!isFunction(value)){raw=true;}if(bulk){if(raw){fn.call(elems,value);fn=null;}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value);};}}if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));}}}if(chainable){return elems;}if(bulk){return fn.call(elems);}return len?fn(elems[0],key):emptyGet;};var rmsPrefix=/^-ms-/,rdashAlpha=/-([a-z])/g;function fcamelCase(all,letter){return letter.toUpperCase();}function camelCase(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);}var acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!+owner.nodeType;};function Data(){this.expando=jQuery.expando+Data.uid++;}Data.uid=1;Data.prototype={cache:function(owner){var value=owner[this.expando];if(!value){value={};if(acceptData(owner)){if(owner.nodeType){owner[this.expando]=value;}else{Object.defineProperty(owner,this.expando,{value:value,configurable:true});}}}return value;},set:function(owner,data,value){var prop,cache=this.cache(owner);if(typeof data==="string"){cache[camelCase(data)]=value;}else{for(prop in data){cache[camelCase(prop)]=data[prop];}}return cache;},get:function(owner,key){return key===undefined?this.cache(owner):owner[this.expando]&&owner[this.expando][camelCase(key)];},access:function(owner,key,value){if(key===undefined||key&&typeof key==="string"&&value===undefined){return this.get(owner,key);}this.set(owner,key,value);return value!==undefined?value:key;},remove:function(owner,key){var i,cache=owner[this.expando];if(cache===undefined){return;}if(key!==undefined){if(Array.isArray(key)){key=key.map(camelCase);}else{key=camelCase(key);key=key in cache?[key]:key.match(rnothtmlwhite)||[];}i=key.length;while(i--){delete cache[key[i]];}}if(key===undefined||jQuery.isEmptyObject(cache)){if(owner.nodeType){owner[this.expando]=undefined;}else{delete owner[this.expando];}}},hasData:function(owner){var cache=owner[this.expando];return cache!==undefined&&!jQuery.isEmptyObject(cache);}};var dataPriv=new Data();var dataUser=new Data();var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function getData(data){if(data==="true"){return true;}if(data==="false"){return false;}if(data==="null"){return null;}if(data===+data+""){return+data;}if(rbrace.test(data)){return JSON.parse(data);}return data;}function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$&").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=getData(data);}catch(e){}dataUser.set(elem,key,data);}else{data=undefined;}}return data;}jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem);},data:function(elem,name,data){return dataUser.access(elem,name,data);},removeData:function(elem,name){dataUser.remove(elem,name);},_data:function(elem,name,data){return dataPriv.access(elem,name,data);},_removeData:function(elem,name){dataPriv.remove(elem,name);}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=dataUser.get(elem);if(elem.nodeType===1&&!dataPriv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=camelCase(name.slice(5));dataAttr(elem,name,data[name]);}}}dataPriv.set(elem,"hasDataAttrs",true);}}return data;}if(typeof key==="object"){return this.each(function(){dataUser.set(this,key);});}return access(this,function(value){var data;if(elem&&value===undefined){data=dataUser.get(elem,key);if(data!==undefined){return data;}data=dataAttr(elem,key);if(data!==undefined){return data;}return;}this.each(function(){dataUser.set(this,key,value);});},null,value,arguments.length>1,null,true);},removeData:function(key){return this.each(function(){dataUser.remove(this,key);});}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=dataPriv.get(elem,type);if(data){if(!queue||Array.isArray(data)){queue=dataPriv.access(elem,type,jQuery.makeArray(data));}else{queue.push(data);}}return queue||[];}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type);};if(fn==="inprogress"){fn=queue.shift();startLength--;}if(fn){if(type==="fx"){queue.unshift("inprogress");}delete hooks.stop;fn.call(elem,next,hooks);}if(!startLength&&hooks){hooks.empty.fire();}},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key]);})});}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--;}if(arguments.length<setter){return jQuery.queue(this[0],type);}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(! --count){defer.resolveWith(elements,[elements]);}};if(typeof type!=="string"){obj=type;type=undefined;}type=type||"fx";while(i--){tmp=dataPriv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve);}}resolve();return defer.promise(obj);}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var isHiddenWithinTree=function(elem,el){elem=el||elem;return elem.style.display==="none"||elem.style.display===""&&jQuery.contains(elem.ownerDocument,elem)&&jQuery.css(elem,"display")==="none";};var swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name];}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name];}return ret;};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale,maxIterations=20,currentValue=tween?function(){return tween.cur();}:function(){return jQuery.css(elem,prop,"");},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||unit!=="px"&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){initial=initial/2;unit=unit||initialInUnit[3];initialInUnit=+initial||1;while(maxIterations--){jQuery.style(elem,prop,initialInUnit+unit);if((1-scale)*(1-(scale=currentValue()/initial||0.5))<=0){maxIterations=0;}initialInUnit=initialInUnit/scale;}initialInUnit=initialInUnit*2;jQuery.style(elem,prop,initialInUnit+unit);valueParts=valueParts||[];}if(valueParts){initialInUnit=+initialInUnit||+initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted;}}return adjusted;}var defaultDisplayMap={};function getDefaultDisplay(elem){var temp,doc=elem.ownerDocument,nodeName=elem.nodeName,display=defaultDisplayMap[nodeName];if(display){return display;}temp=doc.body.appendChild(doc.createElement(nodeName));display=jQuery.css(temp,"display");temp.parentNode.removeChild(temp);if(display==="none"){display="block";}defaultDisplayMap[nodeName]=display;return display;}function showHide(elements,show){var display,elem,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue;}display=elem.style.display;if(show){if(display==="none"){values[index]=dataPriv.get(elem,"display")||null;if(!values[index]){elem.style.display="";}}if(elem.style.display===""&&isHiddenWithinTree(elem)){values[index]=getDefaultDisplay(elem);}}else{if(display!=="none"){values[index]="none";dataPriv.set(elem,"display",display);}}}for(index=0;index<length;index++){if(values[index]!=null){elements[index].style.display=values[index];}}return elements;}jQuery.fn.extend({show:function(){return showHide(this,true);},hide:function(){return showHide(this);},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide();}return this.each(function(){if(isHiddenWithinTree(this)){jQuery(this).show();}else{jQuery(this).hide();}});}});var rcheckableType=/^(?:checkbox|radio)$/i;var rtagName=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;var rscriptType=/^$|^module$|\/(?:java|ecma)script/i;var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var ret;if(typeof context.getElementsByTagName!=="undefined"){ret=context.getElementsByTagName(tag||"*");}else if(typeof context.querySelectorAll!=="undefined"){ret=context.querySelectorAll(tag||"*");}else{ret=[];}if(tag===undefined||tag&&nodeName(context,tag)){return jQuery.merge([context],ret);}return ret;}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"));}}var rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(toType(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem);}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem));}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild;}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent="";}}}fragment.textContent="";i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)>-1){if(ignored){ignored.push(elem);}continue;}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp);}if(scripts){j=0;while(elem=tmp[j++]){if(rscriptType.test(elem.type||"")){scripts.push(elem);}}}}return fragment;}(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue;})();var documentElement=document.documentElement;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return true;}function returnFalse(){return false;}function safeActiveElement(){try{return document.activeElement;}catch(err){}}function on(elem,types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined;}for(type in types){on(elem,type,selector,data,types[type],one);}return elem;}if(data==null&&fn==null){fn=selector;data=selector=undefined;}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined;}else{fn=data;data=selector;selector=undefined;}}if(fn===false){fn=returnFalse;}else if(!fn){return elem;}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments);};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);}return elem.each(function(){jQuery.event.add(this,types,fn,data,selector);});}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(!elemData){return;}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector;}if(selector){jQuery.find.matchesSelector(documentElement,selector);}if(!handler.guid){handler.guid=jQuery.guid++;}if(!(events=elemData.events)){events=elemData.events={};}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined;};}types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue;}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle);}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj);}else{handlers.push(handleObj);}jQuery.event.global[type]=true;}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(!elemData||!(events=elemData.events)){return;}types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true);}continue;}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--;}if(special.remove){special.remove.call(elem,handleObj);}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle);}delete events[type];}}if(jQuery.isEmptyObject(events)){dataPriv.remove(elem,"handle events");}},dispatch:function(nativeEvent){var event=jQuery.event.fix(nativeEvent);var i,j,ret,matched,handleObj,handlerQueue,args=new Array(arguments.length),handlers=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;for(i=1;i<arguments.length;i++){args[i]=arguments[i];}event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return;}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.rnamespace||event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation();}}}}}if(special.postDispatch){special.postDispatch.call(this,event);}return event.result;},handlers:function(event,handlers){var i,handleObj,sel,matchedHandlers,matchedSelectors,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&!(event.type==="click"&&event.button>=1)){for(;cur!==this;cur=cur.parentNode||this){if(cur.nodeType===1&&!(event.type==="click"&&cur.disabled===true)){matchedHandlers=[];matchedSelectors={};for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matchedSelectors[sel]===undefined){matchedSelectors[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length;}if(matchedSelectors[sel]){matchedHandlers.push(handleObj);}}if(matchedHandlers.length){handlerQueue.push({elem:cur,handlers:matchedHandlers});}}}}cur=this;if(delegateCount<handlers.length){handlerQueue.push({elem:cur,handlers:handlers.slice(delegateCount)});}return handlerQueue;},addProp:function(name,hook){Object.defineProperty(jQuery.Event.prototype,name,{enumerable:true,configurable:true,get:isFunction(hook)?function(){if(this.originalEvent){return hook(this.originalEvent);}}:function(){if(this.originalEvent){return this.originalEvent[name];}},set:function(value){Object.defineProperty(this,name,{enumerable:true,configurable:true,writable:true,value:value});}});},fix:function(originalEvent){return originalEvent[jQuery.expando]?originalEvent:new jQuery.Event(originalEvent);},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false;}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false;}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&nodeName(this,"input")){this.click();return false;}},_default:function(event){return nodeName(event.target,"a");}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result;}}}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle);}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse;this.target=src.target&&src.target.nodeType===3?src.target.parentNode:src.target;this.currentTarget=src.currentTarget;this.relatedTarget=src.relatedTarget;}else{this.type=src;}if(props){jQuery.extend(this,props);}this.timeStamp=src&&src.timeStamp||Date.now();this[jQuery.expando]=true;};jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&!this.isSimulated){e.preventDefault();}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopPropagation();}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopImmediatePropagation();}this.stopPropagation();}};jQuery.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,"char":true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(event){var button=event.button;if(event.which==null&&rkeyEvent.test(event.type)){return event.charCode!=null?event.charCode:event.keyCode;}if(!event.which&&button!==undefined&&rmouseEvent.test(event.type)){if(button&1){return 1;}if(button&2){return 3;}if(button&4){return 2;}return 0;}return event.which;}},jQuery.event.addProp);jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix;}return ret;}};});jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn);},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1);},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type]);}return this;}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined;}if(fn===false){fn=returnFalse;}return this.each(function(){jQuery.event.remove(this,types,fn,selector);});}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(elem,content){if(nodeName(elem,"table")&&nodeName(content.nodeType!==11?content:content.firstChild,"tr")){return jQuery(elem).children("tbody")[0]||elem;}return elem;}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem;}function restoreScript(elem){if((elem.type||"").slice(0,5)==="true/"){elem.type=elem.type.slice(5);}else{elem.removeAttribute("type");}return elem;}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return;}if(dataPriv.hasData(src)){pdataOld=dataPriv.access(src);pdataCur=dataPriv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i]);}}}}if(dataUser.hasData(src)){udataOld=dataUser.access(src);udataCur=jQuery.extend({},udataOld);dataUser.set(dest,udataCur);}}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}}function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],valueIsFunction=isFunction(value);if(valueIsFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value)){return collection.each(function(index){var self=collection.eq(index);if(valueIsFunction){args[0]=value.call(this,index,self.html());}domManip(self,args,callback,ignored);});}if(l){fragment=buildFragment(args,collection[0].ownerDocument,false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first;}if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"));}}callback.call(collection[i],node,i);}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src&&(node.type||"").toLowerCase()!=="module"){if(jQuery._evalUrl){jQuery._evalUrl(node.src);}}else{DOMEval(node.textContent.replace(rcleanScript,""),doc,node);}}}}}}return collection;}function remove(elem,selector,keepData){var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=nodes[i])!=null;i++){if(!keepData&&node.nodeType===1){jQuery.cleanData(getAll(node));}if(node.parentNode){if(keepData&&jQuery.contains(node.ownerDocument,node)){setGlobalEval(getAll(node,"script"));}node.parentNode.removeChild(node);}}return elem;}jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>");},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i]);}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i]);}}else{cloneCopyEvent(elem,clone);}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"));}return clone;},cleanData:function(elems){var data,elem,type,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(acceptData(elem)){if(data=elem[dataPriv.expando]){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}}elem[dataPriv.expando]=undefined;}if(elem[dataUser.expando]){elem[dataUser.expando]=undefined;}}}}});jQuery.fn.extend({detach:function(selector){return remove(this,selector,true);},remove:function(selector){return remove(this,selector);},text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value;}});},null,value,arguments.length);},append:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem);}});},prepend:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild);}});},before:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this);}});},after:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling);}});},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent="";}}return this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML;}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value;}}elem=0;}catch(e){}}if(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent){parent.replaceChild(elem,this);}}},ignored);}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get());}return this.pushStack(ret);};});var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener){view=window;}return view.getComputedStyle(elem);};var rboxStyle=new RegExp(cssExpand.join("|"),"i");(function(){function computeStyleTests(){if(!div){return;}container.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";div.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";documentElement.appendChild(container).appendChild(div);var divStyle=window.getComputedStyle(div);pixelPositionVal=divStyle.top!=="1%";reliableMarginLeftVal=roundPixelMeasures(divStyle.marginLeft)===12;div.style.right="60%";pixelBoxStylesVal=roundPixelMeasures(divStyle.right)===36;boxSizingReliableVal=roundPixelMeasures(divStyle.width)===36;div.style.position="absolute";scrollboxSizeVal=div.offsetWidth===36||"absolute";documentElement.removeChild(container);div=null;}function roundPixelMeasures(measure){return Math.round(parseFloat(measure));}var pixelPositionVal,boxSizingReliableVal,scrollboxSizeVal,pixelBoxStylesVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return;}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";jQuery.extend(support,{boxSizingReliable:function(){computeStyleTests();return boxSizingReliableVal;},pixelBoxStyles:function(){computeStyleTests();return pixelBoxStylesVal;},pixelPosition:function(){computeStyleTests();return pixelPositionVal;},reliableMarginLeft:function(){computeStyleTests();return reliableMarginLeftVal;},scrollboxSize:function(){computeStyleTests();return scrollboxSizeVal;}});})();function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);if(computed){ret=computed.getPropertyValue(name)||computed[name];if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name);}if(!support.pixelBoxStyles()&&rnumnonpx.test(ret)&&rboxStyle.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth;}}return ret!==undefined?ret+"":ret;}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return;}return(this.get=hookFn).apply(this,arguments);}};}var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rcustomProp=/^--/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle){return name;}var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in emptyStyle){return name;}}}function finalPropName(name){var ret=jQuery.cssProps[name];if(!ret){ret=jQuery.cssProps[name]=vendorPropName(name)||name;}return ret;}function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value;}function boxModelAdjustment(elem,dimension,box,isBorderBox,styles,computedVal){var i=dimension==="width"?1:0,extra=0,delta=0;if(box===(isBorderBox?"border":"content")){return 0;}for(;i<4;i+=2){if(box==="margin"){delta+=jQuery.css(elem,box+cssExpand[i],true,styles);}if(!isBorderBox){delta+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(box!=="padding"){delta+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}else{extra+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}else{if(box==="content"){delta-=jQuery.css(elem,"padding"+cssExpand[i],true,styles);}if(box!=="margin"){delta-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}}if(!isBorderBox&&computedVal>=0){delta+=Math.max(0,Math.ceil(elem["offset"+dimension[0].toUpperCase()+dimension.slice(1)]-computedVal-delta-extra-0.5));}return delta;}function getWidthOrHeight(elem,dimension,extra){var styles=getStyles(elem),val=curCSS(elem,dimension,styles),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box",valueIsBorderBox=isBorderBox;if(rnumnonpx.test(val)){if(!extra){return val;}val="auto";}valueIsBorderBox=valueIsBorderBox&&(support.boxSizingReliable()||val===elem.style[dimension]);if(val==="auto"||!parseFloat(val)&&jQuery.css(elem,"display",false,styles)==="inline"){val=elem["offset"+dimension[0].toUpperCase()+dimension.slice(1)];valueIsBorderBox=true;}val=parseFloat(val)||0;return val+boxModelAdjustment(elem,dimension,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles,val)+"px";}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret;}}}},cssNumber:{"animationIterationCount":true,"columnCount":true,"fillOpacity":true,"flexGrow":true,"flexShrink":true,"fontWeight":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}var ret,type,hooks,origName=camelCase(name),isCustomProp=rcustomProp.test(name),style=elem.style;if(!isCustomProp){name=finalPropName(origName);}hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number";}if(value==null||value!==value){return;}if(type==="number"){value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px");}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit";}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){if(isCustomProp){style.setProperty(name,value);}else{style[name]=value;}}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}return style[name];}},css:function(elem,name,extra,styles){var val,num,hooks,origName=camelCase(name),isCustomProp=rcustomProp.test(name);if(!isCustomProp){name=finalPropName(origName);}hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra);}if(val===undefined){val=curCSS(elem,name,styles);}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name];}if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val;}return val;}});jQuery.each(["height","width"],function(i,dimension){jQuery.cssHooks[dimension]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&(!elem.getClientRects().length||!elem.getBoundingClientRect().width)?swap(elem,cssShow,function(){return getWidthOrHeight(elem,dimension,extra);}):getWidthOrHeight(elem,dimension,extra);}},set:function(elem,value,extra){var matches,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box",subtract=extra&&boxModelAdjustment(elem,dimension,extra,isBorderBox,styles);if(isBorderBox&&support.scrollboxSize()===styles.position){subtract-=Math.ceil(elem["offset"+dimension[0].toUpperCase()+dimension.slice(1)]-parseFloat(styles[dimension])-boxModelAdjustment(elem,dimension,"border",false,styles)-0.5);}if(subtract&&(matches=rcssNum.exec(value))&&(matches[3]||"px")!=="px"){elem.style[dimension]=value;value=jQuery.css(elem,dimension);}return setPositiveNumber(elem,value,subtract);}};});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed){return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left;}))+"px";}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];}return expanded;}};if(prefix!=="margin"){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber;}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(Array.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles);}return map;}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length>1);}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing);}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px");},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this);},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);}else{this.pos=eased=percent;}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this);}if(hooks&&hooks.set){hooks.set(this);}else{Tween.propHooks._default.set(this);}return this;}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==null){return tween.elem[tween.prop];}result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result;},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween);}else if(tween.elem.nodeType===1&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);}else{tween.elem[tween.prop]=tween.now;}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now;}}};jQuery.easing={linear:function(p){return p;},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2;},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,inProgress,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function schedule(){if(inProgress){if(document.hidden===false&&window.requestAnimationFrame){window.requestAnimationFrame(schedule);}else{window.setTimeout(schedule,jQuery.fx.interval);}jQuery.fx.tick();}}function createFxNow(){window.setTimeout(function(){fxNow=undefined;});return fxNow=Date.now();}function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type;}if(includeWidth){attrs.opacity=attrs.width=type;}return attrs;}function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(tween=collection[index].call(animation,prop,value)){return tween;}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,hooks,oldfire,propTween,restoreDisplay,display,isBox="width"in props||"height"in props,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHiddenWithinTree(elem),dataShow=dataPriv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire();}};}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire();}});});}for(prop in props){value=props[prop];if(rfxtypes.test(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true;}else{continue;}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop);}}propTween=!jQuery.isEmptyObject(props);if(!propTween&&jQuery.isEmptyObject(orig)){return;}if(isBox&&elem.nodeType===1){opts.overflow=[style.overflow,style.overflowX,style.overflowY];restoreDisplay=dataShow&&dataShow.display;if(restoreDisplay==null){restoreDisplay=dataPriv.get(elem,"display");}display=jQuery.css(elem,"display");if(display==="none"){if(restoreDisplay){display=restoreDisplay;}else{showHide([elem],true);restoreDisplay=elem.style.display||restoreDisplay;display=jQuery.css(elem,"display");showHide([elem]);}}if(display==="inline"||display==="inline-block"&&restoreDisplay!=null){if(jQuery.css(elem,"float")==="none"){if(!propTween){anim.done(function(){style.display=restoreDisplay;});if(restoreDisplay==null){display=style.display;restoreDisplay=display==="none"?"":display;}}style.display="inline-block";}}}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2];});}propTween=false;for(prop in orig){if(!propTween){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden;}}else{dataShow=dataPriv.access(elem,"fxshow",{display:restoreDisplay});}if(toggle){dataShow.hidden=!hidden;}if(hidden){showHide([elem],true);}anim.done(function(){if(!hidden){showHide([elem]);}dataPriv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop]);}});}propTween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=propTween.start;if(hidden){propTween.end=propTween.start;propTween.start=0;}}}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=camelCase(index);easing=specialEasing[name];value=props[index];if(Array.isArray(value)){easing=value[1];value=props[index]=value[0];}if(index!==name){props[name]=value;delete props[index];}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing;}}}else{specialEasing[name]=easing;}}}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem;}),tick=function(){if(stopped){return false;}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent);}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining;}if(!length){deferred.notifyWith(elem,[animation,1,0]);}deferred.resolveWith(elem,[animation]);return false;},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween;},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this;}stopped=true;for(;index<length;index++){animation.tweens[index].run(1);}if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);deferred.resolveWith(elem,[animation,gotoEnd]);}else{deferred.rejectWith(elem,[animation,gotoEnd]);}return this;}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=Animation.prefilters[index].call(animation,elem,props,animation.opts);if(result){if(isFunction(result.stop)){jQuery._queueHooks(animation.elem,animation.opts.queue).stop=result.stop.bind(result);}return result;}}jQuery.map(props,createTween,animation);if(isFunction(animation.opts.start)){animation.opts.start.call(elem,animation);}animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation;}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween;}]},tweener:function(props,callback){if(isFunction(props)){callback=props;props=["*"];}else{props=props.match(rnothtmlwhite);}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback);}},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){if(prepend){Animation.prefilters.unshift(callback);}else{Animation.prefilters.push(callback);}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!isFunction(easing)&&easing};if(jQuery.fx.off){opt.duration=0;}else{if(typeof opt.duration!=="number"){if(opt.duration in jQuery.fx.speeds){opt.duration=jQuery.fx.speeds[opt.duration];}else{opt.duration=jQuery.fx.speeds._default;}}}if(opt.queue==null||opt.queue===true){opt.queue="fx";}opt.old=opt.complete;opt.complete=function(){if(isFunction(opt.old)){opt.old.call(this);}if(opt.queue){jQuery.dequeue(this,opt.queue);}};return opt;};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHiddenWithinTree).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||dataPriv.get(this,"finish")){anim.stop(true);}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd);};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined;}if(clearQueue&&type!==false){this.queue(type||"fx",[]);}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index]);}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index]);}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1);}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type);}});},finish:function(type){if(type!==false){type=type||"fx";}return this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true);}for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1);}}for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this);}}delete data.finish;});}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback);};});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=Date.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1);}}if(!timers.length){jQuery.fx.stop();}fxNow=undefined;};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);jQuery.fx.start();};jQuery.fx.interval=13;jQuery.fx.start=function(){if(inProgress){return;}inProgress=true;schedule();};jQuery.fx.stop=function(){inProgress=null;};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout);};});};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t";})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});}});jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return;}if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value);}if(nType!==1||!jQuery.isXMLDoc(elem)){hooks=jQuery.attrHooks[name.toLowerCase()]||(jQuery.expr.match.bool.test(name)?boolHook:undefined);}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return;}if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}elem.setAttribute(name,value+"");return value;}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret;},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val;}return value;}}}},removeAttr:function(elem,value){var name,i=0,attrNames=value&&value.match(rnothtmlwhite);if(attrNames&&elem.nodeType===1){while(name=attrNames[i++]){elem.removeAttribute(name);}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name);}else{elem.setAttribute(name,name);}return name;}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle,lowercaseName=name.toLowerCase();if(!isXML){handle=attrHandle[lowercaseName];attrHandle[lowercaseName]=ret;ret=getter(elem,name,isXML)!=null?lowercaseName:null;attrHandle[lowercaseName]=handle;}return ret;};});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1);},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name];});}});jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return;}if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}return elem[name]=value;}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}return elem[name];},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");if(tabindex){return parseInt(tabindex,10);}if(rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href){return 0;}return-1;}}},propFix:{"for":"htmlFor","class":"className"}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex;}return null;},set:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}}};}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this;});function stripAndCollapse(value){var tokens=value.match(rnothtmlwhite)||[];return tokens.join(" ");}function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||"";}function classesToArray(value){if(Array.isArray(value)){return value;}if(typeof value==="string"){return value.match(rnothtmlwhite)||[];}return[];}jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)));});}classes=classesToArray(value);if(classes.length){while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&" "+stripAndCollapse(curValue)+" ";if(cur){j=0;while(clazz=classes[j++]){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" ";}}finalValue=stripAndCollapse(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue);}}}}return this;},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)));});}if(!arguments.length){return this.attr("class","");}classes=classesToArray(value);if(classes.length){while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&" "+stripAndCollapse(curValue)+" ";if(cur){j=0;while(clazz=classes[j++]){while(cur.indexOf(" "+clazz+" ")>-1){cur=cur.replace(" "+clazz+" "," ");}}finalValue=stripAndCollapse(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue);}}}}return this;},toggleClass:function(value,stateVal){var type=typeof value,isValidValue=type==="string"||Array.isArray(value);if(typeof stateVal==="boolean"&&isValidValue){return stateVal?this.addClass(value):this.removeClass(value);}if(isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal);});}return this.each(function(){var className,i,self,classNames;if(isValidValue){i=0;self=jQuery(this);classNames=classesToArray(value);while(className=classNames[i++]){if(self.hasClass(className)){self.removeClass(className);}else{self.addClass(className);}}}else if(value===undefined||type==="boolean"){className=getClass(this);if(className){dataPriv.set(this,"__className__",className);}if(this.setAttribute){this.setAttribute("class",className||value===false?"":dataPriv.get(this,"__className__")||"");}}});},hasClass:function(selector){var className,elem,i=0;className=" "+selector+" ";while(elem=this[i++]){if(elem.nodeType===1&&(" "+stripAndCollapse(getClass(elem))+" ").indexOf(className)>-1){return true;}}return false;}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,valueIsFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret;}ret=elem.value;if(typeof ret==="string"){return ret.replace(rreturn,"");}return ret==null?"":ret;}return;}valueIsFunction=isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return;}if(valueIsFunction){val=value.call(this,i,jQuery(this).val());}else{val=value;}if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(Array.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:stripAndCollapse(jQuery.text(elem));}},select:{get:function(elem){var value,option,i,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one",values=one?null:[],max=one?index+1:options.length;if(index<0){i=max;}else{i=one?index:0;}for(;i<max;i++){option=options[i];if((option.selected||i===index)&&!option.disabled&&(!option.parentNode.disabled||!nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}values.push(value);}}return values;},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1){optionSet=true;}}if(!optionSet){elem.selectedIndex=-1;}return values;}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(Array.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1;}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value;};}});support.focusin="onfocusin"in window;var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,stopPropagationCallback=function(e){e.stopPropagation();};jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,lastElement,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=lastElement=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return;}if(rfocusMorph.test(type+jQuery.event.triggered)){return;}if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort();}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem;}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return;}if(!onlyHandlers&&!special.noBubble&&!isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode;}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur;}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window);}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){lastElement=cur;event.type=i>1?bubbleType:special.bindType||type;handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle");if(handle){handle.apply(cur,data);}handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault();}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem)){if(ontype&&isFunction(elem[type])&&!isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null;}jQuery.event.triggered=type;if(event.isPropagationStopped()){lastElement.addEventListener(type,stopPropagationCallback);}elem[type]();if(event.isPropagationStopped()){lastElement.removeEventListener(type,stopPropagationCallback);}jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp;}}}}return event.result;},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem);}});jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true);}}});if(!support.focusin){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event));};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true);}dataPriv.access(doc,fix,(attaches||0)+1);},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);dataPriv.remove(doc,fix);}else{dataPriv.access(doc,fix,attaches);}}};});}var location=window.location;var nonce=Date.now();var rquery=/\?/;jQuery.parseXML=function(data){var xml;if(!data||typeof data!=="string"){return null;}try{xml=new window.DOMParser().parseFromString(data,"text/xml");}catch(e){xml=undefined;}if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data);}return xml;};var rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(Array.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"&&v!=null?i:"")+"]",v,traditional,add);}});}else if(!traditional&&toType(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add);}}else{add(prefix,obj);}}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,valueOrFunction){var value=isFunction(valueOrFunction)?valueOrFunction():valueOrFunction;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value==null?"":value);};if(Array.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value);});}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add);}}return s.join("&");};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this;}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type));}).map(function(i,elem){var val=jQuery(this).val();if(val==null){return null;}if(Array.isArray(val)){return jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")};});}return{name:elem.name,value:val.replace(rCRLF,"\r\n")};}).get();}});var r20=/%20/g,rhash=/#.*$/,rantiCache=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href;function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*";}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnothtmlwhite)||[];if(isFunction(func)){while(dataType=dataTypes[i++]){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func);}else{(structure[dataType]=structure[dataType]||[]).push(func);}}}};}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false;}else if(seekingTransport){return!(selected=dataTypeOrTransport);}});return selected;}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*");}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:deep||(deep={}))[key]=src[key];}}if(deep){jQuery.extend(true,target,deep);}return target;}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type");}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}if(dataTypes[0]in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break;}if(!firstDataType){firstDataType=type;}}finalDataType=finalDataType||firstDataType;}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}return responses[finalDataType];}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv];}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response;}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType);}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev;}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2];}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1]);}break;}}}}if(conv!==true){if(conv&&s.throws){response=conv(response);}else{try{response=conv(response);}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current};}}}}}}return{state:"success",data:response};}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target);},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined;}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,completed,fireGlobals,i,uncached,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(completed){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString)){responseHeaders[match[1].toLowerCase()]=match[2];}}match=responseHeaders[key.toLowerCase()];}return match==null?null:match;},getAllResponseHeaders:function(){return completed?responseHeadersString:null;},setRequestHeader:function(name,value){if(completed==null){name=requestHeadersNames[name.toLowerCase()]=requestHeadersNames[name.toLowerCase()]||name;requestHeaders[name]=value;}return this;},overrideMimeType:function(type){if(completed==null){s.mimeType=type;}return this;},statusCode:function(map){var code;if(map){if(completed){jqXHR.always(map[jqXHR.status]);}else{for(code in map){statusCode[code]=[statusCode[code],map[code]];}}}return this;},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText);}done(0,finalText);return this;}};deferred.promise(jqXHR);s.url=((url||s.url||location.href)+"").replace(rprotocol,location.protocol+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=(s.dataType||"*").toLowerCase().match(rnothtmlwhite)||[""];if(s.crossDomain==null){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url;urlAnchor.href=urlAnchor.href;s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host;}catch(e){s.crossDomain=true;}}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(completed){return jqXHR;}fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart");}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url.replace(rhash,"");if(!s.hasContent){uncached=s.url.slice(cacheURL.length);if(s.data&&(s.processData||typeof s.data==="string")){cacheURL+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data;}if(s.cache===false){cacheURL=cacheURL.replace(rantiCache,"$1");uncached=(rquery.test(cacheURL)?"&":"?")+"_="+nonce++ +uncached;}s.url=cacheURL+uncached;}else if(s.data&&s.processData&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0){s.data=s.data.replace(r20,"+");}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL]);}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType);}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||completed)){return jqXHR.abort();}strAbort="abort";completeDeferred.add(s.complete);jqXHR.done(s.success);jqXHR.fail(s.error);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s]);}if(completed){return jqXHR;}if(s.async&&s.timeout>0){timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout");},s.timeout);}try{completed=false;transport.send(requestHeaders,done);}catch(e){if(completed){throw e;}done(-1,e);}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(completed){return;}completed=true;if(timeoutTimer){window.clearTimeout(timeoutTimer);}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses);}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified;}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified;}}if(status===204||s.type==="HEAD"){statusText="nocontent";}else if(status===304){statusText="notmodified";}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error;}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0;}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(! --jQuery.active){jQuery.event.trigger("ajaxStop");}}}return jqXHR;},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script");}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(isFunction(data)){type=type||callback;callback=data;data=undefined;}return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url));};});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:true,async:false,global:false,"throws":true});};jQuery.fn.extend({wrapAll:function(html){var wrap;if(this[0]){if(isFunction(html)){html=html.call(this[0]);}wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild;}return elem;}).append(this);}return this;},wrapInner:function(html){if(isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var htmlIsFunction=isFunction(html);return this.each(function(i){jQuery(this).wrapAll(htmlIsFunction?html.call(this,i):html);});},unwrap:function(selector){this.parent(selector).not("body").each(function(){jQuery(this).replaceWith(this.childNodes);});return this;}});jQuery.expr.pseudos.hidden=function(elem){return!jQuery.expr.pseudos.visible(elem);};jQuery.expr.pseudos.visible=function(elem){return!!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length);};jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest();}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i];}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType);}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest";}for(i in headers){xhr.setRequestHeader(i,headers[i]);}callback=function(type){return function(){if(callback){callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.ontimeout=xhr.onreadystatechange=null;if(type==="abort"){xhr.abort();}else if(type==="error"){if(typeof xhr.status!=="number"){complete(0,"error");}else{complete(xhr.status,xhr.statusText);}}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,(xhr.responseType||"text")!=="text"||typeof xhr.responseText!=="string"?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders());}}};};xhr.onload=callback();errorCallback=xhr.onerror=xhr.ontimeout=callback("error");if(xhr.onabort!==undefined){xhr.onabort=errorCallback;}else{xhr.onreadystatechange=function(){if(xhr.readyState===4){window.setTimeout(function(){if(callback){errorCallback();}});}};}callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null);}catch(e){if(callback){throw e;}}},abort:function(){if(callback){callback();}}};}});jQuery.ajaxPrefilter(function(s){if(s.crossDomain){s.contents.script=false;}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}if(s.crossDomain){s.type="GET";}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type);}});document.head.appendChild(script[0]);},abort:function(){if(callback){callback();}}};}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback;}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName);}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName;}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called");}return responseContainer[0];};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments;};jqXHR.always(function(){if(overwritten===undefined){jQuery(window).removeProp(callbackName);}else{window[callbackName]=overwritten;}if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName);}if(responseContainer&&isFunction(overwritten)){overwritten(responseContainer[0]);}responseContainer=overwritten=undefined;});return"script";}});support.createHTMLDocument=function(){var body=document.implementation.createHTMLDocument("").body;body.innerHTML="<form></form><form></form>";return body.childNodes.length===2;}();jQuery.parseHTML=function(data,context,keepScripts){if(typeof data!=="string"){return[];}if(typeof context==="boolean"){keepScripts=context;context=false;}var base,parsed,scripts;if(!context){if(support.createHTMLDocument){context=document.implementation.createHTMLDocument("");base=context.createElement("base");base.href=document.location.href;context.head.appendChild(base);}else{context=document;}}parsed=rsingleTag.exec(data);scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])];}parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove();}return jQuery.merge([],parsed.childNodes);};jQuery.fn.load=function(url,params,callback){var selector,type,response,self=this,off=url.indexOf(" ");if(off>-1){selector=stripAndCollapse(url.slice(off));url=url.slice(0,off);}if(isFunction(params)){callback=params;params=undefined;}else if(params&&typeof params==="object"){type="POST";}if(self.length>0){jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText);}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR]);});});}return this;};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn);};});jQuery.expr.pseudos.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative";}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}if(isFunction(options)){options=options.call(elem,i,jQuery.extend({},curOffset));}if(options.top!=null){props.top=options.top-curOffset.top+curTop;}if(options.left!=null){props.left=options.left-curOffset.left+curLeft;}if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}var rect,win,elem=this[0];if(!elem){return;}if(!elem.getClientRects().length){return{top:0,left:0};}rect=elem.getBoundingClientRect();win=elem.ownerDocument.defaultView;return{top:rect.top+win.pageYOffset,left:rect.left+win.pageXOffset};},position:function(){if(!this[0]){return;}var offsetParent,offset,doc,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect();}else{offset=this.offset();doc=elem.ownerDocument;offsetParent=elem.offsetParent||doc.documentElement;while(offsetParent&&(offsetParent===doc.body||offsetParent===doc.documentElement)&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.parentNode;}if(offsetParent&&offsetParent!==elem&&offsetParent.nodeType===1){parentOffset=jQuery(offsetParent).offset();parentOffset.top+=jQuery.css(offsetParent,"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent,"borderLeftWidth",true);}}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent;}return offsetParent||documentElement;});}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win;if(isWindow(elem)){win=elem;}else if(elem.nodeType===9){win=elem.defaultView;}if(val===undefined){return win?win[prop]:elem[method];}if(win){win.scrollTo(!top?val:win.pageXOffset,top?val:win.pageYOffset);}else{elem[method]=val;}},method,val,arguments.length);};});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed;}});});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(isWindow(elem)){return funcName.indexOf("outer")===0?elem["inner"+name]:elem.document.documentElement["client"+name];}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name]);}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra);},type,chainable?margin:undefined,chainable);};});});jQuery.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn);},unbind:function(types,fn){return this.off(types,null,fn);},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn);}});jQuery.proxy=function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp;}if(!isFunction(fn)){return undefined;}args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy;};jQuery.holdReady=function(hold){if(hold){jQuery.readyWait++;}else{jQuery.ready(true);}};jQuery.isArray=Array.isArray;jQuery.parseJSON=JSON.parse;jQuery.nodeName=nodeName;jQuery.isFunction=isFunction;jQuery.isWindow=isWindow;jQuery.camelCase=camelCase;jQuery.type=toType;jQuery.now=Date.now;jQuery.isNumeric=function(obj){var type=jQuery.type(obj);return(type==="number"||type==="string")&&!isNaN(obj-parseFloat(obj));};if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function(){return jQuery;}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$;}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}return jQuery;};if(!noGlobal){window.jQuery=window.$=jQuery;}return jQuery;});

/***/ }),
/* 276 */
/***/ (function(module, exports, __webpack_require__) {

var basePick=__webpack_require__(340),flatRest=__webpack_require__(69);var pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths);});module.exports=pick;

/***/ }),
/* 277 */
/***/ (function(module, exports, __webpack_require__) {

var copyObject=__webpack_require__(23),createAssigner=__webpack_require__(102),keysIn=__webpack_require__(46);var assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object);});module.exports=assignIn;

/***/ }),
/* 278 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_RESULT__;(function(){'use strict';var collator;try{collator=typeof Intl!=="undefined"&&typeof Intl.Collator!=="undefined"?Intl.Collator("generic",{sensitivity:"base"}):null;}catch(err){console.log("Collator could not be initialized and wouldn't be used");}var prevRow=[],str2Char=[];var Levenshtein={get:function(str1,str2,options){var useCollator=options&&collator&&options.useCollator;var str1Len=str1.length,str2Len=str2.length;if(str1Len===0)return str2Len;if(str2Len===0)return str1Len;var curCol,nextCol,i,j,tmp;for(i=0;i<str2Len;++i){prevRow[i]=i;str2Char[i]=str2.charCodeAt(i);}prevRow[str2Len]=str2Len;var strCmp;if(useCollator){for(i=0;i<str1Len;++i){nextCol=i+1;for(j=0;j<str2Len;++j){curCol=nextCol;strCmp=0===collator.compare(str1.charAt(i),String.fromCharCode(str2Char[j]));nextCol=prevRow[j]+(strCmp?0:1);tmp=curCol+1;if(nextCol>tmp){nextCol=tmp;}tmp=prevRow[j+1]+1;if(nextCol>tmp){nextCol=tmp;}prevRow[j]=curCol;}prevRow[j]=nextCol;}}else{for(i=0;i<str1Len;++i){nextCol=i+1;for(j=0;j<str2Len;++j){curCol=nextCol;strCmp=str1.charCodeAt(i)===str2Char[j];nextCol=prevRow[j]+(strCmp?0:1);tmp=curCol+1;if(nextCol>tmp){nextCol=tmp;}tmp=prevRow[j+1]+1;if(nextCol>tmp){nextCol=tmp;}prevRow[j]=curCol;}prevRow[j]=nextCol;}}return nextCol;}};if("function"!=="undefined"&&__webpack_require__(342)!==null&&__webpack_require__(341)){!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(){return Levenshtein;}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));}else if(typeof module!=="undefined"&&module!==null&&typeof exports!=="undefined"&&module.exports===exports){module.exports=Levenshtein;}else if(typeof self!=="undefined"&&typeof self.postMessage==='function'&&typeof self.importScripts==='function'){self.Levenshtein=Levenshtein;}else if(typeof window!=="undefined"&&window!==null){window.Levenshtein=Levenshtein;}})();
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(82)(module)))

/***/ }),
/* 279 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee=__webpack_require__(5),basePullAt=__webpack_require__(382);function remove(array,predicate){var result=[];if(!(array&&array.length)){return result;}var index=-1,indexes=[],length=array.length;predicate=baseIteratee(predicate,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index);}}basePullAt(array,indexes);return result;}module.exports=remove;

/***/ }),
/* 280 */
/***/ (function(module, exports) {

function fromPairs(pairs){var index=-1,length=pairs==null?0:pairs.length,result={};while(++index<length){var pair=pairs[index];result[pair[0]]=pair[1];}return result;}module.exports=fromPairs;

/***/ }),
/* 281 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var foreground_messaging_namespaceObject = {};
__webpack_require__.d(foreground_messaging_namespaceObject, "sendMessage", function() { return sendMessage; });
__webpack_require__.d(foreground_messaging_namespaceObject, "addListener", function() { return addListener; });
var privateBrowsing_namespaceObject = {};
__webpack_require__.d(privateBrowsing_namespaceObject, "isPrivateBrowsing", function() { return isPrivateBrowsing; });
var history_namespaceObject = {};
__webpack_require__.d(history_namespaceObject, "addURLToHistory", function() { return addURLToHistory; });
__webpack_require__.d(history_namespaceObject, "isURLVisited", function() { return isURLVisited; });
var download_namespaceObject = {};
__webpack_require__.d(download_namespaceObject, "download", function() { return download; });
var id_namespaceObject = {};
__webpack_require__.d(id_namespaceObject, "getExtensionId", function() { return getExtensionId; });
var i18n_namespaceObject = {};
__webpack_require__.d(i18n_namespaceObject, "_loadI18n", function() { return _loadI18n; });
__webpack_require__.d(i18n_namespaceObject, "i18n", function() { return i18n; });
var permissions_namespaceObject = {};
__webpack_require__.d(permissions_namespaceObject, "has", function() { return has; });
__webpack_require__.d(permissions_namespaceObject, "request", function() { return request; });
var auth_namespaceObject = {};
__webpack_require__.d(auth_namespaceObject, "launchAuthFlow", function() { return launchAuthFlow; });
var multicast_namespaceObject = {};
__webpack_require__.d(multicast_namespaceObject, "multicast", function() { return multicast; });
var tabs_namespaceObject = {};
__webpack_require__.d(tabs_namespaceObject, "openNewTab", function() { return openNewTab; });
__webpack_require__.d(tabs_namespaceObject, "openNewTabs", function() { return openNewTabs; });
var pageAction_namespaceObject = {};
__webpack_require__.d(pageAction_namespaceObject, "onClick", function() { return pageAction_onClick; });
__webpack_require__.d(pageAction_namespaceObject, "show", function() { return show; });
__webpack_require__.d(pageAction_namespaceObject, "hide", function() { return pageAction_hide; });
var session_namespaceObject = {};
__webpack_require__.d(session_namespaceObject, "get", function() { return get; });
__webpack_require__.d(session_namespaceObject, "set", function() { return set; });
__webpack_require__.d(session_namespaceObject, "delete_", function() { return delete_; });
__webpack_require__.d(session_namespaceObject, "delete", function() { return delete_; });
__webpack_require__.d(session_namespaceObject, "has", function() { return session_has; });
__webpack_require__.d(session_namespaceObject, "clear", function() { return clear; });
var storage_namespaceObject = {};
__webpack_require__.d(storage_namespaceObject, "get", function() { return storage_get; });
__webpack_require__.d(storage_namespaceObject, "getAll", function() { return getAll; });
__webpack_require__.d(storage_namespaceObject, "getMultiple", function() { return getMultiple; });
__webpack_require__.d(storage_namespaceObject, "set", function() { return storage_set; });
__webpack_require__.d(storage_namespaceObject, "setMultiple", function() { return setMultiple; });
__webpack_require__.d(storage_namespaceObject, "delete", function() { return storage_delete_; });
__webpack_require__.d(storage_namespaceObject, "deleteMultiple", function() { return deleteMultiple; });
__webpack_require__.d(storage_namespaceObject, "has", function() { return storage_has; });
__webpack_require__.d(storage_namespaceObject, "keys", function() { return storage_keys; });
__webpack_require__.d(storage_namespaceObject, "clear", function() { return storage_clear; });
__webpack_require__.d(storage_namespaceObject, "wrap", function() { return wrap; });
__webpack_require__.d(storage_namespaceObject, "wrapPrefix", function() { return wrapPrefix; });
__webpack_require__.d(storage_namespaceObject, "wrapBlob", function() { return wrapBlob; });
var xhrCache_namespaceObject = {};
__webpack_require__.d(xhrCache_namespaceObject, "set", function() { return xhrCache_set; });
__webpack_require__.d(xhrCache_namespaceObject, "check", function() { return xhrCache_check; });
__webpack_require__.d(xhrCache_namespaceObject, "delete", function() { return xhrCache_delete_; });
__webpack_require__.d(xhrCache_namespaceObject, "clear", function() { return xhrCache_clear; });
var string_namespaceObject = {};
__webpack_require__.d(string_namespaceObject, "encode", function() { return encode; });
__webpack_require__.d(string_namespaceObject, "escape", function() { return string_escape; });
__webpack_require__.d(string_namespaceObject, "safe", function() { return safe; });
__webpack_require__.d(string_namespaceObject, "areSimilar", function() { return areSimilar; });
__webpack_require__.d(string_namespaceObject, "html", function() { return string_html; });
__webpack_require__.d(string_namespaceObject, "_html", function() { return _html; });
var ajax_namespaceObject = {};
__webpack_require__.d(ajax_namespaceObject, "ajax", function() { return ajax; });
var bodyClasses_namespaceObject = {};
__webpack_require__.d(bodyClasses_namespaceObject, "add", function() { return bodyClasses_add; });
__webpack_require__.d(bodyClasses_namespaceObject, "remove", function() { return bodyClasses_remove; });
__webpack_require__.d(bodyClasses_namespaceObject, "toggle", function() { return bodyClasses_toggle; });
var browserDetect_namespaceObject = {};
__webpack_require__.d(browserDetect_namespaceObject, "browser", function() { return browser; });
__webpack_require__.d(browserDetect_namespaceObject, "version", function() { return browserDetect_version; });
__webpack_require__.d(browserDetect_namespaceObject, "OS", function() { return OS; });
var createElement_namespaceObject = {};
__webpack_require__.d(createElement_namespaceObject, "toggleButton", function() { return createElement_toggleButton; });
__webpack_require__.d(createElement_namespaceObject, "icon", function() { return icon; });
__webpack_require__.d(createElement_namespaceObject, "table", function() { return createElement_table; });
__webpack_require__.d(createElement_namespaceObject, "tabMenuItem", function() { return createElement_tabMenuItem; });
var alert_namespaceObject = {};
__webpack_require__.d(alert_namespaceObject, "open", function() { return alert_open; });
__webpack_require__.d(alert_namespaceObject, "makeButton", function() { return makeButton; });
var stage_namespaceObject = {};
__webpack_require__.d(stage_namespaceObject, "add", function() { return stageOption; });
__webpack_require__.d(stage_namespaceObject, "commit", function() { return commitStagedOptions; });
__webpack_require__.d(stage_namespaceObject, "reset", function() { return clearStagedOptions; });
__webpack_require__.d(stage_namespaceObject, "isDirty", function() { return hasStagedOptions; });
__webpack_require__.d(stage_namespaceObject, "get", function() { return getStagedOptions; });
var table_namespaceObject = {};
__webpack_require__.d(table_namespaceObject, "getMatchingValueOrAdd", function() { return getMatchingValueOrAdd; });
var settingsNavigation_namespaceObject = {};
__webpack_require__.d(settingsNavigation_namespaceObject, "module", function() { return settingsNavigation_module; });
__webpack_require__.d(settingsNavigation_namespaceObject, "makeUrlHashLink", function() { return makeUrlHashLink; });
__webpack_require__.d(settingsNavigation_namespaceObject, "makeUrlHash", function() { return makeUrlHash; });
__webpack_require__.d(settingsNavigation_namespaceObject, "setUrlHash", function() { return setUrlHash; });
__webpack_require__.d(settingsNavigation_namespaceObject, "resetUrlHash", function() { return resetUrlHash; });
__webpack_require__.d(settingsNavigation_namespaceObject, "isSettingsUrl", function() { return isSettingsUrl; });
__webpack_require__.d(settingsNavigation_namespaceObject, "loadSettingsPage", function() { return loadSettingsPage; });
var dashboard_namespaceObject = {};
__webpack_require__.d(dashboard_namespaceObject, "module", function() { return dashboard_module; });
__webpack_require__.d(dashboard_namespaceObject, "addTab", function() { return addTab; });
__webpack_require__.d(dashboard_namespaceObject, "widgets", function() { return widgets; });
__webpack_require__.d(dashboard_namespaceObject, "subredditWidgetExists", function() { return subredditWidgetExists; });
__webpack_require__.d(dashboard_namespaceObject, "toggleDashboard", function() { return toggleDashboard; });
var newCommentCount_namespaceObject = {};
__webpack_require__.d(newCommentCount_namespaceObject, "module", function() { return newCommentCount_module; });
__webpack_require__.d(newCommentCount_namespaceObject, "hasEntry", function() { return hasEntry; });
__webpack_require__.d(newCommentCount_namespaceObject, "getNewCount", function() { return getNewCount; });
var subredditManager_namespaceObject = {};
__webpack_require__.d(subredditManager_namespaceObject, "module", function() { return subredditManager_module; });
__webpack_require__.d(subredditManager_namespaceObject, "mySubredditShortcuts", function() { return mySubredditShortcuts; });
__webpack_require__.d(subredditManager_namespaceObject, "getMultiCounts", function() { return getMultiCounts; });
__webpack_require__.d(subredditManager_namespaceObject, "toggleSubredditShortcut", function() { return toggleSubredditShortcut; });
__webpack_require__.d(subredditManager_namespaceObject, "subscribeToSubreddit", function() { return subscribeToSubreddit; });
var neverEndingReddit_namespaceObject = {};
__webpack_require__.d(neverEndingReddit_namespaceObject, "module", function() { return neverEndingReddit_module; });
__webpack_require__.d(neverEndingReddit_namespaceObject, "loadPromise", function() { return loadPromise; });
__webpack_require__.d(neverEndingReddit_namespaceObject, "resetReturnToPage", function() { return resetReturnToPage; });
__webpack_require__.d(neverEndingReddit_namespaceObject, "getNextPrevLinks", function() { return getNextPrevLinks; });
__webpack_require__.d(neverEndingReddit_namespaceObject, "loadNextPage", function() { return loadNextPage; });
var showImages_namespaceObject = {};
__webpack_require__.d(showImages_namespaceObject, "genericHosts", function() { return genericHosts; });
__webpack_require__.d(showImages_namespaceObject, "module", function() { return showImages_module; });
__webpack_require__.d(showImages_namespaceObject, "thingExpandoBuildListeners", function() { return thingExpandoBuildListeners; });
__webpack_require__.d(showImages_namespaceObject, "toggleViewImages", function() { return toggleViewImages; });
__webpack_require__.d(showImages_namespaceObject, "refresh", function() { return showImages_refresh; });
__webpack_require__.d(showImages_namespaceObject, "toggleThingExpandos", function() { return toggleThingExpandos; });
__webpack_require__.d(showImages_namespaceObject, "types", function() { return showImages_types; });
__webpack_require__.d(showImages_namespaceObject, "matchesTypes", function() { return matchesTypes; });
__webpack_require__.d(showImages_namespaceObject, "getLinkExpando", function() { return getLinkExpando; });
__webpack_require__.d(showImages_namespaceObject, "Media", function() { return Media; });
__webpack_require__.d(showImages_namespaceObject, "moveMedia", function() { return moveMedia; });
__webpack_require__.d(showImages_namespaceObject, "resizeMedia", function() { return resizeMedia; });
var userTagger_namespaceObject = {};
__webpack_require__.d(userTagger_namespaceObject, "module", function() { return userTagger_module; });
__webpack_require__.d(userTagger_namespaceObject, "usernameRE", function() { return usernameRE; });
__webpack_require__.d(userTagger_namespaceObject, "tagStorage", function() { return tagStorage; });
__webpack_require__.d(userTagger_namespaceObject, "usernameSelector", function() { return usernameSelector; });
__webpack_require__.d(userTagger_namespaceObject, "applyToUser", function() { return applyToUser; });
__webpack_require__.d(userTagger_namespaceObject, "tags", function() { return userTagger_tags; });
__webpack_require__.d(userTagger_namespaceObject, "Tag", function() { return userTagger_Tag; });
var postCases_namespaceObject = {};
__webpack_require__.d(postCases_namespaceObject, "commentCount", function() { return CommentCount_CommentCount; });
__webpack_require__.d(postCases_namespaceObject, "newCommentCount", function() { return NewCommentCount_NewCommentCount; });
__webpack_require__.d(postCases_namespaceObject, "commentsOpened", function() { return CommentsOpened_CommentsOpened; });
__webpack_require__.d(postCases_namespaceObject, "domain", function() { return Domain_Domain; });
__webpack_require__.d(postCases_namespaceObject, "hasExpando", function() { return Expando_Expando; });
__webpack_require__.d(postCases_namespaceObject, "isLocked", function() { return IsLocked_IsLocked; });
__webpack_require__.d(postCases_namespaceObject, "isNSFW", function() { return IsNSFW_IsNSFW; });
__webpack_require__.d(postCases_namespaceObject, "isSpoiler", function() { return IsSpoiler_IsSpoiler; });
__webpack_require__.d(postCases_namespaceObject, "isVisited", function() { return IsVisited_IsVisited; });
__webpack_require__.d(postCases_namespaceObject, "linkFlair", function() { return LinkFlair_LinkFlair; });
__webpack_require__.d(postCases_namespaceObject, "postAfter", function() { return PostAfter_PostAfter; });
__webpack_require__.d(postCases_namespaceObject, "postAge", function() { return PostAge_PostAge; });
__webpack_require__.d(postCases_namespaceObject, "postTitle", function() { return PostTitle_PostTitle; });
__webpack_require__.d(postCases_namespaceObject, "postType", function() { return PostType_PostType; });
__webpack_require__.d(postCases_namespaceObject, "score", function() { return Score_Score; });
__webpack_require__.d(postCases_namespaceObject, "selector", function() { return Selector_Selector; });
__webpack_require__.d(postCases_namespaceObject, "subreddit", function() { return Subreddit_Subreddit; });
__webpack_require__.d(postCases_namespaceObject, "userAttr", function() { return UserAttr_UserAttr; });
__webpack_require__.d(postCases_namespaceObject, "userFlair", function() { return UserFlair_UserFlair; });
__webpack_require__.d(postCases_namespaceObject, "userVoteWeight", function() { return UserVoteWeight_UserVoteWeight; });
__webpack_require__.d(postCases_namespaceObject, "username", function() { return Username_Username; });
__webpack_require__.d(postCases_namespaceObject, "voteType", function() { return VoteType_VoteType; });
var readComments_namespaceObject = {};
__webpack_require__.d(readComments_namespaceObject, "module", function() { return readComments_module; });
__webpack_require__.d(readComments_namespaceObject, "isRead", function() { return isRead; });
var commentCases_namespaceObject = {};
__webpack_require__.d(commentCases_namespaceObject, "commentContent", function() { return CommentContent_CommentContent; });
__webpack_require__.d(commentCases_namespaceObject, "commentLength", function() { return CommentLength_CommentLength; });
__webpack_require__.d(commentCases_namespaceObject, "depth", function() { return Depth_Depth; });
__webpack_require__.d(commentCases_namespaceObject, "hasExpando", function() { return Expando_Expando; });
__webpack_require__.d(commentCases_namespaceObject, "isDeleted", function() { return IsDeleted_IsDeleted; });
__webpack_require__.d(commentCases_namespaceObject, "isRead", function() { return IsRead_IsRead; });
__webpack_require__.d(commentCases_namespaceObject, "postAfter", function() { return PostAfter_PostAfter; });
__webpack_require__.d(commentCases_namespaceObject, "postAge", function() { return PostAge_PostAge; });
__webpack_require__.d(commentCases_namespaceObject, "score", function() { return Score_Score; });
__webpack_require__.d(commentCases_namespaceObject, "selector", function() { return Selector_Selector; });
__webpack_require__.d(commentCases_namespaceObject, "userAttr", function() { return UserAttr_UserAttr; });
__webpack_require__.d(commentCases_namespaceObject, "userFlair", function() { return UserFlair_UserFlair; });
__webpack_require__.d(commentCases_namespaceObject, "userVoteWeight", function() { return UserVoteWeight_UserVoteWeight; });
__webpack_require__.d(commentCases_namespaceObject, "username", function() { return Username_Username; });
__webpack_require__.d(commentCases_namespaceObject, "voteType", function() { return VoteType_VoteType; });
var browseCases_namespaceObject = {};
__webpack_require__.d(browseCases_namespaceObject, "browsingFrontPage", function() { return BrowsingFrontPage_BrowsingFrontPage; });
__webpack_require__.d(browseCases_namespaceObject, "currentLocation", function() { return CurrentLocation_CurrentLocation; });
__webpack_require__.d(browseCases_namespaceObject, "currentMulti", function() { return CurrentMulti_CurrentMulti; });
__webpack_require__.d(browseCases_namespaceObject, "currentUserProfile", function() { return CurrentUserProfile_CurrentUserProfile; });
__webpack_require__.d(browseCases_namespaceObject, "currentSub", function() { return CurrentSub_CurrentSub; });
__webpack_require__.d(browseCases_namespaceObject, "date", function() { return Date_Date; });
__webpack_require__.d(browseCases_namespaceObject, "dow", function() { return Dow_Dow; });
__webpack_require__.d(browseCases_namespaceObject, "loggedInAs", function() { return LoggedInAs_LoggedInAs; });
__webpack_require__.d(browseCases_namespaceObject, "toggle", function() { return Toggle_Toggle; });
var commentTools_namespaceObject = {};
__webpack_require__.d(commentTools_namespaceObject, "module", function() { return commentTools_module; });
__webpack_require__.d(commentTools_namespaceObject, "commentTextareaSelector", function() { return commentTextareaSelector; });
__webpack_require__.d(commentTools_namespaceObject, "updateCounter", function() { return updateCounter; });
__webpack_require__.d(commentTools_namespaceObject, "makeEditBar", function() { return makeEditBar; });
__webpack_require__.d(commentTools_namespaceObject, "onCtrlEnter", function() { return onCtrlEnter; });
var usernameHider_namespaceObject = {};
__webpack_require__.d(usernameHider_namespaceObject, "module", function() { return usernameHider_module; });
__webpack_require__.d(usernameHider_namespaceObject, "getDisplayText", function() { return getDisplayText; });
var quickMessage_namespaceObject = {};
__webpack_require__.d(quickMessage_namespaceObject, "module", function() { return quickMessage_module; });
__webpack_require__.d(quickMessage_namespaceObject, "onClickMessageLink", function() { return onClickMessageLink; });
__webpack_require__.d(quickMessage_namespaceObject, "openQuickMessageDialog", function() { return openQuickMessageDialog; });
var commentNavigator_namespaceObject = {};
__webpack_require__.d(commentNavigator_namespaceObject, "module", function() { return commentNavigator_module; });
__webpack_require__.d(commentNavigator_namespaceObject, "updateCustomConditions", function() { return updateCustomConditions; });
__webpack_require__.d(commentNavigator_namespaceObject, "updateFromSelected", function() { return updateFromSelected; });
__webpack_require__.d(commentNavigator_namespaceObject, "setCategory", function() { return setCategory; });
__webpack_require__.d(commentNavigator_namespaceObject, "toggle", function() { return commentNavigator_toggle; });
__webpack_require__.d(commentNavigator_namespaceObject, "move", function() { return commentNavigator_move; });
var filteReddit_namespaceObject = {};
__webpack_require__.d(filteReddit_namespaceObject, "module", function() { return filteReddit_module; });
__webpack_require__.d(filteReddit_namespaceObject, "defaultFilters", function() { return defaultFilters; });
__webpack_require__.d(filteReddit_namespaceObject, "addOndemandCase", function() { return addOndemandCase; });
__webpack_require__.d(filteReddit_namespaceObject, "addCustomFilter", function() { return addCustomFilter; });
__webpack_require__.d(filteReddit_namespaceObject, "getCustomFilter", function() { return getCustomFilter; });
__webpack_require__.d(filteReddit_namespaceObject, "updateCustomFilter", function() { return updateCustomFilter; });
__webpack_require__.d(filteReddit_namespaceObject, "removeExternalFilterEntry", function() { return removeExternalFilterEntry; });
__webpack_require__.d(filteReddit_namespaceObject, "saveFilterlineStateAsDefault", function() { return saveFilterlineStateAsDefault; });
__webpack_require__.d(filteReddit_namespaceObject, "toggleFilter", function() { return toggleFilter; });
var hideChildComments_namespaceObject = {};
__webpack_require__.d(hideChildComments_namespaceObject, "module", function() { return hideChildComments_module; });
__webpack_require__.d(hideChildComments_namespaceObject, "toggleAll", function() { return toggleAll; });
__webpack_require__.d(hideChildComments_namespaceObject, "toggle", function() { return hideChildComments_toggle; });
var saveComments_namespaceObject = {};
__webpack_require__.d(saveComments_namespaceObject, "module", function() { return saveComments_module; });
__webpack_require__.d(saveComments_namespaceObject, "showEducationalNotification", function() { return showEducationalNotification; });
var showParent_namespaceObject = {};
__webpack_require__.d(showParent_namespaceObject, "module", function() { return showParent_module; });
__webpack_require__.d(showParent_namespaceObject, "startHover", function() { return startHover; });
var singleClick_namespaceObject = {};
__webpack_require__.d(singleClick_namespaceObject, "module", function() { return singleClick_module; });
__webpack_require__.d(singleClick_namespaceObject, "openTabs", function() { return openTabs; });
var keyboardNav_namespaceObject = {};
__webpack_require__.d(keyboardNav_namespaceObject, "module", function() { return keyboardNav_module; });
var providers_namespaceObject = {};
__webpack_require__.d(providers_namespaceObject, "File", function() { return File_File; });
__webpack_require__.d(providers_namespaceObject, "GoogleDrive", function() { return GoogleDrive_GoogleDrive; });
__webpack_require__.d(providers_namespaceObject, "OneDrive", function() { return OneDrive_OneDrive; });
__webpack_require__.d(providers_namespaceObject, "Dropbox", function() { return Dropbox_Dropbox; });

// EXTERNAL MODULE: ./node_modules/file-loader/dist/cjs.js?name=LICENSE!./LICENSE
var cjsname_LICENSE_LICENSE = __webpack_require__(400);

// EXTERNAL MODULE: ./node_modules/lodash/fromPairs.js
var fromPairs = __webpack_require__(280);
var fromPairs_default = /*#__PURE__*/__webpack_require__.n(fromPairs);

// EXTERNAL MODULE: ./node_modules/lodash/once.js
var once = __webpack_require__(1);
var once_default = /*#__PURE__*/__webpack_require__.n(once);

// CONCATENATED MODULE: ./lib/environment/utils/messaging.js


class MessageHandlerError extends Error {
	constructor(message, stack) {
		super();
		this.message = message;
		this.stack = stack;
	}
}

function createMessageHandler(_sendMessage) {
	const listeners = new Map();

	function addListener(type, callback) {
		if (listeners.has(type)) {
			throw new Error(`Listener for "${type}" already exists.`);
		}
		listeners.set(type, callback);
	}

	function sendMessage(type, data, context) {
		return _sendMessage({ type, data }, context).then(({ data, error }) => {
			if (error) {
				throw new MessageHandlerError(error.message, `${error.stack}\n    at target's "${type}" handler`);
			} else {
				return data;
			}
		});
	}

	function _handleMessage({ type, data }, sendResponse, context) {
		const listener = listeners.get(type);
		if (!listener) {
			sendResponse({ error: { message: `Unrecognised message type: ${type}`, stack: '' } });
			return false;
		}

		let response;

		try {
			response = listener(data, context);
		} catch (e) {
			console.error(e);
			sendResponse({ error: { message: e.message, stack: e.stack } });
			return false;
		}

		if (response instanceof Promise) {
			response.then(data => sendResponse({ data }), e => {
				console.error(e);
				sendResponse({ error: { message: e.message, stack: e.stack } });
			});

			return true;
		} else {
			sendResponse({ data: response });
			return false;
		}
	}

	return {
		_handleMessage,
		sendMessage,
		addListener
	};
}
// CONCATENATED MODULE: ./lib/environment/utils/api.js


function apiToPromise(func) {
	return (...args) => new Promise((resolve, reject) => func(...args, (...results) => {
		if (chrome.runtime.lastError) {
			reject(new Error(chrome.runtime.lastError.message));
		} else {
			resolve(results.length > 1 ? results : results[0]);
		}
	}));
}
// CONCATENATED MODULE: ./lib/environment/foreground/messaging.js





const _sendMessage = apiToPromise(chrome.runtime.sendMessage);

const {
	_handleMessage,
	sendMessage,
	addListener
} = createMessageHandler(obj => _sendMessage(obj));

chrome.runtime.onMessage.addListener((obj, sender, sendResponse) => _handleMessage(obj, sendResponse));


// CONCATENATED MODULE: ./lib/environment/foreground/privateBrowsing.js


function isPrivateBrowsing() {
	return chrome.extension.inIncognitoContext;
}
// CONCATENATED MODULE: ./lib/environment/foreground/history.js





async function addURLToHistory(url) {
	if (isPrivateBrowsing()) return;

	await sendMessage('addURLToHistory', url);
}

function isURLVisited(url) {
	return sendMessage('isURLVisited', url);
}
// CONCATENATED MODULE: ./lib/environment/foreground/download.js




function download(url, filename) {
	sendMessage('download', {
		url: new URL(url, location.href).href,
		filename
	});
}
// CONCATENATED MODULE: ./lib/environment/foreground/id.js


function getExtensionId() {
	return chrome.runtime.id;
}
// CONCATENATED MODULE: ./node_modules/exec-loader!./build/buildToken.js
/* harmony default export */ var buildToken = ("2787186436617255");
// CONCATENATED MODULE: ./lib/constants/localStorage.js


const CACHED_LANG_KEY = 'RES.i18nCachedLang';
const CACHED_MESSAGES_KEY = 'RES.i18nCachedMessages';
const CACHED_MESSAGES_TOKEN_KEY = 'RES.i18nCachedMessagesToken';
// EXTERNAL MODULE: ./node_modules/moment/moment.js
var moment = __webpack_require__(0);
var moment_default = /*#__PURE__*/__webpack_require__.n(moment);

// CONCATENATED MODULE: ./lib/utils/localization.js




const DEFAULT_LOCALE = 'en';
const REDDIT_LANGUAGES = new Set(['en', 'af', 'ar', 'be', 'bg', 'bn-IN', 'bn-bd', 'bs', 'ca', 'cs', 'cy', 'da', 'de', 'el', 'en-au', 'en-ca', 'en-gb', 'en-us', 'eo', 'es', 'es-ar', 'es-mx', 'et', 'eu', 'fa', 'fi', 'fil', 'fr', 'fr-ca', 'fy-NL', 'ga-ie', 'gd', 'gl', 'he', 'hi', 'hr', 'hu', 'hy', 'id', 'is', 'it', 'ja', 'kn_IN', 'ko', 'la', 'leet', 'lol', 'lt', 'lv', 'ms', 'mt-MT', 'nl', 'nn', 'no', 'pir', 'pl', 'pt', 'pt-pt', 'pt_BR', 'ro', 'ru', 'sk', 'sl', 'sr', 'sr-la', 'sv', 'ta', 'th', 'tr', 'uk', 'vi', 'zh', 'zh-cn']);

const SPECIAL_LANGUAGES = new Set(['leet', 'lol', 'pir']);

const rawLocale = once_default()(() => {
	const redditLocale = typeof document !== 'undefined' && document.documentElement.getAttribute('lang');

	if (redditLocale && REDDIT_LANGUAGES.has(redditLocale)) {
		return redditLocale;
	} else {
		return navigator.language || DEFAULT_LOCALE;
	}
});

const locale = once_default()(() => {
	if (!SPECIAL_LANGUAGES.has(rawLocale())) {
		const locale = rawLocale().toLowerCase().replace('_', '-');
		return isValidLocale(locale) ? locale : DEFAULT_LOCALE;
	} else {
		return DEFAULT_LOCALE;
	}
});

function isValidLocale(localeString) {
	try {
		0 .toLocaleString(localeString);
	} catch (e) {
		return false;
	}
	return true;
}

function formatNumber(number) {
	return number.toLocaleString(locale());
}

function formatDate(date) {
	return moment_default()(date).locale(locale()).format('L');
}

function formatDateTime(date) {
	return moment_default()(date).locale(locale()).format('L LTS');
}

function formatDateDiff(from, to) {
	return moment_default()(to).locale(locale()).from(from, true);
}

function formatRelativeTime(from) {
	return moment_default()(from).locale(locale()).fromNow();
}
// CONCATENATED MODULE: ./lib/environment/foreground/i18n.js







let messages;

async function _loadI18n() {
	if (localStorage.getItem(CACHED_LANG_KEY) === rawLocale() && localStorage.getItem(CACHED_MESSAGES_TOKEN_KEY) === buildToken) {
		try {
			messages = JSON.parse(localStorage.getItem(CACHED_MESSAGES_KEY) || '');
			return;
		} catch (e) {
			console.error('Failed to parse cached i18n', e);
		}
	}

	messages = await sendMessage('i18n', rawLocale());

	try {
		localStorage.setItem(CACHED_MESSAGES_KEY, JSON.stringify(messages));
		localStorage.setItem(CACHED_LANG_KEY, rawLocale());
		localStorage.setItem(CACHED_MESSAGES_TOKEN_KEY, buildToken);
	} catch (e) {
		console.error('Could not cache i18n - RES will load VERY slowly', e);

		localStorage.removeItem('ads.adserverDownvotePixel');
		localStorage.removeItem('ads.adserverUpvotePixel');
	}
}

function i18n(messageName, ...substitutions) {
	if (!messageName) return '';

	if (!messages) {
		console.error('i18n called too early! key:', messageName);
		return messageName;
	}

	const message = messages[messageName];

	if (!message) return messageName;

	if (substitutions.length === 0) return message;

	return message.replace(/\$(\d)\b(?!\$)/g, (match, number) => substitutions[number - 1]);
}
// EXTERNAL MODULE: ./node_modules/lodash/memoize.js
var memoize = __webpack_require__(3);
var memoize_default = /*#__PURE__*/__webpack_require__.n(memoize);

// EXTERNAL MODULE: ./node_modules/lodash/pull.js
var pull = __webpack_require__(7);
var pull_default = /*#__PURE__*/__webpack_require__.n(pull);

// EXTERNAL MODULE: ./node_modules/lodash/debounce.js
var debounce = __webpack_require__(2);
var debounce_default = /*#__PURE__*/__webpack_require__.n(debounce);

// EXTERNAL MODULE: ./node_modules/lodash/curryRight.js
var curryRight = __webpack_require__(63);
var curryRight_default = /*#__PURE__*/__webpack_require__.n(curryRight);

// EXTERNAL MODULE: ./node_modules/lodash/remove.js
var remove = __webpack_require__(279);
var remove_default = /*#__PURE__*/__webpack_require__.n(remove);

// CONCATENATED MODULE: ./lib/utils/generator.js


function* range(start, end) {
	for (let i = start; i < end; ++i) {
		yield i;
	}
}

function* zip(...iterables) {
	const generators = iterables.map(it => it[Symbol.iterator]());
	let results;

	while ((results = generators.map(gen => gen.next())).some(r => !r.done)) {
		yield results.map(r => r.value);
	}
}
// CONCATENATED MODULE: ./lib/utils/async.js







function waitFor(callback, interval = 1) {
	return new Promise(resolve => {
		(function repeat() {
			const val = callback();
			if (!val) {
				setTimeout(repeat, interval);
				return;
			}
			resolve(val);
		})();
	});
}

const forEachChunked = (() => {
	const framerate = 15;
	const frameTime = 1000 / framerate;
	const minSlot = frameTime / 2;

	const queues = [];

	const run = frameThrottle(start => {
		const slotEnd = Math.max(start + frameTime, performance.now() + minSlot);
		do {
			remove_default()(queues, ({ generator, callback, resolve, reject }) => {
				const { value, done } = generator.next();

				if (done) {
					resolve();
					return true;
				}

				try {
					callback(value);
				} catch (e) {
					if (generator.return) generator.return();
					reject(e);
					return true;
				}
			});

			if (!queues.length) {
				return;
			}
		} while (performance.now() < slotEnd);
		run();
	});

	return curryRight_default()((collection, callback) => new Promise((resolve, reject) => {
		const iterable = Symbol.iterator in collection ? collection : Array.from(collection);
		queues.push({ generator: iterable[Symbol.iterator](), callback, resolve, reject });
		run();
	}));
})();

function batch(callback, { size = 100, delay = 50 } = {}) {
	function* batchAccumulator() {
		const entries = [];
		const promises = [];

		function addPromise() {
			if (entries.length) {
				return new Promise((resolve, reject) => {
					promises.push({ resolve, reject });
				});
			} else {
				return undefined;
			}
		}

		const timeout = debounce_default()(async () => {
			startNewBatch();
			try {
				const results = (await callback(entries)) || [];
				for (const [{ resolve, reject }, result] of zip(promises, results)) {
					if (result instanceof Error) reject(result);else resolve(result);
				}
			} catch (e) {
				for (const _ref of promises) {
					const { reject } = _ref;

					reject(e);
				}
			}
		}, delay);

		while (entries.length < size) {
			const entry = yield addPromise();
			if (entry === undefined) throw new Error('undefined passed into batch generator');
			entries.push(entry);
			timeout();
		}

		const lastPromise = addPromise();
		timeout.flush();
		yield lastPromise;
	}

	let currentBatch;

	function startNewBatch() {
		currentBatch = batchAccumulator();
		currentBatch.next();
	}

	startNewBatch();

	return entry => {
		const { value } = currentBatch.next(entry);
		if (value === undefined) throw new Error('Batch generator was not replaced after completion');
		return value;
	};
}

function always(promise, callback) {
	return promise.then(callback, callback);
}

function fastAsync(callback) {
	return function (...args) {
		return function next(generator, arg, throwing) {
			const { value, done } = !throwing ? generator.next(arg) : generator.throw(arg);

			if (done) {
				return value;
			} else if (!(value instanceof Promise)) {
				return next(generator, value, false);
			} else {
				return value.then(val => next(generator, val, false), err => next(generator, err, true));
			}
		}(Reflect.apply(callback, this, args), undefined, false);
	};
}

function asyncFlow(firstFn, ...fns) {
	return fastAsync(function* (...args) {
		let accum = firstFn(...args);
		for (const fn of fns) {
			accum = fn((yield accum));
		}
		return accum;
	});
}

function reifyPromise(promise) {
	let val = promise;
	promise.then(x => {
		val = x;
	});
	return { get: () => val };
}

function keyedMutex(callback, keyResolver = x => x) {
	const queues = new Map();

	return function (...args) {
		const key = keyResolver(...args);

		const tail = queues.has(key) ? always(queues.get(key), () => Reflect.apply(callback, this, args)) : Reflect.apply(callback, this, args);

		if (tail instanceof Promise) {
			queues.set(key, tail);

			always(tail, () => {
				if (queues.get(key) === tail) queues.delete(key);
			});
		}

		return tail;
	};
}

function mutex(callback) {
	let queue;

	return function (...args) {
		const tail = queue ? always(queue, () => Reflect.apply(callback, this, args)) : Reflect.apply(callback, this, args);

		if (tail instanceof Promise) {
			queue = tail;

			always(tail, () => {
				if (queue === tail) queue = undefined;
			});
		}

		return tail;
	};
}

function frameThrottle(callback) {
	let args = [];
	let queued = false;

	function runCallback(start) {
		queued = false;
		callback(...args, start);
	}

	return (...a) => {
		args = a;

		if (queued) return;
		queued = true;

		if (document.hidden) setTimeout(() => {
			runCallback(performance.now());
		});else requestAnimationFrame(runCallback);
	};
}

const frameThrottleQueuePositionReset = (() => {
	let queues = [];

	const run = frameThrottle(() => {
		for (const fn of queues) {
			try {
				fn();
			} catch (e) {}
		}
		queues = [];
	});

	return function (callback) {
		let queued = false;

		return (...a) => {
			a;

			if (queued) {
				pull_default()(queues, callback);
			} else {
				queued = true;
			}

			queues.push(callback);
			run();
		};
	};
})();

function idleThrottle(callback) {
	let args = [];
	let queued = false;

	function runCallback() {
		queued = false;
		callback(...args);
	}

	return (...a) => {
		args = a;

		if (queued) return;
		queued = true;

		requestIdleCallback(runCallback);
	};
}
// CONCATENATED MODULE: ./lib/environment/foreground/permissions.js





function filterPerms(perms) {
	const permissions = perms.filter(p => !p.includes('://') && p !== '<all_urls>');
	const origins = perms.filter(p => p.includes('://') || p === '<all_urls>');
	return { permissions, origins };
}

const has = memoize_default()(perms => sendMessage('permissions', Object.assign({ operation: 'contains' }, filterPerms(perms))), perms => perms.join(','));

const request = mutex(async perms => {
	if (await has(perms)) return;

	const { permissions, origins } = filterPerms(perms);

	const granted = await sendMessage('permissions', { operation: 'request', permissions, origins });
	if (granted) {
		has.cache.set(perms.join(','), true);
	} else {
		throw new Error(`Permission not granted for: ${perms.join(', ')}`);
	}
});
// CONCATENATED MODULE: ./lib/environment/foreground/auth.js





async function launchAuthFlow({ domain, clientId, scope = '' }, warnUserInteraction) {
	let responseUrl;
	try {
		responseUrl = await sendMessage('authFlow', { domain, clientId, scope, interactive: false });
	} catch (e) {
		console.error('Noninteractive auth failed:', e);

		await warnUserInteraction('You may be redirected to redditenhancementsuite.com to complete the login process.');

		await request(['https://redditenhancementsuite.com/oauth']);

		responseUrl = await sendMessage('authFlow', { domain, clientId, scope, interactive: true });
	}

	const hash = new URL(responseUrl).hash.slice(1);
	const token = new URLSearchParams(hash).get('access_token');

	if (!token) throw new Error('No token found in response.');

	return token;
}
// CONCATENATED MODULE: ./lib/environment/foreground/multicast.js




const callbacks = new Map();

addListener('multicast', ({ name, args }) => {
	const callback = callbacks.get(name);
	if (!callback) {
		throw new Error(`Multicast handler "${name}" not found.`);
	}
	return callback(...args);
});

function multicast(callback, { name, local = true, crossContext = true }) {
	if (callbacks.has(name)) {
		throw new Error(`Multicast handler with name "${name}" exists.`);
	}

	callbacks.set(name, callback);

	function localOnly(...args) {
		callback(...args);
	}

	const invoke = (...args) => {
		sendMessage('multicast', { name, args, crossContext });

		if (local) {
			localOnly(...args);
		}
	};

	invoke.local = localOnly;

	return invoke;
}
// CONCATENATED MODULE: ./lib/environment/foreground/tabs.js




function openNewTab(url, focus = true) {
	return openNewTabs(focus, url);
}

function openNewTabs(focus, ...urls) {
	let focusIndex;

	if (typeof focus !== 'string') focus = !!focus;

	switch (focus) {
		case 'first':
			focusIndex = 0;
			break;
		case true:
		case 'last':
			focusIndex = urls.length - 1;
			break;
		case false:
		case 'none':
			focusIndex = -1;
			break;
		default:
			throw new Error(`Invalid focus specified: ${focus}`);
	}

	urls = urls.map(url => new URL(url, location.href).href);

	return sendMessage('openNewTabs', { urls, focusIndex });
}
// CONCATENATED MODULE: ./lib/environment/foreground/pageAction.js




const clickListeners = [];

function pageAction_onClick(callback) {
	clickListeners.push(callback);
}

addListener('pageActionClick', () => {
	for (const fn of clickListeners) fn();
});

function show(state = false) {
	return sendMessage('pageAction', { operation: 'show', state });
}

function pageAction_hide() {
	return sendMessage('pageAction', { operation: 'hide' });
}
// CONCATENATED MODULE: ./lib/environment/foreground/session.js




function get(key) {
	return sendMessage('session', ['get', key]);
}

function set(key, value) {
	return sendMessage('session', ['set', key, value]);
}

function delete_(key) {
	return sendMessage('session', ['delete', key]);
}


function session_has(key) {
	return sendMessage('session', ['has', key]);
}

function clear() {
	return sendMessage('session', ['clear']);
}
// EXTERNAL MODULE: ./node_modules/lodash/transform.js
var transform = __webpack_require__(32);
var transform_default = /*#__PURE__*/__webpack_require__.n(transform);

// CONCATENATED MODULE: ./lib/utils/object.js

function extendDeep(target, source) {
	for (const key of Object.keys(source)) {
		if (target[key] && source[key] && typeof target[key] === 'object' && typeof source[key] === 'object' && !Array.isArray(source[key]) && !Array.isArray(target[key])) {
			extendDeep(target[key], source[key]);
		} else {
			target[key] = source[key];
		}
	}
	return target;
}

function mapScalarToObject(option, value) {
	const object = {};

	option.fields.forEach((field, index) => {
		Object.defineProperty(object, field.key, {
			get: () => value[index],
			set: v => value[index] = v
		});
	});

	return object;
}
// CONCATENATED MODULE: ./lib/environment/foreground/storage.js








const __set = apiToPromise((items, callback) => chrome.storage.local.set(items, callback));
const _set = (key, value) => __set({ [key]: value });
const __get = apiToPromise((keys, callback) => chrome.storage.local.get(keys, callback));
const _get = async (key, defaultValue = null) => (await __get({ [key]: defaultValue }))[key];
const _delete = apiToPromise((keys, callback) => chrome.storage.local.remove(keys, callback));
const _clear = apiToPromise(callback => chrome.storage.local.clear(callback));

const withLockOn = keyedMutex((key, fn) => fn());

function storage_get(key) {
	return withLockOn(key, () => _get(key, null));
}

function getAll() {
	return __get(null);
}

function getMultiple(keys) {
	const defaults = {};
	for (const k of keys) {
		defaults[k] = null;
	}
	return __get(defaults);
}

function storage_set(key, value) {
	return withLockOn(key, () => _set(key, value));
}

function setMultiple(valueMap) {
	return __set(valueMap);
}

function compareAndSet(key, oldValue, newValue) {
	return sendMessage('storage-cas', [key, oldValue, newValue]);
}

function patch(key, value) {
	return withLockOn(key, async () => {
		const extended = extendDeep((await _get(key)) || {}, value);
		return _set(key, extended);
	});
}

function patchShallow(key, value) {
	return withLockOn(key, async () => {
		const extended = Object.assign((await _get(key)) || {}, value);
		return _set(key, extended);
	});
}

function deletePaths(key, paths) {
	return withLockOn(key, async () => {
		const stored = await _get(key);
		for (const path of paths) {
			path.reduce((obj, key, i, { length }) => {
				if (!obj) return;
				if (i < length - 1) return obj[key];
				delete obj[key];
			}, stored);
		}
		return _set(key, stored);
	});
}

function storage_delete_(key) {
	return withLockOn(key, () => _delete(key));
}


function deleteMultiple(keys) {
	return _delete(keys);
}

function storage_has(key) {
	return withLockOn(key, async () => {
		const sentinel = Math.random();
		return (await _get(key, sentinel)) !== sentinel;
	});
}

async function storage_keys() {
	return Object.keys((await __get(null)));
}

function storage_clear() {
	return _clear();
}

class Wrapper {

	constructor(key, def) {
		this._key = key;
		this._default = def;
	}

	get() {
		return storage_get(this._key()).then(val => val === null ? this._default : val);
	}

	set(value) {
		return storage_set(this._key(), value);
	}

	patch(value) {
		return patch(this._key(), value);
	}

	compareAndSet(oldValue, newValue) {
		return compareAndSet(this._key(), oldValue, newValue);
	}

	deletePath(...path) {
		return deletePaths(this._key(), [path]);
	}

	delete() {
		return storage_delete_(this._key());
	}

	has() {
		return storage_has(this._key());
	}
}

function wrap(key, defaultValue) {
	const keyGenerator = typeof key === 'string' ? () => key : once_default()(key);

	return new Wrapper(keyGenerator, defaultValue);
}

class storage_PrefixWrapper {

	constructor(prefix, def, keyMapper) {
		this._prefix = prefix;
		this._default = def;
		this._keyMapper = keyMapper;
	}

	_keyGen(key) {
		return this._prefix + this._keyMapper(key);
	}

	get(key) {
		return storage_get(this._keyGen(key)).then(val => val === null ? this._default() : val);
	}

	getNullable(key) {
		return storage_get(this._keyGen(key));
	}

	async getAll() {
		const everything = await getAll();
		return transform_default()(everything, (acc, v, k) => {
			if (k.startsWith(this._prefix)) {
				acc[k.slice(this._prefix.length)] = v;
			}
		}, {});
	}

	async getMultiple(keys) {
		const rawValues = await getMultiple(keys.map(k => this._keyGen(k)));
		return transform_default()(rawValues, (acc, v, k) => {
			acc[k.slice(this._prefix.length)] = v === null ? this._default() : v;
		}, {});
	}

	async getMultipleNullable(keys) {
		const rawValues = await getMultiple(keys.map(k => this._keyGen(k)));
		return transform_default()(rawValues, (acc, v, k) => {
			acc[k.slice(this._prefix.length)] = v;
		}, {});
	}

	set(key, value) {
		return storage_set(this._keyGen(key), value);
	}

	patch(key, value) {
		return patch(this._keyGen(key), value);
	}

	deletePath(key, ...path) {
		return deletePaths(this._keyGen(key), [path]);
	}

	delete(key) {
		return storage_delete_(this._keyGen(key));
	}

	deleteMultiple(keys) {
		return deleteMultiple(keys.map(k => this._keyGen(k)));
	}

	has(key) {
		return storage_has(this._keyGen(key));
	}
}

function wrapPrefix(prefix, defaultValue, destructiveKeyMapper = x => x) {
	return new storage_PrefixWrapper(prefix, defaultValue, destructiveKeyMapper);
}

class storage_BlobWrapper {

	constructor(rootKey, def) {
		this._rootKey = rootKey;
		this._default = def;
	}

	get(key) {
		return storage_get(this._rootKey).then(val => val === null || val[key] === undefined ? this._default() : val[key]);
	}

	getNullable(key) {
		return storage_get(this._rootKey).then(val => val === null || val[key] === undefined ? null : val[key]);
	}

	getAll() {
		return storage_get(this._rootKey).then(val => val === null ? {} : val);
	}

	async getMultiple(keys) {
		const rawValues = (await storage_get(this._rootKey)) || {};
		return transform_default()(keys, (acc, key) => {
			acc[key] = rawValues[key] === undefined ? this._default() : rawValues[key];
		}, {});
	}

	async getMultipleNullable(keys) {
		const rawValues = (await storage_get(this._rootKey)) || {};
		return transform_default()(keys, (acc, key) => {
			acc[key] = rawValues[key] === undefined ? null : rawValues[key];
		}, {});
	}

	set(key, value) {
		return patchShallow(this._rootKey, { [key]: value });
	}

	patch(key, value) {
		return patch(this._rootKey, { [key]: value });
	}

	deletePath(key, ...path) {
		return deletePaths(this._rootKey, [[key, ...path]]);
	}

	delete(key) {
		return deletePaths(this._rootKey, [[key]]);
	}

	deleteMultiple(keys) {
		return deletePaths(this._rootKey, keys.map(k => [k]));
	}

	has(key) {
		return storage_get(this._rootKey).then(val => val !== null && val[key] !== undefined);
	}

	clear() {
		return storage_delete_(this._rootKey);
	}
}

function wrapBlob(rootKey, defaultValue) {
	return new storage_BlobWrapper(rootKey, defaultValue);
}
// CONCATENATED MODULE: ./lib/environment/foreground/xhrCache.js




function xhrCache_set(key, value) {
	return sendMessage('XHRCache', ['set', key, value]);
}

function xhrCache_check(key, maxAge) {
	return sendMessage('XHRCache', ['check', key, maxAge]);
}

function xhrCache_delete_(key) {
	return sendMessage('XHRCache', ['delete', key]);
}


function xhrCache_clear() {
	return sendMessage('XHRCache', ['clear']);
}
// CONCATENATED MODULE: ./lib/environment/index.js





















// CONCATENATED MODULE: ./lib/utils/time.js


const MINUTE = 1000 * 60;
const HOUR = 60 * MINUTE;
const DAY = 24 * HOUR;
const WEEK = 7 * DAY;

function fromSecondsToTime(timeInSeconds) {
	const seconds = timeInSeconds % 60;
	const minutes = Math.floor(timeInSeconds / 60) % 60;
	const hours = Math.floor(timeInSeconds / 3600);

	const time = [minutes, seconds];
	if (hours > 0) {
		time.unshift(hours);
	}

	return time.map(part => String(part).padStart(2, '0')).join(':');
}
// EXTERNAL MODULE: ./node_modules/lodash/partition.js
var partition = __webpack_require__(91);
var partition_default = /*#__PURE__*/__webpack_require__.n(partition);

// CONCATENATED MODULE: ./lib/utils/location.js




function matchesPageLocation(includes, excludes = []) {
	const [includeStrings, includeRegExps] = partition_default()(includes, x => typeof x === 'string');
	const [excludeStrings, excludeRegExps] = partition_default()(excludes, x => typeof x === 'string');

	return (!excludes.length || !(isPageType(...excludeStrings) || isAppType(...excludeStrings) || matchesPageRegex(...excludeRegExps))) && (!includes.length || isPageType(...includeStrings) || isAppType(...includeStrings) || matchesPageRegex(...includeRegExps));
}

const regexes = {
	frontpage: /^\/(?:hot|new|rising|controversial|top)?(?:\/|$)/i,
	comments: /^\/(?:r\/([\w\.]+)\/|(u(?:ser)?\/[\w-]+)\/)?comments\/([a-z0-9]+)(?:\/|$)/i,
	commentsLinklist: /^\/(?:r\/[\w\.\+]+\/|u(?:ser)?\/[\w-]+\/)?comments\/?$/i,
	inbox: /^\/(?:r\/([\w\.]+)\/)?message(?:\/|$)/i,
	profile: /^\/user\/([\w\-]+)(?:\/(?:(?!m\/)(\w+)))?\/?$/i,
	profile2x: /^\/user\/([\w\-]+)(?:\/(?:(?!m\/)(\w+)))?\/?$/i,
	profileCommentsPage: /^\/user\/([\w\-]+)\/comments\/([a-z0-9]+)(?:\/|$)/i,
	submit: /^\/(?:r\/([\w\.\+]+)\/)?submit(?:\/|$)/i,
	prefs: /^\/prefs(?:\/|$)/i,
	account: /^\/account-activity(?:\/|$)/i,
	wiki: /^\/(?:r\/([\w\.]+)\/)?wiki(?:\/|$)/i,
	stylesheet: /^\/(?:r\/([\w\.]+)\/)about\/stylesheet(?:\/|$)/i,
	search: /^\/(?:r\/[\w\.\+]+\/|(?:me|user\/[\w\-]+)\/[mf]\/[\w\.\+]+\/|domain\/[^\/]+\/)?search(?:\/|$)/i,
	commentPermalink: /^\/(?:r\/([\w\.]+)\/)?comments\/([a-z0-9]+)\/[^\/]*\/([a-z0-9]+)(?:\/|$)/i,
	duplicates: /^\/r\/[\w\.\+]+\/duplicates\/([a-z0-9]+)/i,
	subreddit: /^\/r\/([\w\.\+]+)(?:\/|$)/i,
	subredditAbout: /^\/r\/([\w\.]+)\/about(?:\/(?!modqueue|reports|spam|unmoderated|edited)|$)/i,
	modqueue: /^\/r\/([\w\.\+]+)\/about\/(?:modqueue|reports|spam|unmoderated|edited)(?:\/|$)/i,
	multireddit: /^\/((?:me|user\/[\w\-]+)\/[mf]\/[\w\.\+]+)(?:\/|$)/i,
	domain: /^\/domain\/([\w\.]+)(?:\/|$)/i,
	composeMessage: /^\/(?:r\/([\w\.\+]+)\/)?message\/compose(?:\/|$)/i,
	liveThread: /^\/live\/(?!create(?:\/|$))([a-z0-9]+)(?:\/|$)/i
};


const execRegexes = {
	comments: path => {
		const match = regexes.comments.exec(path);
		if (!match) return match;
		match.splice(1, 2, match[1] || match[2] && match[2].replace(/^u.*\//, 'u_'));
		return match;
	}
};

const appType = once_default()(() => {
	if (document.documentElement.getAttribute('xmlns')) {
		return 'r2';
	}
	return 'd2x';
});

function isAppType(...types) {
	const thisApp = appType();
	return types.some(type => type === thisApp);
}

const appPageTypes = {
	r2: {
		default: 'linklist',
		pageTypes: ['wiki', 'search', 'stylesheet', 'modqueue', 'subredditAbout', 'comments', 'commentsLinklist', 'profile', 'liveThread', 'inbox', 'submit', 'account', 'prefs']
	},
	d2x: {
		pageTypes: ['profile2x', 'profileCommentsPage']
	}
};

const pageType = once_default()(() => {
	const spec = appPageTypes[appType()];
	return spec.pageTypes.find(pageType => regexes[pageType].test(location.pathname)) || spec.default;
});

function isPageType(...types) {
	const thisPage = pageType();
	return types.some(type => type === thisPage);
}

function matchesPageRegex(...regexps) {
	return regexps.some(regex => regex.test(location.pathname));
}

const currentSubreddit = once_default()(() => {
	const match = location.pathname.match(regexes.subreddit);
	if (match) return match[1];
});

function isCurrentSubreddit(...subreddits) {
	const sub = (currentSubreddit() || '').toLowerCase();
	if (!sub) return false;
	return subreddits.some(v => v.toLowerCase() === sub);
}

const currentMultireddit = once_default()(() => {
	const match = location.pathname.match(regexes.multireddit);
	if (match) return match[1];
});

function isCurrentMultireddit(...multireddits) {
	const multi = (currentMultireddit() || '').toLowerCase();
	if (!multi) return false;
	return multireddits.some(v => v.toLowerCase() === multi);
}

const currentDomain = once_default()(() => {
	const match = location.pathname.match(regexes.domain);
	if (match) return match[1];
});

const currentUserProfile = once_default()(() => {
	const match = location.pathname.match(regexes.profile);
	if (match) return match[1];
});

const fullLocation = once_default()(() => {
	const regex = Object.keys(regexes).find(key => location.pathname.match(regexes[key]));
	if (!regex) return location.pathname.toLowerCase();

	return [regex, ...(location.pathname.match(regexes[regex]) || []).slice(1)].filter(v => v).join('-').toLowerCase();
});

const COMMENT_CODE_REGEX = /^[\/#].+$/;

function isCommentCode(link) {
	const href = link.getAttribute('href');

	const emptyText = link.textContent.length === 0;
	const isCommentCode = COMMENT_CODE_REGEX.test(href);

	return emptyText && isCommentCode;
}

function isEmptyLink(link) {
	const href = link.getAttribute('href');
	return typeof href !== 'string' || href.startsWith('javascript:') || href === '#';
}
// EXTERNAL MODULE: ./node_modules/lodash/fp/flow.js
var flow = __webpack_require__(4);
var flow_default = /*#__PURE__*/__webpack_require__.n(flow);

// EXTERNAL MODULE: ./node_modules/lodash/zipWith.js
var zipWith = __webpack_require__(30);
var zipWith_default = /*#__PURE__*/__webpack_require__.n(zipWith);

// EXTERNAL MODULE: ./node_modules/fast-levenshtein/levenshtein.js
var levenshtein = __webpack_require__(278);
var levenshtein_default = /*#__PURE__*/__webpack_require__.n(levenshtein);

// CONCATENATED MODULE: ./lib/utils/flow.js


function downcast(val, ty) {
	return val;
}
// CONCATENATED MODULE: ./lib/utils/html.js


const escapeLookups = {
	'&': '&amp;',
	'"': '&quot;',
	'<': '&lt;',
	'>': '&gt;'
};

function escapeHTML(str) {
	return str ? str.toString().replace(/[&"<>]/g, m => escapeLookups[m]) : '';
}
// CONCATENATED MODULE: ./lib/utils/string.js








function stringTagFunction(valueTransform) {
	return (strings, ...values) => zipWith_default()(strings, values.map(valueTransform), (s, v) => `${s}${v === undefined ? '' : v}`).join('');
}

const encode = stringTagFunction(encodeURIComponent);

const string_escape = stringTagFunction(escapeHTML);

function safe(str) {
	return { __safe__: str };
}

const MAX_DISTANCE_RATIO = 0.05;

function areSimilar(a, b) {
	return levenshtein_default.a.get(a, b) <= MAX_DISTANCE_RATIO * Math.max(a.length, b.length);
}

const htmlTagFunction = stringTagFunction(x => {
	if (typeof x === 'number') return String(x);

	if (!x) return '';

	if (typeof x === 'string') return escapeHTML(x);

	if (Array.isArray(x)) return x.map(s => s.__safe__).join('');

	if (x.hasOwnProperty('__safe__')) return x.__safe__;
	throw new TypeError(`Invalid html template interpolation: ${String(x)}`);
});

const string_html = flow_default()(htmlTagFunction, markup => {
	const template = document.createElement('div');
	template.innerHTML = markup;
	if (template.childElementCount !== 1) {
		throw new Error(`Html template should have exactly one root node, but had ${template.childElementCount}`);
	}
	const child = downcast(template.firstElementChild, HTMLElement);
	child.remove();
	return child;
});

const _html = flow_default()(htmlTagFunction, safe);
// CONCATENATED MODULE: ./lib/utils/user.js








const isLoggedIn = once_default()(() => {
	if (loggedInUser()) {
		return true;
	} else if (!document.querySelector('#header a[href*="/login"]')) {
		return true;
	}
});

const loggedInUser = once_default()(() => documentLoggedInUser(document));

const documentLoggedInUser = document => {
	const link = document.querySelector('#header-bottom-right > span.user > a');
	if (!link || link.classList.contains('login-required')) return;
	const profile = regexes.profile.exec(link.pathname);
	if (profile) {
		return profile[1];
	}
};

const isModeratorAnywhere = once_default()(() => !!document.getElementById('modmail'));

const loggedInUserHash = once_default()(async () => {
	const hashEle = document.querySelector('[name=uh]');
	if (hashEle instanceof HTMLInputElement) {
		return hashEle.value;
	}

	const userInfo = await loggedInUserInfo();
	return userInfo && userInfo.data && userInfo.data.modhash;
});

const loggedInUserInfo = once_default()(() => !isLoggedIn() ? Promise.resolve() : fetch('/api/me.json', { credentials: 'include' }).then(r => r.json()).then(data => data.data && data.data.modhash ? data : undefined));

function getUserInfo(username = loggedInUser()) {
	if (!username) {
		return Promise.reject(new Error('getUserInfo: null/undefined username'));
	}

	return ajax({
		url: encode`/user/${username}/about.json`,
		type: 'json',
		cacheFor: 10 * MINUTE
	});
}
// CONCATENATED MODULE: ./lib/environment/foreground/ajax.js






class FetchError extends Error {

	constructor(url, status) {
		super(`${url} failed with status ${status}`);
		this.status = status;
	}
}

async function ajax(options) {
	const { method, url, headers, data, type, cacheFor, sameOrigin } = buildRequestParams(options);

	if (cacheFor) {
		const cached = await xhrCache_check(url, cacheFor);
		if (cached) {
			return processResponse(cached, type);
		}
	}

	if (sameOrigin) {
		if (method !== 'GET' && method !== 'HEAD') {
			const hash = await loggedInUserHash();
			if (hash) headers['X-Modhash'] = hash;
		}
	}

	const response = await (sameOrigin ? fetch(url, {
		method,
		headers,
		credentials: 'include',
		body: data
	}).then(async r => ({
		ok: r.ok,
		status: r.status,
		headers: fromPairs_default()(Array.from(r.headers.entries())),
		text: await r.text()
	})) : sendMessage('ajax', { method, url, headers, data }));

	if (!response.ok) {
		throw new FetchError(url, response.status);
	}

	if (cacheFor) {
		xhrCache_set(url, response);
	}

	return processResponse(response, type);
}


ajax.invalidate = options => xhrCache_delete_(buildRequestParams(options).url);

function buildRequestParams({ method = 'GET', url, query = {}, headers = {}, data, type = 'text', cacheFor = 0 }) {
	const urlObj = new URL(url, location.href);

	for (const [key, val] of Object.entries(query)) {
		urlObj.searchParams.set(key, String(val));
	}

	const sameOrigin = urlObj.hostname.includes(location.hostname.split('.').slice(-2).join('.'));
	if (sameOrigin) {
		urlObj.searchParams.set('app', 'res');
	}

	if (typeof data === 'object') {
		headers['Content-Type'] = 'application/x-www-form-urlencoded';

		data = new URLSearchParams(data).toString();
	}

	return {
		method,
		url: urlObj.href,
		headers,
		data,
		type,
		cacheFor,
		sameOrigin
	};
}

function processResponse(response, type) {
	switch (type) {
		case 'text':
			return response.text;
		case 'json':
			return JSON.parse(response.text);
		case 'raw':
			return response;
		default:
			throw new Error(`Invalid type: ${type}`);
	}
}
// CONCATENATED MODULE: ./node_modules/sibling-loader!./lib/environment/foreground/messaging.js
/* generated by sibling-loader */















/* harmony default export */ var messaging = ({ "ajax.js": ajax_namespaceObject, "auth.js": auth_namespaceObject, "download.js": download_namespaceObject, "history.js": history_namespaceObject, "i18n.js": i18n_namespaceObject, "id.js": id_namespaceObject, "messaging.js": foreground_messaging_namespaceObject, "multicast.js": multicast_namespaceObject, "pageAction.js": pageAction_namespaceObject, "permissions.js": permissions_namespaceObject, "privateBrowsing.js": privateBrowsing_namespaceObject, "session.js": session_namespaceObject, "storage.js": storage_namespaceObject, "tabs.js": tabs_namespaceObject, "xhrCache.js": xhrCache_namespaceObject });
// CONCATENATED MODULE: ./lib/constants/sessionStorage.js


const RES_DISABLED_KEY = 'RES.disabled';
const LAST_SELECTED_ENTRY_KEY = 'RES.lastSelectedEntry';
// CONCATENATED MODULE: ./lib/utils/Cache.js


class LRUCache {

	constructor(capacity) {
		this.map = new Map();
		this.capacity = capacity;
	}

	get(key, maxAge = Infinity) {
		const now = Date.now();
		const entry = this.map.get(key);
		if (entry && now - entry.createTime < maxAge) {
			entry.hitTime = now;
			return entry.value;
		}
	}

	set(key, value) {
		const now = Date.now();
		this.map.set(key, { value, createTime: now, hitTime: now });

		if (this.map.size > this.capacity) {
			Array.from(this.map.entries()).sort(([, a], [, b]) => b.hitTime - a.hitTime).slice(this.capacity / 2 | 0).forEach(([key]) => this.map.delete(key));
		}

		return this;
	}

	delete(key) {
		return this.map.delete(key);
	}

	clear() {
		this.map.clear();
	}
}
// EXTERNAL MODULE: ./node_modules/lodash/last.js
var lodash_last = __webpack_require__(8);
var last_default = /*#__PURE__*/__webpack_require__.n(lodash_last);

// CONCATENATED MODULE: ./lib/utils/array.js




async function forEachSeq(iterable, callback) {
	for (const val of iterable) {
		await callback(val);
	}
}

async function asyncFilter(array, predicate) {
	const shouldKeep = await Promise.all(array.map(predicate));
	return array.filter((e, i) => shouldKeep[i]);
}

async function asyncReduce(iterable, callback, initialValue) {
	let accumulator = initialValue;

	for (const val of iterable) {
		accumulator = await callback(accumulator, val);
	}

	return accumulator;
}

const asyncFind = fastAsync(function* asyncFind(iterable, predicate) {
	for (const val of iterable) {
		if (yield predicate(val)) return val;
	}
});

function concurrentFold(array, reduce, initialValue, baseCase) {
	if (!array.length) return Promise.resolve(initialValue);

	return new Promise((resolve, reject) => {
		let remaining = array.length;
		let accum = initialValue;

		function onResolve(x) {
			if (remaining === 0) return;

			accum = reduce(accum, x);

			if (accum === baseCase || --remaining === 0) {
				remaining = 0;
				resolve(accum);
			}
		}

		function onReject(err) {
			if (remaining === 0) return;

			remaining = 0;
			reject(err);
		}

		array.forEach(promise => promise.then(onResolve, onReject));
	});
}

function asyncSome(array, predicate) {
	return concurrentFold(array.map(predicate), (a, b) => a || !!b, false, true);
}

function asyncEvery(array, predicate) {
	return concurrentFold(array.map(predicate), (a, b) => a && !!b, true, false);
}

const filterMap = curryRight_default()((iterable, callback) => {
	const mapped = [];
	for (const x of iterable) {
		const result = callback(x);
		if (result) mapped.push(result[0]);
	}
	return mapped;
});
// CONCATENATED MODULE: ./lib/utils/Thing.js








const elementMap = new WeakMap();
const Thing_things = new Set();
const SECRET_TOKEN = new class {}();

class Thing_Thing {

	static thingsContainer(body = document.body) {
		return body.querySelector('.sitetable') || last_default()(Array.from(body.querySelectorAll('.search-result-listing')));
	}

	static findThings(container = Thing_Thing.thingsContainer()) {
		const potentialThings = [...(container.matches(Thing_Thing.thingSelector) ? [container] : []), ...container.querySelectorAll(Thing_Thing.thingSelector)];
		return filterMap(potentialThings, ele => {
			const thing = Thing_Thing.from(ele);
			if (thing) return [thing];
		});
	}

	static thingElements() {
		return Array.from(document.querySelectorAll(Thing_Thing.bodyThingSelector));
	}

	static things() {
		return Thing_Thing.thingElements().map(e => Thing_Thing.checkedFrom(e));
	}

	static visibleThingElements() {
		return Thing_Thing.thingElements().filter(v => v.offsetParent);
	}

	static visibleThings() {
		return filterMap(Thing_Thing.visibleThingElements(), ele => {
			const thing = Thing_Thing.from(ele);
			if (thing) return [thing];
		});
	}

	static checkedFrom(element) {
		const thing = Thing_Thing.from(element);
		if (!thing) {
			throw new Error(`Could not construct Thing from ${String(element)}`);
		}
		return thing;
	}

	static from(element) {
		if (!element) return null;

		if (element instanceof Thing_Thing) return element;

		const thingElement = element.closest(Thing_Thing.thingSelector);
		if (!thingElement) return null;

		if (elementMap.has(thingElement)) return elementMap.get(thingElement);

		const entry = thingElement.querySelector(Thing_Thing.entrySelector) || thingElement;
		const thing = new Thing_Thing(SECRET_TOKEN, downcast(thingElement, HTMLElement), entry);

		elementMap.set(thingElement, thing);
		Thing_things.add(thing);

		return thing;
	}

	constructor(token, thing, entry) {
		this.children = new Set();
		this.refreshChildFilterVisibility = frameThrottleQueuePositionReset(() => {
			this.element.classList.toggle('res-thing-has-visible-child', Array.from(this.children).some(v => v.isVisible()));
		});
		this.getSubreddit = once_default()(function () {
			const data = this.element.getAttribute('data-subreddit');
			if (data) {
				return data;
			}
			const element = this.getSubredditLink();
			if (element) {
				const match = regexes.subreddit.exec(element.pathname);
				if (match) {
					return match[1];
				}
			} else {
				return currentSubreddit();
			}
		});

		if (token !== SECRET_TOKEN) {
			throw new Error('Use Thing.from() or Thing.checkedFrom() instead of new Thing()');
		}

		this.element = thing;
		this.entry = entry;

		this.parent = this.getParent();
		if (this.parent && this.isComment()) {
			this.parent.children.add(this);
		}
	}

	setFilter(filter) {
		this.filter = filter;
		this.element.classList.toggle('RESFiltered', !!filter);

		if (this.children.size) this.refreshChildFilterVisibility();
		for (const p of this.getParents()) p.refreshChildFilterVisibility();
	}

	getThreadTop() {
		let thing = this;

		let current = this.element;
		while (current = current.parentElement) {
			if (current.matches(Thing_Thing.thingSelector)) thing = downcast(current, HTMLElement);
		}

		return Thing_Thing.checkedFrom(thing);
	}

	getParent() {
		let current = this.element;
		while (current = current.parentElement) {
			if (current.classList.contains('thing')) return Thing_Thing.checkedFrom(downcast(current, HTMLElement));
		}
	}

	getParents() {
		const parents = [];
		let level = this;
		while (level = level.parent) parents.push(level);
		return parents;
	}

	getNext({ direction = 'down' } = {}, things = Thing_Thing.thingElements()) {
		let index = things.indexOf(this.element);
		let target;

		do {
			index += direction === 'down' ? 1 : -1;
			target = things[index];
			if (!target) return null;
		} while (!target.offsetParent);

		return Thing_Thing.from(target);
	}

	getNextSibling(options) {
		if (!this.element.parentElement) return null;

		const things = Array.from(this.element.parentElement.children).filter(e => e.matches(Thing_Thing.thingSelector));

		return this.getNext(options, things);
	}

	getClosest(func, ...args) {
		const target = Reflect.apply(func, this, args);
		if (target) {
			return target;
		} else {
			const parent = this.getParent();
			if (parent) return parent.getClosest(func, ...args);
		}
	}

	getClosestVisible(includeSelf = true) {
		if (includeSelf && this.isVisible()) return this;
		return this.getNext({ direction: 'down' }) || this.getNext({ direction: 'up' });
	}

	isMessage() {
		return this.element.classList.contains('message');
	}

	isSubreddit() {
		return this.element.classList.contains('subreddit');
	}

	isPost() {
		return this.element.classList.contains('link') || this.element.classList.contains('search-result-link');
	}

	isLinkPost() {
		if (!this.isPost()) {
			return false;
		}
		if (this.element.classList.contains('search-result-link')) {
			return !this.element.querySelector('a').classList.contains('self');
		} else {
			return !this.element.classList.contains('self');
		}
	}

	isSelfPost() {
		if (!this.isPost()) {
			return false;
		}
		if (this.element.classList.contains('search-result-link')) {
			return this.element.querySelector('a').classList.contains('self');
		} else {
			return this.element.classList.contains('self');
		}
	}

	isComment() {
		return this.element.classList.contains('comment') || this.element.classList.contains('was-comment');
	}

	isTopLevelComment() {
		return this.isComment() && !!this.element.parentElement && this.element.parentElement.classList.contains('nestedlisting');
	}

	getTitle() {
		const element = this.getTitleElement();
		return element && element.textContent || '';
	}

	getTitleElement() {
		return this.entry.querySelector('a.title, a.search-title') || this.entry.querySelector('.title');
	}

	getTitleUrl() {
		const element = this.getTitleElement();
		if (element) {
			return element.href;
		}
		return '';
	}

	getPostLink() {
		return downcast(this.entry.querySelector('a.title, a.search-link'), HTMLAnchorElement);
	}

	getPostUrl() {
		return this.element.dataset.url || this.getPostLink().href;
	}

	getCommentsLink() {
		return downcast(this.entry.querySelector('a.comments, a.search-comments'), HTMLAnchorElement);
	}

	getCommentPermalink() {
		return this.entry.querySelector('a.bylink');
	}

	getHideElement() {
		return this.entry.querySelector('.hide-button a, .unhide-button a');
	}

	getNumberOfChildren() {
		const numChildrenElem = this.element.querySelector('.numchildren');
		return numChildrenElem && parseInt(/(\d+)/.exec(numChildrenElem.textContent)[1], 10) || 0;
	}

	static _parseScore(scoreEle) {
		return parseInt(scoreEle.title || scoreEle.textContent, 10) || 0;
	}

	getScore() {
		const element = this._getActiveScoreElement();

		return element && Thing_Thing._parseScore(element);
	}

	_getActiveScoreElement() {
		if (this.isPost()) {
			return this.element.querySelector(['.midcol.unvoted > .score.unvoted', '.midcol.likes > .score.likes', '.midcol.dislikes > .score.dislikes', '.search-score'].join(', '));
		} else {
			return this.entry.querySelector('.tagline > .score');
		}
	}

	getAllScoreElements() {
		const toScoreTuple = ele => [ele, Thing_Thing._parseScore(ele)];
		if (this.isPost()) {
			return Array.from(this.element.querySelectorAll('.midcol > .score, .search-score')).map(toScoreTuple);
		} else {
			return Array.from(this.entry.querySelectorAll('.tagline > .score')).map(toScoreTuple);
		}
	}

	getAuthor() {
		const data = this.element.getAttribute('data-author');
		if (data) {
			return data;
		}
		const element = this.getAuthorElement();
		return element && regexes.profile.exec(element.pathname)[1];
	}

	getAuthorUrl() {
		const author = this.getAuthor();
		if (author) {
			return `/user/${author}/`;
		}
		return '';
	}

	getAuthorElement() {
		return this.entry.querySelector('.tagline a.author, .search-author .author');
	}

	getSubredditLink() {
		if (this.isPost()) {
			return this.entry.querySelector('.tagline a.subreddit, a.search-subreddit-link');
		} else if (this.isComment()) {
			return this.entry.querySelector('.parent a.subreddit, .tagline .subreddit a');
		}
	}

	getPostDomain() {
		const data = this.element.getAttribute('data-domain');
		if (data) {
			return data;
		}

		const element = this.getPostDomainLink();
		if (element) {
			return element.textContent;
		}

		const text = this.getPostDomainText();
		if (text) {
			return text;
		}

		const subreddit = this.getSubreddit();
		if (subreddit) {
			return `self.${subreddit}`;
		}

		return 'reddit.com';
	}

	getPostDomainUrl() {
		const link = this.getPostDomainLink();
		if (link) {
			return link.href;
		}
		return `/domain/${this.getPostDomain()}/`;
	}

	getPostDomainLink() {
		return this.element.querySelector('.domain a');
	}

	getPostDomainText() {
		const data = this.element.getAttribute('data-domain');
		if (data) {
			return data;
		}

		const element = this.element.querySelector('.domain');
		if (!element) return '';
		const text = element.textContent || '';
		return text.replace(/[\(\)\s]/g, '');
	}

	getCommentCount() {
		const element = this.getCommentCountElement();
		return element && parseInt(/\d+/.exec(element.textContent || element.getAttribute('data-text')), 10) || 0;
	}

	getCommentCountElement() {
		if (this.isPost()) {
			return this.element.querySelector('.buttons .comments');
		} else if (this.isComment()) {
			return this.element.querySelector('.buttons a.full-comments');
		}
	}

	getPostThumbnailUrl() {
		const thumbnail = this.getPostThumbnailElement();
		if (!thumbnail) return '';
		return thumbnail.src || '';
	}

	getPostThumbnailElement() {
		return this.element.querySelector('.thumbnail img');
	}

	getPostFlairText() {
		const element = this.getPostFlairElement();
		return element && element.textContent || '';
	}

	getPostFlairElement() {
		return this.entry.querySelector('.title > .linkflairlabel');
	}

	getUserFlairText() {
		const element = this.getUserFlairElement();
		return element && element.textContent || '';
	}

	getUserFlairElement() {
		return this.entry.querySelector('.tagline > .flair');
	}

	getCrosspostBadgeElement() {
		return this.entry.querySelector('.crosspost-badge');
	}

	getUpvoteButton() {
		return this._getVoteButton('div.up, div.upmod');
	}

	getDownvoteButton() {
		return this._getVoteButton('div.down, div.downmod');
	}

	_getVoteButton(selector) {
		const previousSibling = this.entry.previousSibling;
		if (previousSibling.tagName === 'A') {
			return previousSibling.previousSibling.querySelector(selector);
		} else {
			return previousSibling.querySelector(selector);
		}
	}

	getTimestamp() {
		const element = this.getTimestampElement();
		return element && new Date(element.getAttribute('datetime'));
	}

	getTimestampElement() {
		return this.entry.querySelector('time');
	}

	getPostEditTimestamp() {
		const element = this.getPostEditTimestampElement();
		return element && Date.parse(element.getAttribute('datetime')) / 1000 || 0;
	}

	getPostEditTimestampElement() {
		return this.entry.querySelector('time.edited-timestamp');
	}

	getFullname() {
		return this.element.getAttribute('data-fullname') || '';
	}

	getUserattrsElement() {
		return this.entry.querySelector('.userattrs');
	}

	getRank() {
		const rank = parseInt(this.element.getAttribute('data-rank'), 10);
		if (!isNaN(rank)) return rank;
	}

	getRankElement() {
		if (!this.isPost()) return;
		return this.element.querySelector('.rank');
	}

	getTaglineElement() {
		return this.entry.querySelector('.tagline');
	}

	getCommentToggleElement() {
		return this.entry.querySelector('.expand');
	}

	getPostTime() {
		const element = this.getPostTimeElement();
		if (element) {
			return element.textContent;
		}
		return '';
	}

	getPostTimeElement() {
		return this.entry.querySelector('.tagline time');
	}

	isNSFW() {
		if (this.element.classList.contains('search-result')) {
			return !!this.entry.querySelector('.nsfw-stamp');
		}
		return this.element.classList.contains('over18');
	}

	isSpoiler() {
		if (this.element.classList.contains('search-result')) {
			return !!this.entry.querySelector('.spoiler-stamp');
		}
		return this.element.classList.contains('spoiler');
	}

	isCrosspost() {
		return !!this.getCrosspostBadgeElement();
	}

	isLocked() {
		if (this.element.classList.contains('search-result')) {
			return this.element.classList.contains('linkflair-locked');
		}
		return this.element.classList.contains('locked');
	}

	isDeleted() {
		return this.element.classList.contains('deleted');
	}

	isFiltered(alsoPartially = true) {
		return !document.body.classList.contains('res-filters-disabled') && this.element.classList.contains('RESFiltered') && !(alsoPartially && this.element.classList.contains('res-thing-has-visible-child'));
	}

	isCollapsed() {
		return this.element.classList.contains('collapsed');
	}

	isInCollapsed() {
		const parent_ = this.getParent();
		return !!(parent_ && parent_.getClosest(function () {
			return this.isCollapsed() || this.element.classList.contains('res-children-hidden');
		}));
	}

	isVisible() {
		return !(this.isFiltered() || this.isInCollapsed());
	}

	isContentVisible() {
		return !(this.isFiltered(false) || this.isCollapsed() || this.isInCollapsed());
	}

	isSelected() {
		return this.element.classList.contains('res-selected');
	}

	isUpvoted() {
		return this.entry.classList.contains('likes');
	}

	isDownvoted() {
		return this.entry.classList.contains('dislikes');
	}

	isUnvoted() {
		return this.entry.classList.contains('unvoted');
	}
}
Thing_Thing.bodyThingSelector = '.listing .thing, .linklisting .thing, .nestedlisting .thing, .search-result-link';
Thing_Thing.thingSelector = '.thing, .search-result-link';
Thing_Thing.entrySelector = '.entry, .search-result-link > :not(.thumbnail)';
// CONCATENATED MODULE: ./lib/utils/thingMetadata.js






const getPostMetadata = batch(async requests => {
	const byId = requests.map(r => r.id).map(id => `t3_${id}`).join(',');

	const { data: { children } } = await ajax({
		url: `/by_id/${byId}.json`,
		query: { limit: 100, raw_json: 1 },
		type: 'json'
	});

	return children.map(c => c.data);
}, { size: 100 });
// EXTERNAL MODULE: ./node_modules/tinycolor2/tinycolor.js
var tinycolor = __webpack_require__(90);
var tinycolor_default = /*#__PURE__*/__webpack_require__.n(tinycolor);

// CONCATENATED MODULE: ./lib/utils/color.js




function colorToArray(colorString) {
	const { r, g, b } = tinycolor_default()(colorString).toRgb();
	return [r, g, b];
}

function colorFromArray([r, g, b]) {
	return tinycolor_default()({ r, g, b }).toHexString();
}
// EXTERNAL MODULE: ./node_modules/lodash/assignIn.js
var assignIn = __webpack_require__(277);
var assignIn_default = /*#__PURE__*/__webpack_require__.n(assignIn);

// EXTERNAL MODULE: ./node_modules/lodash/pick.js
var pick = __webpack_require__(276);
var pick_default = /*#__PURE__*/__webpack_require__.n(pick);

// EXTERNAL MODULE: ./node_modules/jquery/dist/jquery.js
var dist_jquery = __webpack_require__(275);
var jquery_default = /*#__PURE__*/__webpack_require__.n(dist_jquery);

// CONCATENATED MODULE: ./lib/vendor/jquery.js




const $ = jquery_default.a;

window.$ = window.jQuery = $;
// EXTERNAL MODULE: ./node_modules/jquery-sortable/source/js/jquery-sortable.js
var jquery_sortable = __webpack_require__(336);

// EXTERNAL MODULE: ./node_modules/jquery.tokeninput/build/jquery.tokeninput.min.js
var jquery_tokeninput_min = __webpack_require__(335);

// EXTERNAL MODULE: ./lib/vendor/jquery.edgescroll-0.1.js
var jquery_edgescroll_0_1 = __webpack_require__(334);

// EXTERNAL MODULE: ./lib/vendor/guiders.js
var guiders = __webpack_require__(333);

// EXTERNAL MODULE: ./lib/vendor/HTMLPasteurizer.js
var HTMLPasteurizer = __webpack_require__(274);

// CONCATENATED MODULE: ./lib/vendor/jqueryPlugins.js










const jqueryPlugins_guiders = $.guiders;



$.fn.safeHtml = function (string) {
  return $(this).html(HTMLPasteurizer["Pasteurizer"].safeParseHTML(string || '').wrapAll('<div></div>').parent().html() || '');
};
// CONCATENATED MODULE: ./lib/vendor/index.js





// CONCATENATED MODULE: ./lib/utils/dom.js







function waitForEvent(ele, ...events) {
	return Promise.race(events.map(event => new Promise(resolve => ele.addEventListener(event, function fire() {
		ele.removeEventListener(event, fire);
		resolve();
	}))));
}

function waitForChild(ele, selector) {
	return new Promise(resolve => {
		const child = Array.from(ele.children).find(child => child.matches(selector));
		if (child) {
			resolve(child);
			return;
		}

		const observer = new MutationObserver(mutations => {
			for (const mutation of mutations) {
				for (const node of mutation.addedNodes) {
					if (node.nodeType === Node.ELEMENT_NODE && node.matches(selector)) {
						observer.disconnect();
						resolve(downcast(node, HTMLElement));
						return;
					}
				}
			}
		});
		observer.observe(ele, { childList: true });
	});
}

function watchForChildren(ele, selector, callback) {
	for (const child of Array.from(ele.children).filter(child => child.matches(selector))) {
		callback(child);
	}

	watchForFutureChildren(ele, selector, callback);
}

function watchForFutureChildren(ele, selector, callback) {
	new MutationObserver(mutations => {
		for (const mutation of mutations) {
			for (const node of mutation.addedNodes) {
				if (node.nodeType === Node.ELEMENT_NODE && node.matches(selector)) {
					callback(downcast(node, HTMLElement));
				}
			}
		}
	}).observe(ele, { childList: true });
}

function waitForDescendant(ele, selector) {
	return new Promise(resolve => {
		const child = ele.querySelector(selector);
		if (child) {
			resolve(child);
			return;
		}

		const observer = new MutationObserver(mutations => {
			for (const mutation of mutations) {
				for (const node of mutation.addedNodes) {
					if (node.nodeType === Node.ELEMENT_NODE) {
						const child = ele.querySelector(selector);
						if (child) {
							observer.disconnect();
							resolve(child);
						}

						return;
					}
				}
			}
		});
		observer.observe(ele, { childList: true, subtree: true });
	});
}

function watchForDescendants(ele, selector, callback) {
	for (const child of ele.querySelectorAll(selector)) {
		callback(child);
	}

	watchForFutureDescendants(ele, selector, callback);
}

function watchForFutureDescendants(ele, selector, callback) {
	new MutationObserver(mutations => {
		const children = new Set();
		for (const mutation of mutations) {
			for (const node of mutation.addedNodes) {
				if (node.nodeType === Node.ELEMENT_NODE) {
					if (node.matches(selector)) {
						children.add(node);
					}

					for (const child of node.querySelectorAll(selector)) {
						children.add(child);
					}
				}
			}
		}
		for (const child of children) {
			callback(downcast(child, HTMLElement));
		}
	}).observe(ele, { childList: true, subtree: true });
}

function empty(parent) {
	while (parent.lastChild) parent.removeChild(parent.lastChild);
	return parent;
}

function click(obj, button = 0) {
	obj.dispatchEvent(new MouseEvent('click', {
		bubbles: true,
		cancelable: true,
		detail: 0,
		screenX: 1,
		screenY: 1,
		clientX: 1,
		clientY: 1,
		button
	}));
}

click.isProgrammaticEvent = e => e.clientX === 1 && e.clientY === 1;

const getViewportSize = memoize_default()(() => {
	waitForEvent(window, 'resize').then(() => {
		getViewportSize.cache.clear();
	});

	let visualViewport;

	if (window.visualViewport) {
		visualViewport = window.visualViewport;
	} else {
		const viewportSizedElement = document.createElement('div');
		viewportSizedElement.style.width = viewportSizedElement.style.height = '100%';
		viewportSizedElement.style.position = 'fixed';
		document.body.appendChild(viewportSizedElement);
		visualViewport = viewportSizedElement.getBoundingClientRect();
		viewportSizedElement.remove();
	}

	return pick_default()(visualViewport, ['height', 'width']);
});

function elementInViewport(ele) {
	if (!ele || !ele.offsetParent) return false;

	const { top, left, bottom, right } = ele.getBoundingClientRect();

	return top >= 0 && left >= 0 && bottom <= getViewportSize().height && right <= getViewportSize().width;
}

function getViewportDimensions() {
	const headerOffset = getHeaderOffset();
	const left = window.pageXOffset;
	const top = window.pageYOffset + headerOffset;
	const width = getViewportSize().width;
	const height = getViewportSize().height - headerOffset;

	return {
		yOffset: headerOffset,
		left,
		top,
		bottom: top + height,
		right: left + width,
		width,
		height
	};
}

function getPercentageVisibleYAxis(obj) {
	const rect = obj.getBoundingClientRect();
	const top = Math.max(0, rect.bottom - rect.height);
	const bottom = Math.min(getViewportSize().height, rect.bottom);
	if (rect.height === 0) {
		return 0;
	}
	return Math.max(0, (bottom - top) / rect.height);
}

let $bottomPaddingElement;

function padBottom(scrollTop, viewportHeight) {
	const currentPadding = $bottomPaddingElement ? $bottomPaddingElement.height() : 0;
	const extraPadding = 50;
	const paddingRequired = extraPadding + -(document.documentElement.scrollHeight - scrollTop - viewportHeight - currentPadding);
	if (paddingRequired > 0) {
		if (!$bottomPaddingElement) {
			$bottomPaddingElement = $('<div style="clear: both">').appendTo(document.body);
		}

		$bottomPaddingElement.height(paddingRequired).show();
	} else if ($bottomPaddingElement) {
		$bottomPaddingElement.hide();
	}
}

function scrollToElement(to, from, { scrollStyle, direction: selectedDirection, anchor }) {
	if (scrollStyle === 'none') {
		if (anchor && typeof anchor.to === 'number') {
			const diff = to.getBoundingClientRect().top - anchor.to;
			if (diff) window.scrollBy(0, diff);
		}
		return;
	}

	const viewport = getViewportDimensions();

	const target = assignIn_default()({}, to.getBoundingClientRect());
	target.top -= viewport.yOffset;
	target.bottom -= viewport.yOffset;

	const top = viewport.top + target.top - 5;

	if (scrollStyle === 'middle' && target.height >= viewport.height) {
		scrollStyle = 'top';
	}

	if (scrollStyle === 'top') {
		padBottom(top, viewport.height);
		scrollTo(0, top);
	} else if (from && scrollStyle === 'adopt') {
		const fromTop = anchor && typeof anchor.from === 'number' ? anchor.from : from.getBoundingClientRect().top;
		let diff = to.getBoundingClientRect().top - fromTop;

		if (fromTop < 0) {
			diff += fromTop;
		} else if (fromTop > viewport.height - 60) {
			diff += fromTop - viewport.height + 60;
		}

		scrollTo(0, window.scrollY + diff, false);
	} else if (scrollStyle === 'middle') {
		const buffer = (viewport.height - target.height) / 2;
		const newScrollY = top - buffer;

		if (elementInViewport(to)) {
			const viewportDirection = newScrollY >= window.scrollY ? 'down' : 'up';

			if (viewportDirection !== selectedDirection) return;
		}

		scrollTo(0, newScrollY);
	} else if (target.top >= 0 && target.bottom <= viewport.height) {} else if (scrollStyle === 'legacy') {
		scrollTo(0, top);
	} else if (target.top < viewport.yOffset) {
		scrollTo(0, top);
	} else if (viewport.height < target.bottom && target.height < viewport.height) {
		if (scrollStyle === 'page') {
			scrollTo(0, top);
		} else {
			scrollTo(0, viewport.top + target.bottom - viewport.height);
		}
	} else {
		scrollTo(0, top);
	}
}

let recentScroll = false;

function scrollTo(x, y, compensateHeader = true) {
	recentScroll = true;
	waitForEvent(window, 'scroll').then(() => {
		recentScroll = false;
	});

	const headerOffset = compensateHeader ? getHeaderOffset() : 0;
	window.scrollTo(x, y - headerOffset);
}

scrollTo.isProgrammaticEvent = () => recentScroll;

const dom_headerIds = { fullWidth: [], partialWidth: [] };

function _addHeaderId(elementId, partialWidth = false) {
	dom_headerIds[partialWidth ? 'partialWidth' : 'fullWidth'].push(elementId);
}

const getHeaderOffset = memoize_default()((includePartialWidthHeaders = false) => {
	const headers = [...dom_headerIds.fullWidth, ...(includePartialWidthHeaders ? dom_headerIds.partialWidth : [])];

	return headers.map(id => document.getElementById(id)).reduce((a, b) => a + b.getBoundingClientRect().height, 0);
});

const getD2xBodyOffset = memoize_default()(() => {
	try {
		return document.getElementById('2x-container').offsetTop;
	} catch (e) {
		return 65;
	}
});

function addCSS(css) {
	let style = addStyle(css);
	return {
		remove() {
			if (!style) return;
			style.remove();
			style.textContent = '';
			style = undefined;
		}
	};
}

function addStyle(css) {
	const style = document.createElement('style');
	style.textContent = css;

	(document.head || document.documentElement).appendChild(style);

	return style;
}
// CONCATENATED MODULE: ./lib/utils/hash.js




const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
function randomHash(len = 5) {
	const arr = new Array(len);
	for (const i of range(0, len)) {
		arr[i] = chars.charAt(Math.random() * chars.length | 0);
	}
	return arr.join('');
}

function hashCode(str) {
	let hash = 0;
	for (const char of str) {
		hash = (hash << 5) - hash + char.charCodeAt(0) | 0;
	}
	return hash;
}
// CONCATENATED MODULE: ./lib/utils/thingHide.js






const hideEndpoint = '/api/hide';
const unhideEndpoint = '/api/unhide';
const [HIDE, UNHIDE] = [false, true];

const send = (state, things) => {
	function setState(newState) {
		for (const thing of things) {
			const hideElement = thing.getHideElement();
			if (hideElement) {
				hideElement.textContent = newState === HIDE ? 'unhide' : 'hide';
				hideElement.setAttribute('action', newState === HIDE ? 'unhide' : 'hide');
			}
		}
	}

	for (const thing of things) {
		const hideElement = thing.getHideElement();
		if (hideElement) hideElement.textContent = state === HIDE ? 'hiding' : 'unhiding';
	}

	const fullnames = things.map(thing => thing.getFullname());

	return ajax({
		method: 'POST',
		url: state === HIDE ? hideEndpoint : unhideEndpoint,
		data: { id: fullnames.join(',') }
	}).then(() => {
		setState(HIDE);
	}, () => {
		setState(UNHIDE);
	});
};

const thingHide_hide = batch(things => send(HIDE, things), { size: 50 });
const unhide = batch(things => send(UNHIDE, things), { size: 50 });
// CONCATENATED MODULE: ./lib/utils/keycode.js




const NAMED_KEYS = {
	Backspace: 'Backspace',
	Tab: 'Tab',
	Enter: 'Enter',
	Escape: 'Escape',
	Space: ' ',
	PageUp: 'PageUp',
	PageDown: 'PageDown',
	End: 'End',
	Home: 'Home',
	Left: 'ArrowLeft',
	Up: 'ArrowUp',
	Right: 'ArrowRight',
	Down: 'ArrowDown',
	Shift: 'Shift',
	Control: 'Control',
	Alt: 'Alt'
};

const keyCodes = {
	'-1': 'none',
	'8': 'backspace',
	'9': 'tab',
	'13': 'enter',
	'16': 'shift',
	'17': 'ctrl',
	'18': 'alt',
	'19': 'pause/break',
	'20': 'caps lock',
	'27': 'escape',
	'33': 'page up',
	'34': 'page down',
	'35': 'end',
	'36': 'home',
	'37': 'left arrow',
	'38': 'up arrow',
	'39': 'right arrow',
	'40': 'down arrow',
	'45': 'insert',
	'46': 'delete',
	'91': 'left window',
	'92': 'right window',
	'93': 'select key',
	'96': 'numpad 0',
	'97': 'numpad 1',
	'98': 'numpad 2',
	'99': 'numpad 3',
	'100': 'numpad 4',
	'101': 'numpad 5',
	'102': 'numpad 6',
	'103': 'numpad 7',
	'104': 'numpad 8',
	'105': 'numpad 9',
	'106': 'multiply',
	'107': 'add',
	'109': 'subtract',
	'110': 'decimal point',
	'111': 'divide',
	'112': 'F1',
	'113': 'F2',
	'114': 'F3',
	'115': 'F4',
	'116': 'F5',
	'117': 'F6',
	'118': 'F7',
	'119': 'F8',
	'120': 'F9',
	'121': 'F10',
	'122': 'F11',
	'123': 'F12',
	'144': 'num lock',
	'145': 'scroll lock',
	'186': ';',
	'187': '=',
	'188': ',',
	'189': '-',
	'190': '.',
	'191': '/',
	'192': '`',
	'219': '[',
	'220': '\\',
	'221': ']',
	'222': '\''
};


function keycode_niceKeyCode(keyArray) {
	if (!keyArray && isNaN(keyArray)) {
		return '';
	}

	if (typeof keyArray === 'number') {
		keyArray = [keyArray, false, false, false, false];
	} else if (typeof keyArray === 'string') {
		const split = keyArray.split(',');
		const code = parseInt(split[0], 10);

		const modifiers = [...split.slice(1).map(s => s === 'true'), false, false, false, false];
		const [alt, ctrl, shift, meta] = modifiers;
		keyArray = [code, alt, ctrl, shift, meta];
	}

	const [keyCode, ...modifiers] = keyArray;

	const keyCombo = zipWith_default()(modifiers, ['alt-', 'ctrl-', 'shift-', 'command-'], (predicate, name) => predicate && name).filter(x => x).join('');

	const keyName = keyCodes[keyCode] || String.fromCharCode(keyCode);

	return `${keyCombo}${keyName}`;
}

function checkKeysForEvent(event, keyArray) {
	if (typeof keyArray === 'number') {
		keyArray = [keyArray, false, false, false, false];
	} else if (keyArray.length === 4) {
		keyArray.push(false);
	}

	const eventHash = hashKeyEvent(event);
	const arrayHash = hashKeyArray(keyArray);
	return eventHash === arrayHash;
}

function hashKeyEvent(event) {
	const keyArray = [event.keyCode, event.altKey, event.ctrlKey, event.shiftKey, event.metaKey];

	return hashKeyArray(keyArray);
}

function hashKeyArray(keyArray) {
	const length = 5;
	let hash = keyArray[0] * Math.pow(2, length);
	for (const i of range(1, length)) {
		if (keyArray[i]) {
			hash += 2 ** i;
		}
	}
	return hash;
}
// CONCATENATED MODULE: ./lib/utils/math.js


function numericalCompare(op, a, b) {
	switch (op) {
		case '==':
			return a == b;
		case '!=':
			return a != b;
		case '>':
			return a > b;
		case '<':
			return a < b;
		case '>=':
			return a >= b;
		case '<=':
			return a <= b;
		default:
			throw new Error(`Unhandled operator ${op}`);
	}
}

function inverseOperator(op) {
	switch (op) {
		case '==':
			return '!=';
		case '!=':
			return '==';
		case '>':
			return '<=';
		case '<':
			return '>=';
		case '>=':
			return '<';
		case '<=':
			return '>';
		default:
			throw new Error(`Unhandled operator ${op}`);
	}
}

function prettyOperator(op) {
	switch (op) {
		case '==':
			return '=';
		case '!=':
			return '';
		case '>':
			return '>';
		case '<':
			return '<';
		case '>=':
			return '';
		case '<=':
			return '';
		default:
			throw new Error(`Unhandled operator ${op}`);
	}
}

function interpolate(low, high, frac) {
	return (1 - frac) * low + frac * high;
}

function deinterpolate(low, high, value) {
	if (low === -Infinity && high === Infinity) {
		return 0.5;
	} else if (low === -Infinity) {
		return 1;
	} else if (high === Infinity) {
		return 0;
	}
	return (value - low) / (high - low);
}

function projectInto(fromLow, fromHigh, toLow, toHigh, value) {
	return interpolate(toLow, toHigh, deinterpolate(fromLow, fromHigh, value));
}

function positiveModulo(a, n) {
	return (a % n + n) % n;
}
// EXTERNAL MODULE: ./node_modules/lodash/groupBy.js
var groupBy = __webpack_require__(40);
var groupBy_default = /*#__PURE__*/__webpack_require__.n(groupBy);

// CONCATENATED MODULE: ./lib/utils/options.js



function indexOptionTable(option, keyIndex, keyTransformer = v => v) {
	const source = option.fields[keyIndex].type === 'list' ? Array.from(expandKeys(option.value)) : option.value;

	return groupBy_default()(source, arr => keyTransformer(arr[keyIndex]));

	function* expandKeys(nestedArray) {
		for (const arr of nestedArray) {
			for (const subKey of arr[keyIndex].split(',')) {
				yield [...arr.slice(0, keyIndex), subKey, ...arr.slice(keyIndex + 1)];
			}
		}
	}
}
// CONCATENATED MODULE: ./lib/utils/profiling.js


let profiling_counter = 0;
function markStart() {
	const tag = (++profiling_counter).toString();
	performance.mark(tag);
	return tag;
}

function markEnd(tag, name) {
	performance.measure(name, tag);
}
// CONCATENATED MODULE: ./lib/utils/value.js


function firstValid(...vals) {
	return vals.find(val => val !== undefined && val !== null && (typeof val !== 'number' || !isNaN(val)));
}
// EXTERNAL MODULE: ./node_modules/lodash/fp/map.js
var map = __webpack_require__(12);
var map_default = /*#__PURE__*/__webpack_require__.n(map);

// EXTERNAL MODULE: ./node_modules/lodash/fp/sortBy.js
var fp_sortBy = __webpack_require__(29);
var sortBy_default = /*#__PURE__*/__webpack_require__.n(fp_sortBy);

// CONCATENATED MODULE: ./lib/constants/jsapi.js


const JSAPI_CONSUMER_NAME = 'reddit-enhancement-suite';
// CONCATENATED MODULE: ./lib/utils/watchers.js











const elementWatchers = {
	siteTable: [],
	selfText: [],
	newComments: []
};

const thingWatchers = {
	comment: [],
	message: [],
	post: [],
	subreddit: []
};

function registerElement(type, element, sorter = callbacks => callbacks) {
	const elementCallbacks = new Map();

	function addCallback(callback, actingOnElement, options) {
		if (options && options.immediate) {
			try {
				callback();
			} catch (e) {
				console.error(e);
			}
		} else {
			const callbacks = elementCallbacks.get(actingOnElement);
			if (callbacks) callbacks.push(callback);else elementCallbacks.set(actingOnElement, [callback]);
		}
	}

	for (const thing of Thing_Thing.findThings(element)) {
		const thingWatcherCallbacks = thing.isPost() && thingWatchers.post || thing.isComment() && thingWatchers.comment || thing.isMessage() && thingWatchers.message || thing.isSubreddit() && thingWatchers.subreddit || [];

		for (const _ref of thingWatcherCallbacks) {
			const { callback, options } = _ref;

			addCallback(() => callback(thing), thing.element, options);
		}
	}

	for (const _ref2 of elementWatchers[type]) {
		const { selector, callback, options } = _ref2;

		const elements = selector ? Array.from(element.querySelectorAll(selector)) : [element];
		for (const e of elements) {
			const closest = e.closest && e.parentElement.closest('.thing') || e;
			addCallback(() => callback(e), closest, options);
		}
	}

	return flow_default()(sorter, map_default()(v => v[1]), forEachChunked(c => {
		for (const callback of c) try {
			callback();
		} catch (e) {
			console.error(e);
		}
	}))(Array.from(elementCallbacks));
}

function watchForThings(types, callback, options) {
	for (const type of types) thingWatchers[type].push({ callback, options });
}

function watchForElements(types, selector, callback, options) {
	for (const type of types) elementWatchers[type].push({ selector, callback, options });
}

const watchers_callbacks = {
	subreddit: [],
	postAuthor: [],
	post: []
};

function watchForRedditEvents(type, callback) {
	if (!watchers_callbacks[type]) {
		watchers_callbacks[type] = [];
	}
	watchers_callbacks[type].push(callback);
}


function handleRedditEvent(event) {
	const { target, detail: { type, data } } = event;
	const fns = watchers_callbacks[type];
	if (!fns) {
		return;
	}

	let expandoId = `${type}|`;
	switch (type) {
		case 'postAuthor':
			expandoId += data.post.id;
			break;
		case 'commentAuthor':
			expandoId += data.comment.id;
			break;
		case 'userHovercard':
			expandoId += `${data.contextId}|${data.user.id}`;
			break;
		case 'subreddit':
		case 'post':
		default:
			expandoId += data.id;
			break;
	}

	const update = target.expando && target.expando._.id === expandoId ? (target.expando._.update || 0) + 1 : 0;

	const expando = Object.assign({}, data, {
		_: {
			id: expandoId,
			type,
			update
		}
	});

	target.expando = expando;

	const ownedTarget = target.querySelector(`[data-name="${JSAPI_CONSUMER_NAME}"]`);
	for (const fn of fns) {
		try {
			fn(ownedTarget, expando);
		} catch (e) {
			console.log(e);
		}
	}
}

function initObservers() {
	if (isAppType('d2x')) {
		document.addEventListener('reddit', handleRedditEvent, true);
		const meta = document.createElement('meta');
		meta.name = 'jsapi.consumer';
		meta.content = JSAPI_CONSUMER_NAME;
		document.head.appendChild(meta);
		meta.dispatchEvent(new CustomEvent('reddit.ready'));
	} else {
		watchForElements(['siteTable'], '.entry div.expando', addSelfTextObserver);

		if (isPageType('comments')) {
			addCommentsObserver(document.querySelector('.commentarea .sitetable'));

			watchForThings(['comment'], thing => {
				const sitetable = thing.element.querySelector('.sitetable');

				if (sitetable) {
					addCommentsObserver(sitetable);
				} else {
					waitForChild(thing.element.querySelector('.child'), '.sitetable').then(sitetable => {
						addCommentsObserver(sitetable);

						const comment = sitetable.querySelector('.thing');
						if (comment) registerElement('newComments', comment);
					});
				}
			});
		}
	}
}

function newSitetable(siteTable) {
	let sorter;
	if (document.contains(siteTable)) {
		const { height: viewportHeight } = getViewportSize();
		sorter = sortBy_default()(([element]) => {
			const fromTop = element.getBoundingClientRect().top;
			return element.offsetParent ? fromTop >= 0 ? fromTop : -fromTop + viewportHeight : Infinity;
		});
	}

	return registerElement('siteTable', siteTable, sorter);
}

function addCommentsObserver(ele) {
	watchForFutureChildren(ele, '.thing', comment => {
		registerElement('newComments', comment);
	});
}

function addSelfTextObserver(ele) {
	watchForFutureChildren(ele, 'form', form => {
		registerElement('selfText', form);
	});
}
// CONCATENATED MODULE: ./lib/utils/bodyClasses.js


const classes = new Set();

function bodyClasses_add(...newClasses) {
	newClasses.forEach(cls => [].concat(cls).forEach(cls => classes.add(cls)));

	if (document.documentElement) {
		document.documentElement.classList.add(...classes);
	}
	if (document.body) {
		document.body.classList.add(...classes);
	}
}

function bodyClasses_remove(...removeClasses) {
	removeClasses = removeClasses.reduce((acc, cls) => acc.concat(cls), []);

	removeClasses.forEach(cls => classes.delete(cls));

	if (document.documentElement) {
		document.documentElement.classList.remove(...removeClasses);
	}
	if (document.body) {
		document.body.classList.remove(...removeClasses);
	}
}

function bodyClasses_toggle(toggleOn, ...classes) {
	if (toggleOn) {
		bodyClasses_add(...classes);
	} else {
		bodyClasses_remove(...classes);
	}
}
// CONCATENATED MODULE: ./lib/utils/browserDetect.js


let versionSearchString;
const searchString = datas => {
	const data = datas.find(data => {
		versionSearchString = data.versionSearch || data.identity;
		return data.string ? data.string.includes(data.subString) : data.prop;
	});

	return data ? data.identity : undefined;
};

const searchVersion = dataString => {
	const index = dataString.indexOf(versionSearchString);
	if (index === -1) {
		return;
	}
	return parseFloat(dataString.substring(index + versionSearchString.length + 1));
};

const hasNavigator = typeof navigator !== 'undefined';

const browser = hasNavigator ? searchString(dataBrowser()) || 'An unknown browser' : 'An unknown browser without `navigator`';

const browserDetect_version = hasNavigator ? searchVersion(navigator.userAgent) || searchVersion(navigator.appVersion) || 'an unknown version' : 'an unknown version without `navigator`';

const OS = hasNavigator ? searchString(dataOS()) || 'an unknown OS' : 'an unknown OS without `navigator`';

function dataBrowser() {
	return [{
		string: navigator.userAgent,
		subString: 'OPR/',
		identity: 'Opera'
	}, {
		string: navigator.userAgent,
		subString: 'Edge',
		identity: 'Edge'
	}, {
		string: navigator.userAgent,
		subString: 'Chrome',
		identity: 'Chrome'
	}, {
		string: navigator.userAgent,
		subString: 'OmniWeb',
		versionSearch: 'OmniWeb/',
		identity: 'OmniWeb'
	}, {
		string: navigator.vendor,
		subString: 'Apple',
		identity: 'Safari',
		versionSearch: 'Version'
	}, {
		prop: window.opera,
		identity: 'Opera',
		versionSearch: 'Version'
	}, {
		string: navigator.vendor,
		subString: 'iCab',
		identity: 'iCab'
	}, {
		string: navigator.vendor,
		subString: 'KDE',
		identity: 'Konqueror'
	}, {
		string: navigator.userAgent,
		subString: 'Firefox',
		identity: 'Firefox'
	}, {
		string: navigator.vendor,
		subString: 'Camino',
		identity: 'Camino'
	}, {
		string: navigator.userAgent,
		subString: 'Netscape',
		identity: 'Netscape'
	}, {
		string: navigator.userAgent,
		subString: 'MSIE',
		identity: 'Explorer',
		versionSearch: 'MSIE'
	}, {
		string: navigator.userAgent,
		subString: 'Gecko',
		identity: 'Mozilla',
		versionSearch: 'rv'
	}, {
		string: navigator.userAgent,
		subString: 'Mozilla',
		identity: 'Netscape',
		versionSearch: 'Mozilla'
	}];
}

function dataOS() {
	return [{
		string: navigator.platform,
		subString: 'Win',
		identity: 'Windows'
	}, {
		string: navigator.platform,
		subString: 'Mac',
		identity: 'Mac'
	}, {
		string: navigator.userAgent,
		subString: 'iPhone',
		identity: 'iPhone/iPod'
	}, {
		string: navigator.platform,
		subString: 'Linux',
		identity: 'Linux'
	}];
}
// CONCATENATED MODULE: ./lib/utils/createElement.js









function createElement_toggleButton(onClick = () => {}, fieldID, enabled = false, onText = i18n('toggleOn'), offText = i18n('toggleOff'), isTable = false, usesBatch = false) {
	const toggle = string_html`
		<div ${fieldID && _html`id="${fieldID}Container"`} class="toggleButton ${enabled && 'enabled'}">
			<span class="toggleThumb"></span>
			<div class="toggleLabel ${usesBatch && 'res-icon'}"
				${onText && _html`data-enabled-text="${onText}"`}
				${offText && _html`data-disabled-text="${offText}"`}
			></div>
			<input id="${fieldID}" name="${fieldID}" type="checkbox" ${enabled && 'checked'}
				${isTable && _html`tableOption="true"`}
			/>
		</div>
	`;

	toggle.addEventListener('click', () => {
		const checkbox = downcast(toggle.querySelector('input[type=checkbox]'), HTMLInputElement);
		const enabling = !checkbox.checked;
		checkbox.checked = enabling;
		toggle.classList.toggle('enabled', enabling);
		onClick(enabling);
	});

	return toggle;
}

function icon(charCode, tagName = 'span', className = '', title = '') {
	const icon = document.createElement(tagName);
	icon.className = className;
	icon.classList.add('res-icon');
	icon.textContent = String.fromCharCode(charCode);
	icon.setAttribute('title', title);
	return icon;
}

function createElement_table(items, callback) {
	items = [].concat(items);

	const description = [];
	description.push('<table>');

	for (const item of items.map(callback)) {
		if (typeof item === 'string') {
			description.push(item);
		} else if (item) {
			description.push(...item);
		}
	}

	description.push('</table>');

	return description.join('\n');
}

function createElement_tabMenuItem({ text, aftercontent, className, title, checked, prepend }) {
	let menu = document.querySelector('#header-bottom-left ul.tabmenu');

	if (!menu && isPageType('search', 'modqueue')) {
		menu = $('<ul>', { class: 'tabmenu' }).appendTo('#header-bottom-left').get(0);
	} else if (!menu) {
		if (isAppType('r2')) {
			console.warn('Could not find tab menu');
		}
		return document.createElement('a');
	}

	const element = string_html`
		<li class="res-tabmenu-button ${checked && 'selected'} ${className}">
			<a
				${title && _html`title="${title}"`}
				${aftercontent && _html`aftercontent="${aftercontent}"`}
			>${text}</a>
		</li>
	`;

	if (prepend) $(menu).prepend(element);else menu.appendChild(element);

	const a = element.querySelector('a');
	a.addEventListener('click', () => {
		checked = !checked;
		element.classList.toggle('selected', checked);
		a.dispatchEvent(new CustomEvent('change', { detail: checked }));
	});

	return a;
}
// CONCATENATED MODULE: ./lib/utils/alert.js






const alert_$container = once_default()(() => $('<div>', { id: 'alert_message' }).appendTo(document.body));
const $overlay = once_default()(() => $('<div>', { id: 'alert_message_background' }).appendTo(document.body));

const alert_open = mutex((text, { cancelable = false } = {}) => new Promise((resolve, reject) => {
	function confirm() {
		resolve();
		close();
	}

	function cancel() {
		reject(new Error('User cancelled alert.'));
		close();
	}

	function close() {
		$(document.body).off('keyup', listenForEscape);
		alert_$container().hide();
		$overlay().hide();
	}

	function listenForEscape(e) {
		if (e.key === NAMED_KEYS.Escape) {
			if (cancelable) cancel();else confirm();
		}
	}

	$(document.body).on('keyup', listenForEscape);

	$overlay().show();

	alert_$container().empty().append($('<div>', { html: text })).show();

	if (cancelable) {
		$(makeButton('confirm', 'button-right')).click(confirm).appendTo(alert_$container());

		$(makeButton('cancel', 'button-right')).click(cancel).appendTo(alert_$container()).focus();
	} else {
		$(makeButton('ok')).click(confirm).appendTo(alert_$container()).focus();
	}
}));

function makeButton(text, cls) {
	const btn = document.createElement('input');
	btn.setAttribute('type', 'button');
	btn.setAttribute('value', text);
	if (cls) {
		btn.classList.add(cls);
	}
	return btn;
}
// CONCATENATED MODULE: ./lib/utils/index.js


























































// EXTERNAL MODULE: ./node_modules/lodash/flatten.js
var flatten = __webpack_require__(85);
var flatten_default = /*#__PURE__*/__webpack_require__.n(flatten);

// EXTERNAL MODULE: ./node_modules/lodash/isEqual.js
var isEqual = __webpack_require__(11);
var isEqual_default = /*#__PURE__*/__webpack_require__.n(isEqual);

// EXTERNAL MODULE: ./node_modules/lodash/omitBy.js
var omitBy = __webpack_require__(273);
var omitBy_default = /*#__PURE__*/__webpack_require__.n(omitBy);

// EXTERNAL MODULE: ./node_modules/lodash/isEmpty.js
var isEmpty = __webpack_require__(13);
var isEmpty_default = /*#__PURE__*/__webpack_require__.n(isEmpty);

// EXTERNAL MODULE: ./node_modules/lodash/fp/keyBy.js
var keyBy = __webpack_require__(28);
var keyBy_default = /*#__PURE__*/__webpack_require__.n(keyBy);

// CONCATENATED MODULE: ./lib/core/module.js


class Module {

	constructor(moduleID) {
		this.category = '';
		this.description = '';
		this.descriptionRaw = false;
		this.keywords = [];
		this.bodyClass = false;
		this.options = {};
		this.include = [];
		this.exclude = [];

		this.shouldRun = () => true;

		this.onToggle = () => {};

		this.hidden = false;
		this.disabledByDefault = false;
		this.alwaysEnabled = false;
		this.sort = 0;
		this.loadDynamicOptions = undefined;
		this.beforeLoad = undefined;
		this.go = undefined;
		this.afterLoad = undefined;
		this.always = undefined;

		this.moduleID = moduleID;
		this.moduleName = moduleID;
	}
}
// EXTERNAL MODULE: ./node_modules/lodash/random.js
var random = __webpack_require__(272);
var random_default = /*#__PURE__*/__webpack_require__.n(random);

// EXTERNAL MODULE: ./node_modules/lodash/clamp.js
var clamp = __webpack_require__(27);
var clamp_default = /*#__PURE__*/__webpack_require__.n(clamp);

// CONCATENATED MODULE: ./lib/core/options/listTypes.js


/* harmony default export */ var listTypes = ({
	subreddits: {
		source: '/api/search_reddit_names.json?app=res',
		hintText: 'type a subreddit name',
		onResult(response) {
			return response.names.map(name => ({
				id: name,
				name
			}));
		},
		onCachedResult(response) {
			return response.names.map(name => ({
				id: name,
				name
			}));
		}
	}
});
// CONCATENATED MODULE: ./lib/core/options/stage.js






let stagedOptions;

clearStagedOptions();


function stageOption(moduleID, optionName, optionValue) {
	const mod = modules_get(moduleID);

	stagedOptions[moduleID] = stagedOptions[moduleID] || {};

	if (!isEqual_default()(mod.options[optionName].value, optionValue)) {
		stagedOptions[moduleID][optionName] = {
			value: optionValue
		};
	} else {
		delete stagedOptions[moduleID][optionName];
	}

	if (isEmpty_default()(stagedOptions[moduleID])) {
		delete stagedOptions[moduleID];
	}
}


function commitStagedOptions() {
	for (const [modId, options] of Object.entries(stagedOptions)) {
		for (const [optionName, option] of Object.entries(options)) {
			options_set(modId, optionName, option.value);
		}
	}
	clearStagedOptions();
}


function clearStagedOptions() {
	stagedOptions = {};
}


function hasStagedOptions() {
	return !isEmpty_default()(stagedOptions);
}


function getStagedOptions(moduleID) {
	return stagedOptions[moduleID];
}
// CONCATENATED MODULE: ./lib/core/options/table.js







function getMatchingValue(module, optionKey, valueIdentifiers) {
	const option = module.options[optionKey];
	const values = option.value;
	if (option.type !== 'table' || !values || !values.length) return;

	return values.find(value => {
		let containValid = false;
		const match = option.fields.every((field, fi) => {
			const fieldValue = value[fi];
			const matchValue = firstValid(valueIdentifiers[fi], valueIdentifiers[field.key]);

			if (matchValue === undefined) {
				return true;
			}

			if (matchValue === fieldValue) {
				containValid = true;
				return true;
			}

			return false;
		});

		return match && containValid;
	});
}

function addValue(module, optionKey, value) {
	const option = module.options[optionKey];
	if (option.type !== 'table') {
		throw new Error(`Tried to save table value to non-table option: modules.${module.moduleID}.options.${optionKey}`);
	}

	if (!option.value) {
		option.value = [];
	}
	const values = option.value;

	const optionValue = option.fields.map((field, i) => firstValid(value[i], value[field.key], field.value));

	values.push(optionValue);
	options_set(module, optionKey, values);

	return optionValue;
}

function getMatchingValueOrAdd(opaqueId, optionKey, valueIdentifier, hydrateValue = x => x) {
	const module = modules_get(opaqueId);

	let matchingValue = getMatchingValue(module, optionKey, valueIdentifier);
	if (!matchingValue) {
		const value = hydrateValue(valueIdentifier);
		matchingValue = addValue(module, optionKey, value);
	}

	return matchingValue;
}
// CONCATENATED MODULE: ./lib/core/options/index.js










// CONCATENATED MODULE: ./lib/modules/floater.js







const floater_module = new Module('floater');

floater_module.category = 'productivityCategory';
floater_module.moduleName = 'floaterName';
floater_module.description = 'floaterDesc';
floater_module.alwaysEnabled = true;
floater_module.hidden = true;

const defaultContainer = isAppType('d2x') ? 'belowFixedNavbar' : 'visibleAfterScroll';
const containers = {
	belowFixedNavbar: {
		include: ['d2x'],

		$element: once_default()(() => $('<div>', { class: 'res-floater-belowNavbar' }).append('<ul>')),
		go() {
			this.$element().css('top', 5 + getD2xBodyOffset());
		},
		add(element, { separate, order }) {
			if (separate) {
				this.$element().append(element);
			} else {
				const $container = $('<li />');
				$container.css('order', order);
				$container.append(element);
				this.$element().find('> ul').append($container);
			}
		}
	},

	visibleAfterScroll: {
		exclude: ['d2x'],

		$element: once_default()(() => $('<div>', { id: 'NREFloat', class: 'res-floater-visibleAfterScroll' }).append('<ul>')),
		go() {
			this.$element().css('top', 8 + getHeaderOffset(true));

			if (!document.querySelector('#RESPinnedHeaderSpacer')) {
				new IntersectionObserver(entries => {
					this.$element().get(0).hidden = entries[0].isIntersecting;
				}).observe(document.querySelector('#header'));
			}
		},
		add(element, { separate, order }) {
			if (separate) {
				this.$element().append(element);
			} else {
				const $container = $('<li />');
				$container.css('order', order);
				$container.append(element);
				this.$element().find('> ul').append($container);
			}
		}
	}
};

function isRunning(container) {
	return matchesPageLocation(container.include || [], container.exclude || []);
}

floater_module.afterLoad = () => {
	for (const container of Object.values(containers)) {
		if (!isRunning(container)) {
			continue;
		}
		$(document.body).append(container.$element());
		if (typeof container.go === 'function') {
			container.go();
		}
	}
};

function addElement(element, { container: containerName = defaultContainer, separate = false, order = 0 } = {}) {
	if (!modules_isRunning(floater_module)) {
		return;
	}
	const container = containers[containerName];
	if (!isRunning(container)) {
		return;
	}

	container.add(element, { separate, order });
}
// CONCATENATED MODULE: ./lib/modules/hover.js







const hover_module = new Module('hover');

hover_module.moduleName = 'hoverName';
hover_module.category = 'coreCategory';
hover_module.description = 'hoverDesc';
hover_module.alwaysEnabled = true;

hover_module.options = {
	instances: {
		description: 'hoverInstancesDesc',
		title: 'hoverInstancesTitle',
		type: 'table',
		value: [],
		fields: [{
			key: 'name',
			name: 'hoverInstancesName',
			type: 'text'
		}, {
			key: 'enabled',
			name: 'hoverInstancesEnabled',
			type: 'boolean',
			value: true
		}]
	},
	openDelay: {
		type: 'text',
		value: '500',
		description: 'hoverOpenDelayDesc',
		title: 'hoverOpenDelayTitle'
	},
	fadeDelay: {
		type: 'text',
		value: '500',
		description: 'hoverFadeDelayDesc',
		title: 'hoverFadeDelayTitle'
	},
	fadeSpeed: {
		noconfig: true,
		type: 'text',
		value: '0.7',
		description: 'hoverFadeSpeedDesc',
		title: 'hoverFadeSpeedTitle'
	},
	width: {
		type: 'text',
		value: '512',
		description: 'hoverWidthDesc',
		title: 'hoverWidthTitle'
	},
	closeOnMouseOut: {
		type: 'boolean',
		value: true,
		description: 'hoverCloseOnMouseOutDesc',
		title: 'hoverCloseOnMouseOutTitle'
	}
};

hover_module.beforeLoad = () => {
	for (const [optionKey, { value }] of Object.entries(hover_module.options)) {
		const parsedValue = typeof value === 'number' ? parseFloat(value) : value;
		hover_Hover._defaultOptions[optionKey] = parsedValue;
	}
};

const instances = {};
function getInstance(type = 'infocard', id = '_default', hidden) {
	if (!instances[type]) {
		instances[type] = {};
	}

	if (!instances[type][id]) {
		instances[type][id] = type === 'dropdownList' ? new hover_HoverDropdownList(id) : type === 'infocard' ? new hover_HoverInfoCard(id) : new hover_Hover(id);

		instances[type][id].enabled(hidden === HIDDEN_FROM_SETTINGS || hover_isEnabled(type, id));
	}

	return instances[type][id];
}

const HIDDEN_FROM_SETTINGS = true;

const infocard = (id, hidden) => getInstance('infocard', id, hidden);
const dropdownList = (id, hidden) => getInstance('dropdownList', id, hidden);

function hover_isEnabled(type, id) {
	const row = findOrMakeRow(type, id);
	return row[1];
}

function findOrMakeRow(type, id) {
	const name = `${type}.${id}`;
	let row = hover_module.options.instances.value.find(value => value[0] === name);

	if (!row) {
		row = [name, true];
		hover_module.options.instances.value.push(row);
		options_set(hover_module, 'instances', hover_module.options.instances.value);
	}

	return row;
}

const pin = {
	bottom: 'bottom',
	right: 'right'
};

class hover_Hover {

	constructor(id) {
		this.template = `
		<div class="RESHover">
			<div data-hover-element="0" />
			<div data-hover-element="1" />
			<div data-hover-element="2" />
			<div data-hover-element="3" />
		</div>
	`;
		this._options = hover_Hover._defaultOptions;
		this._enabled = true;
		this.visible = false;

		this.instanceID = id;
	}

	enabled(enabled) {
		this._enabled = enabled;

		return this;
	}

	options(options = {}) {
		this._options = Object.assign({}, this._options, options);

		return this;
	}

	target(element) {
		if (this._target !== element) {
			this.close();
			this._target = element;
		}

		return this;
	}

	getCheckedTarget() {
		if (!this._target || !this._target.offsetParent) {
			this.close();
			throw new Error('Cannot show hover without target; closing hover.');
		}
		return this._target;
	}

	populateWith(callback) {
		this._callback = callback;

		return this;
	}

	getContainer() {
		if (!this._container) {
			this._container = this._render();
		}

		return this._container;
	}

	_render() {
		const ele = $(this.template).get(0);
		this._addContainerHandlers(ele);
		return ele;
	}

	_addContainerHandlers(ele) {
		$(ele).appendTo(document.body).on('mouseenter', () => this._cancelHideTimer()).on('mouseleave', () => {
			this._cancelHideTimer();
			if (this._options.closeOnMouseOut) {
				this._startHideTimer();
			}
		}).on('click', '.RESCloseButton', () => this.close(true)).on('keyup', ({ which }) => {
			if (which === 27) this.close(true);
		});
	}

	begin() {
		if (!this._enabled) return false;
		this._startShowTimer();
		this._addShowListeners();
	}

	open() {
		if (!this._enabled) return false;

		const callback = this._callback;
		if (callback) {
			this._displayLoadIndicator();
			(async () => {
				try {
					this.populate((await callback(this)));
				} catch (e) {
					this.close();
					throw e;
				}
			})();
		} else {
			this.close();
		}

		$(this.getContainer()).show().css({ opacity: 1 });
	}

	_displayLoadIndicator() {}

	populate(items) {
		if (!this._enabled) return false;

		const container = this.getContainer();

		items.forEach((item, i) => {
			if (!item) return;
			const $element = $(container).find(`[data-hover-element="${i}"]`);
			$element.children().detach();
			$element.empty().append(item);
		});

		this._updatePosition();
	}

	_updatePosition() {
		const { top, left } = this.getCheckedTarget().getBoundingClientRect();
		$(this.getContainer()).css({
			top,
			left,
			zIndex: 2147483646
		});
	}

	_cancelShow(fade = false) {
		this.close(fade);
	}

	_addShowListeners() {
		$(this._target).on('mouseleave.RESHover', () => {
			if (!this.visible) this._cancelShow();
		});
	}

	_clearShowListeners() {
		$(this._target).off('mouseleave.RESHover');
	}

	_startShowTimer() {
		this._cancelShowTimer();
		this.showTimer = setTimeout(() => this._afterShowTimer(), this._options.openDelay);
	}

	_cancelShowTimer() {
		clearTimeout(this.showTimer);
	}

	_afterShowTimer() {
		this._cancelShowTimer();
		this._clearShowListeners();
		this.open();
		this.visible = true;

		$(this._target).on('mouseleave', () => this._startHideTimer());
		$(this._target).on('mouseenter', () => this._cancelHideTimer());
	}

	_startHideTimer() {
		clearTimeout(this.hideTimer);
		this.hideTimer = setTimeout(() => this._afterHideTimer(), this._options.fadeDelay);
	}

	_cancelHideTimer() {
		clearTimeout(this.hideTimer);
	}

	_afterHideTimer() {
		if (this.getContainer().contains(document.activeElement)) {
			this._startHideTimer();
			return;
		}
		this._cancelHideTimer();
		this.close(true);
		this.visible = false;
	}

	close(fade = false) {
		if (!this._enabled) return false;

		this._clearShowListeners();
		this._cancelShowTimer();
		this._cancelHideTimer();

		if (!this.visible) return false;

		$(this.getContainer()).fadeOut(fade ? this._options.fadeSpeed * 1000 : 0);
	}
}

hover_Hover._defaultOptions = {};
class hover_HoverInfoCard extends hover_Hover {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.template = `
		<div class="RESHover RESHoverInfoCard RESDialogSmall">
			<h3 class="RESHoverTitle" data-hover-element="0"></h3>
			<div class="RESCloseButton">x</div>
			<div class="RESHoverBody RESDialogContents" data-hover-element="1"></div>
		</div>
	`, this._loadIndicator = '<div class="RESCenteredLoadIndicator"><span class="RESLoadingSpinner"></span></div>', _temp;
	}

	_displayLoadIndicator() {
		this.populate([null, this._loadIndicator]);
	}

	_updatePosition() {
		const { top, left, bottom, right } = this.getCheckedTarget().getBoundingClientRect();
		const $container = $(this.getContainer()).removeClass('right below');

		const tooltipWidth = this._options.width;
		let tooltipLeft, tooltipTop;

		if (!this._options.pin && right + tooltipWidth + 25 < getViewportSize().width) {
			tooltipTop = top - 14;
			tooltipLeft = right + 25;
		} else if (this._options.pin === pin.bottom || left - tooltipWidth - 30 < 0) {
			$container.addClass('below');
			tooltipTop = bottom + 10;
			tooltipLeft = Math.min(Math.max(getViewportSize().width - tooltipWidth, 0), left);
		} else {
			$container.addClass('right');
			tooltipTop = top - 14;
			tooltipLeft = left - tooltipWidth - 30;
		}

		$container.css({
			top: tooltipTop + window.scrollY,
			left: tooltipLeft + window.scrollX,
			width: tooltipWidth
		});
	}
}

class hover_HoverDropdownList extends hover_Hover {
	constructor(...args) {
		var _temp2;

		return _temp2 = super(...args), this.template = `
		<div class="RESHover RESHoverDropdownList RESDropdownList">
			<ul class="RESDropdownOptions" data-hover-element="0"></ul>
		</div>
	`, this._options = Object.assign({}, hover_Hover._defaultOptions, {
			pin: pin.bottom,
			offsetWidth: 0,
			offsetHeight: 2,
			bottomPadding: 10
		}), _temp2;
	}

	_updatePosition() {
		const trigger = this.getCheckedTarget();
		const menu = this.getContainer();
		const { top: y, left: x } = $(trigger).offset();

		menu.style.zIndex = '2147483646';

		switch (this._options.pin) {
			case pin.right:
				const viewportBottom = getViewportSize().height;
				const top = y + this._options.offsetHeight;
				const height = $(menu).height();
				const bottomAlign = top + height + this._options.bottomPadding > viewportBottom;
				menu.style.left = `${x + trigger.offsetWidth + this._options.offsetWidth}px`;
				menu.style.right = 'auto';
				if (bottomAlign) {
					menu.style.position = 'fixed';
					menu.style.top = 'auto';
					menu.style.bottom = `${this._options.bottomPadding}px`;
				} else {
					menu.style.position = 'absolute';
					menu.style.top = `${top}px`;
					menu.style.bottom = 'auto';
				}
				break;
			case pin.bottom:
			default:
				const leftAlign = x + $(menu).outerWidth() < document.body.scrollWidth;
				menu.style.right = leftAlign ? 'auto' : `${document.body.scrollWidth - x - trigger.offsetWidth + this._options.offsetWidth}px`;
				menu.style.left = leftAlign ? `${x}px` : 'auto';
				menu.style.top = `${y + trigger.offsetHeight + this._options.offsetHeight}px`;
				break;
		}
	}
}
// EXTERNAL MODULE: ./node_modules/lodash/fp/groupBy.js
var fp_groupBy = __webpack_require__(271);
var fp_groupBy_default = /*#__PURE__*/__webpack_require__.n(fp_groupBy);

// EXTERNAL MODULE: ./node_modules/lodash/fp/filter.js
var fp_filter = __webpack_require__(20);
var filter_default = /*#__PURE__*/__webpack_require__.n(fp_filter);

// EXTERNAL MODULE: ./node_modules/lodash/mapValues.js
var mapValues = __webpack_require__(38);
var mapValues_default = /*#__PURE__*/__webpack_require__.n(mapValues);

// EXTERNAL MODULE: ./node_modules/lodash/matchesProperty.js
var matchesProperty = __webpack_require__(89);
var matchesProperty_default = /*#__PURE__*/__webpack_require__.n(matchesProperty);

// EXTERNAL MODULE: ./node_modules/lodash/find.js
var find = __webpack_require__(88);
var find_default = /*#__PURE__*/__webpack_require__.n(find);

// CONCATENATED MODULE: ./node_modules/snudown-js/dist/snudown_es.js
var snudown_es_e;function snudown_es_r(e){snudown_es_a(!E);var r=T;return T=T+e+15&-16,r;}function snudown_es_i(e){var r;return r||(r=16),Math.ceil(e/r)*r;}function snudown_es_a(e,r){e||o("Assertion failed: "+r);}function snudown_es_f(r){for(;0<r.length;){var i=r.shift();if("function"==typeof i)i();else{var a=i.b;"number"==typeof a?void 0===i.a?snudown_es_e.dynCall_v(a):snudown_es_e.dynCall_vi(a,i.a):a(void 0===i.a?null:i.a);}}}function n(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e;}function t(){function r(){if(!snudown_es_e.calledRun&&(snudown_es_e.calledRun=!0,!snudown_es_g)){if(M||(M=!0,snudown_es_f(I)),snudown_es_f(O),snudown_es_e.onRuntimeInitialized&&snudown_es_e.onRuntimeInitialized(),snudown_es_e.postRun)for("function"==typeof snudown_es_e.postRun&&(snudown_es_e.postRun=[snudown_es_e.postRun]);snudown_es_e.postRun.length;){var r=snudown_es_e.postRun.shift();N.unshift(r);}snudown_es_f(N);}}if(!(0<P)){if(snudown_es_e.preRun)for("function"==typeof snudown_es_e.preRun&&(snudown_es_e.preRun=[snudown_es_e.preRun]);snudown_es_e.preRun.length;)i=snudown_es_e.preRun.shift(),S.unshift(i);snudown_es_f(S),0<P||snudown_es_e.calledRun||(snudown_es_e.setStatus?(snudown_es_e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){snudown_es_e.setStatus("");},1),r();},1)):r());}var i;}function o(r){throw snudown_es_e.onAbort&&snudown_es_e.onAbort(r),void 0!==r?(snudown_es_e.print(r),snudown_es_e.printErr(r),r=JSON.stringify(r)):r="",snudown_es_g=!0,"abort("+r+"). Build with -s ASSERTIONS=1 for more info.";}function snudown_es_l(e){var r=1+(e.length<<2),i=snudown_es_j(r),a=w,f=i;if(0<r){r=f+r-1;for(var n=0;n<e.length;++n){var t=e.charCodeAt(n);if(55296<=t&&57343>=t&&(t=65536+((1023&t)<<10)|1023&e.charCodeAt(++n)),127>=t){if(f>=r)break;a[f++]=t;}else{if(2047>=t){if(f+1>=r)break;a[f++]=192|t>>6;}else{if(65535>=t){if(f+2>=r)break;a[f++]=224|t>>12;}else{if(2097151>=t){if(f+3>=r)break;a[f++]=240|t>>18;}else{if(67108863>=t){if(f+4>=r)break;a[f++]=248|t>>24;}else{if(f+5>=r)break;a[f++]=252|t>>30,a[f++]=128|t>>24&63;}a[f++]=128|t>>18&63;}a[f++]=128|t>>12&63;}a[f++]=128|t>>6&63;}a[f++]=128|63&t;}}a[f]=0;}return i;}function s(e,r,i){var a=D();"string"!=typeof r&&(r="");for(var f=snudown_es_l(r),n=0,t=0;t<r.length;++t){var o=r.charCodeAt(t);55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&r.charCodeAt(++t)),127>=o?++n:n=2047>=o?n+2:65535>=o?n+3:2097151>=o?n+4:67108863>=o?n+5:n+6;}"object"==typeof i&&null!==i||(i={}),e=e(f,r=n,n=i.nofollow?1:0,t="string"==typeof i.target?snudown_es_l(i.target):0,o="string"==typeof i.tocIdPrefix?snudown_es_l(i.tocIdPrefix):0,i.enableToc?1:0);e:{for(i=w,r=f=e;i[r];)++r;if(16<r-f&&i.subarray&&A)i=A.decode(i.subarray(f,r));else for(r="";;){if(!(n=i[f++])){i=r;break e;}if(128&n){if(t=63&i[f++],192==(224&n))r+=String.fromCharCode((31&n)<<6|t);else{if(o=63&i[f++],224==(240&n))n=(15&n)<<12|t<<6|o;else{var s=63&i[f++];if(240==(248&n))n=(7&n)<<18|t<<12|o<<6|s;else{var u=63&i[f++];n=248==(252&n)?(3&n)<<24|t<<18|o<<12|s<<6|u:(1&n)<<30|t<<24|o<<18|s<<12|u<<6|63&i[f++];}}r+=65536>n?String.fromCharCode(n):String.fromCharCode(55296|(n-=65536)>>10,56320|1023&n);}}else r+=String.fromCharCode(n);}}return U._free(e),L(a),i;}snudown_es_e||(snudown_es_e=null),snudown_es_e={ENVIRONMENT:"WEB"};var u={};for(q in snudown_es_e)snudown_es_e.hasOwnProperty(q)&&(u[q]=snudown_es_e[q]);snudown_es_e.arguments=[],snudown_es_e.thisProgram="./this.program",snudown_es_e.quit=function(e,r){throw r;},snudown_es_e.preRun=[],snudown_es_e.postRun=[];var snudown_es_c,snudown_es_b,snudown_es_$=!1,snudown_es_k=!1,snudown_es_v=!1,snudown_es_d=!1;if(snudown_es_e.ENVIRONMENT){if("WEB"===snudown_es_e.ENVIRONMENT)snudown_es_$=!0;else if("WORKER"===snudown_es_e.ENVIRONMENT)snudown_es_k=!0;else if("NODE"===snudown_es_e.ENVIRONMENT)snudown_es_v=!0;else{if("SHELL"!==snudown_es_e.ENVIRONMENT)throw Error("Module['ENVIRONMENT'] value is not valid. must be one of: WEB|WORKER|NODE|SHELL.");snudown_es_d=!0;}}else snudown_es_$="object"==typeof window,snudown_es_k="function"==typeof importScripts,snudown_es_v=!1,snudown_es_d=!snudown_es_$&&!snudown_es_v&&!snudown_es_k;for(q in snudown_es_v?(snudown_es_e.read=function(e,r){return snudown_es_c||(snudown_es_c={}),snudown_es_b||(snudown_es_b={}),e=snudown_es_b.normalize(e),e=snudown_es_c.readFileSync(e),r?e:""+e;},snudown_es_e.readBinary=function(r){return(r=snudown_es_e.read(r,!0)).buffer||(r=new Uint8Array(r)),snudown_es_a(r.buffer),r;},1<(void 0).argv.length&&(snudown_es_e.thisProgram=(void 0).argv[1].replace(/\\/g,"/")),snudown_es_e.arguments=(void 0).argv.slice(2),(void 0).on("unhandledRejection",function(){(void 0).exit(1);}),snudown_es_e.inspect=function(){return"[Emscripten Module object]";}):snudown_es_d?("undefined"!=typeof read&&(snudown_es_e.read=function(e){return read(e);}),snudown_es_e.readBinary=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(snudown_es_a("object"==typeof(e=read(e,"binary"))),e);},"undefined"!=typeof scriptArgs?snudown_es_e.arguments=scriptArgs:"undefined"!=typeof arguments&&(snudown_es_e.arguments=arguments),"function"==typeof quit&&(snudown_es_e.quit=function(e){quit(e);})):(snudown_es_$||snudown_es_k)&&(snudown_es_e.read=function(e){var r=new XMLHttpRequest();return r.open("GET",e,!1),r.send(null),r.responseText;},snudown_es_k&&(snudown_es_e.readBinary=function(e){var r=new XMLHttpRequest();return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response);}),snudown_es_e.readAsync=function(e,r,i){var a=new XMLHttpRequest();a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){200==a.status||0==a.status&&a.response?r(a.response):i();},a.onerror=i,a.send(null);},"undefined"!=typeof arguments&&(snudown_es_e.arguments=arguments),snudown_es_e.setWindowTitle=function(e){document.title=e;}),snudown_es_e.print=void 0!==console?console.log.bind(console):"undefined"!=typeof print?print:null,snudown_es_e.printErr="undefined"!=typeof printErr?printErr:void 0!==console&&console.warn.bind(console)||snudown_es_e.print,snudown_es_e.print=snudown_es_e.print,snudown_es_e.printErr=snudown_es_e.printErr,u)u.hasOwnProperty(q)&&(snudown_es_e[q]=u[q]);u=void 0;var h,w,p,m,snudown_es_y,_,snudown_es_g=0,A="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var T=snudown_es_d=snudown_es_y=snudown_es_d=0,E=!1,C=snudown_es_e.TOTAL_STACK||5242880,R=snudown_es_e.TOTAL_MEMORY||16777216;if(R<C&&snudown_es_e.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+R+"! (TOTAL_STACK="+C+")"),snudown_es_e.buffer?u=snudown_es_e.buffer:(u=new ArrayBuffer(R),snudown_es_e.buffer=u),snudown_es_e.HEAP8=h=new Int8Array(u),snudown_es_e.HEAP16=p=new Int16Array(u),snudown_es_e.HEAP32=m=new Int32Array(u),snudown_es_e.HEAPU8=w=new Uint8Array(u),snudown_es_e.HEAPU16=new Uint16Array(u),snudown_es_e.HEAPU32=new Uint32Array(u),snudown_es_e.HEAPF32=new Float32Array(u),snudown_es_e.HEAPF64=new Float64Array(u),m[0]=1668509029,p[1]=25459,115!==w[2]||99!==w[3])throw"Runtime error: expected the system to be little-endian!";var S=[],I=[],O=[],snudown_es_x=[],N=[],M=!1,P=0;snudown_es_e.preloadedImages={},snudown_es_e.preloadedAudios={};var q=null;T=9416,I.push(),q='|\0\0\0\0\0\0`\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\b\0\0\0\0\0\0!\0\0.\0\0$\0\0R\0\0T\0\0W\0\0[\0\0`\0\0$\0\0f\0\0i\0\0m\0\0r\0\0}\0\0\0\0\0\0$\0\0\0\0$\0\0\0\0\0\0$\0\0$\0\0\0\0\0\0\0\0$\0\0\n\0\0\0\0\0\0\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\b\0\0\0\t\0\0\0\n\0\0\0\v\0\0\0\f\0\0\0\0\0\0@\0\0\0$\0\0V\0\0\0\0\0\0\b\0\0e\0\0\0\0$\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\b\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0\0\0\0\0\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0\0\0\0\0$\0\0$\0\0$\0\0\0\0\0\0\0\0\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\b\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0"\0\0,\0\0$\0\0$\0\0$\0\0$\0\x002\0\x008\0\0$\0\0$\0\0?\0\0D\0\0J\0\0$\0\0$\0\0Q\0\0$\0\0V\0\0]\0\0$\0\0e\0\0j\0\0$\0\0p\0\0$\0\0$\0\0x\0\0~\0\0$\0\0\0\0$\0\0\0\0\0\0\0\0\0\0$\0\0$\0\0\0\0$\0\0\0\0\0\0\0\0\0\0\0\0$\0\0\0\0$\0\0\0\0\0\0$\0\0$\0\0\0\0\0\0\0\0$\0\0$\0\0\0\0$\0\0\t\0\0$\0\0$\0\0$\0\0\0\0\0\0$\0\0$\0\0 \0\0&\0\0-\0\0$\0\0$\0\0$\0\x005\0\0<\0\0$\0\0$\0\0$\0\0D\0\0K\0\0$\0\0$\0\0S\0\0Y\0\0^\0\0f\0\0$\0\0o\0\0u\0\0|\0\0\0\0$\0\0\0\0\0\0\0\0$\0\0$\0\0\0\0\0\0\0\0\0\0$\0\0\0\0$\0\0\0\0$\0\0$\0\0\0\0\0\0$\0\0$\0\0$\0\0\0\0\0\0\0\0\0\0$\0\0$\0\0\0\0$\0\0\0\0$\0\0\b\0\0\0\0\0\0\0\0$\0\0%\0\0$\0\0+\0\0$\0\0$\0\0$\0\0$\0\0$\0\x003\0\0$\0\0$\0\0$\0\0<\0\0D\0\0$\0\0$\0\0M\0\0T\0\0\\\0\0e\0\0$\0\0j\0\0q\0\0y\0\0$\0\0\0\0\0\0\0\0\0\0$\0\0$\0\0$\0\0\0\0\0\0\0\0$\0\0$\0\0\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0\0\0\0\0\0\0\0\0\0\0\0\0$\0\0$\0\0\0\0\0\0\n\0\0$\0\0$\0\0\0\0\0\0$\0\0$\0\0$\0\0"\0\0)\0\x001\0\0$\0\0:\0\0B\0\0I\0\0O\0\0V\0\0]\0\0e\0\0l\0\0t\0\0$\0\0$\0\0}\0\0\0\0\0\0\0\0\0\0\0\0\0\0$\0\0$\0\0\0\0\0\0$\0\0\0\0\0\0\0\0\0\0$\0\0$\0\0\0\0\0\0\0\0\0\0$\0\0\0\0\0\0\v\0\0\0\0\0\0$\0\0#\0\0,\0\x005\0\0$\0\0?\0\0G\0\0M\0\0T\0\0\\\0\0e\0\0$\0\0m\0\0$\0\0v\0\0$\0\0$\0\0\0\0\0\0$\0\0$\0\0\0\0\0\0$\0\0\0\0$\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0$\0\0\0\0\0\0\0\0\0\0$\0\0\0\0\0\0\0\0%\0\0$\0\0$\0\0.\0\x005\0\0=\0\0$\0\0$\0\0F\0\0O\0\0W\0\0$\0\0$\0\0`\0\0g\0\0o\0\0$\0\0$\0\0v\0\0}\0\0\0\0$\0\0\0\0\0\0\0\0\0\0$\0\0$\0\0\0\0\0\0\0\0$\0\0\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0\0\0\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0\0\0\0\0$\0\0$\0\0\0\0$\0\0\n\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0"\0\0$\0\0$\0\0$\0\0$\0\0)\0\x002\0\0$\0\0$\0\0$\0\0:\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0C\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0J\0\0$\0\0$\0\0R\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0[\0\0$\0\0$\0\0$\0\0d\0\0l\0\0$\0\0$\0\0$\0\0$\0\0u\0\0$\0\0~\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\r\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0$\0\0)\0\0\0\0_\0Z\0\0\0\0\0s\0^\x007\0\0\0\0\0\0\0\0\0\0\0\0#\0-\0-\0\n\0\0\x002\0}\0\0U\0K\0(\0A\0\0\0<\0\0\0\0\n\0f\0\0#\0\0\0\0\0\n\0\0\0\0\0\x002\0K\0\n\0K\0\0U\0\0 rel="nofollow"\0 target="\0tr\0th\0td\0tbody\0thead\0tfoot\0caption\0colspan\0rowspan\0cellspacing\0cellpadding\0scope\0https://\0ftp://\0mailto://\0/\0git://\0steam://\0irc://\0news://\0mumble://\0ssh://\0ircs://\0ts3server://\0#\0www.\0?!.,\0.+-_\0all-\0reddit.com\0t:\0p\0dl\0div\0math\0table\0ul\0del\0form\0blockquote\0figure\0ol\0fieldset\0h1\0h6\0pre\0script\0h5\0noscript\0iframe\0h4\0ins\0h3\0h2\0span\0&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&\b\n&&&&&&&&&&\0&\0&\0&&\0\n\0&&\0&&&&&&&&&&&&\0&\0&\0&&\0\n\0&&\0&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&http://\0\\`*_{}[]()#+-.!:|&<>/^~\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0&#x27;\x000123456789ABCDEF\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0&#39;\0&#47;\0</li>\n</ul>\n\0</div>\n\0<sup>\0</sup>\0<del>\0</del>\0<strong><em>\0</em></strong>\0<em>\0</em>\0<strong>\0</strong>\0<span class="md-spoiler-text">\0</span>\0<code>\0</code>\0<div class="toc">\n\0<ul>\n<li>\n\0</li>\n\0</ul>\n</li>\n\0<li>\n\0</li>\n<li>\n\0<a href="#\0toc_\0">\0</a>\n\0style\0a\0img\0="\0<a href="\0" title="\0</a>\0<br/>\n\0<br>\n\0<img src="\0" alt="\0"/>\0mailto:\0<th\0<td\0 colspan="\0" \0 align="center">\0 align="left">\0 align="right">\0>\0</th>\n\0</td>\n\0<tr>\n\0</tr>\n\0<table><thead>\n\0</thead><tbody>\n\0</tbody></table>\n\0<p>\0</p>\n\0<li>\0<ol>\n\0<ul>\n\0</ol>\n\0</ul>\n\0<hr/>\n\0<hr>\n\0<h\0 id="\0</h\0>\n\0<blockquote class="md-spoiler-text">\n\0</blockquote>\n\0<blockquote>\n\0<pre><code class="\0<pre><code>\0</code></pre>\n\0&or;\0&not;\0&int;\0&psi;\0&isin;\0&notin;\0&Rho;\0&phi;\0&prop;\0&rho;\0&nbsp;\0&thorn;\0&thinsp;\0&chi;\0&prod;\0&amp;\0&Psi;\0&iota;\0&omicron;\0&Phi;\0&and;\0&sdot;\0&nu;\0&Chi;\0&emsp;\0&Mu;\0&ensp;\0&ocirc;\0&lt;\0&uml;\0&icirc;\0&sup;\0&sup1;\0&Scaron;\0&cap;\0&part;\0&pound;\0&scaron;\0&ni;\0&lowast;\0&Omicron;\0&cup;\0&Xi;\0&crarr;\0&Nu;\0&pi;\0&theta;\0&tau;\0&nsub;\0&acirc;\0&thetasym;\0&Ocirc;\0&rarr;\0&ucirc;\0&loz;\0&darr;\0&trade;\0&para;\0&ecirc;\0&larr;\0&radic;\0&sub;\0&Pi;\0&kappa;\0&iquest;\0&eta;\0&supe;\0&rceil;\0&there4;\0&rArr;\0&uarr;\0&Kappa;\0&dArr;\0&euro;\0&Theta;\0&circ;\0&Tau;\0&lceil;\0&lArr;\0&ordm;\0&lrm;\0&xi;\0&acute;\0&ccedil;\0&sup3;\0&ntilde;\0&uArr;\0&sup2;\0&piv;\0&otilde;\0&shy;\0&Acirc;\0&curren;\0&Ucirc;\0&oacute;\0&sube;\0&nabla;\0&iacute;\0&mu;\0&bull;\0&oline;\0&Ccedil;\0&sum;\0&copy;\0&equiv;\0&Ntilde;\0&prime;\0&atilde;\0&tilde;\0&Ecirc;\0&Otilde;\0&apos;\0&aacute;\0&ne;\0&Eta;\0&macr;\0&sim;\0&Oacute;\0&Iota;\0&empty;\0&uacute;\0&ouml;\0&exist;\0&iuml;\0&Prime;\0&eacute;\0&rsquo;\0&cent;\0&zwj;\0&zwnj;\0&quot;\0&sbquo;\0&sect;\0&infin;\0&otimes;\0&cong;\0&Icirc;\0&brvbar;\0&le;\0&lsquo;\0&ordf;\0&clubs;\0&oplus;\0&perp;\0&Yacute;\0&micro;\0&ang;\0&auml;\0&gt;\0&rlm;\0&Ouml;\0&upsilon;\0&minus;\0&middot;\0&uuml;\0&aring;\0&Atilde;\0&divide;\0&rsaquo;\0&epsilon;\0&times;\0&ETH;\0&euml;\0&szlig;\0&frac14;\0&diams;\0&oslash;\0&Aacute;\0&lsaquo;\0&Delta;\0&rdquo;\0&spades;\0&Uacute;\0&raquo;\0&rang;\0&frasl;\0&rfloor;\0&harr;\0&ndash;\0&Yuml;\0&cedil;\0&eth;\0&ldquo;\0&real;\0&THORN;\0&plusmn;\0&laquo;\0&lang;\0&delta;\0&lfloor;\0&beta;\0&omega;\0&Eacute;\0&Oslash;\0&image;\0&weierp;\0&Zeta;\0&OElig;\0&hArr;\0&Auml;\0&asymp;\0&Lambda;\0&bdquo;\0&zeta;\0&Upsilon;\0&lambda;\0&Uuml;\0&Aring;\0&yacute;\0&Beta;\0&Gamma;\0&iexcl;\0&forall;\0&Omega;\0&Epsilon;\0&Iacute;\0&Euml;\0&frac34;\0&frac12;\0&yen;\0&yuml;\0&ograve;\0&AElig;\0&igrave;\0&Iuml;\0&alpha;\0&permil;\0&agrave;\0&mdash;\0&Ograve;\0&ugrave;\0&upsih;\0&ge;\0&egrave;\0&fnof;\0&reg;\0&deg;\0&Sigma;\0&sigma;\0&Alpha;\0&hearts;\0&oelig;\0&Agrave;\0&Ugrave;\0&hellip;\0&aelig;\0&Egrave;\0&Igrave;\0&gamma;\0&Dagger;\0&dagger;\0&alefsym;\0&sigmaf;\0\0\b\t\n\v\f\r !"#\n\v\f\r !"#\0',snudown_es_$=T,T+=16,snudown_es_k=function(e,i,f,n){if("number"==typeof e)var t=!0,o=e;else t=!1,o=e.length;var l;if(l=snudown_es_r(Math.max(o,1)),t){for(n=l,snudown_es_a(0==(3&l)),e=l+(-4&o);n<e;n+=4)m[n>>2]=0;for(e=l+o;n<e;)h[n++>>0]=0;return l;}return w.set(e.subarray||e.slice?e:new Uint8Array(e),l),l;}([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0]),_=snudown_es_r(4),snudown_es_d=snudown_es_y=snudown_es_i(T),m[_>>2]=snudown_es_i(snudown_es_d+=C),E=!0,snudown_es_e.asmGlobalArg={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},snudown_es_e.asmLibraryArg={abort:o,assert:snudown_es_a,enlargeMemory:function(){return!1;},getTotalMemory:function(){return R;},invoke_iii:function(r,i,a){try{return snudown_es_e.dynCall_iii(r,i,a);}catch(r){if("number"!=typeof r&&"longjmp"!==r)throw r;snudown_es_e.setThrew(1,0);}},invoke_iiii:function(r,i,a,f){try{return snudown_es_e.dynCall_iiii(r,i,a,f);}catch(r){if("number"!=typeof r&&"longjmp"!==r)throw r;snudown_es_e.setThrew(1,0);}},invoke_iiiii:function(r,i,a,f,n){try{return snudown_es_e.dynCall_iiiii(r,i,a,f,n);}catch(r){if("number"!=typeof r&&"longjmp"!==r)throw r;snudown_es_e.setThrew(1,0);}},invoke_iiiiii:function(r,i,a,f,n,t){try{return snudown_es_e.dynCall_iiiiii(r,i,a,f,n,t);}catch(r){if("number"!=typeof r&&"longjmp"!==r)throw r;snudown_es_e.setThrew(1,0);}},invoke_iiiiiii:function(r,i,a,f,n,t,o){try{return snudown_es_e.dynCall_iiiiiii(r,i,a,f,n,t,o);}catch(r){if("number"!=typeof r&&"longjmp"!==r)throw r;snudown_es_e.setThrew(1,0);}},invoke_vii:function(r,i,a){try{snudown_es_e.dynCall_vii(r,i,a);}catch(r){if("number"!=typeof r&&"longjmp"!==r)throw r;snudown_es_e.setThrew(1,0);}},invoke_viii:function(r,i,a,f){try{snudown_es_e.dynCall_viii(r,i,a,f);}catch(r){if("number"!=typeof r&&"longjmp"!==r)throw r;snudown_es_e.setThrew(1,0);}},invoke_viiii:function(r,i,a,f,n){try{snudown_es_e.dynCall_viiii(r,i,a,f,n);}catch(r){if("number"!=typeof r&&"longjmp"!==r)throw r;snudown_es_e.setThrew(1,0);}},invoke_viiiii:function(r,i,a,f,n,t){try{snudown_es_e.dynCall_viiiii(r,i,a,f,n,t);}catch(r){if("number"!=typeof r&&"longjmp"!==r)throw r;snudown_es_e.setThrew(1,0);}},___setErrNo:function(r){return snudown_es_e.___errno_location&&(m[snudown_es_e.___errno_location()>>2]=r),r;},_emscripten_memcpy_big:function(e,r,i){return w.set(w.subarray(r,r+i),e),e;},DYNAMICTOP_PTR:_,tempDoublePtr:snudown_es_$,ABORT:snudown_es_g,STACKTOP:snudown_es_y,STACK_MAX:snudown_es_d,cttz_i8:snudown_es_k};var U=function(e,r,i){function a(e,r,i){r|=0;var a=112+(e|=0)|0;if(0|i){i=0|e;var f=0|a;for(Se[f>>2]=0,Se[f+4>>2]=0,Se[f+8>>2]=0,Se[f+12>>2]=0,Se[f+16>>2]=0,Se[f+20>>2]=0,Se[f+24>>2]=0,Se[f+28>>2]=0,Se[f+16>>2]=65,f=372,r=i+112|0;Se[i>>2]=Se[f>>2],f=f+4|0,(0|(i=i+4|0))<(0|r););}else{i=0|e,r|=0,Se[(f=0|a)>>2]=0,Se[f+4>>2]=0,Se[f+8>>2]=0,Se[f+12>>2]=0,Se[f+16>>2]=0,Se[f+20>>2]=0,Se[f+24>>2]=0,Se[f+28>>2]=0,Se[f+16>>2]=r;for(var n=484,t=(f=i)+112|0;Se[f>>2]=Se[n>>2],n=n+4|0,(0|(f=f+4|0))<(0|t););4&r|0&&(Se[i+68>>2]=0),8&r|0&&(Se[i+76>>2]=0,Se[i+48>>2]=0),513&r|0&&(Se[i+12>>2]=0);}if(Se[e+140>>2]=7,Se[e+132>>2]=8,Se[e+136>>2]=44,e|=0,a|=0,i=0|Z(444)){for(f=(r=i)+112|0;Se[r>>2]=Se[e>>2],e=e+4|0,(0|(r=r+4|0))<(0|f););V(i+404|0,4),V(i+416|0,8),ge(i+148|0,0,256),(0!=(0|Se[i+64>>2])||0!=(0|Se[i+60>>2])||0|Se[i+84>>2])&&(Re[i+190>>0]=1,Re[i+243>>0]=1,Re[i+210>>0]=1,Re[i+274>>0]=1),0|Se[i+52>>2]&&(Re[i+244>>0]=2),0|Se[i+72>>2]&&(Re[i+158>>0]=3),(0!=(0|Se[i+68>>2])||0|Se[i+76>>2])&&(Re[i+239>>0]=4),Re[i+208>>0]=5,Re[i+240>>0]=6,Re[i+186>>0]=7,Re[i+212>>0]=9,Re[i+206>>0]=8,Re[i+267>>0]=10,Re[i+195>>0]=11,Re[i+242>>0]=12,Se[i+428>>2]=155,Se[i+112>>2]=a,Se[i+432>>2]=16,Se[i+436>>2]=64,Se[i+440>>2]=0;}else i=0;return 0|i;}function f(e,r,i,a,f,n,t){if(e|=0,r|=0,f|=0,t|=0,1<(n|=0)>>>0)n=0;else{var o=0|Se[8404+(n<<4)>>2],l=0|Se[8408+(n<<4)>>2],s=0|Se[8412+(n<<4)>>2],c=0|Se[8416+(n<<4)>>2];Se[s+144>>2]=0|i,Se[s+148>>2]=0|a;var b=0|u(128);i=0|Se[(n=s+128|0)>>2],0|t&&(Se[(t=c+124|0)>>2]=f,w(b,e,r,l),Se[t>>2]=0,Se[n>>2]|=64),Se[(a=s+124|0)>>2]=f,w(b,e,r,o),Se[a>>2]=0,Se[n>>2]=i,n=0|Z(1+(i=0|Se[b+4>>2])|0),Re[n+i>>0]=0,0|(a=0|Se[b>>2])&&ye(0|n,0|a,0|i),v(b);}return 0|n;}function n(e,r){e|=0,r|=0;var i=0;e:for(;;){if(14<=i>>>0){var a=0;break;}var f=0|ae(a=0|Se[68+(i<<2)>>2]);if(f>>>0<r>>>0&&0==(0|be(e,a,f))){if(0|ue(255&(a=0|Re[e+f>>0]))){a=1;break;}switch(a<<24>>24){case 35:case 47:case 63:a=1;break e;}}i=i+1|0;}return 0|a;}function t(e,r){var i;if(!(0|ue(0|Ie[(e|=0)>>0])))return 0;var a=(0|r)-1|0;for(r=0,i=1;!(i>>>0>=a>>>0);){var f=0|Re[e+i>>0];if(46!=f<<24>>24){if(!(45==f<<24>>24|0!=(0|ue(255&f))))break;}else r=r+1|0;i=i+1|0;}return 0|(0|r?i:0);}function o(e,r){e|=0,r|=0;var i,a,f=0,n=0;for(i=0;;){if(i>>>0>=r>>>0){i=r;break;}if(60==(0|Re[e+i>>0]))break;i=i+1|0;}e:do{if(i){r:for(;;){var t=i+-1|0,o=0|Re[e+t>>0];if(!(o<<24>>24))break e;do{if(!(0|te(4405,255&o,5))){switch(o<<24>>24){case 34:f=19;break r;case 39:f=20;break r;case 41:n=40;break r;case 93:f=17;break r;case 125:f=18;break r;case 59:break;default:break e;}for(i=r=i+-2|0;;){if(!i){i=0;break;}if(!(26>((32|Ie[e+i>>0])-97|0)>>>0|0))break;i=i+-1|0;}if(i>>>0<r>>>0&&38==(0|Re[e+i>>0]))break;}i=t;}while(0);if(!i){i=0;break e;}}for(17==(0|f)?n=91:18==(0|f)?n=123:19==(0|f)?n=34:20==(0|f)&&(n=39),a=f=r=0;(0|r)!=(0|i);){var l=0|Re[e+r>>0],s=(0|n)==(255&l|0);r=r+1|0,f=f+(1&s)|0,a=a+(l<<24>>24==o<<24>>24&(1^s)&1)|0;}i=(0|a)==(0|f)?i:t;}else i=0;}while(0);return 0|i;}function l(e,r,i,a,f){e|=0,r|=0,i|=0,a|=0,f|=0;do{if(0==(0|r)|2>a>>>0||(0|Ie[e+-1>>0])!=(f<<24>>24|0))e=0;else{if(1<r>>>0){if(e=(f=0|Re[e+-2>>0])<<24>>24,47==f<<24>>24){e=2;break;}if(0|se(e)){e=1;break;}return 0!=(0|ne(e))|0;}e=2<i>>>0&&47==(0|Re[e+-2>>0])&&92==(0|Re[e+-3>>0])?0:1;}}while(0);return 0|e;}function s(e,r){if(e|=0,16777216>=(r|=0)>>>0){var i=e+8|0,a=0|Se[i>>2];if(a>>>0<r>>>0){for(var f=0|Se[e+12>>2],n=a;(n=f+n|0)>>>0<r>>>0;);(a=0|re(0|Se[e>>2],n))?(Se[e>>2]=a,Se[i>>2]=n,a=0):a=-1;}else a=0;}else a=-1;return 0|a;}function u(e){e|=0;var r=0|Z(16);return 0|r&&(Se[r>>2]=0,Se[r+8>>2]=0,Se[r+4>>2]=0,Se[r+12>>2]=e),0|r;}function c(e,r,i){r|=0;var a=0,f=4+(e|=0)|0,n=0|Se[f>>2],t=n+(i|=0)|0;t>>>0>(0|Se[e+8>>2])>>>0?0<=(0|s(e,t))&&(n=0|Se[f>>2],a=4):a=4,4==(0|a)&&(ye((0|Se[e>>2])+n|0,0|r,0|i),Se[f>>2]=(0|Se[f>>2])+i);}function b(e,r){c(0|e,r|=0,0|ae(r));}function $(e,r){r|=0;var i=0,a=4+(e|=0)|0,f=0|Se[a>>2],n=f+1|0;n>>>0>(0|Se[e+8>>2])>>>0?0<=(0|s(e,n))&&(f=0|Se[a>>2],i=4):i=4,4==(0|i)&&(Re[(0|Se[e>>2])+f>>0]=r,Se[a>>2]=1+(0|Se[a>>2]));}function k(e,r){r|=0;var i=Ne;Ne=Ne+16|0;for(var a=i,f=a+14|0;Re[a>>0]=0,(0|(a=a+1|0))<(0|f););var n=0>(0|r),t=0;for(f=n?0-r|0:r;a=t+1|0,Re[i+t>>0]=48+((0|f)%10|0),9<(0|f);)t=a,f=(0|f)/10|0;for(n&&(Re[i+a>>0]=45,a=t+2|0),f=0;!((0|f)>=(0|(a=a+-1|0)));)r=0|Re[(t=i+f|0)>>0],Re[t>>0]=0|Re[(n=i+a|0)>>0],Re[n>>0]=r,f=f+1|0;b(0|e,i),Ne=i;}function v(e){0|(e|=0)&&(Q(0|Se[e>>2]),Q(e));}function d(e){0|(e|=0)&&(Q(0|Se[e>>2]),Se[e>>2]=0,Se[e+8>>2]=0,Se[e+4>>2]=0);}function h(e,r){(0|Se[(e=4+(0|e)|0)>>2])>>>0>=(r|=0)>>>0&&(Se[e>>2]=r);}function w(e,r,i,a){e|=0,r|=0,i|=0,a|=0;var f=0,n=Ne;Ne=Ne+16|0;var t=0|u(64);if(0|t){s(t,i);var o=a+116|0;Se[o>>2]=0,Se[o+4>>2]=0,Se[o+8>>2]=0,Se[o+12>>2]=0,Se[o+16>>2]=0,Se[o+20>>2]=0,Se[o+24>>2]=0,Se[o+28>>2]=0;var l=2<i>>>0&&(l=0==(0|$e(r,4807,3)))?3:0;e:for(;!(l>>>0>=i>>>0);){var b=r,k=l,d=i,h=n,w=o;b|=0,d|=0,h|=0,w|=0;var m,y,_=0,g=3+(k|=0)|0;r:do{if(g>>>0<d>>>0){if(32==(0|Re[b+k>>0])){if(32==(0|Re[b+(k+1)>>0])){if(32==(0|Re[b+(k+2)>>0])){if(32==(0|Re[b+g>>0])){g=0;break;}g=3;}else g=2;}else g=1;}else g=0;if(91==(0|Re[b+(g=g+k|0)>>0])){var A=y=g+1|0;i:for(;;){if(A>>>0>=d>>>0){g=0;break r;}switch(0|Re[b+A>>0]){case 13:case 10:g=0;break r;case 93:break i;}A=A+1|0;}var T=A+1|0;if(T>>>0<d>>>0&&58==(0|Re[b+T>>0])){g=A+2|0;i:for(;!(g>>>0>=d>>>0);){switch((k=0|Re[b+g>>0])<<24>>24){case 13:case 10:_=17;break i;case 32:break;default:break i;}g=g+1|0;}if(17==(0|_)){var E=g+1|0;g=E>>>0<d>>>0&&13==(0|Re[b+E>>0])&&10==k<<24>>24?g+2|0:E;}for(;;){if(g>>>0>=d>>>0){g=0;break r;}if(32!=(k=0|Re[b+g>>0])<<24>>24)break;g=g+1|0;}g=m=g+(60==k<<24>>24&1)|0;i:for(;!(g>>>0>=d>>>0);){switch(0|Re[b+g>>0]){case 13:case 10:case 32:break i;}g=g+1|0;}T=62==(0|Re[b+(T=g+-1|0)>>0])?T:g;i:for(;;){if(g>>>0>=d>>>0){_=31;break;}switch(0|Re[b+g>>0]){case 10:case 13:_=31;break i;case 40:case 39:case 34:k=0;break i;case 32:break;default:g=0;break r;}g=g+1|0;}31==(0|_)&&(k=g);var C=(E=g+1|0)>>>0<d>>>0&&10==(0|Re[b+g>>0])&&13==(0|Re[b+E>>0])?E:k;i:do{if(C){g=C;do{if((g=g+1|0)>>>0>=d>>>0)break i;}while(32==(0|Re[b+g>>0]));}}while(0);var R=g+1|0;i:do{if(R>>>0<d>>>0){switch(0|Re[b+g>>0]){case 40:case 34:case 39:k=R;break;default:E=R=0,g=C;break i;}a:for(;;){if(k>>>0>=d>>>0){_=41;break;}switch(g=k+1|0,0|Re[b+k>>0]){case 10:case 13:break a;default:k=g;}}41==(0|_)&&(g=k+1|0),g>>>0<d>>>0&&10==(0|Re[b+k>>0])&&13==(0|Re[b+g>>0])||(g=k);a:for(;;){if((k=k+-1|0)>>>0<=R>>>0){E=g,g=C;break i;}switch(0|Re[b+k>>0]){case 32:break;case 41:case 34:case 39:break a;default:E=g,g=C;break i;}}E=k;}else E=R=0,g=C;}while(0);(0|T)==(0|m)|0==(0|g)?g=0:(0|h&&(Se[h>>2]=g),w?(k=w,g=b+y|0,y=A-y|0,k|=0,g|=0,y|=0,(A=0|ee(1,16))?(y=0|j(g,y),Se[A>>2]=y,Se[A+12>>2]=Se[(y=k+((7&y)<<2)|0)>>2],Se[y>>2]=A):A=0,(k=0|A)?(w=0|u(g=T-m|0),Se[k+4>>2]=w,c(w,b+m|0,g),g=E-R|0,E>>>0>R>>>0&&(w=0|u(g),Se[k+8>>2]=w,c(w,b+R|0,g)),g=1):g=0):g=1);}else g=0;}else g=0;}else g=0;}while(0);if(0|g)l=0|Se[n>>2];else{h=l;r:for(;!(h>>>0>=i>>>0);){switch(0|Re[r+h>>0]){case 10:case 13:break r;}h=h+1|0;}if(Se[n>>2]=h,h>>>0>l>>>0){for(b=t,d=r+l|0,l=h-l|0,b|=0,d|=0,l|=0,h=E=0;E>>>0<l>>>0;){for(R=E;;){if(R>>>0>=l>>>0){w=0;break;}if(9==(0|Re[d+R>>0])){w=1;break;}R=R+1|0,h=h+1|0;}if(R>>>0>E>>>0&&c(b,d+E|0,R-E|0),!w)break;for(;$(b,32),0!=(3&(h=h+1|0)|0););E=R+1|0;}l=0|Se[n>>2];}else l=h;for(;;){if(l>>>0>=i>>>0)continue e;switch(0|Re[r+l>>0]){case 10:f=17;break;case 13:(h=l+1|0)>>>0<i>>>0&&10!=(0|Re[r+h>>0])&&(f=17);break;default:continue e;}17==(0|f)&&(f=0,$(t,10),l=0|Se[n>>2]),Se[n>>2]=l=l+1|0;}}}if(s(e,((l=0|Se[(r=t+4|0)>>2])>>>1)+l|0),(h=0|Se[a+104>>2])&&(Ye[3&h](e,0|Se[a+112>>2]),l=0|Se[r>>2]),0|l){switch(0|Re[(h=0|Se[t>>2])+(l+-1)>>0]){case 13:case 10:break;default:$(t,10),h=0|Se[t>>2],l=0|Se[r>>2];}p(e,a,h,l);}for(0|(l=0|Se[a+108>>2])&&Ye[3&l](e,0|Se[a+112>>2]),v(t),e=0|o,r=0;8!=(0|r);){for(i=0|Se[e+(r<<2)>>2];i;)a=0|Se[i+12>>2],v(0|Se[i+4>>2]),v(0|Se[i+8>>2]),Q(i),i=a;r=r+1|0;}}Ne=n;}function p(e,r,i,a){e|=0,r|=0,i|=0,a|=0;var f=0,n=0,t=0,o=0,l=0,s=0,u=0,b=0,k=0,v=0;e:do{if(((0|Se[r+408>>2])+(0|Se[r+420>>2])|0)>>>0<=(0|Se[r+432>>2])>>>0)r:for(l=r+12|0,s=r+428|0,u=r+20|0,b=r+112|0,f=0;;){if(f>>>0>=a>>>0)break e;if(0|m(r,t=i+f|0,o=a-f|0)){var d=e,h=r,w=t,q=o;d|=0,h|=0,w|=0,q|=0;var U=0,j=0,L=0,D=0,H=0;for(D=0;;){if(!(D>>>0<q>>>0&6>D>>>0)){L=D;break;}if(35!=(0|Re[w+D>>0])){L=D;break;}D=D+1|0;}for(;;){if(L>>>0>=q>>>0){H=L;break;}if(32!=(0|Re[w+L>>0])){H=L;break;}L=L+1|0;}for(;;){if(H>>>0>=q>>>0){q=H;break;}if(10==(0|Re[w+H>>0])){q=H;break;}H=H+1|0;}for(;;){if(!q){q=0;break;}if(35!=(0|Re[w+(U=q+-1|0)>>0]))break;q=U;}for(;q;){if(32!=(0|Re[w+(U=q+-1|0)>>0])){j=15;break;}q=U;}15==(0|j)&&q>>>0>L>>>0&&(N(U=0|x(h,1),h,w+L|0,q-L|0),0|(q=0|Se[h+16>>2])&&Je[7&q](d,U,D,0|Se[h+112>>2]),M(h,1)),f=(0|H)+f|0;}else if(60==(0|Re[t>>0])&&0|Se[l>>2]&&0|(k=0|y(e,r,t,o,1)))f=k+f|0;else if(0|(n=0|_(t,o)))f=n+f|0;else if(0|g(t,o)){for((n=0|Se[u>>2])&&Ye[3&n](e,0|Se[b>>2]);!(f>>>0>=a>>>0);){if(n=f+1|0,10==(0|Re[i+f>>0])){f=n;continue r;}f=n;}f=f+1|0;}else{if(4&(n=0|Se[s>>2])){var F=e,B=r,z=t,V=o;F|=0,B|=0,z|=0,V|=0;var W,G,Y,X=0,J=0,Z=0,re=0,ie=0,ae=0,fe=0;if(Y=Ne,Ne=Ne+32|0,W=Y,Se[(G=Y+16|0)>>2]=0,Se[G+4>>2]=0,Se[G+8>>2]=0,Se[G+12>>2]=0,X=0|O(z,V,G)){for(fe=0|x(B,0),ie=W+4|0;!(X>>>0>=V>>>0);){if(Se[W>>2]=0,Se[W+4>>2]=0,Se[W+8>>2]=0,Se[W+12>>2]=0,0!=(0|(J=0|O(re=z+X|0,V-X|0,W)))&0==(0|Se[ie>>2])){ae=12;break;}for(J=X;!((Z=J+1|0)>>>0>=V>>>0)&&10!=(0|Re[z+J>>0]);)J=Z;J>>>0>=X>>>0&&(0|_(re,X=Z-X|0)?$(fe,10):c(fe,re,X)),X=Z;}12==(0|ae)&&(X=J+X|0),0|(ae=0|Se[fe+4>>2])&&10!=(0|Re[(0|Se[fe>>2])+(ae+-1)>>0])&&$(fe,10),0|(J=0|Se[B>>2])&&Je[7&J](F,fe,0|Se[G+4>>2]?G:0,0|Se[B+112>>2]),M(B,0);}else X=0;if(Ne=Y,n=0|X){f=n+f|0;continue r;}n=0|Se[s>>2];}var ne;if(ne=2&n|0){var te=e,oe=r,le=t,se=o;te|=0,oe|=0,le|=0,se|=0;var ce,be,$e,ke=0,ve=0,de=0,he=0,we=0,pe=0;$e=Ne,Ne=Ne+16|0,ke=$e+4|0,Se[(de=$e)>>2]=0,ce=0|x(oe,1),be=0|x(oe,0);var me=void 0,ye=void 0,ge=void 0,Ae=void 0,Te=void 0,Ee=ce,Ce=oe,Oe=le,xe=se,Me=ke,Pe=de;Ee|=0,Ce|=0,Oe|=0,xe|=0,Me|=0,Pe|=0;var qe=0,Ue=0,je=0;for(ge=ye=0;!(ye>>>0>=xe>>>0)&&10!=(Te=0|Re[Oe+ye>>0])<<24>>24;)ye=ye+1|0,ge=ge+(124==Te<<24>>24&1)|0;if(0==(0|ge)|(0|ye)==(0|xe))Te=0;else{for(Ae=ye;;){if(!Ae){Ue=0,Ae=ge,Te=Oe;break;}if(!(0|P(0|Ie[(Te=Oe+(qe=Ae+-1|0)|0)>>0]))){je=8;break;}Ae=qe;}if(8==(0|je)&&(Ue=Ae,Ae=ge+((124==(0|Re[Oe>>0]))<<31>>31)|0),(Ae=Ae+((124==(0|Re[Te>>0]))<<31>>31)+1|0)>>>0<=(0|Se[Ce+436>>2])>>>0){for(Se[Me>>2]=Ae,me=0|ee(Ae,4),Se[Pe>>2]=me,(Te=ye+1|0)>>>0<xe>>>0&&(Te=124==(0|Re[Oe+Te>>0])?ye+2|0:Te),Pe=Te;;){if(Pe>>>0>=xe>>>0){ge=0;break;}if(10==(0|Re[Oe+Pe>>0])){ge=0;break;}Pe=Pe+1|0;}for(;Te>>>0<Pe>>>0&ge>>>0<Ae>>>0;){for(;Te>>>0<Pe>>>0&32==(Ae=0|Re[Oe+Te>>0])<<24>>24;)Te=Te+1|0;58==Ae<<24>>24?(Se[(Ae=me+(ge<<2)|0)>>2]|=1,Ae=1,Te=Te+1|0):Ae=0;i:for(;!(Te>>>0>=Pe>>>0);){switch(0|Re[Oe+Te>>0]){case 58:je=24;break i;case 45:break;default:break i;}Ae=Ae+1|0,Te=Te+1|0;}for(24==(0|je)&&(Se[(je=me+(ge<<2)|0)>>2]|=2,Ae=Ae+1|0,Te=Te+1|0);;){if(Te>>>0>=Pe>>>0){je=30;break;}if(32!=(qe=0|Re[Oe+Te>>0])<<24>>24){je=29;break;}Te=Te+1|0;}if(29==(0|je)){if(je=0,0==(0|Ae)|124!=qe<<24>>24)break;}else if(30==(0|je)&&(je=0,0==(0|Ae)))break;ge=ge+1|0,Te=Te+1|0,Ae=0|Se[Me>>2];}ge>>>0>=(Te=0|Se[Me>>2])>>>0?(K(Ee,Ce,Oe,Ue,Te,me,4),Te=Pe+1|0):Te=0;}else Te=0;}if(ve=0|Te){for(pe=0|Se[ke>>2],ke=0|Se[de>>2];ve>>>0<se>>>0;){for(de=0,he=ve;!(he>>>0>=se>>>0)&&10!=(we=0|Re[le+he>>0])<<24>>24;)de=de+(124==we<<24>>24&1)|0,he=he+1|0;if((0|he)==(0|se)|0==(0|de))break;K(be,oe,le+ve|0,he-ve|0,pe,ke,0),ve=he+1|0;}(de=0|Se[oe+36>>2])&&Je[7&de](te,ce,be,0|Se[oe+112>>2]);}else ve=0,ke=0|Se[de>>2];Q(ke),M(oe,1),M(oe,0),Ne=$e,ne=0|(v=0|ve);}if(ne)var Le=v+f|0;else{if(0|A(t,o)){var De=e,He=r,Fe=t,Ke=o;De|=0,Fe|=0,Ke|=0;var Be,ze=0,Ve=0,We=0,Ge=0,Ze=0,Qe=0,er=0,rr=0,ir=0;Be=0|x(He|=0,0),Ve=ir=ze=0;i:for(;;){for(;;){if(!(Ve>>>0<Ke>>>0))break i;for(er=Ve;;){if((rr=er+1|0)>>>0>=Ke>>>0){We=0;break;}if(10==(0|Re[Fe+er>>0])){We=1;break;}er=rr;}if(Qe=0|A(Ge=Fe+Ve|0,Ze=rr-Ve|0))Ve=Qe+Ve|0;else if(0|_(Ge,Ze)){if(!We){Ve=rr;break i;}if(0==(0|A(We=Fe+rr|0,Ge=Ke-rr|0))&&0==(0|_(We,Ge))){Ve=rr;break i;}}if(!(er>>>0<Ve>>>0))break;Ve=rr;}We=Fe+Ve|0,ze?(0|We)!=(0|(Ge=ze+ir|0))&&_e(0|Ge,0|We,rr-Ve|0):ze=We,ir=rr+ir-Ve|0,Ve=rr;}p(Be,He,ze,ir),0|(ze=0|Se[He+4>>2])&&Xe[7&ze](De,Be,0|Se[He+112>>2]),M(He,0);var ar=(0|Ve)+f|0;}else{if(0|T(t,o)){var fr=e,nr=r,tr=t,or=o;fr|=0,tr|=0,or|=0;var lr,sr=0,ur=0,cr=0,br=0,$r=0,kr=0,vr=0,dr=0,hr=0;lr=0|x(nr|=0,0),ur=hr=sr=0;i:for(;;){for(;;){if(!(ur>>>0<or>>>0))break i;for(vr=ur;;){if((dr=vr+1|0)>>>0>=or>>>0){cr=0;break;}if(10==(0|Re[tr+vr>>0])){cr=1;break;}vr=dr;}if(kr=0|T(br=tr+ur|0,$r=dr-ur|0))ur=kr+ur|0;else if(0|_(br,$r)){if(!cr){ur=dr;break i;}if(0==(0|T(cr=tr+dr|0,br=or-dr|0))&&0==(0|_(cr,br))){ur=dr;break i;}}if(!(vr>>>0<ur>>>0))break;ur=dr;}cr=tr+ur|0,sr?(0|cr)!=(0|(br=sr+hr|0))&&_e(0|br,0|cr,dr-ur|0):sr=cr,hr=dr+hr-ur|0,ur=dr;}p(lr,nr,sr,hr),0|(sr=0|Se[nr+8>>2])&&Xe[7&sr](fr,lr,0|Se[nr+112>>2]),M(nr,0);var wr=(0|ur)+f|0;}else{if(0|E(t,o)){var pr=e,mr=r,yr=t,_r=o;pr|=0,yr|=0,_r|=0;var gr,Ar=0,Tr=0,Er=0,Cr=0,Rr=0,Sr=0;for(gr=0|x(mr|=0,0),Sr=0;Sr>>>0<_r>>>0;){for(Cr=Sr;!((Rr=Cr+1|0)>>>0>=_r>>>0)&&10!=(0|Re[yr+Cr>>0]);)Cr=Rr;if(Er=0|E(Ar=yr+Sr|0,Tr=Rr-Sr|0))Ar=Er+Sr|0;else{if(!(0|_(Ar,Tr)))break;Ar=Sr;}Cr>>>0<Ar>>>0||(0|_(Tr=yr+Ar|0,Ar=Rr-Ar|0)?$(gr,10):c(gr,Tr,Ar)),Sr=Rr;}for(Ar=0|Se[(Tr=gr+4|0)>>2];Ar&&10==(0|Re[(0|Se[gr>>2])+(Ar=Ar+-1|0)>>0]);)Se[Tr>>2]=Ar;$(gr,10),0|(Ar=0|Se[mr>>2])&&Je[7&Ar](pr,gr,0,0|Se[mr+112>>2]),M(mr,0);var Ir=(0|Sr)+f|0;}else{if(0|C(t,o))var Or=(0|R(e,r,t,o,0))+f|0;else{if(0|S(t,o))var xr=(0|R(e,r,t,o,1))+f|0;else{var Nr=e,Mr=r,Pr=t,qr=o;Nr|=0,Pr|=0,qr|=0;var Ur,jr,Lr=0,Dr=0,Hr=0,Fr=0,Kr=0,Br=0;for(Ur=428+(Mr|=0)|0,jr=Mr+12|0,Lr=0;;){if(!(Lr>>>0<qr>>>0)){Kr=0,Br=Lr;break;}Br=Lr;do{if(Dr=Br,(Br=Br+1|0)>>>0>=qr>>>0)break;}while(10!=(0|Re[Pr+Dr>>0]));if(0|A(Fr=Pr+Lr|0,Br-Lr|0)){Kr=0,Br=Lr;break;}if(0|_(Fr,Kr=qr-Lr|0)){Kr=0;break;}if(0|(Dr=0|I(Fr,Kr))){Kr=Dr;break;}if(0|m(Mr,Fr,Kr)){Kr=0,Br=Lr;break;}if(0|g(Fr,Kr)){Kr=0,Br=Lr;break;}if(0|A(Fr,Kr)){Kr=0,Br=Lr;break;}if(256&(Dr=0|Se[Ur>>2])){if(0|ue(255&(Hr=0|Re[Fr>>0])))Lr=Br;else{if(0|S(Fr,Kr)){Kr=0,Br=Lr;break;}if(0|C(Fr,Kr)){Kr=0,Br=Lr;break;}if(60==Hr<<24>>24&&0!=(0|Se[jr>>2])){if(0|y(Nr,Mr,Fr,Kr,0)){Kr=0,Br=Lr;break;}Dr=0|Se[Ur>>2];}if(4&Dr){if(0|O(Fr,Kr,0)){Kr=0,Br=Lr;break;}Lr=Br;}else Lr=Br;}}else Lr=Br;}for(;;){if(!Lr){Lr=Dr=0;break;}if(10!=(0|Re[Pr+(Dr=Lr+-1|0)>>0])){Dr=1;break;}Lr=Dr;}if(Kr){i:do{if(Dr){for(Fr=Lr;;){if(!(Dr=Fr+-1|0)){Dr=0;break;}if(10==(0|Re[Pr+Dr>>0]))break;Fr=Dr;}for(;;){if(!Dr)break i;if(10!=(0|Re[Pr+(Hr=Dr+-1|0)>>0]))break;Dr=Hr;}N(Hr=0|x(Mr,0),Mr,Pr,Dr),0|(Dr=0|Se[Mr+32>>2])&&Xe[7&Dr](Nr,Hr,0|Se[Mr+112>>2]),M(Mr,0),Pr=Pr+Fr|0,Lr=Lr-Fr|0;}else Lr=0;}while(0);N(Dr=0|x(Mr,1),Mr,Pr,Lr),0|(Lr=0|Se[Mr+16>>2])&&Je[7&Lr](Nr,Dr,Kr,0|Se[Mr+112>>2]),M(Mr,1);}else N(Dr=0|x(Mr,0),Mr,Pr,Lr),0|(Lr=0|Se[Mr+32>>2])&&Xe[7&Lr](Nr,Dr,0|Se[Mr+112>>2]),M(Mr,0);xr=(0|Br)+f|0;}Or=xr;}Ir=Or;}wr=Ir;}ar=wr;}Le=ar;}f=Le;}}}while(0);}function m(e,r,i){e|=0,r|=0,i|=0;var a,f=0;do{if(35==(0|Re[r>>0])){if(64&Se[e+428>>2]){for(a=0;;){var n=a>>>0<i>>>0;if(!(n&6>a>>>0)){e=6;break;}if(35!=(e=0|Re[r+a>>0])<<24>>24){f=e,e=8;break;}a=a+1|0;}if(6==(0|e)&&n&&(f=0|Re[r+a>>0],e=8),8==(0|e)&&32!=f<<24>>24){e=0;break;}}e=1;}else e=0;}while(0);return 0|e;}function y(e,r,i,a,f){e|=0,r|=0,a|=0,f|=0;var n=0,t=0,o=0,l=0,s=0,u=Ne;Ne=Ne+16|0,Se[u>>2]=i|=0;var c=u+4|0;Se[c>>2]=0,Se[u+8>>2]=0,Se[u+12>>2]=0;e:do{if(2<=a>>>0&&60==(0|Re[i>>0])){var b,$=1;r:for(;!($>>>0>=a>>>0);){switch(0|Re[i+$>>0]){case 32:case 62:l=6;break r;}$=$+1|0;}if(b=6==(0|l)){b=i+1|0;var k=$+-1|0;b|=0,k|=0;var v=0;do{if(10>(k+-1|0)>>>0){var d=b,h=k;if(d|=0,38>(d=(h=1==(0|(h|=0))?1:(0|Ie[1+(0|Ie[d+1>>0])+4550>>0])+h|0)+(0|Ie[4550+(0|Ie[d>>0])>>0])|0)>>>0&&0==(-33&(Re[(v=0|Se[124+(d<<2)>>2])>>0]^Re[b>>0]))<<24>>24&&0==(0|be(b,v,k))&&0==(0|Re[v+k>>0]))break;}v=0;}while(0);b=0|(n=0|v);}if(b){if(!($=0|B(n,i,a,1))){if(!(0|fe(n,4535))){$=0;break;}if(!(0|fe(n,4457))){$=0;break;}if(!($=0|B(n,i,a,0))){$=0;break;}}Se[c>>2]=$,f&&(n=0|Se[r+12>>2])&&Xe[7&n](e,u,0|Se[r+112>>2]);}else{if(5<a>>>0){if(33==($=0|Re[i+1>>0])<<24>>24){if(45!=(0|Re[i+2>>0])){$=0;break;}if(45!=(0|Re[i+3>>0])){$=0;break;}for(n=5;;){if(n>>>0>=a>>>0){l=16;break;}if(45!=(0|Re[i+(n+-2)>>0])||45!=(0|Re[i+(n+-1)>>0]))n=n+1|0;else{if($=n+1|0,62==(0|Re[i+n>>0]))break;n=$;}}if(16==(0|l)&&($=n+1|0),$>>>0<a>>>0&&0!=(0|(t=0|_(i+$|0,a-$|0)))){if(Se[c>>2]=$=t+$|0,!f)break;if(!(n=0|Se[r+12>>2]))break;Xe[7&n](e,u,0|Se[r+112>>2]),$=0|Se[c>>2];break;}l=22;}}else l=22;if(22==(0|l)){if(4>=a>>>0){$=0;break;}$=0|Re[i+1>>0];}switch($<<24>>24){case 72:case 104:break;default:$=0;break e;}switch(0|Re[i+2>>0]){case 82:case 114:n=3;break;default:$=0;break e;}for(;;){if(n>>>0>=a>>>0){l=27;break;}if($=n+1|0,62==(0|Re[i+n>>0]))break;n=$;}27==(0|l)&&($=n+1|0),$>>>0<a>>>0&&0!=(0|(o=0|_(i+$|0,a-$|0)))?(Se[c>>2]=$=o+$|0,0!=(0|f)&&0!=(0|(s=0|Se[r+12>>2]))&&(Xe[7&s](e,u,0|Se[r+112>>2]),$=0|Se[c>>2])):$=0;}}else $=0;}while(0);return Ne=u,0|$;}function _(e,r){e|=0,r|=0;var i=0,a=0;e:for(;;){if(a>>>0>=r>>>0){i=5;break;}switch(0|Re[e+a>>0]){case 10:i=5;break e;case 32:break;default:a=0;break e;}a=a+1|0;}return 5==(0|i)&&(a=a+1|0),0|a;}function g(e,r){e|=0,r|=0;e:do{if(3<=r>>>0){var i=32==(0|Re[e>>0])?32==(0|Re[e+1>>0])?32==(0|Re[e+2>>0])?3:2:1:0;if((i+2|0)>>>0<r>>>0){var a=0|Re[e+i>>0];switch(a<<24>>24){case 95:case 45:case 42:var f=0;break;default:i=0;break e;}for(;!(i>>>0>=r>>>0);){var n=0|Re[e+i>>0];if(10==n<<24>>24)break;if(n<<24>>24!=a<<24>>24){if(32!=n<<24>>24){i=0;break e;}}else f=f+1|0;i=i+1|0;}i=2<f>>>0&1;}else i=0;}else i=0;}while(0);return 0|i;}function A(e,r){e|=0;var i=0,a=0,f=(r|=0)?32==(0|Re[e>>0])&1:0;f>>>0<r>>>0&&(f=f+(32==(0|Re[e+f>>0])&1)|0),f>>>0<r>>>0&&(f=f+(32==(0|Re[e+f>>0])&1)|0);e:do{if(f>>>0<r>>>0&&62==(0|Re[e+f>>0])&&(i=f+1|0)>>>0<r>>>0){switch(0|Re[e+i>>0]){case 33:a=12;break e;case 32:break;default:break e;}i=f+2|0;}else a=12;}while(0);return 12==(0|a)&&(i=0),0|i;}function T(e,r){e|=0;var i=0,a=(r|=0)?32==(0|Re[e>>0])&1:0;a>>>0<r>>>0&&(a=a+(32==(0|Re[e+a>>0])&1)|0);var f=a>>>0<r>>>0?a+(32==(0|Re[e+a>>0])&1)|0:a;if((a=f+1|0)>>>0<r>>>0&&62==(0|Re[(i=e+f|0)>>0])&&33==(0|Re[e+a>>0])){if(0!=(0|(a=0|H(i+1|0,r+-1-f|0,60)))&(i=a+f|0)>>>0<r>>>0&&33==(0|Re[e+i>>0]))a=0;else if((a=f+2|0)>>>0<r>>>0)return 0|(32==(0|Re[e+a>>0])?f+3|0:a);}else a=0;return 0|a;}function E(e,r){return e|=0,0|(3<(0|r)>>>0&&32==(0|Re[e>>0])&&32==(0|Re[e+1>>0])&&32==(0|Re[e+2>>0])&&32==(0|Re[e+3>>0])?4:0);}function C(e,r){e|=0;var i=(r|=0)?32==(0|Re[e>>0])&1:0;i>>>0<r>>>0&&(i=i+(32==(0|Re[e+i>>0])&1)|0),i>>>0<r>>>0&&(i=i+(32==(0|Re[e+i>>0])&1)|0);var a=i+1|0;e:do{if(a>>>0<r>>>0){var f=e+i|0;switch(0|Re[f>>0]){case 45:case 43:case 42:break;default:break e;}if(32==(0|Re[e+a>>0]))return 0|((r=0==(0|F(f,r-i|0)))?i+2|0:0);}}while(0);return 0;}function R(e,r,i,a,f){e|=0,r|=0,i|=0,a|=0;var n=Ne;Ne=Ne+16|0,Se[n>>2]=0|f;var t=0|x(r,0);f=0;do{if(f>>>0>=a>>>0)break;var o=t,l=r,s=i+f|0,u=a-f|0,b=n;o|=0,l|=0,s|=0,u|=0,b|=0;var k,v,d,h,w,m=0,y=0;for(w=0;3>w>>>0&w>>>0<u>>>0&&32==(0|Re[s+w>>0]);)w=w+1|0;if((k=0|C(s,u))?(m=k,y=7):(k=0|S(s,u))?(m=k,y=7):k=0,7==(0|y)){for(k=m;!(k>>>0>=u>>>0)&&10!=(0|Re[s+(k+-1)>>0]);)k=k+1|0;var A=0|x(l,1),T=0|x(l,1);c(A,s+m|0,k-m|0);var E=l+428|0,R=A+4|0,I=v=d=0;e:for(;;){for(h=0;;){if(!(k>>>0<u>>>0))break e;for(var P=k;;){var q=P+1|0;if(q>>>0>=u>>>0)break;if(10==(0|Re[s+P>>0]))break;P=q;}var U=s+k|0,j=q-k|0;if(!(0|_(U,j))){var L=0;break;}h=1,k=q;}for(;!(4<=L>>>0||(m=L+k|0)>>>0>P>>>0||32!=(0|Re[s+m>>0]));)L=L+1|0;var D=U+L|0,H=j-L|0,F=4&Se[E>>2]?(F=0==(0|O(D,H,0)))?d:0==(0|d)&1:d;if(F?U=P=0:(U=0|C(D,H),P=0|S(D,H)),j=0!=(0|h)){if(0!=(0|U)&0!=(0|(m=1&(d=0|Se[b>>2])))){y=28;break;}if(0!=(0|P)&0==(0|m)){y=28;break;}}if(32==(0|(y=U?0!=(0|P)|0==(0|g(D,H))?32:35:P?32:35))){if(y=0,v=j?1:v,(0|L)==(0|w))break;k=I||0|Se[R>>2];}else if(35==(0|y)){if(y=0,j&0==(0|L)){y=36;break;}j?($(A,10),k=I,v=1):k=I;}c(A,D,H),d=F,I=k,k=q;}28==(0|y)?Se[b>>2]=8|d:36==(0|y)&&(Se[b>>2]|=8),m=0|Se[b>>2],v&&(Se[b>>2]=m|=2),U=0!=(0|I)&I>>>0<(v=0|Se[R>>2])>>>0,P=0|Se[A>>2],2&m?U?(p(T,l,P,I),p(T,l,(0|Se[A>>2])+I|0,(0|Se[R>>2])-I|0)):p(T,l,P,v):U?(N(T,l,P,I),p(T,l,(0|Se[A>>2])+I|0,(0|Se[R>>2])-I|0)):N(T,l,P,v),0|(m=0|Se[l+28>>2])&&Je[7&m](o,T,0|Se[b>>2],0|Se[l+112>>2]),M(l,1),M(l,1);}if(f=(o=0|k)+f|0,!o)break;}while(0==(8&Se[n>>2]|0));return 0|(i=0|Se[r+24>>2])&&Je[7&i](e,t,0|Se[n>>2],0|Se[r+112>>2]),M(r,0),Ne=n,0|f;}function S(e,r){e|=0;var i=0,a=0,f=0,n=(r|=0)?32==(0|Re[e>>0])&1:0;if(n>>>0<r>>>0&&(n=n+(32==(0|Re[e+n>>0])&1)|0),n>>>0<r>>>0&&(n=n+(32==(0|Re[e+n>>0])&1)|0),n>>>0<r>>>0&&9>=((0|Re[e+n>>0])-48&255)){for(;;){if(n>>>0>=r>>>0){f=10;break;}if(i=n+1|0,!(10>((0|Re[e+n>>0])-48&255)))break;n=i;}if(10==(0|f)&&(i=n+1|0),i>>>0<r>>>0&&46==(0|Re[(a=e+n|0)>>0])&&32==(0|Re[e+i>>0]))return 0|((f=0==(0|F(a,r-n|0)))?n+2|0:0);}return 0;}function I(e,r){var i;e|=0,r|=0;e:do{switch(0|Re[e>>0]){case 61:for(i=1;!(i>>>0>=r>>>0)&&61==(0|Re[e+i>>0]);)i=i+1|0;for(;;){if(i>>>0>=r>>>0){i=1;break e;}var a=0|Re[e+i>>0];if(32!=a<<24>>24)break;i=i+1|0;}i=10==a<<24>>24&1;break;case 45:for(i=1;!(i>>>0>=r>>>0)&&45==(0|Re[e+i>>0]);)i=i+1|0;for(;;){if(i>>>0>=r>>>0){i=2;break e;}if(32!=(a=0|Re[e+i>>0])<<24>>24)break;i=i+1|0;}i=10==a<<24>>24?2:0;break;default:i=0;}}while(0);return 0|i;}function O(e,r,i){i|=0;var a=0,f=0,n=0|(e|=0),t=0|(r|=0);e:do{if(3<=t>>>0){var o=32==(0|Re[n>>0])?32==(0|Re[n+1>>0])?32==(0|Re[n+2>>0])?3:2:1:0;if((o+2|0)>>>0<t>>>0){var l=0|Re[n+o>>0];switch(l<<24>>24){case 96:case 126:var s=0;break;default:o=0;break e;}for(;!(o>>>0>=t>>>0)&&(0|Re[n+o>>0])==l<<24>>24;)s=s+1|0,o=o+1|0;o=3>s>>>0?0:o;}else o=0;}else o=0;}while(0);n=0|o;e:do{if(n){r:for(;;){if(t=e+n|0,n>>>0>=r>>>0){a=0,o=17;break;}switch(0|Re[t>>0]){case 123:f=0,o=5;break r;case 32:break;default:a=0,o=17;break r;}n=n+1|0;}r:do{if(5==(0|o)){i:for(;!((a=n+1|0)>>>0>=r>>>0);){switch(0|Re[e+a>>0]){case 10:case 125:break i;}f=f+1|0,n=a,o=5;}if((0|a)==(0|r)){n=0;break e;}if(125!=(0|Re[e+a>>0])){n=0;break e;}for(a=f;;){if(f=t+1|0,!a){a=0;break;}if(!(0|P(0|Ie[f>>0])))break;a=a+-1|0,t=f;}for(;;){if(!a){a=0;break;}if(!(0|P(0|Ie[t+a>>0])))break;a=a+-1|0;}t=f,n=n+2|0;}else if(17==(0|o))for(;;){if(n>>>0>=r>>>0)break r;if(0|P(0|Ie[e+n>>0]))break r;n=n+1|0,a=a+1|0;}}while(0);for(i&&(Se[i>>2]=t,Se[i+4>>2]=a);!(n>>>0>=r>>>0)&&10!=(a=0|Re[e+n>>0])<<24>>24;){if(!(0|P(255&a))){n=0;break e;}n=n+1|0;}n=n+1|0;}else n=0;}while(0);return 0|n;}function x(e,r){var i=0,a=404+(e|=0)+(12*(r|=0)|0)|0,f=e+404+(12*r|0)+4|0,n=0|Se[f>>2];return n>>>0<(0|Se[e+404+(12*r|0)+8>>2])>>>0&&0!=(0|(i=0|Se[(0|Se[a>>2])+(n<<2)>>2]))?(Se[f>>2]=n+1,Se[i+4>>2]=0):(r=0|(i=0|u(0|Se[332+(r<<2)>>2])),0<=(0|z(e=0|a,Se[(a=e+4|0)>>2]<<1))&&(f=0|Se[e>>2],Se[a>>2]=1+(e=0|Se[a>>2]),Se[f+(e<<2)>>2]=r)),0|i;}function N(e,r,i,a){var f,n,t,o;e|=0,r|=0,i|=0,a|=0;var l=Ne;Ne=Ne+16|0,Se[l>>2]=0,Se[l+4>>2]=0,Se[l+8>>2]=0,Se[l+12>>2]=0;e:do{if(((0|Se[r+408>>2])+(0|Se[r+420>>2])|0)>>>0<=(0|Se[r+432>>2])>>>0){var s=r+100|0,u=l+4|0,b=r+112|0;for(o=f=0;;){for(t=n=o;;){if(!(t>>>0<a>>>0))break e;for(var $=n;;){if($>>>0>=a>>>0){n=0;break;}if((f=0|Re[(0|Ie[i+$>>0])+(r+148)>>0])<<24>>24){n=1;break;}f=0,$=$+1|0;}var k=0|Se[s>>2],v=i+t|0;if(k?(Se[l>>2]=v,Se[u>>2]=$-t,Xe[7&k](e,l,0|Se[b>>2])):c(e,v,$-t|0),!n)break e;if(0|(n=0|Ge[15&Se[280+((255&f)<<2)>>2]](e,r,i+$|0,$-o|0,$,a-$|0)))break;n=$+1|0,t=$;}o=n+$|0;}}}while(0);Ne=l;}function M(e,r){Se[(r=404+(0|e)+(12*(0|r)|0)+4|0)>>2]=(0|Se[r>>2])-1;}function P(e){return 1&(32==(0|(e|=0))|10==(0|e))|0;}function q(e,r){var i;e|=0;var a=4+(r|=0)|0;for(i=0;;){var f=0|Se[a>>2];if(!(i>>>0<f>>>0))break;for(var n=i;!(n>>>0>=f>>>0)&&92!=(0|Re[(0|Se[r>>2])+n>>0]);)n=n+1|0;if(n>>>0>i>>>0&&(c(e,(0|Se[r>>2])+i|0,n-i|0),f=0|Se[a>>2]),(i=n+1|0)>>>0>=f>>>0)break;$(e,0|Ie[(0|Se[r>>2])+i>>0]),i=n+2|0;}}function U(e,r,i){for(r=(0|e)+((7&(i=0|j(0|r,0|i)))<<2)|0;;){if(!(r=0|Se[r>>2])){r=0;break;}if((0|Se[r>>2])==(0|i))break;r=r+12|0;}return 0|r;}function j(e,r){var i,a;for(e|=0,r|=0,a=i=0;(0|a)!=(0|r);)i=(65599*i|0)+(0|ce(0|Ie[e+a>>0]))|0,a=a+1|0;return 0|i;}function L(e,r,i,a,f){var n;e|=0,i|=0,a|=0,f|=0;var t=64+(r|=0)|0;e:do{if(0|Se[t>>2]){var o=1<a>>>0&&(0|Re[i>>0])==f<<24>>24?(0|Re[i+1>>0])==f<<24>>24&1:0,l=r+428|0;for(n=95!=f<<24>>24;;){if(o>>>0>=a>>>0){o=0;break e;}var s=0|H(i+o|0,a-o|0,f);if(!s){o=0;break e;}if((o=s+o|0)>>>0>=a>>>0){o=0;break e;}if((0|Re[i+o>>0])==f<<24>>24&&!(0|P(0|Ie[i+(o+-1)>>0]))){if(0==(1&Se[l>>2]|0)|n|(0|(s=o+1|0))==(0|a))break;var u=0|Ie[i+s>>0];if(0|P(u))break;if(0|se(u))break;}}N(f=0|x(r,1),r,i,o),o=0|ze[15&Se[t>>2]](e,f,0|Se[r+112>>2]),M(r,1),o=0|o?s:0;}else o=0;}while(0);return 0|o;}function D(e,r,i,a,f){var n;e|=0,r|=0,i|=0,a|=0;var t=0|Se[(126==(f|=0)<<24>>24?r+88|0:r+60|0)>>2];e:do{if(t){for(n=0;;){if(n>>>0>=a>>>0){var o=0;break e;}if(!(o=0|H(i+n|0,a-n|0,f))){o=0;break e;}if(!((n=1+(o=o+n|0)|0)>>>0>=a>>>0)&&(0|Re[i+o>>0])==f<<24>>24&&0|o&&(0|Re[i+n>>0])==f<<24>>24&&!(0|P(0|Ie[i+(o+-1)>>0])))break;}N(f=0|x(r,1),r,i,o),t=0|ze[15&t](e,f,0|Se[r+112>>2]),M(r,1),o=0|t?o+2|0:0;}else o=0;}while(0);return 0|o;}function H(e,r,i){e|=0,r|=0;var a=0,f=60==(i|=0)<<24>>24,n=1,t=0;e:for(;;){var o=n;r:for(;;){i:for(;;){if(!(o>>>0<r>>>0)){o=0;break e;}var l=o;a:for(;;){if(l>>>0>=r>>>0){n=0;break;}if((o=0|Re[e+l>>0])<<24>>24==i<<24>>24){n=1;break;}switch(o<<24>>24){case 91:case 96:n=1;break a;}l=l+1|0;}if((0|l)==(0|r)){o=0;break e;}if(f&n&60==(o=0|Re[e+l>>0])<<24>>24){if(33==(0|Re[e+(l+-1)>>0])){o=l;break e;}o=60;}if(o<<24>>24==i<<24>>24){o=l;break e;}if(0|l&&92==(0|Re[e+(l+-1)>>0]))o=l+1|0;else switch(o<<24>>24){case 91:o=0;break r;case 96:var s=0;n=l;break i;default:o=l;}}for(;;){if(n>>>0>=r>>>0){o=0;break e;}if(96!=(0|Re[e+n>>0])){a=o=0;break;}s=s+1|0,n=n+1|0;}for(;(l=n>>>0<r>>>0)&a>>>0<s>>>0;)l=0|Re[e+n>>0],o=0==(0|o)?l<<24>>24==i<<24>>24?n:0:o,a=96==l<<24>>24?a+1|0:0,n=n+1|0;if(!l)break e;o=n;}for(;!((n=l+1|0)>>>0>=r>>>0)&&93!=(a=0|Re[e+n>>0])<<24>>24;)o=0==(0|o)&&a<<24>>24==i<<24>>24?n:o,l=n;n=l+2|0;r:for(;;){if(n>>>0>=r>>>0)break e;switch(0|Re[e+n>>0]){case 91:a=93,l=32;break r;case 40:l=31;break r;case 10:case 32:break;default:l=30;break r;}n=n+1|0;}if(30==(0|l)?(l=0,a=(s=0==(0|o))?2:1,o=s?t:o):31==(0|l)&&(a=41,l=32),32==(0|l)){for(;;){if((s=n+1|0)>>>0>=r>>>0){l=0;break;}if((0|a)==(255&(l=0|Re[e+s>>0])|0)){l=1;break;}o=0==(0|o)&&l<<24>>24==i<<24>>24?s:o,n=s;}a=1&(1^l),o=l?t:o,n=l?n+2|0:s;}switch(3&a){case 2:case 0:t=o;break;default:break e;}}return 0|o;}function F(e,r){e|=0,r|=0;var i,a=0,f=0;for(i=0;;){if(i>>>0>=r>>>0){f=3;break;}if(a=i+1|0,10==(0|Re[e+i>>0]))break;i=a;}return 3==(0|f)&&(a=i+1|0),0|(a>>>0<r>>>0?0|I(e+a|0,r-a|0):0);}function K(e,r,i,a,f,n,t){e|=0,i|=0,a|=0,f|=0,n|=0,t|=0;var o,l,s=0,u=Ne;Ne=Ne+16|0;var c=44+(r|=0)|0;if(0|Se[c>>2]&&0|Se[(s=r+40|0)>>2]){var b=0|x(r,1),$=a?124==(0|Re[i>>0])&1:0,k=r+112|0;for(l=0;l>>>0<f>>>0&$>>>0<a>>>0;){for(o=0|x(r,1);;){if($>>>0>=a>>>0){var v=$;break;}if(!(0|P(0|Ie[i+$>>0]))){v=$;break;}$=$+1|0;}for(;;){if(v>>>0>=a>>>0){var d=v;break;}if(124==(0|Re[i+v>>0])){d=v;break;}v=v+1|0;}for(;;){var h=d+-1|0;if(h>>>0<=$>>>0)break;if(!(0|P(0|Ie[i+h>>0])))break;d=h;}N(o,r,i+$|0,d-$|0),Ze[1&Se[c>>2]](b,o,Se[n+(l<<2)>>2]|t,0|Se[k>>2],0),M(r,1),l=l+1|0,$=v+1|0;}0|($=f-l|0)&&(Se[u>>2]=0,Se[u+4>>2]=0,Se[u+8>>2]=0,Se[u+12>>2]=0,Ze[1&Se[c>>2]](b,u,Se[n+(l<<2)>>2]|t,0|Se[k>>2],$)),Xe[7&Se[s>>2]](e,b,0|Se[k>>2]),M(r,1);}Ne=u;}function B(e,r,i,a){r|=0,i|=0;var f,n=0,t=0,o=0,l=0|ae(e|=0),s=0!=(0|a),u=l+3|0,c=i+1|0;for(a=0,f=1;;){if(!(f>>>0<i>>>0)){a=0;break;}for(t=f;!((f=t+1|0)>>>0>=i>>>0||47==(n=0|Re[r+f>>0])<<24>>24&&60==(0|Re[r+t>>0]));)a=a+(10==n<<24>>24&1)|0,t=f;if(!(s&0<(0|a)&&10!=(0|Re[r+(t+-1)>>0]))){if((u+t|0)>>>0>=i>>>0){a=0;break;}n=e;var b=l,$=r+t|0,k=c+~t|0;$|=0;var v=0,d=3+(b|=0)|0;if(n=d>>>0<(k|=0)>>>0&&0==(0|be($+2|0,0|n,b))&&62==(0|Re[$+(b+2)>>0])&&0!=(0|(v=0|_($+d|0,k-d|0)))?(n=(b=v+d|0)>>>0<k>>>0?0|_($+b|0,k-b|0):0)+b|0:0,n|=0){o=10;break;}}}return 10==(0|o)&&(a=n+t|0),0|a;}function z(e,r){var i,a=8+(e|=0)|0;if((0|Se[a>>2])>>>0<(r|=0)>>>0){if(i=0|re(0|Se[e>>2],r<<2)){var f=0|Se[a>>2];ge(i+(f<<2)|0,0,r-f<<2|0),Se[e>>2]=i,Se[a>>2]=r,(0|Se[(e=e+4|0)>>2])>>>0>r>>>0&&(Se[e>>2]=r),e=0;}else e=-1;}else e=0;return 0|e;}function V(e,r){r|=0,Se[(e|=0)>>2]=0,Se[e+4>>2]=0,Se[e+8>>2]=0,z(e,0==(0|r)?8:r);}function W(e,r,i){var a;r|=0;var f=Ne;Ne=Ne+16|0,s(e|=0,((12*(i|=0)|0)>>>0)/10|0),Re[f>>0]=37;var n=f+1|0,t=f+2|0;for(a=0;a>>>0<i>>>0;){for(var o=a;;){if(o>>>0>=i>>>0){var l=0;break;}if(1!=(0|Re[4842+(0|Ie[r+o>>0])>>0])){l=1;break;}o=o+1|0;}if(o>>>0>a>>>0&&c(e,r+a|0,o-a|0),!l)break;l=255&(a=0|Re[r+o>>0]);e:do{if(2!=(0|Re[4842+l>>0]))switch(a<<24>>24){case 38:c(e,6159,5);break e;case 39:c(e,5098,6);break e;default:Re[n>>0]=0|Re[5105+(l>>>4)>>0],Re[t>>0]=0|Re[5105+(15&a)>>0],c(e,f,3);break e;}}while(0);a=o+1|0;}Ne=f;}function G(e,r,i){var a,f;e|=0,r|=0,i|=0;e:do{if(3<=r>>>0&&60==(0|Re[e>>0])){for(f=a=47==(0|Re[e+1>>0])?2:1;!(f>>>0>=r>>>0);){var n=0|Re[i>>0];if(!(n<<24>>24))break;if((0|Ie[e+f>>0])!=(n<<24>>24|0))break e;f=f+1|0,i=i+1|0;}if((0|f)!=(0|r))return 0|((r=62==(r=0|Re[e+f>>0])<<24>>24|0!=(0|ne(255&r)))?a:0);}}while(0);return 0;}function Y(e,r){Se[(r|=0)>>2]=0,Se[r+4>>2]=0,Se[r+8>>2]=0;}function X(e,r,i){var a,f;for(r|=0,s(e|=0,((12*(i|=0)|0)>>>0)/10|0),f=a=0;f>>>0<i>>>0;){for(var n=f;;){if(n>>>0>=i>>>0){var t=0;break;}if(a=(t=0|Re[5122+(0|Ie[r+n>>0])>>0])<<24>>24,t<<24>>24){t=1;break;}n=n+1|0;}if(n>>>0>f>>>0&&c(e,r+f|0,n-f|0),!t)break;47!=(t=0|Re[r+n>>0])<<24>>24?7!=(0|Re[5122+(255&t)>>0])&&b(e,0|Se[340+(a<<2)>>2]):$(e,47),f=n+1|0;}}function J(e,r){return b(0|e,256&Se[16+(0|r)>>2]|0?5682:5689),1;}function Z(e){e|=0;var r=0,i=0,a=0,f=0,n=0,t=0,o=0,l=0,s=0,u=Ne;Ne=Ne+16|0;var c=u;do{if(245>e>>>0){var b=11>e>>>0?16:e+11&-8,$=0|Se[2225],k=$>>>(e=b>>>3);if(3&k|0){var v=8+(i=0|Se[(k=8+(e=8940+((r=(1&k^1)+e|0)<<1<<2)|0)|0)>>2])|0,d=0|Se[v>>2];return(0|d)==(0|e)?Se[2225]=$&~(1<<r):(Se[d+12>>2]=e,Se[k>>2]=d),Se[i+4>>2]=3|(s=r<<3),Se[(s=i+s+4|0)>>2]|=1,Ne=u,0|v;}if(b>>>0>(f=0|Se[2227])>>>0){if(0|k){var h=(r=((r=k<<e&((r=2<<e)|0-r))&0-r)-1|0)>>>12&16;return(0|(k=0|Se[(h=8+(d=0|Se[(e=8+(r=8940+((i=((k=(r>>>=h)>>>5&8)|h|(d=(r>>>=k)>>>2&4)|(e=(r>>>=d)>>>1&2)|(i=(r>>>=e)>>>1&1))+(r>>>i)|0)<<1<<2)|0)|0)>>2])|0)>>2]))==(0|r)?Se[2225]=e=$&~(1<<i):(Se[k+12>>2]=r,Se[e>>2]=k,e=$),a=(s=i<<3)-b|0,Se[d+4>>2]=3|b,Se[4+(v=d+b|0)>>2]=1|a,Se[d+s>>2]=a,0|f&&(i=0|Se[2230],k=8940+((r=f>>>3)<<1<<2)|0,e&(r=1<<r)?r=0|Se[(e=k+8|0)>>2]:(Se[2225]=e|r,r=k,e=k+8|0),Se[e>>2]=i,Se[r+12>>2]=i,Se[i+8>>2]=r,Se[i+12>>2]=k),Se[2227]=a,Se[2230]=v,Ne=u,0|h;}if(h=0|Se[2226]){k=(h&0-h)-1|0,k>>>=a=k>>>12&16;var w=(k>>>=d=k>>>5&8)>>>2&4;if(k=(-8&Se[4+(e=0|Se[9204+((d|a|w|(i=(k>>>=w)>>>1&2)|(e=(k>>>=i)>>>1&1))+(k>>>e)<<2)>>2])>>2])-b|0,i=0|Se[e+16+((0==(0|Se[e+16>>2])&1)<<2)>>2])for(;k=(w=(a=(-8&Se[i+4>>2])-b|0)>>>0<k>>>0)?a:k,e=w?i:e,0!=(0|(i=0|Se[i+16+((0==(0|Se[i+16>>2])&1)<<2)>>2])););if(d=k,(a=(w=e)+b|0)>>>0>w>>>0){v=0|Se[w+24>>2],r=0|Se[w+12>>2];do{if((0|r)==(0|w)){if(!(r=0|Se[(e=w+20|0)>>2])&&!(r=0|Se[(e=w+16|0)>>2])){k=0;break;}for(;;)if(0|(i=0|Se[(k=r+20|0)>>2]))r=i,e=k;else{if(!(i=0|Se[(k=r+16|0)>>2]))break;r=i,e=k;}Se[e>>2]=0;}else Se[12+(k=0|Se[w+8>>2])>>2]=r,Se[r+8>>2]=k;k=r;}while(0);do{if(0|v){if((0|w)==(0|Se[(e=9204+((r=0|Se[w+28>>2])<<2)|0)>>2])){if(Se[e>>2]=k,!k){Se[2226]=h&~(1<<r);break;}}else if(Se[v+16+(((0|Se[v+16>>2])!=(0|w)&1)<<2)>>2]=k,!k)break;Se[k+24>>2]=v,0|(r=0|Se[w+16>>2])&&(Se[k+16>>2]=r,Se[r+24>>2]=k),0|(r=0|Se[w+20>>2])&&(Se[k+20>>2]=r,Se[r+24>>2]=k);}}while(0);return 16>d>>>0?(Se[w+4>>2]=3|(s=d+b|0),Se[(s=w+s+4|0)>>2]|=1):(Se[w+4>>2]=3|b,Se[a+4>>2]=1|d,Se[a+d>>2]=d,0|f&&(i=0|Se[2230],k=8940+((r=f>>>3)<<1<<2)|0,$&(r=1<<r)?r=0|Se[(e=k+8|0)>>2]:(Se[2225]=$|r,r=k,e=k+8|0),Se[e>>2]=i,Se[r+12>>2]=i,Se[i+8>>2]=r,Se[i+12>>2]=k),Se[2227]=d,Se[2230]=a),Ne=u,0|w+8;}}}$=b;}else if(4294967231>=e>>>0){if(b=-8&(e=e+11|0),w=0|Se[2226]){i=0-b|0,h=(e>>>=8)?16777215<b>>>0?31:b>>>(7+(h=14-((f=(520192+(l=e<<($=(e+1048320|0)>>>16&8))|0)>>>16&4)|$|(h=(245760+(l<<=f)|0)>>>16&2))+(l<<h>>>15)|0)|0)&1|h<<1:0,k=0|Se[9204+(h<<2)>>2];e:do{if(k)for(e=0,a=k,d=b<<(31==(0|h)?0:25-(h>>>1)|0),k=0;;){if((v=(-8&Se[a+4>>2])-b|0)>>>0<i>>>0){if(!v){i=0,e=k=a,l=61;break e;}e=a,i=v;}if(k=0==(0|(v=0|Se[a+20>>2]))|(0|v)==(0|(a=0|Se[a+16+(d>>>31<<2)>>2]))?k:v,v=0==(0|a)){l=57;break;}d<<=1&(1^v);}else e=k=0,l=57;}while(0);if(57==(0|l)){if(0==(0|k)&0==(0|e)){if(!(e=w&((e=2<<h)|0-e))){$=b;break;}$=(e&0-e)-1|0,e=0,k=0|Se[9204+(((d=($>>>=a=$>>>12&16)>>>5&8)|a|(h=($>>>=d)>>>2&4)|(f=($>>>=h)>>>1&2)|(k=($>>>=f)>>>1&1))+($>>>k)<<2)>>2];}k?l=61:(h=e,a=i);}if(61==(0|l))for(;;)if(l=0,i=($=(f=(-8&Se[k+4>>2])-b|0)>>>0<i>>>0)?f:i,e=$?k:e,!(k=0|Se[k+16+((0==(0|Se[k+16>>2])&1)<<2)>>2])){h=e,a=i;break;}if(0!=(0|h)&&a>>>0<((0|Se[2227])-b|0)>>>0){if((d=h+b|0)>>>0<=h>>>0)return Ne=u,0;v=0|Se[h+24>>2],r=0|Se[h+12>>2];do{if((0|r)==(0|h)){if(!(r=0|Se[(e=h+20|0)>>2])&&!(r=0|Se[(e=h+16|0)>>2])){r=0;break;}for(;;)if(0|(i=0|Se[(k=r+20|0)>>2]))r=i,e=k;else{if(!(i=0|Se[(k=r+16|0)>>2]))break;r=i,e=k;}Se[e>>2]=0;}else Se[12+(s=0|Se[h+8>>2])>>2]=r,Se[r+8>>2]=s;}while(0);do{if(v){if((0|h)==(0|Se[(k=9204+((e=0|Se[h+28>>2])<<2)|0)>>2])){if(Se[k>>2]=r,!r){Se[2226]=i=w&~(1<<e);break;}}else if(Se[v+16+(((0|Se[v+16>>2])!=(0|h)&1)<<2)>>2]=r,!r){i=w;break;}Se[r+24>>2]=v,0|(e=0|Se[h+16>>2])&&(Se[r+16>>2]=e,Se[e+24>>2]=r),(e=0|Se[h+20>>2])&&(Se[r+20>>2]=e,Se[e+24>>2]=r);}i=w;}while(0);if(16<=a>>>0){if(Se[h+4>>2]=3|b,Se[d+4>>2]=1|a,Se[d+a>>2]=a,r=a>>>3,256>a>>>0)k=8940+(r<<1<<2)|0,(e=0|Se[2225])&(r=1<<r)?r=0|Se[(e=k+8|0)>>2]:(Se[2225]=e|r,r=k,e=k+8|0),Se[e>>2]=d,Se[r+12>>2]=d,Se[d+8>>2]=r,Se[d+12>>2]=k;else if(k=9204+((r=(r=a>>>8)?16777215<a>>>0?31:a>>>(7+(r=14-((o=(520192+(s=r<<(l=(r+1048320|0)>>>16&8))|0)>>>16&4)|l|(r=(245760+(s<<=o)|0)>>>16&2))+(s<<r>>>15)|0)|0)&1|r<<1:0)<<2)|0,Se[d+28>>2]=r,Se[4+(e=d+16|0)>>2]=0,Se[e>>2]=0,i&(e=1<<r)){for(e=a<<(31==(0|r)?0:25-(r>>>1)|0),k=0|Se[k>>2];;){if((-8&Se[k+4>>2]|0)==(0|a)){l=97;break;}if(!(r=0|Se[(i=k+16+(e>>>31<<2)|0)>>2])){l=96;break;}e<<=1,k=r;}96==(0|l)?(Se[i>>2]=d,Se[d+24>>2]=k,Se[d+12>>2]=d,Se[d+8>>2]=d):97==(0|l)&&(Se[12+(s=0|Se[(l=k+8|0)>>2])>>2]=d,Se[l>>2]=d,Se[d+8>>2]=s,Se[d+12>>2]=k,Se[d+24>>2]=0);}else Se[2226]=i|e,Se[k>>2]=d,Se[d+24>>2]=k,Se[d+12>>2]=d,Se[d+8>>2]=d;}else Se[h+4>>2]=3|(s=a+b|0),Se[(s=h+s+4|0)>>2]|=1;return Ne=u,0|h+8;}}$=b;}else $=-1;}while(0);if((k=0|Se[2227])>>>0>=$>>>0)return e=0|Se[2230],15<(r=k-$|0)>>>0?(Se[2230]=s=e+$|0,Se[2227]=r,Se[s+4>>2]=1|r,Se[e+k>>2]=r,Se[e+4>>2]=3|$):(Se[2227]=0,Se[2230]=0,Se[e+4>>2]=3|k,Se[(s=e+k+4|0)>>2]|=1),Ne=u,e+8|0;if((a=0|Se[2228])>>>0>$>>>0)return Se[2228]=o=a-$|0,Se[2231]=l=(s=0|Se[2231])+$|0,Se[l+4>>2]=1|o,Se[s+4>>2]=3|$,Ne=u,s+8|0;if(0|Se[2343]?e=0|Se[2345]:(Se[2345]=4096,Se[2344]=4096,Se[2346]=-1,Se[2347]=-1,Se[2348]=0,Se[2336]=0,Se[2343]=-16&c^1431655768,e=4096),h=$+48|0,(b=(d=e+(w=$+47|0)|0)&(v=0-e|0))>>>0<=$>>>0)return Ne=u,0;if(0|(e=0|Se[2335])&&(c=(f=0|Se[2333])+b|0)>>>0<=f>>>0|c>>>0>e>>>0)return Ne=u,0;e:do{if(4&Se[2336])r=0;else{i=0|Se[2231];r:do{if(i){for(e=9348;!((k=0|Se[e>>2])>>>0<=i>>>0&&(k+(0|Se[(o=e+4|0)>>2])|0)>>>0>i>>>0);)if(!(e=0|Se[e+8>>2])){l=118;break r;}if(2147483647>(r=d-a&v)>>>0){if((0|(i=0|Ae(0|r)))==((0|Se[e>>2])+(0|Se[o>>2])|0)){if(-1!=(0|i))break e;}else l=126;}else r=0;}else l=118;}while(0);if(118==(0|l))if(-1!=(0|(e=0|Ae(0)))&&(t=(r=(0==((t=(n=0|Se[2344])-1|0)&(r=e)|0)?0:(t+r&0-n)-r|0)+b|0)+(n=0|Se[2333])|0,r>>>0>$>>>0&2147483647>r>>>0)){if(0|(o=0|Se[2335])&&t>>>0<=n>>>0|t>>>0>o>>>0)r=0;else{if((0|(i=0|Ae(0|r)))==(0|e)){i=e;break e;}l=126;}}else r=0;do{if(126==(0|l)){if(k=0-r|0,!(h>>>0>r>>>0&2147483647>r>>>0&-1!=(0|i))){if(-1==(0|i)){r=0;break;}break e;}if(2147483647<=(e=w-r+(e=0|Se[2345])&0-e)>>>0)break e;if(-1!=(0|Ae(0|e))){r=e+r|0;break e;}Ae(0|k),r=0;}}while(0);Se[2336]|=4;}l=133;}while(0);if(133==(0|l)){if(2147483647<=b>>>0)return Ne=u,0;if(-1==(0|(i=0|Ae(0|b)))|1^(k=(e=(o=0|Ae(0))-i|0)>>>0>($+40|0)>>>0)|i>>>0<o>>>0&-1!=(0|i)&-1!=(0|o)^1)return Ne=u,0;r=k?e:r;}if(Se[2333]=e=(0|Se[2333])+r|0,e>>>0>(0|Se[2334])>>>0&&(Se[2334]=e),w=0|Se[2231]){for(e=9348;;){if((0|i)==((k=0|Se[e>>2])+(d=0|Se[(v=e+4|0)>>2])|0)){l=143;break;}if(!(a=0|Se[e+8>>2]))break;e=a;}if(143==(0|l)&&0==(8&Se[e+12>>2]|0)&&i>>>0>w>>>0&k>>>0<=w>>>0)Se[v>>2]=d+r,l=w+(o=0==(7&(o=w+8|0)|0)?0:0-o&7)|0,o=(s=(0|Se[2228])+r|0)-o|0,Se[2231]=l,Se[2228]=o,Se[l+4>>2]=1|o,Se[w+s+4>>2]=40,Se[2232]=Se[2347];else{for(i>>>0<(0|Se[2229])>>>0&&(Se[2229]=i),k=i+r|0,e=9348;;){if((0|Se[e>>2])==(0|k)){l=151;break;}if(!(e=0|Se[e+8>>2])){k=9348;break;}}if(151==(0|l)){if(!(8&Se[e+12>>2])){if(Se[e>>2]=i,Se[(f=e+4|0)>>2]=(0|Se[f>>2])+r,b=(f=i+(0==(7&(f=i+8|0)|0)?0:0-f&7)|0)+$|0,h=(r=k+(0==(7&(r=k+8|0)|0)?0:0-r&7)|0)-f-$|0,Se[f+4>>2]=3|$,(0|w)!=(0|r)){if((0|Se[2230])==(0|r))Se[2227]=s=(0|Se[2227])+h|0,Se[2230]=b,Se[b+4>>2]=1|s,Se[b+s>>2]=s;else{if(1==(3&(e=0|Se[r+4>>2])|0)){a=-8&e,i=e>>>3;e:do{if(256>e>>>0)(0|(k=0|Se[r+12>>2]))==(0|(e=0|Se[r+8>>2]))?Se[2225]&=~(1<<i):(Se[e+12>>2]=k,Se[k+8>>2]=e);else{d=0|Se[r+24>>2],e=0|Se[r+12>>2];do{if((0|e)==(0|r)){if(!(e=0|Se[(k=4+(i=r+16|0)|0)>>2])){if(!(e=0|Se[i>>2])){e=0;break;}k=i;}for(;;)if(0|(v=0|Se[(i=e+20|0)>>2]))e=v,k=i;else{if(!(v=0|Se[(i=e+16|0)>>2]))break;e=v,k=i;}Se[k>>2]=0;}else Se[12+(s=0|Se[r+8>>2])>>2]=e,Se[e+8>>2]=s;}while(0);if(d){if((0|Se[(i=9204+((k=0|Se[r+28>>2])<<2)|0)>>2])!=(0|r)){if(Se[d+16+(((0|Se[d+16>>2])!=(0|r)&1)<<2)>>2]=e,!e)break e;}else if(Se[i>>2]=e,!(0|e)){Se[2226]&=~(1<<k);break e;}Se[e+24>>2]=d,0|(i=0|Se[(k=r+16|0)>>2])&&(Se[e+16>>2]=i,Se[i+24>>2]=e),(k=0|Se[k+4>>2])&&(Se[e+20>>2]=k,Se[k+24>>2]=e);}}}while(0);r=r+a|0,v=a+h|0;}else v=h;if(Se[(r=r+4|0)>>2]&=-2,Se[b+4>>2]=1|v,Se[b+v>>2]=v,r=v>>>3,256>v>>>0)k=8940+(r<<1<<2)|0,(e=0|Se[2225])&(r=1<<r)?r=0|Se[(e=k+8|0)>>2]:(Se[2225]=e|r,r=k,e=k+8|0),Se[e>>2]=b,Se[r+12>>2]=b,Se[b+8>>2]=r,Se[b+12>>2]=k;else if(i=9204+((r=(r=v>>>8)?16777215<v>>>0?31:v>>>(7+(r=14-((o=(520192+(s=r<<(l=(r+1048320|0)>>>16&8))|0)>>>16&4)|l|(r=(245760+(s<<=o)|0)>>>16&2))+(s<<r>>>15)|0)|0)&1|r<<1:0)<<2)|0,Se[b+28>>2]=r,Se[4+(e=b+16|0)>>2]=0,Se[e>>2]=0,(e=0|Se[2226])&(k=1<<r)){for(e=v<<(31==(0|r)?0:25-(r>>>1)|0),k=0|Se[i>>2];;){if((-8&Se[k+4>>2]|0)==(0|v)){l=192;break;}if(!(r=0|Se[(i=k+16+(e>>>31<<2)|0)>>2])){l=191;break;}e<<=1,k=r;}191==(0|l)?(Se[i>>2]=b,Se[b+24>>2]=k,Se[b+12>>2]=b,Se[b+8>>2]=b):192==(0|l)&&(Se[12+(s=0|Se[(l=k+8|0)>>2])>>2]=b,Se[l>>2]=b,Se[b+8>>2]=s,Se[b+12>>2]=k,Se[b+24>>2]=0);}else Se[2226]=e|k,Se[i>>2]=b,Se[b+24>>2]=i,Se[b+12>>2]=b,Se[b+8>>2]=b;}}else Se[2228]=s=(0|Se[2228])+h|0,Se[2231]=b,Se[b+4>>2]=1|s;return Ne=u,0|f+8;}k=9348;}for(;!((e=0|Se[k>>2])>>>0<=w>>>0&&(s=e+(0|Se[k+4>>2])|0)>>>0>w>>>0);)k=0|Se[k+8>>2];for(l=(e=(e=(v=s+-47|0)+(0==(7&(e=v+8|0)|0)?0:0-e&7)|0)>>>0<(v=w+16|0)>>>0?w:e)+8|0,o=i+(t=0==(7&(t=i+8|0)|0)?0:0-t&7)|0,t=(k=r+-40|0)-t|0,Se[2231]=o,Se[2228]=t,Se[o+4>>2]=1|t,Se[i+k+4>>2]=40,Se[2232]=Se[2347],Se[(k=e+4|0)>>2]=27,Se[l>>2]=Se[2337],Se[l+4>>2]=Se[2338],Se[l+8>>2]=Se[2339],Se[l+12>>2]=Se[2340],Se[2337]=i,Se[2338]=r,Se[2340]=0,Se[2339]=l,r=e+24|0;l=r,Se[(r=r+4|0)>>2]=7,(l+8|0)>>>0<s>>>0;);if((0|e)!=(0|w))if(d=e-w|0,Se[k>>2]&=-2,Se[w+4>>2]=1|d,Se[e>>2]=d,r=d>>>3,256>d>>>0)k=8940+(r<<1<<2)|0,(e=0|Se[2225])&(r=1<<r)?r=0|Se[(e=k+8|0)>>2]:(Se[2225]=e|r,r=k,e=k+8|0),Se[e>>2]=w,Se[r+12>>2]=w,Se[w+8>>2]=r,Se[w+12>>2]=k;else if(i=9204+((k=(r=d>>>8)?16777215<d>>>0?31:d>>>(7+(k=14-((o=(520192+(s=r<<(l=(r+1048320|0)>>>16&8))|0)>>>16&4)|l|(k=(245760+(s<<=o)|0)>>>16&2))+(s<<k>>>15)|0)|0)&1|k<<1:0)<<2)|0,Se[w+28>>2]=k,Se[w+20>>2]=0,Se[v>>2]=0,(r=0|Se[2226])&(e=1<<k)){for(e=d<<(31==(0|k)?0:25-(k>>>1)|0),k=0|Se[i>>2];;){if((-8&Se[k+4>>2]|0)==(0|d)){l=213;break;}if(!(r=0|Se[(i=k+16+(e>>>31<<2)|0)>>2])){l=212;break;}e<<=1,k=r;}212==(0|l)?(Se[i>>2]=w,Se[w+24>>2]=k,Se[w+12>>2]=w,Se[w+8>>2]=w):213==(0|l)&&(Se[12+(s=0|Se[(l=k+8|0)>>2])>>2]=w,Se[l>>2]=w,Se[w+8>>2]=s,Se[w+12>>2]=k,Se[w+24>>2]=0);}else Se[2226]=r|e,Se[i>>2]=w,Se[w+24>>2]=i,Se[w+12>>2]=w,Se[w+8>>2]=w;}}else 0==(0|(s=0|Se[2229]))|i>>>0<s>>>0&&(Se[2229]=i),Se[2337]=i,Se[2338]=r,Se[2340]=0,Se[2234]=Se[2343],Se[2233]=-1,Se[2238]=8940,Se[2237]=8940,Se[2240]=8948,Se[2239]=8948,Se[2242]=8956,Se[2241]=8956,Se[2244]=8964,Se[2243]=8964,Se[2246]=8972,Se[2245]=8972,Se[2248]=8980,Se[2247]=8980,Se[2250]=8988,Se[2249]=8988,Se[2252]=8996,Se[2251]=8996,Se[2254]=9004,Se[2253]=9004,Se[2256]=9012,Se[2255]=9012,Se[2258]=9020,Se[2257]=9020,Se[2260]=9028,Se[2259]=9028,Se[2262]=9036,Se[2261]=9036,Se[2264]=9044,Se[2263]=9044,Se[2266]=9052,Se[2265]=9052,Se[2268]=9060,Se[2267]=9060,Se[2270]=9068,Se[2269]=9068,Se[2272]=9076,Se[2271]=9076,Se[2274]=9084,Se[2273]=9084,Se[2276]=9092,Se[2275]=9092,Se[2278]=9100,Se[2277]=9100,Se[2280]=9108,Se[2279]=9108,Se[2282]=9116,Se[2281]=9116,Se[2284]=9124,Se[2283]=9124,Se[2286]=9132,Se[2285]=9132,Se[2288]=9140,Se[2287]=9140,Se[2290]=9148,Se[2289]=9148,Se[2292]=9156,Se[2291]=9156,Se[2294]=9164,Se[2293]=9164,Se[2296]=9172,Se[2295]=9172,Se[2298]=9180,Se[2297]=9180,Se[2300]=9188,Se[2299]=9188,l=i+(o=0==(7&(o=i+8|0)|0)?0:0-o&7)|0,o=(s=r+-40|0)-o|0,Se[2231]=l,Se[2228]=o,Se[l+4>>2]=1|o,Se[i+s+4>>2]=40,Se[2232]=Se[2347];return(r=0|Se[2228])>>>0<=$>>>0?(Ne=u,0):(Se[2228]=o=r-$|0,Se[2231]=l=(s=0|Se[2231])+$|0,Se[l+4>>2]=1|o,Se[s+4>>2]=3|$,Ne=u,s+8|0);}function Q(e){var r;if(e|=0){var i=e+-8|0,a=0|Se[2229],f=-8&(e=0|Se[e+-4>>2]),n=i+f|0;do{if(1&e)var t=r=i;else{var o=0|Se[i>>2];if(!(3&e))return;var l=o+f|0;if((t=i+(0-o)|0)>>>0<a>>>0)return;if((0|Se[2230])==(0|t)){if(3!=(3&(f=0|Se[(e=n+4|0)>>2])|0)){r=t,f=l;break;}return Se[2227]=l,Se[e>>2]=-2&f,Se[t+4>>2]=1|l,void(Se[t+l>>2]=l);}if(i=o>>>3,256>o>>>0)(0|(f=0|Se[t+12>>2]))==(0|(e=0|Se[t+8>>2]))?Se[2225]&=~(1<<i):(Se[e+12>>2]=f,Se[f+8>>2]=e);else{a=0|Se[t+24>>2],e=0|Se[t+12>>2];do{if((0|e)==(0|t)){if(!(e=0|Se[(f=4+(i=t+16|0)|0)>>2])){if(!(e=0|Se[i>>2])){e=0;break;}f=i;}for(;;)if(0|(o=0|Se[(i=e+20|0)>>2]))e=o,f=i;else{if(!(o=0|Se[(i=e+16|0)>>2]))break;e=o,f=i;}Se[f>>2]=0;}else Se[12+(r=0|Se[t+8>>2])>>2]=e,Se[e+8>>2]=r;}while(0);if(a){if((0|Se[(i=9204+((f=0|Se[t+28>>2])<<2)|0)>>2])==(0|t)){if(Se[i>>2]=e,!e){Se[2226]&=~(1<<f),r=t,f=l;break;}}else if(Se[a+16+(((0|Se[a+16>>2])!=(0|t)&1)<<2)>>2]=e,!e){r=t,f=l;break;}Se[e+24>>2]=a,0|(i=0|Se[(f=t+16|0)>>2])&&(Se[e+16>>2]=i,Se[i+24>>2]=e),(f=0|Se[f+4>>2])&&(Se[e+20>>2]=f,Se[f+24>>2]=e);}}r=t,f=l;}}while(0);if(!(t>>>0>=n>>>0)&&1&(o=0|Se[(e=n+4|0)>>2])){if(2&o)Se[e>>2]=-2&o,Se[r+4>>2]=1|f,a=Se[t+f>>2]=f;else{if((0|Se[2231])==(0|n)){if(Se[2228]=n=(0|Se[2228])+f|0,Se[2231]=r,Se[r+4>>2]=1|n,(0|r)!=(0|Se[2230]))return;return Se[2230]=0,void(Se[2227]=0);}if((0|Se[2230])==(0|n))return Se[2227]=n=(0|Se[2227])+f|0,Se[2230]=t,Se[r+4>>2]=1|n,void(Se[t+n>>2]=n);a=(-8&o)+f|0,i=o>>>3;do{if(256>o>>>0)(0|(e=0|Se[n+12>>2]))==(0|(f=0|Se[n+8>>2]))?Se[2225]&=~(1<<i):(Se[f+12>>2]=e,Se[e+8>>2]=f);else{l=0|Se[n+24>>2],e=0|Se[n+12>>2];do{if((0|e)==(0|n)){if(!(e=0|Se[(f=4+(i=n+16|0)|0)>>2])){if(!(e=0|Se[i>>2])){i=0;break;}f=i;}for(;;)if(0|(o=0|Se[(i=e+20|0)>>2]))e=o,f=i;else{if(!(o=0|Se[(i=e+16|0)>>2]))break;e=o,f=i;}Se[f>>2]=0;}else Se[12+(i=0|Se[n+8>>2])>>2]=e,Se[e+8>>2]=i;i=e;}while(0);if(0|l){if((0|Se[(f=9204+((e=0|Se[n+28>>2])<<2)|0)>>2])==(0|n)){if(Se[f>>2]=i,!i){Se[2226]&=~(1<<e);break;}}else if(Se[l+16+(((0|Se[l+16>>2])!=(0|n)&1)<<2)>>2]=i,!i)break;Se[i+24>>2]=l,0|(f=0|Se[(e=n+16|0)>>2])&&(Se[i+16>>2]=f,Se[f+24>>2]=i),0|(e=0|Se[e+4>>2])&&(Se[i+20>>2]=e,Se[e+24>>2]=i);}}}while(0);if(Se[r+4>>2]=1|a,Se[t+a>>2]=a,(0|r)==(0|Se[2230]))return void(Se[2227]=a);}if(e=a>>>3,256>a>>>0)i=8940+(e<<1<<2)|0,(f=0|Se[2225])&(e=1<<e)?e=0|Se[(f=i+8|0)>>2]:(Se[2225]=f|e,e=i,f=i+8|0),Se[f>>2]=r,Se[e+12>>2]=r,Se[r+8>>2]=e,Se[r+12>>2]=i;else{if(o=9204+((e=(e=a>>>8)?16777215<a>>>0?31:a>>>(7+(e=14-((l=(520192+(n=e<<(t=(e+1048320|0)>>>16&8))|0)>>>16&4)|t|(e=(245760+(n<<=l)|0)>>>16&2))+(n<<e>>>15)|0)|0)&1|e<<1:0)<<2)|0,Se[r+28>>2]=e,Se[r+20>>2]=0,Se[r+16>>2]=0,(f=0|Se[2226])&(i=1<<e)){for(f=a<<(31==(0|e)?0:25-(e>>>1)|0),i=0|Se[o>>2];;){if((-8&Se[i+4>>2]|0)==(0|a)){e=73;break;}if(!(e=0|Se[(o=i+16+(f>>>31<<2)|0)>>2])){e=72;break;}f<<=1,i=e;}72==(0|e)?(Se[o>>2]=r,Se[r+24>>2]=i,Se[r+12>>2]=r,Se[r+8>>2]=r):73==(0|e)&&(Se[12+(n=0|Se[(t=i+8|0)>>2])>>2]=r,Se[t>>2]=r,Se[r+8>>2]=n,Se[r+12>>2]=i,Se[r+24>>2]=0);}else Se[2226]=f|i,Se[o>>2]=r,Se[r+24>>2]=o,Se[r+12>>2]=r,Se[r+8>>2]=r;if(Se[2233]=n=(0|Se[2233])-1|0,!n){for(e=9356;e=0|Se[e>>2];)e=e+8|0;Se[2233]=-1;}}}}}function ee(e,r){if(r|=0,e|=0){var i=0|Ue(r,e);65535<(r|e)>>>0&&(i=((i>>>0)/(e>>>0)|0)==(0|r)?i:-1);}else i=0;return(e=0|Z(i))&&3&Se[e+-4>>2]?(ge(0|e,0,0|i),0|e):0|e;}function re(e,r){if(r|=0,!(e|=0))return 0|Z(r);if(4294967231<r>>>0)return 0;var i=0|function(e,r){r|=0;var i=4+(e|=0)|0,a=0|Se[i>>2],f=-8&a,n=e+f|0;if(!(3&a))return 256>r>>>0?0:f>>>0>=(r+4|0)>>>0&&(f-r|0)>>>0<=Se[2345]<<1>>>0?0|e:0;if(f>>>0>=r>>>0){if(15>=(f=f-r|0)>>>0)return 0|e;var t=e+r|0;return Se[i>>2]=1&a|r|2,Se[t+4>>2]=3|f,Se[(a=n+4|0)>>2]|=1,ie(t,f),0|e;}if((0|Se[2231])==(0|n)){f=(t=(0|Se[2228])+f|0)-r|0;var o=e+r|0;return t>>>0<=r>>>0?0:(Se[i>>2]=1&a|r|2,Se[o+4>>2]=1|f,Se[2231]=o,Se[2228]=f,0|e);}if((0|Se[2230])==(0|n))return(o=(0|Se[2227])+f|0)>>>0<r>>>0?0:(15<(f=o-r|0)>>>0?(t=e+r|0,o=e+o|0,Se[i>>2]=1&a|r|2,Se[t+4>>2]=1|f,Se[o>>2]=f,Se[(o=o+4|0)>>2]&=-2,o=t):(Se[i>>2]=1&a|o|2,Se[(o=e+o+4|0)>>2]|=1,f=o=0),Se[2227]=f,Se[2230]=o,0|e);if(2&(o=0|Se[n+4>>2])|0)return 0;var l=(-8&o)+f|0;if(l>>>0<r>>>0)return 0;t=l-r|0;var s=o>>>3;do{if(256>o>>>0)(0|(f=0|Se[n+12>>2]))==(0|(o=0|Se[n+8>>2]))?Se[2225]&=~(1<<s):(Se[o+12>>2]=f,Se[f+8>>2]=o);else{var u=0|Se[n+24>>2];f=0|Se[n+12>>2];do{if((0|f)==(0|n)){if(f=0|Se[(o=4+(s=n+16|0)|0)>>2])var c=o;else{if(!(f=0|Se[s>>2])){s=0;break;}c=s;}for(;;)if(0|(o=0|Se[(s=f+20|0)>>2]))f=o,c=s;else{if(!(s=0|Se[(o=f+16|0)>>2]))break;f=s,c=o;}Se[c>>2]=0;}else Se[12+(s=0|Se[n+8>>2])>>2]=f,Se[f+8>>2]=s;s=f;}while(0);if(0|u){if((0|Se[(o=9204+((f=0|Se[n+28>>2])<<2)|0)>>2])==(0|n)){if(Se[o>>2]=s,!s){Se[2226]&=~(1<<f);break;}}else if(Se[u+16+(((0|Se[u+16>>2])!=(0|n)&1)<<2)>>2]=s,!s)break;Se[s+24>>2]=u,0|(o=0|Se[(f=n+16|0)>>2])&&(Se[s+16>>2]=o,Se[o+24>>2]=s),0|(f=0|Se[f+4>>2])&&(Se[s+20>>2]=f,Se[f+24>>2]=s);}}}while(0);return 16>t>>>0?(Se[i>>2]=l|1&a|2,Se[(a=e+l+4|0)>>2]|=1):(n=e+r|0,Se[i>>2]=1&a|r|2,Se[n+4>>2]=3|t,Se[(a=e+l+4|0)>>2]|=1,ie(n,t)),0|e;}(e+-8|0,11>r>>>0?16:r+11&-8);if(0|i)return i+8|0;if(!(i=0|Z(r)))return 0;var a=0|Se[e+-4>>2];return ye(0|i,0|e,0|((a=(-8&a)-(0==(3&a|0)?8:4)|0)>>>0<r>>>0?a:r)),Q(e),0|i;}function ie(e,r){var i=(e|=0)+(r|=0)|0,a=0|Se[e+4>>2];do{if(1&a)var f=e;else{var n=0|Se[e>>2];if(!(3&a))return;if(r=n+r|0,(0|Se[2230])==(0|(f=e+(0-n)|0))){if(3!=(3&(a=0|Se[(e=i+4|0)>>2])|0))break;return Se[2227]=r,Se[e>>2]=-2&a,Se[f+4>>2]=1|r,void(Se[i>>2]=r);}var t=n>>>3;if(256>n>>>0)(0|(a=0|Se[f+12>>2]))==(0|(e=0|Se[f+8>>2]))?Se[2225]&=~(1<<t):(Se[e+12>>2]=a,Se[a+8>>2]=e);else{var o=0|Se[f+24>>2];e=0|Se[f+12>>2];do{if((0|e)==(0|f)){if(!(e=0|Se[(a=4+(t=f+16|0)|0)>>2])){if(!(e=0|Se[t>>2])){e=0;break;}a=t;}for(;;)if(0|(n=0|Se[(t=e+20|0)>>2]))e=n,a=t;else{if(!(n=0|Se[(t=e+16|0)>>2]))break;e=n,a=t;}Se[a>>2]=0;}else Se[12+(n=0|Se[f+8>>2])>>2]=e,Se[e+8>>2]=n;}while(0);if(o){if((0|Se[(t=9204+((a=0|Se[f+28>>2])<<2)|0)>>2])==(0|f)){if(Se[t>>2]=e,!e){Se[2226]&=~(1<<a);break;}}else if(Se[o+16+(((0|Se[o+16>>2])!=(0|f)&1)<<2)>>2]=e,!e)break;Se[e+24>>2]=o,0|(t=0|Se[(a=f+16|0)>>2])&&(Se[e+16>>2]=t,Se[t+24>>2]=e),(a=0|Se[a+4>>2])&&(Se[e+20>>2]=a,Se[a+24>>2]=e);}}}}while(0);if(2&(t=0|Se[(e=i+4|0)>>2]))Se[e>>2]=-2&t,Se[f+4>>2]=1|r,n=Se[f+r>>2]=r;else{if((0|Se[2231])==(0|i)){if(Se[2228]=i=(0|Se[2228])+r|0,Se[2231]=f,Se[f+4>>2]=1|i,(0|f)!=(0|Se[2230]))return;return Se[2230]=0,void(Se[2227]=0);}if((0|Se[2230])==(0|i))return Se[2227]=i=(0|Se[2227])+r|0,Se[2230]=f,Se[f+4>>2]=1|i,void(Se[f+i>>2]=i);n=(-8&t)+r|0,a=t>>>3;do{if(256>t>>>0)(0|(r=0|Se[i+12>>2]))==(0|(e=0|Se[i+8>>2]))?Se[2225]&=~(1<<a):(Se[e+12>>2]=r,Se[r+8>>2]=e);else{o=0|Se[i+24>>2],r=0|Se[i+12>>2];do{if((0|r)==(0|i)){if(!(r=0|Se[(e=4+(a=i+16|0)|0)>>2])){if(!(r=0|Se[a>>2])){a=0;break;}e=a;}for(;;)if(0|(t=0|Se[(a=r+20|0)>>2]))r=t,e=a;else{if(!(t=0|Se[(a=r+16|0)>>2]))break;r=t,e=a;}Se[e>>2]=0;}else Se[12+(a=0|Se[i+8>>2])>>2]=r,Se[r+8>>2]=a;a=r;}while(0);if(0|o){if((0|Se[(e=9204+((r=0|Se[i+28>>2])<<2)|0)>>2])==(0|i)){if(Se[e>>2]=a,!a){Se[2226]&=~(1<<r);break;}}else if(Se[o+16+(((0|Se[o+16>>2])!=(0|i)&1)<<2)>>2]=a,!a)break;Se[a+24>>2]=o,0|(e=0|Se[(r=i+16|0)>>2])&&(Se[a+16>>2]=e,Se[e+24>>2]=a),0|(r=0|Se[r+4>>2])&&(Se[a+20>>2]=r,Se[r+24>>2]=a);}}}while(0);if(Se[f+4>>2]=1|n,Se[f+n>>2]=n,(0|f)==(0|Se[2230]))return void(Se[2227]=n);}if(r=n>>>3,256>n>>>0)a=8940+(r<<1<<2)|0,(e=0|Se[2225])&(r=1<<r)?r=0|Se[(e=a+8|0)>>2]:(Se[2225]=e|r,r=a,e=a+8|0),Se[e>>2]=f,Se[r+12>>2]=f,Se[f+8>>2]=r,Se[f+12>>2]=a;else if(r=(r=n>>>8)?16777215<n>>>0?31:n>>>(7+(r=14-((t=(520192+(i=r<<(o=(r+1048320|0)>>>16&8))|0)>>>16&4)|o|(r=(245760+(i<<=t)|0)>>>16&2))+(i<<r>>>15)|0)|0)&1|r<<1:0,t=9204+(r<<2)|0,Se[f+28>>2]=r,Se[f+20>>2]=0,Se[f+16>>2]=0,(e=0|Se[2226])&(a=1<<r)){for(e=n<<(31==(0|r)?0:25-(r>>>1)|0),a=0|Se[t>>2];;){if((-8&Se[a+4>>2]|0)==(0|n)){r=69;break;}if(!(r=0|Se[(t=a+16+(e>>>31<<2)|0)>>2])){r=68;break;}e<<=1,a=r;}68==(0|r)?(Se[t>>2]=f,Se[f+24>>2]=a,Se[f+12>>2]=f,Se[f+8>>2]=f):69==(0|r)&&(Se[12+(i=0|Se[(o=a+8|0)>>2])>>2]=f,Se[o>>2]=f,Se[f+8>>2]=i,Se[f+12>>2]=a,Se[f+24>>2]=0);}else Se[2226]=e|a,Se[t>>2]=f,Se[f+24>>2]=t,Se[f+12>>2]=f,Se[f+8>>2]=f;}function ae(e){var r,i=0,a=e|=0;e:do{if(3&a)for(r=a;;){if(!(0|Re[e>>0])){e=r;break e;}if(!(3&(r=e=e+1|0))){i=4;break;}}else i=4;}while(0);if(4==(0|i)){for(;!((-2139062144&(r=0|Se[e>>2])^-2139062144)&r+-16843009);)e=e+4|0;if((255&r)<<24>>24)for(;0!=(0|Re[(e=e+1|0)>>0]););}return e-a|0;}function fe(e,r){var i=0|Re[(e|=0)>>0],a=0|Re[(r|=0)>>0];if(0!=i<<24>>24&&i<<24>>24==a<<24>>24)for(;i=0|Re[(e=e+1|0)>>0],a=0|Re[(r=r+1|0)>>0],0!=i<<24>>24&&i<<24>>24==a<<24>>24;);return(255&i)-(255&a)|0;}function ne(e){return 1&(32==(0|(e|=0))|5>(e+-9|0)>>>0)|0;}function te(e,r,i){e|=0;var a,f=0,n=255&(r|=0),t=0!=(0|(i|=0));e:do{if(t&0!=(3&e|0))for(a=255&r;;){if((0|Re[e>>0])==a<<24>>24)break e;if(!((t=0!=(0|(i=i+-1|0)))&0!=(3&(e=e+1|0)|0))){f=5;break;}}else f=5;}while(0);e:do{if(5==(0|f))if(t){if((0|Re[e>>0])!=(a=255&r)<<24>>24){t=0|Ue(n,16843009);r:do{if(3<i>>>0){for(;!((-2139062144&(n=Se[e>>2]^t)^-2139062144)&n+-16843009|0);)if(e=e+4|0,3>=(i=i+-4|0)>>>0){f=11;break r;}}else f=11;}while(0);if(11!=(0|f)||i)for(;;){if((0|Re[e>>0])==a<<24>>24)break e;if(e=e+1|0,!(i=i+-1|0)){i=0;break;}}else i=0;}}else i=0;}while(0);return 0|(0|i?e:0);}function oe(e){Se[104+(e|=0)>>2]=0;var r=0|Se[e+8>>2];Se[e+108>>2]=r-(0|Se[e+4>>2]),Se[e+100>>2]=r;}function le(e){var r=0,i=0,a=104+(e|=0)|0,f=0|Se[a>>2];if(0!=(0|f)&&(0|Se[e+108>>2])>=(0|f))i=4;else{var n=Ne;Ne=Ne+16|0;var t=r=0|e,o=0|Re[(f=74+(t|=0)|0)>>0];Re[f>>0]=o+255|o,(0|Se[(f=t+20|0)>>2])>>>0>(0|Se[(o=t+28|0)>>2])>>>0&&ze[15&Se[t+36>>2]](t,0,0),Se[t+16>>2]=0,Se[o>>2]=0,Se[f>>2]=0,4&(f=0|Se[t>>2])?(Se[t>>2]=32|f,f=-1):(Se[t+8>>2]=o=(0|Se[t+44>>2])+(0|Se[t+48>>2])|0,Se[t+4>>2]=o,f=f<<27>>31),r=0==(0|f)&&1==(0|ze[15&Se[r+32>>2]](r,n,1))?0|Ie[n>>0]:-1,Ne=n,0<=(0|(r|=0))?(n=0|Se[a>>2],a=e+8|0,n?(a=o=0|Se[a>>2],n=(o-(f=0|Se[(t=e+4|0)>>2])|0)<(0|(n=n-(0|Se[e+108>>2])|0))?a:f+(n+-1)|0):(t=e+4|0,n=a=0|Se[a>>2]),Se[e+100>>2]=n,a?(Se[(e=e+108|0)>>2]=a+1-(o=0|Se[t>>2])+(0|Se[e>>2]),a=o):a=0|Se[t>>2],(0|r)!=(0|Ie[(a=a+-1|0)>>0])&&(Re[a>>0]=r)):i=4;}return 4==(0|i)&&(Se[e+100>>2]=0,r=-1),0|r;}function se(e){return 0|(94>((0|(e|=0))-33|0)>>>0|0?0==(0|ue(e))&1:0);}function ue(e){return 1&(10>((e|=0)-48|0)>>>0|0!=(26>((32|e)-97|0)>>>0|0))|0;}function ce(e){return 0|(0==(26>((0|(e|=0))-65|0)>>>0|0)?e:32|e);}function be(e,r,i){if(e|=0,r|=0,i|=0){var a=0|Re[e>>0];e:do{if(a<<24>>24){var f=e;for(e=a,a&=255;;){var n=0|Re[r>>0];if(!(0!=(0|(i=i+-1|0))&0!=n<<24>>24))break e;if(e<<24>>24!=n<<24>>24&&(0|(a=0|ce(a)))!=(0|ce(255&n)))break e;if(r=r+1|0,!((a=0|Re[(f=f+1|0)>>0])<<24>>24)){e=0;break;}e=a,a&=255;}}else e=0;}while(0);e=(e=0|ce(255&e))-(0|ce(0|Ie[r>>0]))|0;}else e=0;return 0|e;}function $e(e,r,i){e|=0,r|=0,i|=0;e:do{if(i){for(;;){var a=0|Re[e>>0],f=0|Re[r>>0];if(a<<24>>24!=f<<24>>24)break;if(!(i=i+-1|0)){e=0;break e;}e=e+1|0,r=r+1|0;}e=(255&a)-(255&f)|0;}else e=0;}while(0);return 0|e;}function ke(e,r,i,a){r|=0,a|=0;var f=0|e,n=0|i,t=65535&(e=0|f),o=65535&(i=0|n),l=0|Ue(o,t),s=e>>>16;return e=(l>>>16)+(0|Ue(o,s))|0,i=0|Ue(o=i>>>16,t),i=0|(qe=(e>>>16)+(0|Ue(o,s))+(((65535&e)+i|0)>>>16)|0,e+i<<16|65535&l|0),e=qe,0|(qe=(0|Ue(r,n))+(0|Ue(a,f))+e|0&e,0|i);}function ve(e,r,i,a){return 0|(qe=(0|r)+(0|a)+((i=(e|=0)+(0|i)>>>0)>>>0<e>>>0|0)>>>0,0|i);}function de(e,r,i,a){return 0|(qe=(0|r)-(0|a)-((i|=0)>>>0>(e|=0)>>>0|0)>>>0,e-i>>>0|0);}function he(e){var r=0|Re[Me+(255&(e|=0))>>0];return 8>(0|r)?0|r:8>(0|(r=0|Re[Me+(e>>8&255)>>0]))?r+8|0:8>(0|(r=0|Re[Me+(e>>16&255)>>0]))?r+16|0:24+(0|Re[Me+(e>>>24)>>0])|0;}function we(e,r,i,a){return 0|function(e,r,i,a){var f,n,t=0,o=e|=0,l=f=r|=0,s=i|=0,u=n=a|=0;if(!l){var c=0!=(0|t);if(u){if(!c)return 0|(qe=0,0);Se[t>>2]=0|e,Se[t+4>>2]=0&r,t=n=0;}else c&&(Se[t>>2]=(o>>>0)%(s>>>0),Se[t+4>>2]=0),n=0,t=(o>>>0)/(s>>>0)>>>0;return 0|(qe=n,t);}c=0==(0|u);do{if(s){if(!c){if(31>=(c=(0|je(0|u))-(0|je(0|l))|0)>>>0){var b=c+1|0;s=b,e=o>>>(b>>>0)&(r=c-31>>31)|l<<(u=31-c|0),r&=l>>>(b>>>0),c=0,u=o<<u;break;}return t?(Se[t>>2]=0|e,Se[t+4>>2]=f|0&r,t=n=0,0|(qe=n,t)):(t=n=0,0|(qe=n,t));}if((c=s-1|0)&s|0){var $=64-(u=33+(0|je(0|s))-(0|je(0|l))|0)|0,k=u-32|0;s=u,e=(b=32-u|0)-1>>31&l>>>(k>>>0)|(l<<b|o>>>(u>>>0))&(r=k>>31),r&=l>>>(u>>>0),c=o<<$&(f=b>>31),u=(l<<$|o>>>(k>>>0))&f|o<<b&u-33>>31;break;}0|t&&(Se[t>>2]=c&o,Se[t+4>>2]=0),1==(0|s)?(k=f|0&r,$=0|e):(k=l>>>(($=0|he(0|s))>>>0)|0,$=l<<32-$|o>>>($>>>0)|0);}else{if(c)return 0|t&&(Se[t>>2]=(l>>>0)%(s>>>0),Se[t+4>>2]=0),0|(qe=k=0,(l>>>0)/(s>>>0)>>>0);if(!o)return 0|t&&(Se[t>>2]=0,Se[t+4>>2]=(l>>>0)%(u>>>0)),0|(qe=k=0,(l>>>0)/(u>>>0)>>>0);if(!((c=u-1|0)&u))return 0|t&&(Se[t>>2]=0|e,Se[t+4>>2]=c&l|0&r),k=0,$=l>>>((0|he(0|u))>>>0),0|(qe=k,$);if(30>=(c=(0|je(0|u))-(0|je(0|l))|0)>>>0){s=r=c+1|0,e=l<<(u=31-c|0)|o>>>(r>>>0),r=l>>>(r>>>0),c=0,u=o<<u;break;}if(!t)return $=k=0,0|(qe=k,$);Se[t>>2]=0|e,Se[t+4>>2]=f|0&r,$=k=0;}return 0|(qe=k,$);}while(0);if(s){for(l=0|ve(0|(b=0|i),0|(o=n|0&a),-1,-1),i=qe,f=u,u=0;a=f,f=c>>>31|f<<1,c=u|c<<1,de(0|l,0|i,0|(a=e<<1|a>>>31|0),0|(n=e>>>31|r<<1|0)),u=1&(k=($=qe)>>31|(0>(0|$)?-1:0)<<1),e=0|de(0|a,0|n,k&b|0,((0>(0|$)?-1:0)>>31|(0>(0|$)?-1:0)<<1)&o|0),r=qe,0!=(0|(s=s-1|0)););l=f,f=0;}else l=u,u=f=0;return s=0,0|t&&(Se[t>>2]=e,Se[t+4>>2]=r),0|(qe=(0|c)>>>31|(l|s)<<1|0&(s<<1|c>>>31)|f,-2&(c<<1|0)|u);}(0|e,0|r,0|i,0|a);}function pe(e,r,i){return r|=0,32>(0|(i|=0))?(qe=r>>>i,(0|e)>>>i|(r&(1<<i)-1)<<32-i):(qe=0,r>>>i-32|0);}function me(e,r,i){return e|=0,32>(0|(i|=0))?(qe=(0|r)<<i|(e&(1<<i)-1<<32-i)>>>32-i,e<<i):(qe=e<<i-32,0);}function ye(e,r,i){var a;if(e|=0,r|=0,8192<=(0|(i|=0)))return 0|Ke(0|e,0|r,0|i);var f=0|e,n=e+i|0;if((3&e)==(3&r)){for(;3&e;){if(!i)return 0|f;Re[e>>0]=0|Re[r>>0],e=e+1|0,r=r+1|0,i=i-1|0;}for(a=(i=-4&n|0)-64|0;(0|e)<=(0|a);)Se[e>>2]=Se[r>>2],Se[e+4>>2]=Se[r+4>>2],Se[e+8>>2]=Se[r+8>>2],Se[e+12>>2]=Se[r+12>>2],Se[e+16>>2]=Se[r+16>>2],Se[e+20>>2]=Se[r+20>>2],Se[e+24>>2]=Se[r+24>>2],Se[e+28>>2]=Se[r+28>>2],Se[e+32>>2]=Se[r+32>>2],Se[e+36>>2]=Se[r+36>>2],Se[e+40>>2]=Se[r+40>>2],Se[e+44>>2]=Se[r+44>>2],Se[e+48>>2]=Se[r+48>>2],Se[e+52>>2]=Se[r+52>>2],Se[e+56>>2]=Se[r+56>>2],Se[e+60>>2]=Se[r+60>>2],e=e+64|0,r=r+64|0;for(;(0|e)<(0|i);)Se[e>>2]=Se[r>>2],e=e+4|0,r=r+4|0;}else for(i=n-4|0;(0|e)<(0|i);)Re[e>>0]=0|Re[r>>0],Re[e+1>>0]=0|Re[r+1>>0],Re[e+2>>0]=0|Re[r+2>>0],Re[e+3>>0]=0|Re[r+3>>0],e=e+4|0,r=r+4|0;for(;(0|e)<(0|n);)Re[e>>0]=0|Re[r>>0],e=e+1|0,r=r+1|0;return 0|f;}function _e(e,r,i){if((0|(r|=0))<(0|(e|=0))&(0|e)<(r+(i|=0)|0)){var a=e;for(r=r+i|0,e=e+i|0;0<(0|i);)i=i-1|0,Re[(e=e-1|0)>>0]=0|Re[(r=r-1|0)>>0];e=a;}else ye(e,r,i);return 0|e;}function ge(e,r,i){var a,f=(e|=0)+(i|=0)|0;if(r=255&(0|r),67<=(0|i)){for(;3&e;)Re[e>>0]=r,e=e+1|0;var n=-4&f|0,t=n-64|0;for(a=r|r<<8|r<<16|r<<24;(0|e)<=(0|t);)Se[e>>2]=a,Se[e+4>>2]=a,Se[e+8>>2]=a,Se[e+12>>2]=a,Se[e+16>>2]=a,Se[e+20>>2]=a,Se[e+24>>2]=a,Se[e+28>>2]=a,Se[e+32>>2]=a,Se[e+36>>2]=a,Se[e+40>>2]=a,Se[e+44>>2]=a,Se[e+48>>2]=a,Se[e+52>>2]=a,Se[e+56>>2]=a,Se[e+60>>2]=a,e=e+64|0;for(;(0|e)<(0|n);)Se[e>>2]=a,e=e+4|0;}for(;(0|e)<(0|f);)Re[e>>0]=r,e=e+1|0;return f-i|0;}function Ae(e){var r=15+(0|e)&-16|0,i=0|Se[xe>>2];return 0<(0|r)&(0|(e=i+r|0))<(0|i)|0>(0|e)?(Fe(12),-1):(Se[xe>>2]=e,(0|e)>(0|He())&&0==(0|De())?(Se[xe>>2]=i,Fe(12),-1):0|i);}function Te(){return Le(1),0;}function Ee(){return Le(4),0;}function Ce(){Le(7);}var Re=new e.Int8Array(i);new e.Int16Array(i);var Se=new e.Int32Array(i),Ie=new e.Uint8Array(i),Oe=new e.Uint16Array(i);new e.Uint32Array(i),new e.Float32Array(i),new e.Float64Array(i);var xe=0|r.DYNAMICTOP_PTR,Ne=0|r.STACKTOP,Me=0|r.cttz_i8,Pe=0,qe=0,Ue=e.Math.imul,je=e.Math.clz32,Le=r.abort,De=r.enlargeMemory,He=r.getTotalMemory,Fe=r.___setErrNo,Ke=r._emscripten_memcpy_big,Be=[function(){return Le(0),0;},J],ze=[Te,function(e,r){return r|=0,c(e|=0,5534,6),0|r&&X(e,0|Se[r>>2],0|Se[r+4>>2]),c(e,5541,7),1;},function(e,r){e|=0;var i=0;return 0!=(0|(r|=0))&&0!=(0|Se[(i=r+4|0)>>2])?(c(e,5495,30),c(e,0|Se[r>>2],0|Se[i>>2]),c(e,5526,7),e=1):e=0,0|e;},function(e,r){e|=0;var i=0;return 0!=(0|(r|=0))&&0!=(0|Se[(i=r+4|0)>>2])?(c(e,5476,8),c(e,0|Se[r>>2],0|Se[i>>2]),c(e,5485,9),e=1):e=0,0|e;},function(e,r){e|=0;var i=0;return 0!=(0|(r|=0))&&0!=(0|Se[(i=r+4|0)>>2])?(c(e,5465,4),c(e,0|Se[r>>2],0|Se[i>>2]),c(e,5470,5),e=1):e=0,0|e;},function(e,r){e|=0;var i=0;return 0!=(0|(r|=0))&&0!=(0|Se[(i=r+4|0)>>2])?(c(e,5437,12),c(e,0|Se[r>>2],0|Se[i>>2]),c(e,5450,14),e=1):e=0,0|e;},function(e,r){e|=0;var i=0;return 0!=(0|(r|=0))&&0!=(0|Se[(i=r+4|0)>>2])?(c(e,5424,5),c(e,0|Se[r>>2],0|Se[i>>2]),c(e,5430,6),e=1):e=0,0|e;},function(e,r){e|=0;var i=0;return 0!=(0|(r|=0))&&0!=(0|Se[(i=r+4|0)>>2])?(c(e,5411,5),c(e,0|Se[r>>2],0|Se[i>>2]),c(e,5417,6),e=1):e=0,0|e;},function(e,r,i){e|=0,r|=0;var a,f,n=0,t=0|Se[20+(i|=0)>>2],o=0|Se[i+16>>2];e:do{if(0!=(0|t)&0!=(1024&o|0)){var l=r+4|0;for(a=0;;){var s=0|Se[t+(a<<2)>>2];if(!s){n=6;break e;}if(f=0|G(0|Se[r>>2],0|Se[l>>2],s))break;a=a+1|0;}a=e,l=r;var k,h=0|Se[i+24>>2];if(l|=0,s|=0,h|=0,f|=0,$(a|=0,60),2==(0|f))$(a,47),b(a,s);else{b(a,s),s=0|ae(s);var w=0|u(16),p=0|u(16),m=l+4|0,y=w+4|0,_=p+4|0;f=1;var g=k=0;r:for(;f&(s=s+1|0)>>>0<(0|Se[m>>2])>>>0;){var A=0|Re[(0|Se[l>>2])+s>>0];i:do{switch(0|A){case 62:var T=g;f=0,g=T,k=A=k;continue r;case 34:case 39:if(0|k){if(!g){f=1,g=A,k=T=k;continue r;}if((0|g)!=(0|A)){$(p,A),f=1,g=A=g,k=T=k;continue r;}for(k=0;;){if(!(g=0|Se[h+(k<<2)>>2]))break i;if((0|(A=0|ae(g)))==(0|Se[y>>2])){for(f=0;!(f>>>0>=A>>>0)&&(0|(T=0|ce(0|Re[g+f>>0])))==(0|ce(0|Ie[(0|Se[w>>2])+f>>0]));)f=f+1|0;if((0|f)==(0|A))break;}k=k+1|0;}0==(0|A)|0==(0|Se[_>>2])||($(a,32),X(a,0|Se[w>>2],0|Se[y>>2]),b(a,5654),X(a,0|Se[p>>2],0|Se[_>>2]),$(a,34));}break;case 32:if(0|g){$(p,32),f=1,g=A=g,k=T=k;continue r;}break;case 61:if(!k){k=f=1,g=T=g;continue r;}break;default:if(0==(0|g)&(f=0!=(0|k))){f=1,g=0,k=T=k;continue r;}$(f?p:w,A),f=1,g=A=g,k=T=k;continue r;}}while(0);d(w),d(p),f=1,g=k=0;}v(w),v(p);}$(a,62);}else n=6;}while(0);return 6==(0|n)&&(512&o|0?X(e,0|Se[r>>2],0|Se[r+4>>2]):1&o||2&o|0&&0|G(0|Se[r>>2],0|Se[r+4>>2],5642)||(l=0|Se[r>>2],a=0|Se[r+4>>2],8&o|0&&0|G(l,a,5648)||4&o|0&&0|G(l,a,5650)||c(e,l,a))),1;},Te,Te,Te,Te,Te,Te,Te],Ve=[function(){return Le(2),0;},function(e,r,i,a){e|=0,i|=0,a|=0;var f=0,t=0;if(0!=(0|(r|=0))&&0!=(0|(f=0|Se[(t=r+4|0)>>2]))){if(32&Se[a+16>>2]|0&&2!=(0|i)&0==(0|n(0|Se[r>>2],f)))i=0;else{c(e,5657,9),2==(0|i)&&c(e,5718,7),W(0|e,0|Se[r>>2],0|Se[t>>2]),0|Se[(i=a+28|0)>>2]?($(e,34),Xe[7&Se[i>>2]](e,r,a),$(e,62)):c(e,5633,2),f=0;var o=0,l=0,s=0|Se[4+(i=0|r)>>2];for(a=0;;){if(a>>>0>=s>>>0){a=0;break;}if(o=0|Re[5718+a>>0],7==(0|a)){a=0;break;}if((0|(f=0|Ie[(0|Se[i>>2])+a>>0]))!=(0|o)){l=5;break;}a=a+1|0;}5==(0|l)&&(a=f-o|0),i=0|Se[r>>2],0==(0|a)?X(e,i+7|0,(0|Se[t>>2])-7|0):X(e,i,0|Se[t>>2]),c(e,5677,4),i=1;}}else i=0;return 0|i;}],We=[function(){return Le(3),0;},function(e,r,i,a){return r=0,0|(a|=0)&&0|(r=0|Se[a+4>>2])&&c(0|e,0|Se[a>>2],r),1;},function(e,r,i,a,f){e|=0,i|=0,a|=0,f|=0;var n=0,t=0,o=0;return 0!=(0|(r|=0))&&0!=(0|Se[(o=r+4|0)>>2])?(c(e,5695,10),W(0|e,0|Se[r>>2],0|Se[o>>2]),c(e,5706,7),0|a&&0|(n=0|Se[a+4>>2])&&X(e,0|Se[a>>2],n),0|i&&0|Se[(t=i+4|0)>>2]&&(c(e,5667,9),X(e,0|Se[i>>2],0|Se[t>>2])),b(e,256&Se[f+16>>2]|0?5714:5633),e=1):e=0,0|e;},function(e,r,i,a,f){e|=0,r|=0,i|=0,a|=0,f|=0;var t=0,o=0,l=0,s=0;do{if(r){if(32&Se[f+16>>2]){if(!(0|n(0|Se[r>>2],0|Se[(t=r+4|0)>>2]))){t=0;break;}}else t=r+4|0;c(e,5657,9),(t=0|Se[t>>2])&&W(0|e,0|Se[r>>2],0|t);}else c(e,5657,9);o=8;}while(0);return 8==(0|o)&&(0|i&&0|Se[(l=i+4|0)>>2]&&(c(e,5667,9),X(e,0|Se[i>>2],0|Se[l>>2])),0|Se[(t=f+28|0)>>2]?($(e,34),Xe[7&Se[t>>2]](e,r,f),$(e,62)):c(e,5633,2),0|a&&0|(s=0|Se[a+4>>2])&&c(e,0|Se[a>>2],s),c(e,5677,4),t=1),0|t;}],Ge=[Ee,function(e,r,i,a,f,n){e|=0,r|=0,a|=0,f|=0;var t=0,o=0,l=0,s=0|Re[(i|=0)>>0],u=3<(n|=0)>>>0;if(u&62==s<<24>>24){if(33==(f=0|Re[(a=i+1|0)>>0])<<24>>24){if(!(0|P(0|Ie[(a=i+2|0)>>0]))){e:{e|=0,i=0|a,n=n+-2|0,t=0,o=0|Se[56+(r|=0)>>2];r:do{if(0|o){for(u=0;;){if(u>>>0>=n>>>0)break r;if(!(s=0|H(i+u|0,n-u|0,60)))break r;if((u=s+u|0)>>>0<n>>>0&&60==(0|Re[i+u>>0])&&33==(0|Re[i+(t=u+-1|0)>>0]))break;u=u+1|0;}N(n=0|x(r,1),r,i,t),o=0|ze[15&o](e,n,0|Se[r+112>>2]),M(r,1),n=0|(0==(0|o)?0:u+1|0);break e;}}while(0);n=0;}return 0|(0==(0|(n|=0))?0:n+2|0);}a=0;}else l=7;}else 2<n>>>0?(a=f=i+1|0,f=0|Re[f>>0],l=7):l=11;e:do{if(7==(0|l)){var c=255&f;if(f<<24>>24!=s<<24>>24){switch(s<<24>>24){case 62:case 126:a=0;break e;}a=0|P(c)?0:0==(0|(a=0|L(e,r,a,n+-1|0,s)))?0:a+1|0;}else l=11;}}while(0);e:do{if(11==(0|l))if(u&&(0|Re[i+1>>0])==s<<24>>24){if((f=0|Re[(a=i+2|0)>>0])<<24>>24!=s<<24>>24)a=0|P(255&f)?0:0==(0|(a=0|D(e,r,a,n+-2|0,s)))?0:a+2|0;else if(5<=n>>>0&&(o=255&(l=0|Re[(t=i+3|0)>>0]),l<<24>>24!=s<<24>>24)){switch(s<<24>>24){case 62:case 126:a=0;break e;}if(0|P(o))a=0;else{r:{a=e,f=r,c=t;var b=n+-3|0,$=s;a|=0,f|=0,c|=0,b|=0,$|=0;var k,v=0,d=0;for(k=0;;){if(k>>>0>=b>>>0){var h=0;break;}if(!(h=0|H(c+k|0,b-k|0,$))){h=0;break;}if((0|Re[c+(k=h+k|0)>>0])==$<<24>>24&&!(0|P(0|Ie[c+(k+-1)>>0]))){d=6;break;}}if(6==(0|d))if(h=k+1|0,(d=k+2|0)>>>0<b>>>0&&(0|Re[c+h>>0])==$<<24>>24&&(0|Re[c+d>>0])==$<<24>>24&&0|Se[(v=f+84|0)>>2])N(h=0|x(f,1),f,c,k),h=0|ze[15&Se[v>>2]](a,h,0|Se[f+112>>2]),M(f,1),h=0|h?k+3|0:0;else{if(h>>>0<b>>>0&&(0|Re[c+h>>0])==$<<24>>24){a=0|(0==(0|(d=0|L(a,f,c+-2|0,b+2|0,$)))?0:d+-2|0);break r;}h=0==(0|(h=0|D(a,f,c+-1|0,b+1|0,$)))?0:h+-1|0;}a=0|h;}a=0==(0|(a|=0))?0:a+3|0;}}else a=0;}else a=0;}while(0);return 0|a;},function(e,r,i,a,f,n){var t;e|=0,r|=0,i|=0,n|=0;var o=Ne;for(Ne=Ne+16|0,t=0;;){if(t>>>0>=n>>>0){a=0;var l=t;break;}if(96!=(0|Re[i+t>>0])){a=0,l=t;break;}t=t+1|0;}for(;(f=l>>>0<n>>>0)&a>>>0<t>>>0;)a=96==(0|Re[i+l>>0])?a+1|0:0,l=l+1|0;if(f|a>>>0>=t>>>0){for(f=t;!(f>>>0>=l>>>0)&&32==(0|Re[i+f>>0]);)f=f+1|0;for(a=l-t|0;!(a>>>0<=t>>>0)&&32==(0|Re[i+(n=a+-1|0)>>0]);)a=n;if(!(a>>>0>f>>>0))return i=0==(0|ze[15&Se[r+52>>2]](e,0,0|Se[r+112>>2])),Ne=o,0|(i?0:l);Se[o>>2]=i+f,Se[o+4>>2]=a-f,Se[o+8>>2]=0,Se[o+12>>2]=0,a=(a=0==(0|ze[15&Se[r+52>>2]](e,o,0|Se[r+112>>2])))?0:l;}else a=0;return Ne=o,0|a;},function(e,r,i,a){if(e|=0,r|=0,i|=0,2<=(0|a)>>>0&&32==(0|Re[i+-1>>0])&&32==(0|Re[i+-2>>0])){for(i=0|Se[(a=e+4|0)>>2];i&&32==(0|Re[(0|Se[e>>2])+(i=i+-1|0)>>0]);)Se[a>>2]=i;i=0!=(0|Be[1&Se[r+72>>2]](e,0|Se[r+112>>2]))&1;}else i=0;return 0|i;},function(e,r,i,a,f,n){e|=0,r|=0,i|=0,n|=0;var t,o,l=0,s=0,u=0,b=0,k=0,v=0,d=0;0|a?(f=0|Se[(a=r+420|0)>>2],33==(0|Re[i+-1>>0])?0|Se[r+68>>2]?(v=1,k=6):(s=0,l=1):k=5):(f=0|Se[(a=r+420|0)>>2],k=5),5==(0|k)&&(0|Se[r+76>>2]?(v=0,k=6):(s=0,l=1));e:do{if(6==(0|k)){l=s=1;var h=0;r:for(;;){if(l>>>0>=n>>>0){s=0;break e;}var w=0|Re[i+l>>0];i:do{if(10!=w<<24>>24){var p=l+-1|0;if(92!=(0|Re[i+p>>0]))switch(w<<24>>24){case 91:s=s+1|0;break i;case 93:if(2>(0|s))break r;s=s+-1|0;break i;default:break i;}}else h=1;}while(0);l=l+1|0;}for(o=t=l+1|0;;){if(o>>>0>=n>>>0){k=65;break;}if(!(0|P(255&(s=0|Re[i+o>>0])))){k=18;break;}o=o+1|0;}r:do{if(18==(0|k)){switch(s<<24>>24){case 40:break;case 91:for(t=s=o+1|0;;){if(t>>>0>=n>>>0){s=0,l=t;break e;}if(93==(0|Re[i+t>>0]))break;t=t+1|0;}if((0|t)==(0|s)){if(h){for(w=0|x(r,1),s=1;!(s>>>0>=l>>>0);)10==(h=0|Re[i+s>>0])<<24>>24?32!=(0|Re[i+(s+-1)>>0])&&$(w,32):$(w,255&h),s=s+1|0;h=0|Se[w>>2],s=0|Se[w+4>>2];}else h=i+1|0,s=p;}else h=i+s|0,s=t-s|0;if(!(s=0|U(r+116|0,h,s))){s=0,l=t;break e;}o=0|Se[s+8>>2],s=0|Se[s+4>>2],t=t+1|0;break r;default:k=65;break r;}for(;;){var m=o+1|0;if(m>>>0>=n>>>0){var y=m;break;}if(!(0|P(0|Ie[i+m>>0]))){y=m;break;}o=m;}i:for(;;){if(y>>>0>=n>>>0){s=0,l=y;break e;}switch((w=0|Re[i+y>>0])<<24>>24){case 41:s=y,n=u=0,b=y;break i;case 92:s=2;break;default:if(0!=(0|y)&&0!=(0|P(0|Ie[i+(y+-1)>>0])))switch(w<<24>>24){case 34:case 39:k=27;break i;default:s=1;}else s=1;}y=y+s|0;}i:do{if(27==(0|k)){h=1,s=t=y+1|0;a:for(;;){for(b=s;;){if(b>>>0>=n>>>0){s=0,l=b;break e;}if(92!=(s=0|Re[i+b>>0])<<24>>24){if(s<<24>>24==w<<24>>24)break;if(!(h|41!=s<<24>>24)){h=b;break a;}s=1;}else s=2;b=b+s|0;}h=0,s=b+1|0;}do{if(s=0|Re[i+(h=h+-1|0)>>0],h>>>0<=t>>>0)break;}while(0!=(0|P(255&s)));switch(s<<24>>24){case 34:case 39:s=y,u=t,n=h;break i;}s=b,n=u=0;}}while(0);for(;t=0|Re[i+(w=s+-1|0)>>0],!(s>>>0<=m>>>0)&&0|P(255&t);)s=w;(s=62==t<<24>>24?w:s)>>>0>(h=60==(0|Re[i+m>>0])?o+2|0:m)>>>0?(c(m=0|x(r,1),i+h|0,s-h|0),h=m):h=0,n>>>0>u>>>0?c(s=0|x(r,1),i+u|0,n-u|0):s=0,o=s,s=h,t=b+1|0;}}while(0);if(65==(0|k)){if(h){for(w=0|x(r,1),s=1;!(s>>>0>=l>>>0);)10==(h=0|Re[i+s>>0])<<24>>24?32!=(0|Re[i+(s+-1)>>0])&&$(w,32):$(w,255&h),s=s+1|0;h=0|Se[w>>2],s=0|Se[w+4>>2];}else h=i+1|0,s=p;if(!(s=0|U(r+116|0,h,s))){s=0,l=o;break;}o=0|Se[s+8>>2],s=0|Se[s+4>>2];}if(1<l>>>0?(l=0|x(r,1),v?c(l,i+1|0,p):(Se[(h=r+440|0)>>2]=1,N(l,r,i+1|0,p),Se[h>>2]=0),h=l):h=0,s){if(q(w=0|x(r,1),s),!v){s=0|We[3&Se[r+76>>2]](e,w,o,h,0|Se[r+112>>2]),l=t;break;}0|(s=0|Se[(l=e+4|0)>>2])&&33==(0|Re[(0|Se[e>>2])+(d=s+-1|0)>>0])&&(Se[l>>2]=d),s=0|We[3&Se[r+68>>2]](e,w,o,h,0|Se[r+112>>2]);}else s=0;l=t;}}while(0);return Se[a>>2]=f,0|(0|s?l:0);},function(e,r,i,a,f,n){e|=0,r|=0,i|=0;var t=Ne;Ne=Ne+32|0,Se[(a=t+16|0)>>2]=0,f=0|i,n|=0;var o=0|a,l=0,s=0,u=0;e:do{if(3<=n>>>0&&60==(0|Re[f>>0])&&0!=(0|ue(0|Ie[f+(l=47==(0|Re[f+1>>0])?2:1)>>0]))){Se[o>>2]=0;r:for(;!(l>>>0>=n>>>0);){var c=0|Re[f+l>>0];if(!(0|ue(255&c)))switch(c<<24>>24){case 45:case 43:case 46:break;default:break r;}l=l+1|0;}if(1<l>>>0){var b,$=0|Re[(c=f+l|0)>>0];if(b=64==$<<24>>24){var k,v=c,d=n-l|0;v|=0,d|=0;var h=0;c=k=0;r:for(;;){if(c>>>0>=d>>>0){k=0;break;}b=0|Re[v+c>>0];i:do{if(!(0|ue(255&b))){switch(b<<24>>24){case 62:h=6;break r;case 95:case 46:case 45:break i;case 64:break;default:k=0;break r;}k=k+1|0;}}while(0);c=c+1|0;}6==(0|h)&&(k=1==(0|k)?c+1|0:0),b=0|(s=0|k);}if(b){Se[o>>2]=2,c=s+l|0;break;}2<l>>>0?58==$<<24>>24?(Se[o>>2]=1,l=l+1|0,c=1):c=0:(l=2,c=0);}else c=0;if(l>>>0<n>>>0){if(c){$=l;r:for(;;){if($>>>0>=n>>>0){c=0;break e;}switch((c=0|Re[f+$>>0])<<24>>24){case 10:case 32:case 34:case 39:case 62:break r;case 92:c=2;break;default:c=1;}$=$+c|0;}if($>>>0>l>>>0&62==c<<24>>24){c=$+1|0;break;}l=$,u=24;}}else u=24;for(24==(0|u)&&(Se[o>>2]=0);;){if(l>>>0>=n>>>0){c=0;break e;}if(c=l+1|0,62==(0|Re[f+l>>0]))break;l=c;}}else c=0;}while(0);return o=0|c,Se[t>>2]=i,Se[(n=t+4|0)>>2]=o,Se[t+8>>2]=0,Se[t+12>>2]=0,2<o>>>0?0!=(0|Se[(f=r+48|0)>>2])&0!=(0|(a=0|Se[a>>2]))?(l=0|x(r,1),Se[t>>2]=i+1,Se[n>>2]=o+-2,q(l,t),a=0|Ve[1&Se[f>>2]](e,l,a,0|Se[r+112>>2]),M(r,1)):a=(a=0|Se[r+80>>2])?0|ze[15&a](e,t,0|Se[r+112>>2]):0:a=0,Ne=t,0|(0==(0|a)?0:o);},function(e,r,i,a,f,n){e|=0,r|=0,i|=0,n|=0;var t=Ne;return Ne=Ne+16|0,Se[t>>2]=0,Se[t+4>>2]=0,Se[t+8>>2]=0,Se[t+12>>2]=0,1<n>>>0?0|te(4818,a=0|Ie[(i=i+1|0)>>0],24)?((f=0|Se[r+100>>2])?(Se[t>>2]=i,Se[t+4>>2]=1,Xe[7&f](e,t,0|Se[r+112>>2])):$(e,a),a=2):a=0:(1==(0|n)&&$(e,0|Ie[i>>0]),a=2),Ne=t,0|a;},function(e,r,i,a,f,n){e|=0,r|=0,i|=0,n|=0;var t=0,o=Ne;if(Ne=Ne+16|0,Se[o>>2]=0,Se[o+4>>2]=0,Se[o+8>>2]=0,Se[o+12>>2]=0,1<n>>>0){if(f=(a=35==(0|Re[i+1>>0]))?2:1,a&f>>>0<n>>>0){var l=120==(0|ce(0|Ie[i+f>>0])),s=1^l,u=1;l=f+(1&l)|0;}else s=1,u=a,l=f;}else s=1,u=0,l=1;var b=l;e:for(;;){if(b>>>0>=n>>>0){a=0;break;}if(f=(a=0|Re[i+b>>0])<<24>>24,s){if(u){if(!(10>(f+-48|0)>>>0)){t=12;break e;}}else if(!(0|ue(f))){t=12;break e;}}else{var k=f;if(!(1&(10>((k|=0)-48|0)>>>0|6>((32|k)-97|0)>>>0)|0)){t=12;break e;}}b=b+1|0;}do{if(12==(0|t))if(b>>>0>l>>>0&59==a<<24>>24){if(a=b+1|0,u){if(7<(b-l|0)>>>0){a=0;break;}n=i+l|0,k=0|(f=s?10:16),n|=0,k|=0,f=Ne,Ne=Ne+128|0;var v,d=f;Se[d>>2]=0,Se[d+4>>2]=n,Se[d+44>>2]=n,Se[d+8>>2]=0>(0|n)?-1:n+2147483647|0,Se[d+76>>2]=-1,oe(d),n=d;var h=k;n|=0,h|=0;var w=0;e:do{if(36<h>>>0)h=v=0;else{for(d=n+4|0,k=n+100|0;(v=0|Se[d>>2])>>>0<(0|Se[k>>2])>>>0?(Se[d>>2]=v+1,v=0|Ie[v>>0]):v=0|le(n),0!=(0|ne(v)););r:do{switch(0|v){case 43:case 45:v=(45==(0|v))<<31>>31;var p=0|Se[d>>2];if(p>>>0<(0|Se[k>>2])>>>0){Se[d>>2]=p+1;var m=v;v=0|Ie[p>>0];}else m=v,v=0|le(n);break r;default:m=0;}}while(0);if(p=0==(0|h),16==(16|h)&48==(0|v)){if((v=0|Se[d>>2])>>>0<(0|Se[k>>2])>>>0?(Se[d>>2]=v+1,v=0|Ie[v>>0]):v=0|le(n),120!=(32|v)){if(p){h=8;var y=41;}else y=27;}else{if((v=0|Se[d>>2])>>>0<(0|Se[k>>2])>>>0?(Se[d>>2]=v+1,v=0|Ie[v>>0]):v=0|le(n),15<(0|Ie[7987+v>>0])){if(!(0|Se[k>>2])){h=v=0;break e;}Se[d>>2]=(0|Se[d>>2])-2,h=v=0;break e;}h=16,y=41;}}else{if(!((h=p?10:h)>>>0>(0|Ie[7987+v>>0])>>>0)){0|Se[k>>2]&&(Se[d>>2]=(0|Se[d>>2])-1),oe(n),h=v=0;break e;}y=27;}r:do{if(27==(0|y))if(10==(0|h)){if(10>(h=v+-48|0)>>>0)for(p=0;p=(10*p|0)+h|0,(v=0|Se[d>>2])>>>0<(0|Se[k>>2])>>>0?(Se[d>>2]=v+1,v=0|Ie[v>>0]):v=0|le(n),10>(h=v+-48|0)>>>0&429496729>p>>>0;);else p=0;h=0;var _=v+-48|0;if(10>_>>>0){var g=p;p=h;do{h=0|ke(0|g,0|p,10,0);var A=(0>(0|_))<<31>>31,T=~A;if((w=qe)>>>0>T>>>0|(0|w)==(0|T)&h>>>0>~_>>>0){h=10,w=g,y=67;break r;}g=0|ve(0|h,0|w,0|_,0|A),p=qe,(v=0|Se[d>>2])>>>0<(0|Se[k>>2])>>>0?(Se[d>>2]=v+1,v=0|Ie[v>>0]):v=0|le(n),_=v+-48|0;}while(10>_>>>0&(429496729>p>>>0|429496729==(0|p)&2576980378>g>>>0));9<_>>>0?(h=p,v=g):(h=10,w=g,y=67);}else v=p;}else y=41;}while(0);r:do{if(41==(0|y)){if(!(h+-1&h)){if(y=0|Re[8243+((23*h|0)>>>5&7)>>0],h>>>0>(_=255&(p=0|Re[7987+v>>0]))>>>0){for(w=0;w=_|w<<y,(v=0|Se[d>>2])>>>0<(0|Se[k>>2])>>>0?(Se[d>>2]=v+1,v=0|Ie[v>>0]):v=0|le(n),134217728>w>>>0&h>>>0>(_=255&(p=0|Re[7987+v>>0]))>>>0;);_=p,p=0;}else _=p,w=p=0;if(A=0|pe(-1,-1,0|y),h>>>0<=(255&_)>>>0|(g=qe)>>>0<p>>>0|(0|g)==(0|p)&A>>>0<w>>>0){y=67;break;}for(;;)if(w=0|me(0|w,0|p,0|y),p=qe,w|=255&_,(v=0|Se[d>>2])>>>0<(0|Se[k>>2])>>>0?(Se[d>>2]=v+1,v=0|Ie[v>>0]):v=0|le(n),h>>>0<=(255&(_=0|Re[7987+v>>0]))>>>0|p>>>0>g>>>0|(0|p)==(0|g)&w>>>0>A>>>0){y=67;break r;}}if(h>>>0>(_=255&(p=0|Re[7987+v>>0]))>>>0)for(w=0;w=_+(0|Ue(w,h))|0,(v=0|Se[d>>2])>>>0<(0|Se[k>>2])>>>0?(Se[d>>2]=v+1,v=0|Ie[v>>0]):v=0|le(n),119304647>w>>>0&h>>>0>(_=255&(p=0|Re[7987+v>>0]))>>>0;);else w=0;if(_=0,h>>>0>(255&p)>>>0)for(y=0|we(-1,-1,0|h,0),T=qe,g=_;;){if(g>>>0>T>>>0|(0|g)==(0|T)&w>>>0>y>>>0){p=g,y=67;break r;}if(_=0|ke(0|w,0|g,0|h,0),4294967295<(A=qe)>>>0|-1==(0|A)&_>>>0>~(p&=255)>>>0){p=g,y=67;break r;}if(w=0|ve(0|_,0|A,0|p,0),_=qe,(v=0|Se[d>>2])>>>0<(0|Se[k>>2])>>>0?(Se[d>>2]=v+1,v=0|Ie[v>>0]):v=0|le(n),h>>>0<=(255&(p=0|Re[7987+v>>0]))>>>0){p=_,y=67;break;}g=_;}else p=_,y=67;}}while(0);if(67==(0|y))if(h>>>0>(0|Ie[7987+v>>0])>>>0){for(;(v=0|Se[d>>2])>>>0<(0|Se[k>>2])>>>0?(Se[d>>2]=v+1,v=0|Ie[v>>0]):v=0|le(n),h>>>0>(0|Ie[7987+v>>0])>>>0;);h=0,v=-2147483648;}else h=p,v=w;if(0|Se[k>>2]&&(Se[d>>2]=(0|Se[d>>2])-1),!(0>h>>>0|0==(0|h)&2147483648>v>>>0)){if(!m){v=0,h=2147483647;break;}if(0<h>>>0|0==(0|h)&2147483648<v>>>0){v=0,h=-2147483648;break;}}h=0|de(v^m|0,h^(k=(0>(0|m))<<31>>31)|0,0|m,0|k),v=qe;}}while(0);if(qe=v,Ne=f,f=0|(k=0|h),f|=0,!(0|(17<((f|=0)-14|0)>>>0&8<f>>>0&1<(f+-11|0)>>>0?1114112>f>>>0&65535!=(1|f)&55296!=(-2048&f|0)&1|0:0))){a=0;break;}}else{f=i,n=a,f|=0,n|=0,k=0;do{if(7>(n+-4|0)>>>0){switch(d=f,m=n,d|=0,T=0,0|(m|=0)){case 6:m=6,T=3;break;case 5:m=5,T=4;break;case 4:m=4,T=5;break;case 3:m=3,T=6;break;case 2:m=2;break;default:m=(0|Oe[3680+((0|Ie[d+6>>0])<<1)>>1])+m|0,T=3;}if(3==(0|T)&&(m=m+(0|Oe[3680+((0|Ie[d+5>>0])<<1)>>1])|0,T=4),4==(0|T)&&(m=m+(0|Oe[3680+((0|Ie[d+4>>0])<<1)>>1])|0,T=5),5==(0|T)&&(m=m+(0|Oe[3680+((0|Ie[d+3>>0])<<1)>>1])|0,T=6),6==(0|T)&&(m=m+(0|Oe[3680+(1+(0|Ie[d+2>>0])<<1)>>1])|0),d=771>(d=m+(0|Oe[3680+((0|Ie[d+1>>0])<<1)>>1])|0)>>>0&&(0|Re[f>>0])==(0|Re[(k=0|Se[596+(d<<2)>>2])>>0])){if(T=f+1|0,y=k+1|0,g=n+-1|0,T|=0,y|=0,g|=0){m=0|Re[T>>0];e:do{if(m<<24>>24)for(;;){if(!(m<<24>>24==(d=0|Re[y>>0])<<24>>24&0!=(0|(g=g+-1|0))&0!=d<<24>>24))break e;if(y=y+1|0,!((m=0|Re[(T=T+1|0)>>0])<<24>>24)){m=0;break;}}else m=0;}while(0);m=(255&m)-(0|Ie[y>>0])|0;}else m=0;d=0==(0|m);}if(d&&0==(0|Re[k+n>>0]))break;}k=0;}while(0);if(!(0|k)){a=0;break;}}0|(f=0|Se[r+96>>2])?(Se[o>>2]=i,Se[o+4>>2]=a,Xe[7&f](e,o,0|Se[r+112>>2])):($(e,38),u&&$(e,35),s||$(e,120),c(e,i+l|0,a-l|0));}else a=0;}while(0);return Ne=o,0|a;},function(e,r,i,a,f,l){e|=0,i|=0,a|=0,l|=0;var s=Ne;Ne=Ne+16|0;var u=48+(r|=0)|0;if(0!=(0|Se[u>>2])&&0==(0|Se[r+440>>2])){var b=0|x(r,1);f=0|s;var $=0|b;i|=0,a|=0;var k,v=0;if(4<=(l|=0)>>>0&&47==(0|Re[i+1>>0])&&47==(0|Re[i+2>>0])){for(k=0;!(k>>>0>=a>>>0)&&26>((32|Ie[i+~k>>0])-97|0)>>>0|0;)k=k+1|0;var d=i+(0-k)|0;if(0!=(0|n(d,k+l|0))&&0!=(0|(v=0|t(i+3|0,l+-3|0)))){for(a=v+3|0;!(a>>>0>=l>>>0||0|ne(0|Ie[i+a>>0]));)a=a+1|0;(a=0|o(i,a))?(c($,d,a+k|0),Se[f>>2]=k):a=0;}else a=0;}else a=0;0|(f=0|a)&&(h(e,(0|Se[e+4>>2])-(0|Se[s>>2])|0),Ve[1&Se[u>>2]](e,b,1,0|Se[r+112>>2])),M(r,1);}else f=0;return Ne=s,0|f;},function(e,r,i,a,f,n){e|=0,i|=0,a|=0,n|=0;var t=Ne;Ne=Ne+16|0;var l=48+(r|=0)|0;if(0!=(0|Se[l>>2])&&0==(0|Se[r+440>>2])){var s=0|x(r,1);f=0|t;var u=0|s;i|=0,a|=0,n|=0;var b,$,k=0;for($=0;!($>>>0>=a>>>0);){var v=0|Re[i+~$>>0],d=255&v;if(!(v<<24>>24))break;if(0==(0|ue(d))&&0==(0|te(4410,d,5)))break;$=$+1|0;}if($){v=n+-1|0,d=a=b=0;e:for(;!(b>>>0>=n>>>0);){var w=0|Re[i+b>>0];r:do{if(!(0|ue(255&w))){switch(w<<24>>24){case 95:case 45:break r;case 64:d=d+1|0;break r;case 46:break;default:break e;}if(b>>>0>=v>>>0)break e;a=a+1|0;}}while(0);b=b+1|0;}0==(0|a)|1!=(0|d)|2>b>>>0||0==(0|(k=0|o(i,b)))?k=0:(c(u,i+(0-$)|0,k+$|0),Se[f>>2]=$);}else k=0;0|(f=0|k)&&(h(e,(0|Se[e+4>>2])-(0|Se[t>>2])|0),Ve[1&Se[l>>2]](e,s,2,0|Se[r+112>>2])),M(r,1);}else f=0;return Ne=t,0|f;},function(e,r,i,a,f,n){e|=0,i|=0,a|=0,n|=0;var l=Ne;Ne=Ne+16|0;var s=l,u=76+(r|=0)|0;if(0!=(0|Se[u>>2])&&0==(0|Se[r+440>>2])){var b=0|x(r,1);f=0|s;var $=0|b;i|=0,n|=0;var k=0,v=0,d=0;if(0!=(0|a)&&0==(0|se(v=0|Ie[i+-1>>0]))?4>n>>>0|0==(0|ne(v))?k=0:d=5:4>n>>>0?k=0:d=5,5==(0|d))if(0==(0|$e(i,4400,4))&&0!=(0|(k=0|t(i,n)))){for(;!(k>>>0>=n>>>0||0|ne(0|Ie[i+k>>0]));)k=k+1|0;(k=0|o(i,k))?(c($,i,k),Se[f>>2]=0):k=0;}else k=0;0|(f=0|k)&&(c(a=0|x(r,1),4810,7),c(a,0|Se[b>>2],0|Se[b+4>>2]),h(e,(0|Se[e+4>>2])-(0|Se[s>>2])|0),0|Se[(i=r+100|0)>>2]?(n=0|x(r,1),Xe[7&Se[i>>2]](n,b,0|Se[(s=r+112|0)>>2]),We[3&Se[u>>2]](e,a,0,n,0|Se[s>>2]),M(r,1)):We[3&Se[u>>2]](e,a,0,b,0|Se[r+112>>2]),M(r,1)),M(r,1);}else f=0;return Ne=l,0|f;},function(e,r,i,a,f,n){e|=0,i|=0,a|=0,f|=0,n|=0;var t=0,o=Ne;Ne=Ne+16|0;var s=o+4|0,u=o;if(0!=(0|Se[48+(r|=0)>>2])&&0==(0|Se[r+440>>2])){var b,k=0|x(r,1),v=0|s,d=0|k,w=0|i,p=0|n,m=0|u,y=0,_=0|l(w,0|a,0|f,p,114);e:do{if(_){for(y=4<p>>>0?0==(0|be(w+1|0,4415,4)):0,b=1;;){var g=b+10|0;if(g>>>0<=p>>>0&&0==(0|be(w+b|0,4420,10)))var A=10;else{if(g=(g=b+2|0)>>>0<p>>>0&&(A=0==(0|be(w+b|0,4431,2)))?g:b,!(0|ue(0|Ie[w+g>>0]))){g=0;break e;}A=24,g=g+1|0;}for(;;){if(g>>>0>=p>>>0){var T=0;break;}if(!(95==(T=0|Re[w+g>>0])<<24>>24|0!=(0|ue(255&T)))){T=1;break;}g=g+1|0;}if(!((b=g-b|0)>>>0<=A>>>0&1<b>>>0)){g=0;break e;}if(!T)break;if(!(43==(A=0|Re[w+g>>0])<<24>>24|y&45==A<<24>>24))break;if(b=g+1|0,!g){g=b;break;}}r:do{if(g>>>0<p>>>0&&47==(0|Re[w+g>>0]))for(;;){if(g>>>0>=p>>>0)break r;if(!(0|ue(255&(b=0|Re[w+g>>0]))))switch(b<<24>>24){case 45:case 47:case 95:break;default:break r;}g=g+1|0;}}while(0);c(d,w+(0-_)|0,g+_|0),Se[m>>2]=1==(0|_)&1,Se[v>>2]=_;}else g=0;}while(0);if(v=0|g)t=5;else{v=0|s,d=0|k,i|=0,a|=0,f|=0,n|=0,w=0|u,g=0;e:do{if(3<=n>>>0&&0!=(0|(g=0|l(i,a,f,n,117)))){if(0|ue(255&(a=0|Re[i+1>>0])))a=2;else switch(a<<24>>24){case 45:case 95:a=2;break;default:a=0;break e;}r:for(;!(a>>>0>=n>>>0);){if(!(0|ue(255&(f=0|Re[i+a>>0]))))switch(f<<24>>24){case 45:case 47:case 95:break;default:break r;}a=a+1|0;}c(d,i+(0-g)|0,a+g|0),Se[w>>2]=1==(0|g)&1,Se[v>>2]=g;}else a=0;}while(0);(v=0|a)?t=5:v=0;}5==(0|t)&&(a=0|x(r,1),0|Se[u>>2]&&$(a,47),c(a,0|Se[k>>2],0|Se[k+4>>2]),h(e,(0|Se[e+4>>2])-(0|Se[s>>2])|0),0|Se[(i=r+100|0)>>2]?(u=0|x(r,1),Xe[7&Se[i>>2]](u,k,0|Se[(t=r+112|0)>>2]),We[3&Se[r+76>>2]](e,a,0,u,0|Se[t>>2]),M(r,1)):We[3&Se[r+76>>2]](e,a,0,k,0|Se[r+112>>2]),M(r,1)),M(r,1);}else v=0;return Ne=o,0|v;},function(e,r,i,a,f,n){e|=0,i|=0,n|=0;var t=92+(r|=0)|0;e:do{if(2>n>>>0|0==(0|Se[t>>2]))a=0;else{r:do{if(40==(0|Re[i+1>>0])){for(a=2;!(a>>>0>=n>>>0)&&41!=(0|Re[i+a>>0])&&92!=(0|Re[i+(a+-1)>>0]);)a=a+1|0;if((0|a)==(0|n)){a=0;break e;}n=2;}else for(a=1;;){if(a>>>0>=n>>>0){n=1;break r;}if(0|P(0|Ie[i+a>>0])){n=1;break r;}a=a+1|0;}}while(0);if(f=a-n|0){var o=0|x(r,1);N(o,r,i+n|0,f),ze[15&Se[t>>2]](e,o,0|Se[r+112>>2]),M(r,1),a=a+(2==(0|n)&1)|0;}else a=2==(0|n)?3:0;}}while(0);return 0|a;},Ee,Ee,Ee],Ye=[function(){Le(5);},function(e,r){var i;e|=0;var a=4+(r|=0)|0,f=0;for(i=0|Se[a>>2];!(0>=(0|i));)c(e,5390,12),Se[a>>2]=i=(0|Se[a>>2])-1|0,f=1;f&&c(e,5403,7),Y(0,r);},function(e,r){r|=0,0|Se[4+(e|=0)>>2]&&$(e,10),b(e,256&Se[r+16>>2]|0?5917:5924);},Y],Xe=[function(){Le(6);},function(e,r){r|=0,0|Se[4+(e|=0)>>2]&&$(e,10),c(e,5999,13),0|r&&c(e,0|Se[r>>2],0|Se[r+4>>2]),c(e,5984,14);},function(e,r){r|=0,0|Se[4+(e|=0)>>2]&&$(e,10),c(e,5946,37),0|r&&c(e,0|Se[r>>2],0|Se[r+4>>2]),c(e,5984,14);},function(e,r,i){var a;e|=0,r|=0;e:do{if(0|r){for(i=0|Se[r+4>>2];;){if(!i){i=0;break;}var f=i+-1|0;if(10!=(0|Re[(0|Se[r>>2])+f>>0]))break;i=f;}for(a=0;;){if(i>>>0<=a>>>0)break e;if(10!=(0|Re[(f=0|Se[r>>2])+a>>0]))break;a=a+1|0;}0|Se[e+4>>2]&&($(e,10),f=0|Se[r>>2]),c(e,f+a|0,i-a|0),$(e,10);}}while(0);},function(e,r,i){r|=0,i|=0;var a,f=0,n=0;if(0|Se[4+(e|=0)>>2]&&$(e,10),0|r&&0|(f=0|Se[(n=r+4|0)>>2])){for(a=0;!(a>>>0>=f>>>0)&&0|ne(0|Ie[(0|Se[r>>2])+a>>0]);)a=a+1|0;if((0|a)!=(0|f)){c(e,5876,3);e:do{if(128&Se[i+16>>2])for(;;){if(!(a>>>0<(f=0|Se[n>>2])>>>0))break e;for(var t=a;!(t>>>0>=f>>>0)&&10!=(0|Re[(0|Se[r>>2])+t>>0]);)t=t+1|0;if(t>>>0>a>>>0?(c(e,(0|Se[r>>2])+a|0,t-a|0),a=0|Se[n>>2]):a=f,t>>>0>=(a+-1|0)>>>0)break e;J(e,i),a=t+1|0;}else c(e,(0|Se[r>>2])+a|0,(0|Se[n>>2])-a|0);}while(0);c(e,5880,5);}}},function(e,r){r|=0,c(e|=0,5812,5),0|r&&c(e,0|Se[r>>2],0|Se[r+4>>2]),c(e,5818,6);},function(e,r){0|(r|=0)&&X(0|e,0|Se[r>>2],0|Se[r+4>>2]);},function(e,r,i){e|=0,0|Se[32+(i|=0)>>2]&&c(e,4194,15),0|Se[(r=i+36|0)>>2]&&(c(e,4210,9),b(e,0|Se[r>>2]),$(e,34));}],Je=[Ce,function(e,r,i,a){e|=0,r|=0,i|=0;var f=4+(a|=0)|0,n=0|Se[f>>2],t=a+8|0;n?t=0|Se[t>>2]:(n=i+-1|0,c(e,5549,18),t=Se[t>>2]=n,n=0|Se[f>>2]),t=i-t|0;e:do{if((0|t)>(0|n))for(;;){if((0|t)<=(0|n))break e;c(e,5568,10),Se[f>>2]=n=1+(0|Se[f>>2])|0;}else if((0|t)>=(0|n))c(e,5605,11);else{for(c(e,5579,6),n=0|Se[f>>2];!((0|t)>=(0|n));)c(e,5586,12),Se[f>>2]=n=(0|Se[f>>2])-1|0;c(e,5599,5);}}while(0);c(e,5617,10),0|(n=0|Se[a+12>>2])&&b(e,n),c(e,5628,4),Se[a>>2]=1+(f=0|Se[a>>2]),k(e,f),c(e,5633,2),0|r&&X(e,0|Se[r>>2],0|Se[r+4>>2]),c(e,5636,5);},function(e,r,i,a){r|=0,i|=0;var f,n=0,t=0,o=0,l=0,s=0;if(0|Se[4+(e|=0)>>2]&&$(e,10),0!=(0|i)&&0!=(0|Se[(l=i+4|0)>>2])){for(c(e,6013,18),a=f=0;;){var u=0|Se[l>>2];if(a>>>0>=u>>>0)break;for(;!(a>>>0>=u>>>0);){if(!(0|ne(255&(n=0|Re[(t=0|Se[i>>2])+a>>0])))){o=a,s=10;break;}a=a+1|0;}if(10==(0|s)){for(;s=0,!(o>>>0>=u>>>0||0|ne(0|Ie[t+o>>0]));)o=o+1|0;n=a+(46==n<<24>>24&1)|0,f?($(e,32),a=0|Se[i>>2]):a=t,X(e,a+n|0,o-n|0),a=o;}f=f+1|0,a=a+1|0;}c(e,5633,2);}else c(e,6032,11);0|r&&X(e,0|Se[r>>2],0|Se[r+4>>2]),c(e,6044,14);},function(e,r,i,a){r|=0,i|=0,a|=0,0|Se[4+(e|=0)>>2]&&$(e,10);var f=0==(64&Se[a+16>>2]|0);c(e,5930,2),k(e,i),f?c(e,5796,1):(c(e,5933,5),0|(f=0|Se[a+12>>2])&&b(e,f),c(e,5628,4),Se[a>>2]=1+(f=0|Se[a>>2]),k(e,f),c(e,5633,2)),0|r&&c(e,0|Se[r>>2],0|Se[r+4>>2]),c(e,5939,3),k(e,i),c(e,5943,2);},function(e,r,i){r|=0,i|=0,0|Se[4+(e|=0)>>2]&&$(e,10),c(e,(i=0!=(1&i|0))?5891:5897,5),0|r&&c(e,0|Se[r>>2],0|Se[r+4>>2]),c(e,i?5903:5910,6);},function(e,r,i,a){if(r|=0,c(e|=0,5886,4),0|r){var f=0|Se[r>>2];for(i=0|Se[r+4>>2];;){if(!i){i=0;break;}if(10!=(0|Re[f+(a=i+-1|0)>>0]))break;i=a;}c(e,f,i);}c(e,5579,6);},function(e,r,i){r|=0,i|=0,0|Se[4+(e|=0)>>2]&&$(e,10),c(e,5825,15),0|r&&c(e,0|Se[r>>2],0|Se[r+4>>2]),c(e,5841,16),0|i&&c(e,0|Se[i>>2],0|Se[i+4>>2]),c(e,5858,17);},Ce],Ze=[function(){Le(8);},function(e,r,i,a,f){switch(e|=0,r|=0,f|=0,(a=0!=(4&(i|=0)|0))?c(e,5726,3):c(e,5730,3),1<(0|f)&&(c(e,5734,10),k(e,f),c(e,5745,2)),3&i){case 3:c(e,5748,16);break;case 1:c(e,5765,14);break;case 2:c(e,5780,15);break;default:c(e,5796,1);}0|r&&c(e,0|Se[r>>2],0|Se[r+4>>2]),c(e,a?5798:5805,6);}];return{___muldi3:ke,___udivdi3:we,_bitshift64Lshr:pe,_bitshift64Shl:me,_default_renderer:function(e,r,i,n,t,o){return e|=0,r|=0,i|=0,n|=0,t|=0,o|=0,0|Se[2223]||(Se[2223]=1,Se[2101]=0|a(8252,805,0),Se[2102]=0|a(8436,805,1),Se[2103]=8252,Se[2104]=8436),0|f(e,r,i,n,t,0,o);},_free:Q,_i64Add:ve,_i64Subtract:de,_malloc:Z,_memcpy:ye,_memmove:_e,_memset:ge,_sbrk:Ae,_wiki_renderer:function(e,r,i,n,t,o){return e|=0,r|=0,i|=0,n|=0,t|=0,o|=0,0|Se[2224]||(Se[2224]=1,Se[2105]=0|a(8588,1825,0),Se[2106]=0|a(8740,1825,1),Se[2107]=8588,Se[2108]=8740),0|f(e,r,i,n,t,1,o);},dynCall_iii:function(e,r,i){return 0|Be[1&(0|e)](0|r,0|i);},dynCall_iiii:function(e,r,i,a){return 0|ze[15&(0|e)](0|r,0|i,0|a);},dynCall_iiiii:function(e,r,i,a,f){return 0|Ve[1&(0|e)](0|r,0|i,0|a,0|f);},dynCall_iiiiii:function(e,r,i,a,f,n){return 0|We[3&(0|e)](0|r,0|i,0|a,0|f,0|n);},dynCall_iiiiiii:function(e,r,i,a,f,n,t){return 0|Ge[15&(0|e)](0|r,0|i,0|a,0|f,0|n,0|t);},dynCall_vii:function(e,r,i){Ye[3&(0|e)](0|r,0|i);},dynCall_viii:function(e,r,i,a){Xe[7&(0|e)](0|r,0|i,0|a);},dynCall_viiii:function(e,r,i,a,f){Je[7&(0|e)](0|r,0|i,0|a,0|f);},dynCall_viiiii:function(e,r,i,a,f,n){Ze[1&(0|e)](0|r,0|i,0|a,0|f,0|n);},establishStackSpace:function(e){Ne=0|e;},getTempRet0:function(){return 0|qe;},runPostSets:function(){},setTempRet0:function(e){qe=0|e;},setThrew:function(e){Pe||(Pe=0|e);},stackAlloc:function(e){var r=Ne;return Ne=15+(Ne=Ne+(0|e)|0)&-16,0|r;},stackRestore:function(e){Ne=0|e;},stackSave:function(){return 0|Ne;}};}(snudown_es_e.asmGlobalArg,snudown_es_e.asmLibraryArg,u);snudown_es_e.___muldi3=U.___muldi3,snudown_es_e.___udivdi3=U.___udivdi3,snudown_es_e._bitshift64Lshr=U._bitshift64Lshr,snudown_es_e._bitshift64Shl=U._bitshift64Shl,snudown_es_e._default_renderer=U._default_renderer,snudown_es_e._free=U._free,snudown_es_e._i64Add=U._i64Add,snudown_es_e._i64Subtract=U._i64Subtract,snudown_es_e._malloc=U._malloc,snudown_es_e._memcpy=U._memcpy,snudown_es_e._memmove=U._memmove,snudown_es_e._memset=U._memset,snudown_es_e._sbrk=U._sbrk,snudown_es_e._wiki_renderer=U._wiki_renderer,snudown_es_e.establishStackSpace=U.establishStackSpace,snudown_es_e.getTempRet0=U.getTempRet0,snudown_es_e.runPostSets=U.runPostSets,snudown_es_e.setTempRet0=U.setTempRet0,snudown_es_e.setThrew=U.setThrew;var snudown_es_j=snudown_es_e.stackAlloc=U.stackAlloc,L=snudown_es_e.stackRestore=U.stackRestore,D=snudown_es_e.stackSave=U.stackSave;if(snudown_es_e.dynCall_iii=U.dynCall_iii,snudown_es_e.dynCall_iiii=U.dynCall_iiii,snudown_es_e.dynCall_iiiii=U.dynCall_iiiii,snudown_es_e.dynCall_iiiiii=U.dynCall_iiiiii,snudown_es_e.dynCall_iiiiiii=U.dynCall_iiiiiii,snudown_es_e.dynCall_vii=U.dynCall_vii,snudown_es_e.dynCall_viii=U.dynCall_viii,snudown_es_e.dynCall_viiii=U.dynCall_viiii,snudown_es_e.dynCall_viiiii=U.dynCall_viiiii,snudown_es_e.asm=U,q&&function(e){var r,i=e.length;for(r=0;r<i;++r)w[8+r]=e.charCodeAt(r);}(q),(n.prototype=Error()).constructor=n,snudown_es_e.run=t,snudown_es_e.exit=function(r,i){i&&snudown_es_e.noExitRuntime&&0===r||(!snudown_es_e.noExitRuntime&&(snudown_es_g=!0,snudown_es_y=void 0,snudown_es_f(snudown_es_x),snudown_es_e.onExit)&&snudown_es_e.onExit(r),snudown_es_v&&(void 0).exit(r),snudown_es_e.quit(r,new n(r)));},snudown_es_e.abort=o,snudown_es_e.preInit)for("function"==typeof snudown_es_e.preInit&&(snudown_es_e.preInit=[snudown_es_e.preInit]);0<snudown_es_e.preInit.length;)snudown_es_e.preInit.pop()();snudown_es_e.noExitRuntime=!0,t();function snudown_es_markdown(e,r){return s(U._default_renderer,e,r);};function markdownWiki(e,r){return s(U._wiki_renderer,e,r);};
// CONCATENATED MODULE: ./node_modules/exec-loader?cache!./lib/core/metadata/packageInfo.js
/* harmony default export */ var packageInfo = ({"announcementsSubreddit":"RESAnnouncements","name":"Reddit Enhancement Suite","version":"5.12.5","isBeta":false,"isPatch":true,"isMinor":false,"isMajor":false,"updatedURL":"https://redditenhancementsuite.com/releases/#v5.12.5","homepageURL":"https://redditenhancementsuite.com","gitDescription":"v5.12.5"});
// CONCATENATED MODULE: ./lib/core/metadata/index.js




const {
	announcementsSubreddit,
	name: metadata_name,
	version: metadata_version,
	isBeta,
	isPatch,
	isMinor,
	isMajor,
	updatedURL,
	homepageURL,
	gitDescription: metadata_gitDescription
} = packageInfo;
// CONCATENATED MODULE: ./lib/modules/about.js





const about_module = new Module('about');

about_module.moduleName = 'aboutName';
about_module.category = 'aboutCategory';
about_module.sort = -10;
about_module.alwaysEnabled = true;
about_module.description = 'aboutDesc';

about_module.options = {
	presets: {
		type: 'button',
		description: 'aboutOptionsPresets',
		title: 'aboutOptionsPresetsTitle',
		text: createElement_namespaceObject.icon(0xF142),
		callback: { moduleID: 'presets' }
	},
	backup: {
		type: 'button',
		description: 'aboutOptionsBackup',
		title: 'aboutOptionsBackupTitle',
		text: createElement_namespaceObject.icon(0xF059),
		callback: { moduleID: 'backupAndRestore' }
	},
	searchSettings: {
		type: 'button',
		description: 'aboutOptionsSearchSettings',
		title: 'aboutOptionsSearchSettingsTitle',
		text: createElement_namespaceObject.icon(0xF097),
		callback: { moduleID: 'search' }
	},
	announcements: {
		type: 'button',
		description: 'aboutOptionsAnnouncements',
		title: 'aboutOptionsAnnouncementsTitle',
		text: createElement_namespaceObject.icon(0xF108),
		callback: '/r/RESAnnouncements/new'
	},
	donate: {
		type: 'button',
		description: 'aboutOptionsDonate',
		title: 'aboutOptionsDonateTitle',
		text: createElement_namespaceObject.icon(0xF104),
		callback: 'https://redditenhancementsuite.com/contribute/'
	},
	bugs: {
		type: 'button',
		description: 'aboutOptionsBugs',
		title: 'aboutOptionsBugsTitle',
		text: createElement_namespaceObject.icon(0xF003),
		callback: '/r/RESIssues/wiki/postanissue'
	},
	suggestions: {
		type: 'button',
		description: 'aboutOptionsSuggestions',
		title: 'aboutOptionsSuggestionsTitle',
		text: createElement_namespaceObject.icon(0xF076),
		callback: '/r/Enhancement'
	},
	faq: {
		type: 'button',
		description: 'aboutOptionsFAQ',
		title: 'aboutOptionsFAQTitle',
		text: createElement_namespaceObject.icon(0xF0D3),
		callback: '/r/Enhancement/wiki/index'
	},
	code: {
		type: 'button',
		description: 'aboutOptionsCode',
		title: 'aboutOptionsCodeTitle',
		text: createElement_namespaceObject.icon(0xF063),
		callback: 'https://github.com/honestbleeps/Reddit-Enhancement-Suite'
	},
	contributors: {
		type: 'button',
		description: 'aboutOptionsContributors',
		title: 'aboutOptionsContributorsTitle',
		text: createElement_namespaceObject.icon(0xF048),
		callback: 'https://redditenhancementsuite.com/about'
	},
	privacy: {
		type: 'button',
		description: 'aboutOptionsPrivacy',
		title: 'aboutOptionsPrivacyTitle',
		text: createElement_namespaceObject.icon(0xF0C2),
		callback: '/r/Enhancement/wiki/about/privacy'
	},
	license: {
		type: 'button',
		description: 'aboutOptionsLicense',
		title: 'aboutOptionsLicenseTitle',
		text: createElement_namespaceObject.icon(0xF0D3),
		callback: 'https://www.gnu.org/licenses/gpl-3.0.html'
	}
};
// EXTERNAL MODULE: ./node_modules/lodash/throttle.js
var lodash_throttle = __webpack_require__(10);
var throttle_default = /*#__PURE__*/__webpack_require__.n(lodash_throttle);

// CONCATENATED MODULE: ./lib/modules/settingsNavigation.js











const settingsNavigation_module = new Module('settingsNavigation');

settingsNavigation_module.moduleName = 'settingsNavName';
settingsNavigation_module.category = 'coreCategory';
settingsNavigation_module.description = 'settingsNavDesc';
settingsNavigation_module.hidden = true;
settingsNavigation_module.alwaysEnabled = true;
settingsNavigation_module.options = {
	showAllOptions: {
		title: 'settingsNavigationShowAllOptionsTitle',
		type: 'boolean',
		value: true,
		description: 'settingsNavigationShowAllOptionsDesc',
		noconfig: true
	},
	showAllOptionsAlert: {
		title: 'settingsNavigationShowAllOptionsAlertTitle',
		type: 'boolean',
		value: true,
		description: 'settingsNavigationShowAllOptionsAlertDesc',
		noconfig: true
	}
};

settingsNavigation_module.go = () => {
	window.addEventListener('hashchange', onHashChange);
	window.addEventListener('popstate', onPopState);

	onHashChange();
};

function makeUrlHashLink(moduleID, optionKey, displayText, cssClass) {
	const mod = getUnchecked(moduleID);
	if (!displayText) {
		if (mod && optionKey) {
			displayText = i18n(mod.options[optionKey].title);
		} else if (mod) {
			displayText = i18n(mod.moduleName);
		} else {
			displayText = 'Settings';
		}
	}

	let title = ['RES Settings'];
	if (mod) {
		title.push(i18n(mod.moduleName));
	}
	if (optionKey) {
		title.push(optionKey);
	}
	title = title.join(' &gt; ');

	const hash = makeUrlHash(moduleID, optionKey);
	return `<a class="${cssClass || ''}" href="${hash}" title="${title}">${displayText}</a>`;
}

function makeUrlHash(moduleID, optionKey) {
	const hashComponents = ['#res:settings'];

	if (moduleID) {
		hashComponents.push(moduleID);
	}

	if (moduleID && optionKey) {
		hashComponents.push(optionKey);
	}

	return hashComponents.join('/');
}

function setUrlHash(moduleID, optionKey) {
	const titleComponents = ['RES Settings'];

	if (moduleID) {
		const mod = getUnchecked(moduleID);
		const moduleName = mod && i18n(mod.moduleName) || moduleID;
		titleComponents.push(moduleName);

		if (optionKey) {
			titleComponents.push(optionKey);
		}
	}

	const hash = makeUrlHash(moduleID, optionKey);
	const title = titleComponents.join(' - ');

	if (location.hash !== hash) {
		history.pushState(hash, title, hash);
	}
}

function resetUrlHash() {
	history.pushState('', document.title, location.pathname + location.search);
}

function isSettingsUrl(url) {
	return url.includes('#!settings') || url.includes('#res:settings');
}

function onHashChange() {
	const hash = location.hash;
	if (!isSettingsUrl(hash)) return;

	const params = hash.match(/\/(?:\w|\s|%20)+/g);
	let moduleID;
	if (params && params[0]) {
		moduleID = params[0].substring(1).replace('%20', ' ');
	}
	let optionKey;
	if (params && params[1]) {
		optionKey = params[1].substring(1).replace('%20', ' ');
	}

	loadSettingsPage(moduleID, optionKey);
}

function onPopState(event) {
	const state = typeof event.state === 'string' && event.state.split('/');
	if (!state || !isSettingsUrl(state[0])) {
		if (isOpen) {
			settingsConsole_close({ resetUrl: false });
		}
		return;
	}

	const moduleID = state[1];
	const optionKey = state[2];

	loadSettingsPage(moduleID, optionKey);
}

function loadSettingsPage(moduleID, optionKey) {
	const mod = moduleID && getUnchecked(moduleID);

	settingsConsole_open(mod && mod.moduleID);

	if (mod === search_module) {
		search_search(optionKey);
	} else if (mod) {
		if (optionKey && mod.options.hasOwnProperty(optionKey)) {
			const $optionsPanel = $(RESConsoleContent);
			const optionElement = $optionsPanel.find(`label[for="${optionKey}"]`);
			const optionParent = optionElement.parent();
			optionParent.addClass('highlight');
			optionParent.show();
			if (optionElement.length) {
				if (optionParent.hasClass('advanced') && !settingsNavigation_module.options.showAllOptions.value) {
					document.getElementById('RESConsoleContent').classList.remove('advanced-options-disabled');
					if (settingsNavigation_module.options.showAllOptionsAlert.value) {
						alert_namespaceObject.open('You opened a link to an advanced option, but not all options are shown. These options will be shown until you leave or refresh the page. If you want to see all options in the future, check the <i>Show all options</i> checkbox in the settings console title bar above.<br /><br /><label><input type="checkbox" class="disableAlert" checked="" style="margin:1px 5px 0px 0px;"> Always show this type of notification</label>');
						$('#alert_message .disableAlert').click(function () {
							options_set(settingsNavigation_module, 'showAllOptionsAlert', this.checked);
						});
					}
				}
				const $configPanel = $(RESConfigPanelOptions);
				const offset = optionElement.offset().top - $configPanel.offset().top - 10;
				$configPanel.scrollTop(offset);
			}
		}
	}
}
// CONCATENATED MODULE: ./lib/modules/search.js















const search_module = new Module('search');

search_module.moduleName = 'searchName';
search_module.category = 'aboutCategory';
search_module.alwaysEnabled = true;
search_module.sort = -9;
search_module.description = `
	<p>Search for settings within RES.</p>
	<div id="SearchRES-results-container">
		<div id="SearchRES-count"></div>
		<ul id="SearchRES-results"></ul>
		<p id="SearchRES-results-hidden">Some results have been hidden because advanced options are currently hidden. <a href="#">Show advanced options.</a></p>
	</div>
	<div id="SearchRES-boilerplate">
		<p>You can search for RES options by module name, option name, and description. For example, try searching for "daily trick" in one of the following ways:</p>
		<ul>
			<li>type <code>daily trick</code> in the search box to the left and click the magnifying glass button</li>
			<li>press <code>.</code> to open the RES console, type in <code>search <em>daily trick</em></code>, and press Enter</li>
		</ul>
	</div>
`;
search_module.descriptionRaw = true;

search_module.go = () => {
	const $menuItem = $('<span>', {
		id: 'RESSearchMenuItem',
		class: 'RESMenuItemButton res-icon',
		text: '\uF094',
		title: 'search settings',
		click: e => {
			e.preventDefault();
			e.stopPropagation();
			showSearch();
		}
	});
	$menuItem.appendTo(settingsConsole_$menuItem());

	registerCommand(/^set(?:t?ings?)?$/, 'settings [words to search for]- search RES settings console', (command, val) => {
		let str = 'Search RES settings';
		if (val && val.length) {
			str += ` for: ${val}`;
		}
		return str;
	}, (command, val) => search_search(val));
};

function search_search(query) {
	getSearchResults(query);
	setUrlHash(search_module.moduleID, query);
}

const throttledSearch = throttle_default()(frameThrottle(search_search), 250);

function showSearch() {
	hidePrefsDropdown();
	drawSearchResults();
	$('#SearchRES-input').focus();
}

const PRESERVE_SPACES = true;

function getSearchResults(query) {
	if (!query || !query.toString().length) {
		drawSearchResults(query, []);
		return;
	}

	const sanitizedQuery = sanitizeString(query, PRESERVE_SPACES);
	const queryTerms = sanitizedQuery && sanitizedQuery.length ? sanitizedQuery.split(' ') : [];
	let results = [];

	if (queryTerms && queryTerms.length) {
		results = searchDomain().map(item => ({
			rank: item.getRank(queryTerms, item.context),
			context: item.context
		})).filter(item => item.rank !== Infinity).sort((a, b) => b.rank - a.rank).map(item => item.context);
	}

	drawSearchResults(query, results);
}

const searchDomain = once_default()(() => {
	const results = [];
	for (const mod of modules_all()) {
		if (mod === search_module) continue;

		if (mod.hidden) continue;

		const moduleName = i18n(mod.moduleName);
		const category = i18n(mod.category);

		results.push({
			getRank: rankModule,
			context: {
				title: moduleName,
				description: mod.descriptionRaw ? mod.description : snudown_es_markdown(i18n(mod.description)),
				category,
				moduleID: mod.moduleID,
				moduleName,
				keywords: mod.keywords
			}
		});

		if (isEmpty_default()(mod.options)) continue;

		for (const [optionKey, option] of Object.entries(mod.options)) {
			if (option.noconfig) continue;

			const optionName = i18n(option.title);

			results.push({
				getRank: rankOption,
				context: {
					title: optionName,
					description: snudown_es_markdown(i18n(option.description).split('\n')[0]),
					advanced: option.advanced,
					category,
					moduleID: mod.moduleID,
					moduleName,
					optionKey,
					optionName,
					keywords: option.keywords || []
				}
			});
		}
	}

	return results;
});

function rankString(queryTerms, string) {
	if (!queryTerms || !queryTerms.length || !string) {
		return Infinity;
	}
	const indexes = indexesOfSearchTermsInString(queryTerms, sanitizeString(string, false));

	const weighted = indexes.map(item => 100 - item.value * (Math.log(item.matchedIndex + 1) / Math.log(5) + 1));
	return weighted.length ? weighted.reduce((a, b) => a + b, 0) : Infinity;
}

function rankModule(queryTerms, context) {
	const string = [context.moduleID, context.moduleName, context.category, context.description, ...context.keywords].join('~');
	return rankString(queryTerms, string) * 0.9;
}

function rankOption(queryTerms, context) {
	const string = [context.optionKey, context.title, context.description, ...context.keywords, context.moduleID, context.moduleName, context.category].join('~');
	return rankString(queryTerms, string);
}

function indexesOfSearchTermsInString(needles, haystack) {
	if (!haystack || !haystack.length) return [];

	return needles.map((needle, i) => ({
		matchedIndex: i,
		value: haystack.indexOf(needle)
	})).filter(item => item.value !== -1);
}

function sanitizeString(text, preserveSpaces) {
	if (text === undefined || text === null) {
		return '';
	}

	const replaceSpacesWith = preserveSpaces ? ' ' : '';
	return text.toString().toLowerCase().replace(/[,\/\s]+/g, replaceSpacesWith);
}

function onSearchResultSelected(moduleID, optionKey) {
	loadSettingsPage(moduleID, optionKey);
}

function renderSearchForm(container) {
	$(container).find('#SearchRES-input-container').replaceWith(`
		<form id="SearchRES-input-container">
			<input id="SearchRES-input" type="text" placeholder="${i18n('searchRESSettings')}" />
			<button id="SearchRES-input-submit" type="submit">
				<span class="res-icon">&#xF094;</span>
			</button>
		</form>
	`);

	$(container).on('input submit', '#SearchRES-input-container', event => {
		if (event.type === 'submit') {
			event.preventDefault();
		}
		const RESSearchBox = container.querySelector('#SearchRES-input');
		throttledSearch(RESSearchBox.value);

		return false;
	});
}

function drawSearchResults(query, results) {
	settingsConsole_open(search_module.moduleID);

	const $resultsContainer = $('#SearchRES-results-container');
	$resultsContainer.off('click', handleSearchResultClick).on('click', '.SearchRES-result-item', handleSearchResultClick);

	if (!query || !query.length) {
		$resultsContainer.hide();
		return;
	}

	let count = 0;
	let advancedResults = 0;
	if (results) {
		for (const result of results) {
			if (result.advanced) {
				advancedResults++;
			} else {
				count++;
			}
		}
	}

	const plural = count !== 1 ? 's' : '';
	const resultsMessage = `${count} result${plural} for ${query}`;
	$('#SearchRES-count').text(resultsMessage);

	$resultsContainer.show();
	$resultsContainer.find('#SearchRES-query').text(query);

	if (advancedResults) {
		$resultsContainer.find('#SearchRES-results-hidden').addClass('advancedResults');
		$('#SearchRES-results-hidden a').off('click').on('click', () => {
			$(document.getElementById('RESAllOptions')).click();
			getSearchResults(query);
			return false;
		});
	} else {
		$resultsContainer.find('#SearchRES-results-hidden').removeClass('advancedResults');
	}

	if (!results || !results.length) {
		$resultsContainer.find('#SearchRES-results').hide();
	} else {
		$resultsContainer.find('#SearchRES-results').show();

		const resultsList = document.getElementById('SearchRES-results');

		empty(resultsList);
		for (const result of results) {
			const element = drawSearchResultItem(result);
			resultsList.appendChild(element);
		}
	}
}

const searchResultTemplate = ({ title, category, description, moduleName, moduleID, optionName, optionKey }) => string_namespaceObject.html`
	<div>
		<div class="SearchRES-result-header">
			<span class="SearchRES-result-title">${title}</span>
			<span class="SearchRES-breadcrumb">${i18n('RESSettingsConsole')}
				 ${category}
				 ${moduleName} (${moduleID})
				${optionName && optionKey ? `  ${optionName} (${optionKey})` : optionKey && `  ${optionKey}`}
			</span>
		</div>
		<div class="SearchRES-result-description">
			${string_namespaceObject.safe(description)}
		</div>
	</div>
`;

function drawSearchResultItem(result) {
	const element = document.createElement('li');
	element.classList.add('SearchRES-result-item');
	if (result.advanced) {
		element.classList.add('advanced');
	}
	element.setAttribute('data-module-id', result.moduleID);
	if (result.optionKey) {
		element.setAttribute('data-option-key', result.optionKey);
	}

	element.appendChild(searchResultTemplate(result));

	const copybutton = createElement_namespaceObject.icon(0xF159, 'span', 'SearchRES-result-copybutton res-icon', i18n('searchCopyResultForComment'));
	element.insertBefore(copybutton, element.firstChild);

	return element;
}

function handleSearchResultClick(event) {
	const moduleID = this.getAttribute('data-module-id');
	const optionKey = this.getAttribute('data-option-key');

	if (event.target.classList.contains('SearchRES-result-copybutton')) {
		onSearchResultCopy(moduleID, optionKey);
	} else {
		onSearchResultSelected(moduleID, optionKey);
	}
	event.preventDefault();
}

function onSearchResultCopy(moduleID, optionKey) {
	const markdown = makeOptionSearchResultLink(moduleID, optionKey);
	alert_namespaceObject.open(`<textarea rows="5" cols="50">${markdown}</textarea><p>Copy and paste this into your comment</p>`);
}

const optionLinkTemplate = ({ title, url, description, settingsUrl, category, moduleName, moduleUrl, moduleID, optionKey, optionUrl }) => `
**[${title}](${url})** -- [](#gear) [RES settings console](${settingsUrl}) > ${category} > [${moduleName}](${moduleUrl} "${moduleID}")${optionKey ? ` > [${optionKey}](${optionUrl})` : ''}

${description}
`.trim();

function makeOptionSearchResultLink(moduleID, optionKey) {
	const module = modules_get(moduleID);

	const context = {
		moduleID,
		moduleName: i18n(module.moduleName),
		category: i18n(module.category),
		optionKey,
		title: optionKey ? optionKey : i18n(module.moduleName),
		description: optionKey ? i18n(module.options[optionKey].description) : i18n(module.description),
		url: makeUrlHash(moduleID, optionKey),
		settingsUrl: makeUrlHash(),
		moduleUrl: makeUrlHash(moduleID),
		optionUrl: makeUrlHash(moduleID, optionKey)
	};

	return `${optionLinkTemplate(context)}\n\n\n`;
}
// CONCATENATED MODULE: ./lib/modules/settingsConsole/templates.js





const consoleContainerTemplate = ({ name, version, gitDescription }) => string_namespaceObject.html`
	<div id="RESConsoleContainer">
		<div id="RESConsoleHeader">
			<div id="RESConsoleTopBar" class="RESDialogTopBar">
				<div id="RESLogo"></div>
				<h1>${name}</h1>
				<div id="RESConsoleVersionDisplay" title="${gitDescription}">v${version}</div>


				<button id="moduleOptionsSave">${i18n('saveOptions')}</button>
				<div id="moduleOptionsSaveStatus" class="saveStatus" style="display: none;">Options have been saved...</div>
				<a id="RESConsoleSubredditLink" href="/r/Enhancement" alt="The RES Subreddit">/r/Enhancement</a>
				<span id="RESClose" class="RESCloseButton"></span>
			</div>
		</div>

		<div id="RESConsoleContent">
			<div id="RESConfigPanelModulesPane">
				<div id="SearchRES-input-container"></div>

				<div id="RESConfigPanelModulesList"></div>

				<label id="RESAllOptionsSpan">
					<input id="RESAllOptions" type="checkbox">
					<span>${i18n('showAdvancedOptions')}</span>
				</label>
			</div>
			<div id="RESConfigPanelOptions">
				<div class="moduleHeader">
					<span class="moduleName">Module Name</span>
					<div class="moduleToggle toggleButton enabled" moduleID="moduleID">
						<span class="toggleThumb"></span>
						<div class="toggleLabel" data-enabled-text="${i18n('toggleOn')}" data-disabled-text="${i18n('toggleOff')}"></div>
					</div>

					<div class="moduleDescription"></div>
				</div>
				<div id="allOptionsContainer"></div>
				<div id="noOptions" class="optionContainer">
					There are no configurable options for this module.
				</div>
			</div>
		</div>
	</div>
`;

const moduleSelectorTemplate = categories => string_namespaceObject.html`
	<ul>
		${categories.map(({ name, translatedName, modules }) => string_namespaceObject._html`
			<li class="RESConfigPanelCategory" data-category="${name}">
				<h3 class="categoryButton" data-category="${name}">${translatedName}</h3>
				<ul>
					${modules.map(({ isEnabled, moduleID, translatedName, description, shortDescription }) => string_namespaceObject._html`
						<li class="moduleButton ${isEnabled && 'enabled'}" data-module="${moduleID}" title="${description}">
							${translatedName}
							<small>
								${shortDescription}
							</small>
						</li>
					`)}
				</ul>
			</li>
		`)}
	</ul>
`;
// CONCATENATED MODULE: ./lib/modules/settingsConsole.js


























const settingsConsole_module = new Module('settingsConsole');

settingsConsole_module.moduleName = 'settingsConsoleName';
settingsConsole_module.category = 'coreCategory';
settingsConsole_module.description = 'settingsConsoleDesc';
settingsConsole_module.alwaysEnabled = true;
settingsConsole_module.hidden = true;

const DEFAULT_MODULE = about_module;
const CATEGORY_SORT = ['aboutCategory', 'myAccountCategory', 'usersCategory', 'commentsCategory', 'submissionsCategory', 'subredditsCategory', 'appearanceCategory', 'browsingCategory', 'productivityCategory', 'coreCategory'];

let $modalOverlay, $keyCodeModal, RESConsoleContainer, $moduleOptionsScrim, settingsConsole_saveButton, moduleToggle, captureKey, captureKeyID, currentModule;

let RESConsoleContent, RESConfigPanelOptions;

let isOpen = false;

settingsConsole_module.beforeLoad = () => {
	addMenuItem(settingsConsole_$menuItem(), () => {
		hidePrefsDropdown();
		settingsConsole_open();
	}, true);
};

settingsConsole_module.go = () => {
	function findModules(val) {
		return modules_all().filter(v => !v.hidden).map(v => v.moduleID).filter(id => id.toLowerCase().match(val.toLowerCase())).sort();
	}

	registerCommand(/^mod(?:ule?)?$/, 'module [name of module] - open module settings', (command, val) => {
		const matches = findModules(val);
		return matches.length ? `Open module ${matches[0]}` : 'Could not find any matching module.';
	}, (command, val) => settingsConsole_open(findModules(val)[0]));
};

const settingsConsole_$menuItem = once_default()(() => $('<div>', { id: 'SettingsConsole', text: i18n('RESSettingsConsole') }));

function create() {
	RESConsoleContainer = consoleContainerTemplate({
		name: metadata_name,
		version: metadata_version,
		gitDescription: metadata_gitDescription
	});

	$modalOverlay = $('<div>', { id: 'modalOverlay' });
	$modalOverlay.get(0).addEventListener('click', e => {
		e.preventDefault();
		return false;
	}, true);
	$modalOverlay.appendTo(document.body);

	const RESClose = RESConsoleContainer.querySelector('#RESClose');
	RESClose.addEventListener('click', e => {
		e.preventDefault();
		settingsConsole_close();
	}, true);

	const RESAdvOptionsSpan = RESConsoleContainer.querySelector('#RESAllOptionsSpan');
	RESAdvOptionsSpan.setAttribute('title', i18n(settingsNavigation_module.options.showAllOptions.description));

	const RESAdvOptions = RESAdvOptionsSpan.querySelector('input');
	RESAdvOptions.addEventListener('change', function () {
		options_set(settingsNavigation_namespaceObject, 'showAllOptions', this.checked);
		updateAdvancedOptionsVisibility();
	}, true);

	RESConsoleContainer.querySelector('#RESConfigPanelModulesList').appendChild(renderModulesSelector());

	$(RESConsoleContainer).find('#RESConfigPanelModulesPane').on('click', '.moduleButton', function (e) {
		const id = $(this).data('module');
		if (id) {
			e.preventDefault();
			showConfigOptions(modules_get(id));
		}
	}).on('click', '.categoryButton', function (e) {
		const id = $(this).data('category');
		if (id) {
			e.preventDefault();
			openCategoryPanel(id);
		}
	});

	RESConsoleContent = RESConsoleContainer.querySelector('#RESConsoleContent');
	if (settingsNavigation_module.options.showAllOptions.value) {
		RESAdvOptions.checked = true;
	} else {
		RESConsoleContent.classList.add('advanced-options-disabled');
	}
	RESConfigPanelOptions = RESConsoleContainer.querySelector('#RESConfigPanelOptions');

	renderSearchForm(RESConsoleContainer);

	document.body.appendChild(RESConsoleContainer);

	window.addEventListener('keydown', e => {
		if (captureKey && ![NAMED_KEYS.Shift, NAMED_KEYS.Control, NAMED_KEYS.Alt].includes(e.key)) {
			e.preventDefault();
			let keyArray;
			if (e.key === NAMED_KEYS.Backspace) {
				keyArray = [-1, false, false, false, false];
			} else {
				keyArray = [e.keyCode, e.altKey, e.ctrlKey, e.shiftKey, e.metaKey];
			}

			RESConfigPanelOptions.querySelector(`[id="${captureKeyID}"]`).value = keyArray.join(',');
			RESConfigPanelOptions.querySelector(`[id="${captureKeyID}-display"]`).value = keycode_niceKeyCode(keyArray);
			$keyCodeModal.css('display', 'none');
			captureKey = false;
		}
	});

	$(RESConsoleContent).on({
		focus(e) {
			const $target = $(e.target);
			const { top, left } = $target.offset();
			$keyCodeModal.css({
				display: 'block',
				top: top + $target.height(),
				left
			});
			captureKey = true;
			captureKeyID = $target.attr('capturefor');
		},
		blur() {
			$keyCodeModal.css('display', 'none');
		}
	}, '.keycode + input[type=text][displayonly]');

	$keyCodeModal = $('<div>', {
		id: 'keyCodeModal',
		text: 'Press a key (or combination with shift, alt and/or ctrl) to assign this action.'
	});

	$keyCodeModal.appendTo(document.body);
}

function renderModulesSelector() {
	function compareModules(a, b) {
		if (a.sort === b.sort) {
			return i18n(a.moduleName).toLocaleLowerCase().localeCompare(i18n(b.moduleName).toLocaleLowerCase());
		} else {
			return (a.sort || 0) - (b.sort || 0);
		}
	}

	const categories = flow_default()(() => modules_all(), filter_default()(mod => !mod.hidden), fp_groupBy_default()(mod => mod.category), obj => Object.entries(obj).map(([category, modules]) => ({
		name: category,
		translatedName: i18n(category),
		modules: modules.sort(compareModules).map(mod => {
			const description = $(`<p>${mod.descriptionRaw ? mod.description : snudown_es_markdown(i18n(mod.description))}</p>`).text().replace(/\s+/g, ' ');

			return {
				moduleID: mod.moduleID,
				translatedName: i18n(mod.moduleName),
				description,
				shortDescription: description.split(/[!?.]/)[0],
				isEnabled: modules_isEnabled(mod)
			};
		})
	})), sortBy_default()(({ name }) => CATEGORY_SORT.indexOf(name)))();

	return moduleSelectorTemplate(categories);
}

function updateSelectedModule(mod) {
	const items = $(RESConsoleContainer).find('.moduleButton');

	const selected = items.filter(function () {
		return $(this).data('module') === mod.moduleID;
	});

	items.not(selected).removeClass('active');
	selected.addClass('active');

	openCategoryPanel(mod.category);
}

function drawOptionInput(mod, optionName, optionObject, isTable) {
	let $thisOptionFormEle;
	switch (optionObject.type) {
		case 'textarea':
			$thisOptionFormEle = $('<textarea>', {
				id: optionName,
				type: 'textarea',
				moduleID: mod.moduleID,

				html: escapeHTML(optionObject.value)
			});
			break;
		case 'text':
			$thisOptionFormEle = $('<input>', {
				id: optionName,
				type: 'text',
				moduleID: mod.moduleID
			});
			if (typeof optionObject.value !== 'undefined') {
				$thisOptionFormEle.attr('value', optionObject.value);
			}
			break;
		case 'color':
			$thisOptionFormEle = $('<input>', {
				id: optionName,
				type: 'color',
				moduleID: mod.moduleID
			});

			if (typeof optionObject.value !== 'undefined') {
				$thisOptionFormEle.get(0).value = optionObject.value;
			}
			break;
		case 'button':
			const { values = [], callback, text } = optionObject;
			if (callback && text) values.push({ callback, text });
			const buttonsContainer = $thisOptionFormEle = $('<div>', { id: optionName });
			for (const option of values) {
				let $thisOptionFormEle;
				if (typeof option.callback === 'string' || option.callback.moduleID) {
					$thisOptionFormEle = $('<a>');
				} else {
					$thisOptionFormEle = $('<button>');
				}
				$thisOptionFormEle.addClass('RESConsoleButton');
				$thisOptionFormEle.attr('moduleID', mod.moduleID);
				if (option.text.tagName || option.text.jquery) {
					$thisOptionFormEle.append(option.text);
				} else if (typeof option.text === 'string') {
					$thisOptionFormEle.text(i18n(option.text));
				} else {
					$thisOptionFormEle.append(createElement_namespaceObject.icon(0xF141));
				}
				if (option.callback.moduleID) {
					$thisOptionFormEle.attr('href', makeUrlHash(option.callback.moduleID, option.callback.optionKey));
				} else if (typeof option.callback === 'string') {
					$thisOptionFormEle.attr('href', option.callback);
					$thisOptionFormEle.attr('target', '_blank');
					$thisOptionFormEle.attr('rel', 'noopener noreferer');
				} else if (typeof option.callback === 'function') {
					$thisOptionFormEle.click(async function () {
						if (this.classList.contains('csspinner')) return;
						this.classList.add('csspinner');
						try {
							await option.callback(optionName, optionObject);
						} catch (e) {
							if (e.message) alert_namespaceObject.open(e.message);
							console.error(e);
						}
						this.classList.remove('csspinner');
					});
				}
				buttonsContainer.append($thisOptionFormEle);
			}
			break;
		case 'list':
			$thisOptionFormEle = $('<input>', {
				id: optionName,
				class: 'RESInputList',
				type: 'text',
				moduleID: mod.moduleID
			});

			const optionArray = (optionObject.value || '').split(',');
			const prepop = optionArray.filter(option => option !== '').map(option => ({
				id: option,
				name: option
			}));
			const listSpec = listTypes[optionObject.listType] || optionObject;

			setTimeout(() => {
				$thisOptionFormEle.tokenInput(listSpec.source, {
					method: 'POST',
					queryParam: 'query',
					theme: 'facebook',
					allowFreeTagging: true,
					zindex: 999999999,
					onResult: typeof listSpec.onResult === 'function' ? listSpec.onResult : null,
					onCachedResult: typeof listSpec.onCachedResult === 'function' ? listSpec.onCachedResult : null,
					prePopulate: prepop,
					hintText: typeof listSpec.hintText === 'string' ? listSpec.hintText : null
				});
			}, 100);
			break;
		case 'password':
			$thisOptionFormEle = $('<input>', {
				id: optionName,
				type: 'password',
				moduleID: mod.moduleID
			});
			if (typeof optionObject.value !== 'undefined') {
				$thisOptionFormEle.attr('value', optionObject.value);
			}
			break;
		case 'boolean':
			$thisOptionFormEle = $(createElement_namespaceObject.toggleButton(() => {
				$(RESConsoleContainer).trigger('change');
			}, optionName, optionObject.value, undefined, undefined, isTable));
			break;
		case 'enum':
			$thisOptionFormEle = $('<div>', {
				id: optionName,
				class: 'enum'
			});

			if (optionObject.value && !find_default()(optionObject.values, matchesProperty_default()('value', optionObject.value))) {
				optionObject.values.push({ name: `${optionObject.value} (not available)`, value: optionObject.value });
			}

			optionObject.values.forEach((optionValue, index) => {
				const thisId = `${optionName}-${index}`;
				const $thisOptionFormSubEle = $('<input>', {
					id: thisId,
					type: 'radio',
					name: optionName,
					moduleID: mod.moduleID,
					value: optionValue.value
				});
				if (isTable) $thisOptionFormSubEle.attr('tableOption', 'true');
				const nullEqualsEmpty = optionObject.value === null && optionValue.value === '';

				if (optionObject.value === optionValue.value || nullEqualsEmpty) {
					$thisOptionFormSubEle.attr('checked', 'checked');
				}
				const thisLabel = document.createElement('label');
				thisLabel.setAttribute('for', thisId);
				thisLabel.textContent = ` ${i18n(optionValue.name)} `;
				$thisOptionFormEle.append($thisOptionFormSubEle);
				$thisOptionFormEle.append(thisLabel);
				$thisOptionFormEle.append('<br>');
			});
			break;
		case 'keycode':
			const realOptionFormEle = $('<input>').attr({
				id: optionName,
				type: 'text',
				class: 'keycode',
				moduleID: mod.moduleID
			}).css({
				border: '1px solid red',
				display: 'none'
			}).val(optionObject.value);
			if (isTable) realOptionFormEle.attr('tableOption', 'true');

			const thisKeyCodeDisplay = $('<input>').attr({
				id: `${optionName}-display`,
				type: 'text',
				capturefor: optionName,
				displayonly: 'true'
			}).val(keycode_niceKeyCode(optionObject.value));
			$thisOptionFormEle = $('<div>').append(realOptionFormEle).append(thisKeyCodeDisplay);
			break;
		case 'select':
			$thisOptionFormEle = $('<select>').attr({
				id: optionName,
				class: 'select',
				value: optionObject.value
			});

			if (optionObject.value && !find_default()(optionObject.values, matchesProperty_default()('value', optionObject.value))) {
				optionObject.values.push({ name: `${optionObject.value} (not available)`, value: optionObject.value });
			}

			optionObject.values.forEach((optionValue, index) => {
				const thisId = `${optionName}-${index}`;
				const $thisOptionFormSubEle = $('<option />', {
					id: thisId,
					class: 'select-option',
					value: optionValue.value,
					moduleID: mod.moduleID,
					style: optionValue.style
				}).text(optionValue.name);
				const nullEqualsEmpty = optionObject.value === null && optionValue.value === '';

				if (optionObject.value === optionValue.value || nullEqualsEmpty) {
					$thisOptionFormSubEle.attr('selected', 'selected');
				}
				$thisOptionFormEle.append($thisOptionFormSubEle);
			});
			break;
		default:
			throw new Error(`modules.${mod.moduleID}.options.${optionName} has invalid type: ${optionObject.type}`);
	}
	if (isTable) {
		$thisOptionFormEle.attr('tableOption', 'true');
	}
	return $thisOptionFormEle.get(0);
}

function showConfigOptions(mod) {
	drawConfigOptions(mod);
	updateSelectedModule(mod);

	currentModule = mod;

	RESConsoleContent.scrollTop = 0;

	setUrlHash(mod.moduleID);
}

const drawSettingsConsole = once_default()(() => {
	const thisToggle = RESConsoleContainer.querySelector('.moduleToggle');
	moduleToggle = thisToggle;

	thisToggle.addEventListener('click', function () {
		const moduleID = $(this).data('module');
		const $moduleButton = $(RESConsoleContainer).find('.moduleButton').filter(function () {
			return $(this).data('module') === moduleID;
		});
		const enabled = this.classList.contains('enabled');

		const enable = !enabled;
		$(thisToggle).add($moduleButton).add(this.classList).toggleClass('enabled', enable);
		updateSaveButton();
		if ($moduleOptionsScrim) $moduleOptionsScrim.toggleClass('visible', !enable);

		setEnabled(moduleID, !enabled);
	}, true);

	function saveModuleOptions(e) {
		e.preventDefault();
		saveCurrentModuleOptions();
	}

	settingsConsole_saveButton = RESConsoleContainer.querySelector('#moduleOptionsSave');
	settingsConsole_saveButton.addEventListener('click', saveModuleOptions, true);
});

function drawConfigOptions(mod) {
	drawSettingsConsole();

	if (mod.hidden) return;

	const thisOptions = getOptions(mod);
	let optCount = 0;

	const thisModuleName = RESConsoleContainer.querySelector('.moduleName');
	$(thisModuleName).html(`${i18n(mod.moduleName)} <span class="moduleKey">(${mod.moduleID})</span>`);

	$(moduleToggle).toggle(!mod.alwaysEnabled).toggleClass('enabled', modules_isEnabled(mod)).data('module', mod.moduleID);

	updateSaveButton();

	const thisDescription = RESConsoleContainer.querySelector('.moduleDescription');
	$(thisDescription).html(mod.descriptionRaw ? mod.description : snudown_es_markdown(i18n(mod.description)));

	const allOptionsContainer = RESConsoleContainer.querySelector('#allOptionsContainer');
	$(allOptionsContainer).empty();

	for (const [optionKey, option] of Object.entries(thisOptions)) {
		if (!option.noconfig) {
			let thisOptionFormEle;
			optCount++;
			const containerID = `optionContainer-${mod.moduleID}-${optionKey}`;
			const $thisOptionContainer = $('<div>', { id: containerID, class: 'optionContainer' });

			if (option.dependsOn && !option.dependsOn(thisOptions)) {
				$thisOptionContainer.css('display', 'none');
			}

			if (option.advanced) {
				$thisOptionContainer.addClass('advanced');
			}

			const optionTitle = i18n(option.title);

			const $thisLabel = $('<label>', {
				class: 'optionTitle',
				for: optionKey,
				html: `${optionTitle}<br /><span class="optionKey">${optionKey}</span>`
			});

			let niceDefaultOption = null;
			switch (option.type) {
				case 'textarea':
				case 'text':
				case 'password':
				case 'list':
					niceDefaultOption = option.default;
					break;
				case 'color':
					niceDefaultOption = option.default;
					if (option.default.startsWith('#')) {
						niceDefaultOption += ` (R:${parseInt(option.default.substr(1, 2), 16)}, G:${parseInt(option.default.substr(3, 2), 16)}, B:${parseInt(option.default.substr(5, 2), 16)})`;
					}
					break;
				case 'boolean':
					niceDefaultOption = option.default ? 'on' : 'off';
					break;
				case 'enum':
				case 'select':
					const matchingOption = option.values.find(({ value }) => option.default === value);
					niceDefaultOption = matchingOption && i18n(matchingOption.name);
					break;
				case 'keycode':
					niceDefaultOption = keycode_niceKeyCode(option.default);
					break;
				default:
					break;
			}
			if (niceDefaultOption !== null) {
				$thisLabel.attr('title', `Default: ${niceDefaultOption}`);
			}
			const $thisOptionDescription = $('<div>', {
				class: 'optionDescription',
				html: snudown_es_markdown(i18n(option.description))
			});
			const $thisOptionSetting = $('<div>', { class: 'optionSetting' });
			$thisOptionContainer.append($thisLabel);
			$thisOptionContainer.append($thisOptionSetting);
			if (option.type === 'table') {
				const isFixed = option.addRowText === false;
				$thisOptionContainer.addClass('table');
				const thisTbody = document.createElement('tbody');

				const thisTable = document.createElement('table');
				thisTable.setAttribute('moduleID', mod.moduleID);
				thisTable.setAttribute('optionName', optionKey);
				thisTable.setAttribute('class', 'optionsTable');
				const thisThead = document.createElement('thead');
				const thisTableHeader = document.createElement('tr');
				let thisTH;
				thisTable.appendChild(thisThead);
				option.fields.forEach(field => {
					thisTH = document.createElement('th');
					$(thisTH).text(i18n(field.name));
					thisTableHeader.appendChild(thisTH);
				});
				if (!isFixed) {
					thisTH = document.createElement('th');
					thisTableHeader.appendChild(thisTH);

					thisTH = document.createElement('th');
					$(thisTableHeader).prepend(thisTH);
				}
				thisThead.appendChild(thisTableHeader);
				thisTable.appendChild(thisThead);
				thisTbody.setAttribute('id', `tbody_${optionKey}`);
				if (option.value) {
					option.value.forEach((thisValue, j) => {
						const thisTR = document.createElement('tr');
						$(thisTR).data('itemidx-orig', j);
						option.fields.forEach((field, k) => {
							const thisTD = document.createElement('td');
							thisTD.className = 'hasTableOption';
							const thisOpt = Object.assign({}, field, {
								value: thisValue[k]
							});
							const thisFullOpt = `${optionKey}_${thisOpt.name}`;
							const thisOptInputName = `${thisFullOpt}_${j}`;
							const thisTableEle = drawOptionInput(mod, thisOptInputName, thisOpt, true);
							thisTD.appendChild(thisTableEle);
							thisTR.appendChild(thisTD);
						});
						if (!isFixed) {
							addTableButtons(thisTR);
						}
						thisTbody.appendChild(thisTR);
					});
				}
				thisTable.appendChild(thisTbody);
				thisOptionFormEle = thisTable;

				$thisOptionDescription.insertAfter($thisLabel);
				if (!isFixed) {
					const addRowButton = $('<button class="addRowButton"></button>').text(i18n(option.addRowText || 'settingsConsoleDefaultAddRowText')).get(0);
					addRowButton.setAttribute('optionName', optionKey);
					addRowButton.setAttribute('moduleID', mod.moduleID);
					addRowButton.addEventListener('click', e => {
						const optionName = e.target.getAttribute('optionName');
						const thisTbodyName = `tbody_${optionName}`;
						const thisTbody = document.getElementById(thisTbodyName);
						const newRow = document.createElement('tr');
						const rowCount = thisTbody.querySelectorAll('tr') ? thisTbody.querySelectorAll('tr').length + 1 : 1;
						mod.options[optionName].fields.forEach(thisOpt => {
							const newCell = document.createElement('td');
							newCell.className = 'hasTableOption';

							const optionNameWithRow = `${optionName}_${thisOpt.name}_${rowCount}`;
							const thisInput = drawOptionInput(mod, optionNameWithRow, thisOpt, true);
							newCell.appendChild(thisInput);
							newRow.appendChild(newCell);
							$(newRow).data('option-index', rowCount - 1);
							const firstText = newRow.querySelector('input[type=text]') || newRow.querySelector('textarea');
							if (firstText) {
								setTimeout(() => firstText.focus(), 200);
							}
						});

						addTableButtons(newRow);

						const thisLen = $(thisTbody).find(' > tr').length;
						$(newRow).data('itemidx-orig', thisLen);

						thisTbody.appendChild(newRow);
						$(thisTbody).trigger('change');
					}, true);

					$(addRowButton).insertAfter($thisOptionSetting);

					makeOptionTableSortable(thisTbody);
				}
			} else if (option.type === 'builder') {
				$thisOptionContainer.addClass('specialOptionType');
				$thisOptionDescription.insertAfter($thisLabel);
				thisOptionFormEle = drawOptionBuilder(thisOptions, mod, optionKey);
			} else {
				if (option.type === 'text' || option.type === 'password' || option.type === 'keycode') {
					$thisOptionDescription.addClass('textInput');
				}
				thisOptionFormEle = drawOptionInput(mod, optionKey, option);
				$thisOptionContainer.append($thisOptionDescription);
			}
			$thisOptionSetting.append(thisOptionFormEle);
			$thisOptionContainer.appendTo(allOptionsContainer);
		}
	}

	RESConfigPanelOptions.querySelector('#noOptions').style.display = 'none';
	if (!optCount && mod.alwaysEnabled) {} else if (optCount === 0) {
		RESConfigPanelOptions.querySelector('#noOptions').style.display = 'block';
	} else {
		$moduleOptionsScrim = $('<div>', { id: 'moduleOptionsScrim' }).toggleClass('visible', !modules_isEnabled(mod)).appendTo(allOptionsContainer);
	}

	function addTableButtons(thisTR) {
		let thisTD = document.createElement('td');
		const thisDeleteButton = document.createElement('div');
		$(thisDeleteButton).addClass('res-icon-button res-icon deleteButton').html('&#xF056;').attr('title', 'remove this row');

		thisDeleteButton.addEventListener('click', e => {
			if (!confirm('Are you sure you want to delete this row?')) {
				e.preventDefault();
				return;
			}

			deleteOptionRow(e);
		});
		thisTD.appendChild(thisDeleteButton);
		thisTR.appendChild(thisTD);

		thisTD = document.createElement('td');
		const thisHandle = document.createElement('div');
		$(thisHandle).addClass('res-icon-button res-icon handle').html('&#xF0AA;').attr('title', 'drag and drop to move this row');

		thisTD.appendChild(thisHandle);
		$(thisTR).prepend(thisTD);
	}
}

function showOption(moduleID, fieldID) {
	$(`#optionContainer-${moduleID}-${fieldID}`).slideDown();
}

function hideOption(moduleID, fieldID) {
	$(`#optionContainer-${moduleID}-${fieldID}`).slideUp();
}

function deleteOptionRow(e) {
	const thisRow = e.target.parentNode.parentNode;
	$(thisRow).trigger('change').remove();
}

const autostageDebounce = debounce_default()(stageCurrentModuleOptions, 300);

function stageCurrentModuleOptions() {
	autostageDebounce.cancel();

	const panelOptionsDiv = RESConfigPanelOptions;

	$(panelOptionsDiv).find('.optionContainer:not(.specialOptionType)').find('input, select, textarea').each((i, e) => {
		const input = e;

		const notTokenPrefix = input.getAttribute('id') && !input.getAttribute('id').includes('token-input-');
		if (notTokenPrefix && input.getAttribute('type') !== 'button' && input.getAttribute('displayonly') !== 'true' && input.getAttribute('tableOption') !== 'true') {
			let optionName;
			if (input.getAttribute('type') === 'radio') {
				optionName = input.getAttribute('name');
			} else {
				optionName = input.getAttribute('id');
			}

			let optionValue;
			if (input.getAttribute('type') === 'checkbox') {
				optionValue = !!input.checked;
			} else if (input.getAttribute('type') === 'radio') {
				if (input.checked) {
					optionValue = input.value;
				}
			} else if (input.getAttribute('class') && input.getAttribute('class').includes('keycode')) {
				const tempArray = input.value.split(',');

				optionValue = [parseInt(tempArray[0], 10), tempArray[1] === 'true', tempArray[2] === 'true', tempArray[3] === 'true', tempArray[4] === 'true'];
			} else {
				optionValue = input.value;
			}
			if (typeof optionValue !== 'undefined') {
				stage_namespaceObject.add(currentModule.moduleID, optionName, optionValue);
			}
		}
	});

	const optionsTables = panelOptionsDiv.querySelectorAll('.optionsTable');

	for (const table of optionsTables) {
		const moduleID = table.getAttribute('moduleID');
		const optionName = table.getAttribute('optionName');
		const thisTBODY = table.querySelector('tbody');
		const thisRows = thisTBODY.querySelectorAll('tr');

		const optionMulti = Array.from(thisRows).map(row => {
			const cells = row.querySelectorAll('td.hasTableOption');
			let notAllBlank = false;
			const optionRow = Array.from(cells).map(cell => {
				const inputs = cell.querySelectorAll('input[tableOption=true], select[tableOption=true], textarea[tableOption=true]');
				let optionValue = null;
				for (const input of inputs) {
					if (input.getAttribute('type') === 'checkbox') {
						optionValue = input.checked;
					} else if (input.getAttribute('type') === 'radio') {
						if (input.checked) {
							optionValue = input.value;
						}
					} else if (input.getAttribute('class') && input.getAttribute('class').includes('keycode')) {
						const tempArray = input.value.split(',');

						optionValue = [parseInt(tempArray[0], 10), tempArray[1] === 'true', tempArray[2] === 'true', tempArray[3] === 'true'];
					} else {
						optionValue = input.value;
					}
					if (optionValue !== '' && input.getAttribute('type') !== 'radio' && !(Array.isArray(optionValue) && isNaN(optionValue[0]))) {
						notAllBlank = true;
					}
				}
				return optionValue;
			});

			if (notAllBlank) {
				return optionRow;
			}
		}).filter(optionRow => Array.isArray(optionRow) && optionRow.length > 0);

		const mod = modules_get(moduleID);

		if (typeof mod.options[optionName].sort === 'function') {
			optionMulti.sort(mod.options[optionName].sort);
		}

		stage_namespaceObject.add(moduleID, optionName, optionMulti);
	}

	$(panelOptionsDiv).find('.optionBuilder').each(function (i, builder) {
		const moduleId = this.dataset.moduleId;
		const optionName = this.dataset.optionName;

		const option = modules_get(moduleId).options[optionName];
		const config = option.cases;

		const items = [];
		$(builder).find('.builderItem').each(function () {
			try {
				items.push(readBuilderItem(this, config));
			} catch (e) {
				console.error('Ignoring invalid item.', e);
			}
		});
		stage_namespaceObject.add(moduleId, optionName, items);
	});

	updateSaveButton();
	updateDependsOn(currentModule);
}

function saveCurrentModuleOptions() {
	stageCurrentModuleOptions();
	stage_namespaceObject.commit();
	updateSaveButton();
	notifyOptionsSaved();
}

function updateSaveButton() {
	const unsavedOptions = stage_namespaceObject.isDirty();

	$(settingsConsole_saveButton).toggleClass('optionsSaved', !unsavedOptions);
}

function updateDependsOn(mod) {
	const thisOptions = getOptions(mod);

	for (const [optionKey, option] of Object.entries(thisOptions)) {
		if (option.dependsOn) {
			if (option.dependsOn(thisOptions)) {
				showOption(mod.moduleID, optionKey);
			} else {
				hideOption(mod.moduleID, optionKey);
			}
		}
	}
}

function settingsConsole_open(moduleIdOrCategory) {
	if (!RESConsoleContainer) {
		create();
	}

	const mod = moduleIdOrCategory && (getUnchecked(moduleIdOrCategory) || getByCategory(moduleIdOrCategory)[0]) || DEFAULT_MODULE;

	showConfigOptions(mod);

	isOpen = true;

	setTimeout(() => {
		document.querySelector('body').classList.add('res-console-open');
	}, 500);

	$modalOverlay.removeClass('fadeOut');
	$modalOverlay.addClass('fadeIn');

	RESConsoleContainer.classList.remove('slideOut');
	RESConsoleContainer.classList.add('slideIn');

	$(document.body).on('keyup', handleEscapeKey);
	$(window).off('beforeunload', handleBeforeUnload).on('beforeunload', handleBeforeUnload);
	$('#SearchRES-input').focus();
	$(RESConsoleContainer).on('keyup', autostageDebounce).on('change', stageCurrentModuleOptions);
}

function handleEscapeKey(event) {
	if (event.key === NAMED_KEYS.Escape && (!document.activeElement || !document.activeElement.id.includes('token-input'))) {
		settingsConsole_close();
	}
}

function handleBeforeUnload() {
	if (stage_namespaceObject.isDirty()) {
		return abandonChangesConfirmation;
	}
}

function settingsConsole_close({ promptIfStagedOptions = true, resetUrl = true } = {}) {
	if (promptIfStagedOptions && stage_namespaceObject.isDirty()) {
		const abandonChanges = confirm(abandonChangesConfirmation);
		if (!abandonChanges) return;
	}

	stage_namespaceObject.reset();

	isOpen = false;
	$(document.body).off('keyup', handleEscapeKey);
	$(window).off('beforeunload', handleBeforeUnload);

	const adFrame = document.getElementById('ad-frame');
	if (typeof adFrame !== 'undefined' && adFrame !== null) {
		adFrame.style.display = 'block';
	}

	$modalOverlay.removeClass('fadeIn');
	$modalOverlay.addClass('fadeOut');
	RESConsoleContainer.classList.remove('slideIn');
	RESConsoleContainer.classList.add('slideOut');
	setTimeout(() => {
		document.body.classList.remove('res-console-open');
	}, 500);

	if ($keyCodeModal) {
		$keyCodeModal.css('display', 'none');
		captureKey = false;
	}

	if (resetUrl) {
		resetUrlHash();
	}
}

function openCategoryPanel(categories) {
	const items = $(RESConsoleContainer).find('#RESConfigPanelModulesList .RESConfigPanelCategory');
	let selected = items.filter(function () {
		const thisValue = $(this).data('category');
		return categories.includes(thisValue);
	});
	if (selected.filter('.active').length === 0) {
		selected = selected.filter(function () {
			const thisValue = $(this).data('category');
			return categories.indexOf(thisValue) === 0;
		});

		items.not(selected).removeClass('active').find('ul').slideUp(300);
		selected.addClass('active').find('ul').slideDown(300);
	}
}

function updateAdvancedOptionsVisibility() {
	if (settingsNavigation_module.options.showAllOptions.value) {
		document.getElementById('RESConsoleContent').classList.remove('advanced-options-disabled');
	} else {
		document.getElementById('RESConsoleContent').classList.add('advanced-options-disabled');
	}
}

function getOptionValue(moduleID, optionKey) {
	const optionInput = document.getElementById(optionKey);
	if (optionInput) {
		return optionInput.value;
	} else {
		throw new Error(`Cannot get a value for ${moduleID}.${optionKey} because the HTML element does not exist.`);
	}
}

function setOptionValue(moduleID, optionKey, value) {
	const optionInput = document.getElementById(optionKey);
	if (optionInput) {
		optionInput.value = value;
	} else {
		throw new Error(`Cannot set a value for ${moduleID}.${optionKey} because the HTML element does not exist.`);
	}
}

function makeOptionTableSortable(tableBody) {
	function cleanupDrag($item) {
		$item.removeData(['oldIndex', 'dragOffset']);
		$(RESConfigPanelOptions).edgescroll('stop');
		$item.find('>td').removeAttr('style');
	}
	$(tableBody).sortable({
		nested: false,
		handle: '.handle',
		placeholderClass: 'RESSortPlaceholder',
		placeholder: '<tr class="RESSortPlaceholder"><td></td></tr>',
		containerSelector: 'tbody',
		itemSelector: 'tr',
		onCancel($item, container, _super, event) {
			_super($item, container, _super, event);
			cleanupDrag($item);
		},
		onDrop($item, container, _super, event) {
			_super($item, container, _super, event);

			cleanupDrag($item);
			$item.trigger('change');
		},
		onDrag($item, position) {
			const dragOffset = $item.data('dragOffset');

			$item.css({
				top: position.top - dragOffset.top,
				left: position.left - dragOffset.left
			});
		},
		onDragStart($item, container, _super, event) {
			_super($item, container, _super, event);

			$(RESConfigPanelOptions).edgescroll({ speed: 4 });

			const offset = $item.offset();
			const pointer = container.rootGroup.pointer;

			$item.find('>td').css('width', function () {
				return $(this).width();
			});
			$item.css({
				position: 'absolute',
				height: $item.height(),
				width: $item.width()
			}).data({
				oldIndex: $item.index(),

				dragOffset: {
					left: pointer.left - offset.left,
					top: pointer.top - offset.top
				}
			});
		}
	});
}

function drawOptionBuilder(options, mod, optionName) {
	const option = options[optionName];
	const $addRowButton = $('<button class="addRowButton">');
	const $itemContainer = $('<div class="optionBuilder">');

	$itemContainer.attr({
		'data-module-id': mod.moduleID,
		'data-option-name': optionName
	});
	$addRowButton.text(i18n(option.addItemText) || '+add item').on('click', function () {
		const $newBody = drawBuilderItem(option.defaultTemplate(), option.cases);
		$(this).siblings('.optionBuilder:first').trigger('change').append($newBody);
		const firstText = $newBody.find('input[type=text], textarea')[0];
		if (firstText) {
			setTimeout(() => firstText.focus(), 200);
		}
	});
	option.value.forEach(item => drawBuilderItem(item, option.cases).appendTo($itemContainer));
	makeBuilderItemsSortable($itemContainer);

	return $('<div>').append($itemContainer, $addRowButton)[0];
}

function drawBuilderItem(data, config) {
	const $editButton = $('<div>').addClass('res-icon-button res-icon builderControls builderTrailingControls').html('&#xF061;').attr('title', 'copy and share, or update your settings with a new version').on('click', function () {
		const $item = $(this).closest('.builderItem');
		const data = readBuilderItem($item, config);
		const json = prompt('Copy this and share it, or paste a new version and update your settings', JSON.stringify(data));
		if (json !== null) {
			const newData = JSON.parse(json);
			$item.trigger('change').replaceWith(drawBuilderItem(newData, config));
		}
	});

	const $deleteButton = drawDeleteButton().addClass('builderTrailingControls').on('click', function () {
		if (confirm('Are you sure you want remove this filter?')) {
			$(this).trigger('change');
			$(this).closest('.builderItem').trigger('change').remove();
		}
	});

	const $ondemand = $('<label class="builderControls builderTrailingControls">On-demand via Filterline</label>').prepend(`<input type="checkbox" ${data.ondemand ? 'checked' : ''} name="ondemand">`).change(({ target: { checked } }) => {
		const nameElement = $body.find('> .builderBlock > [name=name]');
		if (!checked || nameElement.val()) return;
		const name = window.prompt('Set filter name.\n\nThis filter will be available in the Filterline dropdown menu by the given name.');
		nameElement.val(name);
	});

	const $header = $('<div class="builderItemControls">').append(drawHandle(), $('<textarea name="builderNote" rows="2" cols="40" placeholder="Write a description/note for this">').val(data.note), $('<input type="hidden" name="version">').val(data.ver), $ondemand, $editButton, $deleteButton);

	const $body = drawBuilderBlock(data.body, config);
	makeBuilderBlockSortable($body);

	return $('<div class="builderItem">').append($header, $body);
}

function drawHandle() {
	return $('<div>').addClass('res-icon-button res-icon handle builderControls').html('&#xF0AA;').attr('title', 'drag and drop to move this condition');
}

function drawDeleteButton() {
	return $('<div>').addClass('res-icon-button res-icon builderControls').html('&#xF056;').attr('title', 'remove this condition');
}

function drawBuilderBlock(data, config) {
	const $block = $('<div class="builderBlock">').attr('data-type', data.type);

	const BlockClass = config[data.type];

	BlockClass.fields.forEach(field => {
		if (typeof field === 'string') return $block.append(field);

		const fieldModule = builderFields[field.type];
		if (fieldModule === undefined) throw new Error(`Unimplemented field type: ${field.type}`);
		$block.append(fieldModule.draw(data, field, config));
	});

	const $deleteButton = drawDeleteButton().addClass('builderTrailingControls').on('click', function () {
		if (confirm('Are you sure you want to delete this condition?')) {
			$(this).trigger('change');
			$(this).closest('.builderWrap').parent('li').remove();
		}
	});

	return $('<div class="builderWrap">').append(drawHandle(), $block, $deleteButton);
}

function readBuilderItem(item, config) {
	const $firstBlock = $(item).find('> .builderWrap > .builderBlock');
	const $header = $(item).find('.builderItemControls');
	return {
		note: $header.find('textarea[name=builderNote]').val(),
		ver: parseInt($header.find('input[name=version]').val(), 10),
		body: readBuilderBlock($firstBlock, config),
		ondemand: $header.find('input[name=ondemand]').is(':checked')
	};
}

function readBuilderBlock($element, config) {
	const type = $element.attr('data-type');
	const BlockClass = config[type];
	const data = { type };
	let validate = true;
	BlockClass.fields.forEach(field => {
		if (typeof field === 'string') return;
		const fieldType = field.type;
		if (fieldType === 'multi') validate = false;
		const $fieldElem = $element.find(`> [name=${field.id}]`);
		if (typeof builderFields[fieldType].read === 'function') {
			data[field.id] = builderFields[fieldType].read($fieldElem, field, config);
		} else {
			data[field.id] = $fieldElem.val();
		}
	});

	if (validate) {
		try {
			new BlockClass(data).validate();
			$element.removeClass('builderBlock-error');
		} catch (e) {
			$element.attr('error', e.message).addClass('builderBlock-error');
			throw e;
		}
	}

	return data;
}

function makeBuilderItemsSortable($builder) {
	function cleanupDrag($item) {
		$item.removeData('dragOffset');
		$(RESConfigPanelOptions).edgescroll('stop');
	}

	$builder.sortable({
		nested: false,
		handle: '.builderItem > .builderItemControls .handle',
		placeholderClass: 'RESSortPlaceholder',
		placeholder: '<div class="RESSortPlaceholder"></div>',
		containerSelector: '.optionBuilder',
		itemSelector: '.builderItem',
		onCancel($item, container, _super, event) {
			_super($item, container, _super, event);
			cleanupDrag($item);
		},
		onDrop($item, container, _super, event) {
			_super($item, container, _super, event);
			cleanupDrag($item);
			$item.trigger('change');
		},
		onDrag($item, position) {
			const dragOffset = $item.data('dragOffset');

			$item.css({
				top: position.top - dragOffset.top,
				left: position.left - dragOffset.left
			});
		},
		onDragStart($item, container, _super, event) {
			_super($item, container, _super, event);

			$(RESConfigPanelOptions).edgescroll({ speed: 4 });

			$item.css({
				position: 'absolute',
				height: $item.height(),
				width: $item.width()
			});

			const offset = $item.offset();
			const pointer = container.rootGroup.pointer;
			$item.data('dragOffset', {
				left: pointer.left - offset.left,
				top: pointer.top - offset.top
			});
		}
	});
}

function makeBuilderBlockSortable($builderBlock) {
	function cleanupDrag($item) {
		$item.removeData('dragOffset');
		$(RESConfigPanelOptions).edgescroll('stop');
	}

	$builderBlock.sortable({
		nested: true,
		handle: '.handle',
		placeholderClass: 'RESSortPlaceholder',
		placeholder: '<li class="RESSortPlaceholder"></li>',
		containerSelector: '.builderWrap',
		itemPath: '> .builderBlock > .builderMulti',
		itemSelector: 'li',
		onCancel($item, container, _super, event) {
			_super($item, container, _super, event);
			cleanupDrag($item);
		},
		onDrop($item, container, _super, event) {
			_super($item, container, _super, event);
			cleanupDrag($item);
			$item.trigger('change');
		},
		onDrag($item, position) {
			const dragOffset = $item.data('dragOffset');

			$item.css({
				top: position.top - dragOffset.top,
				left: position.left - dragOffset.left
			});
		},
		onDragStart($item, container, _super, event) {
			_super($item, container, _super, event);

			$(RESConfigPanelOptions).edgescroll({ speed: 4 });

			$item.css({
				position: 'absolute',
				height: $item.height(),
				width: $item.width()
			});

			const offset = $item.offset();
			const pointer = container.rootGroup.pointer;
			$item.data('dragOffset', {
				left: pointer.left - offset.left,
				top: pointer.top - offset.top
			});
		}
	});
}

const builderFields = {
	multi: {
		draw(data, BlockClass, config) {
			const $rowWrapper = $('<ul class="builderMulti">').attr('name', BlockClass.id);
			const addItem = itemData => drawBuilderBlock(itemData, config).appendTo($rowWrapper).wrap('<li>');

			const items = data[BlockClass.id];
			items.forEach(addItem);

			const addButton = string_namespaceObject.html`
				<select class="addBuilderBlock">
					<option>+ add a condition</option>
					${Object.entries(config).map(([key, { text, disabled }]) => string_namespaceObject._html`
						<option value="${key}" ${disabled && 'disabled'}>${text}</option>
					`)}
				</select>
			`;
			addButton.addEventListener('change', () => {
				const type = addButton.value;
				if (type !== '' && config.hasOwnProperty(type)) {
					addItem(Object.assign({ type }, config[type].defaultConditions)).find('input[type=text], input[type=number], textarea').focus();
				}

				addButton.selectedIndex = 0;
			});

			return $rowWrapper.add(addButton);
		},
		read($elem, fieldConfig, config) {
			return $elem.find('> li > .builderWrap > .builderBlock').map(function () {
				return readBuilderBlock($(this), config);
			}).get();
		}
	},
	hidden: {
		draw(data, BlockClass) {
			const id = BlockClass.id;
			return $('<input type="hidden">').attr('name', id).val(data[id]);
		}
	},
	number: {
		draw(data, BlockClass) {
			const id = BlockClass.id;
			return $('<input type="number">').attr('name', id).val(data[id]);
		},
		read($elem) {
			return parseInt($elem.val(), 10);
		}
	},
	check: {
		draw(data, BlockClass) {
			const id = BlockClass.id;
			return $('<input type="checkbox">').attr('name', id).val(data[id]);
		}
	},
	checkset: {
		uid: 0,
		draw(data, BlockClass) {
			const id = BlockClass.id;
			const prefixId = this.uid++;
			const $wrap = $('<span class="checkset">').attr('name', BlockClass.id);
			BlockClass.items.forEach((e, idx) => {
				const itemId = `checkset-${prefixId}-${idx}X`;
				const $box = $('<input type="checkbox" />').attr('id', itemId).attr('name', e);
				if (data.hasOwnProperty(id) && data[id].includes(e)) {
					$box.prop('checked', true);
				}
				const $label = $('<label>').attr('for', itemId).text(e);
				$wrap.append($box, $label);
			});
			return $wrap;
		},
		read($elem, fieldConfig) {
			return fieldConfig.items.filter(e => $elem.children(`[name="${e}"]`).prop('checked'));
		}
	},
	text: {
		draw(data, BlockClass) {
			const id = BlockClass.id;
			const $field = $('<input type="text">').attr('name', id).val(data[id]);
			if (BlockClass.hasOwnProperty('pattern')) {
				$field.attr('pattern', BlockClass.pattern);
			}
			if (BlockClass.hasOwnProperty('placeholder')) {
				$field.attr('placeholder', BlockClass.placeholder);
			}
			return $field;
		}
	},
	duration: {
		draw(data, BlockClass) {
			let durr = data[BlockClass.id];
			durr /= 60 * 1000;
			const minutes = durr % 60;
			durr = (durr - minutes) / 60;
			const hours = durr % 24;
			durr = (durr - hours) / 24;
			const days = durr;

			return $('<span class="durationField">').attr('name', BlockClass.id).append([$('<input type="number" name="days" />').val(days), ' days ', $('<input type="number" name="hours" />').val(hours), ' hours ', $('<input type="number" name="minutes" />').val(minutes), ' minutes ']);
		},
		read($elem) {
			const days = parseFloat($elem.children('[name=days]').val()) || 0;
			const hours = parseFloat($elem.children('[name=hours]').val()) || 0;
			const minutes = parseFloat($elem.children('[name=minutes]').val()) || 0;

			let duration = 0;
			duration += days * 24 * 60 * 60;
			duration += hours * 60 * 60;
			duration += minutes * 60;
			duration *= 1000;

			return duration;
		}
	},
	select: {
		draw(data, BlockClass) {
			const value = data[BlockClass.id];
			let entries = BlockClass.options;

			if (typeof entries === 'string') {
				entries = this.getPredefinedChoices(entries);
			}

			const $dropdown = $('<select>').attr('name', BlockClass.id);
			entries.forEach(row => {
				let label, value;
				if (typeof row === 'string') {
					label = value = row;
				} else {
					label = row[0];
					value = row[1];
				}
				$('<option>').text(label).val(value).appendTo($dropdown);
			});
			$dropdown.val(value);
			return $dropdown;
		},
		getPredefinedChoices(name) {
			if (name === 'COMPARISON') {
				return [['exactly', '=='], ['not', '!='], ['more than', '>'], ['less than', '<'], ['at least', '>='], ['at most', '<=']];
			} else {
				throw new Error(`Option set "${name}" is not defined`);
			}
		}
	}
};


function getOptions(mod) {
	const staged = stage_namespaceObject.get(mod.moduleID);

	return mapValues_default()(mod.options, (stored, key) => Object.assign({}, stored, staged && staged[key]));
}

const abandonChangesConfirmation = 'Abandon your changes to RES settings?';

function notifyOptionsSaved() {
	const statusEle = RESConsoleContainer.querySelector('#moduleOptionsSaveStatus');
	if (statusEle) {
		statusEle.setAttribute('style', 'display: block; opacity: 1');
		setTimeout(() => $(statusEle).fadeOut(1000), 500);
	}
}
// CONCATENATED MODULE: ./lib/modules/menu.js










const menu_module = new Module('RESMenu');

menu_module.moduleName = 'menuName';
menu_module.category = 'coreCategory';
menu_module.description = 'The <span class="gearIcon"></span> dropdown menu to manage RES settings and quick options';
menu_module.descriptionRaw = true;
menu_module.alwaysEnabled = true;
menu_module.options = {
	gearIconClickAction: {
		title: 'menuGearIconClickActionTitle',
		type: 'enum',
		values: [{
			name: 'menuGearIconClickActionOpenSettings',
			value: 'openSettings'
		}, {
			name: 'menuGearIconClickActionOpenCommandLine',
			value: 'openCommandLine'
		}, {
			name: 'menuGearIconClickActionToggleMenu',
			value: 'toggleMenu'
		}, {
			name: 'menuGearIconClickActionToggleMenuNoHover',
			value: 'toggleMenuNoHover'
		}],
		value: 'toggleMenuNoHover',
		description: 'menuGearIconClickActionDesc',
		bodyClass: true,
		advanced: true
	}
};

menu_module.beforeLoad = () => {
	renderConsoleLink();
};

menu_module.go = () => {
	addConsoleLink();
};

menu_module.afterLoad = () => {
	addLegacyStyling();
};

let RESPrefsLink;
let $menuItems = $();

function renderConsoleLink() {
	RESPrefsLink = $(`<span id="openRESPrefs"><span id="RESSettingsButton" title="${i18n('RESSettings')}" class="gearIcon"></span>`).mouseenter(() => {
		if (menu_module.options.gearIconClickAction.value !== 'toggleMenuNoHover') {
			showPrefsDropdown(200);
		}
	}).find('.gearIcon').click(() => {
		if (menu_module.options.gearIconClickAction.value === 'openCommandLine') {
			toggleCmdLine();
		} else if (menu_module.options.gearIconClickAction.value === 'openSettings') {
			settingsConsole_open();
		} else {
			showPrefsDropdown(0);
		}
	}).end().get(0);
}

function addConsoleLink() {
	$('#header-bottom-right').find('ul').after(RESPrefsLink).after('<span class="separator">|</span>');
	addElement(RESPrefsLink, { container: 'belowFixedNavbar', order: 5 });
}

function showPrefsDropdown(openDelay) {
	dropdownList(menu_module.moduleID, HIDDEN_FROM_SETTINGS).options({
		openDelay,
		fadeDelay: 200,
		fadeSpeed: 0.2
	}).populateWith(() => [$menuItems]).target(RESPrefsLink.querySelector('#RESSettingsButton')).begin();
}

function hidePrefsDropdown() {
	dropdownList(menu_module.moduleID).close(true);
}

function addMenuItem(ele, onClick, prepend = false) {
	let $menuItem = $(ele);
	if (!$menuItem.is('li')) {
		$menuItem = $('<li />').append(ele);
	}

	if (onClick) $menuItem[0].addEventListener('click', onClick);

	if (prepend) {
		$menuItems = $menuItem.add($menuItems);
	} else {
		$menuItems = $menuItems.add($menuItem);
	}
}

function addLegacyStyling() {
	const gearIcon = RESPrefsLink.querySelector('.gearIcon');
	const backgroundImage = window.getComputedStyle(gearIcon).backgroundImage;
	if (backgroundImage && backgroundImage !== 'none') {
		gearIcon.classList.add('res-gearIcon-legacy');
	}
}
// CONCATENATED MODULE: ./lib/modules/commandLine.js









const commandLine_module = new Module('commandLine');

commandLine_module.moduleName = 'commandLineName';
commandLine_module.description = 'commandLineDesc';
commandLine_module.category = 'coreCategory';
commandLine_module.options = {
	launch: {
		title: 'commandLineLaunchTitle',
		type: 'button',
		text: 'Launch',
		description: 'commandLineLaunchDesc',
		callback() {
			toggleCmdLine(true);
		}
	},
	menuItem: {
		title: 'commandLineMenuItemTitle',
		type: 'boolean',
		description: 'commandLineMenuItemDesc',
		value: false
	}
};

commandLine_module.go = () => {
	if (commandLine_module.options.menuItem.value) {
		commandLine_addMenuItem();
	}
};

function commandLine_addMenuItem() {
	const $menuItem = $('<div>', { text: 'command line' }).append($('<span>', {
		class: 'RESMenuItemButton res-icon',
		text: '\uF060'
	}));

	addMenuItem($menuItem, () => {
		hidePrefsDropdown();
		toggleCmdLine(true);
	});
}

const commandLine = once_default()(() => {
	const $widget = $(`
		<div id="keyCommandLineWidget">
			<form id="keyCommandForm">
				<input id="keyCommandInput" type="text">
				type a command, ? for help, esc to close
				<div id="keyCommandInputTip"></div>
				<div id="keyCommandInputError"></div>
			</form>
		</div>
	`);
	const widget = $widget[0];

	widget.style.display = 'none';

	const input = $widget.find('#keyCommandInput')[0];

	input.setAttribute('autocomplete', 'off');

	input.addEventListener('blur', () => {
		if (!input.value.length) {
			toggleCmdLine(false);
		} else {
			cmdLineShowError('click into the text input and press escape to close the command line');
		}
	});

	input.addEventListener('keyup', e => {
		if (e.key === NAMED_KEYS.Escape) {
			toggleCmdLine(false);
		} else {
			cmdLineHelper($(e.target).val());
		}
	});

	const $tip = $widget.find('#keyCommandInputTip');
	const $error = $widget.find('#keyCommandInputError');

	const commandLineForm = $widget.find('#keyCommandForm')[0];
	commandLineForm.addEventListener('keydown', e => {
		if (e.key === NAMED_KEYS.Enter) {
			cmdLineSubmit(e);
		}
	});

	$widget.appendTo(document.body);

	return { widget, input, $tip, $error };
});

function cmdLineShowTip(str) {
	if (str === false) {
		commandLine().$tip.empty();
	} else {
		commandLine().$tip.safeHtml(str);
	}
}

function cmdLineShowError(str) {
	if (str === false) {
		commandLine().$error.empty();
	} else {
		commandLine().$error.safeHtml(str);
	}
}

function toggleCmdLine(force = true, initialCmd = '') {
	if (!modules_isRunning(commandLine_module)) return;

	const open = force && commandLine().widget.style.display !== 'block';

	if (open) {
		cmdLineShowError(false);
		cmdLineShowTip(false);
		commandLine().widget.style.display = 'block';
		setTimeout(() => commandLine().input.focus(), 20);
		commandLine().input.value = initialCmd;
	} else {
		commandLine().input.blur();
		commandLine().widget.style.display = 'none';
	}
}

async function cmdLineHelper(val) {
	const splitWords = val.split(' ');
	const command = splitWords[0];
	splitWords.splice(0, 1);
	val = splitWords.join(' ');
	const tip = await commandLine_getTip(command, val);
	cmdLineShowTip(tip);
	if (tip) {
		cmdLineShowError(false);
	}
}

async function cmdLineSubmit(e) {
	e.preventDefault();
	cmdLineShowError(false);

	const splitWords = commandLine().input.value.split(' ');
	const command = splitWords[0];
	const val = splitWords.slice(1).join(' ');

	const error = await commandLine_executeCommand(command, val, e);
	if (error) {
		cmdLineShowError(error);
	} else if (error !== false) {
		toggleCmdLine(false);
	}
}

function navigateTo(url, e) {
	if (e.shiftKey) {
		openNewTab(url, !e.altKey);
	} else {
		location.href = url;
	}
}

const commands = [];

function registerCommand(commandPredicate, description, getTip, executeCommand) {
	commands.push({
		commandPredicate,
		description,
		getTip,
		executeCommand
	});
}

function getCommandSpec(command, val) {
	let result;
	commands.some(commandSpec => {
		let predicateResult;
		if (typeof commandSpec.commandPredicate.exec === 'function') {
			predicateResult = commandSpec.commandPredicate.exec(command);
		} else if (typeof commandSpec.commandPredicate === 'string') {
			predicateResult = commandSpec.commandPredicate === command;
		} else if (typeof commandSpec.commandPredicate === 'function') {
			predicateResult = commandSpec.commandPredicate(command, val);
		}
		if (predicateResult) {
			result = Object.assign({}, commandSpec, {
				predicateResult
			});
			return true;
		}
	});
	return result;
}

function commandLine_getTip(command, val) {
	const matchingCommandSpec = getCommandSpec(command, val);
	if (matchingCommandSpec) {
		return matchingCommandSpec.getTip(command, val, matchingCommandSpec.predicateResult) || matchingCommandSpec.description;
	}

	return false;
}

function commandLine_executeCommand(command, value, event) {
	const matchingCommandSpec = getCommandSpec(command, value);
	if (matchingCommandSpec) {
		return matchingCommandSpec.executeCommand(command, value, matchingCommandSpec.predicateResult, event);
	} else {
		return 'unknown command - type ? for help';
	}
}

registerCommand(/^\/?r\/(.*)/, 'r/[subreddit] - navigates to subreddit', (command, val, match) => `navigate to subreddit: ${match[1]}`, (command, val, match, e) => {
	navigateTo(`/r/${match[1]}`, e);
});

registerCommand(/^\/?m\/(.*)/, 'm/[multi] - view your multi-reddit [multi]', (command, val, match) => `navigate to multi-reddit: /me/m/${match[1]}`, (command, val, match, e) => {
	navigateTo(`/me/m/${match[1]}`, e);
});

registerCommand('m', 'm - go to inbox', () => 'View messages', (command, value, match, e) => {
	navigateTo('/message/inbox/', e);
});

registerCommand('mm', 'mm - go to moderator mail', () => 'View moderator mail', (command, value, match, e) => {
	navigateTo('/message/moderator/', e);
});

registerCommand('front', 'front - go to frontpage', () => 'Go to frontpage', (command, value, match, e) => {
	navigateTo('/', e);
});

registerCommand(/^XHR/, 'XHRCache clear - manipulate the XHR cache', () => 'clear - clear the cache (use if inline images aren\'t loading properly)', (command, value) => {
	if (/^\s*$/.test(value)) {
		return 'Operation required [clear]';
	}

	switch (value) {
		case 'clear':
			xhrCache_namespaceObject.clear();
			break;
		default:
			return 'The only accepted operation is <tt>clear</tt>';
	}
});

registerCommand(/^user$|^u$|^\/?u(?:ser)?\/(\w*((?!\/m\/).)*)$/, 'user [username] or u/[username] - view profile for [username]', (command, val, match) => {
	val = val || match[1];
	if (!val && loggedInUser()) {
		return 'go to profile';
	} else if (!val) {
		return false;
	} else {
		return `go to profile for: ${val}`;
	}
}, (command, val, match, e) => {
	val = val || match[1] || loggedInUser();
	if (!val) {
		return 'not logged in';
	}
	navigateTo(`/u/${val}`, e);
});

registerCommand(/^\/?u(?:ser)?\/(\w+)\/m(?:\/(.+))?/, 'u/[username]/m/[multi] - view the multireddit [multi] curated by [username]', (command, val, match) => `navigate to multi-reddit: /u/${match[1]}/m/${match[2] || ''}`, (command, val, match, e) => {
	if (!match[1]) {
		return 'no multi-reddit specified';
	}
	navigateTo(`/u/${match[1]}/m/${match[2]}`, e);
});

registerCommand(/^\/?me(?:\/?(.*))$/, ['me - view profile for current user', 'me/saved or me/s - view current user\'s saved links', 'me/saved#comments or me/sc - view current user\'s saved comments', 'me/submitted or me/sub - view current user\'s submitted content', 'me/comments or me/c - view current user\'s comments', 'me/gilded or me/g - view current user\'s gilded content', 'me/liked or me/l - view current user\'s liked content ', 'me/disliked or me/d - view current user\'s disliked content', 'me/hidden or me/h - view current user\'s hidden content'], (command, val, match) => {
	const loggedIn = loggedInUser();
	if (!loggedIn) {
		return 'not logged in';
	}
	let str;
	switch (match[1]) {
		case '':
			str = `navigate to user profile: ${loggedIn}`;
			break;
		case 'saved':
		case 's':
			str = 'navigate to current user\'s saved content';
			break;
		case 'saved#comments':
		case 'sc':
			str = 'navigate to current RES\'s saved comments';
			break;
		case 'submitted':
		case 'sub':
			str = 'navigate to current user\'s submitted content';
			break;
		case 'comments':
		case 'c':
			str = 'navigate to current user\'s comments';
			break;
		case 'gilded':
		case 'g':
			str = 'navigate to current user\'s gilded content';
			break;
		case 'liked':
		case 'l':
			str = 'navigate to current user\'s liked content';
			break;
		case 'disliked':
		case 'd':
			str = 'navigate to current user\'s disliked content';
			break;
		case 'hidden':
		case 'h':
			str = 'navigate to current user\'s hidden content';
			break;
		default:
			str = 'navigate to [s]aved, [s]aved[c]omments, [sub]mitted, [c]omments, [g]ilded, [l]iked, [d]isliked, [h]idden';
			break;
	}
	return str;
}, (command, val, match, e) => {
	const currentUser = loggedInUser();
	if (!currentUser) {
		return 'not logged in';
	}
	switch (match[1]) {
		case '':
			navigateTo(`/user/${currentUser}`, e);
			break;
		case 'saved':
		case 's':
			navigateTo(`/user/${currentUser}/saved`, e);
			break;
		case 'saved#comments':
		case 'sc':
			navigateTo(`/user/${currentUser}/saved#comments`, e);
			break;
		case 'submitted':
		case 'sub':
			navigateTo(`/user/${currentUser}/submitted`, e);
			break;
		case 'comments':
		case 'c':
			navigateTo(`/user/${currentUser}/comments`, e);
			break;
		case 'gilded':
		case 'g':
			navigateTo(`/user/${currentUser}/gilded`, e);
			break;
		case 'liked':
		case 'l':
			navigateTo(`/user/${currentUser}/liked`, e);
			break;
		case 'disliked':
		case 'd':
			navigateTo(`/user/${currentUser}/disliked`, e);
			break;
		case 'hidden':
		case 'h':
			navigateTo(`/user/${currentUser}/hidden`, e);
			break;
		default:
			return 'unknown command - type ? for help';
	}
});

registerCommand('userinfo', false, () => {}, (command, val) => {
	if (val.length <= 1) {
		return 'No username specified.';
	} else {
		ajax({ url: string_namespaceObject.encode`/user/${val}/about.json` }).then(alert_namespaceObject.open);
	}
});

registerCommand('userbadge', false, () => {}, (command, val) => {
	if (val.length <= 1) {
		return 'No username specified.';
	} else {
		ajax({
			url: string_namespaceObject.encode`/user/${val}/about.json`,
			type: 'json'
		}).then(({ data }) => alert_namespaceObject.open(`, .id-t2_${data.id}::before`));
	}
});

{
	const optionsRegex = /(?:RES)?opt(?:ion)?s?[\.\s]+(.*)/i;
	const moduleDataRegex = /(?:RES)?mod(?:ule)?s?[\.\s]+(.*)/i;

	function sanitizeStorageKey(key) {
		let match;
		if (match = optionsRegex.exec(key)) {
			key = `RESoptions.${match[1]}`;
		} else if (match = moduleDataRegex.exec(key)) {
			key = `RESmodules.${match[1]}`;
		}

		return key;
	}

	function executeCommand(command, key, value) {
		if (command === 'get') {
			storage_namespaceObject.get(key).then(value => alert_namespaceObject.open(string_namespaceObject.escape`Value of RESStorage[${key}]: <br><br><textarea rows="5" cols="50">${JSON.stringify(value)}</textarea>`));
		} else if (command === 'update') {
			const id = `RESStorageUpdate-${Date.now()}`;
			storage_namespaceObject.get(key).then(value => alert_namespaceObject.open(string_namespaceObject.escape`Value of RESStorage[${key}]: <br><br><textarea id="${id}" rows="5" cols="50">${JSON.stringify(value)}</textarea>`, { cancelable: true }).then(() => {
				const textArea = document.getElementById(id);
				if (textArea) {
					storage_namespaceObject.set(key, JSON.parse(downcast(textArea, HTMLTextAreaElement).value));
				}
			}));
		} else if (command === 'remove') {
			storage_namespaceObject.delete(key);
			alert_namespaceObject.open(string_namespaceObject.escape`RESStorage[${key}] deleted`);
		} else if (command === 'set') {
			storage_namespaceObject.set(key, JSON.parse(value));
			alert_namespaceObject.open(string_namespaceObject.escape`RESStorage[${key}] set to:<br><br><textarea rows="5" cols="50">${value}</textarea>`);
		} else {
			return 'You must specify either "get [key]" or "set [key] [value]"';
		}
	}

	registerCommand(/(?:RES)?stor(?:e|age)?/i, 'RESStorage [get|set|update|remove] [key] [value] - For debug use only, you shouldn\'t mess with this unless you know what you\'re doing.', () => {}, (command, val) => {
		const splitWords = val.split(' ');
		if (splitWords.length < 2) {
			return 'You must specify "get [key]", "update [key]" or "set [key] [value]"';
		} else {
			const key = sanitizeStorageKey(splitWords[1]);
			const value = splitWords.slice(2).join(' ');

			return executeCommand(splitWords[0], key, value);
		}
	});
}

const sortTypes = {
	n: 'new',
	t: 'top',
	h: 'hot',
	r: 'rising',
	c: 'controversial',
	g: 'gilded',
	p: 'ads'
};
const sortTypeRecognizesPeriod = sortType => sortTypes.t === sortType || sortTypes.c === sortType;
const periods = ['hour', 'day', 'week', 'month', 'year', 'all'];
const getPeriod = val => val && periods.find(period => period.startsWith(val));

registerCommand(/^\/([nthrcgp])?/, '/n, /t, /h, /r, /c, /g, or /p - goes to new, top, hot, rising, controversial, gilded, or promoted sort of current subreddit, multireddit or user page', (command, val, match) => {
	const sortType = sortTypes[match[1]];
	if (sortType) {
		return sortTypeRecognizesPeriod(sortType) ? `sort by ${sortType} [(${periods.map(period => getPeriod(val) === period ? `<b>${period}</b>` : period).join('|')})]` : `sort by ${sortType}`;
	} else {
		return 'sort by ([n]ew, [t]op, [h]ot, [r]ising, [c]ontroversial, [g]ilded, [p]romoted)';
	}
}, (command, val, match, e) => {
	const sortType = sortTypes[match[1]];
	if (!sortType) {
		return 'invalid sort command - must be one of [n]ew, [t]op, [h]ot, [r]ising, [c]ontroversial, [g]ilded, [p]romoted';
	}

	function _navigateTo(v) {
		const url = new URL(v, location.href);

		const period = getPeriod(val);
		if (sortTypeRecognizesPeriod(sortType) && period) {
			url.searchParams.append('t', period);
		}

		navigateTo(url.href, e);
	}

	const currentUser = currentUserProfile();
	if (currentUser) {
		if (sortType === 'gilded') {
			_navigateTo(`/user/${currentUser}/${sortType}`);
		} else if (sortType === 'ads' || sortType === 'rising') {
			return `invalid sort command - "${sortType}" is not supported on profile pages`;
		} else {
			_navigateTo(`/user/${currentUser}?sort=${sortType}`);
		}
		return;
	}

	const subreddit = currentSubreddit();
	if (subreddit) {
		_navigateTo(`/r/${subreddit}/${sortType}`);
		return;
	}

	const multi = currentMultireddit();
	if (multi) {
		_navigateTo(`/${multi}/${sortType}`);
	} else {
		_navigateTo(`/${sortType}`);
	}
});

registerCommand(cmd => ['s', 'search'].includes(cmd), 's[earch] [query] - searches the current subreddit (if any) or all of Reddit', (command, val) => {
	const subreddit = currentSubreddit();
	if (!subreddit) {
		return `Search all of Reddit: ${val}`;
	}
	return `Search /r/${subreddit}: ${val}`;
}, (command, val, match, e) => {
	const subreddit = currentSubreddit();
	if (!subreddit) {
		navigateTo(string_namespaceObject.encode`/search?q=${val}`, e);
		return;
	}
	navigateTo(string_namespaceObject.encode`/r/${subreddit}/search?q=${val}&restrict_sr=on`, e);
});

registerCommand('sr', 'sr [query] - searches all of Reddit', (command, val) => `Search all of Reddit: ${val}`, (command, val, match, e) => {
	navigateTo(string_namespaceObject.encode`/search?q=${val}`, e);
});

registerCommand('?', false, () => {
	const descriptions = commands.map(command => command.description).reduce((a, b) => b ? a.concat(b) : a, []);

	if (descriptions.length) {
		return `<ul><li>${descriptions.join('</li><li>')}</li></ul>`;
	}
}, () => false);
// CONCATENATED MODULE: ./lib/modules/notifications.js











const notifications_module = new Module('notifications');

notifications_module.moduleName = 'notificationsName';
notifications_module.category = 'coreCategory';
notifications_module.description = 'notificationsDesc';
notifications_module.options = {
	sticky: {
		description: 'notificationStickyDesc',
		title: 'notificationStickyTitle',
		type: 'enum',
		value: 'notificationType',
		values: [{
			name: 'notificationsPerNotificationType',
			value: 'notificationType'
		}, {
			name: 'notificationsAlwaysSticky',
			value: 'all'
		}, {
			name: 'notificationsNeverSticky',
			value: 'none'
		}]
	},
	closeDelay: {
		type: 'text',
		value: '3000',
		description: 'notificationCloseDelayDesc',
		title: 'notificationCloseDelayTitle'
	},
	fadeOutLength: {
		type: 'text',
		value: '3000',
		description: 'notificationFadeOutLengthDesc',
		title: 'notificationFadeOutLengthTitle',
		advanced: true
	},
	notificationTypes: {
		description: 'notificationNotificationTypesDesc',
		title: 'notificationNotificationTypesTitle',
		type: 'table',
		advanced: true,
		addRowText: 'notificationsAddNotificationType',
		fields: [{
			key: 'moduleID',
			name: 'moduleID',
			type: 'text'
		}, {
			key: 'notificationID',
			name: 'notificationsNotificationID',
			type: 'text'
		}, {
			key: 'enabled',
			name: 'notificationsEnabled',
			type: 'boolean',
			value: true
		}, {
			key: 'sticky',
			name: 'notificationsSticky',
			type: 'boolean',
			value: false
		}, {
			key: 'cooldown',
			name: 'notificationsCooldown',
			type: 'text',
			value: '0'
		}],
		value: []
	}
};

const recentNotificationStorage = storage_namespaceObject.wrap('RESmodules.notifications.recent', []);

notifications_module.beforeLoad = () => {
	registerCommand('notification', false, () => {}, (command, val) => {
		notifications_showNotification(val, 4000);
	});
};

notifications_module.go = () => {
	setupNotificationContainer();
};

const notificationTimers = [];
let notificationCount = 0;
const notificationsContainer = string_namespaceObject.html`<div id="RESNotifications"></div>`;

function getOrAddNotificationType(notification) {
	const valueIdentifier = {
		moduleID: firstValid(notification.moduleID, '--'),
		notificationID: firstValid(notification.notificationID, notification.optionKey, notification.header, hashCode(notification.message instanceof HTMLElement ? notification.message.outerHTML : notification.message))
	};

	const value = table_namespaceObject.getMatchingValueOrAdd(notifications_module, 'notificationTypes', valueIdentifier, hydrateValue);
	function hydrateValue() {
		return Object.assign({}, notification, valueIdentifier);
	}

	if (typeof value[4] !== 'number') {
		value[4] = parseInt(value[4], 10) || 0;
	}
	return mapScalarToObject(notifications_module.options.notificationTypes, value);
}

function enableNotificationType(notificationType, enabled) {
	const value = table_namespaceObject.getMatchingValueOrAdd(notifications_module, 'notificationTypes', notificationType);
	value[2] = !!enabled;
	options_set(notifications_module, 'notificationTypes', notifications_module.options.notificationTypes.value);
}

async function notifications_showNotification(contentObj, delay) {
	if (!modules_isRunning(notifications_module)) {
		return {
			element: document.createElement('div'),
			close() {}
		};
	}
	if (typeof contentObj === 'string') {
		contentObj = { message: contentObj };
	}

	const notificationType = getOrAddNotificationType(contentObj);
	if (!notificationType.enabled) return notificationError('enabled');
	if (!(await hasNotificationCooledDown(notificationType))) return notificationError('cooldown');
	logNotification(notificationType);

	const thisNotification = createNotificationElement(contentObj, notificationType);
	if (contentObj.closeDelay !== undefined) {
		delay = contentObj.closeDelay;
	}

	if (contentObj.noDisable) {
		thisNotification.querySelector('.RESNotificationFooter').style.display = 'none';
	} else {
		thisNotification.querySelector('.RESNotificationToggle input').addEventListener('change', e => {
			const target = e.target;
			enableNotificationType(notificationType, target.checked);
		});
	}
	const thisNotificationCloseButton = thisNotification.querySelector('.RESNotificationClose');
	thisNotificationCloseButton.addEventListener('click', e => {
		const thisNotification = e.target.parentNode.parentNode;
		closeNotification(thisNotification);
	});

	const isSticky = notifications_module.options.sticky.value === 'all' || notifications_module.options.sticky.value === 'notificationType' && notificationType.sticky;

	if (!isSticky && delay !== Infinity) {
		setCloseNotificationTimer({ currentTarget: thisNotification }, delay);
	}

	notificationsContainer.appendChild(thisNotification);

	notificationCount++;

	$(thisNotification).fadeIn(200).addClass('transition');

	return {
		element: thisNotification,
		close: once_default()(() => closeNotification(thisNotification))
	};
}

function notificationError(error) {

	return {
		element: document.createElement('div'),
		close() {},
		error
	};
}

function renderHeaderHtml(contentObj) {
	let header;

	const mod = contentObj.moduleID && getUnchecked(contentObj.moduleID);

	if (contentObj.header) {
		header = contentObj.header;
	} else {
		header = [];

		if (mod) {
			header.push(i18n(mod.moduleName));
		}

		if (contentObj.type === 'error') {
			header.push('Error');
		}

		header = header.join(' ');
	}

	if (mod && !mod.hidden) {
		header += makeUrlHashLink(mod.moduleID, contentObj.optionKey, ' ', 'gearIcon');
	}

	return header;
}

function setupNotificationContainer() {
	notificationsContainer.style.top = `${getHeaderOffset(true)}px`;
	document.body.append(notificationsContainer);
}

function createNotificationElement(contentObj, notificationType) {
	const $thisNotification = $('<div>', {
		id: `RESNotification-${notificationCount || 0}`,
		class: ['RESNotification', `${notificationType.moduleID}-${notificationType.notificationID}`].join(' '),
		html: `
			<div class="RESNotificationHeader">
				<h3></h3>
				<div class="RESNotificationClose RESCloseButton">&times;</div>
			</div>
			<div class="RESNotificationContent"></div>
			<div class="RESNotificationFooter">
				<label class="RESNotificationToggle">
				<input type="checkbox" checked> Always show this type of notification</label>
			</div>
		`
	});
	$thisNotification.find('h3').append(renderHeaderHtml(contentObj));
	$thisNotification.find('.RESNotificationContent').append(contentObj.message);
	$thisNotification.find('.RESNotificationToggle').attr('title', `Show notifications from ${notificationType.moduleID} - ${notificationType.notificationID}`);
	return $thisNotification.get(0);
}

function setCloseNotificationTimer({ currentTarget: thisNotification }, delay, duration) {
	delay = +firstValid(delay, parseInt(notifications_module.options.closeDelay.value, 10), notifications_module.options.closeDelay.default);
	duration = +firstValid(duration, parseInt(notifications_module.options.fadeOutLength.value, 10), notifications_module.options.fadeOutLength.default);
	const thisNotificationID = +thisNotification.getAttribute('id').split('-')[1];
	thisNotification.classList.add('timerOn');

	thisNotification.setAttribute('style', `-webkit-animation-delay: ${delay / 1000}s; -webkit-animation-duration: ${duration / 1000}s; animation-delay: ${delay / 1000}s; animation-duration: ${duration / 1000}s`);

	delay += duration;
	clearAsyncTasks(thisNotification);
	const thisTimer = setTimeout(() => closeNotification(thisNotification), delay);
	notificationTimers[thisNotificationID] = thisTimer;
	thisNotification.addEventListener('mouseenter', cancelCloseNotificationTimer);
}

function cancelCloseNotificationTimer({ currentTarget: thisNotification }) {
	thisNotification.classList.remove('timerOn');
	thisNotification.removeAttribute('style');
	clearAsyncTasks(thisNotification);
	thisNotification.addEventListener('mouseleave', setCloseNotificationTimer);
}

function clearAsyncTasks(thisNotification) {
	thisNotification.removeEventListener('mouseleave', setCloseNotificationTimer);
	thisNotification.removeEventListener('mouseenter', cancelCloseNotificationTimer);
	const thisNotificationID = +thisNotification.getAttribute('id').split('-')[1];
	clearTimeout(notificationTimers[thisNotificationID]);
}

function closeNotification(thisNotification) {
	clearAsyncTasks(thisNotification);

	$(thisNotification).fadeOut(thisNotification.classList.contains('timerOn') ? 0 : 200).promise().then(notificationClosed);
}

function notificationClosed() {
	for (const notification of notificationsContainer.querySelectorAll('.RESNotification')) {
		if (!notification.offsetParent) {
			notification.remove();
		}
	}
}

async function hasNotificationCooledDown(notificationType) {
	const recentNotifications = await recentNotificationStorage.get();

	const latestNotificationOfSameType = recentNotifications.find(({ moduleID, notificationID }) => moduleID === notificationType.moduleID && notificationID === notificationType.notificationID);

	if (!latestNotificationOfSameType || !latestNotificationOfSameType.timestamp) {
		return true;
	}

	if (latestNotificationOfSameType.timestamp + notificationType.cooldown <= Date.now()) {
		return true;
	}

	return false;
}

async function logNotification(notificationType) {
	const collection = await recentNotificationStorage.get();
	const newItem = {
		moduleID: notificationType.moduleID,
		notificationID: notificationType.notificationID,
		timestamp: Date.now()
	};

	collection.unshift(newItem);
	const pruned = pruneLog(collection);
	recentNotificationStorage.set(pruned);
}

const maxItemsPerNotificationType = 1;
function pruneLog(collection) {
	const pruned = [];
	const index = {};
	for (const item of collection) {
		index[item.moduleID] = index[item.moduleID] || {};
		index[item.moduleID][item.notificationID] = 1 + (index[item.moduleID][item.notificationID] || 0);

		if (+index[item.moduleID][item.notificationID] === maxItemsPerNotificationType) {
			pruned.push(item);
		}
	}

	return pruned;
}
// CONCATENATED MODULE: ./lib/modules/penaltyBox.js











const penaltyBox_module = new Module('penaltyBox');
const MIN_PENALTY = 1;
const MAX_PENALTY = 100;

penaltyBox_module.moduleName = 'penaltyBoxName';
penaltyBox_module.category = 'coreCategory';
penaltyBox_module.description = 'penaltyBoxDesc';
penaltyBox_module.options = {
	delayFeatures: {
		type: 'boolean',
		value: true,
		description: 'penaltyBoxDelayFeaturesDesc',
		title: 'penaltyBoxDelayFeaturesTitle'
	},
	suspendFeatures: {
		type: 'boolean',
		value: false,
		description: 'penaltyBoxSuspendFeaturesDesc',
		title: 'penaltyBoxSuspendFeaturesTitle'
	},
	features: {
		description: 'penaltyBoxFeaturesDesc',
		title: 'penaltyBoxFeaturesTitle',
		type: 'table',
		advanced: true,
		addRowText: 'penaltyBoxFeaturesAddRowText',
		fields: [{
			key: 'moduleID',
			name: 'moduleID',
			type: 'text'
		}, {
			key: 'optionKey',
			name: 'optionKey',
			type: 'text'
		}, {
			key: 'monitoring',
			name: 'penaltyBoxFeaturesMonitoring',
			type: 'boolean',
			value: true
		}, {
			key: 'penalty',
			name: 'penaltyBoxFeaturesPenalty',
			type: 'text',
			value: '0'
		}],
		value: []
	}
};

function alterFeaturePenalty(moduleID, optionKey, valueDelta) {
	if (isNaN(parseInt(valueDelta, 10))) {
		console.warn('Could not alter penalty for', moduleID, optionKey, ' - bad value:', valueDelta);
		return MIN_PENALTY;
	}
	if (!modules_isEnabled(penaltyBox_module)) {
		return MIN_PENALTY;
	}

	const value = getOrAddFeatures(moduleID, optionKey);
	if (!value.monitoring) return MIN_PENALTY;

	value.penalty = clamp_default()(value.penalty + valueDelta, MIN_PENALTY, MAX_PENALTY);
	options_set(penaltyBox_module, 'features', penaltyBox_module.options.features.value);

	if (value.penalty >= MAX_PENALTY) {
		suspendFeature(moduleID, optionKey);
	}

	return value.penalty;
}

function stopMonitoringFeature(moduleID, optionKey) {
	const value = getOrAddFeatures(moduleID, optionKey);
	value.monitoring = false;
	value.penalty = MIN_PENALTY;
	options_set(penaltyBox_module, 'features', penaltyBox_module.options.features.value);
}

function getFeaturePenalty(moduleID, optionKey) {
	if (!modules_isEnabled(penaltyBox_module)) {
		return MIN_PENALTY;
	}
	if (!penaltyBox_module.options.delayFeatures.value) {
		return MIN_PENALTY;
	}

	const value = getOrAddFeatures(moduleID, optionKey);
	if (!value.monitoring) {
		return MIN_PENALTY;
	}

	if (!value.penalty || MIN_PENALTY >= value.penalty) {
		return MIN_PENALTY;
	}

	return value.penalty;
}

function penalizedDelay(moduleID, optionKey, delayOption) {
	const penalty = getFeaturePenalty(moduleID, optionKey);
	if (!penalty || penalty === MIN_PENALTY) {
		return parseInt(delayOption.value, 10);
	}

	const max = parseInt(delayOption.penalizedValue || delayOption.value, 10) * 6;
	const initial = parseInt(delayOption.default, 10);
	const position = penalty / 100;

	return Math.min(max, (max - initial) * position + initial);
}

function getOrAddFeatures(moduleID, optionKey) {
	const value = table_namespaceObject.getMatchingValueOrAdd(penaltyBox_module, 'features', { moduleID, optionKey });
	const obj = mapScalarToObject(penaltyBox_module.options.features, value);
	obj.penalty = parseInt(obj.penalty, 10) || 0;
	return obj;
}

async function suspendFeature(moduleID, optionKey) {
	if (!penaltyBox_module.options.suspendFeatures.value) {
		return;
	}

	const featureModule = modules_get(moduleID);
	const option = featureModule.options[optionKey];
	if (!option) {
		console.warn('Could not find option', moduleID, optionKey);
		return;
	}

	if (option.type !== 'boolean') {
		console.warn(`${penaltyBox_module.moduleID} could not disable option`, moduleID, optionKey);
		return;
	}
	const oldValue = option.value;
	const newValue = !option.value;

	options_set(moduleID, optionKey, newValue);
	stopMonitoringFeature(moduleID, optionKey);

	const featureOptionLink = makeUrlHashLink(moduleID, optionKey);
	const notification = await notifications_showNotification({
		moduleID: penaltyBox_module.moduleID,
		optionKey: 'suspendFeatures',
		header: i18n('penaltyBoxSuspendFeaturesNotificationHeader'),
		message: `
			${i18n('penaltyBoxSuspendFeaturesNotificationMessage', featureOptionLink)}
			<p><a class="RESNotificationButtonBlue" id="penaltyBoxEnableFeature" href="#">
				${i18n('penaltyBoxSuspendFeaturesUndoButton')}
			</a></p>
		`.trim()
	});

	$(notification.element).on('click', '#penaltyBoxEnableFeature', e => {
		e.preventDefault();
		notification.close();
		pardonSuspendedFeature(moduleID, optionKey, oldValue);
	});
}

function pardonSuspendedFeature(moduleID, optionKey, oldValue) {
	options_set(moduleID, optionKey, oldValue);
	stopMonitoringFeature(moduleID, optionKey);

	const featureOptionLink = makeUrlHashLink(moduleID, optionKey);
	notifications_showNotification({
		moduleID: penaltyBox_module.moduleID,
		optionKey: 'suspendFeatures',
		header: i18n('penaltyBoxSuspendFeaturesRevertNotificationHeader'),
		message: i18n('penaltyBoxSuspendFeaturesRevertNotificationMessage', featureOptionLink)
	});
}
// EXTERNAL MODULE: ./node_modules/lodash/maxBy.js
var maxBy = __webpack_require__(62);
var maxBy_default = /*#__PURE__*/__webpack_require__.n(maxBy);

// EXTERNAL MODULE: ./node_modules/lodash/uniq.js
var uniq = __webpack_require__(87);
var uniq_default = /*#__PURE__*/__webpack_require__.n(uniq);

// EXTERNAL MODULE: ./node_modules/lodash/pickBy.js
var pickBy = __webpack_require__(39);
var pickBy_default = /*#__PURE__*/__webpack_require__.n(pickBy);

// EXTERNAL MODULE: ./node_modules/lodash/sortBy.js
var lodash_sortBy = __webpack_require__(21);
var lodash_sortBy_default = /*#__PURE__*/__webpack_require__.n(lodash_sortBy);

// EXTERNAL MODULE: ./node_modules/lodash/escapeRegExp.js
var escapeRegExp = __webpack_require__(270);
var escapeRegExp_default = /*#__PURE__*/__webpack_require__.n(escapeRegExp);

// CONCATENATED MODULE: ./lib/modules/selectedEntry.js











const selectedEntry_module = new Module('selectedEntry');

selectedEntry_module.moduleName = 'selectedEntryName';
selectedEntry_module.category = 'browsingCategory';
selectedEntry_module.include = ['comments', 'linklist', 'commentsLinklist', 'modqueue', 'profile', 'inbox', 'search'];
selectedEntry_module.description = 'selectedEntryDesc';
selectedEntry_module.alwaysEnabled = true;

selectedEntry_module.options = {
	autoSelectOnScroll: {
		title: 'selectedEntryAutoSelectOnScrollTitle',
		type: 'boolean',
		value: false,
		description: 'selectedEntryAutoSelectOnScrollDesc'
	},
	selectLastThingOnLoad: {
		title: 'selectedEntrySelectLastThingOnLoadTitle',
		type: 'boolean',
		value: true,
		description: 'selectedEntrySelectLastThingOnLoadDesc'
	},
	scrollToSelectedThingOnLoad: {
		title: 'selectedEntryScrollToSelectedThingOnLoadTitle',
		type: 'boolean',
		value: false,
		advanced: true,
		description: 'selectedEntryScrollToSelectedThingOnLoadDesc',
		dependsOn: options => options.selectLastThingOnLoad.value
	},
	addLine: {
		title: 'selectedEntryAddLineTitle',
		type: 'boolean',
		value: false,
		description: 'selectedEntryAddLineDesc'
	},
	setColors: {
		title: 'selectedEntrySetColorsTitle',
		type: 'boolean',
		value: true,
		description: 'selectedEntrySetColorsDesc'
	},
	backgroundColor: {
		title: 'selectedEntryBackgroundColorTitle',
		type: 'color',
		value: '#F0F3FC',
		description: 'selectedEntryBackgroundColorDesc',
		advanced: true,
		dependsOn: options => options.setColors.value
	},
	backgroundColorNight: {
		title: 'selectedEntryBackgroundColorNightTitle',
		type: 'color',
		value: '#373737',
		description: 'selectedEntryBackgroundColorNightDesc',
		advanced: true,
		dependsOn: options => options.setColors.value
	},
	textColorNight: {
		title: 'selectedEntryTextColorNightTitle',
		type: 'color',
		value: '#DDDDDD',
		description: 'selectedEntryTextColorNightDesc',
		advanced: true,
		dependsOn: options => options.setColors.value
	},
	outlineStyle: {
		title: 'selectedEntryOutlineStyleTitle',
		type: 'text',
		value: '',
		description: 'selectedEntryOutlineStyleDesc',
		advanced: true
	},
	outlineStyleNight: {
		title: 'selectedEntryOutlineStyleNightTitle',
		type: 'text',
		value: '',
		description: 'selectedEntryOutlineStyleNightDesc',
		advanced: true
	}
};

selectedEntry_module.beforeLoad = () => {
	if (selectedEntry_module.options.selectLastThingOnLoad.value) {
		watchForThings(['post', 'comment', 'message'], selectInitial);
	}

	addScrollStyleListener();

	selectedEntry_addListener(selected => bodyClasses_namespaceObject.toggle(!!selected, 'res-entry-is-selected'), 'beforePaint');

	if (selectedEntry_module.options.addLine.value) styleLine();
	if (selectedEntry_module.options.setColors.value) styleColor();
	styleOutline();
};

selectedEntry_module.go = () => {
	watchForThings(['comment'], onNewComments);

	$(document.body).on('mouseup', Thing_Thing.bodyThingSelector, e => {
		if (!click.isProgrammaticEvent(e)) selectedEntry_onClick(e);
	});

	if (selectedEntry_module.options.autoSelectOnScroll.value) {
		window.addEventListener('scroll', debounce_default()(() => {
			if (!recentKeyMove) autoSelect();
		}, 300));
	}

	if (!selectedThing) requestAnimationFrame(autoSelect);
};

const selectedEntry_onClick = throttle_default()(e => {
	addLastSelectedListener();
	const thing = Thing_Thing.from(e.target);
	if (thing) selectedEntry_select(thing, { scrollStyle: 'none' });
}, 100, { trailing: false });

let selectedThing;
let selectedContainer;

const listeners = { beforeScroll: [], beforePaint: [], idle: [] };

function selectedEntry_addListener(callback, when = 'idle', priority = 0) {
	callback.priority = priority;
	listeners[when].push(callback);
	listeners[when].sort((a, b) => a.priority - b.priority);
}

const runCallbacks = (() => {
	function runListeners(listeners, new_, old, opt) {
		for (const listener of listeners) try {
			listener(new_, old, opt);
		} catch (e) {
			console.error(e);
		}
	}

	function throttle(throttler, listeners) {
		let oldest;

		const throttled = throttler((new_, old, opt) => {
			runListeners(listeners, new_, oldest, opt);
			oldest = null;
		});

		return (new_, old, opt) => {
			if (!oldest) oldest = old;
			throttled(new_, old, opt);
		};
	}

	const runIdle = throttle(idleThrottle, listeners.idle);
	const runPaint = throttle(frameThrottle, listeners.beforePaint);

	return (new_, old, opt) => {
		if (listeners.beforeScroll.length) runListeners(listeners.beforeScroll, new_, old, opt);
		if (listeners.beforePaint.length) runPaint(new_, old, opt);
		if (listeners.idle.length) runIdle(new_, old, opt);
	};
})();

let oldSelected;

function selectedEntry_select(newSelected, options = { scrollStyle: 'none' }, force = false) {
	if (!force && newSelected === selectedThing) return;

	oldSelected = selectedThing;

	options = Object.assign({}, options, {
		direction: newSelected && newSelected.isVisible() && oldSelected && oldSelected.isVisible() ? newSelected.entry.getBoundingClientRect().top > oldSelected.entry.getBoundingClientRect().top ? 'down' : 'up' : undefined
	});

	runCallbacks(newSelected, oldSelected, options);

	selectedThing = newSelected;
	selectedContainer = newSelected && newSelected.element.closest('.sitetable');
}

const onNewComments = throttle_default()(thing => {
	if (selectedThing && !document.contains(selectedThing.element)) {
		const newContainer = $(thing.element).closest('.sitetable').get(0);
		if (newContainer === selectedContainer) {
			selectedEntry_select(thing);
		}
	}
}, 100, { leading: true, trailing: false });

function autoSelect() {
	if (selectedThing && elementInViewport(selectedThing.entry)) return;
	const mostVisible = maxBy_default()(Thing_Thing.visibleThings(), ({ entry }) => getPercentageVisibleYAxis(entry));
	if (mostVisible) selectedEntry_select(mostVisible);
}

const lastSelectedKey = `${LAST_SELECTED_ENTRY_KEY}-${location.pathname}`;

const lastSelectedId = sessionStorage[lastSelectedKey];

function selectInitial(thing) {
	if (selectedThing) return;
	if (thing.getFullname() !== lastSelectedId) return;
	const target = thing.getClosestVisible();
	if (!target) return;

	if (selectedEntry_module.options.scrollToSelectedThingOnLoad.value) history.scrollRestoration = 'manual';

	const scrollToSelected = history.scrollRestoration === 'manual';

	selectedEntry_select(target, { scrollStyle: scrollToSelected ? 'legacy' : 'none' });
}

const addLastSelectedListener = once_default()(() => {
	selectedEntry_addListener(selected => {
		sessionStorage[lastSelectedKey] = selected.getFullname();
	}, 'beforeScroll');
});

const movers = {
	closestVisible: thing => thing.getClosestVisible(false),
	up: thing => thing.getNext({ direction: 'up' }),
	down: thing => thing.getNext({ direction: 'down' }),
	top: () => Thing_Thing.visibleThings()[0],
	bottom: () => Thing_Thing.visibleThings().slice(-1)[0],
	upSibling: thing => thing.getNextSibling({ direction: 'up' }) || thing.getParent(),
	downSibling: thing => thing.getClosest(thing.getNextSibling, { direction: 'down' }),
	downParentSibling: thing => (thing.getParent() || thing).getClosest(thing.getNextSibling, { direction: 'down' }),
	upThread: thing => thing.getThreadTop().getNextSibling({ direction: 'up' }) || thing.getThreadTop(),
	downThread: thing => thing.getThreadTop().getNextSibling({ direction: 'down' }),
	toTopComment: thing => thing.getThreadTop(),
	toParent: thing => thing.getParent(),
	previous: () => oldSelected
};

let recentKeyMove = false;
const refreshKeyMoveTimer = debounce_default()(() => {
	recentKeyMove = false;
}, 1000);

function move(direction, options, fallback) {
	if (!selectedThing) autoSelect();

	const targetFn = movers[direction];

	if (!selectedThing && targetFn.length) {
		if (!fallback || !fallback()) throw new Error('Function only works when an entry is selected');
	}

	const target = targetFn(selectedThing);

	if (!target) {
		if (fallback && fallback()) return;

		if (selectedThing) return selectedEntry_select(selectedThing, { scrollStyle: 'middle' });
		throw new Error('Could not find a target');
	} else if (selectedThing === target) {
		if (selectedThing) return selectedEntry_select(selectedThing, { scrollStyle: 'middle' });
		throw new Error('Target already selected');
	}

	addLastSelectedListener();
	selectedEntry_select(target, options);

	recentKeyMove = true;
	refreshKeyMoveTimer();
}

const frameThrottledMove = frameThrottle(move);

const addScrollStyleListener = once_default()(() => {
	let anchor;
	selectedEntry_addListener((selected, unselected, { scrollStyle }) => {
		if (['none', 'adopt'].includes(scrollStyle) && (selected.isFiltered() || unselected && unselected.isFiltered())) {
			anchor = {
				to: selected.entry.getBoundingClientRect().top,
				from: unselected && unselected.entry.getBoundingClientRect().top
			};
		} else {
			anchor = undefined;
		}
	}, 'beforeScroll', -Infinity);

	selectedEntry_addListener((selected, unselected, { scrollStyle, direction }) => scrollToElement(selected.entry, unselected && unselected.entry, { scrollStyle, direction, anchor }), 'beforePaint', Infinity);
});

const installUpdateSelectedElementClassListener = once_default()(() => selectedEntry_addListener((selected, last) => {
	if (last) {
		last.entry.classList.remove('res-selected');
		last.element.classList.remove('res-selected');
	}
	if (selected) {
		selected.entry.classList.add('res-selected');
		selected.element.classList.add('res-selected');
	}
}, 'beforePaint'));

function styleLine() {
	addCSS(`
		.entry.res-selected { box-shadow: 3px 0 0 -1px #c2d2e0 !important; }
		.res-nightmode .entry.res-selected { box-shadow: 3px 0 0 -1px grey !important; }
	`);
	installUpdateSelectedElementClassListener();
}

function styleColor() {
	selectedEntry_addListener((selected, last) => {
		if (last) {
			last.entry.classList.remove('RES-keyNav-activeElement');
			last.element.classList.remove('RES-keyNav-activeThing');
		}
		if (selected) {
			selected.entry.classList.add('RES-keyNav-activeElement');
			selected.element.classList.add('RES-keyNav-activeThing');
		}
	}, 'beforePaint');

	const backgroundColor = selectedEntry_module.options.backgroundColor.value ? `
		.entry.res-selected,
		.entry.res-selected .md-container {
			background-color: ${selectedEntry_module.options.backgroundColor.value} !important;
		}` : '';

	const backgroundColorNight = selectedEntry_module.options.backgroundColorNight.value ? `
		.res-nightmode .entry.res-selected,
		.res-nightmode .entry.res-selected .md-container {
			background-color: ${selectedEntry_module.options.backgroundColorNight.value} !important;
		}` : '';

	const textColorNight = selectedEntry_module.options.textColorNight.value ? `
		.res-nightmode .entry.res-selected > .tagline,
		.res-nightmode .entry.res-selected .md-container > .md,
		.res-nightmode .entry.res-selected .md-container > .md p {
			color: ${selectedEntry_module.options.textColorNight.value} !important;
		}` : '';

	addCSS(backgroundColor + backgroundColorNight + textColorNight);
	installUpdateSelectedElementClassListener();
}

function styleOutline() {
	const outlineStyle = selectedEntry_module.options.outlineStyle.value ? `
		.entry.res-selected {
			outline: ${selectedEntry_module.options.outlineStyle.value};
		}` : '';

	const outlineStyleNight = selectedEntry_module.options.outlineStyleNight.value ? `
		.res-nightmode .entry.res-selected {
			outline: ${selectedEntry_module.options.outlineStyleNight.value};
		}
	` : '';

	const style = outlineStyle + outlineStyleNight;
	if (style) {
		addCSS(style);
		installUpdateSelectedElementClassListener();
	}
}
// CONCATENATED MODULE: ./lib/modules/filteReddit/Case.js







const regexRegex = /^\/(.*)\/([gim]+)?$/;

class Case_Case {

	static async getSelectedEntryValue() {
		const selected = selectedThing;
		if (!selected) throw new Error('No entry is currently selected.');

		let conditions;
		if (this.defaultConditions) {
			if (!this.thingToCriterion) throw Error('Case does not have method `thingToCriterion`');
			if (!this.criterionToConditions) throw Error('Case does not have method `criterionToConditions`');
			conditions = this.criterionToConditions((await this.thingToCriterion(selected)));
		}

		const cased = this.fromConditions(conditions);
		cased.validate();

		const state = await cased.evaluate(selected);

		return { conditions, state };
	}

	static criterionToConditions(criterion) {
		if (!criterion && this.pattern && !this.pattern.startsWith('[')) {
			throw new Error('Requires criterion');
		}

		const parse = this.parseCriterion && this.parseCriterion.bind(this);
		if (!criterion || !parse) {
			return;
		}

		const parts = criterion.split(' & ');

		if (this.criterionOperators && criterion && parts.length > 1) {
			const name = `${this.text} ${criterion}`;
			return getGroup('all', parts.map(v => cases_getConditions(this.type, parse(v))), name);
		} else {
			return parse(criterion);
		}
	}

	static fromConditions(conditions) {
		if (!conditions) conditions = this.defaultConditions;
		const type = conditions && conditions.type || this.type;
		let cased;

		try {
			if (!type) throw new Error('Lacks type');
			const CaseClass = cases_get(type);
			if (CaseClass.disabled) throw new Error(`${CaseClass.type} is disabled`);
			cased = new CaseClass(conditions);
		} catch (e) {
			console.error(`Could not build case: ${e.message}. Ignoring.`, e);
			cased = new cases_Inert();
		}

		cased.conditions = !conditions || !conditions.type ? cases_getConditions(type, conditions) : conditions;

		return cased;
	}

	static buildRegex(string, { allowEmptyString = false, fullMatch = true } = {}) {
		if (regexRegex.test(string)) {
			const [, str, flags] = regexRegex.exec(string);
			return new RegExp(str, flags);
		} else {
			if (!allowEmptyString && !string) throw new Error('String cannot be empty');
			const patt = escapeRegExp_default()(string);
			return new RegExp(fullMatch ? `^${patt}$` : patt, 'i');
		}
	}

	static get disabled() {
		return false;
	}

	constructor(value) {
		this.observers = this.onObserve ? new Set() : null;

		this.value = value;
	}

	validate() {
		if (this instanceof cases_Inert || this.validator && !this.validator()) throw new Error('Invalid conditions');
		return true;
	}

	hasType(type) {
		return this.constructor.type === type;
	}

	observe(observer) {
		if (!this.observers || this.observers.has(observer)) return false;
		const status = this.onObserve && this.onObserve() || false;
		if (status) this.observers.add(observer);
		return status;
	}

	refreshThing(thing) {
		if (!this.observers) return;
		for (const o of this.observers) {
			o.refreshThing(thing);
		}
	}
}
Case_Case.slow = 0;
Case_Case.reconcilable = false;
Case_Case.unique = false;
Case_Case.variant = 'basic';
Case_Case.pattern = '';
Case_Case.criterionOperators = false;
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/CommentCount.js





class CommentCount_CommentCount extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.trueText = `comment count ${prettyOperator(this.value.op)} ${this.value.val}`, this.falseText = `comment count ${prettyOperator(inverseOperator(this.value.op))} ${this.value.val}`, _temp;
	}

	static parseCriterion(input) {
		return { op: '>=', val: parseInt(input, 10) };
	}
	static thingToCriterion(thing) {
		return String(thing.getCommentCount());
	}

	validator() {
		return Number.isInteger(this.value.val);
	}

	evaluate(thing) {
		const commentCount = thing.getCommentCount();
		return isNaN(commentCount) ? false : numericalCompare(this.value.op, commentCount, this.value.val);
	}
}
CommentCount_CommentCount.text = 'Comment count';
CommentCount_CommentCount.defaultConditions = { op: '>', val: 0 };
CommentCount_CommentCount.fields = ['post has ', { type: 'select', options: 'COMPARISON', id: 'op' }, ' ', { type: 'number', id: 'val' }, ' comments'];
CommentCount_CommentCount.pattern = 'integer';
// CONCATENATED MODULE: ./lib/modules/dashboard.js












const dashboard_module = new Module('dashboard');

dashboard_module.moduleName = 'dashboardName';
dashboard_module.category = 'productivityCategory';
dashboard_module.description = 'dashboardDesc';
dashboard_module.bodyClass = true;
dashboard_module.options = {
	menuItem: {
		type: 'boolean',
		value: true,
		description: 'dashboardMenuItemDesc',
		title: 'dashboardMenuItemTitle'
	},
	defaultPosts: {
		type: 'text',
		value: '3',
		description: 'dashboardDefaultPostsDesc',
		title: 'dashboardDefaultPostsTitle',
		advanced: true
	},
	defaultSort: {
		type: 'enum',
		values: [{
			name: 'hot',
			value: 'hot'
		}, {
			name: 'new',
			value: 'new'
		}, {
			name: 'rising',
			value: 'rising'
		}, {
			name: 'controversial',
			value: 'controversial'
		}, {
			name: 'top',
			value: 'top'
		}],
		value: 'hot',
		description: 'dashboardDefaultSortDesc',
		title: 'dashboardDefaultSortTitle'
	},
	dashboardShortcut: {
		type: 'boolean',
		value: true,
		description: 'dashboardDashboardShortcutDesc',
		title: 'dashboardDashboardShortcutTitle'
	},
	tagsPerPage: {
		type: 'text',
		value: '25',
		description: 'dashboardTagsPerPageDesc',
		title: 'dashboardTagsPerPageTitle',
		advanced: true
	}
};
dashboard_module.shouldRun = () => isCurrentSubreddit('dashboard');

dashboard_module.always = () => {
	if (modules_isEnabled(dashboard_module)) {
		if (dashboard_module.options.menuItem.value) addMenuItem(`<div id="DashboardLink"><a href="/r/Dashboard">${i18n('myDashboard')}</a></div>`, undefined, true);
		const subreddit = currentSubreddit();
		if (dashboard_module.options.dashboardShortcut.value && subreddit) init_go.then(() => addDashboardShortcuts(subreddit));
	}
};

dashboard_module.go = async () => {
	await getLatestWidgets();

	drawDashboard();

	document.querySelector('#header-bottom-left .tabmenu').classList.add('res-dashboard-tabmenu-ready');
};

const initialTabID = location.hash.replace('#', '') || 'dashboardContents';
let selectedTabMenuItem;

function addTab(tabID, tabName, tabModuleId) {
	const $tabPage = $('<div class="dashboardPane">').appendTo('#siteTable.linklisting').hide();

	const tabMenuItem = createElement_namespaceObject.tabMenuItem({
		text: tabName,
		className: 'res-dashboard-tab',
		prepend: true
	});

	if (tabModuleId) {
		const gear = makeUrlHashLink(tabModuleId, undefined, ' ', 'gearIcon');
		$(tabMenuItem).after(gear);
	}

	tabMenuItem.addEventListener('change', ({ detail: active }) => {
		if (active) {
			$tabPage.show();
			if (selectedTabMenuItem) selectedTabMenuItem.click();
			selectedTabMenuItem = tabMenuItem;
			location.hash = tabID;
		} else {
			$tabPage.hide();
		}
	});

	if (tabID === initialTabID) tabMenuItem.click();

	return $tabPage;
}

const MAX_ROWS = 100;

const dashboardStorage = storage_namespaceObject.wrap(() => `RESmodules.dashboard.${loggedInUser() || 'null'}`, []);

let widgets = [];

async function getLatestWidgets() {
	widgets = (await dashboardStorage.get()).filter(Boolean);
}

function drawDashboard() {
	const $tabPage = addTab('dashboardContents', 'My dashboard', dashboard_module.moduleID);
	attachAddComponent($tabPage);
	attachEditComponent();
	initUpdateQueue();
}

function initUpdateQueue() {
	for (const widget of widgets) {
		if (widget) addWidget(widget);
	}

	setTimeout(() => {
		$('#RESDashboard').sortable({
			delay: 200,
			nested: false,
			handle: 'div.RESDashboardComponentHeader',
			itemSelector: '.RESDashboardComponent',
			placeholderClass: 'RESSortPlaceholder',
			placeholder: '<li class="RESSortPlaceholder"></li>',
			onCancel($item, container, _super, event) {
				_super($item, container, _super, event);
				$(window).edgescroll('stop');
				$item.removeData('dragOffset');
			},
			onDrop($item, container, _super, event) {
				_super($item, container, _super, event);
				$item.removeData('dragOffset');
				$(window).edgescroll('stop');
				saveOrder();
			},
			onDrag($item, position) {
				const dragOffset = $item.data('dragOffset');

				$item.css({
					top: position.top - dragOffset.top,
					left: position.left - dragOffset.left
				});
			},
			onDragStart($item, container) {
				$(window).edgescroll({ speed: 4 });

				const offset = $item.offset();
				const pointer = container.rootGroup.pointer;
				$item.css({
					position: 'absolute',
					height: $item.height(),
					width: $item.width()
				}).data('dragOffset', {
					left: pointer.left - offset.left,
					top: pointer.top - offset.top
				});
			}
		});
	}, 300);
}

const updateQueue = [];
let updateQueueTimer;

function addToUpdateQueue(updateFunction) {
	updateQueue.push(updateFunction);
	if (!updateQueueTimer) {
		updateQueueTimer = setInterval(processUpdateQueue, 2000);
		setTimeout(processUpdateQueue, 100);
	}
}

function processUpdateQueue() {
	const thisUpdate = updateQueue.pop();
	thisUpdate();
	if (updateQueue.length < 1) {
		clearInterval(updateQueueTimer);
		updateQueueTimer = undefined;
	}
}

function saveOrder() {
	const data = $('#siteTable li.RESDashboardComponent').toArray().map(e => $(e).attr('id'));
	data.reverse();
	const newOrder = [];
	for (const widget of widgets) {
		const newIndex = data.indexOf(widget.basePath.replace(/(\/|\+)/g, '_'));
		newOrder[newIndex] = widget;
	}
	widgets = newOrder;
	dashboardStorage.set(widgets);
}

let widgetBeingEdited;

function attachEditComponent() {
	const $dashboardEditComponent = $('<div id="RESDashboardEditComponent" class="RESDashboardComponent" />');
	$dashboardEditComponent.html(`
		<div class="editWidget">Edit widget</div>
		<div id="editRedditFormContainer" class="editRedditForm">
			<form id="editRedditForm">
				<input type="text" id="editReddit">
				<input type="text" id="editRedditDisplayName" placeholder="display name (e.g. stuff)">
				<input type="submit" class="updateButton" value="save changes">
				<input type="cancel" class="cancelButton" value="cancel">
			</form>
			<form id="editSearchForm">
				<input type="text" id="editSearch" placeholder="search terms">
				<input type="text" id="editSearchDisplayName" placeholder="display name (e.g. stuff)">
				<input type="submit" class="updateButton" value="save changes">
				<input type="cancel" class="cancelButton" value="cancel">
			</form>
		</div>
	`);

	$dashboardEditComponent.find('#editRedditForm').get(0).addEventListener('submit', e => {
		e.preventDefault();
		let thisBasePath = $('#editReddit').val();
		if (thisBasePath !== '') {
			if (thisBasePath.includes(',')) {
				thisBasePath = thisBasePath.replace(/,/g, '+');
			}
			widgetBeingEdited.formerBasePath = widgetBeingEdited.basePath;
			widgetBeingEdited.basePath = `/r/${thisBasePath}`;
			widgetBeingEdited.displayName = $('#editRedditDisplayName').val();
			widgetBeingEdited.update();
			$('#editReddit').tokenInput('clear');
			$('#RESDashboardEditComponent').fadeOut(() => $('#editReddit').blur());
			widgetBeingEdited.widgetEle.find('.widgetPath').text(widgetBeingEdited.displayName).attr('title', `/r/${thisBasePath}`);
			dashboard_updateWidget();
		}
	});
	$dashboardEditComponent.find('#editSearchForm').get(0).addEventListener('submit', e => {
		e.preventDefault();
		const thisBasePath = $('#editSearch').val();
		widgetBeingEdited.formerBasePath = widgetBeingEdited.basePath;
		widgetBeingEdited.basePath = string_namespaceObject.encode`/search?q=${thisBasePath}`;
		widgetBeingEdited.displayName = $('#editSearchDisplayName').val();
		widgetBeingEdited.update();
		$('#RESDashboardEditComponent').fadeOut(() => {
			$('#editSearch').val('').blur();
			$('#editSearchDisplayName').val('').blur();
		});
		widgetBeingEdited.widgetEle.find('.widgetPath').text(widgetBeingEdited.displayName).attr('title', thisBasePath);
		dashboard_updateWidget();
	});
	$dashboardEditComponent.find('.cancelButton').click(() => {
		if (widgetBeingEdited.basePath.startsWith('/search?q=')) {
			$('#RESDashboardEditComponent').fadeOut(() => $('#editSearchDisplayName').val('').blur());
		} else {
			$('#editReddit').tokenInput('clear');
			$('#RESDashboardEditComponent').fadeOut(() => $('#editReddit').blur());
		}
	});
	$(document.body).append($dashboardEditComponent);
}

let firstEdit;

function showEditForm() {
	let basePath = widgetBeingEdited.basePath;
	const widgetEle = widgetBeingEdited.widgetEle;
	const eleTop = $(widgetEle).position().top;
	const eleWidth = $(widgetEle).width();
	$('#RESDashboardEditComponent').css('top', `${eleTop}px`).css('left', '5px').css('width', `${eleWidth + 2}px`);
	if (basePath.startsWith('/search?q=')) {
		$('#editSearchDisplayName').val(widgetBeingEdited.displayName);
		$('#editSearch').val(decodeURIComponent(basePath.substr(10)));
		$('#editSearchForm').show();
		$('#editRedditForm').hide();
		$('#RESDashboardEditComponent').fadeIn('fast');
	} else {
		$('#editRedditDisplayName').val(widgetBeingEdited.displayName);
		$('#editRedditForm').show();
		$('#editSearchForm').hide();
		$('#RESDashboardEditComponent').fadeIn('fast');
		basePath = basePath.replace(/^\/r\//, '');
		const reddits = basePath.split('+');
		const prepop = reddits.map(reddit => ({
			id: reddit,
			name: reddit
		}));
		if (!firstEdit) {
			$('#editReddit').tokenInput('/api/search_reddit_names.json?app=res', {
				method: 'POST',
				queryParam: 'query',
				theme: 'facebook',
				allowFreeTagging: true,
				zindex: 999999999,
				onResult(response) {
					if (response.names.length === 0) {
						const failedQueryValue = $('#token-input-editReddit').val();
						return [{
							id: failedQueryValue,
							name: failedQueryValue,
							failedResult: true
						}];
					}

					return response.names.map(name => ({
						id: name,
						name,
						failedResult: false
					}));
				},
				onCachedResult(response) {
					return this.onResult(response);
				},
				prePopulate: prepop,
				searchingText: 'Searching for matching reddits - may take a few seconds...',
				hintText: 'Type one or more subreddits for which to create a widget.',
				resultsFormatter(item) {
					let thisDesc = item.name;
					if (item.failedResult) {
						thisDesc += ' - [this subreddit may not exist, ensure proper spelling]';
					}
					return `<li>${thisDesc}</li>`;
				}
			});
			firstEdit = true;
		} else {
			$('#editReddit').tokenInput('clear');
			for (const value of prepop) {
				$('#editReddit').tokenInput('add', value);
			}
		}
	}
}

let $dashboardUL;

function attachAddComponent($tabPage) {
	const $dashboardAddComponent = $('<div id="RESDashboardAddComponent" class="RESDashboardComponent" />');
	$dashboardAddComponent.html(`
		<div class="addNewWidget">Add a new widget</div>
		<div id="addWidgetButtons">
			<div class="addButton" id="addSearchWidget">+search widget</div>
			<div class="addButton" id="addMailWidget">+mail widget</div>
			<div class="addButton" id="addUserWidget">+user widget</div>
			<div class="addButton" id="addRedditWidget">+subreddit widget</div>
		</div>
		<div id="addSearchFormContainer" class="addSearchForm">
			<div class="backToWidgetTypes">&laquo; back</div>
			<form id="addSearchForm">
				<input type="text" id="addSearch" placeholder="search terms">
				<input type="text" id="addSearchDisplayName" placeholder="display name (e.g. stuff)">
				<input type="submit" class="addButton" value="+add">
			</form>
		</div>
		<div id="addMailWidgetContainer">
			<div class="backToWidgetTypes">&laquo; back</div>
			<div class="addButton widgetShortcut" widgetPath="/message/inbox/">+inbox</div>
			<div class="addButton widgetShortcut" widgetPath="/message/unread/">+unread</div>
			<div class="addButton widgetShortcut" widgetPath="/message/messages/">+messages</div>
			<div class="addButton widgetShortcut" widgetPath="/message/comments/">+comment replies</div>
			<div class="addButton widgetShortcut" widgetPath="/message/selfreply/">+post replies</div>
			<div class="addButton widgetShortcut" widgetPath="/message/moderator/">+modmail</div>
		</div>
		<div id="addUserFormContainer" class="addUserForm">
			<div class="backToWidgetTypes">&laquo; back</div>
			<form id="addUserForm">
				<input type="text" id="addUser">
				<input type="submit" class="addButton" value="+add">
			</form>
		</div>
		<div id="addRedditFormContainer" class="addRedditForm">
			<div class="backToWidgetTypes">&laquo; back</div>
			<form id="addRedditForm">
				<input type="text" id="addReddit">
				<input type="text" id="addRedditDisplayName" placeholder="display name (e.g. stuff)">
				<input type="submit" class="addButton" value="+add">
			</form>
		</div>
	`);
	$dashboardAddComponent.find('.backToWidgetTypes').click(function () {
		$(this).parent().fadeOut(() => $('#addWidgetButtons').fadeIn());
	});
	$dashboardAddComponent.find('.widgetShortcut').click(function () {
		const thisBasePath = $(this).attr('widgetPath');
		addWidget({
			basePath: thisBasePath
		}, true);
		$('#addMailWidgetContainer').fadeOut(() => $('#addWidgetButtons').fadeIn());
	});
	$dashboardAddComponent.find('#addRedditWidget').click(() => {
		$('#addWidgetButtons').fadeOut(() => {
			$('#addRedditFormContainer').fadeIn(() => {
				$('#token-input-addReddit').focus();
			});
		});
	});
	$dashboardAddComponent.find('#addMailWidget').click(() => {
		$('#addWidgetButtons').fadeOut(() => $('#addMailWidgetContainer').fadeIn());
	});
	$dashboardAddComponent.find('#addUserWidget').click(() => {
		$('#addWidgetButtons').fadeOut(() => $('#addUserFormContainer').fadeIn());
	});
	$dashboardAddComponent.find('#addSearchWidget').click(() => {
		$('#addWidgetButtons').fadeOut(() => $('#addSearchFormContainer').fadeIn());
	});

	const thisEle = $dashboardAddComponent.find('#addReddit');
	$(thisEle).tokenInput('/api/search_reddit_names.json?app=res', {
		method: 'POST',
		queryParam: 'query',
		theme: 'facebook',
		allowFreeTagging: true,
		zindex: 999999999,
		onResult(response) {
			if (response.names.length === 0) {
				const failedQueryValue = $('#token-input-editReddit').val();
				return [{
					id: failedQueryValue,
					name: failedQueryValue,
					failedResult: true
				}];
			}

			return response.names.map(name => ({
				id: name,
				name,
				failedResult: false
			}));
		},
		onCachedResult(response) {
			return this.onResult(response);
		},

		searchingText: 'Searching for matching reddits - may take a few seconds...',
		hintText: 'Type one or more subreddits for which to create a widget.',
		resultsFormatter(item) {
			let thisDesc = item.name;
			if (item.failedResult) {
				thisDesc += ' - [this subreddit may not exist, ensure proper spelling]';
			}
			return `<li>${thisDesc}</li>`;
		}
	});

	$dashboardAddComponent.find('#addRedditForm').get(0).addEventListener('submit', e => {
		e.preventDefault();
		let thisBasePath = $('#addReddit').val();
		if (thisBasePath !== '') {
			if (thisBasePath.includes(',')) {
				thisBasePath = thisBasePath.replace(/,/g, '+');
			}
			const thisDisplayName = $('#addRedditDisplayName').val() ? $('#addRedditDisplayName').val() : thisBasePath;
			addWidget({
				basePath: thisBasePath,
				displayName: thisDisplayName
			}, true);

			$('#addReddit').tokenInput('clear');
			$('#addRedditFormContainer').fadeOut(() => {
				$('#addReddit').blur();
				$('#addWidgetButtons').fadeIn();
			});
		}
	});
	$dashboardAddComponent.find('#addUserForm').get(0).addEventListener('submit', e => {
		e.preventDefault();
		const thisBasePath = `/user/${$('#addUser').val()}`;
		addWidget({
			basePath: thisBasePath
		}, true);
		$('#addUser').val('').blur();
		$('#addUserFormContainer').fadeOut(() => $('#addWidgetButtons').fadeIn());
	});
	$dashboardAddComponent.find('#addSearchForm').get(0).addEventListener('submit', e => {
		e.preventDefault();
		const thisBasePath = string_namespaceObject.encode`/search?q=${$('#addSearch').val()}`;
		const thisDisplayName = $('#addSearchDisplayName').val() ? $('#addSearchDisplayName').val() : thisBasePath;
		addWidget({
			basePath: thisBasePath,
			displayName: thisDisplayName
		}, true);
		$('#addSearch').val('').blur();
		$('#addSearchFormContainer').fadeOut(() => $('#addWidgetButtons').fadeIn());
	});
	$dashboardUL = $('<ul id="RESDashboard"></ul>');
	$tabPage.append($dashboardAddComponent, $dashboardUL);
}

function addWidget(optionsObject, isNew) {
	if (!optionsObject.basePath.startsWith('/')) {
		optionsObject.basePath = `/r/${optionsObject.basePath}`;
	}
	const exists = widgets.some(widget => widget.basePath === optionsObject.basePath);

	setTimeout(() => {
		$(`.widgetShortcut[widgetPath="${optionsObject.basePath}"]`).hide();
	}, 1000);
	if (exists && isNew) {
		alert_namespaceObject.open(`A widget for ${optionsObject.basePath} already exists!`);
	} else {
		const thisWidget = new WidgetObject(optionsObject);
		thisWidget.init();
		saveWidget(thisWidget.optionsObject());
	}
}

async function removeWidget(optionsObject) {
	await getLatestWidgets();
	let exists;
	widgets = widgets.filter(widget => {
		if (widget.basePath === optionsObject.basePath) {
			exists = true;
			$(document.getElementById(widget.basePath.replace(/\/|\+/g, '_'))).fadeOut('slow', function () {
				$(this).detach();
			});

			setTimeout(() => {
				$(`.widgetShortcut[widgetPath="${optionsObject.basePath}"]`).show();
			}, 1000);
			return false;
		}

		return true;
	});
	if (!exists) {
		notifications_showNotification({
			moduleID: 'dashboard',
			type: 'error',
			message: 'The widget you just tried to remove does not seem to exist.'
		});
	}
	dashboardStorage.set(widgets);
}

async function saveWidget(optionsObject) {
	await getLatestWidgets();

	let index = widgets.findIndex(widget => widget.basePath === optionsObject.basePath);

	if (index === -1) {
		index = widgets.length;
	}
	widgets[index] = optionsObject;

	dashboardStorage.set(widgets);
}

async function dashboard_updateWidget() {
	await getLatestWidgets();
	widgets = widgets.map(widget => {
		if (widget.basePath === widgetBeingEdited.formerBasePath) {
			delete widgetBeingEdited.formerBasePath;
			widget = widgetBeingEdited.optionsObject();
		}
		return widget;
	});
	dashboardStorage.set(widgets);
}

function WidgetObject(widgetOptions) {
	this.basePath = widgetOptions.basePath;
	if (widgetOptions.displayName === undefined || widgetOptions.displayName === null) {
		widgetOptions.displayName = this.basePath;
	}
	this.displayName = widgetOptions.displayName;
	this.numPosts = widgetOptions.numPosts || parseInt(dashboard_module.options.defaultPosts.value, 10);
	this.sortBy = widgetOptions.sortBy || dashboard_module.options.defaultSort.value;
	this.minimized = widgetOptions.minimized || false;
	this.widgetEle = $(`
		<li class="RESDashboardComponent" id="${this.basePath.replace(/\/|\+/g, '_')}">
			<div class="RESDashboardComponentScrim">
				<div class="RESDashboardComponentLoader">
					<span class="dashboardLoader"/><span>querying the server. one moment please.</span>
				</div>
			</div>
		</li>
	`);
	this.header = $(`<div class="RESDashboardComponentHeader"><a class="widgetPath" title="${this.basePath}" href="${this.basePath}"></a></div>`);
	this.header.find('.widgetPath').text(this.displayName);
	this.sortControls = $('<ul class="widgetSortButtons"><li sort="hot">hot</li><li sort="new">new</li><li sort="rising">rising</li><li sort="controversial">controversial</li><li sort="top">top</li></ul>');

	this.optionsObject = () => ({
		basePath: this.basePath,
		displayName: this.displayName,
		numPosts: this.numPosts,
		sortBy: this.sortBy,
		minimized: this.minimized
	});

	$(this.sortControls).find(`li[sort=${this.sortBy}]`).addClass('active');
	$(this.sortControls).find('li').click(e => {
		this.sortChange($(e.target).attr('sort'));
	});
	$(this.header).append(this.sortControls);
	if (!this.basePath.startsWith('/r/') && !this.basePath.startsWith('/user/')) {
		setTimeout(() => $(this.sortControls).hide(), 100);
	}
	this.stateControls = $('<ul class="widgetStateButtons"><li class="updateTime"></li><li action="refresh" class="refresh"><span class="res-icon">&#xF0B0;</span></li><li action="refreshAll" class="refreshAll">Refresh All</li><li action="addRow">+row</li><li action="subRow">-row</li><li action="edit" class="editButton"><span class="res-icon">&#xF139;</span></li><li action="minimize" class="minimize">-</li><li action="delete" class="RESClose">&times;</li></ul>');
	$(this.stateControls).find('li').click(e => {
		switch ($(e.target).attr('action')) {
			case 'refresh':
				this.update();
				break;
			case 'refreshAll':
				$('li[action="refresh"]').click();
				break;
			case 'addRow':
				if (this.numPosts === MAX_ROWS) break;
				this.numPosts++;
				if (this.numPosts === MAX_ROWS) $(this.stateControls).find('li[action=addRow]').addClass('disabled');
				$(this.stateControls).find('li[action=subRow]').removeClass('disabled');
				saveWidget(this.optionsObject());
				this.update();
				break;
			case 'subRow':
				if (this.numPosts === 0) break;
				this.numPosts--;
				if (this.numPosts === 1) $(this.stateControls).find('li[action=subRow]').addClass('disabled');
				$(this.stateControls).find('li[action=addRow]').removeClass('disabled');
				saveWidget(this.optionsObject());
				this.update();
				break;
			case 'minimize':
				$(this.widgetEle).toggleClass('minimized');
				if ($(this.widgetEle).hasClass('minimized')) {
					$(e.target).text('+');
					this.minimized = true;
				} else {
					$(e.target).text('-');
					this.minimized = false;
					this.update();
				}
				$(this.contents).parent().slideToggle();
				saveWidget(this.optionsObject());
				break;
			case 'delete':
				removeWidget(this.optionsObject());
				break;
			default:
				break;
		}
	});
	$(this.header).append(this.stateControls);
	this.sortChange = sortBy => {
		this.sortBy = sortBy;
		$(this.header).find('ul.widgetSortButtons li').removeClass('active');
		$(this.header).find(`ul.widgetSortButtons li[sort=${sortBy}]`).addClass('active');
		this.update();
		saveWidget(this.optionsObject());
	};
	this.edit = () => {
		widgetBeingEdited = this;
		showEditForm();
	};
	$(this.header).find('.editButton').click(this.edit);
	this.update = () => {
		if (this.basePath.includes('/user/')) {
			this.sortPath = this.sortBy === 'hot' ? '/' : `?sort=${this.sortBy}`;
		} else if (this.basePath.includes('/r/')) {
			this.sortPath = this.sortBy === 'hot' ? '/' : `/${this.sortBy}/`;
		} else {
			this.sortPath = '';
		}
		this.url = `${location.protocol}//${location.hostname}/${this.basePath}${this.sortPath}`;
		$(this.contents).fadeTo('fast', 0.25);
		$(this.scrim).fadeIn();

		ajax({
			method: 'GET',
			url: this.url,
			query: {
				limit: this.numPosts
			}
		}).then(this.populate).catch(this.error);
	};
	this.container = $('<div class="RESDashboardComponentContainer"><div class="RESDashboardComponentContents"></div></div>');
	if (this.minimized) {
		$(this.container).addClass('minimized');
		$(this.stateControls).find('li.minimize').addClass('minimized').text('+');
	}
	this.scrim = $(this.widgetEle).find('.RESDashboardComponentScrim');
	this.contents = $(this.container).find('.RESDashboardComponentContents');
	this.init = () => {
		if (isCurrentSubreddit('dashboard')) {
			this.draw();
			if (!this.minimized) addToUpdateQueue(this.update);
		}
	};
	this.draw = () => {
		$(this.widgetEle).append(this.header);
		$(this.widgetEle).append(this.container);
		if (this.minimized) $(this.widgetEle).addClass('minimized');
		$dashboardUL.prepend(this.widgetEle);
	};
	this.populate = response => {
		let $widgetContent = $(response).find('#siteTable, .search-result-group>.contents:last');
		const $thisWidgetContents = $(this.contents);

		$widgetContent.attr('id', `siteTable_${this.basePath.replace(/\/|\+/g, '_')}`);
		if ($widgetContent.length === 2) $widgetContent = $($widgetContent[1]);
		$widgetContent.attr('url', `${this.url}?limit=${this.numPosts}`);
		if ($widgetContent.length > 0 && $widgetContent.html() !== '') {
			$widgetContent.html($widgetContent.html().replace(/<script(.|\s)*?\/script>/g, ''));

			const $noResults = $widgetContent.find('#noresults.error');
			if ($noResults.length) {
				$widgetContent.html('<span class="error">No results found for this widget. Some sort methods, such as rising, may not always have results. Please try a different method.</span>');
			}

			try {
				$thisWidgetContents.empty().append($widgetContent);
			} catch (e) {}

			$thisWidgetContents.fadeTo('fast', 1);
			$(this.scrim).fadeOut(function () {
				$(this).hide();
			});
		} else {
			if (this.url.includes('/message/')) {
				$thisWidgetContents.html('<div class="widgetNoMail">No messages were found.</div>');
			} else {
				$thisWidgetContents.html('<div class="error">There were no results returned for this widget. If you made a typo, simply close the widget to delete it. If reddit is just under heavy load, try clicking refresh in a few moments.</div>');
			}
			$thisWidgetContents.fadeTo('fast', 1);
			$(this.scrim).fadeOut();
		}
		$(this.stateControls).find('.updateTime').text(`updated: ${formatDateTime()}`);

		if ($widgetContent[0]) {
			newSitetable($widgetContent[0]);
		}
	};
	this.error = e => {
		if (e.status === 404) {
			$(this.contents).html('<div class="error">This widget received a 404 not found error. You may have made a typo when adding it.</div>');
		} else {
			$(this.contents).html('<div class="error">There was an error loading data for this widget. Reddit may be under heavy load, or you may have provided an invalid path.</div>');
		}
		$(this.scrim).fadeOut();
		$(this.contents).fadeTo('fast', 1);
	};
}

function addDashboardShortcuts(subreddit) {
	const subButtons = document.querySelectorAll('.side .fancy-toggle-button');
	for (const subButton of subButtons) {
		let isMulti, thisSubredditFragment;
		if (!subreddit.includes('+') && !isCurrentSubreddit('mod')) {
			isMulti = false;
			thisSubredditFragment = subreddit;
		} else if ($(subButton).parent().hasClass('subButtons')) {
			isMulti = true;
			thisSubredditFragment = $(subButton).parent().parent().find('a.title').text();
		} else {
			isMulti = true;
			thisSubredditFragment = $(subButton).next().text();
		}
		if ($(`#subButtons-${thisSubredditFragment}`).length === 0) {
			const $subButtonsWrapper = $(`<div id="subButtons-${thisSubredditFragment}" class="subButtons" style="margin: 0 !important;"></div>`);
			$(subButton).wrap($subButtonsWrapper);

			if (isMulti) {
				const theWrap = $(subButton).parent();
				$(theWrap).appendTo($(theWrap).parent());
			}
		}
		const dashboardToggle = document.createElement('span');
		dashboardToggle.setAttribute('class', 'res-fancy-toggle-button RESDashboardToggle REStoggle');
		dashboardToggle.setAttribute('data-subreddit', thisSubredditFragment);
		const exists = widgets.some(widget => widget && widget.basePath.toLowerCase() === `/r/${thisSubredditFragment.toLowerCase()}`);
		if (exists) {
			dashboardToggle.textContent = '-dashboard';
			dashboardToggle.setAttribute('title', 'Remove this subreddit from your dashboard');
			dashboardToggle.classList.add('remove');
		} else {
			dashboardToggle.textContent = '+dashboard';
			dashboardToggle.setAttribute('title', 'Add this subreddit to your dashboard');
		}
		dashboardToggle.setAttribute('data-subreddit', thisSubredditFragment);
		dashboardToggle.addEventListener('click', toggleDashboard);
		const $subButtons = $(`#subButtons-${thisSubredditFragment}`);
		$subButtons.append(dashboardToggle);
		const next = $subButtons.next();
		if ($(next).hasClass('title') && !$subButtons.hasClass('swapped')) {
			$subButtons.before($(next));
			$subButtons.addClass('swapped');
		}
	}
}

function subredditWidgetExists(subreddit) {
	return widgets.some(widget => widget && widget.basePath.toLowerCase() === `/r/${subreddit.toLowerCase()}`);
}

function toggleDashboard(e) {
	const thisBasePath = `/r/${$(e.target).attr('data-subreddit')}`;
	if (e.target.classList.contains('remove')) {
		removeWidget({
			basePath: thisBasePath
		});
		e.target.textContent = '+dashboard';
		e.target.classList.remove('remove');
	} else {
		addWidget({
			basePath: thisBasePath
		}, true);
		e.target.textContent = '-dashboard';
		notifications_showNotification({
			header: 'Dashboard Notification',
			moduleID: 'dashboard',
			message: `
				Dashboard widget added for ${thisBasePath}
				<p><a class="RESNotificationButtonBlue" href="/r/Dashboard">view the dashboard</a></p>
				<div class="clear"></div>
			`
		});
		e.target.classList.add('remove');
	}
}
// CONCATENATED MODULE: ./lib/modules/newCommentCount.js









const newCommentCount_module = new Module('newCommentCount');

newCommentCount_module.moduleName = 'newCommentCountName';
newCommentCount_module.category = 'submissionsCategory';
newCommentCount_module.description = 'newCommentCountDesc';
newCommentCount_module.options = {
	cleanComments: {
		type: 'text',
		value: '7',
		description: 'newCommentCountCleanCommentsDesc',
		title: 'newCommentCountCleanCommentsTitle'
	},
	subscriptionLength: {
		type: 'text',
		value: '2',
		description: 'newCommentCountSubscriptionLengthDesc',
		title: 'newCommentCountSubscriptionLengthTitle'
	},
	showSubscribeButton: {
		type: 'boolean',
		value: true,
		description: 'newCommentCountShowSubscribeButtonDesc',
		title: 'newCommentCountShowSubscribeButtonTitle'
	},
	notifyEditedPosts: {
		dependsOn: options => options.showSubscribeButton.value,
		type: 'boolean',
		value: false,
		description: 'newCommentCountNotifyEditedPostsDesc',
		title: 'newCommentCountNotifyEditedPostsTitle',
		advanced: true
	},
	monitorPostsVisited: {
		type: 'boolean',
		value: true,
		description: 'newCommentCountMonitorPostsVisitedDesc',
		title: 'newCommentCountMonitorPostsVisitedTitle',
		advanced: true
	},
	monitorPostsVisitedIncognito: {
		dependsOn: options => options.monitorPostsVisited.value,
		type: 'boolean',
		value: false,
		description: 'newCommentCountMonitorPostsVisitedIncognitoDesc',
		title: 'newCommentCountMonitorPostsVisitedIncognitoTitle',
		advanced: true
	}
};

const currentId = (execRegexes.comments(location.pathname) || [])[2];
const lastCleanStorage = storage_namespaceObject.wrap('RESmodules.newCommentCount.lastClean', 0);
const entryStorage = storage_namespaceObject.wrapPrefix('newCommentCount.', () => {
	throw new Error('Default value should never be retrieved');
});

const subscriptionStorage = storage_namespaceObject.wrapBlob('RESmodules.newCommentCount.subscriptions', () => {
	throw new Error('Subscription not found');
});

newCommentCount_module.beforeLoad = () => {
	updateToggleSubscriptionButton();

	watchForThings(['post'], displayNewCommentCount, { immediate: true });
};

newCommentCount_module.go = () => {
	if (isPageType('comments')) {
		watchForThings(['comment'], updateCurrentCommentCountFromMyComment);
		if (newCommentCount_module.options.showSubscribeButton.value) {
			getToggleSubscriptionButton().appendTo('.commentarea .panestack-title');
		}
	} else if (isCurrentSubreddit('dashboard')) {
		addDashboardFunctionality();
	}
};

newCommentCount_module.afterLoad = () => {
	if (!document.hidden) {
		checkSubscriptions();
	}

	if (isPageType('comments')) {
		updateCurrentEntry();
	}

	maybePruneOldEntries();
};

const getEntryBatched = batch(async ids => {
	const entries = await entryStorage.getMultipleNullable(ids);
	return ids.map(id => entries[id]);
}, { size: Infinity, delay: 0 });

function setEntry(id, newCommentCount) {
	if (!newCommentCount_module.options.monitorPostsVisited.value) return false;
	if (!newCommentCount_module.options.monitorPostsVisitedIncognito.value && isPrivateBrowsing()) return false;

	entryStorage.set(id, {
		count: newCommentCount,
		updateTime: Date.now()
	});
}

async function hasEntry(thing) {
	return !!(await getEntryBatched(thing.getFullname().split('_').slice(-1)[0]));
}

async function getNewCount(thing) {
	const currentCount = thing.getCommentCount();

	const countObj = await getEntryBatched(thing.getFullname().split('_').slice(-1)[0]);
	const lastOpenedCount = countObj && countObj.count;

	if (typeof currentCount !== 'number' || typeof lastOpenedCount !== 'number') return;

	return Math.max(currentCount - lastOpenedCount, 0);
}

async function displayNewCommentCount(thing) {
	const newCount = await getNewCount(thing);
	if (!newCount) return;

	thing.element.classList.add('res-hasNewComments');

	$(thing.getCommentCountElement()).append(`<span class="newComments">&nbsp;(${newCount} new)</span>`);
}

function getListingThing() {
	return Thing_Thing.checkedFrom(document.querySelector('#siteTable a.comments'));
}

function updateCurrentEntry() {
	if (!currentId) return;
	setEntry(currentId, getListingThing().getCommentCount());
}

function updateCurrentCommentCountFromMyComment(thing) {
	if (!currentId) return;

	const timestamp = thing.getTimestamp();
	const isRecent = timestamp && Date.now() - timestamp.getTime() < 10000;
	const isMine = loggedInUser() === thing.getAuthor();
	if (isRecent && isMine) {
		setEntry(currentId, getListingThing().getCommentCount() + 1);
	}
}

async function maybePruneOldEntries() {
	const now = Date.now();
	if (now - (await lastCleanStorage.get()) < 0.25 * DAY) return;
	lastCleanStorage.set(now);

	const keepTrackPeriod = DAY * parseInt(newCommentCount_module.options.cleanComments.value, 10);
	for (const [id, { updateTime }] of Object.entries((await entryStorage.getAll()))) {
		if (now - updateTime > keepTrackPeriod) {
			stopTracking(id);
		}
	}
}

const getToggleSubscriptionButton = once_default()(() => $('<span>', {
	id: 'REScommentSubToggle',
	class: 'RESSubscriptionButton',
	click: updateToggleSubscriptionButton
}));

const updateToggleSubscriptionButton = mutex(async () => {
	if (!currentId) throw new Error('No currentId');

	const $button = getToggleSubscriptionButton();
	const subscriptions = await subscriptionStorage.getAll();
	if (subscriptions.hasOwnProperty(currentId)) {
		$button.html('<span class="res-icon">&#xF038;</span> unsubscribe').attr('title', 'stop receiving notifications').addClass('unsubscribe');
		return waitForEvent($button.get(0), 'click').then(async () => {
			await unsubscribe(currentId);
			notifications_showNotification({
				notificationID: 'newCommentCountUnsubscribe',
				moduleID: 'newCommentCount',
				message: 'You are now unsubscribed from this thread.'
			}, 3000);
		});
	} else {
		$button.html('<span class="res-icon">&#xF03B;</span> subscribe').attr('title', 'notify me of new comments').removeClass('unsubscribe');
		return waitForEvent($button.get(0), 'click').then(async () => {
			const listingThing = getListingThing();
			await newCommentCount_subscribe(currentId, listingThing.getCommentCount(), listingThing.getPostEditTimestamp());
			notifications_showNotification({
				notificationID: 'newCommentCountSubscribe',
				moduleID: 'newCommentCount',
				optionKey: 'subscriptionLength',
				message: `
					<p>
						You are now subscribed to this thread for ${newCommentCount_module.options.subscriptionLength.value} days.
						When new comments are posted you'll receive a notification.
					</p>
					<p><a href="/r/Dashboard#newCommentsContents">Manage subscriptions</a></p>
				`
			}, 5000);
		});
	}
});

function newCommentCount_subscribe(id, newCommentCount, newEditedTime) {
	const now = Date.now();
	return subscriptionStorage.set(id, {
		count: newCommentCount,
		subscriptionDate: now,
		updateTime: now,
		editedTime: newEditedTime,
		url: location.href.replace(location.hash, ''),
		title: document.title
	});
}

function unsubscribe(id) {
	return subscriptionStorage.delete(id);
}

function stopTracking(id) {
	return entryStorage.delete(id);
}

async function checkSubscriptions() {
	const now = Date.now();

	for (const [id, subscription] of Object.entries((await subscriptionStorage.getAll()))) {
		const { subscriptionDate, updateTime } = subscription;

		if (now - subscriptionDate > DAY * parseInt(newCommentCount_module.options.subscriptionLength.value, 10)) {
			unsubscribe(id);
		} else if (now - updateTime > 5 * MINUTE) {
			subscriptionStorage.patch(id, { updateTime: now });
			checkThread(id, subscription);
		}
	}
}

async function checkThread(id, subscription) {
	const { num_comments: newCount, edited: newEditedTime } = await getPostMetadata({ id });
	const { count, editedTime, url, title } = subscription;

	if (newCount > count) {
		subscriptionStorage.patch(id, { count: newCount });

		const notification = await notifications_showNotification({
			header: 'New comments',
			notificationID: 'newCommentCount',
			moduleID: 'newCommentCount',
			noDisable: true,
			message: `<p><a href="${url}">${escapeHTML(title)}</a></p>`
		}, 10000);

		const { button, promise } = createButton(id, 'unsubscribe');
		promise.then(notification.close);
		$(notification.element).find('.RESNotificationContent').append(button);
	}
	if (newCommentCount_module.options.notifyEditedPosts.value && newEditedTime > editedTime) {
		subscriptionStorage.patch(id, { editedTime: newEditedTime });

		const notification = await notifications_showNotification({
			header: 'Post edited',
			notificationID: 'newCommentCount',
			moduleID: 'newCommentCount',
			optionKey: 'notifyEditedPosts',
			noDisable: true,
			message: `<p><a href="${url}">${escapeHTML(title)}</a></p>`
		}, 10000);

		const { button, promise } = createButton(id, 'unsubscribe');
		promise.then(notification.close);
		$(notification.element).find('.RESNotificationContent').append(button);
	}
}

function createButton(id, type) {
	const $button = $('<span class="RESSubscriptionButton">');
	let action;

	switch (type) {
		case 'unsubscribe':
			$button.html('<span class="res-icon">&#xF038;</span> unsubscribe').attr('title', 'stop receiving notifications').addClass('unsubscribe');
			action = () => unsubscribe(id);
			break;
		case 'renew':
			$button.html('<span class="res-icon">&#xF03B;</span> renew').attr('title', `renew for ${newCommentCount_module.options.subscriptionLength.value} days`);
			action = async () => {
				await subscriptionStorage.patch(id, { subscriptionDate: Date.now() });

				notifications_showNotification({
					notificationID: 'newCommentCountRenew',
					moduleID: 'newCommentCount',
					optionKey: 'subscriptionLength',
					message: `Subscription renewed for ${newCommentCount_module.options.subscriptionLength.value} days.`
				});
			};
			break;
		case 'delete':
			$button.html('<span class="res-icon">&#xF155;</span>').attr('title', 'delete from list').addClass('deleteIcon');
			action = async () => {
				const { title } = await subscriptionStorage.get(id);
				return alert_namespaceObject.open(`Are you sure you want to unsubscribe from post: "${title}"?`, { cancelable: true }).then(() => unsubscribe(id));
			};
			break;
		default:
			break;
	}

	return { button: $button.get(0), promise: waitForEvent($button.get(0), 'click').then(action) };
}

function addDashboardFunctionality() {
	const $tabPage = addTab('newCommentsContents', 'My Subscriptions', newCommentCount_module.moduleID);

	const $openOnReddit = $('<a href="#" id="openOnReddit">as reddit link listing</a>');
	$openOnReddit.click(event => {
		event.preventDefault();
		let url = 't3_';
		const $threads = $('#newCommentsTable tbody > tr');
		const ids = $threads.get().map(ele => ele.getAttribute('data-id'));
		const concatIds = ids.join(',t3_');
		url += concatIds;
		location.href = `/by_id/${url}`;
	});
	$tabPage.append($openOnReddit);
	const $thisTable = $('<table id="newCommentsTable" />');
	$thisTable.append('<thead><tr><th sort="" class="active">Submission</th><th sort="subreddit">Subreddit</th><th sort="updateTime">Last viewed</th><th sort="subscriptionDate">Expires in</th><th class="actions">Actions</th></tr></thead><tbody></tbody>');
	$tabPage.append($thisTable);
	$('#newCommentsTable thead th').click(function (e) {
		e.preventDefault();
		if ($(this).hasClass('actions')) {
			return false;
		}
		if ($(this).hasClass('active')) {
			$(this).toggleClass('descending');
		}
		$(this).addClass('active');
		$(this).siblings().removeClass('active').find('SPAN').remove();
		$(this).find('.sortAsc, .sortDesc').remove();
		if ($(e.target).hasClass('descending')) {
			$(this).append('<span class="sortDesc" />');
		} else {
			$(this).append('<span class="sortAsc" />');
		}
		drawSubscriptionsTable($(e.target).attr('sort'), $(e.target).hasClass('descending'));
	});
	drawSubscriptionsTable();
}

let currentSortMethod, isDescending;

async function drawSubscriptionsTable(sortMethod, descending) {
	currentSortMethod = sortMethod || currentSortMethod;
	isDescending = descending === undefined ? isDescending : !!descending;
	$('#newCommentsTable tbody').html('');
	const thisCounts = filterMap(Object.entries((await subscriptionStorage.getAll())), ([id, commentCount]) => {
		const match = new URL(commentCount.url).pathname.match(regexes.subreddit);
		if (match) {
			return [Object.assign({
				id,
				subreddit: match[1].toLowerCase()
			}, commentCount)];
		}
	});
	switch (currentSortMethod) {
		case 'subscriptionDate':
			thisCounts.sort((a, b) => a.subscriptionDate > b.subscriptionDate ? 1 : b.subscriptionDate > a.subscriptionDate ? -1 : 0);
			if (isDescending) thisCounts.reverse();
			break;
		case 'updateTime':
			thisCounts.sort((a, b) => a.updateTime > b.updateTime ? 1 : b.updateTime > a.updateTime ? -1 : 0);
			if (isDescending) thisCounts.reverse();
			break;
		case 'subreddit':
			thisCounts.sort((a, b) => a.subreddit > b.subreddit ? 1 : b.subreddit > a.subreddit ? -1 : 0);
			if (isDescending) thisCounts.reverse();
			break;
		default:
			thisCounts.sort((a, b) => a.title > b.title ? 1 : b.title > a.title ? -1 : 0);
			if (isDescending) thisCounts.reverse();
			break;
	}
	let rows = 0;
	for (const _ref of thisCounts) {
		const { subscriptionDate, updateTime, id, url, title, subreddit } = _ref;

		if (subscriptionDate) {
			const thisUpdateTime = new Date(updateTime);
			const now = new Date();

			const { button: thisTrashButton, promise: thisTrashPromise } = createButton(id, 'delete');
			thisTrashPromise.then(drawSubscriptionsTable);
			const { button: thisRenewButton, promise: thisRenewPromise } = createButton(id, 'renew');
			thisRenewPromise.then(drawSubscriptionsTable);
			const { button: thisUnsubButton, promise: thisUnsubPromise } = createButton(id, 'unsubscribe');
			thisUnsubPromise.then(drawSubscriptionsTable);

			const thisExpires = new Date(subscriptionDate + DAY * parseInt(newCommentCount_module.options.subscriptionLength.value, 10));
			const thisExpiresContent = `<abbr title="${formatDateTime(thisExpires)}">${formatDateDiff(now, thisExpires)}</abbr>`;

			const thisROW = `
				<tr data-id="${id}"><td><a href="${url}">${escapeHTML(title)}</a></td>
				<td><a href="/r/${subreddit}">/r/${subreddit}</a></td>
				<td><abbr title="${formatDateTime(thisUpdateTime)}">${formatDateDiff(thisUpdateTime)} ago</abbr></td>
				<td>${thisExpiresContent}</td><td></td></tr>
			`;

			const $thisROW = $(thisROW);

			$thisROW.find('td:last-of-type').append(thisTrashButton);
			$thisROW.find('td:last-of-type').append(thisRenewButton).append(' ');
			$thisROW.find('td:last-of-type').append(thisUnsubButton);

			$('#newCommentsTable tbody').append($thisROW);
			rows++;
		}
	}
	if (rows === 0) {
		$('#newCommentsTable tbody').append('<td colspan="5">You are currently not subscribed to any threads. To subscribe to a thread, click the "subscribe" button found near the top of the comments page.</td>');
		$('#openOnReddit').hide();
	} else {
		$('#openOnReddit').show();
	}
}
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/NewCommentCount.js







class NewCommentCount_NewCommentCount extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.trueText = `new comments ${prettyOperator(this.value.op)} ${this.value.val}`, this.falseText = `new comments ${prettyOperator(inverseOperator(this.value.op))} ${this.value.val}`, _temp;
	}

	static parseCriterion(input) {
		return { op: '>=', val: parseInt(input, 10) };
	}
	static async thingToCriterion(thing) {
		return String(((await hasEntry(thing)) ? await getNewCount(thing) : thing.getCommentCount()) || 0);
	}

	static get disabled() {
		return !modules_isRunning(newCommentCount_namespaceObject);
	}

	validator() {
		return parseInt(this.value.val, 10) >= 0;
	}

	async evaluate(thing) {
		const count = ((await hasEntry(thing)) ? await getNewCount(thing) : thing.getCommentCount()) || 0;
		return numericalCompare(this.value.op, count, this.value.val);
	}
}
NewCommentCount_NewCommentCount.text = 'New comment count';
NewCommentCount_NewCommentCount.defaultConditions = { op: '>', val: 0 };
NewCommentCount_NewCommentCount.fields = ['has ', { type: 'select', options: 'COMPARISON', id: 'op' }, ' ', { type: 'number', id: 'val' }, ' new comments since last opened'];
NewCommentCount_NewCommentCount.slow = 1;
NewCommentCount_NewCommentCount.unique = true;
NewCommentCount_NewCommentCount.pattern = 'integer';
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/CommentsOpened.js






class CommentsOpened_CommentsOpened extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.trueText = 'comments opened', this.falseText = ' comments opened', _temp;
	}

	async evaluate(thing) {
		if (await hasEntry(thing)) return true;

		const link = thing.getCommentsLink();
		return !!link && isURLVisited(link.href);
	}
}
CommentsOpened_CommentsOpened.text = 'Comments opened';
CommentsOpened_CommentsOpened.fields = ['comments page has been visited'];
CommentsOpened_CommentsOpened.slow = 2;
CommentsOpened_CommentsOpened.unique = true;
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/Domain.js




class Domain_Domain extends Case_Case {

	static parseCriterion(input) {
		return { patt: input };
	}
	static thingToCriterion(thing) {
		return thing.getPostDomain();
	}

	constructor({ patt, fullMatch = true }) {
		super(Case_Case.buildRegex(patt, { fullMatch }));
		this.trueText = `domain ${patt}`;
		this.falseText = ` domain ${patt}`;
	}

	evaluate(thing, values = [this.value]) {
		const domain = thing.getPostDomain();
		return !!domain && values.some(v => v.test(domain));
	}
}
Domain_Domain.text = 'Link domain name';
Domain_Domain.defaultConditions = { patt: '' };
Domain_Domain.fields = ['post links to the domain ', { type: 'text', id: 'patt' }];
Domain_Domain.reconcilable = true;
Domain_Domain.pattern = 'RegEx';
// EXTERNAL MODULE: ./node_modules/lodash/compact.js
var compact = __webpack_require__(16);
var compact_default = /*#__PURE__*/__webpack_require__.n(compact);

// EXTERNAL MODULE: ./node_modules/lodash/without.js
var without = __webpack_require__(61);
var without_default = /*#__PURE__*/__webpack_require__.n(without);

// EXTERNAL MODULE: ./node_modules/lodash/intersection.js
var intersection = __webpack_require__(269);
var intersection_default = /*#__PURE__*/__webpack_require__.n(intersection);

// EXTERNAL MODULE: ./node_modules/lodash/takeRight.js
var takeRight = __webpack_require__(268);
var takeRight_default = /*#__PURE__*/__webpack_require__.n(takeRight);

// EXTERNAL MODULE: ./node_modules/resize-observer-lite/lib/index.js
var lib = __webpack_require__(86);
var lib_default = /*#__PURE__*/__webpack_require__.n(lib);

// CONCATENATED MODULE: ./lib/core/host.js


class Host {

	constructor(moduleID, {
		name,
		domains,
		permissions,
		logo,
		landingPage,
		attribution = true,
		options,
		detect,
		handleLink
	}) {
		this.moduleID = moduleID;
		this.name = name;
		this.domains = domains;
		this.permissions = permissions;
		this.logo = logo;
		this.landingPage = landingPage;
		this.attribution = attribution;
		this.options = options;
		this.detect = detect;
		this.handleLink = handleLink;
	}
}
// EXTERNAL MODULE: ./node_modules/favico.js/favico.js
var favico = __webpack_require__(267);
var favico_default = /*#__PURE__*/__webpack_require__.n(favico);

// CONCATENATED MODULE: ./lib/modules/showImages/expando.js





const expando_expandos = new WeakMap();

const primaryExpandos = new Map();

class expando_Expando {

	static getEntryExpandoFrom(thing) {
		if (!thing) return null;

		const button = thing.entry.querySelector('.expando-button');
		if (!button) return null;

		let expando = expando_expandos.get(button);

		if (!expando) {
			const box = thing.entry.querySelector('.expando');

			const buttonPlaceholder = document.createElement('span');
			const boxPlaceholder = document.createElement('span');

			expando = {
				button,
				get open() {
					return button.classList.contains('expanded');
				},
				collapse() {
					if (this.open) this.toggle();
				},
				expand() {
					if (!this.open) this.toggle();
				},
				toggle() {
					click(button);
				},
				detach() {
					button.replaceWith(buttonPlaceholder);
					box.replaceWith(boxPlaceholder);
				},
				reattach() {
					buttonPlaceholder.replaceWith(button);
					boxPlaceholder.replaceWith(box);
				},
				types: ['native', button.classList.contains('selftext') ? 'selftext' : null].filter(v => v),
				ready: true
			};

			expando_expandos.set(button, expando);
		}

		return expando;
	}

	static getTextExpandosFrom(thing) {
		if (!thing) return [];
		const md = thing.entry.querySelector('.md');
		if (!md) return [];
		return filterMap(Array.from(md.querySelectorAll(expando_Expando.expandoSelector)), v => {
			const exp = expando_expandos.get(v);
			if (exp) return [exp];
		});
	}

	static getAllExpandosFrom(thing) {
		return compact_default()([...expando_Expando.getTextExpandosFrom(thing), expando_Expando.getEntryExpandoFrom(thing)]);
	}

	constructor(href, lock, unlock) {
		this.ready = false;
		this.open = false;
		this.expandWanted = false;
		this.expandCallbacks = [];
		this.types = [];
		this.buttonInfo = {
			title: 'Expando is not yet ready',
			mediaClass: ''
		};

		this.href = href;
		this.locked = !!lock;
		if (lock) lock.then(() => {
			this.locked = false;this.updateButton();
		});
		this.unlock = unlock;

		this.box = string_namespaceObject.html`
			<div hidden class="res-expando-box" style="min-height: 20px">
				<div class="res-expando-box-inner"></div>
			</div>
		`;
		this.button = document.createElement('a');
		this.updateButton();
	}

	onExpand(callback) {
		this.expandCallbacks.push(callback);
	}

	updateButton() {
		let { mediaClass, title } = this.buttonInfo;

		if (this.locked) {
			mediaClass = 'expando-button-requires-permission';
			title = 'Click to request required permissions';
		}

		this.button.className = ['expando-button toggleImage', mediaClass || 'expando-button-loading', this.open || this.expandWanted ? 'expanded' : 'collapsed collapsedExpando'].join(' ');

		this.button.title = title;

		if (this.ready && !this.isPrimary()) {
			this.button.classList.add('expando-button-duplicate');
			this.button.title += ' (duplicate link)';
		}
	}

	getPrimary() {
		return primaryExpandos.get(this.href);
	}

	isPrimary() {
		return this.getPrimary() === this;
	}

	setAsPrimary() {
		const lastPrimary = this.getPrimary();
		primaryExpandos.set(this.href, this);

		if (lastPrimary && lastPrimary !== this) {
			this.media = lastPrimary.media;
			lastPrimary.empty();
		}
	}

	initialize(options) {
		this.generateMedia = options.generateMedia;
		this.buttonInfo = options.buttonInfo;
		this.types = options.types;
		this.ready = true;

		if (!this.getPrimary()) this.setAsPrimary();

		if (this.expandWanted) this.expand();else this.updateButton();
	}

	toggle() {
		if (this.open) this.collapse();else this.expand();
	}

	expand() {
		this.setAsPrimary();

		if (!this.ready) {
			this.expandWanted = true;
			this.updateButton();
			return;
		}

		this.box.hidden = false;

		this.attachMedia();
		if (this.media) this.media.expand();

		this.open = true;
		this.expandWanted = false;
		this.updateButton();

		for (const callback of this.expandCallbacks) callback();
	}

	collapse() {
		this.box.hidden = true;

		this.open = false;
		this.expandWanted = false;
		this.updateButton();

		if (this.media) {
			this.media.collapse();
		}
	}

	attachMedia() {
		if (!this.generateMedia) throw new Error('Cannot attach media without `generateMedia`');
		this.media = this.media || this.generateMedia();
		this.box.firstElementChild.appendChild(this.media.element);
		if (this.media.onAttach) this.media.onAttach();
	}

	isAttached() {
		return document.body.contains(this.button) && document.body.contains(this.box);
	}

	destroy() {
		if (this.box) {
			this.box.remove();
			delete this.box;
		}
		if (this.button) {
			expando_expandos.delete(this.button);
			this.button.remove();
			delete this.button;
		}
		this.empty();
		if (primaryExpandos.get(this.href) === this) primaryExpandos.delete(this.href);
	}

	empty() {
		if (this.media) {
			this.media.element.remove();
			delete this.media;
		}
		if (this.button) {
			if (this.open) this.collapse();else this.updateButton();
		}
	}
}
expando_Expando.expandoSelector = '.expando-button, .search-expando-button';
// CONCATENATED MODULE: ./lib/modules/accountSwitcher.js













const accountSwitcher_module = new Module('accountSwitcher');

accountSwitcher_module.moduleName = 'accountSwitcherName';
accountSwitcher_module.category = 'myAccountCategory';
accountSwitcher_module.description = 'accountSwitcherDesc';
accountSwitcher_module.options = {
	keepLoggedIn: {
		type: 'boolean',
		value: false,
		description: 'accountSwitcherKeepLoggedInDesc',
		title: 'accountSwitcherKeepLoggedInTitle',
		keywords: ['remember']
	},
	accounts: {
		type: 'table',
		addRowText: 'accountSwitcherAddAccount',
		fields: [{
			key: 'username',
			name: 'accountSwitcherUsername',
			type: 'text'
		}, {
			key: 'password',
			name: 'accountSwitcherPassword',
			type: 'password'
		}, {
			key: '2fa',
			name: 'accountSwitcherRequiresOtp',
			type: 'boolean',
			value: false
		}],
		value: [],
		description: 'accountSwitcherAccountsDesc',
		title: 'accountSwitcherAccountsTitle'
	},
	updateOtherTabs: {
		type: 'boolean',
		description: 'accountSwitcherUpdateOtherTabsDesc',
		title: 'accountSwitcherUpdateOtherTabsTitle',
		value: true,
		advanced: true
	},
	reloadOtherTabs: {
		type: 'boolean',
		description: 'accountSwitcherReloadOtherTabsDesc',
		title: 'accountSwitcherReloadOtherTabsTitle',
		value: false,
		advanced: true
	},
	showCurrentUserName: {
		type: 'boolean',
		value: false,
		description: 'accountSwitcherShowCurrentUserNameDesc',
		title: 'accountSwitcherShowCurrentUserNameTitle',
		advanced: true
	},
	dropDownStyle: {
		type: 'enum',
		values: [{
			name: 'accountSwitcherSnoo',
			value: 'alien'
		}, {
			name: 'accountSwitcherSimpleArrow',
			value: 'arrow'
		}],
		value: 'alien',
		description: 'accountSwitcherDropDownStyleDesc',
		title: 'accountSwitcherDropDownStyleTitle',
		advanced: true,
		bodyClass: true
	},
	showUserDetails: {
		type: 'boolean',
		value: true,
		description: 'accountSwitcherShowUserDetailsDesc',
		title: 'accountSwitcherShowUserDetailsTitle',
		advanced: true
	},
	showKarma: {
		type: 'boolean',
		value: true,
		description: 'accountSwitcherShowKarmaDesc',
		title: 'accountSwitcherShowKarmaTitle',
		advanced: true,
		dependsOn: options => options.showUserDetails.value
	},
	showGold: {
		type: 'boolean',
		value: true,
		description: 'accountSwitcherShowGoldDesc',
		title: 'accountSwitcherShowGoldTitle',
		advanced: true,
		dependsOn: options => options.showUserDetails.value
	}
};

let userLink, $downArrow, $downArrowOverlay;

let $accountMenu;

accountSwitcher_module.go = () => {
	if (accountSwitcher_module.options.dropDownStyle.value === 'alien') {
		$downArrowOverlay = $('<span id="RESAccountSwitcherIconOverlay"></span>');
		$downArrow = $('<span id="RESAccountSwitcherIcon"></span>');
	} else {
		$downArrowOverlay = $('<span id="RESAccountSwitcherIconOverlay"><span class="downArrow"></span></span>');
		$downArrow = $('<span id="RESAccountSwitcherIcon"><span class="downArrow"></span></span>');
	}
	$downArrowOverlay.on('click', () => {
		toggleAccountMenu(false);
		manageAccounts();
	}).appendTo(document.body);

	$downArrow.on('click', () => {
		toggleAccountMenu(true);
	});

	userLink = document.querySelector('#header-bottom-right > span.user > a');
	if (userLink) {
		userLink.style.marginRight = '2px';
		$(userLink).after($downArrow);
	} else {
		addElement($downArrow, { order: 3 });
	}

	$accountMenu = $('<ul id="RESAccountSwitcherDropdown" class="RESDropdownList"></ul>');

	const dropdownTimer = debounce_default()(() => toggleAccountMenu(false), 1000);
	$accountMenu.add($downArrowOverlay).on('mouseenter', dropdownTimer.cancel).on('mouseleave', dropdownTimer);

	$accountMenu.on('click', '.accountName', function (e) {
		e.preventDefault();
		switchTo($.data(this, 'username'));
	});
	$accountMenu.on('click', '.addAccount', e => {
		e.preventDefault();
		toggleAccountMenu(false);
		manageAccounts();
	});

	const loggedIn = loggedInUser();

	const usernamesToDisplay = accountSwitcher_module.options.accounts.value.map(([username]) => username).filter(username => !loggedIn || username.toUpperCase() !== loggedIn.toUpperCase() || accountSwitcher_module.options.showCurrentUserName.value);

	for (const username of usernamesToDisplay) {
		const $accountLink = $('<li>', {
			class: 'accountName'
		});

		if (loggedIn && username.toUpperCase() === loggedIn.toUpperCase()) {
			$accountLink.addClass('active');
		}

		$accountLink.data('username', username).appendTo($accountMenu);
	}

	if (usernamesToDisplay.length) {
		populateUsers();
	}

	$('<li>', {
		class: 'addAccount',
		text: '+ add account'
	}).appendTo($accountMenu);

	$(document.body).append($accountMenu);

	registerCommand(/^sw$/, `sw [username] - ${i18n('accountSwitcherCliHelp')}`, (command, val) => {
		const found = findMatchingAccount(val, true);
		if (val && found) {
			return i18n('accountSwitcherCliSwitchToUsernamePrompt', found[0]);
		} else {
			return i18n('accountSwitcherCliSwitchToUsernamePrompt', '...');
		}
	}, (command, val) => {
		if (!val.length) {
			return i18n('accountSwitcherCliNoUsername');
		}

		const found = findMatchingAccount(val, true);

		if (found) {
			switchTo(found[0]);
		} else {
			manageAccounts();
		}
	});

	if (accountSwitcher_module.options.updateOtherTabs.value) {
		window.addEventListener('focus', _onFocus);
	}
};

function populateUsers() {
	$accountMenu.find('.accountName').each((index, ele) => populateUser(ele));
}

async function populateUser(container) {
	const username = $(container).data('username');

	if (!username) {
		return;
	}

	const $contents = $(document.createDocumentFragment());
	$contents.append(username);

	if (accountSwitcher_module.options.showUserDetails.value) {
		const { data: userInfo } = await getUserInfo(username).catch(e => {
			console.error('Error loading userinfo for', username, e);
			return { data: {} };
		});

		if (accountSwitcher_module.options.showKarma.value && userInfo.link_karma !== undefined) {
			const karma = $('<span>').safeHtml(`(${userInfo.link_karma} &middot; ${userInfo.comment_karma})`);
			$contents.append(karma);
		}

		if (accountSwitcher_module.options.showGold.value && userInfo.is_gold) {

			const $gilded = $('<span>', { class: 'gilded-icon' });
			if (userInfo.gold_expiration) {
				const today = new Date();
				const expDate = new Date(userInfo.gold_expiration * 1000);
				$gilded.attr('title', i18n('accountSwitcherGoldUntil', formatDate(expDate), formatDateDiff(today, expDate)));
			}

			$contents.append($gilded);
		}

		$contents.append($('<a>', { href: `/user/${username}`, class: 'res-icon linkIcon' }).on('click', e => e.stopPropagation()));
	}

	$(container).empty().append($contents);
}

function toggleAccountMenu(open) {
	if (open) {
		let thisHeight = 18;
		let thisX, thisY;
		if (!userLink) {
			const offset = $downArrow.offset();
			thisX = window.innerWidth - $accountMenu.outerWidth() - 15;
			thisY = offset.top;
		} else if ($accountMenu.css('position') !== 'fixed') {
			thisX = $(userLink).offset().left;
			thisY = $(userLink).offset().top;
		} else {
			thisX = $('#header-bottom-right').position().left + $(userLink).position().left;
			thisY = $(userLink).position().top;
			if (betteReddit_module.options.pinHeader.value === 'subanduser') {
				thisHeight += $('#sr-header-area').height();
			} else if (betteReddit_module.options.pinHeader.value === 'header') {
				thisHeight += $('#sr-header-area').height();
			}
		}
		$accountMenu.css({
			top: `${thisY + thisHeight}px`,
			left: `${thisX}px`
		});
		$accountMenu.show();
		thisX = $downArrow.offset().left;
		thisY = $downArrow.offset().top;
		$downArrowOverlay.css({
			top: `${thisY - 4}px`,
			left: `${thisX - 3}px`
		});

		$downArrowOverlay.show();
	} else {
		$accountMenu.hide();
		$downArrowOverlay.hide();
	}
}

function closeAccountMenu() {
	if (!$accountMenu) return;
	$accountMenu.hide();
}

function findMatchingAccount(username, partialMatch) {
	const accounts = accountSwitcher_module.options.accounts.value;
	const matched = accounts.find(([user]) => user.toUpperCase() === username.toUpperCase());

	if (matched || !partialMatch) {
		return matched;
	}

	return accounts.find(([user]) => user.toUpperCase().startsWith(username.toUpperCase()));
}

async function switchTo(user) {
	const account = findMatchingAccount(user);
	if (!account) return;
	const [username, storedPassword, requiresOtp] = account;

	const logoutPromise = isLoggedIn() && ajax({ method: 'POST', url: '/logout' });

	const password = storedPassword ? storedPassword : window.prompt(i18n('accountSwitcherPasswordPrompt', username));

	let otp;
	if (requiresOtp) {
		otp = {
			otp: window.prompt(i18n('accountSwitcherOptPrompt', username))
		};
	}

	await logoutPromise;

	const { success, jquery } = await ajax({
		method: 'POST',
		url: '/api/login',
		data: Object.assign({
			user: username,
			passwd: password
		}, otp, {
			rem: accountSwitcher_module.options.keepLoggedIn.value ? 'on' : 'off'
		}),
		type: 'json'
	}).catch(e => {
		notifications_showNotification({
			type: 'error',
			moduleID: 'accountSwitcher',
			message: i18n('accountSwitcherAccountSwitchError')
		});
		throw e;
	});

	if (success) {
		switchedAccount(username);
	} else {
		switchedAccount(false);

		const jqueryRpc = JSON.stringify(jquery);
		if (jqueryRpc.includes('PASSWORD')) {
			alert_namespaceObject.open(i18n('accountSwitcherLoginError', username), { cancelable: true }).then(manageAccounts);
		} else if (jqueryRpc.includes('RATELIMIT')) {
			alert_namespaceObject.open(i18n('accountSwitcherRateLimitError', username), { cancelable: true }).then(manageAccounts);
		} else {
			alert_namespaceObject.open(i18n('accountSwitcherUnknownError', username, jqueryRpc), { cancelable: true }).then(manageAccounts);
		}
	}
}

function switchedAccount(username) {
	if (accountSwitcher_module.options.updateOtherTabs.value) {
		switchedAccountElsewhere(username);
	}
	if (username) {
		reloadPage();
	}
}

let _usernameElsewhere;
let _notifiedSwitchedAccount = false;
let _switchedAccountMessage;

const switchedAccountElsewhere = multicast(username => {
	_usernameElsewhere = username;
	if (_switchedAccountMessage) {
		_switchedAccountMessage.close();
	}
	_switchedAccountMessage = undefined;
}, { name: 'switchedAccountElsewhere', local: false, crossContext: false });

async function _onFocus() {
	if (_usernameElsewhere === undefined) return;

	const currentUsername = (loggedInUser() || '').toLowerCase();
	if (currentUsername === (_usernameElsewhere || '').toLowerCase()) {
		_notifiedSwitchedAccount = false;
		return;
	}

	if (_notifiedSwitchedAccount) return;
	_notifiedSwitchedAccount = true;

	if (_switchedAccountMessage) {
		_switchedAccountMessage.close();
	}
	_switchedAccountMessage = await _notifySwitchedAccountElsewhere();
}

function _notifySwitchedAccountElsewhere() {
	const username = _usernameElsewhere;

	const hasDraft = Array.from(document.getElementsByTagName('textarea')).some(textarea => textarea.value);

	if (!hasDraft && accountSwitcher_module.options.reloadOtherTabs.value) {
		reloadPage();
		return;
	}

	let message = username ? i18n('accountSwitcherUserSwitched', username) : i18n('accountSwitcherLoggedOut');

	if (hasDraft) {
		message += ` ${i18n('accountSwitcherDraft', loggedInUser() || '')}`;
	}
	message += ` <p><a class="RESNotificationButtonBlue" href="${location.pathname}">${i18n('accountSwitcherReload')}</a></p>`;

	return notifications_showNotification({
		moduleID: 'accountSwitcher',
		optionKey: 'updateOtherTabs',
		message
	});
}

function manageAccounts() {
	loadSettingsPage(accountSwitcher_module.moduleID, 'accounts');
}

function reloadPage() {
	resetReturnToPage();
	location.reload();
}
// EXTERNAL MODULE: ./node_modules/lodash/uniqBy.js
var uniqBy = __webpack_require__(26);
var uniqBy_default = /*#__PURE__*/__webpack_require__.n(uniqBy);

// CONCATENATED MODULE: ./lib/modules/subredditManager.js













const subredditManager_module = new Module('subredditManager');

subredditManager_module.moduleName = 'subredditManName';
subredditManager_module.category = 'subredditsCategory';
subredditManager_module.description = 'subredditManDesc';
subredditManager_module.options = {
	subredditShortcut: {
		title: 'subredditManagerSubredditShortcutTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerSubredditShortcutDesc'
	},
	shortcutsPerAccount: {
		title: 'subredditManagerShortcutsPerAccountTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerShortcutsPerAccountDesc'
	},
	alwaysApplySuffixToMulti: {
		title: 'subredditManagerAlwaysApplySuffixToMultiTitle',
		type: 'boolean',
		value: false,
		description: 'subredditManagerAlwaysApplySuffixToMultiDesc'
	},
	dropdownEditButton: {
		title: 'subredditManagerDropdownEditButtonTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerDropdownEditButtonDesc'
	},
	enableSubredditFilter: {
		title: 'subredditManagerFilterListTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerFilterListDesc'
	},
	shortcutDropdownDelay: {
		title: 'subredditManagerShortcutDropdownDelayTitle',
		type: 'text',
		value: '200',
		description: 'subredditManagerShortcutDropdownDelayDesc'
	},
	shortcutEditDropdownDelay: {
		title: 'subredditManagerShortcutEditDropdownDelayTitle',
		dependsOn: options => options.dropdownEditButton.value,
		type: 'text',
		value: '3000',
		description: 'subredditManagerShortcutEditDropdownDelayDesc'
	},
	allowLowercase: {
		title: 'subredditManagerAllowLowercaseTitle',
		type: 'boolean',
		value: false,
		description: 'subredditManagerAllowLowercaseDesc',
		bodyClass: true
	},
	linkDashboard: {
		title: 'subredditManagerLinkDashboardTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLinkDashboardDesc'
	},
	linkAll: {
		title: 'subredditManagerLinkAllTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLinkAllDesc'
	},
	linkFront: {
		title: 'subredditManagerLinkFrontTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLinkFrontDesc'
	},
	linkPopular: {
		title: 'subredditManagerLinkPopularTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLinkPopularDesc'
	},
	linkProfilePosts: {
		title: 'subredditManagerLinkProfilePostsTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLinkProfilePostsDesc'
	},
	linkRandom: {
		title: 'subredditManagerLinkRandomTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLinkRandomDesc'
	},
	linkMyRandom: {
		title: 'subredditManagerLinkMyRandomTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLinkMyRandomDesc'
	},
	linkRandNSFW: {
		title: 'subredditManagerLinkRandNSFWTitle',
		type: 'boolean',
		value: false,
		description: 'subredditManagerLinkRandNSFWDesc'
	},
	linkUsers: {
		title: 'subredditManagerLinkUsersTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLinkUsersDesc'
	},
	linkFriends: {
		title: 'subredditManagerLinkFriendsTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLinkFriendsDesc'
	},
	linkMod: {
		title: 'subredditManagerLinkModTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLinkModDesc'
	},
	linkModqueue: {
		title: 'subredditManagerLinkModqueueTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLinkModqueueDesc'
	},
	linkSaved: {
		title: 'subredditManagerLinkSavedTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLinkSavedDesc'
	},
	buttonEdit: {
		title: 'subredditManagerButtonEditTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerButtonEditDesc'
	},
	lastUpdate: {
		title: 'subredditManagerLastUpdateTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerLastUpdateDesc'
	},
	storeSubredditVisit: {
		title: 'subredditManagerStoreSubredditVisitTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerStoreSubredditVisitDesc',
		advanced: true
	},
	storeSubredditVisitIncognito: {
		title: 'subredditManagerStoreSubredditVisitIncognitoTitle',
		dependsOn: options => options.storeSubredditVisit.value,
		type: 'boolean',
		value: false,
		description: 'subredditManagerStoreSubredditVisitIncognitoDesc',
		advanced: true
	},
	dragDropDelete: {
		title: 'subredditManagerDragDropDeleteTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerDragDropDeleteDesc',
		advanced: true
	},
	displayMultiCounts: {
		title: 'subredditManagerDisplayMultiCountsTitle',
		type: 'boolean',
		value: true,
		description: 'subredditManagerDisplayMultiCountsDesc'
	}
};

let shortCutsContainer, $subredditGroupDropdown, subredditGroupDropdownUL, subredditGroupDropdownRefItem, $srList, $editShortcutDialog, deleteButton, $sortMenu, gettingSubreddits, subredditsLastViewed, sortShortcutsButton;

let mySubredditShortcuts = [];

const subredditsLastViewedStorage = storage_namespaceObject.wrap(() => `RESmodules.subredditManager.subredditsLastViewed.${loggedInUser() || 'null'}`, {});

const subredditShortcutsStorage = storage_namespaceObject.wrap(() => {
	const username = subredditManager_module.options.shortcutsPerAccount.value ? loggedInUser() : null;
	return `RESmodules.subredditManager.subredditShortcuts.${username || 'null'}`;
}, []);

subredditManager_module.beforeLoad = () => {
	if (/^\/(?:sub)?reddits\/?(?:\?[\w=&]+)*/.test(location.pathname)) {
		watchForThings(['subreddit'], browsingReddits);
	}
};

subredditManager_module.go = async () => {
	if (subredditManager_module.options.lastUpdate.value && document.getElementsByClassName('listing-chooser').length) {
		lastUpdate();
	}

	await getLatestShortcuts();

	manageSubreddits();

	const subreddit = currentSubreddit();
	if (subreddit) {
		setLastViewtime(subreddit);
	}
};

function manageSubreddits() {
	redrawSubredditBar();

	const subreddit = currentSubreddit();
	if (subreddit && subredditManager_module.options.subredditShortcut.value) {
		const subButtons = document.querySelectorAll('.side .fancy-toggle-button');
		for (const subButton of subButtons) {
			let thisSubredditFragment, isMulti;
			if (!subreddit.includes('+') && !isCurrentSubreddit('mod')) {
				thisSubredditFragment = subreddit;
				isMulti = false;
			} else if ($(subButton).parent().hasClass('subButtons')) {
				thisSubredditFragment = $(subButton).parent().parent().find('a.title').text();
				isMulti = true;
			} else {
				thisSubredditFragment = $(subButton).next().text();
				isMulti = true;
			}
			if ($(`#subButtons-${thisSubredditFragment}`).length === 0) {
				const $subButtonsWrapper = $(`<div id="subButtons-${thisSubredditFragment}" class="subButtons"></div>`);
				$(subButton).wrap($subButtonsWrapper);
				getMultiCounts(thisSubredditFragment).then(multiCount => {
					$(subButton).append(multiCount);
				});

				if (isMulti) {
					const theWrap = $(subButton).parent();
					$(theWrap).appendTo($(theWrap).parent());
				}
			}
			subButton.addEventListener('click', () => {
				ajax.invalidate({
					url: '/subreddits/mine.json',
					query: {
						after: '',
						limit: 100,
						user: loggedInUser()
					}
				});
			});
			const theSC = document.createElement('span');
			theSC.setAttribute('class', 'res-fancy-toggle-button RESshortcut RESshortcutside');
			theSC.setAttribute('data-subreddit', thisSubredditFragment);
			const idx = mySubredditShortcuts.findIndex(shortcut => shortcut.subreddit.toLowerCase() === thisSubredditFragment.toLowerCase());
			if (idx !== -1) {
				theSC.textContent = '-shortcut';
				theSC.setAttribute('title', 'Remove this subreddit from your shortcut bar');
				theSC.classList.add('remove');
			} else {
				theSC.textContent = '+shortcut';
				theSC.setAttribute('title', 'Add this subreddit to your shortcut bar');
			}
			theSC.addEventListener('click', toggleSubredditShortcut);

			const $subButtons = $(`#subButtons-${thisSubredditFragment}`);
			$subButtons.append(theSC);
			const $next = $subButtons.next();
			if ($next.hasClass('title') && !$subButtons.hasClass('swapped')) {
				$subButtons.before($next);
				$subButtons.addClass('swapped');
			}
		}
	}
}

function browsingReddits(thing) {
	const titleElement = thing.getTitleElement();
	if (!titleElement) return;

	const subreddit = regexes.subreddit.exec(titleElement.pathname)[1];
	const $theSC = $('<span>').css({ 'margin-right': '0' }).addClass('res-fancy-toggle-button').data('subreddit', subreddit);
	const isShortcut = mySubredditShortcuts.some(shortcut => shortcut.subreddit === subreddit);

	if (isShortcut) {
		$theSC.attr('title', 'Remove this subreddit from your shortcut bar').text('-shortcut').addClass('remove');
	} else {
		$theSC.attr('title', 'Add this subreddit to your shortcut bar').text('+shortcut').removeClass('remove');
	}

	$theSC.on('click', toggleSubredditShortcut).appendTo(thing.element.querySelector('.midcol'));
}

let hideSubredditGroupDropdownTimer, showSubredditGroupDropdownTimer;

function redrawShortcuts() {
	shortCutsContainer.textContent = '';

	mySubredditShortcuts.forEach((shortcut, i) => {
		const thisShortCut = document.createElement('a');
		thisShortCut.setAttribute('draggable', 'true');
		thisShortCut.setAttribute('orderIndex', String(i));
		thisShortCut.setAttribute('data-subreddit', shortcut.subreddit);
		thisShortCut.classList.add('subbarlink');

		if (shortcut.subreddit.includes('+')) {
			const currentSub = (currentSubreddit() || '').toLowerCase().split('+').sort().join('+');
			const sortedSubs = shortcut.subreddit.toLowerCase().replace(/\?\+/g, '+').split('+').sort();
			for (const sub of sortedSubs) {
				if (isCurrentSubreddit(sub)) {
					thisShortCut.classList.add('RESShortcutsCurrentSub');
				}
			}
			if (currentSub === sortedSubs.join('+')) {
				thisShortCut.classList.add('RESShortcutsCurrentSub');
			}
		} else if (isCurrentSubreddit(shortcut.subreddit)) {
			thisShortCut.classList.add('RESShortcutsCurrentSub');
		}

		thisShortCut.setAttribute('href', `/r/${shortcut.subreddit.replace(/(?:\?\+.*|\?$)/, '')}`);
		thisShortCut.textContent = shortcut.displayName;
		thisShortCut.addEventListener('click', e => {
			if (e.button !== 0 || e.ctrlKey || e.metaKey || e.altKey || e.shiftKey) {
				return true;
			} else {
				e.preventDefault();
				followSubredditShortcut(e.target.href);
			}
		});

		thisShortCut.addEventListener('dblclick', e => {
			e.preventDefault();
			followSubredditShortcut.cancel();
			hideSubredditGroupDropdown();
			editSubredditShortcut(e.target, e);
		});

		thisShortCut.addEventListener('mouseover', e => {
			clearTimeout(hideSubredditGroupDropdownTimer);
			showSubredditGroupDropdown(e.target);
		});

		thisShortCut.addEventListener('mouseout', () => {
			clearTimeout(showSubredditGroupDropdownTimer);
			hideSubredditGroupDropdownTimer = setTimeout(() => hideSubredditGroupDropdown(), 500);
		});

		thisShortCut.addEventListener('dragstart', subredditDragStart);
		thisShortCut.addEventListener('dragenter', subredditDragEnter);
		thisShortCut.addEventListener('dragover', subredditDragOver);
		thisShortCut.addEventListener('dragleave', subredditDragLeave);
		thisShortCut.addEventListener('drop', subredditDrop);
		thisShortCut.addEventListener('dragend', subredditDragEnd);
		shortCutsContainer.appendChild(thisShortCut);

		if (i < mySubredditShortcuts.length - 1) {
			const sep = document.createElement('span');
			sep.setAttribute('class', 'separator');
			sep.textContent = '-';
			shortCutsContainer.appendChild(sep);
		}

		return shortcut;
	}, this);
	if (mySubredditShortcuts.length === 0) {
		shortCutsContainer.style.textTransform = 'none';
		shortCutsContainer.textContent = 'add shortcuts from the my subreddits menu at left or click the button by the subreddit name, drag and drop to sort';
	} else {
		shortCutsContainer.style.textTransform = '';
	}
}

function showSubredditGroupDropdown(obj) {
	let subreddits = [];
	let suffix = '';

	if (obj.getAttribute && obj.getAttribute('data-subreddit').includes('+')) {
		let cleanSubreddits = obj.getAttribute('data-subreddit');

		if (cleanSubreddits.indexOf('/') > cleanSubreddits.lastIndexOf('+') || subredditManager_module.options.alwaysApplySuffixToMulti.value) {
			let pos;
			if ((pos = cleanSubreddits.lastIndexOf('?')) > cleanSubreddits.lastIndexOf('+')) {
				suffix = cleanSubreddits.substr(pos);
				cleanSubreddits = cleanSubreddits.substr(0, pos);
			}
			if ((pos = cleanSubreddits.lastIndexOf('/')) > cleanSubreddits.lastIndexOf('+')) {
				suffix = cleanSubreddits.substr(pos) + suffix;
				cleanSubreddits = cleanSubreddits.substr(0, pos);
			}
		}
		subreddits = cleanSubreddits.replace(/\?\+/g, '+').split('+');
	}

	if (!(subreddits.length || subredditManager_module.options.dropdownEditButton.value)) {
		return;
	}

	let delay;

	if (subreddits.length) {
		delay = parseInt(subredditManager_module.options.shortcutDropdownDelay.value, 10);
	} else {
		delay = parseInt(subredditManager_module.options.shortcutEditDropdownDelay.value, 10);
	}

	clearTimeout(showSubredditGroupDropdownTimer);
	showSubredditGroupDropdownTimer = setTimeout(() => _showSubredditGroupDropdown(obj, subreddits, suffix), delay);
}

function _showSubredditGroupDropdown(obj, subreddits, suffix) {
	subredditGroupDropdownRefItem = obj;

	if (!$subredditGroupDropdown) {
		$subredditGroupDropdown = $('<div>', { id: 'RESSubredditGroupDropdown' });
		subredditGroupDropdownUL = document.createElement('ul');
		$subredditGroupDropdown.append(subredditGroupDropdownUL);

		if (subredditManager_module.options.dropdownEditButton.value) {
			$subredditGroupDropdown.append(`
				<div class="RESShortcutsEditButtons">
					<a href="#"  class="delete res-icon" title="delete">&#xF155;</a>
					<a href="#" class="edit res-icon" title="edit">&#xF139;</a>
				</div>
			`);
		}
		$subredditGroupDropdown.appendTo(document.body);

		$subredditGroupDropdown.on('mouseout', () => {
			hideSubredditGroupDropdownTimer = setTimeout(() => {
				hideSubredditGroupDropdown();
			}, 500);
		});

		$subredditGroupDropdown.on('mouseover', () => {
			clearTimeout(hideSubredditGroupDropdownTimer);
		});

		$subredditGroupDropdown.on('click', '.edit', e => {
			e.preventDefault();
			hideSubredditGroupDropdown();
			editSubredditShortcut(subredditGroupDropdownRefItem, e);
		});

		$subredditGroupDropdown.on('click', '.delete', e => {
			e.preventDefault();
			hideSubredditGroupDropdown();
			editSubredditShortcut(subredditGroupDropdownRefItem, e);
			deleteButton.click();
		});
	}

	$(subredditGroupDropdownUL).find('li:not(.RESShortcutsEditButtons)').remove();

	if (subreddits) {
		const $rows = subreddits.reduce(($collection, subreddit) => {
			const $thisLI = $(`<li><a href="/r/${subreddit}${suffix}">${subreddit}<span class="shortcutSuffix">${suffix}</span></a></li>`);
			if (isCurrentSubreddit(subreddit)) {
				$thisLI.addClass('RESShortcutsCurrentSub');
			}
			return $collection.add($thisLI);
		}, $());

		$(subredditGroupDropdownUL).prepend($rows);
	}

	const { left } = $(obj).offset();
	const { bottom } = document.querySelector('#sr-header-area').getBoundingClientRect();
	$subredditGroupDropdown.css({ top: `${bottom}px`, left: `${left}px` }).show();
}

function hideSubredditGroupDropdown() {
	hideSubredditGroupDropdownTimer = undefined;
	if ($subredditGroupDropdown) {
		$subredditGroupDropdown.hide();
	}
}

function editSubredditShortcut(ele, event) {
	const subreddit = ele.getAttribute('data-subreddit');

	const idx = mySubredditShortcuts.findIndex(shortcut => shortcut.subreddit === subreddit);

	if (!$editShortcutDialog) {
		$editShortcutDialog = $('<div>', { id: 'editShortcutDialog' }).appendTo(document.body);
	}

	const unsortable = !subreddit.includes('+');

	const thisForm = `
		<form name="editSubredditShortcut">
			<h3>Edit Shortcut</h3>
			<div id="editShortcutClose" class="RESCloseButton">&times;</div>
			<div class="RESFormItem">
				<label for="subreddit">Subreddit:</label>
				<div class="RESFieldItem">
					<input type="text" name="subreddit" value="${subreddit}" id="shortcut-subreddit" class="${unsortable ? 'unsortable' : ''}"><!-- no whitespace
					--><button type="submit" id="sortButton" title="Sort subreddits">A-Z</button>

					<div class="RESDescription">Put a + between subreddits to make a drop-down menu.<br/>Put ?+ to make subreddits after it only show in dropdown.</div>
				</div>
			</div>
			<div class="RESFormItem">
				<label for="displayName">Display Name:</label>
				<div class="RESFieldItem">
					<input type="text" name="displayName" value="${ele.textContent}" id="shortcut-displayname">
				</div>
			</div>
			<input type="hidden" name="idx" value="${idx}">
			<button type="button" name="shortcut-save" id="shortcut-save">save</button>
			<button type="button" name="shortcut-delete" id="shortcut-delete">delete</button>
		</form>
	`;
	$editShortcutDialog.html(thisForm);

	$editShortcutDialog.find('#shortcut-subreddit').on('keyup', throttle_default()(({ currentTarget: shortcut }) => {
		if (!shortcut.value.includes('+')) {
			shortcut.classList.add('unsortable');
		} else {
			shortcut.classList.remove('unsortable');
		}
	}, 500));
	const subredditInput = $editShortcutDialog.find('input[name=subreddit]').get(0);
	const displayNameInput = $editShortcutDialog.find('input[name=displayName]').get(0);

	$editShortcutDialog.find('FORM').on('submit', e => e.preventDefault());

	const saveButton = $editShortcutDialog.find('button[name=shortcut-save]').click(() => {
		const idx = $editShortcutDialog.find('input[name=idx]').val();
		const subreddit = $editShortcutDialog.find('input[name=subreddit]').val();
		const displayName = $editShortcutDialog.find('input[name=displayName]').val();

		saveSubredditShortcut(subreddit, displayName, idx);
		$editShortcutDialog.hide();
	}).get(0);

	deleteButton = $editShortcutDialog.find('button[name=shortcut-delete]').get(0);
	deleteButton.addEventListener('click', () => {
		const idx = $editShortcutDialog.find('input[name=idx]').val();

		if (confirm('Are you sure you want to delete this shortcut?')) {
			saveSubredditShortcut('', '', idx);
			$editShortcutDialog.hide();
		}
	});

	function sortSubmenu(e) {
		const inputEl = $editShortcutDialog.find('input[name=subreddit]').get(0);
		const currStr = inputEl.value;

		const ascArr = currStr.split('+');
		ascArr.sort();
		const ascStr = ascArr.join('+');

		const descArr = ascArr;
		descArr.reverse();
		const descStr = descArr.join('+');
		let btnTxt;
		if (e.target.type === 'submit') {
			inputEl.value = currStr === ascStr ? descStr : ascStr;
			btnTxt = currStr === ascStr ? 'A-Z' : 'Z-A';
		} else {
			btnTxt = currStr === ascStr ? 'Z-A' : 'A-Z';
		}
		$('#sortButton').text(btnTxt);
	}

	$editShortcutDialog.find('#sortButton').click(e => sortSubmenu(e));

	$editShortcutDialog.find('input[name=subreddit]').on('change', e => sortSubmenu(e));

	subredditInput.addEventListener('keydown', e => {
		if (e.key === NAMED_KEYS.Enter) {
			e.preventDefault();
			e.stopPropagation();
		}
	});
	subredditInput.addEventListener('keyup', e => {
		if (e.key === NAMED_KEYS.Escape) {
			$editShortcutDialog.hide().blur();
		} else if (e.key === NAMED_KEYS.Enter) {
			click(saveButton);
		}
	});
	displayNameInput.addEventListener('keyup', e => {
		if (e.key === NAMED_KEYS.Escape) {
			$editShortcutDialog.hide().blur();
		} else if (e.key === NAMED_KEYS.Enter) {
			click(saveButton);
		}
	});

	$editShortcutDialog.find('#editShortcutClose').click(() => {
		$editShortcutDialog.hide();
	});

	$editShortcutDialog.show();

	const thisLeft = Math.min(event.clientX, window.innerWidth - ($editShortcutDialog.get(0).offsetWidth + 20));
	$editShortcutDialog.css('left', `${thisLeft}px`);

	setTimeout(() => subredditInput.focus(), 200);
}

async function saveSubredditShortcut(subreddit, displayName, idx) {
	if (subreddit === '' || displayName === '') {
		subreddit = mySubredditShortcuts[idx].subreddit;
		await removeSubredditShortcut(subreddit);
	} else {
		mySubredditShortcuts[idx] = {
			subreddit,
			displayName,
			addedDate: Date.now()
		};

		saveLatestShortcuts();
	}

	redrawShortcuts();
	await populateSubredditDropdown();
}

const followSubredditShortcut = debounce_default()(url => {
	location.href = url;
}, 300);

let dragSrcEl, srDataTransfer;

function subredditDragStart(e) {
	followSubredditShortcut.cancel();

	this.style.opacity = '0.4';
	dragSrcEl = this;
	if (subredditManager_module.options.dragDropDelete.value) {
		addTrashBin(dragSrcEl);
	}

	e.dataTransfer.effectAllowed = 'move';

	srDataTransfer = `${this.getAttribute('orderIndex')},${$(this).data('subreddit')}`;
}

function subredditDragEnter() {
	this.classList.add('srOver');
	return false;
}

function subredditDragOver(e) {
	if (e.preventDefault) {
		e.preventDefault();
	}

	if ($subredditGroupDropdown) {
		$subredditGroupDropdown.hide();
	}

	e.dataTransfer.dropEffect = 'move';
	return false;
}

function subredditDragLeave() {
	this.classList.remove('srOver');
	return false;
}

function subredditDrop(e) {
	if (e.stopPropagation) {
		e.stopPropagation();
	}

	e.preventDefault();

	if (dragSrcEl !== this) {
		if (e.target.getAttribute('id') !== 'res-shortcut-trash') {
			const theData = srDataTransfer.split(',');
			const srcOrderIndex = parseInt(theData[0], 10);
			const srcSubreddit = mySubredditShortcuts[srcOrderIndex];
			const destOrderIndex = parseInt(this.getAttribute('orderIndex'), 10);
			const destSubreddit = mySubredditShortcuts[destOrderIndex];
			const rearranged = [];
			let rearrangedI = 0;

			mySubredditShortcuts.forEach((shortcut, i) => {
				if (i !== srcOrderIndex && i !== destOrderIndex) {
					rearranged[rearrangedI] = shortcut;
					rearrangedI++;
				} else if (i === destOrderIndex) {
					if (destOrderIndex > srcOrderIndex) {
						rearranged[rearrangedI] = destSubreddit;
						rearrangedI++;
						rearranged[rearrangedI] = srcSubreddit;
						rearrangedI++;
					} else {
						rearranged[rearrangedI] = srcSubreddit;
						rearrangedI++;
						rearranged[rearrangedI] = destSubreddit;
						rearrangedI++;
					}
				}
			});

			mySubredditShortcuts = rearranged;
			saveLatestShortcuts();

			redrawShortcuts();
		} else {
			const theData = srDataTransfer.split(',');
			const srcSubreddit = theData[1];
			removeSubredditShortcut(srcSubreddit);
		}
	}
	return false;
}

function subredditDragEnd() {
	this.style.opacity = '1';
	this.classList.remove('srOver');
	if (subredditManager_module.options.dragDropDelete.value) {
		removeTrashBin();
	}
	return false;
}

function redrawSubredditBar() {
	const originalShortcuts = Array.from(document.querySelectorAll('.sr-list a.choice'));
	let myRandomEnabled, myRandomGold;
	if (subredditManager_module.options.linkMyRandom.value) {
		const originalMyRandom = originalShortcuts.find(({ pathname }) => pathname === '/r/myrandom/');
		if (originalMyRandom) {
			myRandomEnabled = true;
			if (originalMyRandom.classList.contains('gold')) {
				myRandomGold = true;
			}
		}
	}
	let usersEnabled;
	if (subredditManager_module.options.linkUsers.value) {
		const originalUsers = originalShortcuts.find(({ pathname }) => pathname === '/users/');
		if (originalUsers) {
			usersEnabled = true;
		}
	}
	const originalFrontpage = originalShortcuts.find(({ pathname }) => pathname === '/');
	const originalPopular = originalShortcuts.find(({ pathname }) => pathname === '/r/popular/');
	const originalProfilePosts = originalShortcuts.find(({ pathname }) => pathname === '/r/profileposts/');

	const headerContents = document.querySelector('#sr-header-area');
	if (headerContents) {
		$(headerContents).html('');

		const $srLeftContainer = $('<div>', {
			id: 'srLeftContainer',
			class: 'sr-bar'
		});

		const $srDropdown = $('<div>', { id: 'srDropdown' });
		const $srDropdownContainer = $('<div>', {
			id: 'srDropdownContainer',
			html: '<a href="javascript:void 0">My Subreddits</a>',
			click: toggleSubredditDropdown
		});

		$srDropdown.append($srDropdownContainer);

		$srList = $('<table>', { id: 'srList' }).appendTo(document.body);

		$srLeftContainer.append($srDropdown);
		const sep = document.createElement('span');
		sep.setAttribute('class', 'srSep');
		sep.textContent = '|';
		$srLeftContainer.append(sep);

		const staticShortCutsContainer = document.createElement('div');
		staticShortCutsContainer.setAttribute('id', 'RESStaticShortcuts');

		$(staticShortCutsContainer).html('');
		const specialButtonSelected = {};
		const selectedShortcut = originalPopular && originalPopular.matches('.selected .choice') ? 'popular' : (currentSubreddit() || 'home').toLowerCase();
		specialButtonSelected[selectedShortcut] = 'RESShortcutsCurrentSub';

		let shortCutsHTML = '';

		if (subredditManager_module.options.linkDashboard.value) shortCutsHTML += `<span class="separator">-</span><a id="RESDashboardLink" class="subbarlink ${specialButtonSelected.dashboard}" href="/r/Dashboard/">Dashboard</a>`;
		if (subredditManager_module.options.linkFront.value && originalFrontpage) shortCutsHTML += `<span class="separator">-</span><a class="subbarlink ${specialButtonSelected.home}" href="/">${originalFrontpage.textContent}</a>`;
		if (subredditManager_module.options.linkPopular.value && originalPopular) shortCutsHTML += `<span class="separator">-</span><a class="subbarlink ${specialButtonSelected.popular}" href="/r/popular/">${originalPopular.textContent}</a>`;
		if (subredditManager_module.options.linkProfilePosts.value && originalProfilePosts) shortCutsHTML += `<span class="separator">-</span><a class="subbarlink ${specialButtonSelected.profileposts}" href="/r/profileposts/">${originalProfilePosts.textContent}</a>`;
		if (subredditManager_module.options.linkAll.value) shortCutsHTML += `<span class="separator">-</span><a class="subbarlink ${specialButtonSelected.all}" href="/r/all/">All</a>`;
		if (subredditManager_module.options.linkRandom.value) shortCutsHTML += '<span class="separator">-</span><a class="subbarlink" href="/r/random/">Random</a>';
		if (subredditManager_module.options.linkMyRandom.value && myRandomEnabled) shortCutsHTML += `<span class="separator">-</span><a class="subbarlink ${myRandomGold ? 'gold' : ''}" href="/r/myrandom/">MyRandom</a>`;
		if (subredditManager_module.options.linkUsers.value && usersEnabled) shortCutsHTML += '<span class="separator">-</span><a class="subbarlink" href="/users/">Users</a>';
		if (subredditManager_module.options.linkRandNSFW.value) shortCutsHTML += '<span class="separator over18">-</span><a class="subbarlink over18" href="/r/randnsfw/">RandNSFW</a>';

		if (loggedInUser()) {
			if (subredditManager_module.options.linkFriends.value) shortCutsHTML += `<span class="separator">-</span><a class="subbarlink ${specialButtonSelected.friends}" href="/r/friends/">Friends</a>`;

			if (isModeratorAnywhere()) {
				if (subredditManager_module.options.linkMod.value) shortCutsHTML += `<span class="separator">-</span><a class="subbarlink ${specialButtonSelected.mod}" href="/r/mod/">Mod</a>`;
				if (subredditManager_module.options.linkModqueue.value) shortCutsHTML += '<span class="separator">-</span><a class="subbarlink" href="/r/mod/about/modqueue">Modqueue</a>';
			}

			if (subredditManager_module.options.linkSaved.value) shortCutsHTML += '<span class="separator">-</span><a class="subbarlink" href="/user/me/saved">Saved</a>';
		}
		if (subredditManager_module.options.buttonEdit.value) shortCutsHTML += `<span class="separator">-</span>${makeUrlHashLink(subredditManager_module.moduleID, '', 'edit', 'subbarlink')}`;

		$(staticShortCutsContainer).append(shortCutsHTML);

		$srLeftContainer.append(staticShortCutsContainer);
		$srLeftContainer.append(sep);
		$srLeftContainer.appendTo(headerContents);

		const shortCutsViewport = document.createElement('div');
		shortCutsViewport.setAttribute('id', 'RESShortcutsViewport');
		headerContents.appendChild(shortCutsViewport);

		shortCutsContainer = document.createElement('div');
		shortCutsContainer.setAttribute('id', 'RESShortcuts');
		shortCutsContainer.setAttribute('class', 'sr-bar');
		shortCutsViewport.appendChild(shortCutsContainer);

		const shortCutsEditContainer = document.createElement('div');
		shortCutsEditContainer.setAttribute('id', 'RESShortcutsEditContainer');
		headerContents.appendChild(shortCutsEditContainer);

		sortShortcutsButton = document.createElement('div');
		sortShortcutsButton.setAttribute('id', 'RESShortcutsSort');
		sortShortcutsButton.setAttribute('title', 'sort subreddit shortcuts');
		sortShortcutsButton.textContent = '';
		sortShortcutsButton.addEventListener('click', showSortMenu);
		shortCutsEditContainer.appendChild(sortShortcutsButton);

		const shortCutsRight = document.createElement('div');
		shortCutsRight.setAttribute('id', 'RESShortcutsRight');
		shortCutsRight.textContent = '>';
		shortCutsRight.addEventListener('click', () => {
			const firstChild = shortCutsContainer.firstChild;
			let marginLeft = firstChild.style.marginLeft;
			marginLeft = parseInt(marginLeft.replace('px', ''), 10);

			if (isNaN(marginLeft)) marginLeft = 0;

			const shiftWidth = $('#RESShortcutsViewport').width() - 80;
			if (shortCutsContainer.offsetWidth > shiftWidth) {
				marginLeft -= shiftWidth;
				firstChild.style.marginLeft = `${marginLeft}px`;
			}
		});
		shortCutsEditContainer.appendChild(shortCutsRight);

		const $shortCutsAdd = $('<div>', {
			id: 'RESShortcutsAdd',
			class: 'res-icon',
			html: '&#xF139;',
			title: 'add shortcut'
		});

		const shortCutsAddFormContainer = document.createElement('div');
		shortCutsAddFormContainer.setAttribute('id', 'RESShortcutsAddFormContainer');
		shortCutsAddFormContainer.style.display = 'none';
		const thisForm = `
			<form id="shortCutsAddForm">
				<div><strong>Add Shortcut</strong></div>
				<div class="res-shortcuts-add-tip">Put a &plus; between subreddits to make a multireddit.</div>
				<div><label for="newShortcut">Subreddit:</label><input type="text" id="newShortcut"></div>
				<div><label for="displayName">Display Name:</label><input type="text" id="displayName"></div>
				<input type="submit" name="submit" value="add" id="addSubreddit">
				<div class="res-shortcuts-add-footer"><a href="/subreddits/">manage subscribed</a></div>
			</form>
		`;
		$(shortCutsAddFormContainer).html(thisForm);
		const shortCutsAddFormField = shortCutsAddFormContainer.querySelector('#newShortcut');
		const shortCutsAddFormFieldDisplayName = shortCutsAddFormContainer.querySelector('#displayName');

		shortCutsAddFormField.addEventListener('keyup', e => {
			if (e.key === NAMED_KEYS.Escape) {
				shortCutsAddFormContainer.style.display = 'none';
				shortCutsAddFormField.blur();
			}
		});

		shortCutsAddFormFieldDisplayName.addEventListener('keyup', e => {
			if (e.key === NAMED_KEYS.Escape) {
				shortCutsAddFormContainer.style.display = 'none';
				shortCutsAddFormFieldDisplayName.blur();
			}
		});

		const shortCutsAddForm = shortCutsAddFormContainer.querySelector('#shortCutsAddForm');
		shortCutsAddForm.addEventListener('submit', e => {
			e.preventDefault();
			let subreddit = shortCutsAddFormField.value;
			let displayname = shortCutsAddFormFieldDisplayName.value;
			if (displayname === '') displayname = subreddit;

			subreddit = subreddit.replace(/^\/?r\//i, '');

			shortCutsAddFormField.value = '';
			shortCutsAddFormFieldDisplayName.value = '';
			shortCutsAddFormContainer.style.display = 'none';

			if (subreddit) {
				addSubredditShortcut(subreddit, displayname);
			}
		});
		$shortCutsAdd.click(() => {
			if (shortCutsAddFormContainer.style.display === 'none') {
				shortCutsAddFormContainer.style.display = 'block';
				shortCutsAddFormField.focus();
			} else {
				shortCutsAddFormContainer.style.display = 'none';
				shortCutsAddFormField.blur();
			}
		});
		$shortCutsAdd.appendTo(shortCutsEditContainer);
		document.body.appendChild(shortCutsAddFormContainer);

		if (subredditManager_module.options.dragDropDelete.value) {
			const $trashOpenLink = $('<a>', {
				class: 'res-trash-open',
				href: '#',
				title: 'Choose which shortcuts to remove',
				html: '<span class="res-icon">&#xF155;</span> remove shortcuts...'
			});
			$('#RESShortcutsAddFormContainer .res-shortcuts-add-footer').prepend(' | ').prepend($trashOpenLink);
			$trashOpenLink.click(e => {
				e.preventDefault();
				addTrashBin();
			});
		}

		const shortCutsLeft = document.createElement('div');
		shortCutsLeft.setAttribute('id', 'RESShortcutsLeft');
		shortCutsLeft.textContent = '<';
		shortCutsLeft.addEventListener('click', () => {
			const firstChild = shortCutsContainer.firstChild;
			const containerMargin = parseInt(firstChild.style.marginLeft, 10) || 0;
			const shiftWidth = Math.floor($('#RESShortcutsViewport').width()) - 80;
			const marginLeft = containerMargin + shiftWidth;
			if (marginLeft <= 0) {
				firstChild.style.marginLeft = `${marginLeft}px`;
			}
		});
		shortCutsEditContainer.appendChild(shortCutsLeft);

		redrawShortcuts();
	}
}

const trashBin = once_default()(() => {
	const $title = $('<div>', { class: 'res-shortcut-trash-title' });

	const $trashZone = $('<div>', { id: 'res-shortcut-trash-zone', class: 'res-icon' });
	const shortCutsTrash = $trashZone.get(0);
	shortCutsTrash.addEventListener('dragenter', subredditDragEnter);
	shortCutsTrash.addEventListener('dragleave', subredditDragLeave);
	shortCutsTrash.addEventListener('dragover', subredditDragOver);
	shortCutsTrash.addEventListener('drop', subredditDrop);

	const $wrapper = $('<div>', { id: 'res-shortcut-trash' }).append($title, $trashZone, $('<div>', {
		id: 'res-dragDrop-tip',
		text: 'Did you know? You can arrange shortcuts by dragging them left & right along the top bar.'
	}));

	return {
		$wrapper,
		$trashZone,
		$title
	};
});

const $pageOverlay = once_default()(() => {
	const srHeaderArea = document.querySelector('#sr-header-area');

	return $('<div>', { id: 'res-trash-overlay' }).css({ top: `${srHeaderArea.offsetHeight}px` }).click(() => removeTrashBin());
});

function addTrashBin(shortcut) {
	if ($subredditGroupDropdown) {
		$subredditGroupDropdown.hide();
	}

	if (shortcut) {
		trashBin().$title.html(string_namespaceObject.escape`Drop here to delete shortcut <strong>${$(shortcut).text()}</strong>`);
	} else {
		trashBin().$title.text('Drag and drop shortcuts to delete them');
	}

	trashBin().$wrapper.appendTo(document.body).show();

	$pageOverlay().appendTo(document.body).show();
}

function removeTrashBin() {
	$pageOverlay().hide();
	trashBin().$wrapper.hide();
	trashBin().$trashZone.removeClass('srOver');
}

function showSortMenu() {
	if (!$sortMenu) {
		$sortMenu = $(`
			<div id="sort-menu" class="drop-choices">
				<p>&nbsp;sort by:</p>
				<a class="choice" data-field="displayName" href="javascript:void 0">display name</a>
				<a class="choice" data-field="addedDate" href="javascript:void 0">added date</a>
			</div>
		`);

		$($sortMenu).find('a').click(sortShortcuts);

		$(document.body).append($sortMenu);
	}

	if ($sortMenu.is(':visible')) {
		$sortMenu.hide();
		return;
	}
	const thisXY = $(sortShortcutsButton).offset();
	thisXY.left = thisXY.left - $sortMenu.width() + $(sortShortcutsButton).width();
	const thisHeight = $(sortShortcutsButton).height();

	$sortMenu.css({
		top: thisXY.top + thisHeight,
		left: thisXY.left
	}).show();
}

function hideSortMenu() {
	$($sortMenu).hide();
}

let currentSort;

function sortShortcuts() {
	hideSortMenu();

	const sortingField = $(this).data('field');
	const asc = !currentSort;

	currentSort = !currentSort;

	mySubredditShortcuts.sort((a, b) => {
		let aField = a[sortingField];
		let bField = b[sortingField];
		if (typeof aField === 'string' && typeof bField === 'string') {
			aField = aField.toLowerCase();
			bField = bField.toLowerCase();
		}

		if (aField === bField) {
			return 0;
		} else if (aField > bField) {
			return asc ? 1 : -1;
		} else {
			return asc ? -1 : 1;
		}
	});

	saveLatestShortcuts();

	redrawShortcuts();
}

let subredditPagesLoaded;

function toggleSubredditDropdown(e) {
	e.stopPropagation();
	if ($srList.css('display') === 'block') {
		$srList.css('display', 'none');
		document.body.removeEventListener('click', toggleSubredditDropdown);
	} else {
		const user = loggedInUser();
		if (user) {
			$srList.html('<tr><td width="360">Loading subreddits (may take a moment)...<div id="subredditPagesLoaded"></div></td></tr>');
			if (!subredditPagesLoaded) {
				subredditPagesLoaded = $srList.find('#subredditPagesLoaded').get(0);
			}
			$srList.css('display', 'block');
			getSubreddits(user);
		} else {
			$srList.html('<tr><td width="360">You must be logged in to load your own list of subreddits. <a style="display: inline; float: left;" href="/subreddits/">browse them all</a></td></tr>');
			$srList.css('display', 'block');
		}
		$srList.click(stopDropDownPropagation);
		document.body.addEventListener('click', toggleSubredditDropdown);
	}
}

function addFilterSearch(theBody) {
	const tableHead = document.createElement('thead');
	const tableRow = document.createElement('tr');
	const tableCol = document.createElement('td');
	const search = document.createElement('input');

	tableCol.setAttribute('colspan', '3');
	search.setAttribute('placeholder', i18n('subredditManagerFilterPlaceholder'));

	tableCol.appendChild(search);
	tableRow.appendChild(tableCol);
	tableHead.appendChild(tableRow);

	requestAnimationFrame(() => {
		search.focus();
	});

	search.addEventListener('keyup', () => {
		for (const row of theBody.children) {
			const subredditName = row.firstChild && row.firstChild.innerText ? row.firstChild.innerText.toLowerCase() : '';
			if (search.value === '' || subredditName.includes(search.value.toLowerCase())) {
				row.style.display = '';
			} else {
				row.style.display = 'none';
			}
		}
	});

	return tableHead;
}

function stopDropDownPropagation(e) {
	e.stopPropagation();
}

let mySubreddits = [];

async function getSubreddits(user) {
	if (gettingSubreddits) return;
	gettingSubreddits = true;

	mySubreddits = [];

	let after = '';
	let page = 0;

	do {
		const { data } = await ajax({
			url: '/subreddits/mine.json',
			query: {
				after,
				limit: 100,
				user },
			type: 'json',
			cacheFor: DAY
		});

		if (data && data.children) {
			subredditPagesLoaded.textContent = `Pages loaded: ${++page}`;

			const subreddits = data.children.map(({ data }) => data);
			mySubreddits.push(...subreddits);

			after = data.after;
		} else {
			populateSubredditDropdown(undefined, true);
			return;
		}
	} while (after);

	mySubreddits = uniqBy_default()(mySubreddits, sr => sr.display_name);

	mySubreddits.sort((a, b) => {
		const adisp = a.display_name.toLowerCase();
		const bdisp = b.display_name.toLowerCase();
		if (adisp > bdisp) return 1;
		if (adisp === bdisp) return 0;
		return -1;
	});

	gettingSubreddits = false;
	populateSubredditDropdown();
}

async function populateSubredditDropdown(sortBy = 'subreddit', badJSON) {
	$srList.html('');

	const tableHead = document.createElement('thead');
	const tableRow = document.createElement('tr');

	const srHeader = document.createElement('td');
	srHeader.addEventListener('click', () => {
		if (sortBy === 'subreddit') {
			populateSubredditDropdown('subredditDesc');
		} else {
			populateSubredditDropdown('subreddit');
		}
	});
	srHeader.textContent = 'subreddit';
	srHeader.setAttribute('width', '200');
	tableRow.appendChild(srHeader);

	const lvHeader = document.createElement('td');
	if (subredditManager_module.options.storeSubredditVisit.value) {
		lvHeader.addEventListener('click', () => {
			if (sortBy === 'lastVisited') {
				populateSubredditDropdown('lastVisitedAsc');
			} else {
				populateSubredditDropdown('lastVisited');
			}
		});
		lvHeader.textContent = 'Last Visited';
		lvHeader.setAttribute('width', '120');
		tableRow.appendChild(lvHeader);
	}

	const scHeader = document.createElement('td');
	$(scHeader).width(50);
	$(scHeader).html('<a style="float: right;" href="/subreddits/">View all &raquo;</a>');
	tableRow.appendChild(scHeader);

	const theBody = document.createElement('tbody');

	tableHead.appendChild(tableRow);
	if (subredditManager_module.options.enableSubredditFilter.value) {
		$srList.append(addFilterSearch(theBody));
	}
	$srList.append(tableHead);

	if (!badJSON) {
		if (typeof subredditsLastViewed === 'undefined') {
			subredditsLastViewed = await subredditsLastViewedStorage.get();
		}

		const sortableSubreddits = mySubreddits.slice();
		if (sortBy === 'lastVisited') {
			$(lvHeader).html('Last Visited <div class="sortAsc"></div>');
			srHeader.textContent = 'subreddit';

			sortableSubreddits.sort((a, b) => {
				const adisp = a.display_name.toLowerCase();
				const bdisp = b.display_name.toLowerCase();

				const alv = typeof subredditsLastViewed[adisp] === 'undefined' ? 0 : parseInt(subredditsLastViewed[adisp].last_visited, 10);
				const blv = typeof subredditsLastViewed[bdisp] === 'undefined' ? 0 : parseInt(subredditsLastViewed[bdisp].last_visited, 10);

				if (alv < blv) return 1;
				if (alv === blv) {
					if (adisp > bdisp) return 1;
					return -1;
				}
				return -1;
			});
		} else if (sortBy === 'lastVisitedAsc') {
			$(lvHeader).html('Last Visited <div class="sortDesc"></div>');
			srHeader.textContent = 'subreddit';

			sortableSubreddits.sort((a, b) => {
				const adisp = a.display_name.toLowerCase();
				const bdisp = b.display_name.toLowerCase();

				const alv = typeof subredditsLastViewed[adisp] === 'undefined' ? 0 : parseInt(subredditsLastViewed[adisp].last_visited, 10);
				const blv = typeof subredditsLastViewed[bdisp] === 'undefined' ? 0 : parseInt(subredditsLastViewed[bdisp].last_visited, 10);

				if (alv > blv) return 1;
				if (alv === blv) {
					if (adisp > bdisp) return 1;
					return -1;
				}
				return -1;
			});
		} else if (sortBy === 'subredditDesc') {
			lvHeader.textContent = 'Last Visited';
			$(srHeader).html('subreddit <div class="sortDesc"></div>');

			sortableSubreddits.sort((a, b) => {
				const adisp = a.display_name.toLowerCase();
				const bdisp = b.display_name.toLowerCase();

				if (adisp < bdisp) return 1;
				if (adisp === bdisp) return 0;
				return -1;
			});
		} else {
			lvHeader.textContent = 'Last Visited';
			$(srHeader).html('subreddit <div class="sortAsc"></div>');

			sortableSubreddits.sort((a, b) => {
				const adisp = a.display_name.toLowerCase();
				const bdisp = b.display_name.toLowerCase();

				if (adisp > bdisp) return 1;
				if (adisp === bdisp) return 0;
				return -1;
			});
		}
		for (const _ref of sortableSubreddits) {
			const { display_name: displayName, url } = _ref;

			let dateString = 'Never';
			let relativeDateString = '';
			const thisReddit = displayName.toLowerCase();
			if (subredditsLastViewed[thisReddit]) {
				const ts = parseInt(subredditsLastViewed[thisReddit].last_visited, 10);
				const dateVisited = new Date(ts);
				dateString = formatDate(dateVisited);
				relativeDateString = formatRelativeTime(dateVisited);
			}

			const theRow = document.createElement('tr');
			const theSR = document.createElement('td');
			$(theSR).html(string_namespaceObject.escape`<a href="${url}">${displayName}</a>`);
			theRow.appendChild(theSR);

			if (subredditManager_module.options.storeSubredditVisit.value) {
				const theLV = document.createElement('td');
				if (relativeDateString !== '') {
					theLV.textContent = relativeDateString;
					theLV.setAttribute('title', dateString);
				} else {
					theLV.textContent = dateString;
				}
				theLV.setAttribute('class', 'RESvisited');
				theRow.appendChild(theLV);
			}

			const theSC = document.createElement('td');
			theSC.setAttribute('class', 'RESshortcut');
			theSC.setAttribute('data-subreddit', displayName);

			const idx = mySubredditShortcuts.findIndex(shortcut => shortcut.subreddit === displayName);

			if (idx !== -1) {
				theSC.addEventListener('click', e => {
					if (e.stopPropagation) {
						e.stopPropagation();
					}

					const subreddit = $(e.target).attr('data-subreddit');
					removeSubredditShortcut(subreddit);
				});

				theSC.textContent = '-shortcut';
			} else {
				theSC.addEventListener('click', e => {
					if (e.stopPropagation) {
						e.stopPropagation();
					}

					const subreddit = $(e.target).attr('data-subreddit');
					addSubredditShortcut(subreddit);
				});

				theSC.textContent = '+shortcut';
			}

			theRow.appendChild(theSC);
			theBody.appendChild(theRow);
		}
	} else {
		const errorTD = document.createElement('td');
		errorTD.textContent = 'There was an error getting your subreddits. You may have third party cookies disabled by your browser. For this function to work, you\'ll need to add an exception for cookies from reddit.com';
		errorTD.setAttribute('colspan', '3');

		const errorRow = document.createElement('tr');
		errorRow.appendChild(errorTD);
		theBody.appendChild(errorRow);
	}

	$srList.append(theBody);
}

async function getMultiCounts(displayName) {
	if (!subredditManager_module.options.displayMultiCounts.value) return '';
	const user = loggedInUser();
	if (!user) return '';
	const multis = await ajax({
		url: `/api/multi/user/${user}`,
		type: 'json',
		cacheFor: DAY
	});
	const count = multis.filter(multi => multi.data.subreddits.some(sr => sr.name === displayName)).length;
	if (count) return string_namespaceObject.escape`<span class="multi-count" title="${i18n('subredditManagerMultiCountTitle', displayName, count)}">${count}</span>`;else return '';
}

function toggleSubredditShortcut(e) {
	e.stopPropagation();

	const isShortcut = mySubredditShortcuts.some(function (shortcut) {
		return shortcut.subreddit.toLowerCase() === $(this).attr('data-subreddit').toLowerCase();
	}, this);

	if (isShortcut) {
		removeSubredditShortcut($(this).attr('data-subreddit'));
		$(this).attr('title', 'Add this subreddit to your shortcut bar').text('+shortcut').removeClass('remove');
	} else {
		addSubredditShortcut($(this).attr('data-subreddit'));
		$(this).attr('title', 'Remove this subreddit from your shortcut bar').text('-shortcut').addClass('remove');
	}

	redrawShortcuts();
}

async function getLatestShortcuts() {
	mySubredditShortcuts = await subredditShortcutsStorage.get();
}

function saveLatestShortcuts() {
	subredditShortcutsStorage.set(mySubredditShortcuts || []);
}

async function addSubredditShortcut(subreddit, displayname) {
	await getLatestShortcuts();

	const idx = mySubredditShortcuts.findIndex(shortcut => shortcut.subreddit.toLowerCase() === subreddit.toLowerCase());

	if (idx !== -1) {
		alert_namespaceObject.open('Whoops, you already have a shortcut for that subreddit');
	} else {
		displayname = displayname || subreddit;
		const subredditObj = {
			subreddit,
			displayName: displayname.toLowerCase(),
			addedDate: Date.now()
		};

		mySubredditShortcuts.push(subredditObj);

		saveLatestShortcuts();
		redrawShortcuts();
		await populateSubredditDropdown();

		notifications_showNotification({
			moduleID: 'subredditManager',
			message: 'Subreddit shortcut added. You can edit by double clicking the shortcut.'
		});
	}
}

async function removeSubredditShortcut(subreddit) {
	await getLatestShortcuts();

	const idx = mySubredditShortcuts.findIndex(shortcut => shortcut.subreddit.toLowerCase() === subreddit.toLowerCase());

	if (idx !== -1) {
		mySubredditShortcuts.splice(idx, 1);

		saveLatestShortcuts();
		redrawShortcuts();
		await populateSubredditDropdown();
	}
}

async function setLastViewtime(subreddit) {
	if (!subredditManager_module.options.storeSubredditVisit.value) return;
	if (!subredditManager_module.options.storeSubredditVisitIncognito.value && isPrivateBrowsing()) return;

	subredditsLastViewed = await subredditsLastViewedStorage.get();

	subredditsLastViewed[subreddit.toLowerCase()] = {
		last_visited: Date.now()
	};

	subredditsLastViewedStorage.set(subredditsLastViewed);
}

function subscribeToSubreddit(subredditName, subscribe = true) {
	return ajax({
		method: 'POST',
		url: '/api/subscribe',
		data: {
			sr: subredditName,
			action: subscribe ? 'sub' : 'unsub'
		}
	});
}

async function lastUpdate() {
	const mySubredditList = $('.drop-choices.srdrop a').map(function () {
		return this.textContent;
	}).toArray().join();
	const mySubredditListCachedObject = (await session_namespaceObject.get('RESmodules.subredditManager.mySubredditList')) || {};
	const mySubredditListCached = mySubredditListCachedObject[loggedInUser() || 'null'];
	let _lastUpdate;
	if (mySubredditListCached && mySubredditListCached.list === mySubredditList) {
		_lastUpdate = parseInt((new Date().getTime() - mySubredditListCached.time) / 60000, 10);
		if (_lastUpdate > 31) {
			_lastUpdate = false;
			mySubredditListCached.time = new Date().getTime() - 32 * 60000;
		} else {
			_lastUpdate += _lastUpdate > 1 ? ' minutes ago' : ' minute ago';
		}
	} else {
		mySubredditListCachedObject[loggedInUser() || 'null'] = {
			list: mySubredditList,
			time: new Date().getTime()
		};
		_lastUpdate = 'just now';
	}
	if (_lastUpdate !== false && mySubredditListCached) {
		$('.listing-chooser a:first .description').after(`<br /><span class="description"><b>last update:</b><br />${_lastUpdate}</span>`);
	}

	const inactiveThreshold = new Date().getTime() - 2592000000;
	for (const [user, cachedObject] of Object.entries(mySubredditListCachedObject)) {
		if (cachedObject.time < inactiveThreshold) {
			delete mySubredditListCachedObject[user];
		}
	}
	session_namespaceObject.set('RESmodules.subredditManager.mySubredditList', mySubredditListCachedObject);
}
// CONCATENATED MODULE: ./lib/modules/betteReddit.js













const betteReddit_module = new Module('betteReddit');

betteReddit_module.moduleName = 'betteRedditName';
betteReddit_module.category = 'appearanceCategory';
betteReddit_module.description = 'betteRedditDesc';
betteReddit_module.options = {
	commentsLinksNewTabs: {
		type: 'boolean',
		value: false,
		description: 'betteRedditCommentsLinksNewTabDesc',
		title: 'betteRedditCommentsLinksNewTabTitle'
	},
	fixHideLinks: {
		type: 'boolean',
		value: true,
		description: 'betteRedditFixHideLinksDesc',
		title: 'betteRedditFixHideLinksTitle'
	},
	hideLinkInstant: {
		type: 'boolean',
		value: false,
		description: 'betteRedditHideLinkInstantDesc',
		title: 'betteRedditHideLinkInstantTitle',
		dependsOn: options => options.fixHideLinks.value
	},
	hideLinkFadeDelay: {
		type: 'text',
		value: '5000',
		description: 'betteRedditHideLinkFadeDelayDesc',
		title: 'betteRedditHideLinkFadeDelayTitle',
		advanced: true,
		dependsOn: options => options.fixHideLinks.value && !options.hideLinkInstant.value
	},
	videoTimes: {
		type: 'boolean',
		value: true,
		description: 'betteRedditVideoTimesDesc',
		title: 'betteRedditVideoTimesTitle',
		advanced: true
	},
	videoUploaded: {
		type: 'boolean',
		value: false,
		description: 'betteRedditVideoUploadedDesc',
		title: 'betteRedditVideoUploadedTitle',
		advanced: true
	},
	videoViewed: {
		type: 'boolean',
		value: false,
		description: 'betteRedditVideoViewedDesc',
		title: 'betteRedditVideoViewedTitle',
		advanced: true
	},
	pinHeader: {
		type: 'enum',
		values: [{
			name: 'None',
			value: 'none'
		}, {
			name: 'Subreddit Bar only',
			value: 'sub'
		}, {
			name: 'User Bar',
			value: 'userbar'
		}, {
			name: 'Subreddit Bar and User bar',
			value: 'subanduser'
		}, {
			name: 'Full Header',
			value: 'header'
		}],
		value: 'none',
		description: 'betteRedditPinHeaderDesc',
		title: 'betteRedditPinHeaderTitle',
		bodyClass: 'pinHeader'
	},
	showLastEditedTimestamp: {
		type: 'boolean',
		value: true,
		description: 'betteRedditShowLastEditedTimestampDesc',
		title: 'betteRedditShowLastEditedTimestampTitle',
		bodyClass: true
	},
	scoreHiddenTimeLeft: {
		type: 'boolean',
		value: true,
		description: 'betteRedditScoreHiddenTimeLeftDesc',
		title: 'betteRedditScoreHiddenTimeLeftTitle'
	},
	showTimestampPosts: {
		type: 'boolean',
		value: false,
		description: 'betteRedditShowTimestampPostsDesc',
		title: 'betteRedditShowTimestampPostsTitle',
		bodyClass: true
	},
	showTimestampComments: {
		type: 'boolean',
		value: false,
		description: 'betteRedditShowTimestampCommentsDesc',
		title: 'betteRedditShowTimestampCommentsTitle',
		bodyClass: true
	},
	showTimestampSidebar: {
		type: 'boolean',
		value: false,
		description: 'betteRedditShowTimestampSidebarDesc',
		title: 'betteRedditShowTimestampSidebarTitle',
		bodyClass: true
	},
	showTimestampWiki: {
		type: 'boolean',
		value: false,
		description: 'betteRedditShowTimestampWikiDesc',
		title: 'betteRedditShowTimestampWikiTitle',
		bodyClass: true
	},
	showTimestampModerationLog: {
		type: 'boolean',
		value: false,
		description: 'betteRedditShowTimestampModerationLogDesc',
		title: 'betteRedditShowTimestampModerationLogTitle',
		bodyClass: true
	},
	restoreSavedTab: {
		type: 'boolean',
		value: false,
		description: 'betteRedditRestoreSavedTabDesc',
		title: 'betteRedditRestoreSavedTabTitle'
	},
	doNoCtrlF: {
		type: 'boolean',
		value: false,
		description: 'betteRedditDoNoCtrlFDesc',
		title: 'betteRedditDoNoCtrlFTitle'
	},
	showHiddenSortOptions: {
		type: 'boolean',
		value: false,
		description: 'betteRedditShowHiddenSortOptionsDesc',
		title: 'betteRedditShowHiddenSortOptionsTitle',
		bodyClass: true
	},
	truncateLongLinks: {
		type: 'boolean',
		value: false,
		description: 'betteRedditTruncateLongLinksDesc',
		title: 'betteRedditTruncateLongLinksTitle',
		bodyClass: true
	},
	commentCollapseInInbox: {
		type: 'boolean',
		value: false,
		description: 'betteRedditCommentCollapseInInboxDesc',
		title: 'betteRedditCommentCollapseInInboxTitle',
		bodyClass: true
	}
};

betteReddit_module.exclude = ['d2x'];

betteReddit_module.beforeLoad = () => {
	if (betteReddit_module.options.commentsLinksNewTabs.value) {
		watchForElements(['newComments', 'siteTable'], '.thing div.md a', commentsLinksNewTabs);
	}

	if (betteReddit_module.options.fixHideLinks.value) {
		watchForThings(['post'], fixHideLinks);
	}

	if (betteReddit_module.options.doNoCtrlF.value) {
		watchForElements(['newComments', 'siteTable'], 'ul.flat-list.buttons li a, .side a.reddit-comment-link', applyNoCtrlF);
	}

	if (betteReddit_module.options.videoTimes.value) {
		watchForThings(['post'], getVideoTimes);
	}

	switch (betteReddit_module.options.pinHeader.value) {
		case 'userbar':
			_addHeaderId('header-bottom-right', true);
			break;
		case 'sub':
			_addHeaderId('sr-header-area');
			break;
		case 'subanduser':
			_addHeaderId('sr-header-area');
			_addHeaderId('header-bottom-right', true);
			break;
		case 'header':
			_addHeaderId('header');
			break;
		case 'none':
		default:
			break;
	}
};

betteReddit_module.go = () => {
	if (betteReddit_module.options.scoreHiddenTimeLeft.value && isPageType('comments', 'commentsLinklist')) {
		$('.sitetable').on('mouseenter', '.score-hidden', function () {
			const timeNode = $(this).siblings('time').get(0);
			if (timeNode) {
				if (!this.getAttribute('title').includes('revealed')) {
					const scoreHiddenDuration = parseInt(this.getAttribute('title').match(/[0-9]+/)[0], 10);
					const postTime = new Date(timeNode.getAttribute('datetime')).getTime();
					const minutesLeft = Math.ceil((postTime + scoreHiddenDuration * 60000 - new Date().getTime()) / 60000);
					if (minutesLeft >= 1) {
						this.setAttribute('title', `score will be revealed in ${minutesLeft} minute${minutesLeft > 1 ? 's' : ''}`);
					} else {
						this.setAttribute('title', 'reload page to reveal score');
					}
				}
			}
		});
	}

	const user = loggedInUser();
	if (betteReddit_module.options.restoreSavedTab.value && user && document.querySelector('.with-listing-chooser:not(.profile-page)')) {
		restoreSavedTab(user);
	}

	switch (betteReddit_module.options.pinHeader.value) {
		case 'header':
			betteReddit_pinHeader();
			break;
		case 'sub':
			pinSubredditBar();
			break;
		case 'subanduser':
			pinSubredditBar();
			pinUserBar();
			break;
		case 'userbar':
			pinUserBar();
			break;
		default:
			break;
	}
};

function commentsLinksNewTabs(link) {
	const { baseURI, href } = link;
	if (href.includes(baseURI) && isSettingsUrl(href)) return;

	link.target = '_blank';
	link.rel = 'noopener noreferer';
}

function fixHideLinks(thing) {
	const hideLink = thing.getHideElement();
	if (!hideLink) return;

	$('<a>', {
		text: i18n(hideLink.dataset.eventAction === 'hide' ? 'betteRedditHideLinkLabel' : 'betteRedditUnhideLinkLabel'),
		action: hideLink.dataset.eventAction,
		href: '#',
		click: hideLinkEventHandler
	}).replaceAll(hideLink);
}

function hideLinkEventHandler(e) {
	e.preventDefault();
	betteReddit_hideLink(e.target);
}

const hideTimer = new Map();

function betteReddit_hideLink(clickedLink, action = clickedLink.getAttribute('action')) {
	const timeout = betteReddit_module.options.hideLinkInstant.value ? null : parseInt(betteReddit_module.options.hideLinkFadeDelay.value, 10);

	const thing = Thing_Thing.checkedFrom(clickedLink);

	if (action === 'hide') {
		const expando = expando_Expando.getEntryExpandoFrom(thing);
		if (expando && expando.types.includes('native')) expando.collapse();

		if (timeout === null) $(thing.element).hide();else hideTimer.set(clickedLink, setTimeout(() => $(thing.element).fadeOut(300), timeout));
	}

	try {
		if (action === 'hide') thingHide_hide(thing);else unhide(thing);
	} catch (e) {
		alert_namespaceObject.open(i18n(action === 'hide' ? 'betteRedditHideSubmissionError' : 'betteRedditUnhideSubmissionError'));
		clearTimeout(hideTimer.get(clickedLink));
		$(thing.element).show();
		throw e;
	}
}

async function getVideoTimes(thing) {
	const element = thing.element.querySelector('a.title[href*="youtube.com"], a.title[href*="youtu.be"]');
	if (!element) return;
	const link = downcast(element, HTMLAnchorElement);

	const titleHasTimeRegex = /[\[|\(][0-9]*:[0-9]*[\]|\)]/;
	const getYoutubeIDRegex = /\/?[&|\?]?v\/?=?([\w\-]{11})&?/i;
	const getShortenedYoutubeIDRegex = /([\w\-]{11})&?/i;
	const getYoutubeStartTimeRegex = /\/?[&|\?]?(?:t|time_continue)=([\w\-][a-z0-9]*)/i;

	const isShortened = /youtu\.be/i.test(link.href);

	const match = isShortened ? getShortenedYoutubeIDRegex.exec(link.href) : getYoutubeIDRegex.exec(link.href);

	if (!match) return;

	const timeMatch = getYoutubeStartTimeRegex.exec(link.href);
	const titleMatch = titleHasTimeRegex.test(link.textContent);

	let startTime;
	if (timeMatch && !titleMatch) {
		const seconds = fromYoutubeTimecodeToSeconds(timeMatch[1]);
		startTime = fromSecondsToTime(seconds);
	}

	const { info, duration, title } = await getVideoInfo(match[1]);

	requestAnimationFrame(() => {
		if (info.length) link.textContent += ` - ${info.join(' ')}`;
		link.setAttribute('title', i18n('betteRedditVideoYouTubeTitle', title));

		const thumbnail = thing.element.querySelector('a.thumbnail');
		if (thumbnail) {
			thumbnail.appendChild(string_namespaceObject.html`<div class="duration-overlay">${duration}${startTime ? ` (@${startTime})` : ''}</div>`);
		}
	});
}

const getVideoInfo = batch(async videoIds => {
	const parts = ['id', 'contentDetails', 'snippet'];
	if (betteReddit_module.options.videoViewed.value) parts.push('statistics');

	const { items } = await ajax({
		url: 'https://www.googleapis.com/youtube/v3/videos',
		query: {
			id: videoIds.join(','),
			part: parts.join(','),
			key: 'AIzaSyB8ufxFN0GapU1hSzIbuOLfnFC0XzJousw'
		},
		type: 'json',
		cacheFor: DAY
	});

	const results = items.map(({ id, contentDetails, snippet, statistics }) => {
		const title = snippet.title;
		const rawDuration = contentDetails.duration;
		const duration = ['0'].concat(rawDuration.match(/^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/i).slice(1)).map(time => `0${time || 0}`.slice(-2)).filter((time, i, { length }) => +time !== 0 || i >= length - 2).join(':');

		const info = [];

		if (betteReddit_module.options.videoUploaded.value) {
			const uploaded = snippet.publishedAt;
			info.push(`[${uploaded.match(/[^T]*/)}]`);
		}

		if (betteReddit_module.options.videoViewed.value) {
			const viewed = statistics.viewCount;
			info.push(i18n('betteRedditVideoViewed', viewed));
		}

		return { id, duration, info, title };
	});

	return videoIds.map(idFromBatch => results.find(({ id }) => id === idFromBatch));
}, { size: 50 });

function fromYoutubeTimecodeToSeconds(tc) {
	let timeSeconds = Number(tc);
	if (Number.isNaN(timeSeconds)) {
		const tcobj = tc.split(/(\d+[hms])/).filter(Boolean).reduce((acc, match) => {
			acc[match.slice(-1)] = Number(match.slice(0, -1));
			return acc;
		}, {});
		timeSeconds = (tcobj.h || 0) * 3600 + (tcobj.m || 0) * 60 + (tcobj.s || 0);
	}
	return timeSeconds;
}

function pinSubredditBar() {
	const sm = modules_isRunning(subredditManager_namespaceObject);

	const sb = document.getElementById('sr-header-area');
	if (!sb) {
		return;
	}
	const header = document.getElementById('header');

	const spacer = document.createElement('div');

	spacer.style.paddingTop = window.getComputedStyle(sb, null).paddingTop;
	spacer.style.paddingBottom = window.getComputedStyle(sb, null).paddingBottom;

	if (sm) {
		spacer.style.height = `${parseInt(window.getComputedStyle(sb, null).height, 10) / 3 - 3}px`;
	} else {
		spacer.style.height = window.getComputedStyle(sb, null).height;
	}

	header.insertBefore(spacer, sb);
	document.body.insertBefore(sb, header);

	addCSS(`
		#header-bottom-left {
			margin-top: 19px;
		}

		div#sr-header-area {
			position: fixed;
			z-index: 10000 !important;
			left: 0;
			right: 0;
		}
	`);
	pinCommonElements(sm);
}

function pinUserBar() {
	const header = document.getElementById('header-bottom-left');
	const userbar = document.getElementById('header-bottom-right');

	window.addEventListener('scroll', debounce_default()(() => {
		if (header.getBoundingClientRect().top > 0) {
			userbar.classList.remove('res-floating-userbar');
			if ($accountMenu) {
				$accountMenu.attr('style', 'position: absolute;');
			}
		} else {
			userbar.classList.add('res-floating-userbar');
			if ($accountMenu) {
				$accountMenu.attr('style', 'position: fixed;');
			}
		}
	}, 300));

	pinCommonElements();
}

function betteReddit_pinHeader() {
	const sm = modules_isRunning(subredditManager_namespaceObject);

	const header = document.getElementById('header');

	if (!header) {
		console.error('No element found with ID "header".');
		return;
	}

	const headerHeight = $('#header').outerHeight(true);

	addCSS(`
		#header,
		#RESAccountSwitcherDropdown {
			position: fixed;
		}
	`);
	pinCommonElements(sm);

	addCSS(`
		#header {
			top: 0;
			left: 0;
			right: 0;
			bottom: auto;
		}
	`);

	$('<div>', {
		id: 'RESPinnedHeaderSpacer',
		height: headerHeight
	}).insertBefore(header);
}

function pinCommonElements(sm) {
	if (sm) {
		addCSS(`
			#RESSubredditGroupDropdown,
			#srList,
			#RESShortcutsAddFormContainer,
			#editShortcutDialog {
				position: fixed !important;
			}
		`);
	} else {
		addCSS(`
			#sr-more-link {
				position: fixed;
			}
		`);
	}
}

function restoreSavedTab(user) {
	createElement_namespaceObject.tabMenuItem({
		text: 'saved'
	}).addEventListener('change', () => {
		location.href = `/user/${user}/saved/`;
	});
}

function applyNoCtrlF(element) {
	element.classList.add('noCtrlF');
	element.setAttribute('data-text', element.textContent);
	element.textContent = '';
}
// CONCATENATED MODULE: ./lib/modules/orangered.js











const orangered_module = new Module('orangered');

orangered_module.moduleName = 'orangeredName';
orangered_module.category = 'myAccountCategory';
orangered_module.description = 'orangeredDesc';

orangered_module.options = {
	openMailInNewTab: {
		description: 'orangeredOpenMailInNewTabDesc',
		title: 'orangeredOpenMailInNewTabTitle',
		type: 'boolean',
		value: false
	},
	updateCurrentTab: {
		description: 'orangeredUpdateCurrentTabDesc',
		title: 'orangeredUpdateCurrentTabTitle',
		type: 'boolean',
		value: true
	},
	updateOtherTabs: {
		description: 'orangeredUpdateOtherTabsDesc',
		keywords: ['favicon', 'sync'],
		title: 'orangeredUpdateOtherTabsTitle',
		type: 'boolean',
		value: true
	},
	showFloatingEnvelope: {
		description: 'orangeredShowFloatingEnvelopeDesc',
		title: 'orangeredShowFloatingEnvelopeTitle',
		type: 'boolean',
		value: true
	},
	retroUnreadCount: {
		description: 'orangeredRetroUnreadCountDesc',
		title: 'orangeredRetroUnreadCountTitle',
		type: 'boolean',
		value: false,
		bodyClass: true
	},
	showUnreadCountInTitle: {
		description: 'orangeredShowUnreadCountInTitleDesc',
		title: 'orangeredShowUnreadCountInTitleTitle',
		type: 'boolean',
		value: false
	},
	showUnreadCountInFavicon: {
		description: 'orangeredShowUnreadCountInFaviconDesc',
		title: 'orangeredShowUnreadCountInFaviconTitle',
		type: 'boolean',
		value: true
	},
	faviconUseLegacy: {
		description: 'faviconUseLegacyDesc',
		title: 'faviconUseLegacyTitle',
		type: 'boolean',
		value: false,
		dependsOn: options => options.showUnreadCountInFavicon.value
	},
	faviconNotificationBGColor: {
		description: 'faviconNotificationBGColorDesc',
		title: 'faviconNotificationBGColorTitle',
		advanced: true,
		type: 'color',
		value: '#5f99cf',
		dependsOn: options => options.showUnreadCountInFavicon.value
	},
	faviconNotificationTextColor: {
		description: 'faviconNotificationTextColorDesc',
		title: 'faviconNotificationTextColorTitle',
		advanced: true,
		type: 'color',
		value: '#FFFFFF',
		dependsOn: options => options.showUnreadCountInFavicon.value
	},
	resetFaviconOnLeave: {
		description: 'orangeredResetFaviconOnLeaveDesc',
		title: 'orangeredResetFaviconOnLeaveTitle',
		type: 'boolean',
		value: true,
		dependsOn: options => options.showUnreadCountInFavicon.value
	},
	unreadLinksToInbox: {
		description: 'orangeredUnreadLinksToInboxDesc',
		title: 'orangeredUnreadLinksToInboxTitle',
		type: 'boolean',
		value: false,
		advanced: true
	},
	hideEmptyMail: {
		description: 'orangeredHideEmptyMailDesc',
		title: 'orangeredHideEmptyMailTitle',
		type: 'boolean',
		value: false,
		bodyClass: true
	},
	hideModMail: {
		description: 'orangeredHideModMailDesc',
		title: 'orangeredHideModMailTitle',
		type: 'boolean',
		value: false,
		bodyClass: true
	},
	hideEmptyModMail: {
		description: 'orangeredHideEmptyModMailDesc',
		title: 'orangeredHideEmptyModMailTitle',
		type: 'boolean',
		value: false,
		bodyClass: true,
		dependsOn: options => !options.hideModMail.value
	},
	hideNewModMail: {
		description: 'orangeredHideNewModMailDesc',
		title: 'orangeredHideNewModMailTitle',
		type: 'boolean',
		value: false,
		bodyClass: true
	},
	hideEmptyNewModMail: {
		description: 'orangeredHideEmptyNewModMailDesc',
		title: 'orangeredHideEmptyNewModMailTitle',
		type: 'boolean',
		value: false,
		bodyClass: true,
		dependsOn: options => !options.hideNewModMail.value
	}
};

orangered_module.go = () => {
	if (!loggedInUser()) {
		return;
	}

	floatingButtons();
	if (orangered_module.options.openMailInNewTab.value) {
		$orangeredElements().attr('target', '_blank').attr('rel', 'noopener noreferer');
	}

	updateFromPage();
};

function updateFromPage(doc) {
	if (!orangered_module.options.updateCurrentTab.value) return;
	if (!loggedInUser()) return;
	setUnreadCount(getUnreadCount(doc));
}

const _setUnreadCount = multicast(count => {
	count = count || 0;

	updateFaviconBadge(count);
	updateTitle(count);
	updateInboxElements(count);
	updateMailCountElements(count);

	if (count > 0) {
		window.dispatchEvent(new Event('orangered'));
	}
}, { name: 'setUnreadCount', crossContext: false });

function setUnreadCount(count) {
	if (orangered_module.options.updateOtherTabs.value && typeof count !== 'undefined') {
		_setUnreadCount(count);
	} else {
		_setUnreadCount.local(count);
	}
}

function updateTitle(count) {
	if (!orangered_module.options.showUnreadCountInTitle.value) return;
	if (count > 0) {
		document.title = `[${count}] ${document.title.replace(/^\[[\d]+\]\s/, '')}`;
	} else {
		document.title = document.title.replace(/^\[[\d]+\]\s/, '');
	}
}

function updateInboxElements(count) {
	const { nativeInboxButton, $floatingInboxButton } = orangeredElements();

	$().add($floatingInboxButton).add(nativeInboxButton).attr('title', count ? 'new mail!' : 'No new mail').toggleClass('havemail', !!count).toggleClass('nohavemail', !count).attr('href', getInboxLink(count));
}

function updateMailCountElements(count) {
	const { nativeInboxCount, $floatingInboxCount } = orangeredElements();

	$().add($floatingInboxCount).add(nativeInboxCount).css('display', count ? 'inline-block' : 'none').attr('href', getInboxLink(count)).attr('title', count ? 'new mail!' : 'No new mail').text(count).addClass('message-count');
}

function updateFaviconBadge(count) {
	const favicon = setupFaviconBadge();

	if (!favicon) return;

	favicon.badge(count);
}

const setupFaviconBadge = once_default()(() => {
	if (!orangered_module.options.showUnreadCountInFavicon.value) return false;

	const favicons = Array.from(document.head.querySelectorAll('link[rel="icon"]'));
	const selectedFavicon = favicons.find(f => f.getAttribute('sizes') === '96x96') || last_default()(favicons);

	for (const f of favicons) {
		if (f !== selectedFavicon) f.remove();
	}

	if (orangered_module.options.faviconUseLegacy.value) {
		selectedFavicon.setAttribute('href', 'https://www.redditstatic.com/favicon.ico');
	}

	const favicon = new favico_default.a({
		bgColor: orangered_module.options.faviconNotificationBGColor.value,
		textColor: orangered_module.options.faviconNotificationTextColor.value
	});

	if (orangered_module.options.resetFaviconOnLeave.value) {
		window.addEventListener('beforeunload', () => favicon.reset());
	}

	return favicon;
});

const orangeredElements = () => Object.assign({}, nativeButtons(), floatingButtons(), {
	modmailButtonSelector: '#modmail'
});

const $orangeredElements = () => Object.values(orangeredElements()).reduce(($all, ele) => $all.add(ele), $());

const nativeButtons = once_default()(() => {
	const nativeInboxButton = document.querySelector('#header-bottom-right #mail');
	let nativeInboxCount = document.querySelector('#header-bottom-right .message-count');
	if (!nativeInboxCount && (orangered_module.options.updateCurrentTab.value || orangered_module.options.updateOtherTabs.value)) {
		nativeInboxCount = document.createElement('a');
		nativeInboxCount.style.display = 'none';
		$(nativeInboxButton).after(nativeInboxCount);
	}
	return { nativeInboxButton, nativeInboxCount };
});

const floatingButtons = once_default()(() => {
	if (!orangered_module.options.showFloatingEnvelope.value) return {};
	let $floatingInboxButton, $floatingInboxCount;

	const pinHeader = betteReddit_module.options.pinHeader.value;
	if (pinHeader === 'sub' || pinHeader === 'none') {
		$floatingInboxButton = $('<a>', { id: 'NREMail' });
		addElement($floatingInboxButton);

		$floatingInboxCount = $('<a>', { id: 'NREMailCount' });
		$floatingInboxCount.css('display', 'none');
		$floatingInboxCount.attr('href', getInboxLink(true));
		addElement($floatingInboxCount);
	}

	return { $floatingInboxButton, $floatingInboxCount };
});

function getInboxLink(havemail) {
	if (havemail && !orangered_module.options.unreadLinksToInbox.value) {
		return '/message/unread/';
	}

	return '/message/inbox/';
}
function getUnreadCount(container = document.body) {
	const mailCount = container.querySelector('.message-count');
	return mailCount && parseInt(mailCount.textContent, 10) || 0;
}
// CONCATENATED MODULE: ./lib/modules/neverEndingReddit.js















const neverEndingReddit_module = new Module('neverEndingReddit');

neverEndingReddit_module.moduleName = 'nerName';
neverEndingReddit_module.category = 'browsingCategory';
neverEndingReddit_module.description = 'nerDesc';
neverEndingReddit_module.options = {
	returnToPrevPage: {
		type: 'boolean',
		value: true,
		description: 'nerReturnToPrevPageDesc',
		title: 'nerReturnToPrevPageTitle'
	},
	autoLoad: {
		type: 'boolean',
		value: true,
		description: 'nerAutoLoadDesc',
		title: 'nerAutoLoadTitle'
	},
	pauseAfterEvery: {
		dependsOn: options => options.autoLoad.value,
		type: 'text',
		value: '0',
		description: 'nerPauseAfterEveryDesc',
		title: 'nerPauseAfterEveryTitle'
	},
	showPauseButton: {
		dependsOn: options => options.autoLoad.value,
		type: 'boolean',
		value: true,
		description: 'nerShowPauseButtonDesc',
		title: 'nerShowPauseButtonTitle'
	},
	reversePauseIcon: {
		dependsOn: options => options.autoLoad.value,
		type: 'boolean',
		value: false,
		description: 'nerReversePauseIconDesc',
		title: 'nerReversePauseIconTitle',
		advanced: true
	},
	hideDupes: {
		type: 'enum',
		value: 'hide',
		values: [{
			name: 'nerHideDupesHide',
			value: 'hide'
		}, {
			name: 'nerHideDupesFade',
			value: 'fade'
		}, {
			name: 'nerHideDupesDontHide',
			value: 'none'
		}],
		description: 'nerHideDupesDesc',
		title: 'nerHideDupesTitle',
		bodyClass: true
	},
	showServerInfo: {
		type: 'boolean',
		value: false,
		description: 'nerShowServerInfoDesc',
		title: 'nerShowServerInfoTitle',
		advanced: true,
		bodyClass: true
	}
};
neverEndingReddit_module.exclude = ['wiki', 'comments', 'd2x'];
neverEndingReddit_module.shouldRun = () => !isCurrentSubreddit('dashboard');

const dupeSet = new Set();
const neverEndingReddit_siteTable = once_default()(() => Thing_Thing.thingsContainer());
let currPage = 1;
let nextPageURL;
let $NREPause, isPaused, pauseReason, pauseAfterPages, nextPausePage;

let initAutoNextPage;
let loaderWidget;
let loadPromise;

const isPausedStorage = storage_namespaceObject.wrap('RESmodules.neverEndingReddit.isPaused', false);
const pauseReasonStorage = storage_namespaceObject.wrap('RESmodules.neverEndingReddit.pauseReason', null);

neverEndingReddit_module.beforeLoad = async () => {
	[isPaused, pauseReason] = await Promise.all([isPausedStorage.get(), pauseReasonStorage.get()]);

	if (neverEndingReddit_module.options.hideDupes.value !== 'none') {
		watchForElements(['siteTable'], '#siteTable div.link', handleDupes, { immediate: true });
	}

	if (neverEndingReddit_module.options.returnToPrevPage.value) initiateReturnToPrevPage();
};

neverEndingReddit_module.go = () => {

	if (!neverEndingReddit_siteTable()) return;

	try {
		const nextLink = getNextPrevLinks(neverEndingReddit_siteTable()).next;
		nextPageURL = nextPageURL || nextLink && nextLink.getAttribute('href');
	} catch (e) {}

	if (nextPageURL) neverEndingReddit_initiate();
};

function neverEndingReddit_initiate() {
	neverEndingReddit_siteTable().classList.add('res-ner-listing');

	attachLoaderWidget(buildLoaderWidget());

	if (neverEndingReddit_module.options.autoLoad.value) {
		if (neverEndingReddit_module.options.showPauseButton.value) {
			addPauseControls();
		}

		selectedEntry_addListener(selected => {
			if (!selected || isPaused) return;

			const things = Thing_Thing.visibleThingElements();
			const distanceFromBottom = things.length - (things.indexOf(selected.element) + 1);
			if (distanceFromBottom === 1) prefetchNextPage();else if (distanceFromBottom < 1) loadNextPage();
		});
	}
}

function addPauseControls() {
	$NREPause = $('<div>', {
		id: 'NREPause',
		title: 'Pause / Restart Never Ending Reddit',
		click: () => togglePause(!isPaused, 'manual', 'Never-Ending Reddit has been paused. Click the play/pause button to unpause it.')
	});

	if (neverEndingReddit_module.options.reversePauseIcon.value) $NREPause.addClass('reversePause');

	addElement($NREPause);

	pauseAfterPages = parseInt(neverEndingReddit_module.options.pauseAfterEvery.value, 10) || Infinity;

	togglePause(isPaused, pauseReason);
}

function togglePause(pause, source, pauseMessage) {
	isPaused = pause;
	pauseReason = source;

	if (isPaused) {
		isPausedStorage.set(isPaused);
		pauseReasonStorage.set(source);
	} else {
		isPausedStorage.delete();
		pauseReasonStorage.delete();
	}

	setLoaderWidgetActionText(loaderWidget);

	if (isPaused) {
		if ($NREPause) $NREPause.addClass('paused');
		if (pauseMessage) {
			notifications_showNotification({
				moduleID: neverEndingReddit_module.moduleID,
				notificationID: source || undefined,
				message: pauseMessage
			});
		}
	} else {
		nextPausePage = currPage + pauseAfterPages;

		if ($NREPause) $NREPause.removeClass('paused');
		if (initAutoNextPage) initAutoNextPage();
	}
}

const isNerUrl = () => /^#res:ner-page=\d+/.test(location.hash);

function resetReturnToPage() {
	if (!modules_isRunning(neverEndingReddit_module)) return;
	if (!neverEndingReddit_module.options.returnToPrevPage.value) return;
	setReturnToPage(null);
}

function setReturnToPage(selected) {
	let resRestorePage = 0;
	let resRestoreURL = null;
	let resRestoreHTML = null;
	let pageMarker;

	if (selected) {
		const $pageMarker = $(selected.element).closest('.sitetable, .search-result-listing').prev('.NERPageMarker');
		pageMarker = $pageMarker.get(0);
		if (pageMarker) ({ currPage: resRestorePage, nextPageURL: resRestoreURL, pageHTML: resRestoreHTML } = $pageMarker.data());
	}

	if (history.state && history.state.resRestorePage === resRestorePage) return;

	const allowAutoScroll = !pageMarker || document.querySelector('.NERPageMarker') === pageMarker;
	history.scrollRestoration = allowAutoScroll ? 'auto' : 'manual';

	history.replaceState(Object.assign({}, history.state, { resRestorePage, resRestoreURL, resRestoreHTML }), `${document.title}${resRestorePage ? `- page ${resRestorePage + 1}` : ''}`, resRestorePage ? `#res:ner-page=${resRestorePage + 1}` : `${location.pathname}${location.search}${isNerUrl() ? '' : location.hash}`);
}

function initiateReturnToPrevPage() {
	if (isNerUrl() && history.state && Number.isInteger(history.state.resRestorePage) && history.state.resRestoreHTML && history.state.resRestoreHTML.length) {
		let html;
		({ resRestorePage: currPage, resRestoreURL: nextPageURL, resRestoreHTML: html } = history.state);
		appendPage($(html).get(0));
	}

	selectedEntry_addListener(setReturnToPage, 'beforeScroll');
}

function pauseAfterPage() {
	if (currPage + 1 === nextPausePage) {
		const message = `
			    <p>Time for a break!</p>
			    <p>Never-Ending Reddit has been paused because you've passed ${pauseAfterPages} pages.</p>
			`;

		togglePause(true, 'pauseAfterEvery', message);
		return true;
	}
}

function handleDupes(element) {
	const id = Thing_Thing.checkedFrom(element).getFullname();

	if (dupeSet.has(id)) {
		if (neverEndingReddit_module.options.hideDupes.value === 'fade') {
			element.classList.add('NERdupe');
		} else if (neverEndingReddit_module.options.hideDupes.value === 'hide') {
			element.remove();
		}
	} else {
		dupeSet.add(id);
	}
}

function getNextPrevLinks(ele = document.body) {
	const $ele = $(ele);

	const links = {
		next: $ele.find('.nextprev a[rel~=next], ~ .nextprev a[rel~=next]')[0],
		prev: $ele.find('.nextprev a[rel~=prev], ~ .nextprev a[rel~=prev]')[0]
	};

	if (!links.next && !links.prev) throw new Error('Could not find any .nextprev links');
	return links;
}

function buildLoaderWidget() {
	const widget = document.createElement('div');
	setLoaderWidgetActionText(widget);
	widget.id = 'progressIndicator';
	widget.className = 'neverEndingReddit';

	widget.addEventListener('click', e => {
		if (e.target.tagName !== 'A') loadNextPage();
	});

	return widget;
}

function setLoaderWidgetActionText(widget) {
	$(widget).empty();
	$('<h2>Never Ending Reddit</h2>').appendTo(widget).append(makeUrlHashLink(neverEndingReddit_module.moduleID, undefined, ' ', 'gearIcon'));

	let text = 'Click to load the next page';
	if (neverEndingReddit_module.options.autoLoad.value && !isPaused) {
		text = 'scroll or click to load the next page';
	} else if (neverEndingReddit_module.options.autoLoad.value && isPaused) {
		text = 'click to load the next page; or click the "pause" button in the top right corner';
	}

	$('<p class="NERWidgetText" />').text(text).appendTo(widget);

	const nextpage = $('<a id="NERStaticLink">or open next page</a>').attr('href', nextPageURL || '').click(() => {
		loadPromise = true;
		if (pauseReason === 'pauseAfterEvery') togglePause(false);
	});

	$('<p class="NERWidgetText" />').append(nextpage).append('&nbsp;(and clear Never-Ending stream)').appendTo(widget);
}

function attachLoaderWidget(widget) {
	loaderWidget = widget;
	$(neverEndingReddit_siteTable()).after(widget);

	const prefetchIo = new IntersectionObserver(([{ isIntersecting }]) => {
		if (!isIntersecting) return;
		prefetchNextPage();
		prefetchIo.disconnect();
	}, { rootMargin: '100%' });
	prefetchIo.observe(widget);

	initAutoNextPage = once_default()(() => {
		const loadNextPageIo = new IntersectionObserver(([{ isIntersecting }]) => {
			if (!isIntersecting) return;
			loadNextPage();
			loadNextPageIo.disconnect();
		}, { threshold: [1] });
		loadNextPageIo.observe(widget);
	});

	if (neverEndingReddit_module.options.autoLoad.value && !isPaused && !pauseAfterPage()) initAutoNextPage();
}

const prefetchNextPage = memoize_default()(() => {
	if (nextPageURL) ajax({ url: nextPageURL, cacheFor: HOUR });
});

function loadNextPage(scrollToLoadWidget = false) {
	if (!nextPageURL) return;

	if (!loadPromise) {
		loadPromise = loadPage(nextPageURL).then(() => {
			loadPromise = null;
		});
	}

	if (scrollToLoadWidget) scrollToElement(loaderWidget, null, { scrollStyle: 'middle', direction: 'down' });

	return loadPromise;
}

async function loadPage(url) {
	const page = ajax({ url, cacheFor: HOUR });

	if (loaderWidget) {
		$(loaderWidget).html('<span class="RESLoadingSpinner"></span>');
	}

	const newLoaderWidget = buildLoaderWidget();

	try {
		const html = (await page).replace(/<style(.|\s)*?>|<link(.|\s)*?>|<script(.|\s)*?\/script>/g, '');

		const tempDiv = $('<div>').html(html).get(0);
		const username = loggedInUser();
		const tempUsername = documentLoggedInUser(tempDiv);
		if (tempUsername !== username) {
			throw new Error('page loaded was not for current user');
		}

		updateFromPage(tempDiv);

		try {
			const nextLink = getNextPrevLinks(tempDiv).next;
			nextPageURL = nextLink && nextLink.getAttribute('href');
		} catch (e) {
			const noresults = tempDiv.querySelector('#noresults');
			if (noresults) {
				return endNER(noresults.textContent);
			} else {
				throw Error('Could not find a link to the next page');
			}
		}

		const newSiteTable = Thing_Thing.thingsContainer(tempDiv);
		if (!newSiteTable) {
			throw Error('Could not find any siteTable');
		}

		const pageHTML = newSiteTable.outerHTML;
		await newSitetable(newSiteTable);
		await appendPage(newSiteTable, pageHTML);
	} catch (e) {
		endNER(`Could not load the next page: ${e.message}`);
		console.error(e);
	}

	if (loaderWidget) loaderWidget.remove();
	if (nextPageURL) attachLoaderWidget(newLoaderWidget);
}

const appendPage = fastAsync(function* (newSiteTable, pageHTML = newSiteTable.outerHTML) {
	const lastPageMarker = $('<div>', { class: 'NERPageMarker', text: `Page ${currPage + 1}` }).append(makeUrlHashLink(neverEndingReddit_module.moduleID, undefined, ' ', 'gearIcon')).data({ currPage, nextPageURL, pageHTML }).get(0);

	yield bodyReady;

	const firstLen = $(neverEndingReddit_siteTable()).find('.link:last .rank').text().length;
	const lastLen = $(newSiteTable).find('.link:last .rank').text().length;
	if (lastLen > firstLen) {
		addCSS(`body.res > .content .link .rank { width: ${(lastLen * 1.1).toFixed(1)}ex; }`);
	}

	neverEndingReddit_siteTable().appendChild(lastPageMarker);
	neverEndingReddit_siteTable().appendChild(newSiteTable);

	currPage++;

	if (!nextPageURL) endNER('No more pages');

	window.dispatchEvent(new Event('neverEndingLoad', { bubbles: true, cancelable: true }));
});

function endNER(text) {
	$('<div>', {
		class: 'NERPageMarker NERPageMarkerLast',
		text
	}).append(makeUrlHashLink(neverEndingReddit_module.moduleID, undefined, ' ', 'gearIcon')).append(`
			<p class="nextprev">
				<a href="${location.href.split('#')[0]}">start over</a>
				<a href="${nextPageURL || ''}">try again</a>
				<a target="_blank" rel="noopener noreferer" href="/r/Enhancement/wiki/faq/never_ending_reddit">learn more</a>
				<a href="/r/random">random subreddit</a>
			</p>
		`).appendTo(neverEndingReddit_siteTable());

	nextPageURL = null;
}
// CONCATENATED MODULE: ./lib/modules/showImages/templates.js





const audioTemplate = ({ loop, sources }) => string_namespaceObject.html`
	<div>
		<audio controls ${loop && 'loop'}>
			${sources.map(({ file, type }) => string_namespaceObject._html`
				<source src="${file}" type="${type}">
			`)}
		</audio>
	</div>
`;

const galleryTemplate = ({ title, caption, credits, src }) => string_namespaceObject.html`
	<div class="res-gallery">
		${title && string_namespaceObject._html`
		<h3 class="res-title res-gallery-title">${title}</h3>
		`}
		${caption && string_namespaceObject._html`
		<div class="res-caption res-gallery-caption">${string_namespaceObject.safe(caption)}</div>
		`}
		${credits && string_namespaceObject._html`
		<div class="res-credits">${string_namespaceObject.safe(credits)}</div>
		`}
		<div class="res-gallery-individual-controls">
			<div class="res-step res-gallery-previous"></div>
			<div class="res-step-progress">
				<span class="res-gallery-position">1</span> of ${src.length}
			</div>
			<div class="res-step res-step-reverse res-gallery-next"></div>
			<div class="res-gallery-to-filmstrip" title="View as filmstrip"></div>
		</div>
		<div class="res-gallery-pieces"></div>
		<div class="res-gallery-below">
			<div>
				<div class="res-expando-siteAttribution"></div>
				<div class="res-gallery-increase-concurrent"></div>
			</div>
		</div>
	</div>
`;

const imageTemplate = ({ title, caption, credits, src, href, openInNewWindow }) => string_namespaceObject.html`
	<div class="res-image">
		${title && string_namespaceObject._html`
		<h4 class="res-title">${title}</h4>
		`}
		${caption && string_namespaceObject._html`
		<div class="res-caption">${string_namespaceObject.safe(caption)}</div>
		`}
		${credits && string_namespaceObject._html`
		<div class="res-credits">${string_namespaceObject.safe(credits)}</div>
		`}
		<a class="res-expando-link noKeyNav" href="${href}" ${openInNewWindow && string_namespaceObject._html`target="_blank" rel="noopener noreferrer"`}>
			<img class="res-image-media" src="${src}">
		</a>
	</div>
`;

const iframeTemplate = ({ url, width, height }) => string_namespaceObject.html`
	<div class="res-iframe-expando">
		<div>
			<iframe src="${url}" style="width: ${width}; height: ${height}" allowFullscreen="true"></iframe>
			<div class="res-iframe-expando-drag-handle">
				<div class="res-icon"></div>
				<div class="res-expando-siteAttribution"></div>
			</div>
		</div>
	</div>
`;

const textTemplate = ({ title, credits, src }) => string_namespaceObject.html`
	<div class="res-text usertext-body">
		${title && string_namespaceObject._html`
		<h3 class="res-title">${title}</h3>
		`}
		<div class="res-text-media md">${string_namespaceObject.safe(src)}</div>
		${credits && string_namespaceObject._html`
		<div class="res-credits">${string_namespaceObject.safe(credits)}</div>
		`}
	</div>
`;

const videoAdvancedTemplate = ({
	title,
	caption,
	credits,
	href,
	source,
	poster,
	muted,
	loop,
	reversable,
	controls,
	advancedControls,
	formattedPlaybackRate,
	openInNewWindow
}) => string_namespaceObject.html`
	<div class="video-advanced">
		${title && string_namespaceObject._html`
		<h4 class="res-title">${title}</h4>
		`}
		${caption && string_namespaceObject._html`
		<div class="res-caption">${string_namespaceObject.safe(caption)}</div>
		`}
		${credits && string_namespaceObject._html`
		<div class="res-credits">${string_namespaceObject.safe(credits)}</div>
		`}
		<div class="video-advanced-container">
			${controls ? string_namespaceObject._html`
			<video controls ${muted && 'muted'} ${loop && 'loop'} poster="${poster}"></video>
			` : string_namespaceObject._html`
			<a class="noKeyNav" href="${href}" ${openInNewWindow && string_namespaceObject._html`target="_blank" rel="noopener noreferrer"`}>
				<video ${muted && 'muted'} ${loop && 'loop'} poster="${poster}"></video>
			</a>
			`}
			${advancedControls ? string_namespaceObject._html`
			<div class="video-advanced-interface ${controls && 'video-advanced-push-below'}">
				<div class="video-advanced-progress">
					<div class="video-advanced-position"></div>
					<div class="video-advanced-position-thumb"></div>
				</div>
				<div class="video-advanced-main">
					<div class="video-advanced-controls">
						<div title="Toggle pause" class="res-icon video-advanced-button video-advanced-toggle-pause"></div>
						${reversable && string_namespaceObject._html`
						<div title="Reverse video" class="res-icon video-advanced-button video-advanced-reverse"></div>
						`}
						<div class="video-advanced-controls-group video-advanced-current-time">
							<div title="Select previous frame" class="res-icon video-advanced-button video-advanced-time-decrease"></div>
							<div class="video-advanced-time">1.00s</div>
							<div title="Select next frame" class="res-icon video-advanced-button video-advanced-time-increase"></div>
						</div>
						<div class="video-advanced-controls-group video-advanced-playback-rate">
							<div title="Decrease speed by 10%" class="res-icon video-advanced-button video-advanced-speed-decrease"></div>
							<div class="video-advanced-speed">${string_namespaceObject.safe(formattedPlaybackRate)}</div>
							<div title="Increase speed by 10%" class="res-icon video-advanced-button video-advanced-speed-increase"></div>
						</div>
					</div>
					<div hidden class="video-advanced-error">
						<div class="res-icon">&#xf15b</div>
					</div>
					<div class="video-advanced-info">
						${source && string_namespaceObject._html`
						<a class="video-advanced-link video-advanced-source" href="${source}">source</a>
						`}
						<div class="res-expando-siteAttribution"></div>
					</div>
				</div>
			</div>
			` : string_namespaceObject._html`
			<div hidden class="video-advanced-error">
				<div class="res-icon">&#xf15b</div>
			</div>
			`}
		</div>
	</div>
`;

const mediaControlsTemplate = ({ x, y, downloadUrl, lookupUrl, clippy }) => string_namespaceObject.html`
	<div class="res-media-with-controls-wrapper">
		<div class="res-media-controls res-media-controls-${x} res-media-controls-${y}">
			<button class="res-icon gearIcon" title="Settings" data-action="showImageSettings"></button>
			<button class="res-media-controls-rotate res-media-controls-rotate-left res-icon" title="Rotate image counter-clockwise" data-action="rotateLeft"></button>
			<button class="res-media-controls-rotate res-media-controls-rotate-right res-icon" title="Rotate image clockwise" data-action="rotateRight"></button>
			${downloadUrl && string_namespaceObject._html`
			<button class="res-media-controls-download res-icon title="Download image" data-action="download"></button>
			`}
			${lookupUrl && string_namespaceObject._html`
			<button class="res-media-controls-lookup res-icon" title="Reverse image search" data-action="imageLookup"></button>
			`}
			${clippy && string_namespaceObject._html`
			<button class="res-media-controls-clippy" title="Show educational info" data-action="clippy"></button>
			`}
		</div>
	</div>
`;

const siteAttributionTemplate = ({ url, name, logoUrl, settingsLink }) => string_namespaceObject.html`
	<cite class="res-expando-siteAttribution">
		<a href="${url}" target="_blank" rel="noopener noreferer">
			${logoUrl && string_namespaceObject._html`<img src="${logoUrl}" alt="Hosted on ${name}" title="Hosted on ${name}" />`}
			<span>hosted on ${name}</span>
			<a href="${settingsLink}" class="gearIcon" title="Disable or change settings for ${name}"></a>
		</a>
	</cite>
`;

const crosspostMetadataTemplate = data => string_namespaceObject.html`
	<div class="crosspost-preview res-crosspost-preview">
		<div class="crosspost-preview-header">
			<a href="${data.url}" class="content-link may-blank" data-event-action="title" tabindex="1"></a>
			<div class="text-content">
				<p class="title">${data.crosspostRootTitle}</p>
				<div class="crosspost-preview-tagline tagline">
					<span>${i18n('numPoints', parseInt(data.crosspostRootScore, 10))}</span>
					<span class="dot"></span>
					<a href="/r/${data.crosspostRootSubreddit}/comments/${(data.targetParentFullname || '').slice(3)}" class="comments may-blank">${i18n('numComments', parseInt(data.crosspostRootNumComments, 10))}</a>
					<span class="dot"></span>
					${i18n('submittedAtTime')} <time>${data.crosspostRootTime}</time>
					${i18n('submittedByAuthor')} <a href="/user/${data.crosspostRootAuthor}/" class="author may-blank">${data.crosspostRootAuthor}</a>
					${i18n('submittedToSubreddit')} <a href="/r/${data.crosspostRootSubreddit}/" class="subreddit hover may-blank">r/${data.crosspostRootSubreddit}</a>
				</div>
			</div>
		</div>
	</div>
`;
// CONCATENATED MODULE: ./lib/modules/hosts/aarli.js






/* harmony default export */ var aarli = (new Host('aarli', {
	name: 'AAR Library',
	domains: ['aar.li'],
	logo: 'https://aar.li/favicon.ico',
	detect: ({ pathname }) => /^\/a\/(\w+)/i.exec(pathname),
	async handleLink(href, [, aarId]) {
		const info = await ajax({
			url: 'https://aar.li/api.php',
			query: { aarId },
			type: 'json'
		});

		if (info.errors) {
			throw new Error(info.errors);
		}

		return {
			type: 'GALLERY',
			title: info.title,
			caption: info.description + (info.previousurl ? string_namespaceObject.escape`<br/><a href="${info.previousurl}">Previous part.</a>` : ''),
			credits: string_namespaceObject.escape`AAR by <a href="${info.authorurl}">${info.author}</a>`,
			src: info.slides.map(({ desc, imglink }) => ({
				type: 'IMAGE',
				caption: desc,
				src: imglink
			}))
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/adultswim.js




/* harmony default export */ var adultswim = (new Host('adultswim', {
	name: 'Adult Swim',
	domains: ['adultswim.com'],
	logo: 'https://www.adultswim.com/favicon.ico',
	detect: ({ pathname }) => /^\/videos\/([^\/]+\/[^\/]+)(?:\/|$)/i.exec(pathname),
	handleLink(href, [, path]) {
		return {
			type: 'IFRAME',
			embed: `https://www.adultswim.com/utilities/embed/${path}`,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/archilogic.js




/* harmony default export */ var archilogic = (new Host('archilogic', {
	name: 'archilogic',
	domains: ['spaces.archilogic.com'],
	logo: 'https://about.archilogic.com/wp-content/uploads/2017/01/favicon-96x96.png',
	detect: ({ pathname }) => /^\/(3d|model)/.exec(pathname),
	handleLink(href) {
		const formattedUrl = href.replace('/model/', '/3d/').replace('http:', 'https:');

		return {
			type: 'IFRAME',
			embed: formattedUrl
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/archiveis.js




/* harmony default export */ var archiveis = (new Host('archive.is', {
	name: 'archive.is',
	domains: ['archive.is'],
	logo: 'https://archive.is/favicon.ico',
	detect: ({ pathname }) => /^\/(\w+)(?:\/|$)/i.exec(pathname),
	handleLink(href, [, code]) {
		return {
			type: 'IMAGE',
			src: `https://archive.fo/${code}/scr.png`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/bime.js




/* harmony default export */ var bime = (new Host('bime', {
	name: 'Bime Analytics Dashboards',
	domains: ['bime.io'],
	logo: 'https://a.bime.io/assets/favicons/favicon.ico',
	detect: ({ href }) => /https?:\/\/([^.]+)\.bime\.io(?:\/([a-z0-9_-]+))+/i.exec(href),
	handleLink: (href, [, user, dashboardId]) => ({
		type: 'IFRAME',
		embed: `https://${user}.bime.io/dashboard/${dashboardId}`,
		expandoClass: 'selftext',
		width: '960px',
		height: '540px'
	})
}));
// CONCATENATED MODULE: ./lib/modules/hosts/clyp.js




/* harmony default export */ var clyp = (new Host('clyp', {
	name: 'clyp',
	domains: ['clyp.it'],
	logo: 'https://d2cjvbryygm0lr.cloudfront.net/favicon.ico',
	detect: ({ pathname }) => /^\/(playlist\/)?([A-Za-z0-9]+)/i.exec(pathname),
	handleLink(href, [, playlist, id]) {
		return {
			type: 'IFRAME',
			embed: `https://clyp.it/${playlist ? 'playlist/' : ''}${id}/widget`,
			height: '160px',
			width: '600px'
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/codepen.js






/* harmony default export */ var codepen = (new Host('codepen', {
	name: 'CodePen',
	domains: ['codepen.io'],
	permissions: ['https://codepen.io/api/oembed'],
	logo: 'https://codepen.io/favicon.ico',
	detect: ({ pathname }) => /^\/(?!anon)([a-z0-9_-]+)\/(?:pen|full|details|debug)\/([a-z]+)\b/i.exec(pathname),
	async handleLink(href, [, user, hash]) {
		const { html } = await ajax({
			url: 'https://codepen.io/api/oembed',
			query: {
				url: `https://codepen.io/${user}/pen/${hash}`,
				format: 'json',
				height: 500
			},
			type: 'json'
		});

		return {
			type: 'GENERIC_EXPANDO',
			muted: true,
			generate: () => $(html).get(0)
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/coub.js




/* harmony default export */ var coub = (new Host('coub', {

	name: 'Coub',

	domains: ['coub.com'],

	detect: ({ pathname }) => /^\/(?:view|embed)\/(\w+)(\.gifv)?/i.exec(pathname),

	handleLink(href, [, hash, isGifv]) {
		const src = isGifv ? `https://coub.com/view/${hash}.gifv?res=true` : `https://coub.com/embed/${hash}?autoplay=true&res=true`;

		return {
			type: 'IFRAME',
			muted: !!isGifv,
			embed: src,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/ctrlv.js




/* harmony default export */ var ctrlv = (new Host('ctrlv', {
	name: 'CtrlV.in',
	logo: 'https://ctrlv.in/favicon.ico',
	domains: ['ctrlv.in'],
	detect: ({ pathname }) => /^\/([0-9]+)/i.exec(pathname),
	handleLink(href, [, id]) {
		return {
			type: 'IMAGE',
			src: `https://img.ctrlv.in/id/${id}`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/dailymotion.js




/* harmony default export */ var dailymotion = (new Host('dailymotion', {
	name: 'dailymotion',
	domains: ['dailymotion.com'],
	logo: 'https://static1.dmcdn.net/images/favicons/favicon-32x32.png.vb5b47df6329123929',
	detect: ({ href }) => /^https?:\/\/(?:(?:www|touch)\.)?dailymotion.com[\w\-\/:#]+video[\/=]([a-z0-9]+)/i.exec(href),
	handleLink(href, [, hash]) {
		const embed = `https://www.dailymotion.com/embed/video/${hash}?api=postMessage`;

		return {
			type: 'IFRAME',
			embed,
			embedAutoplay: `${embed}&autoplay=1`,
			pause: 'pause',
			play: 'play',
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/default.js




/* harmony default export */ var hosts_default = (new Host('default', {
	name: 'default',
	domains: [],
	detect: ({ pathname }) => /\.(gif|jpe?g|png|svg)$/i.test(pathname),
	handleLink(href) {
		return {
			type: 'IMAGE',
			src: href
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/defaultAudio.js




/* harmony default export */ var defaultAudio = (new Host('defaultAudio', {
	name: 'defaultAudio',
	domains: [],
	detect: ({ pathname }) => /\.(opus|weba|ogg|wav|mp3|flac)$/i.exec(pathname),
	handleLink(href, [, extension]) {
		if (extension === 'weba') extension = 'webm';
		if (extension === 'opus') extension = 'ogg';

		const format = `audio/${extension}`;

		return {
			type: 'AUDIO',
			autoplay: true,
			loop: false,
			sources: [{
				file: href,
				type: format
			}]
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/defaultVideo.js




/* harmony default export */ var defaultVideo = (new Host('defaultVideo', {
	name: 'defaultVideo',
	domains: [],
	detect: ({ pathname }) => /\.(webm|mp4|ogv|3gp|mkv)$/i.exec(pathname),
	handleLink(href, [, extension]) {
		if (extension === 'ogv') extension = 'ogg';

		const format = `video/${extension}`;

		return {
			type: 'VIDEO',
			sources: [{
				source: href,
				type: format
			}]
		};
	}
}));
// EXTERNAL MODULE: ./node_modules/lodash/keyBy.js
var lodash_keyBy = __webpack_require__(84);
var lodash_keyBy_default = /*#__PURE__*/__webpack_require__.n(lodash_keyBy);

// CONCATENATED MODULE: ./lib/modules/hosts/derpibooru.js






/* harmony default export */ var derpibooru = (new Host('derpibooru', {
	name: 'Derpibooru',
	logo: 'https://derpibooru.org/favicon.ico',
	domains: ['derpibooru.org', 'trixiebooru.org', 'derpiboo.ru', 'derpicdn.net'],

	detect: ({ hostname, pathname }) => hostname === 'derpicdn.net' ? /^\/img\/view\/\d+\/\d+\/\d+\/(\d+)[._]/i.exec(pathname) : /^\/(?:images\/)?(\d+)$/i.exec(pathname),

	handleLink: (() => {
		const fetchInfo = batch(async requests => {
			const maxDepth = 10;

			const { images } = await ajax({
				url: 'https://derpibooru.org/api/v2/images/show.json',
				query: { ids: requests.map(r => r.id).join(',') },
				type: 'json'
			});

			const responseById = lodash_keyBy_default()(images, img => img.id);

			return requests.map(({ id, depth = 0 }) => {
				const result = responseById[id];

				if (!result) {
					return new Error('No result');
				} else if (result.duplicate_of) {
					if (depth > maxDepth) {
						return new Error(`Exceeded max duplicate depth: ${maxDepth}`);
					}
					return fetchInfo({ id: result.duplicate_of, depth: depth + 1 });
				} else if (result.image) {
					return result;
				} else {
					return new Error('Image deleted or other error');
				}
			});
		}, { size: 50 });

		return async (href, [, id]) => {
			const { image, description, source_url: source } = await fetchInfo({ id });

			return {
				type: 'IMAGE',
				src: image,
				caption: description,
				credits: source ? string_namespaceObject.escape`Source: <a href="${source}">${source}</a>` : undefined
			};
		};
	})()
}));
// CONCATENATED MODULE: ./lib/modules/hosts/deviantart.js





/* harmony default export */ var deviantart = (new Host('deviantart', {
	name: 'deviantART',
	logo: 'https://i.deviantart.net/icons/da_favicon.ico',
	domains: ['deviantart.com', 'fav.me', 'sta.sh'],
	permissions: ['https://backend.deviantart.com/oembed'],
	detect: ({ href }) => /^https?:\/\/(?:fav\.me\/.*|sta\.sh.*|(?:.+\.)?deviantart\.com\/(?:art\/.*|[^#]*#\/d.*))$/i.test(href),
	async handleLink(href) {
		const info = await ajax({
			url: 'https://backend.deviantart.com/oembed',
			query: { url: href },
			type: 'json'
		});

		switch (info.type) {
			case 'photo':
			case 'link':
				let src;
				if (info.fullsize_url) {
					src = info.fullsize_url;
				} else if (/\.(jpg|jpeg|gif|png)/i.test(info.url)) {
					src = info.url;
				} else {
					src = info.thumbnail_url;
				}

				return {
					type: 'IMAGE',
					title: info.title,
					credits: `Art by: <a href="${info.author_url}">${info.author_name}</a> @ deviantART`,
					src
				};
			case 'rich':
				return {
					type: 'TEXT',
					title: info.title,
					src: info.html + (/[^\s\.]\s*$/.test(info.html) ? '...' : ''),
					credits: `<a href="${href}">Click here to read the full text</a> - Written By: <a href="${info.author_url}">${info.author_name}</a> @ deviantART`
				};
			default:
				throw new Error(`Unsupported deviantART post type: ${info.type}`);
		}
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/dropbox.js





/* harmony default export */ var dropbox = (new Host('dropbox', {
	name: 'dropbox',
	domains: ['dropbox.com'],
	logo: 'https://cfl.dropboxstatic.com/static/images/favicon-vflk5FiAC.ico',
	detect(url) {
		for (const host of genericHosts) {
			const result = host.detect(url);
			if (result) return [host.handleLink, result];
		}
	},
	handleLink(href, [handler, result]) {
		const originalURL = new URL(href);
		return handler(`${originalURL.origin}${originalURL.pathname}?raw=1`, result);
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/fiveHundredPx.js




/* harmony default export */ var fiveHundredPx = (new Host('fiveHundredPx', {
	name: 'fiveHundredPx',
	domains: ['500px.org', '500px.net', '500px.com'],
	logo: 'https://assetcdn.500px.org/assets/favicon-1e8257b93fb787f8ceb66b5522ee853c.ico',
	detect: ({ href }) => /^https?:\/\/\w*cdn\.500px\.(?:net|com|org)\/(?:photo\/)?([0-9]+)\//.exec(href),
	handleLink(href, [, photoId]) {
		return {
			type: 'IMAGE',
			src: href.replace(/\/[0-9]+\.jpg$/, '/5.jpg'),
			credits: `View original and details at: <a href="https://500px.com/photo/${photoId}">500px.com</a>`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/flickr.js





/* harmony default export */ var flickr = (new Host('flickr', {
	name: 'flickr',
	domains: ['flickr.com', 'flic.kr', 'staticflickr.com'],
	logo: 'https://s.yimg.com/pw/favicon.ico',
	detect: (() => {
		const alpha = '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ';

		function base58Encode(num) {
			let enc = '';
			let acc = num;

			do {
				const div = Math.floor(acc / 58);
				const mod = acc - 58 * div;
				enc = `${alpha[mod]}${enc}`;
				acc = div;
			} while (acc);

			return enc;
		}

		return ({ href }) => {
			if (/^https?:\/\/(?:\w+\.)?flickr\.com\/(?:.+)\/(\d{10,})(?:\/|$)/i.test(href) || /^https?:\/\/(?:\w+\.)?flic\.kr\/p\/(\w+)(?:\/|$)/i.test(href)) {
				return href;
			}

			const matches = /^https?:\/\/(?:\w+\.)?staticflickr\.com\/(?:.+\/)?\d{4}\/(\d{10,})_/i.exec(href);
			if (matches) {
				return `https://flic.kr/p/${base58Encode(matches[1])}`;
			}
		};
	})(),
	async handleLink(href, oembedTarget) {
		const info = await ajax({
			url: 'https://noembed.com/embed',
			query: { url: oembedTarget },
			type: 'json'
		});

		if (!info.media_url) {
			throw new Error('No media_url found.');
		}

		let src;
		if (/\.(jpg|jpeg|gif|png)/i.test(info.media_url)) {
			src = info.media_url;
		} else {
			src = info.thumbnail_url;
		}

		return {
			type: 'IMAGE',
			title: info.title,
			credits: `Picture by: <a href="${info.author_url}">${info.author_name}</a> @ Flickr`,
			src
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/futurism.js





/* harmony default export */ var futurism = (new Host('futurism', {
	name: 'futurism',
	attribution: false,
	domains: ['futurism.com', 'futurism.co'],
	detect: () => true,
	async handleLink(href) {
		const { data, success, status } = await ajax({
			url: 'https://www.futurism.com/wp-content/themes/futurism/res.php',
			query: { url: href, reverse: href.includes('wp-content/uploads') },
			type: 'json'
		});

		if (!success) {
			throw new Error(`Request failure: status ${status}`);
		}

		return {
			type: 'IMAGE',
			src: data.image_link
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/gatherer.js




/* harmony default export */ var gatherer = (new Host('gatherer', {
	name: 'Gatherer MTG Card Images',
	domains: ['gatherer.wizards.com'],
	logo: 'http://gatherer.wizards.com/Images/favicon.ico',
	detect: ({ pathname }) => /^\/Handlers\/Image\.ashx/i.exec(pathname),
	handleLink(href) {
		return {
			type: 'IMAGE',
			src: href
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/getyarn.js




/* harmony default export */ var getyarn = (new Host('getyarn', {
	name: 'getyarn.io',
	logo: 'https://getyarn.io/favicon.ico',
	domains: ['getyarn.io'],
	detect: ({ pathname }) => /\/yarn-clip\/(?:embed\/)?([\w\-]+)/i.exec(pathname),
	handleLink(href, [, code]) {
		const embed = `https://getyarn.io/yarn-clip/embed/${code}`;

		return {
			type: 'IFRAME',
			embed: `${embed}?autoplay=false`,
			embedAutoplay: `${embed}?autoplay=true`,
			height: '600px',
			width: '768px',
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/gfycat.js






/* harmony default export */ var gfycat = (new Host('gfycat', {
	name: 'gfycat',
	domains: ['gfycat.com'],
	logo: 'https://gfycat.com/favicon.ico',
	options: {
		useMobileGfycat: {
			title: 'gfycatUseMobileGfycatTitle',
			description: 'gfycatUseMobileGfycatDesc',
			value: false,
			type: 'boolean'
		}
	},
	detect: ({ pathname }) => /^\/(?:gifs\/detail\/)?(\w+)(?:\.gif)?/i.exec(pathname),
	async handleLink(href, [, id], info = null) {
		const isMobileResolution = this.options.useMobileGfycat.value;

		info = info || (await ajax({
			url: string_namespaceObject.encode`https://gfycat.com/cajax/get/${id}`,
			type: 'json',
			cacheFor: DAY
		})).gfyItem;

		return {
			type: 'VIDEO',
			frameRate: info.frameRate,
			loop: true,
			muted: true,
			playbackRate: +(href.match(/[?|&]speed=([\d\.]+)/i) || [undefined, 1])[1],
			poster: isMobileResolution ? info.mobilePosterUrl : info.posterUrl,
			reversable: true,
			reversed: href.includes('direction=reverse'),
			sources: [isMobileResolution && {
				source: info.mobileUrl,
				reverse: info.mobileUrl.replace(/\.mp4$/g, '-reverse.mp4'),
				type: 'video/mp4'
			}, {
				source: info.webmUrl,
				reverse: info.webmUrl.replace(/\.webm$/g, '-reverse.webm'),
				type: 'video/webm'
			}, {
				source: info.mp4Url,
				reverse: info.mp4Url.replace(/\.mp4$/g, '-reverse.mp4'),
				type: 'video/mp4'
			}].filter(x => x),
			time: +(href.match(/[?|&]frameNum=([\d]+)/i) || [undefined, 0])[1] / info.frameRate
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/gifyoutube.js






/* harmony default export */ var gifyoutube = (new Host('gifs', {
	name: 'gifs.com',
	domains: ['gifs.com', 'gifyoutube.com', 'gifyt.com'],
	logo: 'https://cdn.gifs.com/resources/favicon.png',
	detect: ({ href }) => /^https?:\/\/(?:beta\.|www\.)?(?:gifyoutube|gifyt)\.com\/gif\/(\w+)\.?/i.exec(href) || /^https?:\/\/share\.gifyoutube\.com\/(\w+)\.gif/i.exec(href),
	async handleLink(href, [, id]) {
		const { sauce } = await ajax({
			url: `https://gifs.com/api/${id}`,
			type: 'json',
			cacheFor: DAY
		});

		return {
			type: 'VIDEO',
			loop: true,
			fallback: `https://share.gifyoutube.com/${id}.gif`,
			muted: true,
			source: sauce,
			sources: [{
				source: `https://share.gifyoutube.com/${id}.webm`,
				type: 'video/webm'
			}, {
				source: `https://share.gifyoutube.com/${id}.mp4`,
				type: 'video/mp4'
			}]
		};
	}
}));
// EXTERNAL MODULE: ./lib/images/hosts/giphy-logo.png
var giphy_logo = __webpack_require__(266);
var giphy_logo_default = /*#__PURE__*/__webpack_require__.n(giphy_logo);

// CONCATENATED MODULE: ./lib/modules/hosts/giphy.js






/* harmony default export */ var giphy = (new Host('giphy', {
	name: 'giphy',
	domains: ['giphy.com'],
	logo: giphy_logo_default.a,
	detect: ({ pathname }) => /^(?:\/gifs|\/media|)\/(?:\w+-)*([^/.]+)(?:\/|\.gif|$)/i.exec(pathname),
	async handleLink(href, [, id]) {
		const { data } = await ajax({
			url: `https://api.giphy.com/v1/gifs/${id}`,
			query: { api_key: 'dc6zaTOxFJmzC' },
			type: 'json'
		});

		return {
			type: 'VIDEO',
			fallback: data.images.original.url,
			loop: true,
			muted: true,
			sources: [{
				source: data.images.original.mp4,
				type: 'video/mp4'
			}]
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/github.js







/* harmony default export */ var github = (new Host('github', {
	domains: ['gist.github.com'],
	logo: 'https://assets-cdn.github.com/favicon.ico',
	name: 'github gists',
	detect: ({ pathname }) => /^\/(?:[\w-]+\/)?([a-z0-9]{20,}|\d+)/i.exec(pathname),
	async handleLink(href, [, id]) {
		const { files, description } = await ajax({
			url: `https://api.github.com/gists/${id}`,
			type: 'json',
			cacheFor: DAY
		});

		let src = '';

		for (const [filename, { content, language, truncated }] of Object.entries(files)) {
			src += string_namespaceObject.escape`<h5>${filename}:</h5>`;

			if (language === 'Markdown') {
				src += snudown_es_markdown(content);
			} else {
				src += string_namespaceObject.escape`<pre><code>${content}</code></pre>`;
			}

			if (truncated) {
				src += '<p>&lt;file truncated&gt;</p>';
			}
		}

		return {
			type: 'TEXT',
			title: description,
			src
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/googlemaps.js




/* harmony default export */ var googlemaps = (new Host('googlemaps', {
	domains: ['maps.google.ca', 'maps.google.com', 'google.co.uk', 'google.com', 'google.ca'],
	logo: 'https://maps.google.com/favicon.ico',
	name: 'Google Maps',
	detect: ({ host, searchParams, pathname }) => {
		if (host.startsWith('maps.') || pathname.startsWith('/maps')) {
			if (searchParams.has('ll') || searchParams.get('q')) {
				return [searchParams.has('ll') ? searchParams.get('ll') : searchParams.get('q'), searchParams.get('z'), searchParams.has('maptype') ? searchParams.get('maptype') : 'roadmap'];
			} else {
				const location = pathname.split('/').find(part => part.startsWith('@'));
				if (location) {
					const [long, lat, zoom] = location.substring(1).split(',');

					return [`${long},${lat}`, zoom.endsWith('z') ? zoom : 16, zoom.endsWith('z') ? 'roadmap' : 'satellite'];
				}
			}
		}
	},
	handleLink(href, [coords, zoom, mapType]) {
		let embed = `https://www.google.com/maps/embed/v1/view?center=${coords}&key=AIzaSyCtnLZP1XwkgIK53Asx_5qtZa2k9eZcdDc`;
		if (zoom) embed += `&zoom=${zoom}`;
		if (mapType) embed += `&maptype=${mapType}`;

		return {
			type: 'IFRAME',
			embed,
			muted: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/graphiq.js






/* harmony default export */ var graphiq = (new Host('graphiq', {
	name: 'graphiq',
	domains: ['graphiq.com'],
	logo: 'https://www.graphiq.com/favicon.ico',
	landingPage: 'https://www.graphiq.com/',
	detect: ({ pathname }) => /^\/(?:w|wlp|vlp)\/([A-z0-9]+)/i.exec(pathname),
	async handleLink(href, [url, id]) {
		const {
			width = '640',
			height = '360'
		} = await ajax({
			url: 'https://oembed.graphiq.com/services/oembed',
			query: { url },
			type: 'json',
			cacheFor: DAY
		});

		return {
			type: 'IFRAME',
			expandoClass: 'selftext',
			muted: true,
			embed: `https://www.graphiq.com/w/${id}`,
			width: `${width}px`,
			height: `${height}px`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/gyazo.js





/* harmony default export */ var gyazo = (new Host('gyazo', {
	name: 'gyazo',
	domains: ['gyazo.com'],
	permissions: ['https://api.gyazo.com/api/oembed'],
	logo: 'https://gyazo.com/favicon.ico',
	detect: ({ pathname }) => /^\/(\w{32})\b/i.exec(pathname),
	async handleLink(href, [, id]) {
		const info = await ajax({
			url: 'https://api.gyazo.com/api/oembed',
			query: { url: href },
			type: 'json'
		});

		switch (info.type) {
			case 'photo':
				return {
					type: 'IMAGE',
					src: info.url
				};
			case 'video':
				return {
					type: 'VIDEO',
					muted: true,
					loop: true,
					fallback: `https://i.gyazo.com/${id}.gif`,
					sources: [{
						source: `https://i.gyazo.com/${id}.mp4`,
						type: 'video/mp4'
					}]
				};
			default:
				throw new Error(`Invalid media type: ${info.type}`);
		}
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/hastebin.js




/* harmony default export */ var hastebin = (new Host('hastebin', {
	name: 'hastebin',
	domains: ['hastebin.com'],
	attribution: false,
	detect: ({ pathname }) => /^\/(?:raw\/)?([^\/]+)/i.exec(pathname),
	handleLink(href, [, filename]) {
		return {
			type: 'IFRAME',
			expandoClass: 'selftext',
			muted: true,
			embed: `https://hastebin.com/${filename}`,
			height: '500px',
			width: '800px'
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/iloopit.js




/* harmony default export */ var iloopit = (new Host('iloopit', {
	name: 'iLoopit - gif maker',
	domains: ['iloopit.net'],
	logo: 'https://iloopit.net/favicon.ico',
	detect: ({ href }) => /^https?:\/\/(\w+\.)?iloopit\.net\/.+?\/\?type=looplayer&loopid=(\d+)/i.exec(href) || /^https?:\/\/(\w+\.)?iloopit\.net(\/tube)?\/(\d+)\/.+?\/(\?type=(looplayer)|(embed))?/i.exec(href),
	handleLink(href) {
		let link = '';
		const testWithTitle = /iloopit\.net(?:\/tube)?\/(\d+)\/(.+)?\//;
		const titleResult = testWithTitle.exec(href);

		if (titleResult) {
			link = `https://iloopit.net/${titleResult[1]}/${titleResult[2]}/?type=embed`;
		} else {
			link = href.replace('type=looplayer', 'type=embed');
		}

		return {
			type: 'IFRAME',
			muted: true,
			embed: link,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/imgflip.js




/* harmony default export */ var imgflip = (new Host('imgflip', {
	name: 'imgflip',
	domains: ['imgflip.com'],
	logo: 'https://imgflip.com/favicon02.png',
	detect: ({ pathname }) => /^\/(i|gif)\/([a-z0-9]+)/.exec(pathname),
	handleLink(href, [, type, id]) {
		return {
			type: 'IMAGE',
			src: `https://i.imgflip.com/${id}.${type === 'gif' ? 'gif' : 'jpg'}`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/imgur.js






/* harmony default export */ var imgur = (new Host('imgur', {
	name: 'imgur',
	domains: ['imgur.com'],
	logo: 'https://i.imgur.com/favicon.ico',
	options: {
		preferResAlbums: {
			title: 'imgurPreferResAlbumsTitle',
			description: 'imgurPreferResAlbumsDesc',
			value: true,
			type: 'boolean'
		},
		useGifOverGifv: {
			title: 'imgurUseGifOverGifVTitle',
			description: 'imgurUseGifOverGifVDesc',
			value: false,
			type: 'boolean'
		},
		preferredImgurLink: {
			title: 'imgurPreferredImgurLinkTitle',
			description: 'imgurPreferredImgurLinkDesc',
			type: 'enum',
			value: 'share',
			values: [{
				name: 'full page (imgur.com)',
				value: 'share'
			}, {
				name: 'direct image (i.imgur.com)',
				value: 'direct'
			}]
		},
		imgurImageResolution: {
			title: 'imgurImageResolutionTitle',
			description: 'imgurImageResolutionDesc',
			type: 'enum',
			value: '',
			values: [{
				name: 'Full Resolution',
				value: ''
			}, {
				name: 'Retina (1360px)',
				value: 'r'
			}, {
				name: 'Huge (1024px)',
				value: 'h'
			}, {
				name: 'Giant (680px)',
				value: 'g'
			}, {
				name: 'Large (640px)',
				value: 'l'
			}]
		}
	},
	detect({ pathname, href }) {
		const cdnUrl = 'https://i.imgur.com/';
		const apiPrefix = 'https://api.imgur.com/3/';
		const apiId = '1d8d9b36339e0e2';
		const hashRe = /^https?:\/\/(?:i\.|m\.|edge\.|www\.)*imgur\.com\/(?:r\/\w+\/)*(?!gallery)(?!removalrequest)(?!random)(?!memegen)((?:\w{5}|\w{7})(?:[&,](?:\w{5}|\w{7}))*)(?:#\d+)?[a-z]?(\.(?:jpe?g|gifv?|png))?(\?.*)?$/i;
		const hostedHashRe = /^https?:(\/\/i\.\w+\.*imgur\.com\/)((?:\w{5}|\w{7})(?:[&,](?:\w{5}|\w{7}))*)(?:#\d+)?[a-z]?(\.(?:jpe?g|gif|png))?(\?.*)?$/i;
		const galleryHashRe = /^https?:\/\/(?:m\.|www\.)?imgur\.com\/gallery\/(\w+)(?:[/#]|$)/i;
		const albumHashRe = /^https?:\/\/(?:m\.|www\.)?imgur\.com\/a\/(\w+)(?:[/#]|$)/i;

		if (pathname === '/rules' || pathname === '/inbox') return null;

		href = href.split('?')[0];

		let groups;

		if (groups = galleryHashRe.exec(href)) {
			const hash = groups[1];
			return () => _api(string_namespaceObject.encode`gallery/${hash}`).catch(() => _api(string_namespaceObject.encode`album/${hash}`));
		} else if (groups = albumHashRe.exec(href)) {
			if (this.options.preferResAlbums.value) {
				const hash = groups[1];
				return () => _api(string_namespaceObject.encode`album/${hash}`);
			}
		} else if (groups = hostedHashRe.exec(href)) {
			const hash = groups[2];
			return () => _handleImage(hash, href);
		} else if (groups = hashRe.exec(href)) {
			const hash = groups[1];
			if (hash.search(/[&,]/) > -1) {
				return () => _handleImageCollection(hash.split(/[&,]/), href);
			} else {
				return () => _handleImage(hash, href);
			}
		}

		return false;

		async function _api(endpoint) {
			const { data } = await ajax({
				url: apiPrefix + endpoint,
				type: 'json',
				headers: {
					Authorization: `Client-ID ${apiId}`
				}
			});

			if (data.error) {
				throw new Error(`Imgur API error: ${data.error}`);
			}

			return data;
		}

		function _mockImageAPI(hash, url) {
			let thisCdnUrl = cdnUrl;
			let matches, extension;

			if (matches = hostedHashRe.exec(url)) {
				thisCdnUrl = matches[1];
				extension = matches[3];
			} else if (matches = hashRe.exec(url)) {
				extension = matches[2];
			}

			if (!extension) {
				extension = '.jpg';
			}

			return {
				id: hash,
				animated: false,
				looping: false,
				has_sound: false,
				link: `${thisCdnUrl}${hash}${extension}`,
				gifv: undefined,
				title: '',
				description: ''
			};
		}

		function _handleImage(hash, url) {
			const [,, extension] = hashRe.exec(url) || [];

			if (['.png', '.jpg', '.jpeg'].includes(extension)) {
				return _mockImageAPI(hash, url);
			} else if (hostedHashRe.test(url)) {
				return _mockImageAPI(hash, url);
			} else {
				return _api(`image/${hash}`);
			}
		}

		function _handleImageCollection(hashes, url) {
			return {
				is_album: true,
				images: hashes.map(hash => _mockImageAPI(hash, url)),
				title: '',
				description: ''
			};
		}
	},
	async handleLink(href, getInfo) {
		const baseUrl = 'https://imgur.com/';
		const shareLinkPreferred = this.options.preferredImgurLink.value === 'share';
		const resolutionSuffix = this.options.imgurImageResolution.value;
		const useGif = this.options.useGifOverGifv.value;

		const info = await getInfo();

		if (info.images && info.images.length) {
			return _handleAlbum(href, info);
		} else if (info.gifv && !useGif) {
			return _handleGifv(info);
		} else if (info.link) {
			return _handleSingleImage(info);
		}

		throw new Error('could not handle info');

		function _handleAlbum(href, info) {
			return {
				type: 'GALLERY',
				title: info.title,
				caption: info.description,
				src: info.images.map(info => Object.assign({}, info.gifv && !useGif ? _handleGifv(info) : _handleSingleImage(info), {
					href: shareLinkPreferred ? `${href.split('#')[0]}#${info.id}` : `${info.link}`
				}))
			};
		}

		function _handleSingleImage(info) {
			const src = info.link.replace('http:', 'https:').replace(`/${info.id}.`, `/${info.id}${resolutionSuffix}.`);

			return {
				src,
				href: shareLinkPreferred ? `${baseUrl}${info.id}` : `${info.link}`,
				type: 'IMAGE',
				caption: info.description,
				title: info.title
			};
		}

		function _handleGifv(info) {
			return {
				type: 'VIDEO',
				href: shareLinkPreferred ? `${baseUrl}${info.id}` : `${info.link}`,
				fallback: info.link.replace('http:', 'https:'),
				caption: info.description,
				title: info.title,
				loop: info.looping !== false,
				muted: !info.has_sound,
				sources: [{
					source: info.mp4.replace('http:', 'https:'),
					type: 'video/mp4'
				}]
			};
		}
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/instagram.js




/* harmony default export */ var instagram = (new Host('instagram', {
	name: 'Instagram',
	domains: ['instagram.com', 'instagr.am'],
	attribution: false,
	detect: ({ pathname }) => /^\/p\/([a-z0-9_\-]{10,})(?:\/|$)/i.exec(pathname),
	handleLink: (href, [, id]) => ({
		type: 'IFRAME',
		expandoClass: 'image',
		embed: `https://instagram.com/p/${id}/embed/captioned/`,
		width: '600px',
		height: '700px'
	})
}));
// CONCATENATED MODULE: ./lib/modules/hosts/ireddit.js





/* harmony default export */ var ireddit = (new Host('ireddit', {
	name: 'i.redd.it',
	domains: ['i.redd.it'],
	options: {
		preferRedditMedia: {
			title: 'iredditPreferRedditMediaTitle',
			description: 'iredditPreferRedditMediaDesc',
			type: 'boolean',
			value: false
		}
	},
	attribution: false,
	detect({ pathname }, thing) {
		return (pathname.endsWith('.gif') || this.options.preferRedditMedia.value) && thing && thing.isLinkPost() && thing.getFullname();
	},
	async handleLink(href, fullname) {
		const postMetadata = await getPostMetadata({ id: fullname.replace('t3_', '') });
		if (!postMetadata.preview) throw new Error('Post has no preview.');
		const preview = postMetadata.preview.images[0];
		if (preview.variants.mp4) {
			return {
				type: 'VIDEO',
				loop: true,
				muted: true,
				fallback: preview.variants.gif && preview.variants.gif.source.url,
				sources: [{
					source: preview.variants.mp4.source.url,
					type: 'video/mp4'
				}]
			};
		} else {
			return {
				type: 'IMAGE',
				src: preview.source.url
			};
		}
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/jsfiddle.js




/* harmony default export */ var jsfiddle = (new Host('jsfiddle', {
	name: 'jsfiddle',
	domains: ['jsfiddle.net'],
	logo: 'https://jsfiddle.net/favicon.png',
	detect: ({ pathname }) => /^(\/(?:\w+\/(?!embedded\/))?[a-z0-9]{5,}(?:\/\d+)?(?=\/|$))(\/embedded\/[\w,]+\/)?/i.exec(pathname),
	handleLink(href, [, path, categories]) {
		return {
			type: 'IFRAME',
			expandoClass: 'selftext',
			muted: true,
			embed: `https://jsfiddle.net${path}${categories || '/embedded/result,js,resources,html,css/'}`,
			width: '800px',
			height: '500px'
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/liveleak.js




/* harmony default export */ var liveleak = (new Host('liveleak', {
	name: 'LiveLeak',
	domains: ['liveleak.com'],
	logo: 'https://www.liveleak.com/favicon.ico',
	detect: ({ pathname, search }) => pathname === '/view' && search,
	handleLink: (href, query) => ({
		type: 'IFRAME',
		embed: `https://www.liveleak.com/ll_embed${query}`,
		embedAutoplay: `https://www.liveleak.com/ll_embed${query}&autostart=true`,
		fixedRatio: true
	})
}));
// CONCATENATED MODULE: ./lib/modules/hosts/livememe.js




/* harmony default export */ var livememe = (new Host('livememe', {
	name: 'livememe',
	domains: ['livememe.com'],
	logo: 'https://livememe.com/favicon.ico',
	detect: ({ pathname }) => /^\/(?!edit)(\w{7})(?:\/|$)/i.exec(pathname),
	handleLink(href, [, id]) {
		return {
			type: 'IMAGE',
			src: `https://e.lvme.me/${id}.jpg`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/makeameme.js




/* harmony default export */ var makeameme = (new Host('makeameme', {
	name: 'makeameme',
	domains: ['makeameme.org'],
	logo: 'https://makeameme.org/images/favicons/favicon-32x32.png',
	detect: ({ pathname }) => /^\/meme\/([\w\-]+)/i.exec(pathname),
	handleLink(href, [, id]) {
		return {
			type: 'IMAGE',
			src: `https://makeameme.org/media/created/${id}.jpg`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/masterypoints.js




/* harmony default export */ var masterypoints = (new Host('masterypoints', {
	name: 'MasteryPoints',
	domains: ['masterypoints.com'],
	logo: 'https://www.masterypoints.com/favicon.ico',
	detect: ({ pathname }) => /^\/player\/(.{3,30})\/([a-zA-Z]{0,4})\b/i.exec(pathname),
	handleLink(href, [, player, server]) {
		return {
			type: 'IFRAME',
			muted: true,
			expandoClass: 'selftext',
			embed: `https://www.masterypoints.com/oembed/player/${player}/${server}`,
			height: '600px',
			width: '600px'
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/memecrunch.js




/* harmony default export */ var memecrunch = (new Host('memecrunch', {
	name: 'memecrunch',
	domains: ['memecrunch.com'],
	logo: 'https://memecrunch.com/static/favicon.ico',
	detect: ({ pathname }) => /^\/meme\/([0-9A-Z]+)\/([\w\-]+)(\/image\.(png|jpg))?/i.exec(pathname),
	handleLink(href, [, id, format]) {
		return {
			type: 'IMAGE',
			src: `https://memecrunch.com/meme/${id}/${format || 'null'}/image.png`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/memedad.js




/* harmony default export */ var memedad = (new Host('memedad', {
	name: 'memedad',
	domains: ['memedad.com'],
	logo: 'https://memedad.com/favicon.ico',
	detect: ({ pathname }) => /^\/meme\/([0-9]+)/i.exec(pathname),
	handleLink(href, [, id]) {
		return {
			type: 'IMAGE',
			src: `https://memedad.com/memes/${id}.jpg`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/memegen.js




/* harmony default export */ var memegen = (new Host('memegen', {
	name: 'memegen',
	domains: ['memegen.com', 'memegen.de', 'memegen.nl', 'memegen.fr', 'memegen.it', 'memegen.es', 'memegen.se', 'memegen.pl'],
	logo: 'http://www.memegen.com/favicon.ico',
	detect: ({ pathname }) => /^(\/a)?\/(?:meme|mem|mim)\/([A-Za-z0-9]+)/i.exec(pathname),
	handleLink(href, [, isAnimated, id]) {
		return {
			type: 'IMAGE',
			src: `http://${isAnimated ? 'a' : 'm'}.memegen.com/${id}.${isAnimated ? 'gif' : 'jpg'}`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/miiverse.js





/* harmony default export */ var miiverse = (new Host('miiverse', {
	name: 'Miiverse',
	attribution: false,
	domains: ['miiverse.nintendo.net'],

	detect: ({ pathname }) => pathname.startsWith('/posts/'),

	handleLink(href) {
		return {
			type: 'GENERIC_EXPANDO',
			expandoClass: 'selftext',
			muted: true,
			generate() {
				const $expando = $('<div>', { class: 'expando' });

				{
					const miiversePost = document.createElement('div');
					miiversePost.className = 'miiverse-post';
					miiversePost.setAttribute('lang', 'en');
					miiversePost.setAttribute('data-miiverse-embedded-version', '1');
					miiversePost.setAttribute('data-miiverse-cite', href);

					const miiverseScript = document.createElement('script');
					miiverseScript.setAttribute('async', 'async');
					miiverseScript.setAttribute('src', 'https://miiverse.nintendo.net/js/embedded.min.js');
					miiverseScript.setAttribute('charset', 'utf-8');

					$expando.append(miiversePost);
					$expando.append(miiverseScript);
				}

				return $expando.get(0);
			}
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/mixer.js




/* harmony default export */ var mixer = (new Host('mixer', {
	name: 'Mixer',
	domains: ['beam.pro', 'mixer.com'],
	logo: 'https://mixer.com/_latest/assets/favicons/favicon-32x32.png',
	detect: ({ pathname }) => /^\/(\w+)$/.exec(pathname),
	handleLink(href, [, clipId]) {
		const embed = `https://mixer.com/embed/player/${clipId}`;

		return {
			type: 'IFRAME',
			embed,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/oddshot.js




/* harmony default export */ var oddshot = (new Host('oddshot', {
	domains: ['oddshot.tv'],
	logo: 'https://oddshot.tv/favicon.ico',
	name: 'Oddshot',
	detect: ({ pathname }) => /^\/shot\/([a-z0-9_-]+(?:\/[a-z0-9_-]+)?)/i.exec(pathname),
	handleLink(href, [, hash]) {
		const embed = `https://oddshot.tv/shot/${hash}/embed`;

		return {
			type: 'IFRAME',
			embed,
			embedAutoplay: `${embed}?autoplay=true`,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/onedrive.js






/* harmony default export */ var onedrive = (new Host('onedrive', {
	domains: ['onedrive.live.com', '1drv.ms'],
	name: 'Microsoft OneDrive',
	detect: () => true,
	async handleLink(href) {
		const encodedUrl = `u!${btoa(href)}`.replace(/=+$/g, '').replace(/\//g, '_').replace(/\+/g, '-');

		const json = await ajax({
			url: `https://api.onedrive.com/v1.0/shares/${encodedUrl}/root?expand=children`,
			type: 'json',
			cacheFor: DAY
		});

		if (json.children.length) {
			return {
				type: 'GALLERY',
				src: json.children.map(processFile)
			};
		} else {
			return processFile(json);
		}

		function processFile({
			name,
			description,
			webUrl,
			'@content.downloadUrl': src,
			file: { mimeType }
		}) {
			const type = mimeType.slice(0, mimeType.indexOf('/'));

			switch (type) {
				case 'image':
					return {
						type: 'IMAGE',
						title: name,
						caption: description,
						src,
						href: webUrl
					};
				case 'video':
					return {
						type: 'VIDEO',
						title: name,
						caption: description,
						loop: false,
						sources: [{
							source: src,
							type: mimeType
						}]
					};
				case 'audio':
					return {
						type: 'AUDIO',
						loop: false,
						sources: [{
							file: src,
							type: mimeType
						}]
					};
				default:
					throw new Error(`Invalid type: ${type}`);
			}
		}
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/pastebin.js




/* harmony default export */ var pastebin = (new Host('pastebin', {
	name: 'pastebin',
	domains: ['pastebin.com'],
	attribution: false,
	detect: ({ href }) => /^https?:\/\/(?:www\.)?pastebin\.com\/(?:raw\.php\?i=|index\/)?([a-z0-9]{8})/i.exec(href),
	handleLink(href, [, id]) {
		return {
			type: 'IFRAME',
			expandoClass: 'selftext',
			muted: true,
			embed: `https://pastebin.com/embed_iframe.php?i=${id}`,
			height: '500px',
			width: '700px'
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/photobucket.js





/* harmony default export */ var photobucket = (new Host('photobucket', {
	name: 'photobucket',
	domains: ['photobucket.com'],
	logo: 'https://pic2.pbsrc.com/common/favicon.ico',
	detect: ({ href }) => /([is]?)[0-9]+|media|smg|img(?=.photobucket.com)/i.exec(href),
	async handleLink(href, [, prefix]) {
		let src = href.replace('.html', '');

		if (prefix !== 'i') {
			const { imageUrl } = await ajax({
				url: 'https://api.photobucket.com/v2/media/fromurl',
				query: { url: src },
				type: 'json'
			});
			src = imageUrl.replace('http:', 'https:');
		}

		return {
			type: 'IMAGE',
			src
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/picshd.js




/* harmony default export */ var picshd = (new Host('picshd', {
	name: 'picshd',
	domains: ['picshd.com'],
	logo: 'http://picshd.com/assets/ico/favicon.ico',
	detect: ({ pathname }) => /^\/(\w{5,})(?:\.\w+)?$/i.exec(pathname),
	handleLink(href, [, hash]) {
		return {
			type: 'IMAGE',
			src: `http://i.picshd.com/${hash}.jpg`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/pixiv.js




/* harmony default export */ var pixiv = (new Host('pixiv', {
	name: 'pixiv',
	domains: ['pixiv.net'],
	logo: 'https://www.pixiv.net/favicon.ico',
	detect: ({ pathname, searchParams }) => pathname === '/member_illust.php' && searchParams.get('illust_id'),
	handleLink(href, id) {
		return {
			type: 'IFRAME',
			expandoClass: 'image',
			muted: true,
			embed: `https://embed.pixiv.net/embed_mk2.php?id=${id}&size=large`,
			width: '700px',
			height: '700px'
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/poly.js




/* harmony default export */ var poly = (new Host('poly', {
	name: 'Poly',

	domains: ['poly.google.com'],

	attribution: false,

	detect: ({ pathname }) => /^\/view\/([a-zA-Z0-9-]+)\/?$/i.exec(pathname),

	handleLink(href, [, id]) {
		return {
			type: 'IFRAME',
			embed: `https://poly.google.com/view/${id}/embed`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/pornbot.js






/* harmony default export */ var pornbot = (new Host('pornbot', {
	name: 'pornbot',
	domains: ['pornbot.net'],
	logo: 'https://pornbot.net/favicon.ico',
	detect: ({ pathname }) => /^\/([a-z0-9]{8,})/i.exec(pathname),
	async handleLink(href, [, hash]) {
		const info = await ajax({
			url: 'https://pornbot.net/ajax/info.php',
			query: { v: hash },
			type: 'json',
			cacheFor: DAY
		});

		return {
			type: 'VIDEO',
			loop: true,
			muted: true,
			poster: info.poster,
			sources: [{
				source: info.mp4Url,
				type: 'video/mp4'
			}]
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/pornhub.js




/* harmony default export */ var pornhub = (new Host('pornhub', {
	name: 'Pornhub',
	domains: ['www.pornhub.com', 'www.pornhubpremium.com'],
	attribution: false,
	detect: ({ searchParams }) => searchParams.get('viewkey'),
	handleLink(href, path) {
		const url = `https://www.pornhub.com/embed/${path}`;

		return {
			type: 'IFRAME',
			embed: url,
			embedAutoplay: `${url}?autoplay=1`,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/ppy.js




/* harmony default export */ var ppy = (new Host('ppy.sh', {
	name: 'ppy.sh',
	domains: ['osu.ppy.sh'],
	logo: 'https://s.ppy.sh/favicon.ico',
	detect: ({ pathname }) => /^\/ss\/(\d+)/i.exec(pathname),
	handleLink(href, [, code]) {
		return {
			type: 'IMAGE',
			src: `https://osu.ppy.sh/ss/${code}`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/qwipit.js




/* harmony default export */ var qwipit = (new Host('qwipit', {
	name: 'qwipit',
	domains: ['qwip.it'],
	attribution: false,
	detect: ({ pathname }) => /^\/\w+\/(\w+)/i.exec(pathname),
	handleLink(href, [, hash]) {
		return {
			type: 'IFRAME',
			embed: `https://qwip.it/reddit/${hash}`,
			height: '375px',
			width: '485px',
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/rawprogress.js




/* harmony default export */ var rawprogress = (new Host('rawprogress', {
	name: 'Raw progress',
	domains: ['rawprogress.com'],
	attribution: false,
	detect: ({ pathname }) => /^\/e(?:mbed)?\/([^\/]+)/.exec(pathname),
	handleLink(href, [, id]) {
		return {
			type: 'IFRAME',
			expandoClass: 'image',
			embed: `https://rawprogress.com/embed/${id}`,
			muted: true,
			height: '700px',
			width: '800px'
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/redditbooru.js





/* harmony default export */ var redditbooru = (new Host('redditbooru', {
	name: 'redditbooru',
	domains: ['redditbooru.com'],
	logo: 'https://redditbooru.com/favicon.ico',
	detect: ({ pathname }) => /^\/gallery\/([\w]+)(\/[\w\-]+)?/i.exec(pathname),
	async handleLink(href, [, id, base36]) {
		if (base36) {
			id = parseInt(id, 36);
		}

		const info = await ajax({
			url: 'https://redditbooru.com/images/',
			query: { postId: id },
			type: 'json'
		});

		if (!info.length) {
			throw new Error('Gallery was empty.');
		}

		const src = info.map(({ caption, cdnUrl, sourceUrl }) => ({
			type: 'IMAGE',
			title: caption,
			src: cdnUrl,
			caption: sourceUrl ? `Source: <a href="${sourceUrl}">${sourceUrl}</a>` : ''
		}));

		return {
			type: 'GALLERY',
			title: info[0].title,
			src
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/redditmedia.js




/* harmony default export */ var redditmedia = (new Host('redditmedia', {
	name: 'redditmedia',
	domains: ['redditmedia.com'],
	attribution: false,
	detect: ({ hostname, searchParams }) => hostname !== 'pixel.redditmedia.com' && searchParams,
	handleLink(href, searchParams) {
		if (searchParams.get('fm') === 'mp4') {
			return {
				type: 'VIDEO',
				loop: true,
				muted: true,
				sources: [{
					source: href,
					type: 'video/mp4'
				}]
			};
		}

		return {
			type: 'IMAGE',
			src: href
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/reddituploads.js




/* harmony default export */ var reddituploads = (new Host('reddituploads', {
	name: 'reddituploads',
	domains: ['reddituploads.com'],
	attribution: false,
	detect: () => true,
	handleLink(href) {
		return {
			type: 'IMAGE',
			src: href
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/ridewithgps.js




/* harmony default export */ var ridewithgps = (new Host('ridewithgps', {
	name: 'ridewithgps',
	domains: ['ridewithgps.com'],
	attribution: false,
	detect: ({ pathname }) => /^\/(trips|routes)\/(\d+)/i.exec(pathname),
	handleLink(href, [, type, id]) {
		return {
			type: 'IFRAME',
			embed: `https://ridewithgps.com/${type}/${id}/embed`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/simplecove.js





/* harmony default export */ var simplecove = (new Host('simplecove', {
	name: 'SimpleCove',
	domains: ['simplecove.com'],
	logo: 'https://simplecove.com/static/images/reslogo.jpg',
	detect: ({ pathname }) => /^\/(\d+)/i.exec(pathname),
	async handleLink(elem, [, id]) {
		const data = await ajax({
			url: `https://www.simplecove.com/resapi/${id}`,
			type: 'json'
		});

		const images = data.map(x => ({
			src: x.photo_src.replace('http:', 'https:'),
			caption: x.photo_caption,
			type: 'IMAGE'
		}));

		return {
			type: 'GALLERY',
			src: images
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/snag.js




/* harmony default export */ var snag = (new Host('snag', {
	name: 'snag.gy',
	logo: 'https://snaggys3static-snaggy.netdna-ssl.com/favicon.png',
	domains: ['snag.gy'],
	detect: ({ pathname }) => /^\/(\w+)(?:\.(\w+))?$/i.exec(pathname),
	handleLink(href, [, id, extension]) {
		return {
			type: 'IMAGE',
			src: `https://i.snag.gy/${id}.${extension || 'jpg'}`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/soundcloud.js





/* harmony default export */ var soundcloud = (new Host('soundcloud', {
	name: 'soundcloud',
	domains: ['soundcloud.com'],
	logo: 'https://a-v2.sndcdn.com/assets/images/sc-icons/favicon-2cadd14b.ico',
	detect: () => true,
	handleLink(href) {
		return {
			type: 'IFRAME',
			embed: string_namespaceObject.encode`https://w.soundcloud.com/player/?url=${href}`,
			height: '166px',
			width: '700px',
			pause: '{"method":"pause"}',
			play: '{"method":"play"}'
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/spotify.js




/* harmony default export */ var spotify = (new Host('spotify', {
	name: 'spotify',
	domains: ['spotify.com'],
	logo: 'https://spotify.com/favicon.ico',

	detect: ({ href }) => /^https:\/\/(?:open|play)\.spotify\.com\/((?:track|artist|album|user\/\w+\/playlist)\/[a-zA-z0-9]+)$/i.exec(href),
	handleLink(href, [, uri]) {
		return {
			type: 'IFRAME',
			embed: `https://embed.spotify.com/?uri=spotify:${uri.replace(/\//g, ':')}`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/steamcommunity.js





/* harmony default export */ var steamcommunity = (new Host('steamcommunity', {
	name: 'Steam Community',
	logo: 'https://store.steampowered.com/favicon.ico',
	domains: ['steamcommunity.com'],
	detect: ({ pathname, searchParams }) => pathname.startsWith('/sharedfiles/filedetails') && searchParams.get('id'),
	permissions: ['https://api.steampowered.com/ISteamRemoteStorage/GetPublishedFileDetails/*'],
	async handleLink(href, id) {
		const {
			response: {
				publishedfiledetails: [{
					title,
					description: caption,
					preview_url: previewUrl,
					file_url: fileUrl,
					filename
				}]
			}
		} = await ajax({
			method: 'POST',
			url: 'https://api.steampowered.com/ISteamRemoteStorage/GetPublishedFileDetails/v0001/?format=json',
			data: { itemcount: '1', 'publishedfileids[0]': id },
			type: 'json'
		});

		if (!filename) throw new Error('Response missing filename. (Private Steam Community profile?)');

		return {
			type: 'IMAGE',
			title,
			caption,
			src: ['.png', '.jpg', '.gif'].some(ext => filename.endsWith(ext)) ? fileUrl : previewUrl
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/steampowered.js




/* harmony default export */ var steampowered = (new Host('steampowered', {
	name: 'Steam',
	logo: 'https://store.steampowered.com/favicon.ico',
	domains: ['steampowered.com', 'steamusercontent.com'],
	detect: ({ pathname }) => /^\/ugc\/(\d{15,20}\/\w{40})(?:$|\/)/i.exec(pathname),
	handleLink(href, [pathname]) {
		return {
			type: 'IMAGE',
			src: `http://images.akamai.steamusercontent.com${pathname}`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/strawpollcom.js




/* harmony default export */ var strawpollcom = (new Host('strawpoll.com', {
	name: 'strawpoll.com',
	domains: ['strawpoll.com'],
	attribution: false,
	detect: ({ pathname }) => /^\/(?:embed\/)?([a-z0-9]+)/i.exec(pathname),
	handleLink(href, [, id]) {
		return {
			type: 'IFRAME',
			expandoClass: 'selftext',
			muted: true,
			embed: `https://www.strawpoll.com/embed/${id}`,
			height: '450px',
			width: '700px'
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/strawpollme.js




/* harmony default export */ var strawpollme = (new Host('strawpoll', {
	name: 'strawpoll.me',
	domains: ['strawpoll.me'],
	attribution: false,
	detect: ({ pathname }) => /^\/(?:embed_\d\/)?(\d+)/i.exec(pathname),
	handleLink(href, [, uid]) {
		return {
			type: 'IFRAME',
			expandoClass: 'selftext',
			muted: true,
			embed: `https://www.strawpoll.me/embed_1/${uid}`,
			height: '500px',
			width: '700px'
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/streamable.js





/* harmony default export */ var streamable = (new Host('streamable', {
	name: 'streamable',
	domains: ['streamable.com'],
	logo: 'https://cdn-e2.streamable.com/static/14a98f7cb1ddc5213329c039dc39cac543ba410f/img/favicon.ico',
	detect: ({ pathname }) => /^\/(?:[es]\/)?(\w+)(?:\/\w+)?$/i.exec(pathname),
	async handleLink(href, [, hash]) {
		const {
			title,
			files: { mp4: { url } },
			thumbnail_url: thumbnail,
			source
		} = await ajax({
			url: `https://api.streamable.com/videos/${hash}`,
			type: 'json'
		});

		return {
			type: 'VIDEO',
			title,
			loop: true,
			sources: [{
				source: url,
				type: 'video/mp4'
			}],
			poster: thumbnail,
			source
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/streamja.js




/* harmony default export */ var streamja = (new Host('streamja', {
	name: 'streamja',
	domains: ['streamja.com'],
	logo: 'https://streamja.com/favicon.ico',
	detect: ({ pathname }) => /^\/([^\/]+)$/i.exec(pathname),
	handleLink(href, [, code]) {
		const short = code.substring(0, 2).toLowerCase();
		return {
			type: 'VIDEO',
			loop: true,
			sources: [{
				source: `https://upload.streamja.com/mp4/${short}/${code}.mp4`,
				type: 'video/mp4'
			}],
			poster: `https://upload.streamja.com/i/${short}/${code}.jpg`
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/supgif.js




/* harmony default export */ var supgif = (new Host('supgif', {
	name: 'Supgif',
	domains: ['supgif.com'],
	attribution: false,
	detect: ({ pathname }) => /^\/c\/([\w\-]+)/i.exec(pathname),
	handleLink(href, [, id]) {
		return {
			type: 'IFRAME',
			embed: `https://www.supgif.com/embed/${id}`,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/supload.js






/* harmony default export */ var supload = (new Host('supload', {
	name: 'supload',
	domains: ['supload.com'],
	logo: 'https://supload.com/favicon.ico',
	detect: ({ pathname }) => /^\/([A-Za-z0-9_-]+)/i.exec(pathname),
	async handleLink(href, [, id]) {
		const data = await ajax({
			url: 'https://www.supload.com/oembed',
			query: { url: `https://supload.com/${id}`, format: 'json' },
			type: 'json',
			cacheFor: DAY
		});

		if (data.type === 'photo') {
			return {
				type: 'IMAGE',
				src: data.url
			};
		} else {
			return {
				type: 'VIDEO',
				loop: true,
				muted: true,
				sources: [{
					source: data.webmUrl,
					type: 'video/webm'
				}, {
					source: data.mp4Url,
					type: 'video/mp4'
				}]
			};
		}
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/tenor.js





/* harmony default export */ var tenor = (new Host('tenor', {
	name: 'tenor',
	domains: ['tenor.co'],
	logo: 'https://www.tenor.co/favicon.ico',
	detect: (() => {
		const alphabet = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
		const alphabetMap = alphabet.split('').reduce((obj, c, i) => {
			obj[c] = i;
			return obj;
		}, {});

		function parseViewShortId(s) {
			return s.split('').reduce((n, c) => n * alphabet.length + alphabetMap[c], 0);
		}

		return ({ hostname, pathname }) => {
			if (hostname === 'tenor.co') {
				const pathMatch = /^\/([a-zA-Z0-9]+)\.gif$/i.exec(pathname);
				return pathMatch && { id: parseViewShortId(pathMatch[1]) };
			} else if (hostname === 'media.tenor.co') {
				return { id: null };
			} else {
				const pathMatch = /^\/view\/.+\-(\d+)(\.gif)?$/i.exec(pathname);
				return pathMatch && { id: pathMatch[1] };
			}
		};
	})(),
	async handleLink(href, { id }) {
		if (id === null) {
			return {
				type: 'IMAGE',
				src: href
			};
		}

		const { results: [gif] } = await ajax({
			url: 'https://api.tenor.co/v1/gifs',
			query: { key: 'JJHDC7UK73EH', ids: id },
			type: 'json'
		});

		return {
			type: 'IMAGE',
			src: gif.media[0].gif.url,
			title: gif.h1_title,
			caption: gif.generatedcaption
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/tumblr.js






/* harmony default export */ var tumblr = (new Host('tumblr', {
	name: 'tumblr',
	domains: ['tumblr.com'],
	permissions: ['https://api.tumblr.com/v2/blog/*/posts'],
	logo: 'https://secure.assets.tumblr.com/images/favicons/favicon.ico',
	detect({ hostname, pathname }) {
		const pathMatch = /^\/(?:post|image)\/(\d+)(?:\/|$)/i.exec(pathname);
		return pathMatch && [hostname, pathMatch[1]];
	},
	async handleLink(href, [blog, id]) {
		const { response } = await ajax({
			url: `https://api.tumblr.com/v2/blog/${blog}/posts`,
			query: {
				api_key: 'WeJQquHCAasi5EzaN9jMtIZkYzGfESUtEvcYDeSMLICveo3XDq',
				id,
				filter: 'raw'
			},
			type: 'json'
		});

		const post = response.posts[0];

		function render(string) {
			return post.format === 'markdown' ? snudown_es_markdown(string) : string;
		}

		const defaults = {
			title: post.title,
			caption: post.caption,
			credits: `Posted by: <a href="${response.blog.url}">${response.blog.name}</a> @ Tumblr`
		};

		switch (post.type) {
			case 'photo':
				if (!post.photos.length) throw new Error('No images in gallery.');
				return Object.assign({
					type: 'GALLERY'
				}, defaults, {
					src: post.photos.map(photo => ({
						type: 'IMAGE',
						src: photo.original_size.url,
						caption: photo.caption
					}))
				});
			case 'text':
				return Object.assign({
					type: 'TEXT'
				}, defaults, {
					src: render(post.body)
				});
			case 'quote':
				return Object.assign({
					type: 'TEXT'
				}, defaults, {
					credits: post.source,
					src: `<blockquote><p>${render(post.text)}</p></blockquote>`
				});
			case 'link':
				return Object.assign({
					type: 'TEXT'
				}, defaults, {
					title: `<a href="${post.url}">${post.title}</a>`,
					src: render(post.description)
				});
			case 'chat':
				return Object.assign({
					type: 'TEXT'
				}, defaults, {
					src: post.dialogue.reduce((prev, { label, phrase }) => `${prev}<blockquote><p><b>${label}</b> ${phrase}</p></blockquote>`, '')
				});
			case 'answer':
				const asking = post.asking_url ? `<a href="${post.asking_url}">${post.asking_name}</a>` : post.asking_name;

				return Object.assign({
					type: 'TEXT'
				}, defaults, {
					src: `<blockquote><p>${asking} sent: ${post.question}</p></blockquote>${render(post.answer)}`
				});
			default:
				throw new Error(`Unsupported post type: ${post.type}`);
		}
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/twimg.js




/* harmony default export */ var twimg = (new Host('twimg', {
	name: 'twimg',
	domains: ['pbs.twimg.com'],
	logo: 'https://twitter.com/favicon.ico',
	detect: ({ pathname }) => /^\/media\/[\w\-]+\.\w+/i.test(pathname),
	handleLink(href) {
		return {
			type: 'IMAGE',
			src: href
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/twitch.js




/* harmony default export */ var twitch = (new Host('twitch', {
	name: 'twitch.tv',
	domains: ['twitch.tv'],
	logo: 'https://www.twitch.tv/favicon.ico',
	detect: ({ href }) => /^https?:\/\/(?:www\.)?twitch\.tv\/(\w+)(?:\/([cbv])\/([0-9]+))?\/?(?:\?t=(?:([0-9]+)h)?(?:([0-9]+)m)?(?:([0-9]+)s)?)?$/i.exec(href),
	handleLink(href, [, channel, typeId, videoId, h, m, s]) {
		const channelOrVideo = videoId ? `video=${typeId.replace('b', 'a')}${videoId}` : `channel=${channel}`;

		const embed = `https://player.twitch.tv/?${channelOrVideo}&time=${+h || 0}h${+m || 0}m${+s || 0}s`;

		return {
			type: 'IFRAME',
			embed: `${embed}&autoplay=false`,
			embedAutoplay: `${embed}&autoplay=true`,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/twitchclips.js




/* harmony default export */ var twitchclips = (new Host('twitchclips', {
	name: 'twitch.tv clips',
	domains: ['clips.twitch.tv'],
	logo: 'https://www.twitch.tv/favicon.ico',

	detect: ({ pathname }) => /^\/(\w+(?:\/[A-Z]\w+)?)(?:\/|$)/.exec(pathname),
	handleLink(href, [, clipId]) {
		const embed = `https://clips.twitch.tv/embed?clip=${clipId}`;

		return {
			type: 'IFRAME',
			embed: `${embed}&autoplay=false`,
			embedAutoplay: `${embed}&autoplay=true`,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/twitter.js






/* harmony default export */ var twitter = (new Host('twitter', {
	name: 'twitter',
	domains: ['twitter.com'],
	permissions: ['https://api.twitter.com/*'],
	attribution: false,
	detect: ({ href }) => /^https?:\/\/(?:mobile\.)?twitter\.com\/(?:#!\/)?[\w]+\/status(?:es)?\/([\d]+)/i.exec(href),
	async handleLink(href, [, id]) {
		const { html } = await ajax({
			url: 'https://api.twitter.com/1/statuses/oembed.json',
			query: { id, omit_script: false },
			type: 'json'
		});

		const $dummy = $('<div>');

		return {
			type: 'GENERIC_EXPANDO',
			muted: true,
			expandoClass: 'selftext',
			generate: () => $dummy[0],
			onAttach: once_default()(() => {
				$dummy.replaceWith(html);
			})
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/vidble.js






/* harmony default export */ var vidble = (new Host('vidble', {
	name: 'vidble',
	domains: ['vidble.com'],
	logo: 'https://vidble.com/assets/ico/favicon.ico',
	detect: ({ pathname }) => /^\/(show|album)\/([a-z0-9]+)/i.exec(pathname),
	async handleLink(href, [, type, hash]) {
		switch (type) {
			case 'show':
				return {
					type: 'IMAGE',
					src: `https://vidble.com/${hash}_med.jpg`
				};
			case 'album':
				const urlObj = new URL(href);
				const { pics } = await ajax({
					url: string_namespaceObject.encode`https://vidble.com/album/album/${hash}?json=1`,
					type: 'json'
				});

				if (!pics.length) throw new Error('No images in gallery.');

				const src = pics.map((src, i) => {
					urlObj.hash = `#pic_${i}`;
					return {
						type: 'IMAGE',
						src,
						href: urlObj.href
					};
				});

				return {
					type: 'GALLERY',
					src
				};
			default:
				throw new Error(`This should never happen. Invalid type: ${type}`);
		}
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/vidlit.js





/* harmony default export */ var vidlit = (new Host('vidlit', {
	name: 'vidlit',
	domains: ['vidl.it'],
	logo: 'https://vidl.it/favicon.ico',
	detect: ({ pathname }) => /^\/([A-Za-z0-9]+)$/i.exec(pathname),
	async handleLink(href, [, hash]) {
		const oEmbed = await ajax({
			url: 'https://vidl.it/oembed',
			query: { url: href, maxwidth: 640, format: 'json' },
			type: 'json'
		});
		return {
			type: 'IFRAME',
			embed: `https://vidl.it/oembed/${hash}`,
			width: `${oEmbed.width}px`,
			height: `${oEmbed.height}px`,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/vimeo.js




/* harmony default export */ var vimeo = (new Host('vimeo', {
	name: 'vimeo',
	domains: ['vimeo.com'],
	attribution: false,
	detect: ({ pathname }) => /^\/([0-9]+)(?:\/|$)/i.exec(pathname),
	handleLink(href, [, id]) {
		const embed = `https://player.vimeo.com/video/${id}`;
		return {
			type: 'IFRAME',
			embed,
			embedAutoplay: `${embed}?autoplay=true`,
			pause: '{"method":"pause"}',
			play: '{"method":"play"}',
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/vlipsy.js




/* harmony default export */ var vlipsy = (new Host('vlipsy', {
	name: 'Vlipsy',
	domains: ['vlipsy.com'],
	logo: 'https://vlipsy.com/favicon.ico',
	detect: ({ pathname }) => /^\/vlip\/(?:\w+-)*(\w+)$/.exec(pathname),
	handleLink(href, [, id]) {
		return {
			type: 'IFRAME',
			embed: `https://vlipsy.com/embed/${id}`,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/wikipedia.js







/* harmony default export */ var wikipedia = (new Host('wikipedia', {
	name: 'wikipedia',
	domains: ['wikipedia.org', 'wikipedia.com'],
	logo: 'https://en.wikipedia.org/static/favicon/wikipedia.ico',
	detect: url => url.pathname.startsWith('/wiki/') && {
		article: url.pathname.substr(6),
		language: url.host.split('.')[0],
		hash: url.hash.substr(1)
	},
	async handleLink(href, { language, article, hash }) {
		let sectionId = 0;

		if (language === 'www' || language === 'wikipedia') language = 'en';

		if (hash !== '') {
			const sections = await ajax({
				url: `https://${language}.wikipedia.org/w/api.php?action=parse&format=json&prop=sections&page=${article}&origin=*`,
				type: 'json',
				headers: {
					'Api-User-Agent': `Reddit-Enhancement-Suite/${metadata_version} ( ${homepageURL} )`
				}
			});

			for (const section of sections.parse.sections) {
				if (section.anchor === hash) {
					sectionId = section.index;
					break;
				}
			}
		}

		const data = await ajax({
			url: `https://${language}.wikipedia.org/w/api.php?action=parse&format=json&prop=text|displaytitle&section=${sectionId}&page=${article}&origin=*`,
			type: 'json',
			headers: {
				'Api-User-Agent': `Reddit-Enhancement-Suite/${metadata_version} ( ${homepageURL} )`
			}
		});

		const cleanDoc = new DOMParser().parseFromString(data.parse.text['*'], 'text/html');

		for (const e of cleanDoc.querySelectorAll('.metadata, .hatnote, .mw-editsection, .mwe-math-mathml-inline, .reference, .references')) e.remove();

		for (const e of cleanDoc.querySelectorAll('a')) {
			e.href = new URL(e.getAttribute('href'), `https://${language}.wikipedia.org/wiki/${article}`).href;
		}

		return {
			type: 'TEXT',
			title: $('<div>', { html: data.parse.displaytitle || data.parse.title }).text(),
			src: cleanDoc.body.innerHTML
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/xboxdvr.js




/* harmony default export */ var xboxdvr = (new Host('xboxdvr', {
	name: 'XboxDVR',
	domains: ['xboxdvr.com'],
	logo: 'https://xboxdvr.com/assets/favicon.ico',
	detect: ({ pathname }) => /^\/(gamer\/[^\/]+\/\w+\/\d+)(?:\/|$)/.exec(pathname),
	handleLink(href, [, path]) {
		return {
			type: 'IFRAME',
			embed: `https://xboxdvr.com/${path}/embed`,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/xkcd.js






/* harmony default export */ var xkcd = (new Host('xkcd', {
	name: 'xkcd',
	domains: ['xkcd.com'],
	permissions: ['https://xkcd.com/*/info.0.json'],
	logo: 'https://xkcd.com/favicon.ico',
	detect: ({ hostname, pathname }) => ['xkcd.com', 'www.xkcd.com'].includes(hostname) && /^\/([0-9]+)(?:\/|$)/i.exec(pathname),
	async handleLink(href, [, id]) {
		const { title, alt, img } = await ajax({
			url: `https://xkcd.com/${id}/info.0.json`,
			type: 'json'
		});

		return {
			type: 'IMAGE',
			title,
			caption: escapeHTML(alt),
			src: img
		};
	}
}));
// CONCATENATED MODULE: ./lib/modules/hosts/youtube.js




/* harmony default export */ var youtube = (new Host('youtube', {
	name: 'youtube',
	attribution: false,
	domains: ['youtube.com', 'youtu.be'],
	detect: ({ pathname, hostname, searchParams }) => {
		const split = pathname.substring(1).split('/');

		if (split[0] === 'channel' && split[2] === 'live') return [`live_stream?channel=${split[1]}`, searchParams];

		if (hostname.endsWith('youtu.be')) return [split[0], searchParams];

		if (searchParams.has('v')) return [searchParams.get('v'), searchParams];

		if (/watch|embed|v/i.exec(split[0])) return [split[1], searchParams];

		if (split[0] === 'attribution_link' && searchParams.has('u')) {
			const videoID = new URLSearchParams(searchParams.get('u').split('?')[1]);
			if (videoID.has('v')) return [videoID.get('v'), searchParams];
		}
	},
	handleLink(href, [path, searchParams]) {
		const url = new URL(`https://www.youtube.com/embed/${path}`);
		url.searchParams.set('version', '3');
		url.searchParams.set('rel', '0');

		if (searchParams.has('t')) {
			let start = 0;
			const timeBlocks = { h: 3600, m: 60, s: 1 };
			const timeRe = /[0-9]+[hms]/ig;

			const timeMatch = searchParams.get('t').match(timeRe);

			if (timeMatch) {
				for (const ts of timeMatch) {
					const unit = timeBlocks[ts.slice(-1)];
					const amount = parseInt(ts.slice(0, -1), 10);

					start += unit * amount;
				}
			} else {
				start = parseInt(searchParams.get('t'), 10);
				if (isNaN(start)) start = 0;
			}
			url.searchParams.set('start', String(start));
		}

		for (const k of ['end', 'start', 'list']) {
			if (searchParams.has(k)) url.searchParams.set(k, searchParams.get(k));
		}

		return {
			type: 'IFRAME',
			embed: url.href,
			embedAutoplay: `${url.href}&autoplay=1`,
			fixedRatio: true
		};
	}
}));
// CONCATENATED MODULE: ./node_modules/sibling-loader?import=default!./lib/modules/hosts/default.js
/* generated by sibling-loader */






















































































/* harmony default export */ var modules_hosts_default = ({ "aarli.js": aarli, "adultswim.js": adultswim, "archilogic.js": archilogic, "archiveis.js": archiveis, "bime.js": bime, "clyp.js": clyp, "codepen.js": codepen, "coub.js": coub, "ctrlv.js": ctrlv, "dailymotion.js": dailymotion, "default.js": hosts_default, "defaultAudio.js": defaultAudio, "defaultVideo.js": defaultVideo, "derpibooru.js": derpibooru, "deviantart.js": deviantart, "dropbox.js": dropbox, "fiveHundredPx.js": fiveHundredPx, "flickr.js": flickr, "futurism.js": futurism, "gatherer.js": gatherer, "getyarn.js": getyarn, "gfycat.js": gfycat, "gifyoutube.js": gifyoutube, "giphy.js": giphy, "github.js": github, "googlemaps.js": googlemaps, "graphiq.js": graphiq, "gyazo.js": gyazo, "hastebin.js": hastebin, "iloopit.js": iloopit, "imgflip.js": imgflip, "imgur.js": imgur, "instagram.js": instagram, "ireddit.js": ireddit, "jsfiddle.js": jsfiddle, "liveleak.js": liveleak, "livememe.js": livememe, "makeameme.js": makeameme, "masterypoints.js": masterypoints, "memecrunch.js": memecrunch, "memedad.js": memedad, "memegen.js": memegen, "miiverse.js": miiverse, "mixer.js": mixer, "oddshot.js": oddshot, "onedrive.js": onedrive, "pastebin.js": pastebin, "photobucket.js": photobucket, "picshd.js": picshd, "pixiv.js": pixiv, "poly.js": poly, "pornbot.js": pornbot, "pornhub.js": pornhub, "ppy.js": ppy, "qwipit.js": qwipit, "rawprogress.js": rawprogress, "redditbooru.js": redditbooru, "redditmedia.js": redditmedia, "reddituploads.js": reddituploads, "ridewithgps.js": ridewithgps, "simplecove.js": simplecove, "snag.js": snag, "soundcloud.js": soundcloud, "spotify.js": spotify, "steamcommunity.js": steamcommunity, "steampowered.js": steampowered, "strawpollcom.js": strawpollcom, "strawpollme.js": strawpollme, "streamable.js": streamable, "streamja.js": streamja, "supgif.js": supgif, "supload.js": supload, "tenor.js": tenor, "tumblr.js": tumblr, "twimg.js": twimg, "twitch.js": twitch, "twitchclips.js": twitchclips, "twitter.js": twitter, "vidble.js": vidble, "vidlit.js": vidlit, "vimeo.js": vimeo, "vlipsy.js": vlipsy, "wikipedia.js": wikipedia, "xboxdvr.js": xboxdvr, "xkcd.js": xkcd, "youtube.js": youtube });
// CONCATENATED MODULE: ./lib/modules/showImages.js
































const siteModules = flow_default()(() => Object.values(modules_hosts_default), map_default()(host => downcast(host, Host)), keyBy_default()(host => host.moduleID))();
const genericHosts = [siteModules.default, siteModules.defaultVideo, siteModules.defaultAudio];

const showImages_module = new Module('showImages');

showImages_module.moduleName = 'showImagesName';
showImages_module.category = 'productivityCategory';
showImages_module.description = 'showImagesDesc';
showImages_module.bodyClass = true;
showImages_module.options = Object.assign({
	mediaBrowse: {
		title: 'showImagesMediaBrowseTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesMediaBrowseDesc'
	},
	browsePreloadCount: {
		title: 'showImagesBrowsePreloadCountTitle',
		type: 'text',
		value: '1',
		description: 'showImagesBrowsePreloadCountDesc',
		dependsOn: options => options.mediaBrowse.value
	},
	galleryPreloadCount: {
		title: 'showImagesGalleryPreloadCountTitle',
		type: 'text',
		value: '2',
		description: 'showImagesGalleryPreloadCountDesc'
	},
	conserveMemory: {
		title: 'showImagesConserveMemoryTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesConserveMemoryDesc'
	},
	bufferScreens: {
		title: 'showImagesBufferScreensTitle',
		type: 'text',
		value: '2',
		description: 'showImagesBufferScreensDesc',
		dependsOn: options => options.conserveMemory.value,
		advanced: true
	},
	maxWidth: {
		title: 'showImagesMaxWidthTitle',
		type: 'text',
		value: '100%',
		description: 'showImagesMaxWidthDesc',
		advanced: true
	},
	maxHeight: {
		title: 'showImagesMaxHeightTitle',
		type: 'text',
		value: '80%',
		description: 'showImagesMaxHeightDesc',
		advanced: true
	},
	displayOriginalResolution: {
		title: 'showImagesDisplayOriginalResolutionTitle',
		type: 'boolean',
		value: false,
		description: 'showImagesDisplayOriginalResolutionDesc'
	},
	selfTextMaxHeight: {
		title: 'showImagesSelfTextMaxHeightTitle',
		type: 'text',
		value: '0',
		description: 'showImagesSelfTextMaxHeightDesc',
		advanced: true
	},
	commentMaxHeight: {
		title: 'showImagesCommentMaxHeightTitle',
		type: 'text',
		value: '0',
		description: 'showImagesCommentMaxHeightDesc',
		advanced: true
	},
	autoMaxHeight: {
		title: 'showImagesAutoMaxHeightTitle',
		type: 'boolean',
		value: false,
		description: 'showImagesAutoMaxHeightDesc',
		dependsOn: options => !!parseInt(options.selfTextMaxHeight.value, 10) || !!parseInt(options.commentMaxHeight.value, 10),
		advanced: true
	},
	openInNewWindow: {
		title: 'showImagesOpenInNewWindowTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesOpenInNewWindowDesc'
	},
	hideNSFW: {
		title: 'showImagesHideNSFWTitle',
		type: 'boolean',
		value: false,
		description: 'showImagesHideNSFWDesc'
	},
	highlightNSFWButton: {
		title: 'showImagesHighlightNSFWButtonTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesHighlightNSFWButtonDesc',
		bodyClass: true
	},
	highlightSpoilerButton: {
		title: 'showImagesHighlightSpoilerButtonTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesHighlightSpoilerButtonDesc',
		bodyClass: true
	},
	imageZoom: {
		title: 'showImagesImageZoomTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesImageZoomDesc'
	},
	imageMove: {
		title: 'showImagesImageMoveTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesImageMoveDesc'
	},
	mediaControls: {
		title: 'showImagesMediaControlsTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesMediaControlsDesc'
	},
	mediaControlsPosition: {
		title: 'showImagesMediaControlsPositionTitle',
		dependsOn: options => options.mediaControls.value,
		type: 'enum',
		value: 'top-left',
		values: [{
			name: 'Top left',
			value: 'top-left'
		}, {
			name: 'Top right',
			value: 'top-right'
		}, {
			name: 'Bottom left.',
			value: 'bottom-left'
		}, {
			name: 'Bottom right.',
			value: 'bottom-right'
		}],
		description: 'showImagesMediaControlsPositionDesc'
	},
	clippy: {
		title: 'showImagesClippyTitle',
		dependsOn: options => options.mediaControls.value,
		type: 'boolean',
		value: true,
		description: 'showImagesClippyDesc'
	},
	crossposts: {
		title: 'showImagesCrosspostsTitle',
		description: 'showImagesCrosspostsDescription',
		type: 'enum',
		value: 'withMetadata',
		values: [{
			name: 'Do not replace Reddit crosspost expando',
			value: 'none'
		}, {
			name: 'Show with original post\'s metadata',
			value: 'withMetadata'
		}, {
			name: 'Show without metadata',
			value: 'plain'
		}]
	},
	displayImageCaptions: {
		title: 'showImagesDisplayImageCaptionsTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesDisplayImageCaptionsDesc',
		advanced: true,
		bodyClass: true
	},
	captionsPosition: {
		title: 'showImagesCaptionsPositionTitle',
		dependsOn: options => options.displayImageCaptions.value,
		type: 'enum',
		value: 'titleAbove',
		values: [{
			name: 'Display all captions above image.',
			value: 'allAbove'
		}, {
			name: 'Display title and caption above image, credits below.',
			value: 'creditsBelow'
		}, {
			name: 'Display title above image, caption and credits below.',
			value: 'titleAbove'
		}, {
			name: 'Display all captions below image.',
			value: 'allBelow'
		}],
		description: 'showImagesCaptionsPositionDesc',
		advanced: true,
		bodyClass: true
	},
	markVisited: {
		title: 'showImagesMarkVisitedTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesMarkVisitedDesc',
		advanced: true
	},
	markSelftextVisited: {
		title: 'showImagesMarkSelftextVisitedTitle',
		dependsOn: options => options.markVisited.value,
		type: 'boolean',
		value: false,
		description: 'showImagesMarkSelftextVisitedDesc',
		advanced: true
	},
	sfwHistory: {
		title: 'showImagesSfwHistoryTitle',
		dependsOn: options => options.markVisited.value,
		type: 'enum',
		value: 'add',
		values: [{
			name: 'Add links to history',
			value: 'add'
		}, {
			name: 'Color links, but do not add to history',
			value: 'color'
		}, {
			name: 'Do not add or color links.',
			value: 'none'
		}],
		description: 'showImagesSfwHistoryDesc'
	},
	galleryRememberWidth: {
		title: 'showImagesGalleryRememberWidthTitle',
		dependsOn: options => options.imageZoom.value,
		type: 'boolean',
		value: true,
		description: 'showImagesGalleryRememberWidthDesc'
	},
	galleryAsFilmstrip: {
		title: 'showImagesGalleryAsFilmstripTitle',
		type: 'boolean',
		value: false,
		description: 'showImagesGalleryAsFilmstripDesc'
	},
	filmstripLoadIncrement: {
		title: 'showImagesFilmstripLoadIncrementTitle',
		dependsOn: options => options.galleryAsFilmstrip.value,
		type: 'text',
		value: '30',
		description: 'showImagesFilmstripLoadIncrementDesc'
	},
	useSlideshowWhenLargerThan: {
		title: 'showImagesUseSlideshowWhenLargerThanTitle',
		dependsOn: options => options.galleryAsFilmstrip.value,
		type: 'text',
		value: '0',
		description: 'showImagesUseSlideshowWhenLargerThanDesc'
	},
	convertGifstoGfycat: {
		title: 'showImagesConvertGifstoGfycatTitle',
		type: 'boolean',
		value: false,
		description: 'showImagesConvertGifstoGfycatDesc'
	},
	showViewImagesTab: {
		title: 'showImagesShowViewImagesTabTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesShowViewImagesTabDesc'
	},
	autoExpandTypes: {
		title: 'showImagesAutoExpandTypesTitle',
		type: 'enum',
		value: 'any',
		values: [{
			name: 'Images (but occasionally also .gif)',
			value: 'image'
		}, {
			name: 'Images, text',
			value: 'image text'
		}, {
			name: 'Images, text, galleries, and muted videos',
			value: 'image text gallery video'
		}, {
			name: 'All muted expandos (includes iframes)',
			value: 'any'
		}],
		description: 'showImagesAutoExpandTypesDesc'
	},
	autoExpandSelfText: {
		title: 'showImagesAutoExpandSelfTextTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesAutoExpandSelfTextDesc'
	},
	autoExpandSelfTextFirstVisibleNonMuted: {
		title: 'showImagesAutoExpandSelfTextFirstVisibleNonMutedTitle',
		dependsOn: options => options.autoExpandSelfText.value,
		type: 'boolean',
		value: true,
		description: 'showImagesAutoExpandSelfTextFirstVisibleNonMutedDesc'
	},
	autoExpandSelfTextNSFW: {
		title: 'showImagesAutoExpandSelfTextNSFWTitle',
		dependsOn: options => options.autoExpandSelfText.value,
		type: 'boolean',
		value: false,
		description: 'showImagesAutoExpandSelfTextNSFWDesc'
	},
	showSiteAttribution: {
		title: 'showImagesShowSiteAttributionTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesShowSiteAttributionDesc'
	},
	expandoCommentRedirects: {
		title: 'showImagesExpandoCommentRedirectsTitle',
		type: 'enum',
		value: 'expando',
		values: [{
			name: 'Do nothing',
			value: 'nothing'
		}, {
			name: 'Create expandos',
			value: 'expando'
		}, {
			name: 'Create expandos, redirect the link back to the image',
			value: 'rewrite'
		}],
		description: 'showImagesExpandoCommentRedirectsDesc'
	},
	showVideoControls: {
		title: 'showImagesShowVideoControlsTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesShowVideoControlsDesc'
	},
	onlyPlayMutedWhenVisible: {
		title: 'showImagesOnlyPlayMutedWhenVisibleTitle',
		dependsOn: options => options.showVideoControls.value,
		type: 'boolean',
		value: true,
		description: 'showImagesOnlyPlayMutedWhenVisibleDesc'
	},
	maxSimultaneousPlaying: {
		title: 'showImagesMaxSimultaneousPlayingTitle',
		dependsOn: options => options.showVideoControls.value,
		type: 'text',
		value: '0',
		description: 'showImagesMaxSimultaneousPlayingDesc'
	},
	autoplayVideo: {
		title: 'showImagesAutoplayVideoTitle',
		type: 'boolean',
		value: true,
		description: 'showImagesAutoplayVideoDesc'
	},
	hidePinnedRedditVideos: {
		title: 'showImagesHidePinnedRedditVideosTitle',
		type: 'boolean',
		value: false,
		description: 'showImagesHidePinnedRedditVideosDesc',
		bodyClass: true
	}
}, Object.values(siteModules).reduce((options, siteModule) => {
	if (genericHosts.includes(siteModule)) return options;

	options[siteModuleOptionKey(siteModule)] = {
		title: siteModule.name,
		description: 'showImagesHostToggleDesc',
		value: true,
		type: 'boolean'
	};

	Object.assign(options, siteModule.options);

	return options;
}, {}));
showImages_module.exclude = [/^\/ads\/[\-\w\._\?=]*/i, 'submit', /^\/subreddits/i, 'd2x'];

showImages_module.beforeLoad = () => {
	const selfTextMaxHeight = parseInt(showImages_module.options.selfTextMaxHeight.value, 10);
	if (selfTextMaxHeight) {
		addCSS(`
			.selftext.expanded ~ * .md {
				max-height: ${selfTextMaxHeight}px;
				overflow-y: auto !important;
				position: relative;
			}
		`);
	}

	const commentMaxHeight = parseInt(showImages_module.options.commentMaxHeight.value, 10);
	if (commentMaxHeight) {
		addCSS(`
			.comment .md {
				max-height: ${commentMaxHeight}px;
				overflow-y: auto !important;
				position: relative;
			}
		`);
	}

	watchForElements(['siteTable'], getSelector(), checkElementForMedia);
	watchForElements(['selfText', 'newComments'], getSelector(true), checkElementForMedia);
};

function getSelector(isSelfText) {
	if (isPageType('comments', 'commentsLinklist', 'profile')) {
		return '#siteTable a.title, .expando .usertext-body > div.md a, .content .usertext-body > div.md a';
	} else if (isSelfText) {
		return '.usertext-body > div.md a';
	} else if (isPageType('wiki')) {
		return '.wiki-page-content a';
	} else if (isPageType('inbox')) {
		return '#siteTable div.entry .md a';
	} else if (isPageType('search')) {
		return '#siteTable a.title, .contents a.search-link';
	} else {
		return '#siteTable a.title, #siteTable_organic a.title';
	}
}

showImages_module.go = () => {
	createImageButtons();

	if (showImages_module.options.mediaBrowse.value) {
		selectedEntry_addListener(mediaBrowse, 'beforeScroll');
	}

	const spotlight = document.querySelector('#siteTable_organic');
	if (spotlight) {
		const nextprev = spotlight.querySelector('.nextprev');
		if (nextprev) {
			nextprev.addEventListener('click', () => {
				const open = spotlight.querySelector('.expando-button.expanded');
				if (open) open.click();
			});
		}
	}
};

showImages_module.afterLoad = () => {
	if (showImages_module.options.conserveMemory.value) {
		enableConserveMemory();
	}

	enableCompleteDeferredLinks();
};

function siteModuleOptionKey(siteModule) {
	const id = siteModule.moduleID;
	return `display_${id}`;
}

function isSiteModuleEnabled(siteModule) {
	const key = siteModuleOptionKey(siteModule);
	return !showImages_module.options[key] || showImages_module.options[key].value;
}

const modulesForHostname = memoize_default()(hostname => {
	const hostComponents = hostname.split('.');

	return Object.values(siteModules).filter(siteModule => isSiteModuleEnabled(siteModule) && siteModule.domains.some(domain => {
		const domainComponents = domain.split('.');
		return isEqual_default()(domainComponents, takeRight_default()(hostComponents, domainComponents.length));
	}));
});

const deferredLinks = new Map();

const checkDeferredLinks = frameThrottle(() => {
	for (const [link, complete] of deferredLinks) {
		if (!shouldLinkBeDeferred(link)) complete();
	}
});

function enableCompleteDeferredLinks() {
	window.addEventListener('scroll', checkDeferredLinks);

	window.addEventListener('resize', checkDeferredLinks);
}

const thingExpandoBuildListeners = $.Callbacks('unique');
function enableConserveMemory() {
	const fullscreenActive = () => !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement);

	const rootMargin = `${100 * (parseInt(showImages_module.options.bufferScreens.value, 10) || 2)}% 100000%`;

	const mediaMap = new WeakMap();
	const ioMedia = new IntersectionObserver(entries => {
		if (fullscreenActive()) return;
		for (const entry of entries) {
			const { open, media } = downcast(mediaMap.get(entry.target), expando_Expando);
			if (open && media) lazyUnload(media, entry.isIntersecting);
		}
	}, { rootMargin });

	const buttonMap = new WeakMap();
	const ioButton = new IntersectionObserver(entries => {
		if (fullscreenActive()) return;
		for (const entry of entries) {
			const expando = downcast(buttonMap.get(entry.target), expando_Expando);
			const { media, open, button } = expando;
			if (!entry.isIntersecting && !open) {
				if (media) ioMedia.unobserve(media.element);
				ioButton.unobserve(button);
				expando.empty();
			}
		}
	}, { rootMargin });

	window.addEventListener('scroll', debounce_default()(idleThrottle(() => {
		if (loadPromise) return;

		const activeExpandos = Array.from(primaryExpandos.values());

		for (const expando of activeExpandos) {
			if (expando.isAttached()) {
				const { media, open, button } = expando;
				if (media) {
					if (open) {
						ioMedia.observe(media.element);
						mediaMap.set(media.element, expando);
					} else {
						ioButton.observe(button);
						buttonMap.set(button, expando);
					}
				}
			} else {
				expando.destroy();
			}
		}
	}), 1000));
}

const stopEventPropagation = e => {
	e.stopImmediatePropagation();
};

function lazyUnload(media, keepLoaded) {
	if (keepLoaded && media.state === 'unloaded') {
		media.element.removeEventListener('mediaResize', stopEventPropagation, true);
		media.restore();
		media.state = 'loaded';
	} else if (!keepLoaded && media.state === 'loaded' && media.supportsUnload()) {
		media.element.addEventListener('mediaResize', stopEventPropagation, true);
		media.unload();
		media.state = 'unloaded';
	}
}

let viewImagesButton;
let autoExpandActive = false;
let mediaBrowseModeActive = false;

function toggleViewImages() {
	viewImagesButton.click();
}

function createImageButtons() {
	if (showImages_module.options.showViewImagesTab.value) {
		viewImagesButton = createElement_namespaceObject.tabMenuItem({
			text: 'show images',
			className: 'res-show-images',
			aftercontent: ' (0)' });

		viewImagesButton.addEventListener('change', e => {
			autoExpandActive = e.detail;

			updateRevealedImages({ onlyOpen: autoExpandActive });
		});
	}
}

function showImages_refresh() {
	checkDeferredLinks();
	updateAutoExpandCount();
}

const updateAutoExpandCount = debounce_default()(() => {
	if (!viewImagesButton) return;

	const count = Array.from(primaryExpandos.values()).filter(expando => expando.isAttached() && expando.button.offsetParent && isExpandWanted(expando, { autoExpand: true })).length;

	requestAnimationFrame(() => viewImagesButton.setAttribute('aftercontent', ` (${count})`));
}, 200);

const updateRevealedImages = debounce_default()(({ onlyOpen = false } = {}) => {
	flow_default()(Array.from, filter_default()(expando => expando.isAttached() && expando.button.offsetParent), sortExpandosVertically, forEachChunked(expando => {
		const open = isExpandWanted(expando);
		if (open) expando.expand();else if (!onlyOpen) expando.collapse();
	}))(primaryExpandos.values());
}, 100, { leading: true });

const sortExpandosVertically = sortBy_default()(v => v.button.getBoundingClientRect().top);

function toggleThingExpandos(thing, { scrollOnToggle, isUserAction } = {}) {
	const expandos = expando_Expando.getAllExpandosFrom(thing);
	if (!expandos.length) return;

	const openExpandos = expandos.filter(v => v.open);

	if (openExpandos.length) {
		for (const expando of openExpandos) expando.collapse();

		if (scrollOnToggle) scrollToElement(thing.entry, null, { scrollStyle: 'directional' });
	} else {
		for (const expando of expandos) {
			if (!(expando instanceof expando_Expando) || isExpandWanted(expando, { thing, autoExpandFirstVisibleNonMutedInThing: true, autoExpand: true, autoExpandTypes: [], ignoreDuplicatesScope: thing.entry })) {
				if (isUserAction && expando.unlock) expando.unlock();
				expando.expand();
			}
		}

		if (scrollOnToggle) scrollToElement(thing.entry, null, { scrollStyle: 'top' });
	}
}

const preloadExpandos = idleThrottle((fromThing, direction, preloadCount = parseInt(showImages_module.options.browsePreloadCount.value, 10)) => {
	const pieces = [];
	let target = fromThing;

	do {
		const expando = expando_Expando.getEntryExpandoFrom(target);
		if (expando && expando instanceof expando_Expando) pieces.push(expando);
	} while ((target = target.getNext({ direction })) && pieces.length <= preloadCount);

	preloadMedia(pieces);
});

function mediaBrowse(selected, unselected, options) {
	if (!selected || !options.allowMediaBrowse || autoExpandActive) return;

	const oldExpando = expando_Expando.getEntryExpandoFrom(unselected);
	const newExpando = expando_Expando.getEntryExpandoFrom(selected);

	if (oldExpando) {
		mediaBrowseModeActive = oldExpando.expandWanted || oldExpando.open;
		oldExpando.collapse();
	}

	if (mediaBrowseModeActive && newExpando) {
		newExpando.expand();
		options.scrollStyle = 'top';

		preloadExpandos(selected, options.direction);
	}
}

function hasEntryAnyExpandedNonMuted(thing) {
	return expando_Expando.getTextExpandosFrom(thing).some(expando => expando.types.includes('non-muted') && (expando.open || expando.expandWanted));
}

const showImages_types = ['selftext', 'video', 'image', 'iframe', 'gallery', 'native', 'muted', 'non-muted'];

function matchesTypes(wantedTypes, expandoTypes = showImages_types) {
	return !wantedTypes.length || !!intersection_default()(expandoTypes, wantedTypes).length;
}

function isExpandWanted(expando, {
	thing,
	autoExpand = autoExpandActive,
	autoExpandTypes = showImages_module.options.autoExpandTypes.value.replace('any', '').split(' ').filter(Boolean),
	ignoreDuplicates = true,
	ignoreDuplicatesScope,
	onlyExpandMuted = true,
	autoExpandFirstVisibleNonMutedInThing = false
} = {}) {
	if (ignoreDuplicates && !expando.isPrimary()) {
		if (!ignoreDuplicatesScope) return false;
		const primary = expando.getPrimary();
		if (primary && ignoreDuplicatesScope.contains(primary.button)) return false;
	}

	const expandoIsNonMuted = expando.types.includes('non-muted');

	const typeCriteriaOK = matchesTypes(autoExpandTypes, expando.types);
	const muteCriteriaOK = !(onlyExpandMuted && expandoIsNonMuted) || autoExpandFirstVisibleNonMutedInThing && elementInViewport(expando.button) && !hasEntryAnyExpandedNonMuted(thing);

	return autoExpand && muteCriteriaOK && typeCriteriaOK;
}

async function convertGifToVideo(options) {
	try {
		const info = await ajax({
			type: 'json',
			url: 'https://upload.gfycat.com/transcodeRelease',
			query: { fetchUrl: options.src },
			cacheFor: DAY
		});

		if (!info.gfyName) throw new Error('gfycat transcode did not contain "gfyName"');

		return {
			options: await siteModules.gfycat.handleLink('', [], info),
			siteModule: siteModules.gfycat
		};
	} catch (e) {
		throw new Error(`Could not convert gif to video ${options.src}: ${e}`);
	}
}

function resolveMediaUrl(element, thing) {
	if (showImages_module.options.expandoCommentRedirects.value !== 'nothing' && thing && element.classList.contains('title')) {
		const dataUrl = thing.element.getAttribute('data-url');
		const fullDataUrl = dataUrl && new URL(dataUrl, location.href);
		if (fullDataUrl && fullDataUrl.href !== thing.getCommentsLink().href) {
			return fullDataUrl;
		}
	}

	return new URL(element.href, location.href);
}

function promptSiteModulePermissions({ name, permissions = [] }) {
	const urlStripRe = /((?:\w+\.)+\w+)(?=\/|$)/i;
	notifications_showNotification({
		header: 'Permission required',
		moduleID: 'permissions',
		closeDelay: 20000,
		message: `
			<p>In order to inline expand content from ${name}, RES needs permission to access these sites:</p>
			<p>${permissions.map(url => `<code>${urlStripRe.exec(url)[0]}</code>`).join(', ')}</p>
			<p>Be assured RES does not access/modify any of your information on these domains - it only accesses the public API.</p>
		`
	});
	return permissions_namespaceObject.request(permissions);
}

const generateSiteModuleLock = memoize_default()(siteModule => {
	if (!siteModule.permissions) return {};

	let resolveLock;
	return {
		unlock: async () => {
			if (resolveLock) await promptSiteModulePermissions(siteModule).then(resolveLock);
			resolveLock = null;
		},
		lock: permissions_namespaceObject.has(siteModule.permissions).then(hasPermission => {
			if (!hasPermission) return new Promise(resolve => {
				resolveLock = resolve;
			});
		})
	};
});

function getMediaInfo(mediaUrl, thing) {
	const matchingHosts = [...modulesForHostname(mediaUrl.hostname), ...genericHosts];

	for (const siteModule of matchingHosts) {
		const detectResult = siteModule.detect(mediaUrl, thing);
		if (detectResult) {
			const permissions = generateSiteModuleLock(siteModule);
			return { detectResult, siteModule, permissions, href: mediaUrl.href };
		}
	}
}

const linksMap = new WeakMap();
function getLinkExpando(link) {
	return linksMap.get(link);
}

function shouldLinkBeDeferred(element) {
	const thing = Thing_Thing.from(element);
	return thing && !thing.isContentVisible() && !(thing.filter && thing.filter.case.hasType('hasExpando'));
}

const inText = element => !!element.closest('.md, .search-result-footer');

async function checkElementForMedia(element) {
	if (shouldLinkBeDeferred(element)) {
		await new Promise(resolve => deferredLinks.set(element, resolve));
		deferredLinks.delete(element);
	}

	const thing = Thing_Thing.from(element);
	const entryExpando = !inText(element) && expando_Expando.getEntryExpandoFrom(thing);
	const nativeExpando = entryExpando instanceof expando_Expando ? null : entryExpando;

	if (showImages_module.options.hideNSFW.value && thing && thing.isNSFW()) {
		if (nativeExpando) nativeExpando.detach();
		return;
	}

	if (nativeExpando) {
		trackNativeExpando(nativeExpando, element, thing);

		if (nativeExpando.open) {
			console.log('Native expando has already been opened; skipping.', element.href);
			return;
		}
	}

	const mediaUrl = resolveMediaUrl(element, thing);
	const mediaInfo = getMediaInfo(mediaUrl, thing);

	if (!mediaInfo) return;

	if (thing && thing.isCrosspost() && showImages_module.options.crossposts.value === 'none') {
		return;
	}

	if (mediaUrl && showImages_module.options.expandoCommentRedirects.value === 'rewrite') {
		element.href = mediaUrl.href;
		element.removeAttribute('data-inbound-url');
	}

	const { lock = null, unlock = null } = mediaInfo.permissions;

	const expando = new expando_Expando(mediaInfo.href, lock, unlock);
	expando_expandos.set(expando.button, expando);
	linksMap.set(element, expando);

	expando.button.setAttribute('data-host', mediaInfo.siteModule.moduleID);
	expando.box.setAttribute('data-host', mediaInfo.siteModule.moduleID);

	expando.onExpand(() => {
		trackMediaLoad(element, thing);
	});

	expando.button.addEventListener('mousedown', () => {
		if (!expando.media && expando.generateMedia) expando.generateMedia();
	});

	expando.button.addEventListener('click', () => {
		if (expando.unlock) expando.unlock();
		expando.toggle();
	});

	if (nativeExpando) nativeExpando.detach();
	placeExpando(expando, element, thing);

	if (thing) thingExpandoBuildListeners.fire(thing);

	await lock;

	try {
		await completeExpando(expando, thing, mediaInfo);
	} catch (e) {
		console.error(`showImages: could not create expando for ${mediaInfo.href}`);
		console.error(e);

		if (nativeExpando) nativeExpando.reattach();
		expando.destroy();
		linksMap.delete(element);
	}

	if (thing) thingExpandoBuildListeners.fire(thing);
}

function placeExpando(expando, element, thing) {
	if (!inText(element) && thing && thing.getTitleElement()) {
		$(expando.button).insertAfter(element.parentElement);
		thing.entry.appendChild(expando.box);
	} else {
		$(element).add($(element).next('.keyNavAnnotation')).last().after(expando.box).after($('<span class="res-freetext-expando">').append(expando.button));
	}
}

async function completeExpando(expando, thing, mediaInfo) {
	expando.initialize((await retrieveExpandoOptions(thing, mediaInfo)));

	const hideButton = thing && thing.getHideElement();
	if (hideButton) hideButton.addEventListener('click', () => {
		expando.destroy();
	});

	if (thing && thing.isComment()) {
		expando.onExpand(once_default()(() => {
			let wasOpen;

			$([thing, ...thing.getParents()].map(e => e.entry)).find('.tagline > .expand, > .buttons .toggleChildren').click(() => {
				if (thing.isContentVisible()) {
					if (wasOpen && expando.media) expando.expand();
				} else {
					wasOpen = expando.open;
					if (expando.open) expando.collapse();
				}

				updateAutoExpandCount();
			});
		}));
	}

	if (showImages_module.options.autoMaxHeight.value && thing && inText(expando.button)) {
		thing.entry.addEventListener('mediaResize', updateParentHeight);
	}

	if (!expando.open) {
		let autoExpand;
		let autoExpandFirstVisibleNonMutedInThing;

		if (showImages_module.options.autoExpandSelfText.value && inText(expando.button) && thing && thing.isSelfPost() && !isPageType('comments')) {
			const dontAutoExpandNSFW = !showImages_module.options.autoExpandSelfTextNSFW.value && thing.isNSFW();
			autoExpand = !dontAutoExpandNSFW;
			autoExpandFirstVisibleNonMutedInThing = showImages_module.options.autoExpandSelfTextFirstVisibleNonMuted.value;
		}

		if (isExpandWanted(expando, { thing, autoExpand, autoExpandFirstVisibleNonMutedInThing })) {
			expando.expand();
		}
	}

	updateAutoExpandCount();
}

const retrieveExpandoOptions = memoize_default()(async (thing, { siteModule, detectResult, href }) => {
	let mediaOptions = await siteModule.handleLink(href, detectResult);

	if (showImages_module.options.convertGifstoGfycat.value && mediaOptions.type === 'IMAGE' && /^(http|https|ftp):\/\/.*\.gif($|\/?)/.test(mediaOptions.src)) {
		try {
			({ options: mediaOptions, siteModule } = await convertGifToVideo(mediaOptions));
		} catch (e) {
			console.log(e);
		}
	}

	if (mediaOptions.title && thing && string_namespaceObject.areSimilar(mediaOptions.title, thing.getTitle())) {
		mediaOptions.title = '';
	}

	const attribution = showImages_module.options.showSiteAttribution.value && thing && thing.isPost() && !thing.isSelfPost() && siteModule.domains.length && siteModule.attribution !== false;

	const isMuted = media => media.muted || ['IMAGE', 'TEXT'].includes(media.type);
	const muted = mediaOptions.type === 'GALLERY' ? mediaOptions.src.every(isMuted) : isMuted(mediaOptions);

	return {
		types: [mediaOptions.type, muted ? 'muted' : 'non-muted', ...(mediaOptions.expandoClass || '').split(' ')].filter(v => v).map(s => s.toLowerCase()),
		buttonInfo: getMediaButtonInfo(mediaOptions),
		generateMedia() {
			const media = generateMedia(mediaOptions, { href });
			if (showImages_module.options.crossposts.value === 'withMetadata' && thing && thing.isCrosspost()) {
				media.element.prepend(crosspostMetadataTemplate(thing.element.dataset));
			}
			if (attribution) addSiteAttribution(siteModule, media);
			return media;
		}
	};
}, (thing, { href }) => href);

function updateParentHeight(e) {
	const thing = Thing_Thing.from(e.target);

	if (!thing) return;

	const basisHeight = thing.isSelfPost() && parseInt(showImages_module.options.selfTextMaxHeight.value, 10) || thing.isComment() && parseInt(showImages_module.options.commentMaxHeight.value, 10) || 0;

	if (basisHeight > 0) {
		const expandoHeight = Array.from(thing.entry.querySelectorAll('.res-expando-box, .expando-button.expanded')).reduce((a, b) => a + b.getBoundingClientRect().height, 0);

		thing.element.querySelector('.md').style.maxHeight = `${basisHeight + expandoHeight}px`;
	}
}

function trackNativeExpando(expando, element, thing) {
	if (!showImages_module.options.markSelftextVisited.value && expando.button.classList.contains('selftext')) return;

	const trackLoad = once_default()(() => trackMediaLoad(element, thing));

	if (expando.open) trackLoad();else expando.button.addEventListener('click', trackLoad);
}

function getMediaButtonInfo(options) {
	let title = '';

	let type = options.type;

	if (options.type === 'GALLERY') {
		if (options.src.length === 1) {
			type = options.src[0].type;
		} else {
			title += `${options.src.length} items in gallery`;
		}
	}

	const defaultClass = {
		IMAGE: 'image',
		GALLERY: 'image gallery',
		TEXT: 'selftext',
		VIDEO: options.muted ? 'video-muted' : 'video',
		IFRAME: options.muted ? 'video-muted' : 'video',
		AUDIO: 'video',
		GENERIC_EXPANDO: 'selftext'
	}[type];

	return {
		title,
		mediaClass: options.expandoClass || defaultClass
	};
}

let lastPreloadIndex = 0;
function preloadMedia(pieces) {
	const index = ++lastPreloadIndex;

	return forEachSeq(pieces, piece => {
		if (!piece.generateMedia) return;
		if (lastPreloadIndex !== index) return;

		piece.media = piece.media || piece.generateMedia();
		return piece.media.ready;
	});
}

function generateMedia(options, context) {
	const $span = $('<span>');
	if (options.credits) options.credits = $span.safeHtml(options.credits).html();
	if (options.caption) options.caption = $span.safeHtml(options.caption).html();

	switch (options.type) {
		case 'GALLERY':
			return new showImages_Gallery(options, context);
		case 'IMAGE':
			return new showImages_Image(options, context);
		case 'TEXT':
			return new showImages_Text(options);
		case 'IFRAME':
			return new showImages_Iframe(options);
		case 'VIDEO':
			return new showImages_Video(options, context);
		case 'AUDIO':
			return new showImages_Audio(options);
		case 'GENERIC_EXPANDO':
			return new Generic(options);
		default:
			throw new Error(`Unreachable: invalid media type ${options.type}`);
	}
}

class Media {
	constructor() {
		this.state = 'loaded';
	}

	isAttached() {
		return document.body.contains(this.element);
	}

	expand() {}
	collapse() {}

	supportsUnload() {
		return false;
	}

	unload() {}
	restore() {}
}

class showImages_Gallery extends Media {

	constructor(options, context) {
		super();

		this.filmstripLoadIncrement = parseInt(showImages_module.options.filmstripLoadIncrement.value, 10) || Infinity;
		this.preloadCount = parseInt(showImages_module.options.galleryPreloadCount.value, 10) || 0;
		this.lastRevealedPiece = null;
		this.element = galleryTemplate({
			title: options.title,
			caption: options.caption,
			credits: options.credits,
			src: options.src
		});

		const piecesContainer = this.element.querySelector('.res-gallery-pieces');
		this.individualCtrl = this.element.querySelector('.res-gallery-individual-controls');
		const ctrlPrev = this.individualCtrl.querySelector('.res-gallery-previous');
		const ctrlNext = this.individualCtrl.querySelector('.res-gallery-next');
		this.msgPosition = this.individualCtrl.querySelector('.res-gallery-position');
		this.ctrlToFilmstrip = this.individualCtrl.querySelector('.res-gallery-to-filmstrip');
		this.ctrlConcurrentIncrease = this.element.querySelector('.res-gallery-increase-concurrent');

		this.pieces = options.src.map(src => ({
			generateMedia: () => generateMedia(src, context),
			media: null,
			wrapper: document.createElement('div')
		}));
		piecesContainer.append(...this.pieces.map(({ wrapper }) => wrapper));

		const slideshowWhenLargerThan = parseInt(showImages_module.options.useSlideshowWhenLargerThan.value, 10) || Infinity;
		this.filmstripActive = showImages_module.options.galleryAsFilmstrip.value && this.pieces.length < slideshowWhenLargerThan;

		if (this.filmstripActive || this.pieces.length === 1) {
			this.ready = this.expandFilmstrip();
			this.ctrlConcurrentIncrease.addEventListener('click', () => this.expandFilmstrip());
		} else {
			this.element.classList.add('res-gallery-slideshow');
			this.ready = this.changeSlideshowPiece(0);
			ctrlPrev.addEventListener('click', () => {
				this.changeSlideshowPiece(-1);
			});
			ctrlNext.addEventListener('click', () => {
				this.changeSlideshowPiece(1);
			});

			waitForEvent(this.ctrlToFilmstrip, 'click').then(() => {
				this.expandFilmstrip();
				this.ctrlConcurrentIncrease.addEventListener('click', () => this.expandFilmstrip());
				this.element.classList.remove('res-gallery-slideshow');
			});
		}
	}

	shouldRememberResizeWidth() {
		return showImages_module.options.galleryRememberWidth.value && !this.filmstripActive;
	}

	rememberWidth(piece) {
		const resizedElement = piece.media && piece.media.element.querySelector('.res-media-zoomable');

		const resizedWidth = resizedElement && parseInt(resizedElement.style.width, 10);
		if (resizedWidth) this.lastResizedWidth = resizedWidth;
	}

	restoreWidth(piece) {
		if (!this.lastResizedWidth) return;
		const resizeElement = piece.media && piece.media.element.querySelector('.res-media-zoomable');
		if (resizeElement) resizeMedia(resizeElement, this.lastResizedWidth);
	}

	revealPiece(piece) {
		if (this.shouldRememberResizeWidth() && this.lastRevealedPiece) this.rememberWidth(this.lastRevealedPiece);
		this.lastRevealedPiece = piece;

		piece.media = piece.media || piece.generateMedia();
		const { media, wrapper } = piece;
		if (!media.isAttached()) wrapper.appendChild(media.element);
		wrapper.hidden = false;
		if (this.shouldRememberResizeWidth()) this.restoreWidth(piece);
		media.expand();
	}

	preloadAhead() {
		const preloadFrom = this.pieces.indexOf(this.lastRevealedPiece);
		const preloadTo = Math.min(preloadFrom + this.preloadCount + 1, this.pieces.length);

		return preloadMedia(this.pieces.slice(preloadFrom, preloadTo));
	}

	async expandFilmstrip() {
		const revealFrom = this.lastRevealedPiece ? this.pieces.indexOf(this.lastRevealedPiece) : 0;
		const revealTo = Math.min(revealFrom + this.filmstripLoadIncrement, this.pieces.length);

		this.ctrlConcurrentIncrease.hidden = true;

		await forEachSeq(this.pieces.slice(revealFrom, revealTo), piece => {
			this.revealPiece(piece);
			return piece.media && piece.media.ready;
		});

		if (revealTo < this.pieces.length) {
			this.ctrlConcurrentIncrease.innerText = `Show next ${Math.min(this.filmstripLoadIncrement, this.pieces.length - revealTo)} pieces`;
			this.ctrlConcurrentIncrease.hidden = false;
		}

		return this.preloadAhead();
	}

	changeSlideshowPiece(step) {
		const previous = this.lastRevealedPiece;
		const previousIndex = previous ? this.pieces.indexOf(previous) : 0;

		let newIndex = previousIndex + step;

		newIndex = positiveModulo(newIndex, this.pieces.length);

		this.individualCtrl.setAttribute('first-piece', String(newIndex === 0));
		this.individualCtrl.setAttribute('last-piece', String(newIndex === this.pieces.length - 1));
		this.msgPosition.innerText = String(newIndex + 1);

		this.revealPiece(this.pieces[newIndex]);

		if (previous) {
			const { media, wrapper } = previous;
			if (!media) throw new Error();
			media.collapse();
			wrapper.hidden = true;
		}

		if (showImages_module.options.conserveMemory.value) {
			const first = newIndex - this.preloadCount;
			const last = newIndex + this.preloadCount;

			for (const [index, { media }] of this.pieces.entries()) {
				if (!media) continue;

				const keepLoaded = last > this.pieces.length && last % this.pieces.length >= index || first < 0 && positiveModulo(first, this.pieces.length) <= index || index >= first && index <= last;

				lazyUnload(media, keepLoaded);
			}
		}

		return this.preloadAhead();
	}
}

class showImages_Image extends Media {

	constructor({
		title,
		caption,
		credits,
		src,
		href
	}, context) {
		super();

		this.src = src;

		this.element = imageTemplate({
			title,
			caption,
			credits,
			src,
			href: href || context.href,
			openInNewWindow: showImages_module.options.openInNewWindow.value
		});
		this.image = downcast(this.element.querySelector('img.res-image-media'), HTMLImageElement);
		const anchor = this.element.querySelector('a.res-expando-link');

		this.ready = waitForEvent(this.image, 'load', 'error');

		this.image.addEventListener('error', () => {
			this.element.classList.add('res-media-load-error');
		});

		if (showImages_module.options.displayOriginalResolution.value) {
			this.image.addEventListener('load', () => {
				this.image.title = `${this.image.naturalWidth}  ${this.image.naturalHeight} px`;
			});
		}

		setMediaMaxSize(this.image);
		makeMediaZoomable(this.element, this.image);
		const wrapper = setMediaControls(anchor, src, src);
		makeMediaMovable(this.element, wrapper);
		keepMediaVisible(wrapper);
		makeMediaIndependent(wrapper);
	}

	supportsUnload() {
		return true;
	}

	unload() {
		this.image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';
	}

	restore() {
		this.image.src = this.src;
	}
}

class showImages_Iframe extends Media {

	constructor({
		embed,
		embedAutoplay,
		width = '640px',
		height = '360px',
		fixedRatio = false,
		pause: pauseCommand,
		play: playCommand
	}) {
		super();

		this.loaded = false;
		this.pauseCommand = pauseCommand;
		this.playCommand = playCommand;

		this.element = iframeTemplate({
			url: showImages_module.options.autoplayVideo.value && embedAutoplay ? embedAutoplay : embed,
			width,
			height
		});
		this.iframe = downcast(this.element.querySelector('iframe'), HTMLIFrameElement);
		const iframeWrapper = downcast(this.element.firstElementChild, HTMLElement);
		const dragHandle = this.element.querySelector('.res-iframe-expando-drag-handle');

		makeMediaZoomable(this.element, this.iframe, dragHandle, !fixedRatio);
		makeMediaMovable(this.element, iframeWrapper, dragHandle);
		keepMediaVisible(iframeWrapper);
		makeMediaIndependent(iframeWrapper);
	}

	async expand() {
		if (showImages_module.options.autoplayVideo.value && this.playCommand) {
			if (!this.loaded) await waitForEvent(this.iframe, 'load');
			this.loaded = true;

			try {
				this.iframe.contentWindow.postMessage(this.playCommand, '*');
			} catch (e) {
				console.error('Could not post "play" command to iframe', this, e);
			}
		}
	}

	collapse() {
		if (this.pauseCommand) {
			try {
				this.iframe.contentWindow.postMessage(this.pauseCommand, '*');
				return;
			} catch (e) {
				console.error('Could not post "pause" command to iframe', this, e);
			}
		}

		this.element.remove();
	}
}

class showImages_Text extends Media {
	constructor({
		title,
		credits,
		src
	}) {
		super();

		this.element = textTemplate({
			title,
			credits,
			src: $('<span>').safeHtml(src).html()
		});
	}
}

class showImages_Audio extends Media {

	constructor({
		autoplay = false,
		loop,
		sources
	}) {
		super();

		this.autoplay = autoplay;

		this.element = audioTemplate({
			loop,
			sources
		});
		this.audio = downcast(this.element.querySelector('audio'), HTMLAudioElement);
	}

	collapse() {
		if (!this.isAttached()) return;

		this.autoplay = !this.audio.paused;
		if (!this.audio.paused) this.audio.pause();
	}

	expand() {
		if (this.autoplay) this.audio.play();
	}
}

class Generic extends Media {
	constructor(options) {
		super();

		this.onAttach = options.onAttach;

		this.element = document.createElement('div');
		this.element.appendChild(options.generate());
	}

	collapse() {
		this.element.remove();
	}
}

const trackVisitNative = batch(async things => {
	if (!document.body.classList.contains('gold')) return;

	if (isPrivateBrowsing()) return;

	await ajax({
		method: 'POST',
		url: '/api/store_visits',
		data: { links: things.map(t => t.getFullname()).join(',') }
	});
}, { delay: 10000, size: 50 });

function trackMediaLoad(link, thing) {
	if (showImages_module.options.markVisited.value) {
		if (thing) trackVisitNative(thing);

		const isNSFW = thing && thing.isNSFW();
		const sfwMode = showImages_module.options.sfwHistory.value;

		if ((!isNSFW || sfwMode !== 'none') && thing) thing.element.classList.add('visited');
		if (!isNSFW || sfwMode === 'add') addURLToHistory(link.href);
	}
}

function setMediaControls(media, lookupUrl, downloadUrl) {
	if (!showImages_module.options.mediaControls.value) return media;

	const [y, x] = showImages_module.options.mediaControlsPosition.value.split('-');

	const element = mediaControlsTemplate({ clippy: showImages_module.options.clippy.value, lookupUrl, downloadUrl, x, y });
	const controls = element.querySelector('.res-media-controls');
	$(media).replaceWith(element);
	element.appendChild(media);

	media.classList.add('res-media-rotatable');

	let rotationState = 0;

	function refreshRotatedSize({ width, height }) {
		const horizontal = rotationState % 2 === 0;
		element.style.height = `${horizontal ? height : width}px`;
		element.style.width = `${horizontal ? width : height}px`;
	}

	const hookInResizeObserver = once_default()(() => {
		new lib_default.a(refreshRotatedSize).observe(media);
	});

	function updateRotation() {
		hookInResizeObserver();
		media.setAttribute('rotation', String(positiveModulo(rotationState, 4)));
		refreshRotatedSize(media.getBoundingClientRect());
	}

	controls.addEventListener('click', e => {
		switch (e.target.dataset.action) {
			case 'rotateLeft':
				--rotationState;
				updateRotation();
				break;
			case 'rotateRight':
				++rotationState;
				updateRotation();
				break;
			case 'download':
				permissions_namespaceObject.request(['downloads']).then(() => download(downloadUrl));
				break;
			case 'imageLookup':
				lookupUrl = new URL(downcast(lookupUrl, 'string'), location.href).href;

				openNewTab(string_namespaceObject.encode`https://images.google.com/searchbyimage?image_url=${lookupUrl}`);
				break;
			case 'showImageSettings':
				loadSettingsPage(showImages_module.moduleID, 'mediaControls');
				break;
			case 'clippy':
				if (e.target.classList.contains('res-media-controls-clippy-expanded')) {
					options_set(showImages_module, 'clippy', false);
					e.target.remove();
				} else {
					e.target.classList.add('res-media-controls-clippy-expanded');
					e.target.title = 'Click to disable the info button';
					e.target.innerText = getClippyText();
				}
				break;
			default:
				break;
		}

		e.stopPropagation();
		e.preventDefault();
	});

	return element;
}

function addSiteAttribution(siteModule, media) {
	const $element = $(siteAttributionTemplate({
		name: siteModule.name,
		url: siteModule.landingPage || `https://${siteModule.domains[0]}`,
		logoUrl: siteModule.logo,
		settingsLink: makeUrlHash(showImages_module.moduleID, siteModuleOptionKey(siteModule))
	}));
	const $replace = $('.res-expando-siteAttribution', media.element);
	if ($replace.length) {
		$element.replaceAll($replace);
	} else {
		$element.addClass('res-expando-siteAttribution-generic').appendTo(media.element);
	}
}

function keepMediaVisible(media) {
	media.classList.add('res-media-keep-visible');

	const basisLeft = once_default()(() => downcast(media.parentElement, HTMLElement).getBoundingClientRect().left);
	let isAligned = false;

	media.addEventListener('mediaResize', ({ detail: { width: mediaWidth } }) => {
		const { width: viewportWidth } = getViewportSize();

		if (!isAligned && basisLeft() + mediaWidth < viewportWidth) return;

		const { left: mediaLeft, right: mediaRight } = media.getBoundingClientRect();

		const deltaLeft = mediaLeft - basisLeft();

		if (mediaWidth > viewportWidth) {
			isAligned = true;
			moveMedia(media, -mediaLeft, 0);
		} else if (mediaRight - deltaLeft > viewportWidth) {
			isAligned = true;
			moveMedia(media, viewportWidth - mediaRight, 0);
		} else if (deltaLeft) {
			isAligned = false;
			moveMedia(media, -deltaLeft, 0);
		}
	});
}

function getClippyText() {
	const clippy = [];
	if (showImages_module.options.imageZoom.value) {
		clippy.push('drag to resize');
	}

	if (showImages_module.options.imageMove.value) {
		clippy.push('shift-drag to move');
	}

	return clippy.join(' or ');
}

function setMediaMaxSize(media) {
	let value = showImages_module.options.maxWidth.value;
	let isPercentage = value.endsWith('%');
	const maxWidth = (isPercentage ? getViewportSize().width / 100 : 1) * parseInt(value, 10);
	if (maxWidth) media.style.maxWidth = `${maxWidth}px`;

	value = showImages_module.options.maxHeight.value;
	isPercentage = value.endsWith('%');
	const maxHeight = (isPercentage ? getViewportSize().height / 100 : 1) * parseInt(value, 10);
	if (maxHeight) media.style.maxHeight = `${maxHeight}px`;
}

function addDragListener({ media, element, atShiftKey, onStart, onMove }) {
	let hasFrameExecution = false;
	const setFrameExecution = (() => {
		const throttle = frameThrottle(() => {
			hasFrameExecution = false;
		});
		return () => {
			throttle();
			hasFrameExecution = true;
		};
	})();

	let isActive, hasMoved, lastX, lastY;

	const handleMove = e => {
		const movementX = e.clientX - lastX;
		const movementY = e.clientY - lastY;

		if (!movementX && !movementY) {
			return;
		} else if (1 & ~e.buttons) {
			stop();
			return;
		} else if (atShiftKey !== e.shiftKey) {
			isActive = false;
			({ clientX: lastX, clientY: lastY } = e);
			return;
		}

		if (!isActive) {
			if (onStart) onStart(lastX, lastY);
			isActive = true;
			hasMoved = true;
			requestAnimationFrame(() => {
				media.classList.add('res-media-dragging');
			});
		}

		if (hasFrameExecution) return;
		setFrameExecution();

		onMove(e.clientX, e.clientY, movementX, movementY);
		({ clientX: lastX, clientY: lastY } = e);
	};

	function handleClick(e) {
		if (hasMoved) e.preventDefault();
	}

	function stop() {
		requestAnimationFrame(() => {
			media.classList.remove('res-media-dragging');
		});

		document.removeEventListener('mousemove', handleMove);
		document.removeEventListener('mouseup', stop);

		setTimeout(() => document.removeEventListener('click', handleClick));
	}

	function initiate(e) {
		if (e.button !== 0) return;

		({ clientX: lastX, clientY: lastY } = e);

		hasMoved = false;
		isActive = false;

		document.addEventListener('mousemove', handleMove);
		document.addEventListener('mouseup', stop);
		document.addEventListener('click', handleClick);

		e.preventDefault();
	}

	element.addEventListener('mousedown', initiate);
}

function makeMediaZoomable(media, element, dragInitiater = element, absoluteSizing = false) {
	if (!showImages_module.options.imageZoom.value) return;

	element.classList.add('res-media-zoomable');

	let initialWidth, initialDiagonal, left, top;

	function getDiagonal(x, y) {
		const w = Math.max(1, x - left);
		const h = Math.max(1, y - top);
		return Math.round(Math.hypot(w, h));
	}

	addDragListener({
		media,
		element: dragInitiater,
		atShiftKey: false,
		onStart(x, y) {
			({ left, top, width: initialWidth } = element.getBoundingClientRect());
			initialDiagonal = getDiagonal(x, y);
		},
		onMove(x, y, deltaX, deltaY) {
			if (absoluteSizing) {
				const { width, height } = element.getBoundingClientRect();
				resizeMedia(element, width + deltaX, height + deltaY);
			} else {
				const newWidth = getDiagonal(x, y) / initialDiagonal * initialWidth;
				resizeMedia(element, newWidth);
			}
		}
	});
}

function makeMediaMovable(media, element, dragInitiater = element) {
	if (!showImages_module.options.imageMove.value) return;

	element.classList.add('res-media-movable');

	const mediaManuallyMoved = once_default()(() => {
		element.dispatchEvent(new CustomEvent('mediaManuallyMoved', { bubbles: true }));
	});

	addDragListener({
		media,
		element: dragInitiater,
		atShiftKey: true,
		onMove(x, y, deltaX, deltaY) {
			moveMedia(element, deltaX, deltaY);mediaManuallyMoved();
		}
	});
}

function makeMediaIndependent(element) {
	const wrapper = document.createElement('div');
	const independent = document.createElement('div');
	$(element).replaceWith(wrapper);
	wrapper.appendChild(independent);
	independent.appendChild(element);

	independent.classList.add('res-media-independent');
	wrapper.style.willChange = 'height';

	wrapper.addEventListener('mediaResize', ({ detail: { height } }) => {
		wrapper.style.height = `${height}px`;
	});

	const observer = new lib_default.a(contentRect => {
		element.dispatchEvent(new CustomEvent('mediaResize', { detail: contentRect, bubbles: true }));
	});
	observer.observe(element);
	waitForEvent(element, 'mediaManuallyMoved').then(() => {
		observer.disconnect();
	});
}

const mutedVideoManager = once_default()(() => {
	const maxSimultaneousPlaying = parseInt(showImages_module.options.maxSimultaneousPlaying.value, 10) || Infinity;
	const videos = [];

	const updatePlay = frameThrottle(() => {
		const all = videos.map(video => {
			const thing = Thing_Thing.from(video);
			return {
				video,
				visibility: getPercentageVisibleYAxis(video),
				top: video.getBoundingClientRect().top,
				selected: Number(thing && thing.isSelected())
			};
		});

		const notVisible = all.filter(({ visibility }) => visibility === 0);
		for (const _ref of notVisible) {
			const { video } = _ref;
			if (!video.paused) video.pause();
		}without_default()(all, ...notVisible).sort((a, b) => b.selected - a.selected || b.visibility - a.visibility || a.top - b.top).forEach(({ video }, index) => {
			const play = index < maxSimultaneousPlaying;
			if (play === video.paused) {
				if (play) video.play();else video.pause();
			}
		});
	});

	let intervalId = null;

	return {
		observe(video) {
			videos.push(video);
			updatePlay();
			if (intervalId === null) intervalId = setInterval(updatePlay, 100);
		},
		unobserve(video) {
			pull_default()(videos, video);
			if (!videos.length && intervalId) {
				clearInterval(intervalId);
				intervalId = null;
			}
		}
	};
});

class showImages_Video extends Media {

	constructor({
		title,
		caption,
		credits,
		fallback,
		frameRate = 24,
		href,
		loop = false,
		muted = false,
		playbackRate = 1,
		poster,
		reversable = false,
		reversed = false,
		source,
		sources,
		time = 0
	}, context) {
		super();

		this.collapse = this.unload;
		this.expand = this.restore;
		const advancedControls = showImages_module.options.showVideoControls.value;
		this.useVideoManager = advancedControls && showImages_module.options.onlyPlayMutedWhenVisible.value && muted;

		this.autoplay = muted || showImages_module.options.autoplayVideo.value;
		this.time = time;
		this.frameRate = frameRate;
		this.muted = muted;

		this.element = videoAdvancedTemplate({
			title,
			caption,
			credits,
			href: href || context.href,
			source,

			poster: !this.autoplay && poster || '',
			muted,
			loop,
			reversable,
			controls: !muted,
			advancedControls,
			openInNewWindow: showImages_module.options.openInNewWindow.value,
			formattedPlaybackRate: this.formatRateNumber(playbackRate)
		});
		this.video = downcast(this.element.querySelector('video'), HTMLVideoElement);
		const container = this.element.querySelector('.video-advanced-container');

		const msgError = this.element.querySelector('.video-advanced-error');
		const displayError = error => {
			if (msgError.hidden) {
				msgError.hidden = false;
				$('<span>').text(`Could not play video: ${error.message ? String(error.message) : 'Unknown error'}`).appendTo(msgError);
			}
		};

		const sourceElements = $(compact_default()(sources.map(v => {
			if (!this.video.canPlayType(v.type)) return null;
			const source = document.createElement('source');
			source.src = v.source;
			source.type = v.type;
			if (v.reverse) source.dataset.reverse = v.reverse;
			return source;
		}))).appendTo(this.video).get();

		if (!sourceElements.length) {
			if (fallback) {
				return new showImages_Image({
					type: 'IMAGE',
					title,
					caption,
					credits,
					src: fallback
				}, context);
			} else {
				displayError(new Error('No playable sources were found'));
			}
		}

		const lastSource = sourceElements[sourceElements.length - 1];
		lastSource.addEventListener('error', displayError);

		if (reversed) this.reverse();

		this.ready = Promise.race([waitForEvent(this.video, 'suspend'), waitForEvent(lastSource, 'error')]);

		this.video.addEventListener('pause', () => {
			this.element.classList.remove('playing');
		});
		this.video.addEventListener('play', () => {
			this.element.classList.add('playing');
		});

		this.video.addEventListener('loadedmetadata', () => {
			if (this.time !== this.video.currentTime) this.video.currentTime = this.time;
		});
		this.video.playbackRate = playbackRate;

		this.video.addEventListener('mousedown', e => {
			if (this.video.hasAttribute('controls')) {
				const { height, top } = this.video.getBoundingClientRect();
				let controlsBottomHeight = 0;

				if (height - controlsBottomHeight < e.clientY - top) {
					e.stopImmediatePropagation();
				}
			}
		});

		if (advancedControls) {
			Promise.all([waitForEvent(this.element, 'mouseenter'), waitForEvent(this.video, 'loadedmetadata')]).then(() => this.addAdvancedControls());
		}

		if (!loop && this.autoplay) {
			waitForEvent(this.video, 'ended').then(() => this.stopAutoplay());
		}

		setMediaMaxSize(this.video);
		makeMediaZoomable(this.element, this.video);
		setMediaControls(this.video, undefined, sources[0].source);
		makeMediaMovable(this.element, container);
		keepMediaVisible(container);
		makeMediaIndependent(container);
	}

	reverse() {
		this.time = this.video.duration - this.video.currentTime;
		if (isNaN(this.time)) this.time = 0;

		for (const v of this.video.querySelectorAll('source')) {
			[v.src, v.dataset.reverse] = [v.dataset.reverse, v.src];
		}

		this.video.load();
		this.video.play();

		this.element.classList.toggle('reversed');
	}

	formatRateNumber(value) {
		return `${value.toFixed(2).replace('.', '.\u200B')}x`;
	}

	addAdvancedControls() {
		const ctrlContainer = this.element.querySelector('.video-advanced-controls');
		const ctrlReverse = ctrlContainer.querySelector('.video-advanced-reverse');
		const ctrlTogglePause = ctrlContainer.querySelector('.video-advanced-toggle-pause');
		const ctrlSpeedDecrease = ctrlContainer.querySelector('.video-advanced-speed-decrease');
		const ctrlSpeedIncrease = ctrlContainer.querySelector('.video-advanced-speed-increase');
		const ctrlTimeDecrease = ctrlContainer.querySelector('.video-advanced-time-decrease');
		const ctrlTimeIncrease = ctrlContainer.querySelector('.video-advanced-time-increase');

		const progress = this.element.querySelector('.video-advanced-progress');
		const indicatorPosition = progress.querySelector('.video-advanced-position');
		const ctrlPosition = progress.querySelector('.video-advanced-position-thumb');

		const msgSpeed = ctrlContainer.querySelector('.video-advanced-speed');
		const msgTime = ctrlContainer.querySelector('.video-advanced-time');

		ctrlTogglePause.addEventListener('click', () => {
			if (this.video.paused) this.video.play();else this.video.pause();
			if (this.video.paused) this.stopAutoplay();
		});
		if (ctrlReverse) ctrlReverse.addEventListener('click', () => this.reverse());

		ctrlSpeedDecrease.addEventListener('click', () => {
			this.video.playbackRate /= 1.1;
		});
		ctrlSpeedIncrease.addEventListener('click', () => {
			this.video.playbackRate *= 1.1;
		});
		ctrlTimeDecrease.addEventListener('click', () => {
			this.video.currentTime -= 1 / this.frameRate;
		});
		ctrlTimeIncrease.addEventListener('click', () => {
			this.video.currentTime += 1 / this.frameRate;
		});

		this.video.addEventListener('ratechange', () => {
			msgSpeed.textContent = this.formatRateNumber(this.video.playbackRate);
		});
		this.video.addEventListener('timeupdate', () => {
			indicatorPosition.style.left = `${this.video.currentTime / this.video.duration * 100}%`;
			msgTime.textContent = this.formatRateNumber(this.video.currentTime);
		});

		progress.addEventListener('mousemove', e => {
			let left = e.offsetX;
			if (e.target === ctrlPosition) {
				left += e.target.offsetLeft;
			}
			ctrlPosition.style.left = `${left}px`;

			if (e.buttons === 1) ctrlPosition.click();
		});
		ctrlPosition.addEventListener('click', e => {
			const percentage = (e.target.offsetLeft + e.target.clientWidth / 2) / progress.clientWidth;
			this.video.currentTime = this.video.duration * percentage;
		});
	}

	stopAutoplay() {
		this.autoplay = false;
		if (this.useVideoManager) mutedVideoManager().unobserve(this.video);
	}

	supportsUnload() {
		return this.video.paused;
	}

	unload() {
		if (!this.isAttached()) return;

		if (!this.video.paused) this.video.pause();

		this.time = this.video.currentTime;
		this.video.setAttribute('src', '');
		this.video.load();

		if (this.useVideoManager) mutedVideoManager().unobserve(this.video);
	}

	restore() {
		if (this.video.hasAttribute('src')) {
			this.video.removeAttribute('src');
			this.video.load();
		}

		if (this.autoplay) {
			if (this.useVideoManager) mutedVideoManager().observe(this.video);else this.video.play();
		}
	}
}

function moveMedia(ele, deltaX, deltaY) {
	ele.style.marginLeft = `${((parseFloat(ele.style.marginLeft) || 0) + deltaX).toFixed(2)}px`;
	ele.style.marginTop = `${((parseFloat(ele.style.marginTop) || 0) + deltaY).toFixed(2)}px`;
}

function resizeMedia(ele, newWidth, newHeight) {
	if (newWidth < 20) return;

	if (typeof newHeight === 'number') {
		ele.style.height = `${newHeight}px`;
	} else if (ele.style.height) {
		const { width, height } = ele.getBoundingClientRect();
		ele.style.height = `${(height / width * newWidth).toFixed(2)}px`;
	}

	ele.style.width = `${newWidth}px`;
	ele.style.maxWidth = ele.style.maxHeight = 'none';
}
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/Expando.js






class Expando_Expando extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.trueText = this.value.types.length ? `expando ${this.value.types.join('|')}` : 'expando', this.falseText = this.value.types.length ? ` expando ${this.value.types.join('|')}` : ' expando', _temp;
	}

	static parseCriterion(input) {
		return { types: input.split(/[\s|]/).filter(Boolean) };
	}
	static thingToCriterion(thing) {
		const expando = thing.isPost() ? expando_Expando.getEntryExpandoFrom(thing) : expando_Expando.getTextExpandosFrom(thing)[0];
		return expando && expando.types.join(' & ') || '';
	}

	validator() {
		return matchesTypes(this.value.types);
	}

	_matches(e) {
		if (!e || !e.ready) return false;
		return matchesTypes(this.value.types, e.types);
	}

	evaluate(thing) {
		if (thing.isPost()) {
			const expando = expando_Expando.getEntryExpandoFrom(thing);
			return this._matches(expando);
		} else {
			const expandos = expando_Expando.getTextExpandosFrom(thing);
			return expandos.some(this._matches.bind(this));
		}
	}

	onObserve() {
		thingExpandoBuildListeners.add(this.refreshThing.bind(this));
		return true;
	}
}
Expando_Expando.text = 'Expando';
Expando_Expando.defaultConditions = { types: [] };
Expando_Expando.fields = ['post has expando, and (if specified) expando types intersects with ', { type: 'checkset', items: showImages_types, id: 'types' }];
Expando_Expando.slow = 9;
Expando_Expando.pattern = `[(${showImages_types.join('|')})]`;
Expando_Expando.criterionOperators = true;
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/IsLocked.js




class IsLocked_IsLocked extends Case_Case {

	evaluate(thing) {
		return thing.isLocked();
	}
}
IsLocked_IsLocked.text = 'Locked';
IsLocked_IsLocked.fields = ['post is locked'];
IsLocked_IsLocked.unique = true;
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/IsNSFW.js




class IsNSFW_IsNSFW extends Case_Case {

	evaluate(thing) {
		return thing.isNSFW();
	}
}
IsNSFW_IsNSFW.text = 'NSFW';
IsNSFW_IsNSFW.fields = ['post is marked NSFW'];
IsNSFW_IsNSFW.unique = true;
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/IsSpoiler.js




class IsSpoiler_IsSpoiler extends Case_Case {

	evaluate(thing) {
		return thing.isSpoiler();
	}
}
IsSpoiler_IsSpoiler.text = 'Spoiler';
IsSpoiler_IsSpoiler.fields = ['post is marked spoiler'];
IsSpoiler_IsSpoiler.unique = true;
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/IsVisited.js





class IsVisited_IsVisited extends Case_Case {
	static get disabled() {
		return false;
	}

	evaluate(thing) {
		if (thing.element.classList.contains('visited')) return true;

		const link = thing.getPostLink();
		return !!link && isURLVisited(link.href);
	}
}
IsVisited_IsVisited.text = 'Visited';
IsVisited_IsVisited.fields = ['link has been visited'];
IsVisited_IsVisited.slow = 2;
IsVisited_IsVisited.unique = true;
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/LinkFlair.js




class LinkFlair_LinkFlair extends Case_Case {

	static parseCriterion(input) {
		return { patt: input };
	}
	static thingToCriterion(thing) {
		return thing.getPostFlairText();
	}

	constructor({ patt, fullMatch = true }) {
		super(Case_Case.buildRegex(patt || '/./', { fullMatch, allowEmptyString: true }));
		this.trueText = `link flair ${patt}`.trim();
		this.falseText = ` link flair ${patt}`.trim();
	}

	evaluate(thing, values = [this.value]) {
		const text = thing.getPostFlairText();
		return values.some(v => v.test(text));
	}
}
LinkFlair_LinkFlair.text = 'Link flair';
LinkFlair_LinkFlair.defaultConditions = { patt: '' };
LinkFlair_LinkFlair.fields = ['post has link flair matching ', { type: 'text', id: 'patt' }];
LinkFlair_LinkFlair.reconcilable = true;
LinkFlair_LinkFlair.pattern = '[RegEx]';
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/PostAfter.js




class PostAfter_PostAfter extends Case_Case {

	static parseCriterion(input) {
		return { patt: input };
	}
	static thingToCriterion(thing) {
		return thing.getTimestamp().toISOString();
	}

	constructor(conditions) {
		super(new Date(conditions.patt));
		this.trueText = `after ${conditions.patt}`;
		this.falseText = `before ${conditions.patt}`;
	}

	validator() {
		return !isNaN(this.value);
	}

	evaluate(thing) {
		const postTime = thing.getTimestamp();
		return !!postTime && postTime >= this.value;
	}
}
PostAfter_PostAfter.text = 'Post after';
PostAfter_PostAfter.defaultConditions = { patt: new Date().toISOString() };
PostAfter_PostAfter.fields = ['posted after date ', { type: 'text', id: 'patt' }];
PostAfter_PostAfter.pattern = 'Date  string representing a RFC2822 or ISO 8601 date';
// EXTERNAL MODULE: ./node_modules/lodash/dropWhile.js
var dropWhile = __webpack_require__(265);
var dropWhile_default = /*#__PURE__*/__webpack_require__.n(dropWhile);

// EXTERNAL MODULE: ./node_modules/lodash/head.js
var lodash_head = __webpack_require__(83);
var head_default = /*#__PURE__*/__webpack_require__.n(lodash_head);

// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/PostAge.js






const qualifiers = [['Y', 12], ['M', 30.44], ['d', 24], ['h', 60], ['m', 60], ['s', 1000]];
const PostAge_now = new Date();

function prettifyAge(remainder) {
	let remainderQualifier = '';
	for (const [qualifier, multiplier] of qualifiers.slice().reverse()) {
		if (remainder < multiplier) break;
		remainder /= multiplier;
		remainderQualifier = qualifier;
	}

	return remainder.toFixed(2) + remainderQualifier;
}

class PostAge_PostAge extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.trueText = `age ${prettyOperator(this.value.op)} ${prettifyAge(this.value.age)}`, this.falseText = `age ${prettyOperator(inverseOperator(this.value.op))} ${prettifyAge(this.value.age)}`, _temp;
	}

	static parseCriterion(input) {
		let age = parseInt(input, 10);
		if (isNaN(age)) throw new Error('Invalid age');

		const ageQualifier = head_default()(input.match(/Y|M|d|h|m|s/)) || 's';
		age = dropWhile_default()(qualifiers, ([qualifier]) => qualifier !== ageQualifier).reduce((a, [, multiplier]) => a * multiplier, age);

		return { op: '<=', age };
	}

	static thingToCriterion(thing) {
		const remainder = PostAge_now - new Date(thing.getTimestamp());
		if (isNaN(remainder)) throw new Error('Could not determine Thing date');
		return prettifyAge(remainder);
	}

	evaluate(thing) {
		const postTime = thing.getTimestamp();
		return !!postTime && numericalCompare(this.value.op, PostAge_now - postTime, this.value.age);
	}
}
PostAge_PostAge.text = 'Post age';
PostAge_PostAge.defaultConditions = { op: '<=', age: 4 * 60 * 60 * 1000 };
PostAge_PostAge.fields = ['post is ', { type: 'select', options: 'COMPARISON', id: 'op' }, ' ', { type: 'duration', id: 'age' }, ' old'];
PostAge_PostAge.pattern = 'x[(Y|M|d|h|m)]  where x is the number of seconds or Y year, M month, h hour, m minute (case sensitive)';
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/PostTitle.js




class PostTitle_PostTitle extends Case_Case {

	static parseCriterion(input) {
		return { patt: input };
	}

	constructor(conditions) {
		super(Case_Case.buildRegex(conditions.patt, { fullMatch: false }));
		this.trueText = `title contains ${conditions.patt}`;
		this.falseText = ` title contains ${conditions.patt}`;
	}

	evaluate(thing, values = [this.value]) {
		const title = thing.getTitle();
		return values.some(v => v.test(title));
	}
}
PostTitle_PostTitle.text = 'Post title';
PostTitle_PostTitle.defaultConditions = { patt: '' };
PostTitle_PostTitle.fields = ['post\'s title contains ', { type: 'text', id: 'patt' }];
PostTitle_PostTitle.reconcilable = true;
PostTitle_PostTitle.pattern = 'RegEx';
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/PostType.js




const PostType_options = [['link post', 'link'], ['self post', 'self']];

class PostType_PostType extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.trueText = `type ${this.value.kind}`, this.falseText = ` type ${this.value.kind}`, _temp;
	}

	static parseCriterion(input) {
		return { kind: input };
	}

	validator() {
		return PostType_options.map(([, cls]) => cls).includes(this.value.kind);
	}

	evaluate(thing) {
		switch (this.value.kind) {
			case 'link':
				return thing.isLinkPost();
			case 'self':
				return thing.isSelfPost();
			default:
				return false;
		}
	}
}
PostType_PostType.text = 'Post type';
PostType_PostType.defaultConditions = { kind: 'link' };
PostType_PostType.fields = ['post is a ', { type: 'select', id: 'kind', options: PostType_options }];
PostType_PostType.pattern = `(${PostType_options.map(([, cls]) => cls).join('|')})`;
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/Score.js





class Score_Score extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.trueText = `score ${prettyOperator(this.value.op)} ${this.value.val}`, this.falseText = `score ${prettyOperator(inverseOperator(this.value.op))} ${this.value.val}`, _temp;
	}

	static parseCriterion(input) {
		return { op: '>=', val: parseInt(input, 10) };
	}
	static thingToCriterion(thing) {
		return String(thing.getScore());
	}

	validator() {
		return Number.isInteger(this.value.val);
	}

	evaluate(thing) {
		const score = thing.getScore();
		return isNaN(score) ? false : numericalCompare(this.value.op, score, this.value.val);
	}
}
Score_Score.text = 'Score';
Score_Score.defaultConditions = { op: '>', val: 0 };
Score_Score.fields = ['post has ', { type: 'select', options: 'COMPARISON', id: 'op' }, ' ', { type: 'number', id: 'val' }, ' points'];
Score_Score.pattern = 'integer';
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/Selector.js





class Selector_Selector extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.trueText = `$('${this.value.patt.replace(/\'/g, '\\\'')}')`, this.falseText = `$(':not(${this.value.patt.replace(/\'/g, '\\\'')}'))`, _temp;
	}

	static parseCriterion(input) {
		return { patt: input };
	}

	validator() {
		return this.value.patt && !!$(this.value.patt);
	}

	evaluate(thing) {
		return $(thing.element).is(this.value.patt) || $(thing.entry).is(this.value.patt) || !!$(thing.entry).has(this.value.patt).length;
	}
}
Selector_Selector.text = 'Selector';
Selector_Selector.defaultConditions = { patt: '' };
Selector_Selector.fields = ['thing matches jQuery selector ', { type: 'text', id: 'patt' }];
Selector_Selector.slow = 10;
Selector_Selector.pattern = 'string';
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/Subreddit.js




class Subreddit_Subreddit extends Case_Case {

	static thingToCriterion(thing) {
		return thing.getSubreddit();
	}
	static parseCriterion(input) {
		return { patt: input };
	}

	constructor(conditions) {
		super(Case_Case.buildRegex(conditions.patt));
		this.trueText = `in ${conditions.patt}`;
		this.falseText = ` in ${conditions.patt}`;
	}

	evaluate(thing, values = [this.value]) {
		const subreddit = thing.getSubreddit();
		return !!subreddit && values.some(v => v.test(subreddit));
	}
}
Subreddit_Subreddit.text = 'Subreddit';
Subreddit_Subreddit.defaultConditions = { patt: '' };
Subreddit_Subreddit.fields = ['posted in /r/', { type: 'text', id: 'patt' }];
Subreddit_Subreddit.reconcilable = true;
Subreddit_Subreddit.pattern = 'RegEx';
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/UserAttr.js





const UserAttr_options = [['a friend', 'friend'], ['a moderator', 'moderator'], ['an admin', 'admin'], ['me', 'me'], ['op', 'submitter']];

class UserAttr_UserAttr extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.trueText = `by ${this.value.attr}`, this.falseText = ` by ${this.value.attr}`, _temp;
	}

	static parseCriterion(input) {
		return { attr: input };
	}

	validator() {
		return UserAttr_options.map(([, cls]) => cls).includes(this.value.attr);
	}

	evaluate(thing) {
		if (this.value.attr === 'me') {
			const myName = loggedInUser();
			const author = thing.getAuthor();
			return !!myName && !!author && author.trim().toLowerCase() === myName.trim().toLowerCase();
		} else {
			const element = thing.getAuthorElement();
			return element && element.classList.contains(this.value.attr);
		}
	}
}
UserAttr_UserAttr.text = 'User attribute';
UserAttr_UserAttr.fields = ['user is ', { type: 'select', id: 'attr', options: UserAttr_options }];
UserAttr_UserAttr.defaultConditions = { attr: 'friend' };
UserAttr_UserAttr.pattern = `(${UserAttr_options.map(([, cls]) => cls).join('|')})`;
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/UserFlair.js




class UserFlair_UserFlair extends Case_Case {

	static parseCriterion(input) {
		return { patt: input };
	}
	static thingToCriterion(thing) {
		return thing.getUserFlairText();
	}

	constructor(conditions) {
		super(Case_Case.buildRegex(conditions.patt || '/./'));
		this.trueText = `user flair ${conditions.patt}`.trim();
		this.falseText = ` user flair ${conditions.patt}`.trim();
	}

	evaluate(thing, values = [this.value]) {
		const text = thing.getUserFlairText();
		return values.some(v => v.test(text));
	}
}
UserFlair_UserFlair.text = 'User flair';
UserFlair_UserFlair.defaultConditions = { patt: '' };
UserFlair_UserFlair.fields = ['author of this post has flair matching ', { type: 'text', id: 'patt' }];
UserFlair_UserFlair.reconcilable = true;
UserFlair_UserFlair.pattern = '[RegEx]';
// EXTERNAL MODULE: ./node_modules/suncalc/suncalc.js
var suncalc = __webpack_require__(264);

// CONCATENATED MODULE: ./lib/modules/customToggles.js










const customToggles_module = new Module('customToggles');

customToggles_module.moduleName = 'customTogglesName';
customToggles_module.category = 'coreCategory';
customToggles_module.description = 'customTogglesDesc';

customToggles_module.options = {
	toggle: {
		description: 'customTogglesToggleDesc',
		title: 'customTogglesToggleTitle',
		type: 'table',
		fields: [{
			key: 'key',
			name: 'key',
			type: 'text'
		}, {
			key: 'enabled',
			name: 'enabled',
			type: 'boolean',
			value: true
		}, {
			key: 'text',
			name: 'text',
			type: 'text'
		}],
		value: []
	}
};

const toggles = new Map();
const customToggles = [];

customToggles_module.beforeLoad = () => {
	for (const instance of customToggles_module.options.toggle.value) {
		const [key, initialEnabled, text] = instance;

		if (toggles.has(key)) {
			console.error(`A toggle with key ${key} already exists`, instance);
			continue;
		}

		const toggle = new customToggles_Toggle(key, text, initialEnabled);
		customToggles.push(toggle);

		toggle.onStateChange(() => {
			instance[1] = toggle.enabled;
		});

		toggle.onToggle(() => {
			options_set(customToggles_module, 'toggle', customToggles_module.options.toggle.value);
		});
	}
};

customToggles_module.go = () => {
	registerCommandLine();

	for (const toggle of customToggles) {
		toggle.addMenuItem();
	}
};

class customToggles_Toggle {

	constructor(key, text, enabled) {
		this.stateChangeCallbacks = [];
		this.toggleCallbacks = [];

		this.text = text;
		this.enabled = enabled;

		const setGlobalState = multicast(enabled => {
			this.setLocalState(enabled);
		}, { name: `toggle.${key}` });

		this.onToggle(() => {
			setGlobalState(this.enabled);
		});

		toggles.set(key, this);
	}

	toggle(type = 'manual') {
		this.setLocalState(!this.enabled);

		for (const callback of this.toggleCallbacks) callback(type);
	}

	setLocalState(enabled) {
		this.enabled = enabled;

		$(customToggles_module).trigger($.Event('toggle'));

		for (const callback of this.stateChangeCallbacks) callback();
	}

	onStateChange(callback) {
		this.stateChangeCallbacks.push(callback);
	}

	onToggle(callback) {
		this.toggleCallbacks.push(callback);
	}

	addMenuItem(title = `Toggle ${this.text}`, on, off) {
		const $toggle = $('<div>', { text: this.text || '\u00A0', title }).append(createElement_namespaceObject.toggleButton(undefined, this.text, this.enabled, on, off));
		this.onStateChange(() => {
			$toggle.find('.toggleButton').toggleClass('enabled', this.enabled);
		});
		addMenuItem($toggle, () => {
			this.toggle();
		});
	}

	addCLI(commandPredicate) {
		registerCommand(commandPredicate, `${commandPredicate} - toggle ${this.text}`, () => ` ${this.enabled ? 'Disable' : 'Enable'} ${this.text}`, () => {
			this.toggle();
		});
	}
}

function registerCommandLine() {
	const getToggles = val => Array.from(toggles.values()).filter(({ text }) => text.startsWith(val)).sort(({ text: a }, { text: b }) => a.localeCompare(b));

	registerCommand('toggle', 'toggle - toggle any custom toggle', (command, val) => getToggles(val).length ? `Toggle ${getToggles(val).map((toggle, i) => i === 0 ? `<b>${toggle.text}</b>` : toggle.text).join('|')}` : `No toggles matching <i>${val}</i>`, (command, val) => {
		const match = getToggles(val)[0];
		if (match) match.toggle();else return `${val} does not match a valid toggle`;
	});
}

function toggleActive(key) {
	const toggle = toggles.get(key);
	return !!toggle && toggle.enabled;
}

const customToggles_getToggles = () => (stage_namespaceObject.get(customToggles_module.moduleID) || customToggles_module.options).toggle.value.map(([key,, text]) => ({ key, text }));
// CONCATENATED MODULE: ./lib/modules/styleTweaks.js












const styleTweaks_module = new Module('styleTweaks');

styleTweaks_module.moduleName = 'styleTweaksName';
styleTweaks_module.category = 'appearanceCategory';
styleTweaks_module.description = 'styleTweaksDesc';
styleTweaks_module.options = {
	navTop: {
		title: 'styleTweaksNavTopTitle',
		type: 'boolean',
		value: true,
		description: 'styleTweaksNavTopDesc',
		bodyClass: 'res-navTop'
	},
	disableAnimations: {
		title: 'styleTweaksDisableAnimationsTitle',
		type: 'boolean',
		value: false,
		description: 'styleTweaksDisableAnimationsDesc',
		bodyClass: true
	},
	visitedStyle: {
		title: 'styleTweaksVisitedStyleTitle',
		type: 'boolean',
		value: false,
		description: 'styleTweaksVisitedStyleDesc',
		bodyClass: true
	},
	showExpandos: {
		title: 'styleTweaksShowExpandosTitle',
		type: 'boolean',
		value: true,
		description: 'styleTweaksShowExpandosDesc',
		advanced: true,
		bodyClass: true
	},
	hideUnvotable: {
		title: 'styleTweaksHideUnvotableTitle',
		type: 'boolean',
		value: true,
		description: 'styleTweaksHideUnvotableDesc',
		bodyClass: true
	},
	showFullLinkFlair: {
		title: 'styleTweaksShowFullLinkFlairTitle',
		type: 'enum',
		values: [{
			name: 'Never',
			value: 'never'
		}, {
			name: 'On hover',
			value: 'hover'
		}, {
			name: 'Always',
			value: 'always'
		}],
		value: 'never',
		description: 'styleTweaksShowFullLinkFlairDesc',
		bodyClass: true
	},
	highlightEditedTime: {
		title: 'styleTweaksHighlightEditedTimeTitle',
		type: 'boolean',
		value: false,
		description: 'styleTweaksHighlightEditedTimeDesc',
		bodyClass: true
	},
	colorBlindFriendly: {
		title: 'styleTweaksColorBlindFriendlyTitle',
		type: 'boolean',
		value: false,
		description: 'styleTweaksColorBlindFriendlyDesc',
		advanced: true,
		bodyClass: 'res-colorblind'
	},
	subredditStyleBrowserToolbarButton: {
		title: 'styleTweaksSubredditStyleBrowserToolbarButtonTitle',
		type: 'boolean',
		value: true,
		description: 'styleTweaksSubredditStyleBrowserToolbarButtonDesc',
		keywords: ['css'],

		noconfig: true
	},
	subredditStyleCheckbox: {
		title: 'styleTweaksSubredditStyleCheckboxTitle',
		type: 'boolean',
		value: true,
		description: 'styleTweaksSubredditStyleCheckboxDesc',
		keywords: ['css']
	},
	scrollSubredditDropdown: {
		title: 'styleTweaksScrollSubredditDropdownTitle',
		type: 'boolean',
		value: true,
		description: 'styleTweaksScrollSubredditDropdownDesc',
		advanced: true,
		bodyClass: true
	},
	highlightTopLevel: {
		title: 'styleTweaksHighlightTopLevelTitle',
		type: 'boolean',
		value: false,
		description: 'styleTweaksHighlightTopLevelDesc'
	},
	highlightTopLevelColor: {
		title: 'styleTweaksHighlightTopLevelColorTitle',
		type: 'color',
		dependsOn: options => options.highlightTopLevel.value,
		description: 'styleTweaksHighlightTopLevelColorDesc',
		value: '#8B0000'
	},
	highlightTopLevelSize: {
		title: 'styleTweaksHighlightTopLevelSizeTitle',
		type: 'text',
		dependsOn: options => options.highlightTopLevel.value,
		description: 'styleTweaksHighlightTopLevelSizeDesc',
		value: '2'
	},
	floatingSideBar: {
		title: 'styleTweaksFloatingSideBarTitle',
		type: 'boolean',
		value: false,
		description: 'styleTweaksFloatingSideBarDesc',
		advanced: true,
		bodyClass: true
	},
	postTitleCapitalization: {
		title: 'styleTweaksPostTitleCapitalizationTitle',
		description: 'styleTweaksPostTitleCapitalizationDesc',
		type: 'enum',
		value: 'none',
		values: [{
			name: 'do nothing',
			value: 'none'
		}, {
			name: 'Title Case',
			value: 'title'
		}, {
			name: 'Sentence case',
			value: 'sentence'
		}, {
			name: 'lowercase',
			value: 'lowercase'
		}],
		bodyClass: true
	},
	hideDomainLink: {
		title: 'styleTweaksHideDomainLink',
		type: 'boolean',
		value: false,
		description: 'styleTweaksHideDomainLinkDesc',
		bodyClass: true
	}
};

const ignoredSubredditStyleStorage = storage_namespaceObject.wrap('RESmodules.styleTweaks.ignoredSubredditStyles', []);

styleTweaks_module.loadDynamicOptions = () => {
	toggleSubredditStyleIfNecessary();
};

styleTweaks_module.beforeLoad = () => {
	if (styleTweaks_module.options.highlightTopLevel.value) {
		const highlightTopLevelColor = styleTweaks_module.options.highlightTopLevelColor.value || styleTweaks_module.options.highlightTopLevelColor.default;
		const highlightTopLevelSize = parseInt(styleTweaks_module.options.highlightTopLevelSize.value || styleTweaks_module.options.highlightTopLevelSize.default, 10);
		addCSS(`
			.nestedlisting > .comment + .clearleft {
				height: ${highlightTopLevelSize}px !important;
				margin-bottom: 5px;
				background: ${highlightTopLevelColor} !important;
			}
		`);
	}
};

styleTweaks_module.go = () => {
	if (styleTweaks_module.options.subredditStyleCheckbox.value) {
		const sidebarHeader = document.querySelector('.titlebox h1.redditname');
		if (sidebarHeader) sidebarHeader.after(makeStyleToggle().container);
	}

	updatePageAction();

	pageAction_namespaceObject.onClick(() => {
		const toggle = !makeStyleToggle().checkbox.checked;
		toggleSubredditStyle(toggle);
	});

	if ($('#show_stylesheets').length) {
		$('label[for=show_stylesheets]').after(string_namespaceObject.escape` <span class="little gray">(${i18n('styleTweaksRedditPrefsMessage')} <a href="/r/Enhancement/wiki/srstyle">${i18n('styleTweaksClickToLearnMore')}</a>)</span>`);
	}

	styleTweaks_registerCommandLine();
};

function updatePageAction() {
	if (!styleTweaks_module.options.subredditStyleBrowserToolbarButton.value || !currentSubreddit()) {
		pageAction_namespaceObject.hide();
	} else {
		pageAction_namespaceObject.show(makeStyleToggle().checkbox.checked);
	}
}

function styleTweaks_registerCommandLine() {
	registerCommand('srstyle', `srstyle [subreddit] [on|off] - ${i18n('styleTweaksCommandLineDescription')}`, (command, val) => {
		const options = getSrstyleOptions(val);
		if (options.toggleText) {
			return i18n(options.sr ? 'styleTweaksToggleSubredditStyleOnOffFor' : 'styleTweaksToggleSubredditStyleOnOff', options.toggleText === 'on' ? i18n('toggleOn') : i18n('toggleOff'), options.sr || '');
		} else {
			return i18n('styleTweaksToggleSubredditStyle');
		}
	}, (command, val) => {
		const { sr, toggleText } = getSrstyleOptions(val);

		if (!sr) {
			return i18n('styleTweaksNoSubredditSpecified');
		}

		let toggle;
		if (toggleText === 'on') {
			toggle = true;
		} else if (toggleText === 'off') {
			toggle = false;
		} else {
			return i18n('styleTweaksYouMustSpecifyXOrY', 'on', 'off');
		}

		toggleSubredditStyle(toggle, sr);
		notifications_showNotification({
			header: i18n('styleTweaksSubredditStyle'),
			moduleID: 'styleTweaks',
			message: i18n(toggle ? 'styleTweaksSubredditStyleEnabled' : 'styleTweaksSubredditStyleDisabled', sr)
		}, 4000);
	});

	function getSrstyleOptions(val) {
		const splitWords = val.split(' ');
		let sr, toggleText;
		if (splitWords.length === 2) {
			sr = splitWords[0];
			toggleText = splitWords[1];
		} else {
			sr = currentSubreddit();
			toggleText = splitWords[0];
		}

		if (toggleText !== 'on' && toggleText !== 'off') {
			toggleText = false;
		}

		return {
			sr,
			toggleText
		};
	}
}

const makeStyleToggle = once_default()(() => {
	const container = string_namespaceObject.html`
		<form class="toggle res-sr-style-toggle">
			<label for="res-style-checkbox">${i18n('styleTweaksUseSubredditStyle')}</label>
		</form>
	`;

	const checkbox = document.createElement('input');
	checkbox.setAttribute('type', 'checkbox');
	checkbox.setAttribute('id', 'res-style-checkbox');
	checkbox.setAttribute('name', 'res-style-checkbox');
	checkbox.checked = true;
	checkbox.addEventListener('change', function () {
		toggleSubredditStyle(this.checked);
	});

	container.prepend(checkbox);

	return { container, checkbox };
});

async function toggleSubredditStyleIfNecessary() {
	const subreddit = currentSubreddit();
	if (!subreddit) {
		bodyClasses_namespaceObject.add('res-srstyle-disabled');
		return;
	}

	const toggleOff = await asyncSome([async () => (await ignoredSubredditStyleStorage.get()).includes(subreddit.toLowerCase()), async () => !(await isNightmodeCompatible())], f => f());

	toggleSubredditStyle(!toggleOff);
}

async function toggleSubredditStyle(toggle, subreddit = currentSubreddit()) {
	subreddit = (subreddit || '').toLowerCase();

	if (isCurrentSubreddit(subreddit)) {
		toggleElements(toggle);

		makeStyleToggle().checkbox.checked = toggle;

		updatePageAction();

		bodyClasses_namespaceObject.toggle(toggle, 'res-srstyle-enabled');
		bodyClasses_namespaceObject.toggle(!toggle, 'res-srstyle-disabled');

		await toggledSubredditStyle(toggle);
	}

	const ignoredSubreddits = await ignoredSubredditStyleStorage.get();

	if (toggle) {
		pull_default()(ignoredSubreddits, subreddit);
	} else {
		if (!isCurrentSubreddit(subreddit) || (await isNightmodeCompatible())) {
			if (!ignoredSubreddits.includes(subreddit)) {
				ignoredSubreddits.push(subreddit);
			}
		}
	}

	ignoredSubredditStyleStorage.set(ignoredSubreddits);
}

const toggleElements = (() => {
	const getStylesheet = once_default()(async () => {
		const query = () => (document.head || document.documentElement).querySelector('link[title=applied_subreddit_stylesheet]');

		return query() || (await bodyStart.then(query)) || null;
	});

	const toggleStylesheet = mutex(async shouldRestore => {
		const stylesheet = await getStylesheet();

		if (!stylesheet) return;

		if (shouldRestore) {
			if (!stylesheet.parentNode) {
				document.head.appendChild(stylesheet);
			}
		} else {
			if (stylesheet.parentNode) {
				stylesheet.remove();
			}
		}
	});

	const getHeaderImg = once_default()(async () => {
		const query = () => document.getElementById('header-img-a');
		const imgQuery = () => document.getElementById('header-img');

		const imgWrapper = (await bodyStart.then(query)) || (await bodyReady.then(query));

		return { imgWrapper, headerImg: imgWrapper && imgQuery() };
	});

	const toggleHeaderImg = mutex(async shouldRestore => {
		const { imgWrapper, headerImg } = await getHeaderImg();

		if (!imgWrapper || !headerImg) return;

		if (shouldRestore) {
			if (!headerImg.parentNode) {
				imgWrapper.id = 'header-img-a';
				imgWrapper.classList.remove('default-header');
				imgWrapper.appendChild(headerImg);
			}
		} else {
			if (headerImg.parentNode) {
				headerImg.remove();
				imgWrapper.id = 'header-img';
				imgWrapper.classList.add('default-header');
			}
		}
	});

	return shouldRestore => Promise.all([toggleStylesheet(shouldRestore), toggleHeaderImg(shouldRestore)]);
})();
// CONCATENATED MODULE: ./lib/modules/nightMode.js













const nightMode_module = new Module('nightMode');

nightMode_module.moduleName = 'nightModeName';
nightMode_module.category = 'appearanceCategory';
nightMode_module.description = 'nightModeDesc';
nightMode_module.options = {
	nightModeOn: {
		type: 'boolean',
		value: false,
		description: 'nightModeNightModeOnDesc',
		title: 'nightModeNightModeOnTitle'
	},
	nightSwitch: {
		type: 'boolean',
		value: true,
		description: 'nightModeNightSwitchDesc',
		title: 'nightModeNightSwitchTitle',
		advanced: true
	},
	automaticNightMode: {
		type: 'enum',
		value: 'none',
		values: [{
			name: 'nightModeAutomaticNightModeNone',
			value: 'none'
		}, {
			name: 'nightModeAutomaticNightModeAutomatic',
			value: 'automatic'
		}, {
			name: 'nightModeAutomaticNightModeUser',
			value: 'user'
		}],
		description: 'nightModeAutomaticNightModeDesc',
		title: 'nightModeAutomaticNightModeTitle'
	},
	nightModeStart: {
		type: 'text',
		value: '20:00',
		description: 'nightModeNightModeStartDesc',
		title: 'nightModeNightModeStartTitle',
		dependsOn: options => options.automaticNightMode.value === 'user'
	},
	nightModeEnd: {
		type: 'text',
		value: '6:00',
		description: 'nightModeNightModeEndDesc',
		title: 'nightModeNightModeEndTitle',
		dependsOn: options => options.automaticNightMode.value === 'user'
	},
	nightModeOverrideHours: {
		type: 'text',
		value: '8',
		description: 'nightModeNightModeOverrideHoursDesc',
		title: 'nightModeNightModeOverrideHoursTitle',
		dependsOn: options => options.automaticNightMode.value !== 'none'
	},
	useSubredditStyles: {
		type: 'boolean',
		value: false,
		description: 'nightModeUseSubredditStylesDesc',
		title: 'nightModeUseSubredditStylesTitle',
		advanced: true
	},
	subredditStylesWhitelist: {
		type: 'list',
		value: '',
		listType: 'subreddits',
		description: 'nightModeSubredditStylesWhitelistDesc',
		title: 'nightModeSubredditStylesWhitelistTitle'
	},
	coloredLinks: {
		type: 'boolean',
		bodyClass: true,
		value: false,
		description: 'nightModeColoredLinksDesc',
		title: 'nightModeColoredLinksTitle'
	}
};

const localStorageKey = 'RES_nightMode';
const nightmodeOverrideStorage = storage_namespaceObject.wrap('RESmodules.nightMode.nightModeOverrideStart', null);
let nightMode_toggle;

nightMode_module.onToggle = enabled => {
	if (nightMode_toggle && nightMode_toggle.enabled && !enabled) nightMode_toggle.toggle();
};

nightMode_module.loadDynamicOptions = () => {
	if (typeof localStorage === 'object' && localStorage.getItem(localStorageKey)) {
		addNightMode();
	}
};

nightMode_module.beforeLoad = () => {
	if (isNightModeOn()) {
		addNightMode();
	} else {
		removeNightMode();
	}

	nightMode_toggle = new customToggles_Toggle('nightMode', i18n('nightModeToggleText'), nightMode_module.options.nightModeOn.value);
	nightMode_toggle.onToggle(type => {
		if (type === 'manual') overrideNightMode();
		options_set(nightMode_module, 'nightModeOn', nightMode_toggle.enabled);
	});
	nightMode_toggle.onStateChange(() => {
		if (nightMode_toggle.enabled) addNightMode();else removeNightMode();
		toggleSubredditStyleIfNecessary();
	});
	nightMode_toggle.addCLI('ns');
};

nightMode_module.always = () => {
	if (!modules_isRunning(nightMode_module)) {
		removeNightMode();
	}
};

nightMode_module.go = () => {
	handleAutomaticNightMode();

	if (nightMode_module.options.nightSwitch.value) {
		nightMode_toggle.addMenuItem(i18n('nightModeToggleTitle'), '', '');
	}
};

function isNightModeOn() {
	if (!modules_isRunning(nightMode_module)) return false;

	return nightMode_toggle ? nightMode_toggle.enabled : nightMode_module.options.nightModeOn.value;
}

async function isNightmodeCompatible() {
	await loadOptions;

	if (!isNightModeOn()) {
		return true;
	}

	const subreddit = currentSubreddit();
	if (!subreddit) {
		return true;
	}

	if (nightMode_module.options.useSubredditStyles.value) {
		return true;
	}

	if (['all', 'popular', 'friends', 'mod'].includes(subreddit)) {
		return true;
	}

	const isWhitelisted = nightMode_module.options.subredditStylesWhitelist.value.split(',').includes(subreddit.toLowerCase());
	if (isWhitelisted) {
		return true;
	}

	const cached = await session_namespaceObject.get(`isNightmodeCompatible.${subreddit.toLowerCase()}`);
	if (cached !== undefined) {
		updateCache(subreddit);
		return cached;
	}

	return updateCache(subreddit);

	async function updateCache(subreddit) {
		await bodyReady;

		const isCompatible = !!document.querySelector('.side a[href="#/RES_SR_Config/NightModeCompatible"]');
		session_namespaceObject.set(`isNightmodeCompatible.${subreddit.toLowerCase()}`, isCompatible);
		return isCompatible;
	}
}

async function toggledSubredditStyle(toggledOn) {
	const currSub = currentSubreddit();
	if (!isNightModeOn() || !currSub) {
		return;
	}

	const subreddit = currSub.toLowerCase();
	const whitelist = nightMode_module.options.subredditStylesWhitelist.value.split(',');

	if (toggledOn && !(await isNightmodeCompatible())) {
		if (!whitelist.includes(subreddit)) {
			whitelist.push(subreddit);
		}
	} else if (!toggledOn) {
		pull_default()(whitelist, subreddit);
	}

	options_set(nightMode_module, 'subredditStylesWhitelist', whitelist.join(','));
}

const handleAutomaticNightMode = once_default()(async function check() {
	if (nightMode_module.options.automaticNightMode.value === 'none') {
		return;
	}

	const nightModeOverrideStart = await nightmodeOverrideStorage.get();
	const nightModeOverrideLength = HOUR * parseFloat(nightMode_module.options.nightModeOverrideHours.value);

	const nightModeOverrideEnd = (parseInt(nightModeOverrideStart, 10) || 0) + nightModeOverrideLength;

	const isOverrideActive = Date.now() <= nightModeOverrideEnd;

	const needsNightModeToggle = !isOverrideActive && isNightModeOn() !== (await isTimeForNightMode());

	if (needsNightModeToggle) {
		nightMode_toggle.toggle('auto');
	}

	setTimeout(() => requestAnimationFrame(check), 5 * MINUTE);
});

function overrideNightMode() {
	if (nightMode_module.options.automaticNightMode.value === 'none') {
		return;
	}

	nightmodeOverrideStorage.set(Date.now());
}

function getGeolocation() {
	return new Promise((resolve, reject) => {
		navigator.geolocation.getCurrentPosition(position => resolve(position.coords), reject);
	});
}

async function getNightModeTimes() {
	switch (nightMode_module.options.automaticNightMode.value) {
		case 'automatic':
			try {
				const { latitude, longitude } = await getGeolocation();
				const { sunrise, sunset } = Object(suncalc["getTimes"])(new Date(), latitude, longitude);
				return { startingTime: sunset, endingTime: sunrise };
			} catch (err) {
				console.warn('Failed to init automatic night mode:', err);

				switch (err.code) {
					case err.PERMISSION_DENIED:
						return alert_namespaceObject.open(i18n('nightModeAutomaticNightModeDenied', 'confirm'), { cancelable: true }).then(() => {
							options_set(nightMode_module, 'automaticNightMode', 'none');

							return {
								startingTime: new Date(0),
								endingTime: new Date(0)
							};
						});
					case err.POSITION_UNAVAILABLE:
					case err.TIMEOUT:
					case err.UNKNOWN_ERROR:
					default:
						throw err;
				}
			}
		case 'user':
			return {
				startingTime: timeStringToDate(nightMode_module.options.nightModeStart.value),
				endingTime: timeStringToDate(nightMode_module.options.nightModeEnd.value)
			};
		default:
			throw new Error(`Invalid automaticNightMode value: ${nightMode_module.options.automaticNightMode.value}`);
	}
}

async function isTimeForNightMode() {
	const currentTime = new Date();
	const { startingTime, endingTime } = await getNightModeTimes();

	if (startingTime <= endingTime) {
		return startingTime <= currentTime && currentTime < endingTime;
	} else {
		return startingTime <= currentTime || currentTime < endingTime;
	}
}

function timeStringToDate(timeString) {
	const [hour, minute] = timeString.split(':').map(s => parseInt(s, 10));
	const date = new Date();
	date.setHours(hour, minute, 0, 0);
	return date;
}

const nightMode_className = () => {
	switch (appType()) {
		case 'r2':
			return 'res-nightmode';
		case 'd2x':
			return 'res-d2x-nightmode';
		default:
			throw new Error(`Impossible appType: ${appType()}`);
	}
};

const addNightMode = () => {
	bodyClasses_namespaceObject.add(nightMode_className());

	localStorage.setItem(localStorageKey, 'true');
};

const removeNightMode = () => {
	bodyClasses_namespaceObject.remove(nightMode_className());
	localStorage.removeItem(localStorageKey);
};
// CONCATENATED MODULE: ./lib/modules/userTagger.js
















const userTagger_module = new Module('userTagger');

const bgToTextColorMap = {
	none: 'inherit',
	aqua: 'black',
	black: 'white',
	blue: 'white',
	cornflowerblue: 'white',
	fuchsia: 'white',
	gray: 'white',
	green: 'white',
	lime: 'black',
	maroon: 'white',
	navy: 'white',
	olive: 'white',
	orange: 'white',
	orangered: 'white',
	pink: 'black',
	purple: 'white',
	red: 'white',
	silver: 'black',
	teal: 'white',
	white: 'black',
	yellow: 'black'
};

userTagger_module.moduleName = 'userTaggerName';
userTagger_module.category = 'usersCategory';
userTagger_module.description = 'userTaggerDesc';
userTagger_module.options = {
	showTaggingIcon: {
		title: 'userTaggerShowTaggingIconTitle',
		type: 'boolean',
		value: true,
		description: 'userTaggerShowTaggingIconDesc'
	},
	hardIgnore: {
		title: 'userTaggerHardIgnoreTitle',
		type: 'boolean',
		value: true,
		description: 'userTaggerHardIgnoreDesc'
	},
	showIgnored: {
		title: 'userTaggerShowIgnoredTitle',
		dependsOn: options => !options.hardIgnore.value,
		type: 'boolean',
		value: true,
		description: 'userTaggerShowIgnoredDesc'
	},
	storeSourceLink: {
		title: 'userTaggerStoreSourceLinkTitle',
		type: 'boolean',
		value: true,
		description: 'userTaggerStoreSourceLinkDesc',
		advanced: true
	},
	useCommentsLinkAsSource: {
		title: 'userTaggerUseCommentsLinkAsSourceTitle',
		type: 'boolean',
		value: true,
		description: 'userTaggerUseCommentsLinkAsSourceDesc',
		advanced: true
	},
	trackVoteWeight: {
		title: 'userTaggerTrackVoteWeightTitle',
		type: 'boolean',
		value: true,
		description: 'userTaggerTrackVoteWeightDesc',
		advanced: true
	},
	vwNumber: {
		title: 'userTaggerVwNumberTitle',
		type: 'boolean',
		value: true,
		description: 'userTaggerVWNumberDesc',
		advanced: true,
		dependsOn: options => options.trackVoteWeight.value
	},
	truncateTag: {
		title: 'userTaggerTruncateTagTitle',
		type: 'boolean',
		value: true,
		description: 'userTaggerTruncateTagDesc',
		advanced: true
	},
	presetTags: {
		title: 'userTaggerPresetTagsTitle',
		type: 'table',
		addRowText: '+add preset',
		fields: [{
			key: 'text',
			name: 'text',
			type: 'text'
		}, {
			key: 'color',
			name: 'color',
			type: 'select',
			value: 'none',
			values: Object.entries(bgToTextColorMap).map(([k, v]) => ({
				name: k,
				value: k,
				style: `color: ${v}; background-color: ${k};`
			}))
		}],
		value: [],
		description: 'userTaggerPresetTagsDesc',
		advanced: true
	}
};

const usernameRE = /(?:u|user)\/([\w\-]+)/;

const tagStorage = storage_namespaceObject.wrapPrefix('tag.', () => ({}), user => user.toLowerCase());

const getTagBatched = batch(async users => {
	const tags = await tagStorage.getMultipleNullable(users);
	return users.map(user => tags[user.toLowerCase()]);
}, { size: Infinity, delay: 0 });

userTagger_module.beforeLoad = () => {
	watchForElements(['siteTable', 'newComments'], usernameSelector, applyToUser);
	watchForRedditEvents('postAuthor', (element, { author, _: { update } }) => {
		if (update) return;
		applyToUser(element, { username: author });
	});
	watchForRedditEvents('commentAuthor', (element, { author, _: { update } }) => {
		if (update) return;
		applyToUser(element, { username: author });
	});
	watchForRedditEvents('userHovercard', (element, { user: { username }, _: { update } }) => {
		if (update) return;
		applyToUser(element, { username, renderTaggingIcon: false });
	});
};

userTagger_module.go = () => {
	if (isCurrentSubreddit('dashboard')) {
		userTagger_addDashboardFunctionality();
	}

	if (userTagger_module.options.trackVoteWeight.value && loggedInUser()) {
		attachVoteHandler();
	}

	userTagger_registerCommandLine();
};

const usernameSelector = '.contents .author, .noncollapsed a.author, p.tagline a.author, #friend-table span.user a, .sidecontentbox .author, div.md a[href^="/u/"]:not([href*="/m/"]), div.md a[href*="reddit.com/u/"]:not([href*="/m/"]), .usertable a.author, .usertable span.user a, div.wiki-page-content .author';

async function applyToUser(element, options) {
	let {
		username,
		renderTaggingIcon,
		renderVoteWeight
	} = options || {};
	if (!username && element instanceof HTMLAnchorElement) {
		username = getUsername(element);
	}
	if (typeof renderTaggingIcon === 'undefined') {
		renderTaggingIcon = userTagger_module.options.showTaggingIcon.value && username !== loggedInUser();
	}
	if (typeof renderVoteWeight === 'undefined') {
		renderVoteWeight = userTagger_module.options.trackVoteWeight.value && username !== loggedInUser();
	}

	if (!username) {
		console.warn('Could not find username', element);
		return;
	}

	const tag = userTagger_Tag.getUnfilled(username);
	tag.add(element, { renderVoteWeight, renderTaggingIcon });
	await tag.fill();

	if (tag.ignored && element.classList.contains('author') && !isPageType('profile')) {
		const thing = Thing_Thing.from(element);
		if (thing) ignore(thing);
	}
}

function getUsername(element) {
	if (element.href) {
		const test = element.href.match(usernameRE);
		if (test) {
			return test[1];
		} else {
			throw new Error(`Regex failed on ${element.href}`);
		}
	} else {
		return element.getAttribute('data-user') || element.innerText || '';
	}
}

const userTagger_tags = new Map();

class userTagger_Tag {
	static buildTagElement({ text, color } = {}) {
		return string_namespaceObject.html`
			<span class="RESUserTag">
				<a
					class="userTagLink ${text || color ? 'hasTag' : 'RESUserTagImage'} ${userTagger_module.options.truncateTag.value ? 'truncateTag' : ''}"
					${(text || color) && string_namespaceObject._html`style="background-color: ${color || 'none'}; color: ${bgToTextColorMap[color || 'none']} !important;"`}
					title="${text || 'set a tag'}"
					href="javascript:void 0"
				>${text || '\u00A0'}</a>
			</span>
		`;
	}

	static async getStored() {
		return Object.entries((await tagStorage.getAll())).map(([k, v]) => {
			const tag = userTagger_Tag.getUnfilled(k);
			tag.load(v);
			return tag;
		});
	}

	static getUnfilled(id) {
		let tag = userTagger_tags.get(id);
		if (!tag) {
			tag = new userTagger_Tag(id);
			userTagger_tags.set(id, tag);
		}

		return tag;
	}

	static async get(id) {
		const tag = userTagger_Tag.getUnfilled(id);
		await tag.fill();
		return tag;
	}

	constructor(id = '~dummy') {
		this.text = null;
		this.link = null;
		this.color = null;
		this.ignored = false;
		this.votesUp = 0;
		this.votesDown = 0;
		this.instances = [];
		this.fill = once_default()(async () => {
			const data = await getTagBatched(this.id);
			if (data) this.load(data);
		});

		this.id = id;
	}

	load(data) {
		if (data.color !== undefined) this.color = data.color;else if (data.color === 'none') this.color = null;
		if (data.ignored !== undefined) this.ignored = data.ignored;
		if (data.link !== undefined) this.link = data.link;
		if (data.text !== undefined) this.text = data.text;
		if (data.votesDown !== undefined) this.votesDown = data.votesDown;
		if (data.votesUp !== undefined) this.votesUp = data.votesUp;

		for (const instance of this.instances) this.render(instance);
	}

	extract() {
		return {
			color: this.color,
			ignored: this.ignored,
			link: this.link,
			text: this.text,
			votesDown: this.votesDown,
			votesUp: this.votesUp
		};
	}

	save() {
		const base = new userTagger_Tag().extract();
		const data = this.extract();
		tagStorage.set(this.id, pickBy_default()(data, (v, k) => base[k] !== v));
	}

	add(element, { renderTaggingIcon = false, renderVoteWeight = false } = {}) {
		const instance = { element, renderTaggingIcon, renderVoteWeight };
		this.instances.push(instance);
		this.render(instance);
	}

	get votes() {
		return this.votesUp - this.votesDown;
	}

	ignore({ showNotice = true } = {}) {
		if (showNotice) {
			notifications_showNotification({
				moduleID: userTagger_module.moduleID,
				notificationID: 'addedToIgnoreList',
				message: `
					<p>Now ignoring content posted by ${this.id}.</p>
					${isPageType('inbox') ? `
						<p>If you wish to block ${this.id} from sending you messages, go to <a href="/message/messages/">your messages</a> and click 'block user' underneath their last message.</p>
						<p><a href="https://www.reddit.com/r/changelog/comments/ijfps/reddit_change_users_may_block_other_users_that/">About blocking users</a>.</p>
					` : ''}
				`,
				closeDelay: 5000
			});
		}

		this.ignored = true;
		if (!this.text) this.text = 'ignored';
		this.save();
	}

	unignore() {
		this.ignored = false;
		if (this.text === 'ignored') this.text = null;
		this.save();
	}

	openPrompt(instance) {
		if (this.link === null && userTagger_module.options.storeSourceLink.value) {
			this.link = getLinkBasedOnTagLocation(instance.element);
		}

		infocard('userTagger').target(instance.tagger || instance.element).options({ openDelay: 0, width: 350 }).populateWith(card => populateDialog(this, card)).begin();
	}

	render(instance) {
		if (instance.vw) instance.vw.remove();
		if (instance.renderVoteWeight && (this.votesUp || this.votesDown)) {
			instance.vw = string_namespaceObject.html`
				<a
					class="voteWeight"
					href="javascript:void 0"
					title="${i18n('userTaggerYourVotesFor', this.id, `+${this.votesUp} -${this.votesDown}`)}"
					style="${getVoteWeightStyle(this)}"
				>${userTagger_module.options.vwNumber.value ? `[${this.votes > 0 ? '+' : ''}${this.votes}]` : '[vw]'}</a>
			`;
			instance.vw.addEventListener('click', () => this.openPrompt(instance));
			if (isAppType('d2x')) {
				(instance.tagger || instance.element).appendChild(instance.vw);
			} else {
				(instance.tagger || instance.element).after(instance.vw);
			}
		}

		if (instance.tagger) instance.tagger.remove();
		if (this.text || this.color || instance.renderTaggingIcon) {
			instance.tagger = this.text || this.color ? userTagger_Tag.buildTagElement(this) : userTagger_Tag.defaultTagElement();
			instance.tagger.addEventListener('click', () => this.openPrompt(instance));
			if (isAppType('d2x')) {
				instance.element.appendChild(instance.tagger);
			} else {
				instance.element.after(instance.tagger);
			}
		}
	}
}

userTagger_Tag.defaultTagElement = (e => () => e().cloneNode(true))(once_default()(() => userTagger_Tag.buildTagElement()));

const ignoreIcons = {
	IGNORED: '\uF038',
	NORMAL: '\uF03B'
};

function populateDialog(tag, card) {
	const head = string_namespaceObject.html`<div><span class="res-icon">&#xF0AC;</span>&nbsp;<span>${tag.id}</span></div>`;

	const colors = Object.entries(bgToTextColorMap).map(([color, textColor]) => ({
		textColor,
		color
	}));

	const presetTags = userTagger_module.options.presetTags.value;

	const body = string_namespaceObject.html`
		<form id="userTaggerToolTip">
			<div class="fieldPair">
				<label class="fieldPair-label" for="userTaggerText">Text</label>
				<input class="fieldPair-text" type="text" id="userTaggerText" value="${tag.text}">
			</div>
			<div class="fieldPair">
				<label class="fieldPair-label" for="userTaggerColor">Color</label>
				<select id="userTaggerColor">
					${colors.map(({ textColor, color }) => string_namespaceObject._html`
						<option style="color: ${textColor}; background-color: ${color}" value="${color}" ${tag.color === color && string_namespaceObject._html`selected`}>${color}</option>
					`)}
				</select>
			</div>
			<div class="fieldPair" style="flex-wrap: wrap">
				<label class="fieldPair-label" for="userTaggerPreview">Preview</label>
				<span id="userTaggerPreview"></span>
				<a id="userTaggerPresetSaveAs" title="save as preset" href="javascript:void 0">save as preset</a>
			</div>
			<div class="fieldPair res-usertag-ignore">
				<label class="fieldPair-label" for="userTaggerIgnore">Ignore</label>
				${string_namespaceObject.safe(makeUrlHashLink(userTagger_module.moduleID, 'hardIgnore', ' configure ', 'gearIcon'))}
			</div>
			<div class="fieldPair">
				<label class="fieldPair-label" for="userTaggerLink">
					<span class="userTaggerOpenLink">
						<a title="open link" href="javascript:void 0">Source URL</a>
					</span>
				</label>
				<input class="fieldPair-text" type="text" id="userTaggerLink" value="${tag.link}">
			</div>
			<div class="fieldPair">
				<label class="fieldPair-label" for="userTaggerVotesUp" title="Upvotes you have given this redditor">Upvotes</label>
				<input type="number" style="width: 50px;" id="userTaggerVotesUp" value="${tag.votesUp}">
			</div>
			<div class="fieldPair">
				<label class="fieldPair-label" for="userTaggerVotesDown" title="Downvotes you have given this redditor">Downvotes</label>
				<input type="number" style="width: 50px;" id="userTaggerVotesDown" value="${tag.votesDown}">
			</div>
			<div class="fieldPair" ${!presetTags.length && 'hidden'}>
				<label class="fieldPair-label" for="userTaggerPresetTags">Presets</label>
				<span id="userTaggerPresetTags"></span>
			</div>
			<div class="res-usertagger-footer">
				<a href="/r/dashboard#userTaggerContents" target="_blank" rel="noopener noreferer">View tagged users</a>
				<input type="submit" id="userTaggerSave" value=" save tag">
			</div>
		</form>
	`;

	const elements = {
		color: downcast(body.querySelector('#userTaggerColor'), HTMLSelectElement),
		presetSaveAs: downcast(body.querySelector('#userTaggerPresetSaveAs'), HTMLAnchorElement),
		presetTag: downcast(body.querySelector('#userTaggerPresetTags'), HTMLElement),
		presetFieldPair: downcast(body.querySelector('#userTaggerPresetTags').parentElement, HTMLElement),
		link: downcast(body.querySelector('#userTaggerLink'), HTMLInputElement),
		openLink: downcast(body.querySelector('.userTaggerOpenLink a'), HTMLAnchorElement),
		preview: downcast(body.querySelector('#userTaggerPreview'), HTMLElement),
		save: downcast(body.querySelector('#userTaggerSave'), HTMLElement),
		text: downcast(body.querySelector('#userTaggerText'), HTMLInputElement),
		votesDown: downcast(body.querySelector('#userTaggerVotesDown'), HTMLInputElement),
		votesUp: downcast(body.querySelector('#userTaggerVotesUp'), HTMLInputElement)
	};

	let ignored = tag.ignored;
	body.querySelector('.res-usertag-ignore label').after(createElement_namespaceObject.toggleButton(ignore => {
		if (ignore && !elements.text.value) elements.text.value = 'ignored';
		if (!ignore && elements.text.value === 'ignored') elements.text.value = '';
		ignored = ignore;
	}, 'userTaggerIgnore', ignored, ignoreIcons.IGNORED, ignoreIcons.NORMAL, false, true));

	function extract() {
		return {
			color: elements.color.value !== 'none' ? elements.color.value : null,
			ignored,
			link: elements.link.value || null,
			text: elements.text.value || null,
			votesDown: parseInt(elements.votesDown.value, 10) || 0,
			votesUp: parseInt(elements.votesUp.value, 10) || 0
		};
	}

	function updateTagPreview() {
		empty(elements.preview);
		elements.preview.appendChild(userTagger_Tag.buildTagElement(extract()));
	}

	function buildPresetTagElement(text, color) {
		const element = userTagger_Tag.buildTagElement({ text, color });
		element.addEventListener('click', () => {
			tag.load({ text, color });
			tag.save();
			card.close();
		});
		return element;
	}

	function saveAsPreset() {
		const { text, color } = extract();
		if (text || color) {
			elements.presetFieldPair.hidden = false;
			elements.presetTag.append(buildPresetTagElement(text, color));
			options_set(userTagger_module.moduleID, 'presetTags', [...presetTags, [text, color]]);
		} else {
			window.alert('Tag text must be specified in order to save as preset.');
		}
	}

	elements.openLink.addEventListener('click', () => openNewTabs('none', ...elements.link.value.split(/\s/)));
	elements.presetTag.append(...presetTags.map(([text, color]) => buildPresetTagElement(text, color)));
	elements.presetSaveAs.addEventListener('click', () => saveAsPreset());

	$(body).on('change input click', updateTagPreview);
	body.addEventListener('submit', e => {
		e.preventDefault();
		tag.load(extract());
		tag.save();
		card.close();
	});

	updateTagPreview();
	setTimeout(() => {
		elements.text.setSelectionRange(elements.text.value.length, elements.text.value.length);
		elements.text.focus();
	});

	return [head, body];
}

function userTagger_registerCommandLine() {
	let tag;

	registerCommand('tag', `tag [text] - ${i18n('userTaggerCommandLineDescription')}`, async (command, val) => {
		const username = selectedThing && selectedThing.getAuthor();
		tag = username && (await userTagger_Tag.get(username));
		return tag ? i18n(val ? 'userTaggerTagUserAs' : 'userTaggerTagUser', tag.id, val) : i18n('userTaggerTagCanNotSetTag');
	}, (command, val) => {
		if (tag) {
			tag.load({ text: val });
			tag.save();
		} else {
			return i18n('userTaggerTagCanNotSetTag');
		}
	});
}

function attachVoteHandler() {
	document.body.addEventListener('click', e => {
		if (e.button !== 0) return;
		if (e.target.classList.contains('arrow')) {
			handleVoteClick(e.target);
		}
	}, true);
}

async function handleVoteClick(arrow) {
	const $this = $(arrow);
	const $otherArrow = $this.siblings('.arrow');

	if ($this.hasClass('archived')) {
		return;
	}

	let up = 0;
	let down = 0;
	if ($this.hasClass('up')) {
		up = 1;
		if ($otherArrow.hasClass('downmod')) {
			down = -1;
		}
	} else if ($this.hasClass('upmod')) {
		up = -1;
	} else if ($this.hasClass('down')) {
		down = 1;
		if ($otherArrow.hasClass('upmod')) {
			up = -1;
		}
	} else if ($this.hasClass('downmod')) {
		down = -1;
	}

	const thing = Thing_Thing.checkedFrom(arrow);
	const username = thing.getAuthor();

	if (username === loggedInUser()) return;

	const tag = username && (await userTagger_Tag.get(username));
	if (!tag) throw new Error('No tag');
	tag.load({
		votesUp: tag.votesUp + up,
		votesDown: tag.votesDown + down
	});
	tag.save();
}

function getLinkBasedOnTagLocation(obj) {
	const closestEntry = $(obj).closest('.entry');
	let linkTitle = '';
	if (!userTagger_module.options.useCommentsLinkAsSource.value) {
		linkTitle = $(closestEntry).find('a.title');
	}

	if (!linkTitle.length) {
		linkTitle = $(closestEntry).find('a.bylink');
	}
	if (linkTitle.length) {
		return $(linkTitle).attr('href');
	} else {
		const permaLink = $(closestEntry).find('.flat-list.buttons li.first a');
		if (permaLink.length) {
			return $(permaLink).attr('href');
		}
	}
}

function ignore(thing) {
	thing.element.classList.add('res-ignored-content');

	if (thing.isPost()) {
		ignorePost(thing);
	} else if (thing.isComment()) {
		ignoreComment(thing);
	}
}

function ignorePost(thing) {
	if (userTagger_module.options.hardIgnore.value) {
		thing.element.remove();
	} else {
		const title = downcast(thing.getTitleElement(), HTMLElement);
		ignoredPlaceholder(thing).insertAfter(title);
	}
}

function ignoreComment(thing) {
	if (userTagger_module.options.hardIgnore.value) {
		if ($(thing.element).children('.child').children().length === 0) {
			thing.element.remove();
			return;
		} else if (thing.element.classList.contains('noncollapsed')) {
			const toggleComment = downcast(thing.entry.querySelector('a.expand'), HTMLElement);
			click(toggleComment);
		}
	}

	const body = downcast(thing.entry.querySelector('.md'), HTMLElement);
	ignoredPlaceholder(thing).insertAfter(body);
}

function ignoredPlaceholder(thing) {
	const $wrapper = $('<span>', { class: 'res-ignored-message' }).append($('<span>', { class: 'res-icon', text: '\uF093' }), $('<span>', { text: ` ${i18n('userTaggerIgnoredPlaceholder')} ` }));

	if (userTagger_module.options.showIgnored.value) {
		const $button = $('<a>', { href: '#', text: i18n('userTaggerShowAnyway') });
		$button.click(e => {
			e.preventDefault();
			thing.element.classList.remove('res-ignored-content');
			$wrapper.remove();
		});
		$button.appendTo($wrapper);
	}

	return $wrapper;
}

function getVoteWeightStyle({ votes, votesUp, votesDown }) {
	let red = 255;
	let green = 255;
	let blue = 255;
	let alpha = 1;
	if (votesUp > votesDown) {
		red = Math.max(0, 255 - 8 * votes);
		green = 255;
		blue = Math.max(0, 255 - 8 * votes);
		alpha = Math.abs(votes) / (votesUp + votesDown);
	} else if (votesUp < votesDown) {
		red = 255;
		green = Math.max(0, 255 - Math.abs(8 * votes));
		blue = Math.max(0, 255 - Math.abs(8 * votes));
		alpha = Math.abs(votes) / (votesUp + votesDown);
	}

	const color = `rgba(${red}, ${green}, ${blue}, ${0.2 + alpha * 0.8})`;
	return isNightModeOn() ? `color: ${color};` : `background-color: ${color};`;
}

const userTagger_filters = [{ get name() {
		return i18n('userTaggerAllUsers');
	}, filter: v => v }, { get name() {
		return i18n('userTaggerTaggedUsers');
	}, filter: v => v.text }];

async function userTagger_addDashboardFunctionality() {
	const $tabPage = addTab('userTaggerContents', i18n('userTaggerMyUserTags'), userTagger_module.moduleID);

	const $showDiv = $(string_namespaceObject.html`<div class="show">${i18n('userTaggerShow')} </div>`).appendTo($tabPage);

	const tags = await userTagger_Tag.getStored();
	$(string_namespaceObject.html`
		<select id="tagFilter">
			${userTagger_filters.map(({ name, filter }, i) => string_namespaceObject._html`<option value="${i}" ${tags.some(filter) && 'selected'}>${name}</option>`)}
		</select>
	`).change(() => drawUserTagTable()).appendTo($showDiv);

	const tagsPerPage = parseInt(dashboard_module.options.tagsPerPage.value, 10);
	if (tagsPerPage) {
		const controlWrapper = document.createElement('div');
		controlWrapper.id = 'tagPageControls';
		$(controlWrapper).data({
			page: 1,
			pageCount: 1
		});

		const leftButton = document.createElement('a');
		leftButton.className = 'res-step noKeyNav';
		leftButton.addEventListener('click', () => {
			const { page, pageCount } = $(controlWrapper).data();
			if (page === 1) {
				$(controlWrapper).data('page', pageCount);
			} else {
				$(controlWrapper).data('page', page - 1);
			}
			drawUserTagTable();
		});
		$(controlWrapper).append(string_namespaceObject.escape`${i18n('userTaggerPage')} `);
		controlWrapper.appendChild(leftButton);

		const posLabel = document.createElement('span');
		posLabel.className = 'res-step-progress';
		posLabel.textContent = '1 of 2';
		controlWrapper.appendChild(posLabel);

		const rightButton = document.createElement('a');
		rightButton.className = 'res-step res-step-reverse noKeyNav';
		rightButton.addEventListener('click', () => {
			const { page, pageCount } = $(controlWrapper).data();
			if (page === pageCount) {
				$(controlWrapper).data('page', 1);
			} else {
				$(controlWrapper).data('page', page + 1);
			}
			drawUserTagTable();
		});
		controlWrapper.appendChild(rightButton);

		$tabPage.append(controlWrapper);
	}
	const $thisTable = $(string_namespaceObject.html`
		<table id="userTaggerTable">
			<thead>
				<tr>
					<th sort="username" class="active">${i18n('userTaggerUsername')}<span class="sortAsc"></span></th>
					<th sort="tag">${i18n('userTaggerTag')}</th>
					<th sort="ignore">${i18n('userTaggerIgnored')}</th>
					<th sort="color">${i18n('userTaggerColor')}</th>
					<th sort="votesDown">${i18n('userTaggerVotesDown')}</th>
					<th sort="votesUp">${i18n('userTaggerVotesUp')}</th>
				</tr>
			</thead>
			<tbody></tbody>
		</table>
	`);

	$tabPage.append($thisTable);
	$('#userTaggerTable thead th').click(function (e) {
		e.preventDefault();
		const $this = $(this);

		if ($this.hasClass('delete')) {
			return false;
		}
		if ($this.hasClass('active')) {
			$this.toggleClass('descending');
		}
		$this.addClass('active');
		$this.siblings().removeClass('active').find('SPAN').remove();
		$this.find('.sortAsc, .sortDesc').remove();
		$this.append($(e.target).hasClass('descending') ? '<span class="sortDesc" />' : '<span class="sortAsc" />');
		drawUserTagTable($(e.target).attr('sort'), $(e.target).hasClass('descending'));
	});
	drawUserTagTable();
}

let userTagger_currentSortMethod, userTagger_isDescending;

async function drawUserTagTable(sortMethod, descending) {
	userTagger_currentSortMethod = sortMethod || userTagger_currentSortMethod;
	userTagger_isDescending = descending === undefined || descending === null ? userTagger_isDescending : descending;

	const tags = (await userTagger_Tag.getStored()).filter(userTagger_filters[$('#tagFilter').val()].filter);

	switch (userTagger_currentSortMethod) {
		case 'tag':
			tags.sort((a, b) => (a.text || '').localeCompare(b.text || ''));
			break;
		case 'ignore':
			tags.sort((a, b) => Number(a.ignored) - Number(b.ignored));
			break;
		case 'color':
			tags.sort((a, b) => (a.color || '').localeCompare(b.color || ''));
			break;
		case 'votesDown':
			tags.sort((a, b) => a.votesDown - b.votesDown);
			break;
		case 'votesUp':
			tags.sort((a, b) => a.votesUp - b.votesUp);
			break;
		case 'username':
		default:
			tags.sort((a, b) => a.id.localeCompare(b.id));
			break;
	}

	if (userTagger_isDescending) {
		tags.reverse();
	}

	$('#userTaggerTable tbody').html('');
	const tagsPerPage = parseInt(dashboard_module.options.tagsPerPage.value, 10);
	const count = tags.length;
	let start = 0;
	let end = count;

	if (tagsPerPage) {
		const $tagControls = $('#tagPageControls');
		let page = $tagControls.data('page');
		const pages = Math.ceil(count / tagsPerPage);
		page = Math.min(page, pages);
		page = Math.max(page, 1);
		$tagControls.data('page', page).data('pageCount', pages);
		$tagControls.find('.res-step-progress').text(i18n('userTaggerPageXOfY', page, pages));
		start = tagsPerPage * (page - 1);
		end = Math.min(count, tagsPerPage * page);
	}

	tags.slice(start, end).forEach(tag => {
		const d = $(`
				<tr>
					<td>
						<span class="res-icon res-right deleteIcon" data-icon="&#xf056;" user="${tag.id}"></span>
						<a href="/user/${tag.id}">${tag.id}</a>
					</td>
					<td><a class="author" hidden></a></td>
					<td class="res-icon">${tag.ignored ? ignoreIcons.IGNORED : ignoreIcons.NORMAL}</td>
					<td><span style="color: ${tag.color || 'initial'}">${tag.color ? tag.color : ''}</span></td>
					<td>${tag.votesDown}</td>
					<td>${tag.votesUp}</td>
				</tr>
			`).get(0);

		tag.add(downcast(d.querySelector('.author'), HTMLAnchorElement), { renderTaggingIcon: true });

		$('#userTaggerTable tbody').append(d);
	});
	$('#userTaggerTable tbody .deleteIcon').click(function () {
		const thisUser = $(this).attr('user').toLowerCase();
		const $button = $(this);
		alert_namespaceObject.open(i18n('userTaggerAreYouSureYouWantToDeleteTag', thisUser), { cancelable: true }).then(() => {
			tagStorage.delete(thisUser);
			$button.closest('tr').remove();
		});
	});
}
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/UserVoteWeight.js







class UserVoteWeight_UserVoteWeight extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.trueText = `vote weight ${prettyOperator(this.value.op)} ${this.value.val}`, this.falseText = `vote weight ${prettyOperator(inverseOperator(this.value.op))} ${this.value.val}`, _temp;
	}

	static parseCriterion(input) {
		return { op: '>=', val: parseInt(input, 10) };
	}
	static async thingToCriterion(thing) {
		const username = thing.getAuthor();
		if (!username) throw new Error('No username');
		return String((await userTagger_Tag.get(username)).votes || 0);
	}

	static get disabled() {
		return !modules_isRunning(userTagger_namespaceObject) || !userTagger_module.options.trackVoteWeight.value;
	}

	validator() {
		return Number.isInteger(this.value.val);
	}

	async evaluate(thing) {
		const username = thing.getAuthor();
		return !!username && numericalCompare(this.value.op, (await userTagger_Tag.get(username)).votes, this.value.val);
	}
}
UserVoteWeight_UserVoteWeight.text = 'User vote weight';
UserVoteWeight_UserVoteWeight.defaultConditions = { op: '>', val: 0 };
UserVoteWeight_UserVoteWeight.fields = ['user\'s vote weight is ', { type: 'select', options: 'COMPARISON', id: 'op' }, ' ', { type: 'number', id: 'val' }, ' votes'];
UserVoteWeight_UserVoteWeight.slow = 1;
UserVoteWeight_UserVoteWeight.pattern = 'integer';
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/Username.js




class Username_Username extends Case_Case {

	static parseCriterion(input) {
		return { patt: input };
	}
	static thingToCriterion(thing) {
		return thing.getAuthor();
	}

	constructor(conditions) {
		super(Case_Case.buildRegex(conditions.patt));
		this.trueText = `by ${conditions.patt}`;
		this.falseText = ` by ${conditions.patt}`;
	}

	evaluate(thing, values = [this.value]) {
		const user = thing.getAuthor();
		return !!user && values.some(v => v.test(user));
	}
}
Username_Username.text = 'Username';
Username_Username.defaultConditions = { patt: '' };
Username_Username.fields = ['posted by /u/', { type: 'text', id: 'patt' }];
Username_Username.reconcilable = true;
Username_Username.pattern = 'RegEx';
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/VoteType.js




const VoteType_options = [['upvoted', 'upvote'], ['downvoted', 'downvote'], ['not voted', 'unvoted']];

class VoteType_VoteType extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this._optionText = (VoteType_options.find(([, cls]) => cls === this.value.kind) || [])[0], this.trueText = this._optionText, this.falseText = ` ${this._optionText}`, _temp;
	}

	static parseCriterion(input) {
		return { kind: input };
	}

	validator() {
		return VoteType_options.map(([, cls]) => cls).includes(this.value.kind);
	}

	evaluate(thing) {
		switch (this.value.kind) {
			case 'upvote':
				return thing.isUpvoted();
			case 'downvote':
				return thing.isDownvoted();
			case 'unvoted':
				return thing.isUnvoted();
			default:
				return false;
		}
	}
}
VoteType_VoteType.text = 'Vote type';
VoteType_VoteType.defaultConditions = { kind: 'unvoted' };
VoteType_VoteType.fields = ['post is ', { type: 'select', id: 'kind', options: VoteType_options }, ' by me'];
VoteType_VoteType.pattern = `(${VoteType_options.map(([, cls]) => cls).join('|')})`;
// CONCATENATED MODULE: ./lib/modules/filteReddit/postCases/index.js
























// CONCATENATED MODULE: ./lib/modules/filteReddit/commentCases/CommentContent.js




class CommentContent_CommentContent extends Case_Case {

	static parseCriterion(input) {
		return { patt: input };
	}

	constructor(conditions) {
		super(Case_Case.buildRegex(conditions.patt, { fullMatch: false }));
		this.trueText = `comment contains ${conditions.patt}`;
		this.falseText = ` comment contains ${conditions.patt}`;
	}

	evaluate(thing, values = [this.value]) {
		const md = thing.entry.querySelector('.md');
		return !!md && values.some(v => v.test(md.textContent));
	}
}
CommentContent_CommentContent.text = 'Comment content';
CommentContent_CommentContent.defaultConditions = { patt: '' };
CommentContent_CommentContent.fields = ['comment contains ', { type: 'text', id: 'patt' }];
CommentContent_CommentContent.reconcilable = true;
CommentContent_CommentContent.pattern = 'RegEx';
// CONCATENATED MODULE: ./lib/modules/filteReddit/commentCases/CommentLength.js





const CommentLength_options = ['characters', 'words'];

class CommentLength_CommentLength extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.trueText = `length ${prettyOperator(this.value.op)} ${this.value.val} ${this.value.kind}`, this.falseText = `length ${prettyOperator(inverseOperator(this.value.op))} ${this.value.val} ${this.value.kind}`, _temp;
	}

	static parseCriterion(input) {
		return { op: '>=', kind: 'words', val: parseInt(input, 10) };
	}

	validator() {
		return Number.isInteger(this.value.val);
	}

	evaluate(thing) {
		const md = thing.entry.querySelector('.md');
		if (!md) return false;
		switch (this.value.kind) {
			case 'characters':
				return numericalCompare(this.value.op, md.textContent.length, this.value.val);
			case 'words':
				return numericalCompare(this.value.op, md.textContent.split(' ').length, this.value.val);
			default:
				return false;
		}
	}
}
CommentLength_CommentLength.text = 'Comment length';
CommentLength_CommentLength.fields = ['comment length is ', { type: 'select', options: 'COMPARISON', id: 'op' }, ' ', { type: 'number', id: 'val' }, ' ', { type: 'select', id: 'kind', options: CommentLength_options }];
CommentLength_CommentLength.defaultConditions = { op: '>', kind: 'words', val: 0 };
CommentLength_CommentLength.pattern = 'integer';
// CONCATENATED MODULE: ./lib/modules/filteReddit/commentCases/Depth.js





class Depth_Depth extends Case_Case {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.trueText = `depth ${prettyOperator(this.value.op)} ${this.value.val}`, this.falseText = `depth ${prettyOperator(inverseOperator(this.value.op))} ${this.value.val}`, _temp;
	}

	static parseCriterion(input) {
		return { op: '==', val: parseInt(input, 10) };
	}
	static thingToCriterion(thing) {
		return String(thing.getParents().length);
	}

	validator() {
		return this.value.val >= 0;
	}

	evaluate(thing) {
		const depth = thing.getParents().length;
		return isNaN(depth) ? false : numericalCompare(this.value.op, depth, this.value.val);
	}
}
Depth_Depth.text = 'Comment depth';
Depth_Depth.defaultConditions = { op: '>', val: 0 };
Depth_Depth.fields = ['comment\'s depth ', { type: 'select', options: 'COMPARISON', id: 'op' }, ' ', { type: 'number', id: 'val' }];
Depth_Depth.pattern = 'integer';
// CONCATENATED MODULE: ./lib/modules/filteReddit/commentCases/IsDeleted.js




class IsDeleted_IsDeleted extends Case_Case {

	evaluate(thing) {
		return thing.isDeleted();
	}
}
IsDeleted_IsDeleted.text = 'Deleted';
IsDeleted_IsDeleted.fields = ['comment is deleted'];
IsDeleted_IsDeleted.unique = true;
// CONCATENATED MODULE: ./lib/modules/readComments.js







const readComments_module = new Module('readComments');

readComments_module.moduleName = 'readCommentsName';
readComments_module.category = 'commentsCategory';
readComments_module.description = 'readCommentsDesc';
readComments_module.options = {
	cleanComments: {
		type: 'text',
		value: '30',
		description: 'readCommentsCleanCommentsDesc',
		title: 'readCommentsCleanCommentsTitle'
	},
	monitorWhenIncognito: {
		type: 'boolean',
		value: false,
		description: 'readCommentsMonitorWhenIncognitoDesc',
		title: 'readCommentsMonitorWhenIncognitoTitle',
		advanced: true
	}
};

readComments_module.include = ['comments', 'commentsLinklist'];

const readComments_currentId = (execRegexes.comments(location.pathname) || [])[2] || location.pathname;
const readComments_lastCleanStorage = storage_namespaceObject.wrap('RESmodules.readComments.lastClean', 0);
const readComments_entryStorage = storage_namespaceObject.wrapPrefix('readComments.', () => ({
	updateTime: Date.now(),
	ids: {}
}));
const initialStorage = reifyPromise(readComments_entryStorage.get(readComments_currentId).then(({ ids }) => new Set(Object.keys(ids))));

readComments_module.beforeLoad = async () => {
	if (!readComments_module.options.monitorWhenIncognito.value && isPrivateBrowsing()) return;

	const ids = await initialStorage.get();

	selectedEntry_addListener(selected => {
		if (selected.isComment() && selected.isContentVisible()) {
			const id = selected.getFullname();
			ids.add(id);
			readComments_entryStorage.patch(readComments_currentId, { ids: { [id]: true }, updateTime: Date.now() });
		}
	}, 'beforePaint');
};

readComments_module.afterLoad = () => {
	readComments_maybePruneOldEntries();
};

async function readComments_maybePruneOldEntries() {
	const now = Date.now();
	if (now - (await readComments_lastCleanStorage.get()) < WEEK) return;
	readComments_lastCleanStorage.set(now);

	const keepTrackPeriod = DAY * parseInt(readComments_module.options.cleanComments.value, 10);
	for (const [id, { updateTime }] of Object.entries((await readComments_entryStorage.getAll()))) {
		if (now - updateTime > keepTrackPeriod) {
			readComments_entryStorage.delete(id);
		}
	}
}

const isRead = fastAsync(function* (thing) {
	if (!initialStorage) return false;
	const ids = yield initialStorage.get();
	return ids.has(thing.getFullname());
});
// CONCATENATED MODULE: ./lib/modules/filteReddit/commentCases/IsRead.js






class IsRead_IsRead extends Case_Case {
	static get disabled() {
		return !modules_isRunning(readComments_namespaceObject);
	}

	evaluate(thing) {
		return isRead(thing);
	}
}
IsRead_IsRead.text = 'Read';
IsRead_IsRead.fields = ['comment is read'];
IsRead_IsRead.unique = true;
// CONCATENATED MODULE: ./lib/modules/filteReddit/commentCases/index.js

















// CONCATENATED MODULE: ./lib/modules/filteReddit/browseCases/BrowsingFrontPage.js





class BrowsingFrontPage_BrowsingFrontPage extends Case_Case {

	evaluate() {
		return isPageType('linklist') && !currentSubreddit() && !currentMultireddit() && !currentUserProfile();
	}
}
BrowsingFrontPage_BrowsingFrontPage.text = 'Browsing the front page';
BrowsingFrontPage_BrowsingFrontPage.fields = ['when browsing the front page'];
// CONCATENATED MODULE: ./lib/modules/filteReddit/browseCases/CurrentLocation.js





class CurrentLocation_CurrentLocation extends Case_Case {

	evaluate() {
		return fullLocation() === this.value.patt;
	}
}
CurrentLocation_CurrentLocation.text = 'When browsing in location';
CurrentLocation_CurrentLocation.defaultConditions = { patt: fullLocation() };
CurrentLocation_CurrentLocation.fields = ['when browsing ', { type: 'text', id: 'patt' }];
// CONCATENATED MODULE: ./lib/modules/filteReddit/browseCases/CurrentMulti.js





class CurrentMulti_CurrentMulti extends Case_Case {

	constructor(conditions) {
		super({
			name: Case_Case.buildRegex(conditions.name),
			user: Case_Case.buildRegex(conditions.user)
		});
	}

	evaluate() {
		const rawMulti = currentMultireddit();
		if (!rawMulti) return false;
		const parts = /^(?:user\/)?([a-z0-9_-]+)\/m\/([a-z0-9_-]+)$/i.exec(rawMulti);
		if (!parts) return false;
		const [, user, multi] = parts;
		if (user === 'me' && this.value.name === 'me') {
			return this.value.name.test(multi);
		} else {
			return this.value.user.test(user) && this.value.name.test(multi);
		}
	}
}
CurrentMulti_CurrentMulti.text = 'When browsing a multireddit';
CurrentMulti_CurrentMulti.defaultConditions = { user: '', name: '' };
CurrentMulti_CurrentMulti.fields = ['when browsing /u/', { type: 'text', id: 'user' }, '/m/', { type: 'text', id: 'name' }];
// CONCATENATED MODULE: ./lib/modules/filteReddit/browseCases/CurrentUserProfile.js





class CurrentUserProfile_CurrentUserProfile extends Case_Case {

	constructor(conditions) {
		super(Case_Case.buildRegex(conditions.patt));
	}

	evaluate() {
		const user = currentUserProfile();
		return !!user && this.value.test(user);
	}
}
CurrentUserProfile_CurrentUserProfile.text = 'When browsing a user profile';
CurrentUserProfile_CurrentUserProfile.defaultConditions = { patt: '' };
CurrentUserProfile_CurrentUserProfile.fields = ['when browsing /u/', { type: 'text', id: 'patt' }, '\'s posts'];
// CONCATENATED MODULE: ./lib/modules/filteReddit/browseCases/CurrentSub.js





class CurrentSub_CurrentSub extends Case_Case {

	constructor(conditions) {
		super(Case_Case.buildRegex(conditions.patt));
	}

	evaluate() {
		const sub = currentSubreddit();
		return !!sub && this.value.test(sub);
	}
}
CurrentSub_CurrentSub.text = 'When browsing a subreddit';
CurrentSub_CurrentSub.defaultConditions = { patt: '' };
CurrentSub_CurrentSub.fields = ['when browsing /r/', { type: 'text', id: 'patt' }];
// CONCATENATED MODULE: ./lib/modules/filteReddit/browseCases/Date.js





const Date_options = [['before', '<'], ['on or after', '>=']];

class Date_Date extends Case_Case {

	constructor({ date, op }) {
		super({ op, date: moment_default()(date) });
	}

	validator() {
		return this.value.date.isValid();
	}

	evaluate() {
		const now = moment_default()();
		if (this.value.op === '<') {
			return now.isBefore(this.value.date);
		} else if (this.value.op === '>=') {
			return now.isSameOrAfter(this.value.date);
		} else {
			return false;
		}
	}
}
Date_Date.text = 'Date';
Date_Date.defaultConditions = { op: '<', date: moment_default()().add(1, 'M').format('Y-M-D') };
Date_Date.fields = ['today is ', { type: 'select', options: Date_options, id: 'op' }, ' ', { type: 'text', id: 'date' }];
// CONCATENATED MODULE: ./lib/modules/filteReddit/browseCases/Dow.js




const Dow_days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

class Dow_Dow extends Case_Case {

	evaluate() {
		const currentDOW = Dow_days[new Date().getDay()];
		return this.value.days.includes(currentDOW);
	}
}
Dow_Dow.text = 'Day of week';
Dow_Dow.defaultConditions = { days: [] };
Dow_Dow.fields = ['current day of the week is ', { type: 'checkset', items: Dow_days, id: 'days' }];
// CONCATENATED MODULE: ./lib/modules/filteReddit/browseCases/LoggedInAs.js





class LoggedInAs_LoggedInAs extends Case_Case {

	static get defaultConditions() {
		return { loggedInAs: loggedInUser() };
	}

	constructor(conditions) {
		super(Case_Case.buildRegex(conditions.loggedInAs));
	}

	evaluate() {
		const myName = loggedInUser();
		return !!myName && this.value.test(myName);
	}
}
LoggedInAs_LoggedInAs.text = 'Logged in user';
LoggedInAs_LoggedInAs.fields = ['logged in as /u/', { type: 'text', id: 'loggedInAs' }];
// CONCATENATED MODULE: ./lib/modules/filteReddit/browseCases/Toggle.js





const Toggle_getOptions = () => customToggles_getToggles().map(({ key, text }) => [text, key]);

class Toggle_Toggle extends Case_Case {

	evaluate() {
		const key = this.value.toggleName;
		return toggleActive(key);
	}
}
Toggle_Toggle.text = 'Custom toggle';
Toggle_Toggle.defaultConditions = { toggleName: Toggle_getOptions()[0] || '' };
Toggle_Toggle.fields = ['custom toggle ', { type: 'select', id: 'toggleName', get options() {
		return Toggle_getOptions();
	} }, ' is enabled'];
// CONCATENATED MODULE: ./lib/modules/filteReddit/browseCases/index.js











// CONCATENATED MODULE: ./lib/modules/filteReddit/cases.js









class cases_Inert extends Case_Case {
	evaluate() {
		console.error('Evaluating inert case');return false;
	}
}

class cases_True extends Case_Case {

	evaluate() {
		return true;
	}
}

cases_True.text = 'True';
cases_True.fields = ['always true'];
class cases_False extends Case_Case {

	evaluate() {
		return false;
	}
}

cases_False.text = 'False';
cases_False.fields = ['always false'];
class cases_Group extends Case_Case {

	validator() {
		return this._cases.every(v => v.validate());
	}

	constructor({ op, of, name }) {
		const [NONE, ANY, ONE, ALL] = [op === 'none', op === 'any', op === 'one', op === 'all'];

		const evaluators = [];
		let seenTrue = false;

		super(fastAsync(function* (thing) {
			seenTrue = false;

			for (const evaluator of evaluators) {
				if (yield evaluator(thing)) {
					if (NONE) return false;else if (ANY) return true;else if (ONE && seenTrue) return false;
					seenTrue = true;
				} else {
					if (ALL) return false;
				}
			}

			if (NONE) return true;else if (ANY) return false;else if (ONE && seenTrue) return true;else if (ALL) return true;
		}));

		this._cases = [];
		const cases = of.map(Case_Case.fromConditions.bind(Case_Case)).sort(({ constructor: a }, { constructor: b }) => Number(a !== b));

		const l = cases.length;
		for (let i = 0; i < l; i++) {
			const caseA = cases[i];
			if (caseA instanceof cases_Inert) return new cases_Inert();
			this._cases.push(caseA);

			if ((ANY || NONE) && caseA.constructor.reconcilable) {
				const values = [caseA.value];
				let caseB;

				while ((caseB = cases[i + 1]) && caseA.constructor === caseB.constructor) {
					i++;
					values.push(caseB.value);
				}

				evaluators.push(thing => caseA.evaluate(thing, values));
			} else {
				evaluators.push(caseA.evaluate.bind(caseA));
			}
		}

		if (name) {
			this.trueText = name.toLowerCase();
			this.falseText = ` ${name.toLowerCase()}`;
		}
	}

	hasType(type) {
		return super.hasType(type) || this._cases.some(v => v.hasType(type));
	}
	evaluate(thing) {
		return this.value(thing);
	}

	onObserve() {
		return this._cases.map(v => v.observe(this)).some(v => v);
	}
}

cases_Group.text = 'Group of conditions';
cases_Group.fields = [{ type: 'select', options: ['none', 'any', 'one', 'all'], id: 'op' }, ' of these are true:', { type: 'multi', include: 'all', id: 'of' }, { type: 'hidden', id: 'name' }];
cases_Group.defaultConditions = { op: 'all', of: [], name: '' };
cases_Group.slow = 1;
const falseConditions = { type: 'false' };
const trueConditions = { type: 'true' };
const inertConditions = { type: 'inert' };

function resolveGroup({ op, of, name = '' }, precompute = true, keepGroup = false) {
	const parts = [];
	const groupOpMap = {};
	let seenTrue = false;

	for (let v of of) {
		if (!cases_has(v.type)) return inertConditions;

		if (v.type === 'group') v = resolveGroup(v, precompute);

		if (v.type === 'group' && ['any', 'all', 'none'].includes(v.op)) {
			if (v.op === op) {
				parts.push(...v.of);
				continue;
			}

			const opCollection = groupOpMap[v.op];
			if (opCollection) {
				opCollection.of.push(...v.of);
				continue;
			} else {
				groupOpMap[v.op] = v;
			}
		}

		if (!precompute) {
			parts.push(v);
			continue;
		}

		if (available[v.type].prototype.evaluate.length) {
			parts.push(v);
			continue;
		}

		if (keepGroup) continue;

		if (Case_Case.fromConditions(v).evaluate()) {
			if (op === 'none') return falseConditions;
			if (op === 'any') return trueConditions;
			if (op === 'one' && seenTrue) return falseConditions;
			seenTrue = true;
		} else {
			if (op === 'all') return falseConditions;
		}
	}

	if (op === 'one' && seenTrue) op = 'none';

	if (!keepGroup && parts.length === 1 && op !== 'none' && !name) return parts[0];

	const sortedParts = lodash_sortBy_default()(parts, ({ type }) => available[type].slow);

	return { type: 'group', op, of: sortedParts, name };
}

function cases_getConditions(type, conditions) {
	return Object.assign({ type }, available[type].defaultConditions, conditions);
}

function getGroup(op, of, name = '') {
	return cases_getConditions('group', { op, of, name });
}

function createAdHoc(type, getConditions, variant, context) {
	class AdHoc extends Case_Case {
		static get defaultConditions() {
			return getConditions();
		}
	}

	AdHoc.text = type;
	AdHoc.unique = true;
	AdHoc.variant = variant;
	cases_add(type, AdHoc, context);

	return AdHoc;
}

const available = {};

function cases_add(type, c, ...contexts) {
	if (available.hasOwnProperty(type) && c !== available[type]) {
		console.error(`A case named ${type} already exists. Existing:`, available[type].defaultConditions, 'Ignoring:', c.defaultConditions);
		return;
	}

	c.type = type;
	if (!c.contexts) c.contexts = [];
	c.contexts.push(...contexts);
	available[type] = c;
}

const primitives = new Set();

function populatePrimitives(types = ['post', 'comment', 'browse']) {
	function fill(cases, ...contexts) {
		for (const [k, v] of Object.entries(cases)) {
			cases_add(k, v, ...contexts);
			primitives.add(v);
		}
	}

	fill({
		inert: cases_Inert,
		false: cases_False,
		true: cases_True
	});

	fill({ group: cases_Group }, 'post', 'comment', 'browse');

	if (types.includes('post')) fill(postCases_namespaceObject, 'post');
	if (types.includes('comment')) fill(commentCases_namespaceObject, 'comment');
	if (types.includes('browse')) fill(browseCases_namespaceObject, 'browse');
}

function filterThings(things, conditions) {
	if (!conditions) return things;
	const cased = Case_Case.fromConditions(conditions);
	return asyncFilter(things, thing => cased.evaluate(thing));
}

const cases_remove = type => {
	delete available[type];
};
const cases_has = type => available.hasOwnProperty(type);
const cases_get = type => cases_has(type) ? available[type] : cases_Inert;
const getByContext = (context, primitivesOnly = true) => pickBy_default()(available, v => v.contexts.includes(context) && (!primitivesOnly || primitives.has(v)));
const isUseful = type => typeof type === 'string' && cases_has(type) && ![cases_Inert.type, cases_False.type, cases_True.type].includes(type);
// CONCATENATED MODULE: ./lib/modules/submitIssue.js











const submitIssue_module = new Module('submitIssue');

submitIssue_module.moduleName = 'submitIssueName';
submitIssue_module.category = 'aboutCategory';
submitIssue_module.alwaysEnabled = true;
submitIssue_module.sort = -7;
submitIssue_module.description = 'submitIssueDesc';
submitIssue_module.include = ['submit'];

const submitIssue_subreddits = ['enhancement', 'resissues'];
const subredditsForDiagnostics = ['beta', 'help', 'resbetatesting'];

submitIssue_module.go = () => {
	checkIfSubmitting();
};

const submitWizardTemplate = ({ foolin, settings, bugs, requests }) => string_namespaceObject.html`
	<div>
		${foolin && string_namespaceObject._html`
			<h2>Enjoy April Fool's</h2>
			<p>RES can't turn off any of Reddit's shenanigans. However, <a href="/r/Enhancement/wiki/faq/srstyle" target="_blank" rel="noopener noreferer">you can turn off subreddit styles</a>.</p>
		`}

		<h2>Something is broken in RES. How do I fix it?</h2>

		<p>Take a minute to read through other posts. Someone might have already posted a solution.</p>

		<ol id="RESKnownBugs">
			${bugs.map(({ url, title }) => string_namespaceObject._html`
				<li>
					<a target="_blank" rel="noopener noreferer" href="${url}">${title}</a>
				</li>
			`)}
		</ol>

		<p><a href="/r/RESissues/submit/" class="blueButton">Ask how to fix RES</a></p>

		<p>Please write some text about:</p>
		<dl>

			<dt>What makes this happen?</dt>
			<dd>
				clicking a button, opening an image preview, ...
			</dd>


			<dt>Where does this happen?</dt>
			<dd>
				in a particular subreddit, on comments pages, on frontpage (reddit.com), on /r/all, ...
			</dd>

			<dt>Screenshot/video of problem</dt>
			<dd>
				<a href="https://www.take-a-screenshot.org/" target="_blank" rel="noreferer noopener">Take a screenshot</a>, <a href="https://imgur.com/upload">upload it</a>, and copy-paste the link here.
			</dd>
		</dl>


		<h2>How do I customize or use RES features?</h2>
		<p>If you want to disable certain features of RES, try searching in <a href="${settings}">RES settings</a>, your account's <a href="/prefs">reddit preferences</a>, or <a href="/r/Enhancement/search?q=restrict_sr=on">posts in r/Enhancement</a>.</p>

		<p><a href="/r/Enhancement/submit/" class="blueButton">Get guidance on using RES</a></p>


		<h2>I have a suggestion.</h2>

		<p>Look for similar ideas before posting:</p>
		<ol id="RESKnownFeatureRequests">
			${requests.map(({ url, title }) => string_namespaceObject._html`
				<li>
					<a target="_blank" rel="noopener noreferer" href="${url}">${title}</a>
				</li>
			`)}
		</ol>
		<p><a href="/r/Enhancement/submit/" class="blueButton">Post a request</a></p>


		<h2>I found a security issue.</h2>
		<p>Please report security issues privately using modmail.</p>
		<p><a href="/message/compose/?to=/r/Enhancement" class="blueButton">Report a security issue</a></p>
	</div>
`;

const submitIssueDefaultBody = `
*What's up?*
???


*Where does it happen?*
???


*Screenshots or mock-ups*
???


*What browser extensions are installed?*
???
`.trim();

const diagnostics = once_default()(() => `

- Night mode: ${String(isNightModeOn())}
- RES Version: ${metadata_version}
- Browser: ${browserDetect_namespaceObject.browser}
- Browser Version: ${browserDetect_namespaceObject.version}
- Cookies Enabled: ${String(navigator.cookieEnabled)}
- Reddit beta: ${String($('.beta-hint').length > 0)}

`);

function checkIfSubmitting() {
	const subredditInput = document.getElementById('sr-autocomplete');
	const selfText = document.querySelector('.usertext-edit textarea');

	if (subredditInput) {
		function check() {
			const subreddit = subredditInput.value;

			if (submitIssue_subreddits.includes(subreddit.toLowerCase())) {
				showWizard();
				injectTemplate(selfText);
			} else {
				hideWizard();
			}
		}

		check();

		subredditInput.addEventListener('change', e => {
			if (e.res) return;
			check();
		});

		$('#suggested-reddits .sr-suggestion').on('click', () => setTimeout(check, 500));
	}

	if (selfText && subredditInput) {
		$(selfText).add(subredditInput).on('blur', () => {
			const subreddit = subredditInput.value;
			if ([...submitIssue_subreddits, ...subredditsForDiagnostics].includes(subreddit.toLowerCase())) {
				const diagnosticsStripped = diagnostics().replace(/\s/g, '');
				const selfTextStripped = selfText.value.replace(/\s/g, '');
				if (!selfTextStripped.includes(diagnosticsStripped)) {
					selfText.value += diagnostics();
					$(selfText).trigger('input');
				}
			} else {
				selfText.value = selfText.value.replace(diagnostics(), '');
				$(selfText).trigger('input');
			}
		});
	}
}

function updateSubreddit(subreddit) {
	const input = document.querySelector('#sr-autocomplete');
	input.value = subreddit;
	const e = new Event('change');
	e.res = true;
	input.dispatchEvent(e);
}

function injectTemplate(selfText) {
	if (selfText && !selfText.value) {
		selfText.value = submitIssueDefaultBody;
	}
}

async function wizard() {
	const [bugs, requests] = await Promise.all([fetchLinks('/r/Enhancement/wiki/knownbugs.json'), fetchLinks('/r/Enhancement/wiki/knownrequests.json')]);

	return submitWizardTemplate({
		foolin: submitIssue_foolin(),
		bugs,
		requests,
		settings: makeUrlHash()
	});
}

const guiderId = 'RESSubmitWizard';
async function showWizard() {
	const guider = jqueryPlugins_guiders.get(guiderId);
	if (guider) {
		jqueryPlugins_guiders.show(guider.id);
		return;
	}

	const description = await wizard();

	const buttonCustomHTML = `
		<footer>
			<small>
				<a href="/r/RESissues/wiki/knownissues">known issues</a>
				|  <a href="/r/RESissues/wiki/postanissue">troubleshooting</a>
			</small>
		</footer>
	`;

	jqueryPlugins_guiders.createGuider({
		attachTo: '.submit .usertext',
		description,
		buttonCustomHTML,
		id: guiderId,

		position: 3,
		title: 'What are you posting about?'
	}).show();

	$(document.body).on('click', '#RESSubmitWizard a[href$="/submit/"]', e => {
		const match = e.target.pathname.match(regexes.submit);
		if (!match) return;
		updateSubreddit(match[1]);
		e.preventDefault();
	});
}

function hideWizard() {
	if (jqueryPlugins_guiders.get(guiderId)) {
		jqueryPlugins_guiders.hideAll();
	}
}

async function fetchLinks(url) {
	try {
		const { data } = await ajax({ url, type: 'json' });
		return parseObjectList(data && data.content_md);
	} catch (e) {
		return [];
	}
}

function parseObjectList(text) {
	if (!text) {
		return [];
	}

	const items = text.split(/\s*-{3,}\s*/).filter(x => x.match(/[^\s\n]/));

	return items.map(dictText => {
		const item = {};
		const dictMapping = dictText.replace(/\r/g, '').split('\n');

		for (const rawLine of dictMapping) {
			const line = $.trim(rawLine).split(':');
			if (line.length > 0) {
				const key = line.shift();
				if (key) {
					item[key] = line.join(':');
				}
			}
		}

		return item;
	});
}

function submitIssue_foolin() {
	const now = new Date();
	return now.getMonth() === 2 && now.getDate() > 30 || now.getMonth() === 3 && now.getDate() <= 2;
}
// CONCATENATED MODULE: ./lib/modules/commentTools.js
















const commentTools_module = new Module('commentTools');

commentTools_module.moduleName = 'commentToolsName';
commentTools_module.category = 'commentsCategory';
commentTools_module.description = 'commentToolsDesc';
commentTools_module.options = {
	userAutocomplete: {
		type: 'boolean',
		value: true,
		description: 'commentToolsUserAutoCompleteDesc',
		title: 'commentToolsUserAutoCompleteTitle',
		keywords: ['autosuggest'],
		advanced: true
	},
	subredditAutocomplete: {
		type: 'boolean',
		value: true,
		description: 'commentToolsSubredditAutocompleteDesc',
		title: 'commentToolsSubredditAutocompleteTitle',
		keywords: ['autosuggest'],
		advanced: true
	},
	wikiAutocomplete: {
		type: 'boolean',
		value: true,
		description: 'commentToolsWikiAutocompleteDesc',
		title: 'commentToolsWikiAutocompleteTitle',
		advanced: true
	},
	formattingToolButtons: {
		type: 'boolean',
		value: true,
		description: 'commentToolsFormattingToolButtonsDesc',
		title: 'commentToolsFormattingToolButtonsTitle'
	},
	keyboardShortcuts: {
		dependsOn: options => options.formattingToolButtons.value,
		type: 'boolean',
		value: true,
		description: 'commentToolsKeyboardShortcutsDesc',
		title: 'commentToolsKeyboardShortcutsTitle'
	},
	boldKey: {
		dependsOn: options => options.keyboardShortcuts.value,
		type: 'keycode',
		value: [66, false, true, false, false],
		description: 'commentToolsBoldKeyDesc',
		title: 'commentToolsBoldKeyTitle'
	},
	italicKey: {
		dependsOn: options => options.keyboardShortcuts.value,
		type: 'keycode',
		value: [73, false, true, false, false],
		description: 'commentToolsItalicKeyDesc',
		title: 'commentToolsItalicKeyTitle'
	},
	strikeKey: {
		dependsOn: options => options.keyboardShortcuts.value,
		type: 'keycode',
		value: [83, false, true, false, false],
		description: 'commentToolsStrikeKeyDesc',
		title: 'commentToolsStrikeKeyTitle'
	},
	superKey: {
		dependsOn: options => options.keyboardShortcuts.value,
		type: 'keycode',
		value: [187, false, true, true, false],
		description: 'commentToolsSuperKeyDesc',
		title: 'commentToolsSuperKeyTitle'
	},
	linkKey: {
		dependsOn: options => options.keyboardShortcuts.value,
		type: 'keycode',
		value: [75, false, true, false, false],
		description: 'commentToolsLinkKeyDesc',
		title: 'commentToolsLinkKeyTitle'
	},
	quoteKey: {
		dependsOn: options => options.keyboardShortcuts.value,
		type: 'keycode',
		value: [190, false, true, true, false],
		description: 'commentToolsQuoteKeyDesc',
		title: 'commentToolsQuoteKeyTitle'
	},
	ctrlEnterSubmitsComments: {
		type: 'boolean',
		value: true,
		description: 'commentToolsCtrlEnterSubmitsCommentsDesc',
		title: 'commentToolsCtrlEnterSubmitsCommentsTitle'
	},
	ctrlEnterSavesLiveThreads: {
		type: 'boolean',
		value: true,
		description: 'commentToolsCtrlEnterSavesLiveThreadsDesc',
		title: 'commentToolsCtrlEnterSavesLiveThreadsTitle'
	},
	ctrlEnterSubmitsPosts: {
		type: 'boolean',
		value: true,
		description: 'commentToolsCtrolEnterSubmitsPostsDesc',
		title: 'commentToolsCtrolEnterSubmitsPostsTitle'
	},
	commentingAs: {
		type: 'boolean',
		value: true,
		description: 'commentToolsCommentingAsDesc',
		title: 'commentToolsCommentingAsTitle'
	},
	highlightIfAltAccount: {
		dependsOn: options => options.commentingAs.value,
		type: 'boolean',
		value: true,
		description: 'commentToolsHighlightIfAltAccountDesc',
		title: 'commentToolsHighlightIfAltAccountTitle'
	},
	showInputLength: {
		type: 'boolean',
		value: true,
		description: 'commentToolsShowInputLengthDesc',
		title: 'commentToolsShowInputLengthTitle',
		advanced: true,
		bodyClass: true
	},
	macroButtons: {
		type: 'boolean',
		value: true,
		description: 'commentToolsMacroButtonsDesc',
		title: 'commentToolsMacroButtonsTitle',
		bodyClass: true
	},
	macros: {
		dependsOn: options => options.macroButtons.value,
		type: 'table',
		addRowText: 'commentToolsAddShortcut',
		fields: [{
			key: 'label',
			name: 'commentToolsLabel',
			type: 'text'
		}, {
			key: 'text',
			name: 'commentToolsText',
			type: 'textarea'
		}, {
			key: 'category',
			name: 'commentToolsCategory',
			type: 'text'
		}, {
			key: 'key',
			name: 'commentToolsKey',
			type: 'keycode'
		}],
		value: [['reddiquette', '[reddiquette](/wiki/reddiquette) ', undefined, undefined], ['Promote RES', '[Reddit Enhancement Suite](https://redditenhancementsuite.com "also /r/Enhancement") ', undefined, undefined], ['Current timestamp', '{{now}} ', undefined, undefined]],
		description: 'commentToolsMacrosDesc',
		title: 'commentToolsMacrosTitle'
	},
	keepMacroListOpen: {
		dependsOn: options => options.macroButtons.value,
		type: 'boolean',
		value: false,
		description: 'commentToolsKeepMacroListOpenDesc',
		title: 'commentToolsKeepMacroListOpenTitle',
		advanced: true
	},
	macroPlaceholders: {
		dependsOn: options => options.macroButtons.value,
		type: 'boolean',
		value: true,
		description: 'commentToolsMacroPlaceholdersDesc',
		title: 'commentToolsMacroPlaceholdersTitle'
	},
	enabledOnBanMessages: {
		type: 'boolean',
		value: true,
		description: 'commentToolsEnableOnBanMessagesDesc',
		title: 'commentToolsEnableOnBanMessagesTitle',
		advanced: true
	}
};

commentTools_module.include = ['comments', 'inbox', 'submit', 'profile', 'modqueue', 'subredditAbout', 'liveThread', /^\/r\/[\-\w\.]+\/wiki\/(?:create|edit)(\/\w+)?/i];

const SUBMIT_LIMITS = {
	STYLESHEET: 128 * 1024,
	SIDEBAR: 10240,
	DESCRIPTION: 500,
	WIKI: 512 * 1024,
	COMMENT: 10000,
	LIVE_COMMENT: 4096,
	POST: 40000,
	POST_TITLE: 300,
	BAN_MESSAGE: 1000
};
const macroCallbackTable = [];
const macroKeyTable = [];

commentTools_module.go = () => {
	$(document.body).on('focus', commentTextareaSelector, attachEditorToUsertext);

	initializeCtrlEnterToSubmit();
	initializeLengthCounters();
	initializeAutocomplete();
};

function initializeCtrlEnterToSubmit() {
	if (commentTools_module.options.ctrlEnterSubmitsComments.value) {
		onCtrlEnter('.usertext-edit textarea, #BigEditor textarea, #wiki_page_content', e => {
			const currentForm = $(e.target).closest('form');
			const saveButton = currentForm.find('.save')[0] || currentForm.find('#wiki_save_button')[0] || $('.BEFoot button')[0];
			if (saveButton) click(saveButton);
		});
	}

	if (commentTools_module.options.ctrlEnterSavesLiveThreads.value) {
		onCtrlEnter('.usertext-edit textarea', () => {
			const saveButton = $('#new-update-form .save-button button')[0];
			if (saveButton) click(saveButton);
		});
	}

	if (commentTools_module.options.ctrlEnterSubmitsPosts.value) {
		onCtrlEnter('#title-field textarea, #text-field textarea, #url, #sr-autocomplete, input.captcha', () => {
			const $captcha = $('input.captcha:not(.cap-text)');
			if ($captcha.length && $captcha.val() === '') {
				$captcha.focus();
			} else {
				click($('.spacer .btn')[0]);
			}
		});
	}
}

function initializeLengthCounters() {
	if (commentTools_module.options.showInputLength.value) {
		$(document.body).on('input', '.usertext-edit textarea, #title-field textarea, #BigEditor textarea, #wiki_page_content, #ban_message', function () {
			updateCounter(this);
		});

		$('.submit-page #title-field span.title').prepend('<span class="RESCharCounter" title="character limit: 0/300">0/300</span>');
	}
}

function initializeAutocomplete() {
	if (commentTools_module.options.subredditAutocomplete.value || commentTools_module.options.userAutocomplete.value || commentTools_module.options.wikiAutocomplete.value) {
		addAutoCompletePop();
	}
}

const initializeEditorTools = once_default()(() => {
	$(document.body).on('click', 'div.markdownEditor-wrapper a:not(.userTagLink)', function (e) {
		e.preventDefault();

		const index = parseInt($(this).attr('data-macro-index'), 10);
		const box = findTextareaForElement(this);
		if (!box) {
			console.error('Failed to locate textarea.');
			return;
		}
		const handler = macroCallbackTable[index];
		if (!handler) {
			throw new Error(`No macro callback at index: ${index}.`);
		}
		handler(box);

		box.focus();

		box.dispatchEvent(new Event('input', { bubbles: true, cancelable: true }));
	}).on('click', '.RESMacroDropdownTitle', function (e) {
		const thisCat = e.target;
		if (thisCat.classList.contains('openMacro')) {
			thisCat.classList.remove('openMacro');
		} else {
			$('.RESMacroWrappingSpan span').removeClass('openMacro');
			thisCat.classList.add('openMacro');
		}

		$(this).next().css({
			top: `${thisCat.offsetTop + thisCat.offsetHeight}px`,
			left: `${thisCat.offsetLeft + thisCat.offsetWidth - thisCat.nextSibling.offsetWidth}px`
		});
	});

	if (commentTools_module.options.keyboardShortcuts.value) {
		$(document.body).on('keydown', '.usertext-edit textarea, #BigEditor textarea, #wiki_page_content, #ban_message', function (e) {
			if (e.key === NAMED_KEYS.Escape) {
				if (!$autoCompletePop.is(':visible')) {
					$(this).blur();
					e.preventDefault();
				}

				return;
			}

			for (const [testedKeyArray, macroIndex] of macroKeyTable) {
				if (checkKeysForEvent(e, testedKeyArray)) {
					const handler = macroCallbackTable[macroIndex];
					handler(this);

					this.dispatchEvent(new Event('input', { bubbles: true, cancelable: true }));

					e.preventDefault();
					return;
				}
			}
		});
	}
});

const commentTextareaSelector = ['textarea[name=text]', 'textarea[name=description]', 'textarea[name=public_description]', 'textarea[name=body]', 'textarea[name=ban_message]', 'textarea[name=content]', 'textarea[name=title]'].join(':not([readonly]),');

function getFieldLimit(elem) {
	switch (elem.name) {
		case 'title':
			return SUBMIT_LIMITS.POST_TITLE;
		case 'text':
			if (isPageType('submit') || $(elem).closest('.thing').hasClass('self')) {
				return SUBMIT_LIMITS.POST;
			}
			return SUBMIT_LIMITS.COMMENT;
		case 'description':
			return SUBMIT_LIMITS.SIDEBAR;
		case 'body':
			return SUBMIT_LIMITS.LIVE_COMMENT;
		case 'public_description':
			return SUBMIT_LIMITS.DESCRIPTION;
		case 'content':
			return SUBMIT_LIMITS.WIKI;
		case 'ban_message':
			return SUBMIT_LIMITS.BAN_MESSAGE;

		default:
			return 1337;}
}

function attachEditorToUsertext() {
	if (this.hasAttribute('commentTools-initialized')) return;
	this.setAttribute('commentTools-initialized', true);

	if (this.hasAttribute('data-max-length')) {
		return;
	}
	const limit = getFieldLimit(this);

	this.setAttribute('data-limit', limit);

	if (this.name === 'title') {
		return;
	}

	if (this.id === 'ban_message' && !commentTools_module.options.enabledOnBanMessages.value) {
		return;
	}

	if (this.id === 'ban_message') {
		this.style.width = '500px';
		this.style.height = '100px';
	}

	const bar = makeEditBar();
	if (this.id === 'wiki_page_content' || this.id === 'ban_message') {
		$(this).parent().prepend(bar);
	} else {
		$(this).parent().before(bar);
	}
	updateCounter(this);
}

function updateCounter(textarea) {
	const length = $(textarea).val().length;
	const limit = textarea.getAttribute('data-limit');
	const counter = $(textarea).parent().parent().find('.RESCharCounter');
	counter.attr('title', `character limit: ${length}/${limit}`);
	counter.text(`${length}/${limit}`);
	if (length > limit) {
		counter.addClass('tooLong');
	} else {
		counter.removeClass('tooLong');
	}
}

let cachedEditBar;

function makeEditBar() {
	initializeEditorTools();

	if (cachedEditBar) {
		return $(cachedEditBar).clone();
	}

	const $editBar = $('<div class="markdownEditor">');

	const wrappedEditBar = $('<div class="markdownEditor-wrapper">').append($editBar);

	if (commentTools_module.options.commentingAs.value) {
		const commentingAsMessage = location.href.match(/^https?:\/\/(?:[\-\w\.]+\.)?reddit\.com\/r\/[\-\w\.]+\/about\/banned\/?/i) ? 'Moderating as' : 'Speaking as';

		const commentingAs = $('<div class="commentingAs">').html(`${commentingAsMessage}: `).append($('#header-bottom-right .user a:first').clone().wrap('<span class="commentingAsUser"></span>').parent());
		if (modules_isRunning(userTagger_namespaceObject)) {
			applyToUser(commentingAs.find('a')[0], { renderVoteWeight: false });
		}
		const loggedIn = loggedInUser();
		if (commentTools_module.options.highlightIfAltAccount.value && accountSwitcher_module.options.accounts.value.length && loggedIn && loggedIn.toLowerCase() !== accountSwitcher_module.options.accounts.value[0][0].toLowerCase()) {
			commentingAs.addClass('highlightedAltAccount');
		}
		wrappedEditBar.append(commentingAs);
	}

	if (commentTools_module.options.formattingToolButtons.value) {
		const shortcuts = commentTools_module.options.keyboardShortcuts.value;
		$editBar.append(makeEditButton('<b>Bold</b>', `bold${shortcuts ? ` (${keycode_niceKeyCode(commentTools_module.options.boldKey.value)})` : ''}`, commentTools_module.options.boldKey.value, 'btn-bold', box => {
			wrapSelection(box, '**', '**');
		}));
		$editBar.append(makeEditButton('<i>Italic</i>', `italic${shortcuts ? ` (${keycode_niceKeyCode(commentTools_module.options.italicKey.value)})` : ''}`, commentTools_module.options.italicKey.value, 'btn-italic', box => {
			wrapSelection(box, '*', '*');
		}));
		$editBar.append(makeEditButton('<del>strike</del>', `strike${shortcuts ? ` (${keycode_niceKeyCode(commentTools_module.options.strikeKey.value)})` : ''}`, commentTools_module.options.strikeKey.value, 'btn-strike', box => {
			wrapSelection(box, '~~', '~~');
		}));
		$editBar.append(makeEditButton('<sup>sup</sup>', `super${shortcuts ? ` (${keycode_niceKeyCode(commentTools_module.options.superKey.value)})` : ''}`, commentTools_module.options.superKey.value, 'btn-superscript', box => {
			wrapSelectedWords(box, '^');
		}));
		$editBar.append(makeEditButton('Link', `link${shortcuts ? ` (${keycode_niceKeyCode(commentTools_module.options.linkKey.value)})` : ''}`, commentTools_module.options.linkKey.value, 'btn-link', box => {
			linkSelection(box);
		}));
		$editBar.append(makeEditButton('>Quote', `quote${shortcuts ? ` (${keycode_niceKeyCode(commentTools_module.options.quoteKey.value)})` : ''}`, commentTools_module.options.quoteKey.value, 'btn-quote', box => {
			wrapSelectedLines(box, '> ', '');
		}));
		$editBar.append(makeEditButton('<span style="font-family: monospace">Code</span>', 'code', null, 'btn-code', box => {
			wrapSelectedLines(box, '    ', '');
		}));
		$editBar.append(makeEditButton('&bull;Bullets', 'bullet list', null, 'btn-list-unordered', box => {
			wrapSelectedLines(box, '* ', '');
		}));
		$editBar.append(makeEditButton('1.Numbers', 'number list', null, 'btn-list-ordered', box => {
			wrapSelectedLines(box, '1. ', '');
		}));
		$editBar.append(makeEditButton('<span style="border: 1px black solid;">Table</span>', 'table', null, 'btn-table', box => {
			const selectedText = box.value.substring(box.selectionStart, box.selectionEnd).replace(/^[\s]+/, '').replace(/[\s]+$/, '').split('\n');
			let isTable;
			if (selectedText.length >= 2) {
				if (selectedText[0].includes('|')) {
					selectedText[0] = selectedText[0].replace(/^\|/, '').replace(/\|\s+$/, '');
					const numSeparator = selectedText[0].split('|').length;

					isTable = true;

					selectedText[1] = selectedText[1].replace(/\|[^|\-]+$/, '');
					selectedText[1] = selectedText[1].replace(/-/g, '--');
					if (!selectedText[1].includes('-|') && !selectedText[1].includes('|-')) {
						isTable = false;
					}
					selectedText[1] = selectedText[1].replace(/^\]+/, '').replace(/[\s|]+$/, '');
					if (selectedText[1].split('-|-').length < numSeparator) {
						isTable = false;
					}
					if (/[^|\-]/.test(selectedText[1])) {
						isTable = false;
					}

					if (isTable) {
						for (const i of range(2, selectedText.length)) {
							if (!selectedText[i].includes('|')) {
								isTable = false;
								break;
							}
							selectedText[i] = selectedText[i].replace(/^\|/, '').replace(/[\s|]+$/, '');
							if (selectedText[i].split('|').length !== numSeparator) {
								isTable = false;
								break;
							}
						}
					}
				}
			}
			let startTable;
			if (isTable) {
				startTable = selectedText.reduce((prevTable, currText, i) => {
					if (i === 1) {
						return prevTable;
					}

					return `${prevTable}<tr><td>${escapeHTML(currText).replace(/\|/g, '</td><td>')}</td></tr>`;
				}, '');
			} else {
				startTable = '<tr><td>Foo</td><td>Bar</td></tr><tr><td>Foo</td><td>Bar</td></tr>';
			}
			alert_namespaceObject.open(`<div class="buttonContainer"></div><table class="commentPreview" contenteditable="true">${startTable}</table>`, { cancelable: true }).then(() => {
				let generatedTable = '\n\n';
				let generatedTableSeparation = '';
				$('#alert_message tr:first td').each(function () {
					const text = $(this).text().replace(/[\n|]/g, '');
					generatedTable += `${text} | `;
					generatedTableSeparation += '-'.repeat(text.length);
					generatedTableSeparation += '|';
				});
				generatedTableSeparation = generatedTableSeparation.substr(0, generatedTableSeparation.length - 1);
				generatedTable = `${generatedTable.substr(0, generatedTable.length - 3)}\n${generatedTableSeparation}\n`;
				$('#alert_message tr:gt(0)').each(function () {
					$(this).find('td').each(function () {
						generatedTable += `${$(this).text().replace(/[\n|]/g, '')} | `;
					});
					generatedTable = `${generatedTable.substr(0, generatedTable.length - 3)}\n`;
				});
				if (isTable) {
					replaceSelection(box, generatedTable);
				} else {
					wrapSelection(box, generatedTable, '');
				}
				$(box).trigger('input');
			});

			const addRow = alert_namespaceObject.makeButton('+ Row');
			const remRow = alert_namespaceObject.makeButton('- Row');
			const addCol = alert_namespaceObject.makeButton('+ Col');
			const remCol = alert_namespaceObject.makeButton('- Col');
			addRow.addEventListener('click', () => {
				const nbCol = $('#alert_message tr:first td').length;
				const newRow = '<td>text</td>'.repeat(nbCol);
				$('#alert_message table').append(`<tr>${newRow}</tr>`);
			});
			remRow.addEventListener('click', () => {
				if ($('#alert_message tr').length > 1) {
					$('#alert_message table tr:last').remove();
				}
			});
			addCol.addEventListener('click', () => {
				$('#alert_message table tr').append('<td>text</td>');
			});
			remCol.addEventListener('click', () => {
				if ($('#alert_message tr:first td').length > 1) {
					$('#alert_message table tr td:last-of-type').remove();
				}
			});

			const $buttonContainer = $('#alert_message .buttonContainer');
			$buttonContainer.append(addRow);
			$buttonContainer.append(remRow);
			$buttonContainer.append(addCol);
			$buttonContainer.append(remCol);
		}));
	}

	if (commentTools_module.options.showInputLength.value) {
		const $counter = $('<span class="RESCharCounter" title="character limit: 0/?????">0/?????</span>');
		$editBar.prepend($counter);
	}

	if (commentTools_module.options.macroButtons.value) {
		buildMacroDropdowns(wrappedEditBar);

		const addMacroButton = makeEditButton(i18n(commentTools_module.options.macros.addRowText), null, null, 'btn-macro btn-macro-add', () => {
			loadSettingsPage(commentTools_module.moduleID, 'macros');
			$('.RESMacroWrappingSpan span').removeClass('openMacro');
		});
		addButtonToMacroGroup('', addMacroButton);
	}

	cachedEditBar = wrappedEditBar;
	return cachedEditBar;
}

const macroDropDownTable = new Map();

function getMacroGroup(groupName) {
	groupName = (groupName || '').toString().trim() || 'macros';
	let macroGroup = macroDropDownTable.get(groupName);
	if (macroGroup === undefined) {
		macroGroup = {};
		macroGroup.titleButton = $(`<span class="RESMacroDropdownTitle">${groupName}</span>`);
		macroGroup.container = $('<span class="RESMacroDropdown"></span>');
		macroGroup.dropdown = $('<ul class="RESMacroDropdownList"></ul>');
		macroGroup.container.append(macroGroup.dropdown);
		macroDropDownTable.set(groupName, macroGroup);
	}
	return macroGroup;
}

function addButtonToMacroGroup(groupName, button) {
	const group = getMacroGroup(groupName);
	group.dropdown.append($('<li>').append(button));
}

function getDebugMacros() {
	if (!isCurrentSubreddit('Enhancement', 'RESissues')) return [];
	return [['RES modified settings', '\n\n{{resmodifiedsettings}}\n', null, null], ['RES diagnostics', '{{resdiagnostics}}', null, null]];
}

function buildMacroDropdowns(editBar) {
	const macros = [...commentTools_module.options.macros.value, ...getDebugMacros()];

	for (const [title, text, category, key] of macros) {
		const button = makeEditButton(title, null, key, 'btn-macro', box => {
			macroSelection(box, text);
		});
		addButtonToMacroGroup(category, button);
	}

	const $macroWrapper = $('<span class="RESMacroWrappingSpan">');

	const defaultGroup = getMacroGroup('');
	$macroWrapper.append(defaultGroup.titleButton);
	$macroWrapper.append(defaultGroup.container);

	for (const [category, macroGroup] of macroDropDownTable) {
		if (category === 'macros') {
			continue;
		}
		$macroWrapper.append(macroGroup.titleButton);
		$macroWrapper.append(macroGroup.container);
	}
	editBar.append($macroWrapper);
}

function makeEditButton(label, title, key, cls, handler) {
	if (label === null) {
		label = 'unlabeled';
	}
	if (title === null) {
		title = '';
	}
	const macroButtonIndex = macroCallbackTable.length;
	const button = $('<a>').safeHtml(label).attr({
		class: `edit-btn ${cls}`,
		title,
		href: '#',
		tabindex: 1,
		'data-macro-index': macroButtonIndex
	});

	if (key && key[0] !== null) {
		macroKeyTable.push([key, macroButtonIndex]);
	}
	macroCallbackTable[macroButtonIndex] = handler;
	return button;
}

function linkSelection(box) {
	let url = prompt('Enter the URL:', '');
	if (url) {
		url = url.replace(/[\(\)]/g, '\\$&');

		wrapSelection(box, '[', `](${url})`, text => text.replace(/[\[\]\(\)]/g, '\\$&'));
	}
}

function macroSelection(box, macroText) {
	if (!commentTools_module.options.keepMacroListOpen.value) {
		$('.RESMacroWrappingSpan span').removeClass('openMacro');
	}
	if (commentTools_module.options.macroPlaceholders.value) {
		const formatText = selectedText => fillPlaceholders(box, macroText, selectedText);
		wrapSelection(box, '', '', formatText);
	} else {
		wrapSelection(box, macroText, '');
	}
}

function fillPlaceholders(box, macroText, selectedText) {
	const placeholders = macroText.match(/\{\{\w+\}\}/g);
	if (placeholders) {
		const completedPlaceholders = new Set();
		for (const placeholder of placeholders) {
			if (completedPlaceholders.has(placeholder)) {
				continue;
			}
			completedPlaceholders.add(placeholder);

			const placeholderInnerText = placeholder.substring(2, placeholder.length - 2).toLowerCase();
			let value;
			try {
				value = getMagicPlaceholderValue(placeholderInnerText, macroText, selectedText, box);
			} catch (e) {
				console.error('Error getting magic placeholder value', placeholderInnerText);
				console.error(e);
			}
			if (value === undefined) {
				value = promptForPlaceholderValue(placeholder, macroText);
			}

			if (value === null) {
				break;
			}

			macroText = macroText.replace(new RegExp(placeholder, 'g'), value);
		}
	}

	return macroText;
}

function getMagicPlaceholderValue(placeholder, macroText, selectedText, box) {
	const handler = magicPlaceholders.find(current => current.matches.includes(placeholder));

	if (handler) {
		return handler.handle(macroText, selectedText, box);
	}
}

const magicPlaceholders = [{
	matches: ['subreddit'],
	handle(macroText, selectedText, box) {
		const thing = Thing_Thing.from(box);
		const subreddit = thing && thing.getSubreddit();

		if (subreddit) {
			return `/r/${subreddit}`;
		}
	}
}, {
	matches: ['me', 'my_username'],
	handle() {
		const username = loggedInUser();
		if (username) {
			return `/u/${username}`;
		}
	}
}, {
	matches: ['op', 'op_username'],
	handle(macroText, selectedText, box) {
		let profile;
		if (isPageType('comments')) {
			profile = document.querySelector('.sitetable .author');
		} else {
			let $next = $(box);
			let furthest = $next;
			do {
				if ($next && $next.length) furthest = $next;
				$next = $next.parent().closest('.sitetable');
			} while ($next.length);

			profile = furthest.find('.author')[0];
		}

		if (profile) {
			const match = profile.pathname.match(regexes.profile);
			if (!match) throw new Error(`Invalid profile link: ${profile.href}`);
			return `/u/${match[1]}`;
		}
	}
}, {
	matches: ['url'],
	handle() {
		return location.href;
	}
}, {
	matches: ['reply_to', 'reply_to_username'],
	handle(macroText, selectedText, box) {
		let $base = $(box);
		const isEditing = $base.closest('.thing, .entry').hasClass('entry');

		if (isEditing) {
			$base = $base.closest('.thing').parent();
		}

		const profile = $base.closest('.thing').find('.entry .author')[0];

		if (!profile) {
			return getMagicPlaceholderValue('op', macroText, selectedText, box);
		} else {
			const match = profile.pathname.match(regexes.profile);
			if (!match) throw new Error(`Invalid profile link: ${String(profile)}`);
			return `/u/${match[1]}`;
		}
	}
}, {
	matches: ['selected', 'selection'],
	handle(macroText, selectedText) {
		return selectedText;
	}
}, {
	matches: ['now'],
	handle() {
		const date = new Date();
		return date.toTimeString();
	}
}, {
	matches: ['today'],
	handle() {
		const date = new Date();
		return date.toDateString();
	}
}, {
	matches: ['linkflair'],
	handle() {
		if (isPageType('comments')) {
			return document.querySelector('.linkflairlabel').textContent;
		}
	}
}, {
	matches: ['escaped'],
	handle(macroText, selectedText) {
		return selectedText.replace(/[\[\]()\\\*\^~\-_.]/g, '\\$&').replace(/^([ ]{0,3})>/gm, '$1\\>');
	}
}, {
	matches: ['resmodifiedsettings'],
	handle() {
		return getModifiedText();
	}
}, {
	matches: ['resdiagnostics'],
	handle() {
		return diagnostics();
	}
}];

function promptForPlaceholderValue(placeholder, macroText) {
	const display = `${macroText}\n\n\nEnter replacement for ${placeholder}:`;
	const value = placeholder;

	return prompt(display, value);
}

function wrapSelection(box, prefix, suffix, escapeFunction) {
	if (!box) {
		return;
	}

	const scrollTop = box.scrollTop;

	const selectionStart = box.selectionStart;
	const selectionEnd = box.selectionEnd;

	const text = box.value;
	const beforeSelection = text.substring(0, selectionStart);
	let selectedText = text.substring(selectionStart, selectionEnd);
	const afterSelection = text.substring(selectionEnd);

	let trailingSpace = '';
	let cursor = selectedText.length - 1;
	while (cursor > 0 && selectedText[cursor] === ' ') {
		trailingSpace += ' ';
		cursor--;
	}
	selectedText = selectedText.substring(0, cursor + 1);

	if (typeof escapeFunction === 'function') {
		selectedText = escapeFunction(selectedText);
	}

	box.value = beforeSelection + prefix + selectedText + suffix + trailingSpace + afterSelection;

	box.selectionEnd = beforeSelection.length + prefix.length + selectedText.length;
	if (selectionStart === selectionEnd) {
		box.selectionStart = box.selectionEnd;
	} else {
		box.selectionStart = beforeSelection.length + prefix.length;
	}

	box.scrollTop = scrollTop;
}

function replaceSelection(box, replacement) {
	if (!box) {
		return;
	}

	const scrollTop = box.scrollTop;

	const selectionStart = box.selectionStart;
	const selectionEnd = box.selectionEnd;

	const text = box.value;
	const beforeSelection = text.substring(0, selectionStart);
	const afterSelection = text.substring(selectionEnd);

	box.value = beforeSelection + replacement + afterSelection;

	box.selectionEnd = beforeSelection.length + replacement.length;

	box.scrollTop = scrollTop;
}

function wrapSelectedLines(box, prefix, suffix) {
	const scrollTop = box.scrollTop;
	let selectionStart = box.selectionStart;
	let selectionEnd = box.selectionEnd;

	const text = box.value;
	let startPosition = 0;
	const lines = text.split('\n');
	for (const i of range(0, lines.length)) {
		let lineStart = startPosition;
		let lineEnd = lineStart + lines[i].length;

		if (selectionStart <= lineStart && lineStart <= selectionEnd || selectionStart <= lineEnd && lineEnd <= selectionEnd || lineStart <= selectionStart && selectionStart <= lineEnd || lineStart <= selectionEnd && selectionEnd <= lineEnd) {
			lines[i] = prefix + lines[i] + suffix;

			let startMovement = 0;
			let endMovement = 0;
			if (lineStart < selectionStart) {
				startMovement += prefix.length;
			}
			if (lineEnd < selectionStart) {
				startMovement += suffix.length;
			}
			if (lineStart < selectionEnd) {
				endMovement += prefix.length;
			}
			if (lineEnd < selectionEnd) {
				endMovement += suffix.length;
			}

			selectionStart += startMovement;
			selectionEnd += endMovement;
			lineStart += prefix.length;
			lineEnd += prefix.length + suffix.length;
		}

		startPosition = lineEnd + 1;
	}

	box.value = lines.join('\n');
	box.selectionStart = selectionStart;
	box.selectionEnd = selectionEnd;
	box.scrollTop = scrollTop;
}

function wrapSelectedWords(box, prefix) {
	const scrollTop = box.scrollTop;
	let selectionStart = box.selectionStart;
	const selectionEnd = box.selectionEnd;

	const text = box.value;
	const beforeSelection = text.substring(0, selectionStart);
	const selectedWords = text.substring(selectionStart, selectionEnd).split(' ');
	const afterSelection = text.substring(selectionEnd);

	let selectionModify = 0;

	for (const i of range(0, selectedWords.length)) {
		if (selectedWords[i] !== '') {
			if (selectedWords[i].includes('\n')) {
				const newLinePosition = selectedWords[i].lastIndexOf('\n') + 1;
				selectedWords[i] = selectedWords[i].substring(0, newLinePosition) + prefix + selectedWords[i].substring(newLinePosition);
				selectionModify += prefix.length;
			}
			if (selectedWords[i].charAt(0) !== '\n') {
				selectedWords[i] = prefix + selectedWords[i];
			}
			selectionModify += prefix.length;
		} else if (selectedWords[i] === '' && selectedWords.length === 1) {
			selectedWords[i] = prefix + selectedWords[i];
			selectionModify += prefix.length;
			selectionStart += prefix.length;
		}
	}

	box.value = beforeSelection + selectedWords.join(' ') + afterSelection;
	box.selectionStart = selectionStart;
	box.selectionEnd = selectionEnd + selectionModify;
	box.scrollTop = scrollTop;
}

let $autoCompletePop;

function addAutoCompletePop() {
	$autoCompletePop = $('<div id="autocomplete_dropdown" class="drop-choices srdrop inuse" style="display:none;">');
	$autoCompletePop.on('click mousedown', '.choice', function () {
		autoCompleteHideDropdown();
		autoCompleteInsert(this.innerText);
	});

	$('body').append($autoCompletePop);

	$('body').on({
		keypress: autoCompleteTrigger,
		keydown: autoCompleteNavigate,
		blur: autoCompleteHideDropdown
	}, '.usertext .usertext-edit textarea, #BigText, #wiki_page_content');
}

let autoCompleteLastTarget;

const autoCompleteDebounce = debounce_default()(async (type, query, subreddit) => {
	let names;

	switch (type) {
		case 'u':
			names = await getUserCompletions(query);
			break;
		case 'r':
			names = await getSubredditCompletions(query);
			break;
		case 'w':
			if (!subreddit) return;
			names = await getWikiCompletions(query, subreddit);
			break;
		default:
			throw new Error(`Invalid autocomplete type: ${type}`);
	}

	autoCompleteUpdateDropdown(names);
	autoCompleteSetNavIndex(0);
}, 200);

const autoCompleteMatchRegExp = /(^|\W)\/?(?:r\/([\w]+)\/)?(wiki|w|r|u)\/([\w]+)$/;

function autoCompleteTrigger(e) {
	if (!/^[A-Za-z0-9 ]$/.test(e.key) && e.key !== NAMED_KEYS.Backspace) {
		return true;
	}
	autoCompleteLastTarget = e.target;

	const prefixText = this.value.slice(0, this.selectionStart);

	const match = autoCompleteMatchRegExp.exec(prefixText);
	if (!match) {
		autoCompleteHideDropdown();
		return;
	}

	const [,, subreddit, [type], query] = match;

	if (type === 'r' && !commentTools_module.options.subredditAutocomplete.value || type === 'u' && !commentTools_module.options.userAutocomplete.value || type === 'w' && !commentTools_module.options.wikiAutocomplete.value) {
		return;
	}

	autoCompleteDebounce(type, query, subreddit || currentSubreddit());
}

async function getSubredditCompletions(query) {
	const { names } = await ajax({
		method: 'POST',
		url: '/api/search_reddit_names.json',
		query: { query },
		data: { query },
		type: 'json',
		cacheFor: DAY
	});

	return names.map(name => `/r/${name}`);
}

async function getUserCompletions(query) {
	const tagNames = Object.keys((await tagStorage.getAll()));
	const pageNames = Array.from(userTagger_tags.keys());
	return [...tagNames, ...pageNames].filter(e => e.toLowerCase().startsWith(query.toLowerCase())).sort().reduce((prev, current) => {
		if (prev[prev.length - 1] !== current) {
			prev.push(current);
		}
		return prev;
	}, []).map(user => `/u/${user}`);
}

async function getWikiCompletions(query, subreddit) {
	const { data: wikiPages } = await ajax({
		method: 'GET',
		url: `/r/${subreddit}/wiki/pages.json`,
		type: 'json',
		cacheFor: DAY
	});

	return wikiPages.filter(wikiPage => wikiPage.toLowerCase().startsWith(query.toLowerCase())).map(wikiPage => `/r/${subreddit}/wiki/${wikiPage}`);
}

function autoCompleteNavigate(e) {
	if (e.metaKey || e.shiftKey || e.ctrlKey || e.altKey) return;
	const entries = $autoCompletePop.find('a.choice');
	let index = +$autoCompletePop.find('.selectedItem').data('index');
	if ($autoCompletePop.is(':visible')) {
		switch (e.key) {
			case NAMED_KEYS.Down:
			case NAMED_KEYS.Right:
				e.preventDefault();
				if (index < entries.length - 1) index++;
				autoCompleteSetNavIndex(index);
				break;
			case NAMED_KEYS.Up:
			case NAMED_KEYS.Left:
				e.preventDefault();
				if (index > 0) index--;
				autoCompleteSetNavIndex(index);
				break;
			case NAMED_KEYS.Tab:
			case NAMED_KEYS.Enter:
				e.preventDefault();
				$(entries[index]).click();
				break;
			case NAMED_KEYS.Escape:
				e.preventDefault();
				autoCompleteHideDropdown();
				return false;
			default:
				break;
		}
	}
}

function autoCompleteSetNavIndex(index) {
	const entries = $autoCompletePop.find('a.choice');
	entries.removeClass('selectedItem');
	entries.eq(index).addClass('selectedItem');
}

function autoCompleteHideDropdown() {
	$autoCompletePop.hide();
}

function autoCompleteUpdateDropdown(names) {
	if (!names.length) return autoCompleteHideDropdown();
	$autoCompletePop.empty();
	names.slice(0, 20).forEach((name, i) => {
		$autoCompletePop.append(`<a class="choice" data-index="${i}">${name}</a>`);
	});

	const textareaOffset = $(autoCompleteLastTarget).offset();
	textareaOffset.left += $(autoCompleteLastTarget).width();
	$autoCompletePop.css(textareaOffset).show();

	autoCompleteSetNavIndex(0);
}

function autoCompleteInsert(inputValue) {
	const textarea = autoCompleteLastTarget;
	const caretPos = textarea.selectionStart;
	let left = textarea.value.substr(0, caretPos);
	const right = textarea.value.substr(caretPos);
	left = left.replace(autoCompleteMatchRegExp, `$1${inputValue} `);
	textarea.value = left + right;
	textarea.selectionStart = textarea.selectionEnd = left.length;
	textarea.focus();
}

function findTextareaForElement(elem) {
	const textarea = $(elem).closest('.usertext-edit, .RESDialogContents, .wiki-page-content, #banned').find('textarea').filter('#BigText, [name=text], [name=description], [name=public_description], [name=body], #wiki_page_content, #ban_message').get(0);

	return textarea;
}

function onCtrlEnter(selector, callback) {
	$(document.body).on('keydown', selector, e => {
		if (e.key === NAMED_KEYS.Enter && (e.ctrlKey || e.metaKey)) {
			e.preventDefault();
			callback(e);
		}
	});
}
// CONCATENATED MODULE: ./lib/modules/usernameHider.js







const usernameHider_module = new Module('usernameHider');

usernameHider_module.moduleName = 'usernameHiderName';
usernameHider_module.category = 'myAccountCategory';
usernameHider_module.disabledByDefault = true;
usernameHider_module.description = 'usernameHiderDesc';

usernameHider_module.options = {
	displayText: {
		title: 'usernameHiderDisplayTextTitle',
		type: 'text',
		value: '~anonymous~',
		description: 'usernameHiderDisplayTextDesc'
	},
	perAccountDisplayText: {
		title: 'usernameHiderPerAccountDisplayTextTitle',
		type: 'table',
		addRowText: '+add account',
		fields: [{
			key: 'username',
			name: 'username',
			type: 'text'
		}, {
			key: 'displayText',
			name: 'displayText',
			type: 'text'
		}],
		value: [],
		description: 'usernameHiderPerAccountDisplayTextDesc'
	},
	hideAllUsernames: {
		title: 'usernameHiderHideAllUsernamesTitle',
		advanced: true,
		type: 'boolean',
		value: true,
		description: 'usernameHiderHideAllUsernamesDesc'
	},
	hideAccountSwitcherUsernames: {
		title: 'usernameHiderHideAccountSwitcherUsernamesTitle',
		advanced: true,
		type: 'boolean',
		value: true,
		description: 'usernameHiderHideAccountSwitcherUsernamesDesc'
	},
	showUsernameOnHover: {
		title: 'usernameHiderShowUsernameOnHoverTitle',
		type: 'boolean',
		value: false,
		description: 'usernameHiderShowUsernameOnHoverDesc'
	}
};

usernameHider_module.go = () => {
	hideUsernames();
};

function getDisplayText(username) {
	const accounts = usernameHider_module.options.perAccountDisplayText.value;

	let displayText;
	if (username && accounts) {
		username = username.toLowerCase();

		[, displayText] = accounts.find(([user]) => user.toLowerCase() === username) || [];
	}

	if (!displayText) {
		displayText = usernameHider_module.options.displayText.value;
	}

	return displayText;
}

function hideUsernames() {
	hideUsername();
	if (usernameHider_module.options.hideAllUsernames.value) {
		hideAllUsernames();
	}
	if (usernameHider_module.options.hideAccountSwitcherUsernames.value) {
		hideAccountSwitcherUsernames();
	}
}

function hideAllUsernames() {
	for (const [username] of usernameHider_module.options.perAccountDisplayText.value) {
		hideUsername(username);
	}
}

function hideAccountSwitcherUsernames() {
	const accounts = accountSwitcher_module.options.accounts.value;
	if (accounts) {
		for (const [username] of accounts) {
			hideUsername(username);
		}
	}
}

const hideUsername = memoize_default()((user = loggedInUser()) => {
	if (!user) return;

	const curatedBy = document.querySelector('.multi-details > h2 a');
	const displayText = getDisplayText(user);

	const userHref = `[href*="/user/${user}"]`;

	addCSS(`
		p.tagline > a${userHref},
		#header .user > a${userHref},
		.titlebox .tagline a.author${userHref},
		.commentingAsUser a${userHref},
		a.author${userHref},
		.bottom a${userHref} {
			line-height: 0;
			font-size: 0;
		}

		p.tagline > a${userHref}::after,
		#header .user > a${userHref}::after,
		.titlebox .tagline a.author${userHref}::after,
		.commentingAsUser a${userHref}::after,
		a.author${userHref}::after,
		.bottom a${userHref}::after {
			content: "${displayText}";
			letter-spacing: normal;
			font-size: 10px;
			background-color: inherit;
			border-radius: inherit;
			padding: inherit;
		}

		a.author${userHref}::after {
			margin-right: 0.5em;
		}

		.commentingAsUser a${userHref}::after {
			font-size: small;
		}
	`);

	if (usernameHider_module.options.showUsernameOnHover.value) {
		addCSS(`
			p.tagline > a${userHref}:hover,
			#header .user > a${userHref}:hover,
			.titlebox .tagline a.author${userHref}:hover,
			.commentingAsUser a${userHref}:hover,
			a.author${userHref}:hover,
			.bottom a${userHref}:hover {
				line-height: inherit;
				font-size: inherit;
			}

			p.tagline > a${userHref}:hover::after,
			#header .user > a${userHref}:hover::after,
			.titlebox .tagline a.author${userHref}:hover::after,
			.commentingAsUser a${userHref}:hover::after,
			a.author${userHref}:hover::after,
			.bottom a${userHref}:hover::after {
				content: none;
			}
		`);
	}

	if (curatedBy) {
		const curatedByUsername = curatedBy.pathname.match(regexes.profile);
		if (curatedByUsername && curatedByUsername[1].toLowerCase() === user.toLowerCase()) {
			curatedBy.textContent = curatedBy.textContent.replace(user, displayText);

			if (usernameHider_module.options.showUsernameOnHover.value) {
				$(curatedBy).on('mouseenter', function () {
					this.textContent = this.textContent.replace(displayText, user);
				}).on('mouseleave', function () {
					this.textContent = this.textContent.replace(user, displayText);
				});
			}
		}
	}
}, (user = loggedInUser()) => user && user.toLowerCase());
// CONCATENATED MODULE: ./lib/modules/quickMessage.js














const quickMessage_module = new Module('quickMessage');

quickMessage_module.moduleName = 'quickMessageName';
quickMessage_module.category = 'usersCategory';
quickMessage_module.description = 'quickMessageDesc';
quickMessage_module.options = {
	openQuickMessage: {
		title: 'quickMessageOpenQuickMessageTitle',
		type: 'keycode',
		value: [77, false, true, false, false],
		description: 'quickMessageOpenQuickMessageDesc'
	},
	defaultSubject: {
		title: 'quickMessageDefaultSubjectTitle',
		type: 'text',
		value: '',
		description: 'quickMessageDefaultSubjectDesc'
	},
	sendAs: {
		title: 'quickMessageSendAsTitle',
		type: 'enum',
		values: [{
			name: 'Current user',
			value: 'user'
		}, {
			name: 'Current subreddit',
			value: 'sub'
		}, {
			name: 'Last selected',
			value: 'last'
		}, {
			name: 'Last selected (this page load)',
			value: 'temporary'
		}],
		value: 'user',
		description: 'quickMessageSendAsDesc'
	},
	handleContentLinks: {
		title: 'quickMessageHandleContentLinksTitle',
		type: 'boolean',
		value: true,
		description: 'quickMessageHandleContentLinksDesc'
	},
	handleSideLinks: {
		title: 'quickMessageHandleSideLinksTitle',
		type: 'boolean',
		value: true,
		description: 'quickMessageHandleSideLinksDesc'
	},
	linkToCurrentPage: {
		title: 'quickMessageLinkToCurrentPageTitle',
		type: 'boolean',
		value: true,
		description: 'quickMessageLinkToCurrentPageDesc'
	}
};

const lastSentAsStorage = storage_namespaceObject.wrapPrefix('RESmodules.quickMessage.lastSentAs.', () => null);

quickMessage_module.go = () => {
	registerCommand((cmd, val) => cmd === 'qm' && /^(?:([^\s]+)(?:\s(.*))?)?$/.exec(val), 'qm [recipient [message]] - open quick message dialog', (command, val, [, to, body]) => {
		if (body) {
			return `quick message to ${to}: ${body}`;
		} else if (to) {
			return `quick message to ${to}`;
		}
		return 'quick message';
	}, (command, val, [, to, body]) => {
		openQuickMessageDialog({ to, body });
	});

	window.addEventListener('keydown', e => {
		if (checkKeysForEvent(e, quickMessage_module.options.openQuickMessage.value)) {
			e.preventDefault();
			openQuickMessageDialog();
		}
	}, true);

	if (quickMessage_module.options.handleContentLinks.value) {
		$('div.content[role="main"]').on('click', 'a[href*="/message/compose"]', messageLinkEventHandler);
	}
	if (quickMessage_module.options.handleSideLinks.value) {
		$('div.side').on('click', 'a[href*="/message/compose"]', messageLinkEventHandler);
	}
};

const quickMessageDialog = once_default()(() => {
	const $dialog = $(string_namespaceObject.html`
		<div id="quickMessage">
			<div id="quickMessageDialog" class="RESDialogSmall">
				<h3>Send Message<a class="gearIcon" href="${makeUrlHash(quickMessage_module.moduleID)}"></a></h3>
				<div id="quickMessageDialogClose" class="RESCloseButton"></div>
				<div id="quickMessageDialogContents" class="RESDialogContents clear">
					<form name="quickMessageDialogForm" action="">
						<label for="quickMessageDialogFrom">From</label>
						<select id="quickMessageDialogFrom"></select>
						<label for="quickMessageDialogTo">To</label>
						<input type="text" id="quickMessageDialogTo" value=""/>
						<label for="quickMessageDialogSubject">Subject</label>
						<input type="text" id="quickMessageDialogSubject" value=""/>
						<label for="quickMessageDialogBody">Body</label>
						<textarea id="quickMessageDialogBody"></textarea>
						<div class="clear"></div>
						<input type="button" id="quickMessageDialogSend" value=" send message"/>
						<a href="/message/compose" class="fullMessageForm blueButton">open full message form</a>
					</form>
				</div>
			</div>
		</div>
	`);
	const from = downcast($dialog.find('#quickMessageDialogFrom').get(0), HTMLSelectElement);
	const to = downcast($dialog.find('#quickMessageDialogTo').get(0), HTMLInputElement);
	const subject = downcast($dialog.find('#quickMessageDialogSubject').get(0), HTMLInputElement);
	const body = downcast($dialog.find('#quickMessageDialogBody').get(0), HTMLTextAreaElement);

	$dialog.find('#quickMessageDialogClose').on('click', e => {
		e.preventDefault();
		closeQuickMessageDialog();
	});

	$dialog.get(0).addEventListener('keydown', e => {
		if (e.key === NAMED_KEYS.Escape) {
			e.preventDefault();
			closeQuickMessageDialog();
		}
	}, true);

	$dialog.find('#quickMessageDialogSend').get(0).addEventListener('click', e => {
		e.preventDefault();
		quickMessage_sendMessage();
	}, true);

	onCtrlEnter('#quickMessageDialog', quickMessage_sendMessage);

	$dialog.find('a.fullMessageForm').on('mousedown focus', e => {
		$(e.target).attr('href', getFullMessageFormUrl());
	}).on('click', closeQuickMessageDialog);

	$dialog.find('a').on('keypress', e => {
		if (e.key === NAMED_KEYS.Enter) {
			$(e.target).trigger('click');
		}
	});

	from.addEventListener('change', ({ target }) => {
		const val = $(target).val();
		updateModeratorIcon(val.startsWith('/r/'));
		const loggedIn = loggedInUser();
		if (loggedIn) lastSentAsStorage.set(loggedIn, val);
	});

	$dialog.appendTo(document.body);

	return { $dialog, from, to, subject, body };
});

function updateModeratorIcon(state) {
	quickMessageDialog().$dialog.find('label[for=quickMessageDialogFrom]').toggleClass('moderator', state);
}

function messageLinkEventHandler(e) {
	const { searchParams, pathname } = new URL(downcast(e.target, HTMLAnchorElement).href, location.href);
	const hasModifier = e.ctrlKey || e.altKey || e.metaKey || e.shiftKey;
	if (e.button === 0 && !hasModifier && regexes.composeMessage.test(pathname)) {
		e.preventDefault();

		const srMatch = regexes.subreddit.exec(pathname);

		openQuickMessageDialog({
			from: srMatch ? `/r/${srMatch[1]}` : undefined,
			to: searchParams.get('to'),
			subject: searchParams.get('subject'),
			body: searchParams.get('message')
		});
		return true;
	}
}

function onClickMessageLink(event) {
	if (!modules_isRunning(quickMessage_module)) {
		return false;
	}
	return messageLinkEventHandler(event);
}

async function getValidSendFrom() {
	const username = loggedInUser();

	if (!username) {
		return [];
	}

	const users = [{
		name: `/u/${username}`,
		displayText: `/u/${modules_isEnabled(usernameHider_namespaceObject) ? getDisplayText(username) : username}`
	}];

	if (isModeratorAnywhere()) {
		const { data } = await ajax({
			url: '/subreddits/mine/moderator.json',
			query: {
				limit: 1000,
				show: 'all',
				user: loggedInUser() || '' },
			type: 'json',
			cacheFor: HOUR
		});
		const modSubs = data.children.map(({ data }) => {
			const name = data.url.slice(0, -1);
			return { name, displayText: name };
		});
		users.push(...modSubs);
	}

	return users;
}

const setUpSendFromDropdown = once_default()(async () => {
	const senders = await getValidSendFrom();
	for (const _ref of senders) {
		const { name, displayText } = _ref;

		const currentOption = document.createElement('option');
		currentOption.value = name;
		currentOption.text = displayText;
		quickMessageDialog().from.add(currentOption);
	}
	quickMessageDialog().from.disabled = senders.length < 2;
});

function focusFirstEmpty() {
	Array.from(quickMessageDialog().$dialog.find('input, textarea')).find((ele, i, { length }) => !ele.value || i === length - 1).focus();
}

async function updateSelectedSender(desiredUser, loggedIn) {
	const sendAsOptions = Array.from(quickMessageDialog().from.options).map(ele => $(ele).text().toLowerCase());
	let indexToSelect = sendAsOptions.indexOf(desiredUser.toLowerCase());

	if (indexToSelect === -1) {
		switch (quickMessage_module.options.sendAs.value) {
			case 'sub':
				const sub = currentSubreddit();
				if (sub) indexToSelect = sendAsOptions.indexOf(`/r/${sub.toLowerCase()}`);
				break;
			case 'last':
				const lastSelected = await lastSentAsStorage.get(loggedIn);
				if (lastSelected) {
					indexToSelect = sendAsOptions.indexOf(lastSelected.toLowerCase());
				}
				break;
			case 'temporary':
				indexToSelect = quickMessageDialog().from.selectedIndex;
				break;

			default:
				indexToSelect = 0;
				break;
		}
	}

	quickMessageDialog().from.selectedIndex = indexToSelect !== -1 ? indexToSelect : 0;
	updateModeratorIcon(quickMessageDialog().from.value.startsWith('/r/'));
}

async function openQuickMessageDialog({ from = '', to = '', subject = quickMessage_module.options.defaultSubject.value, body = quickMessage_module.options.linkToCurrentPage.value ? location.href : '' } = {}) {
	const loggedIn = loggedInUser();

	if (!loggedIn) {
		notifications_showNotification({
			moduleID: 'quickMessage',
			notificationID: 'quickMessageNoUser',
			header: 'Not Logged In.',
			closeDelay: 3000,
			message: 'You must log in to use the quick message dialog.'
		});
		return;
	}

	await setUpSendFromDropdown();

	await updateSelectedSender(from, loggedIn);
	quickMessageDialog().to.value = to;
	quickMessageDialog().subject.value = subject;
	quickMessageDialog().body.value = body;

	quickMessageDialog().$dialog.fadeIn(300);

	focusFirstEmpty();
}

function closeQuickMessageDialog() {
	quickMessageDialog().$dialog.fadeOut(300);

	for (const ele of quickMessageDialog().$dialog.find('input, textarea, button')) {
		ele.blur();
	}
}

function getFullMessageFormUrl() {
	const subreddit = quickMessageDialog().from.value.startsWith('/r/') ? quickMessageDialog().from.value : '';
	return subreddit + string_namespaceObject.encode`/message/compose?to=${quickMessageDialog().to.value}&subject=${quickMessageDialog().subject.value}&message=${quickMessageDialog().body.value}`;
}

const presetSendErrors = {
	NO_USER: 'No recipient specified.',
	NO_SUBJECT: 'No subject specified.',
	NO_TEXT: 'Message body is empty.',
	BAD_CAPTCHA: '<p>Sorry, reddit requires you to enter a captcha to send messages. This is usually because your account is brand new or has low karma.</p><b>Click on "open full message form" and try again (your message will be preserved).</b>',
	TOO_LONG: 'Either your subject (max 100 characters) or body (max 10,000 characters) is too long.'
};

async function quickMessage_sendMessage() {
	const from = quickMessageDialog().from.value;

	try {
		const { json: { errors } } = await ajax({
			method: 'POST',
			url: '/api/compose',
			data: {
				api_type: 'json',
				from_sr: from.includes('/r/') ? from.slice(3) : '',
				subject: quickMessageDialog().subject.value,
				text: quickMessageDialog().body.value,
				to: quickMessageDialog().to.value
			},
			type: 'json'
		});

		if (errors[0]) {
			notifications_showNotification({
				moduleID: 'quickMessage',
				notificationID: 'quickMessageSendError',
				header: 'Message not sent.',
				closeDelay: 15000,
				message: presetSendErrors[errors[0][0]] || `${errors[0][0]} : ${errors[0][1]}` });
		} else {
			closeQuickMessageDialog();
		}
	} catch (e) {
		notifications_showNotification({
			moduleID: 'quickMessage',
			notificationID: 'failedToSendQuickMessage',
			header: 'Sending Failed!',
			closeDelay: 15000,
			message: 'Reddit is likely under heavy load. Either wait a minute or click on "open full message form" and try again (your message will be preserved).'
		});
		throw e;
	}
}
// CONCATENATED MODULE: ./lib/modules/userHighlight.js








const userHighlight_module = new Module('userHighlight');

userHighlight_module.moduleName = 'userHighlightName';
userHighlight_module.category = 'usersCategory';
userHighlight_module.description = 'userHighlightDesc';
userHighlight_module.bodyClass = true;
userHighlight_module.options = {
	highlightSelf: {
		title: 'userHighlightHighlightSelfTitle',
		type: 'boolean',
		value: false,
		description: 'userHighlightHighlightSelfDesc'
	},
	selfColor: {
		title: 'userHighlightSelfColorTitle',
		type: 'color',
		value: '#B8860B',
		description: 'userHighlightSelfColorDesc',
		advanced: true,
		dependsOn: options => options.highlightSelf.value
	},
	selfColorHover: {
		title: 'userHighlightSelfColorHoverTitle',
		type: 'color',
		value: '#8A6508',
		description: 'userHighlightSelfColorHoverDesc',
		advanced: true,
		dependsOn: options => options.highlightSelf.value
	},
	highlightOP: {
		title: 'userHighlightHighlightOPTitle',
		type: 'boolean',
		value: true,
		description: 'userHighlightHighlightOPDesc'
	},
	OPColor: {
		title: 'userHighlightOPColorTitle',
		type: 'color',
		value: '#0055DF',
		description: 'userHighlightOPColorDesc',
		advanced: true,
		dependsOn: options => options.highlightOP.value
	},
	OPColorHover: {
		title: 'userHighlightOPColorHoverTitle',
		type: 'color',
		value: '#4E7EAB',
		description: 'userHighlightOPColorHoverDesc',
		advanced: true,
		dependsOn: options => options.highlightOP.value
	},
	highlightAdmin: {
		title: 'userHighlightHighlightAdminTitle',
		type: 'boolean',
		value: true,
		description: 'userHighlightHighlightAdminDesc'
	},
	adminColor: {
		title: 'userHighlightAdminColorTitle',
		type: 'color',
		value: '#FF0011',
		description: 'userHighlightAdminColorDesc',
		advanced: true,
		dependsOn: options => options.highlightAdmin.value
	},
	adminColorHover: {
		title: 'userHighlightAdminColorHoverTitle',
		type: 'color',
		value: '#B3000C',
		description: 'userHighlightAdminColorHoverDesc',
		advanced: true,
		dependsOn: options => options.highlightAdmin.value
	},
	highlightAlum: {
		title: 'userHighlightHighlightAlumTitle',
		type: 'boolean',
		value: true,
		description: 'userHighlightHighlightAlumDesc'
	},
	alumColor: {
		title: 'userHighlightAlumColorTitle',
		type: 'color',
		value: '#BE1337',
		description: 'userHighlightAlumColorDesc',
		advanced: true,
		dependsOn: options => options.highlightAlum.value
	},
	alumColorHover: {
		title: 'userHighlightAlumColorHoverTitle',
		type: 'color',
		value: '#8F0E29',
		description: 'userHighlightAlumColorHoverDesc',
		advanced: true,
		dependsOn: options => options.highlightAlum.value
	},
	highlightFriend: {
		title: 'userHighlightHighlightFriendTitle',
		type: 'boolean',
		value: true,
		description: 'userHighlightHighlightFriendDesc'
	},
	friendColor: {
		title: 'userHighlightFriendColorTitle',
		type: 'color',
		value: '#FF4500',
		description: 'userHighlightFriendColorDesc',
		advanced: true,
		dependsOn: options => options.highlightFriend.value
	},
	friendColorHover: {
		title: 'userHighlightFriendColorHoverTitle',
		type: 'color',
		value: '#B33000',
		description: 'userHighlightFriendColorHoverDesc',
		advanced: true,
		dependsOn: options => options.highlightFriend.value
	},
	highlightMod: {
		title: 'userHighlightHighlightModTitle',
		type: 'boolean',
		value: true,
		description: 'userHighlightHighlightModDesc'
	},
	modColor: {
		title: 'userHighlightModColorTitle',
		type: 'color',
		value: '#228822',
		description: 'userHighlightModColorDesc',
		advanced: true,
		dependsOn: options => options.highlightMod.value
	},
	modColorHover: {
		title: 'userHighlightModColorHoverTitle',
		type: 'color',
		value: '#134913',
		description: 'userHighlightModColorHoverDesc',
		advanced: true,
		dependsOn: options => options.highlightMod.value
	},
	highlightFirstCommenter: {
		title: 'userHighlightHighlightFirstCommenterTitle',
		type: 'boolean',
		value: false,
		description: 'userHighlightHighlightFirstCommenterDesc'
	},
	dontHighlightFirstComment: {
		title: 'userHighlightDontHighlightFirstCommentTitle',
		type: 'boolean',
		value: true,
		description: 'userHighlightDontHighlightFirstCommentDesc',
		advanced: true,
		dependsOn: options => options.highlightFirstCommenter.value
	},
	firstCommentColor: {
		title: 'userHighlightFirstCommentColorTitle',
		type: 'color',
		value: '#46B6CC',
		description: 'userHighlightFirstCommentColorDesc',
		advanced: true,
		dependsOn: options => options.highlightFirstCommenter.value
	},
	firstCommentColorHover: {
		title: 'userHighlightFirstCommentColorHoverTitle',
		type: 'color',
		value: '#72D2E5',
		description: 'userHighlightFirstCommentColorHoverDesc',
		advanced: true,
		dependsOn: options => options.highlightFirstCommenter.value
	},
	fontColor: {
		title: 'userHighlightFontColorTitle',
		type: 'color',
		value: '#FFFFFF',
		description: 'userHighlightFontColorDesc',
		advanced: true
	},
	autoColorUsernames: {
		title: 'userHighlightAutoColorUsernamesTitle',
		type: 'boolean',
		value: false,
		description: 'userHighlightAutoColorUsernamesDesc'
	},
	autoColorUsing: {
		title: 'userHighlightAutoColorUsingTitle',
		description: 'userHighlightAutoColorUsingDesc',
		type: 'enum',
		value: 'hash-userid-notbright',
		values: [{
			name: 'Random color, not too bright, consistent for each user; night mode-friendly',
			value: 'hash-userid-notbright'
		}, {
			name: 'Simple random color, consistent for each user. (original)',
			value: 'hash-userid'
		}, {
			name: 'All black or, in night mode, all light gray.',
			value: 'monochrome'
		}],
		advanced: true,
		dependsOn: options => options.autoColorUsernames.value
	},
	generateHoverColors: {
		title: 'userHighlightGenerateHoverColorsTitle',
		type: 'button',
		text: 'Generate',
		callback: generateHoverColors,
		description: 'userHighlightGenerateHoverColorsDesc',
		advanced: true
	}
};

userHighlight_module.beforeLoad = () => {

	if (userHighlight_module.options.autoColorUsernames.value) {
		watchForThings(['post', 'comment', 'message'], updateNewUsernames, { immediate: true });
	}

	if (userHighlight_module.options.highlightFirstCommenter.value) {
		watchForThings(['comment'], updateFirstComments, { immediate: true });
	}

	if (userHighlight_module.options.highlightFriend.value) {
		highlight('friend', userHighlight_module.options.friendColor.value, userHighlight_module.options.friendColorHover.value);
	}
	if (userHighlight_module.options.highlightOP.value) {
		highlight('submitter', userHighlight_module.options.OPColor.value, userHighlight_module.options.OPColorHover.value);
	}
	if (userHighlight_module.options.highlightMod.value) {
		highlight('moderator', userHighlight_module.options.modColor.value, userHighlight_module.options.modColorHover.value);
	}
	if (userHighlight_module.options.highlightAdmin.value) {
		highlight('admin', userHighlight_module.options.adminColor.value, userHighlight_module.options.adminColorHover.value);
	}
	if (userHighlight_module.options.highlightAlum.value) {
		highlight('alum', userHighlight_module.options.alumColor.value, userHighlight_module.options.alumColorHover.value);
	}
};

userHighlight_module.go = () => {
	const username = loggedInUser();
	if (userHighlight_module.options.highlightSelf.value && username) {
		highlight(`author[href$="/${username}"]`, userHighlight_module.options.selfColor.value, userHighlight_module.options.selfColorHover.value);
	}
};

function updateFirstComments(thing) {
	if (!thing.isTopLevelComment()) return;

	const idClass = Array.from(thing.element.classList).find(cls => cls.startsWith('id-t1_'));
	if (!idClass) return;

	const author = thing.getAuthorElement();
	if (!author) return;

	const authorClass = Array.from(author.classList).find(cls => cls.startsWith('id-t2_'));

	if (authorClass) {
		const container = `.${idClass}${userHighlight_module.options.dontHighlightFirstComment.value ? ' .child' : ''}`;
		highlight(authorClass, userHighlight_module.options.firstCommentColor.value, userHighlight_module.options.firstCommentColorHover.value, container);
	}
}

function updateNewUsernames(thing) {
	const element = thing.getAuthorElement();
	if (!element) return;

	const idClass = Array.from(element.classList).find(cls => cls.startsWith('id-t2_'));
	if (!idClass) return;

	const colorGetter = autoColorUsing[userHighlight_module.options.autoColorUsing.value];
	const color = colorGetter(idClass);

	doTextColor(idClass, color);
}

const autoColorUsing = {
	'hash-userid-notbright'(idClass) {
		const hash = hashCode(idClass);

		const r = (hash & 0xFF0000) >> 16;
		const g = (hash & 0x00FF00) >> 8;
		const b = hash & 0x0000FF;

		const lum = Math.round(r * 0.299 + g * 0.587 + b * 0.114);
		const minLum = 0x66;
		const maxLum = 0xAA;

		let color = [r, g, b];
		let nightmodeColor = [r, g, b];
		if (lum < minLum) {
			const scale = minLum / lum;
			nightmodeColor = [Math.round(r * scale), Math.round(g * scale), Math.round(b * scale)];
		} else if (lum > maxLum) {
			const scale = maxLum / lum;
			color = [Math.round(r * scale), Math.round(g * scale), Math.round(b * scale)];
		}
		color = `rgb(${color.join(',')})`;
		nightmodeColor = `rgb(${nightmodeColor.join(',')})`;

		return {
			color,
			nightmodeColor
		};
	},
	'hash-userid'(idClass) {
		let hash = 5381;
		for (const char of idClass) {
			hash = (hash << 5) + hash + char.charCodeAt(0);
		}

		const r = (hash & 0xFF0000) >> 16;
		const g = (hash & 0x00FF00) >> 8;
		const b = hash & 0x0000FF;
		const color = `rgb(${[r, g, b].join(',')})`;

		return {
			color
		};
	},
	monochrome() {
		return {
			color: 'black',
			nightmodeColor: '#ccc'
		};
	}
};

function highlightUser(userid) {
	return highlight(`author.id-t2_${userid}`, userInfo_module.options.highlightColor.value, userInfo_module.options.highlightColorHover.value);
}

function highlight(selector, color, hoverColor, container = '') {
	const css = `
		.res-userHighlight ${container} .tagline .author.${selector},
		.res-userHighlight ${container} .crosspost-preview-tagline .author.${selector} {
			color: ${userHighlight_module.options.fontColor.value} !important;
			font-weight: bold;
			padding: 0 2px 0 2px;
			border-radius: 3px;
			background-color: ${color} !important;
		}
		.res-userHighlight ${container} .collapsed .tagline .author.${selector},
		.res-userHighlight ${container} .collapsed .crosspost-preview-tagline .author.${selector} {
			color: white !important;
			background-color: #AAA !important;
		}
		.res-userHighlight ${container} .tagline .author.${selector}:hover,
		.res-userHighlight ${container} .crosspost-preview-tagline .author.${selector}:hover {
			background-color: ${hoverColor} !important;
			text-decoration: none !important;
		}
	`;
	return addCSS(css);
}

function doTextColor(selector, colorData) {
	const color = colorData.color;
	const nightmodeColor = colorData.nightmodeColor || colorData.color;
	const css = `
		.res-userHighlight .tagline .author.${selector} {
			color: ${color} !important;
		}
		.res-userHighlight.res-nightmode .tagline .author.${selector} {
			color: ${nightmodeColor} !important;
		}
	`;
	return addCSS(css);
}

function generateHoverColor(color) {
	if (!/^#[0-9A-F]{6}$/i.test(color)) {
		return false;
	}
	let R = parseInt(color.substr(1, 2), 16);
	let G = parseInt(color.substr(3, 2), 16);
	let B = parseInt(color.substr(5, 2), 16);

	R = Math.round(0.75 * R) + 256;
	G = Math.round(0.75 * G) + 256;
	B = Math.round(0.75 * B) + 256;
	return `#${R.toString(16).substr(1)}${G.toString(16).substr(1)}${B.toString(16).substr(1)}`;
}

function generateHoverColors() {
	const options = ['selfColor', 'OPColor', 'adminColor', 'friendColor', 'modColor', 'firstCommentColor', 'alumColor'];
	let error = false;
	for (const option of options) {
		const newColor = generateHoverColor(getOptionValue('userHighlight', option));
		if (newColor !== false) {
			setOptionValue('userHighlight', `${option}Hover`, newColor);
		} else {
			error = true;
		}
	}
	if (error) {
		alert_namespaceObject.open(i18n('userHighlightColorCouldNotBeGenerated'));
	}
}
// CONCATENATED MODULE: ./lib/modules/userInfo.js













const userInfo_module = new Module('userInfo');

userInfo_module.moduleName = 'userInfoName';
userInfo_module.category = 'usersCategory';
userInfo_module.description = 'userInfoDesc';
userInfo_module.options = {
	hoverInfo: {
		title: 'userInfoHoverInfoTitle',
		type: 'boolean',
		value: true,
		description: 'userInfoHoverInfoDesc'
	},
	useQuickMessage: {
		title: 'userInfoUseQuickMessageTitle',
		type: 'boolean',
		value: true,
		description: 'userInfoUseQuickMessageDesc',
		dependsOn: options => options.hoverInfo.value
	},
	hoverDelay: {
		title: 'userInfoHoverDelayTitle',
		type: 'text',
		value: '800',
		description: 'userInfoHoverDelayDesc',
		advanced: true,
		dependsOn: options => options.hoverInfo.value
	},
	fadeDelay: {
		title: 'userInfoFadeDelayTitle',
		type: 'text',
		value: '200',
		description: 'userInfoFadeDelayDesc',
		advanced: true,
		dependsOn: options => options.hoverInfo.value
	},
	fadeSpeed: {
		title: 'userInfoFadeSpeedTitle',
		type: 'text',
		value: '0.7',
		description: 'userInfoFadeSpeedDesc',
		advanced: true,
		dependsOn: options => options.hoverInfo.value
	},
	gildComments: {
		title: 'userInfoGildCommentsTitle',
		type: 'boolean',
		value: true,
		description: 'userInfoGildCommentsDesc',
		advanced: true,
		dependsOn: options => options.hoverInfo.value
	},
	highlightButton: {
		title: 'userInfoHighlightButtonTitle',
		type: 'boolean',
		value: true,
		description: 'userInfoHighlightButtonDesc',
		advanced: true,
		dependsOn: options => options.hoverInfo.value
	},
	highlightColor: {
		title: 'userInfoHighlightColorTitle',
		type: 'color',
		value: '#5544CC',
		description: 'userInfoHighlightColorDesc',
		advanced: true,
		dependsOn: options => options.highlightButton.value
	},
	highlightColorHover: {
		title: 'userInfoHighlightColorHoverTitle',
		type: 'color',
		value: '#6677AA',
		description: 'userInfoHighlightColorHoverDesc',
		advanced: true,
		dependsOn: options => options.highlightButton.value
	}
};

const highlightedUsers = {};

userInfo_module.go = () => {
	if (userInfo_module.options.hoverInfo.value) {
		$(document.body).on('mouseover', usernameSelector, handleMouseOver);
	}
};

function handleMouseOver(e) {
	const authorLink = downcast(e.target, HTMLAnchorElement);
	if (!usernameRE.test(authorLink.href)) return;
	const [, username] = usernameRE.exec(authorLink.href);
	if (!username) console.error(i18n('userInfoInvalidUsernameLink'));
	const thing = Thing_Thing.from(authorLink);

	infocard(userInfo_module.moduleID).target(e.target).options({
		width: 475,
		openDelay: userInfo_module.options.hoverDelay.value,
		fadeDelay: userInfo_module.options.fadeDelay.value,
		fadeSpeed: userInfo_module.options.fadeSpeed.value
	}).populateWith(card => showUserInfo(card, username, thing)).begin();
}

async function showUserInfo(card, username, thing) {
	card.populate([username]);

	let data;

	try {
		({ data } = await getUserInfo(username));
	} catch (e) {
		return [null, i18n('userInfoUserNotFound')];
	}

	if (data.is_suspended) {
		return [null, i18n('userInfoUserSuspended')];
	}

	const d = new Date(data.created_utc * 1000);

	const header = string_namespaceObject.html`
		<div>
			<a href="/user/${data.name}">/u/${data.name}</a>
		 	(<a href="/user/${data.name}/submitted/">${i18n('userInfoLinks')}</a>)
		 	(<a href="/user/${data.name}/comments/">${i18n('userInfoComments')}</a>)
		</div>
	`;

	if (loggedInUser()) {
		const friendButton = string_namespaceObject.html`
			<span class="fancy-toggle-button toggle" style="display: inline-block; margin-left: 12px;">
				<a class="option active ${data.is_friend ? 'remove' : 'add'}" href="#" tabindex="100">${i18n('userInfoAddRemoveFriends', data.is_friend ? '-' : '+')}</a>
			</span>
		`;

		friendButton.addEventListener('click', async e => {
			if (e.target.tagName !== 'A') return;
			e.preventDefault();
			const $link = $(e.target);
			const isRemove = $link.hasClass('remove');
			await ajax({
				method: 'POST',
				url: `/api/${isRemove ? 'unfriend' : 'friend'}`,
				data: {
					type: 'friend',
					name: data.name,
					container: `t2_${(await getUserInfo()).data.id}`
				}
			});
			$link.toggleClass('remove', !isRemove).toggleClass('add', isRemove).text(`${isRemove ? '+' : '-'} friends`);

			ajax.invalidate({ url: `/user/${data.name}/about.json` });
		});

		header.appendChild(friendButton);
	}

	card.populate([header]);

	const $body = $('<div id="authorInfoToolTip" />');

	let userHTML = string_namespaceObject.escape`
		<div class="fieldPair"><div class="fieldPair-label">${i18n('userInfoRedditorSince')}</div> <div class="fieldPair-text">${formatDate(d)} (${formatDateDiff(d)})</div></div>
		<div class="fieldPair"><div class="fieldPair-label">${i18n('userInfoPostKarma')}</div> <div class="fieldPair-text">${formatNumber(data.link_karma)}</div></div>
		<div class="fieldPair"><div class="fieldPair-label">${i18n('userInfoCommentKarma')}</div> <div class="fieldPair-text">${formatNumber(data.comment_karma)}</div></div>
	`;

	const userTaggerEnabled = modules_isRunning(userTagger_namespaceObject);
	const userTag = userTaggerEnabled && (await userTagger_Tag.get(data.name));

	if (userTaggerEnabled) {
		userHTML += `<div class="fieldPair"><div class="fieldPair-label">${i18n('userInfoUserTag')}</div> <div class="fieldPair-text" style="display:flex"><a class="author" style="display: none;" href="/u/${data.name}"/></div></div>`;
	}

	if (userTag && userTag.link) {
		const links = userTag.link.split(/\s/).reduce((acc, url) => acc + string_namespaceObject.escape`<a target="_blank" rel="noopener noreferer" href="${url}">${url.replace(/^https?:\/\/(www\.)?/, '')}</a>`, '');
		userHTML += `<div class="fieldPair"><div class="fieldPair-label">${i18n('userInfoLink')}</div> <div class="fieldPair-text">${links}</div></div>`;
	}

	userHTML += string_namespaceObject.escape`
		<div class="clear"></div>
		<div class="bottomButtons">
			<a target="_blank" rel="noopener noreferer" class="blueButton composeButton" href="/message/compose/?to=${data.name}"><img src="https://redditstatic.s3.amazonaws.com/mailgray.png"> ${i18n('userInfoSendMessage')}</a>
	`;

	if (data.is_gold) {
		userHTML += string_namespaceObject.escape`<a target="_blank" rel="noopener noreferer" class="blueButton" href="/gold/about">${i18n('userInfoUserHasRedditGold')}</a>`;
	} else {
		userHTML += string_namespaceObject.escape`<a target="_blank" rel="noopener noreferer" id="gildUser" class="blueButton" href="/gold?goldtype=gift&recipient=${data.name}">${i18n('userInfoGiftRedditGold')}</a>`;
	}

	if (userInfo_module.options.highlightButton.value) {
		const isHighlight = !highlightedUsers[data.id];
		userHTML += string_namespaceObject.escape`<div class="${isHighlight ? 'blueButton' : 'redButton'}" id="highlightUser" data-userid="${data.id}">${isHighlight ? i18n('userInfoHighlight') : i18n('userInfoUnhighlight')}</div>`;
	}

	if (userTag) {
		const getButton = () => string_namespaceObject.escape`<div class="${userTag.ignored ? 'redButton' : 'blueButton'}" id="ignoreUser">&empty; ${userTag.ignored ? i18n('userInfoUnignore') : i18n('userInfoIgnore')}</div>`;

		$body.on('click', '#ignoreUser', e => {
			if (e.target.classList.contains('blueButton')) userTag.ignore();else userTag.unignore();
			$(e.target).replaceWith(getButton());
		});

		userHTML += getButton();
	}

	userHTML += '<div class="clear"></div></div>';

	$body.append(userHTML);

	if (userTag) {
		userTag.add(downcast($body.find('.author').get(0), HTMLAnchorElement), { renderTaggingIcon: true });
	}

	if (userInfo_module.options.highlightButton.value) {
		$body.find('#highlightUser').on('click', ({ target }) => {
			const userid = target.getAttribute('data-userid');
			toggleUserHighlight(target, userid, thing);
		});
	}
	if (userInfo_module.options.gildComments.value && thing && thing.isComment()) {
		$body.find('#gildUser').on('click', e => {
			if (!thing || e.ctrlKey || e.metaKey || e.shiftKey) return;

			hideAuthorInfo();
			const giveGold = thing.entry.querySelector('.give-gold');
			click(giveGold);
			e.preventDefault();
		});
	}

	if (userInfo_module.options.useQuickMessage.value && modules_isRunning(quickMessage_namespaceObject)) {
		$body.find('a.composeButton').on('click', e => {
			if (e.which === 1) {
				e.preventDefault();

				let entryUrl;
				if (quickMessage_module.options.linkToCurrentPage.value && thing) {
					const permalink = thing.getCommentPermalink();
					if (permalink) {
						entryUrl = permalink.href;
						if (!entryUrl.includes('?context=')) entryUrl += '?context=10';
					}
				}

				openQuickMessageDialog({
					to: data.name,
					body: entryUrl
				});
				hideAuthorInfo();
			}
		});
	}

	return [null, $body];
}

function hideAuthorInfo() {
	infocard(userInfo_module.moduleID).close();
}

function toggleUserHighlight(authorInfoToolTipHighlight, userid, thing) {
	if (highlightedUsers[userid]) {
		highlightedUsers[userid].remove();
		delete highlightedUsers[userid];
		toggleUserHighlightButton(authorInfoToolTipHighlight, true);
	} else {
		highlightedUsers[userid] = highlightUser(userid);
		toggleUserHighlightButton(authorInfoToolTipHighlight, false);
	}

	if (modules_isRunning(commentNavigator_namespaceObject) && commentNavigator_module.options.openOnHighlightUser.value) {
		setCategory('highlighted', true);
		if (thing) updateFromSelected(thing);
		commentNavigator_toggle(false, true);
	}
}

function toggleUserHighlightButton(authorInfoToolTipHighlight, canHighlight) {
	$(authorInfoToolTipHighlight).toggleClass('blueButton', canHighlight).toggleClass('redButton', !canHighlight).text(canHighlight ? i18n('userInfoHighlight') : i18n('userInfoUnhighlight'));
}
// CONCATENATED MODULE: ./lib/modules/wheelBrowse.js









const wheelBrowse_module = new Module('wheelBrowse');

wheelBrowse_module.moduleName = 'wheelBrowseName';
wheelBrowse_module.category = 'browsingCategory';
wheelBrowse_module.description = 'wheelBrowseDesc';

let behavior;

wheelBrowse_module.go = () => {
	if (!behavior && isPageType('linklist')) useLinklistBehavior();
	if (!behavior) return;

	const wheelBrowseWidget = string_namespaceObject.html`<div hidden class="res-wheel-browse"></div>`;

	const onWheel = behavior(wheelBrowseWidget);

	selectedEntry_addListener(selected => {
		wheelBrowseWidget.hidden = !selected;
	}, 'beforePaint');

	wheelBrowseWidget.addEventListener('wheel', e => {
		e.stopImmediatePropagation();
		e.preventDefault();
		onWheel(e.deltaY > 0 ? 'down' : 'up', e);
	});

	addElement(wheelBrowseWidget, { order: -1 });
};

function setCallback(v) {
	behavior = v;
}

function useLinklistBehavior() {
	const galleryPart = string_namespaceObject.html`<div hidden class="res-wheel-browse-gallery"></div>`;
	let media;

	function updateGalleryPart(direction) {
		const expando = expando_Expando.getEntryExpandoFrom(selectedThing);
		media = expando && expando.media;

		galleryPart.hidden = !(media && media.element.classList.contains('res-gallery-slideshow') && !(direction === 'down' && media.element.querySelector('[last-piece=true]')) && !(direction === 'up' && media.element.querySelector('[first-piece=true]')));
	}

	setCallback(wheelBrowseWidget => {
		wheelBrowseWidget.addEventListener('click', () => loadSettingsPage(wheelBrowse_module.moduleID));
		wheelBrowseWidget.addEventListener('mouseenter', () => {
			updateGalleryPart();
		});
		wheelBrowseWidget.append(galleryPart);

		return (direction, { target }) => {
			if (target === wheelBrowseWidget) {
				move(direction, { allowMediaBrowse: true, scrollStyle: 'top' });
			} else if (target === galleryPart) {
				const clicker = media && media.element.querySelector(direction === 'down' ? '.res-gallery-next' : '.res-gallery-previous');
				if (clicker) clicker.click();
				updateGalleryPart(direction);
			}
		};
	});
}
// CONCATENATED MODULE: ./lib/modules/commentNavigator.js
















const commentNavigator_module = new Module('commentNavigator');

commentNavigator_module.moduleName = 'commentNavName';
commentNavigator_module.category = 'commentsCategory';
commentNavigator_module.description = 'commentNavDesc';
commentNavigator_module.options = {
	showByDefault: {
		type: 'boolean',
		value: false,
		description: 'commentNavigatorShowByDefaultDesc',
		title: 'commentNavigatorShowByDefaultTitle'
	},
	openOnHighlightUser: {
		type: 'boolean',
		value: true,
		description: 'commentNavigatorOpenOnHighlightUserDesc',
		title: 'commentNavigatorOpenOnHighlightUserTitle',
		advanced: true
	}
};
commentNavigator_module.include = ['comments'];

commentNavigator_module.go = () => {
	installEntryElement();

	if (commentNavigator_module.options.showByDefault.value) {
		commentNav();
	}

	setCallback(wheelBrowseWidget => {
		wheelBrowseWidget.addEventListener('click', () => {
			commentNavigator_toggle();
		});

		return direction => {
			if (direction === 'up') commentNavigator_move('up');else commentNavigator_move('down');
		};
	});

	const getMatchingCategory = async val => val && (await getCategories()).find(({ category }) => category.startsWith(val));
	registerCommand('nav', 'nav [sortType] - open the comment navigator', async (command, val) => {
		const { category: matchingCategory = '' } = (await getMatchingCategory(val)) || {};
		return `navigate comments by [(${(await getCategories()).map(({ category }) => matchingCategory === category ? `<b>${category}</b>` : category).join('|')})]`;
	}, async (command, val) => {
		const { category: matchingCategory = '' } = (await getMatchingCategory(val)) || {};
		if (matchingCategory) setCategory(matchingCategory);
		commentNavigator_toggle(false, true);
	});
};

const commentNavigator_initialize = once_default()(() => {
	watchForThings(['comment'], () => {
		_memoized.cache.clear();
	});

	selectedEntry_addListener(updateFromSelected, 'beforePaint');
	updateFromSelected();
});

const commentNavigator_sortTypes = {
	custom: {
		title: 'Navigate custom category',
		conditions: { type: 'false' } },
	comment: {
		title: 'Navigate comments',
		conditions: { type: 'true' }
	},
	submitter: {
		title: 'Navigate comments made by the post submitter',
		conditions: { type: 'userAttr', attr: 'submitter' }
	},
	moderator: {
		title: 'Navigate comments made by moderators',
		conditions: { type: 'userAttr', attr: 'moderator' }
	},
	friend: {
		title: 'Navigate comments made by users on your friends list',
		conditions: { type: 'userAttr', attr: 'friend' }
	},
	me: {
		title: 'Navigate comments made by you',
		conditions: { type: 'userAttr', attr: 'me' }
	},
	admin: {
		title: 'Navigate comments made by reddit admins',
		conditions: { type: 'userAttr', attr: 'admin' }
	},
	highlighted: {
		title: 'Navigate comments made by highlighted user',
		getElements() {
			const highlightedUserSelector = Object.keys(highlightedUsers).map(key => `.noncollapsed .author.id-t2_${key}`).join(', ');
			return highlightedUserSelector ? document.querySelectorAll(highlightedUserSelector) : [];
		}
	},
	tagged: {
		title: 'Navigate comments made by tagged users',
		getElements: () => document.querySelectorAll('.noncollapsed .tagline .userTagLink.hasTag')
	},
	gilded: {
		title: 'Navigate through gilded comments',
		getElements: () => document.querySelectorAll('.noncollapsed .gilded-icon')
	},
	IAmA: {
		title: 'Navigate through questions that have been answered by the submitter (most useful in /r/IAmA)',
		getThings: async () => filterMap((await getPosts('submitter')), thing => thing.parent ? [thing.parent] : undefined)
	},
	images: {
		title: 'Navigate through comments with images',
		conditions: { type: 'hasExpando', types: ['image'] }
	},
	videos: {
		title: 'Navigate through comments with videos',
		conditions: { type: 'hasExpando', types: ['video'] }
	},
	popular: {
		title: 'Navigate through comments in order of highest vote total',
		async getThings() {
			return flow_default()(filterMap(thing => {
				const score = thing.getScore();
				if (typeof score === 'number') {
					return [[score, thing]];
				}
			}), arr => arr.sort((a, b) => b[0] - a[0]), map_default()(([, thing]) => thing))((await getPosts('comment')));
		},
		nonlinear: true
	},
	new: {
		title: 'Navigate through new comments (Reddit Gold users only)',
		getElements: () => document.querySelectorAll('.new-comment'),
		disabled: () => !document.body.querySelector('.gold-accent.comment-visits-box')
	},
	upvoted: {
		title: 'Navigate through comments you upvoted',
		conditions: { type: 'voteType', kind: 'upvote' }
	}
};

function updateCustomConditions(conditions) {
	commentNavigator_sortTypes.custom.conditions = conditions;
}

function getCategories() {
	return Promise.all(Object.entries(commentNavigator_sortTypes).filter(([, { disabled }]) => !disabled || !disabled()).map(async ([category, { title }]) => ({
		category,
		selected: category === currentCategory,
		size: (await getPosts(category)).length,
		title
	}))).then(v => v.filter(({ size, selected }) => selected || size));
}

const _memoized = memoize_default()(async category => {
	const { getElements, getThings, conditions } = commentNavigator_sortTypes[category];

	let things = [];

	if (getThings) {
		things = uniq_default()((await getThings()));
	} else if (getElements) {
		things = uniq_default()(Array.from(getElements()).map(e => Thing_Thing.checkedFrom(e)));
	} else {
		things = Thing_Thing.things().filter(thing => thing.isComment());
	}

	return filterThings(things, conditions);
});
const getPosts = category => _memoized(category).then(v => v.filter(thing => thing.isContentVisible()));
const currentPosts = () => getPosts(currentCategory);
let lastNavigatedTo = null;

let currentCategory = isCurrentSubreddit('IAmA', 'casualiama') ? 'IAmA' : 'popular';
let commentNavigator_isOpen = false;

const commentNav = once_default()(() => {
	const box = string_namespaceObject.html`
		<div id="REScommentNavBox">
			<select id="commentNavBy">
				<option selected value="${currentCategory}">${currentCategory}</option>
			</select>
			<hr style="margin-bottom: 0">
			<div id="commentNavButtons">
				<button id="commentNavUp">&#x25B2;</button>
				<div id="commentNavPostCount"></div>
				<button id="commentNavDown">&#x25BC;</button>
			</div>
		</div>
	`;

	const select = downcast(box.querySelector('#commentNavBy'), HTMLSelectElement);

	select.addEventListener('focus', async () => {
		empty(select);
		const categories = await getCategories();
		select.append(...categories.map(({ category, selected, size }) => string_namespaceObject.html`
				<option ${selected && 'selected'} value="${category}">${category}<span> (${size})</span></option>
			`));
	}, true);
	select.addEventListener('keyup', ({ which }) => {
		if (which === 27) select.blur();
	});
	select.addEventListener('change', () => {
		setCategory(select.options.item(select.selectedIndex).value);
	});

	const postCount = box.querySelector('#commentNavPostCount');
	postCount.addEventListener('click', () => moveTo(lastNavigatedTo));
	const up = downcast(box.querySelector('#commentNavUp'), HTMLButtonElement);
	up.addEventListener('click', () => commentNavigator_move('up'));
	const down = downcast(box.querySelector('#commentNavDown'), HTMLButtonElement);
	down.addEventListener('click', () => commentNavigator_move('down'));

	addElement(box, { separate: true });

	function refresh(index, length, lastNavigatedToIndex) {
		up.disabled = lastNavigatedToIndex <= 0;
		down.disabled = lastNavigatedToIndex >= length - 1;
		postCount.textContent = length ? `${lastNavigatedToIndex === index ? '' : '~'}${lastNavigatedToIndex + 1}/${length}` : 'none';
	}

	function open() {
		commentNavigator_isOpen = true;box.hidden = false;
	}
	function close() {
		commentNavigator_isOpen = false;box.hidden = true;
	}

	commentNavigator_initialize();
	commentNavigator_isOpen = true;

	return {
		select,
		refresh,
		open,
		close
	};
});

function installEntryElement() {
	const commentNavToggle = $('<div class="res-commentNavToggle">navigate by<div class="res-commentNavToggle-choices"><div></div>').appendTo('.commentarea .panestack-title').get(0);

	commentNavToggle.addEventListener('mouseenter', async () => {
		const choices = commentNavToggle.querySelector('.res-commentNavToggle-choices');
		empty(choices);
		const categories = await getCategories();
		choices.append(...categories.map(({ category, title, size }) => {
			const element = string_namespaceObject.html`
				<div class="res-commentNavToggle-type noCtrlF" title="${title}" category="${category}">${category} (${size})</div>
			`;
			element.addEventListener('click', () => {
				setCategory(category);
			});
			return element;
		}));
	});
}

async function updateFromSelected(selected = selectedThing) {
	const posts = await currentPosts();

	if (posts.includes(selected) && (!commentNavigator_sortTypes[currentCategory].nonlinear || Math.abs(posts.indexOf(lastNavigatedTo) - posts.indexOf(selected)) <= 1)) {
		lastNavigatedTo = selected;
	}

	commentNav().refresh(posts.indexOf(selected), posts.length, posts.indexOf(lastNavigatedTo));
}

function setCategory(category, keepSelected = false) {
	currentCategory = category;
	lastNavigatedTo = null;

	commentNav().select.value = category;

	_memoized.cache.delete(currentCategory);

	if (!keepSelected) commentNavigator_move('top');
}

function commentNavigator_toggle(focus = false, open = !commentNavigator_isOpen) {
	if (!open) {
		commentNav().close();
	} else {
		commentNav().open();
		if (focus) commentNav().select.focus();
	}
}

async function commentNavigator_move(change) {
	commentNavigator_initialize();

	if (!commentNavigator_sortTypes[currentCategory].nonlinear) {
		const all = Thing_Thing.things();
		const lastNavigatedToIndex = all.indexOf(lastNavigatedTo);
		const selectedIndex = all.indexOf(selectedThing);

		if (change === 'down' && selectedIndex < lastNavigatedToIndex || change === 'up' && selectedIndex > lastNavigatedToIndex) {
			moveTo(lastNavigatedTo);
			return;
		}
	}

	const posts = await currentPosts();
	if (change === 'top') moveTo(posts[0]);else if (change === 'down') moveTo(posts[posts.indexOf(lastNavigatedTo) + 1]);else if (change === 'up') moveTo(posts[posts.indexOf(lastNavigatedTo) - 1]);
}

function moveTo(thing) {
	if (!thing) return;

	lastNavigatedTo = thing;

	selectedEntry_select(thing, { scrollStyle: 'top' }, true);
}
// CONCATENATED MODULE: ./lib/modules/easterEgg.js






const easterEgg_module = new Module('easterEgg');

easterEgg_module.moduleName = 'easterEggName';
easterEgg_module.category = 'coreCategory';
easterEgg_module.description = 'easterEggDesc';
easterEgg_module.hidden = true;

let konami;

easterEgg_module.go = () => {
	konami = createKonami(() => {
		const $baconBit = $('<div>', { id: 'baconBit' }).appendTo(document.body);
		notifications_showNotification({
			header: 'RES Easter Eggies!',
			message: 'Mmm, bacon!',
			moduleID: easterEgg_module.moduleID,
			notificationID: 'konami'
		});
		setTimeout(() => $baconBit.addClass('makeitrain'), 500);
	});
};

function konamiActive() {
	return !!konami && konami.almostThere;
}

function createKonami(callback) {
	const konami = {
		input: '',
		pattern: '38384040373937396665',
		almostThere: false,
		prepattern: '383840403739373966',
		load: () => {
			document.addEventListener('keydown', event => {
				konami.input += event.keyCode;

				if (konami.input.length > konami.pattern.length) {
					konami.input = konami.input.substr(konami.input.length - konami.pattern.length);
				}

				if (konami.input === konami.pattern) {
					konami.code();
					konami.input = '';
					event.preventDefault();
				} else if (konami.input === konami.prepattern || konami.input.substr(2, konami.input.length) === konami.prepattern) {
					konami.almostThere = true;

					setTimeout(() => {
						konami.almostThere = false;
						konami.input = '';
					}, 2000);
				}
			}, false);
		},
		code: () => {}
	};

	if (typeof callback === 'function') {
		konami.code = callback;
		konami.load();
	}

	return konami;
}
// EXTERNAL MODULE: ./node_modules/lodash/fp/slice.js
var slice = __webpack_require__(263);
var slice_default = /*#__PURE__*/__webpack_require__.n(slice);

// EXTERNAL MODULE: ./node_modules/lodash/fp/mapValues.js
var fp_mapValues = __webpack_require__(262);
var fp_mapValues_default = /*#__PURE__*/__webpack_require__.n(fp_mapValues);

// EXTERNAL MODULE: ./node_modules/lodash/difference.js
var difference = __webpack_require__(31);
var difference_default = /*#__PURE__*/__webpack_require__.n(difference);

// EXTERNAL MODULE: ./node_modules/lodash/zip.js
var lodash_zip = __webpack_require__(261);
var zip_default = /*#__PURE__*/__webpack_require__.n(lodash_zip);

// EXTERNAL MODULE: ./node_modules/lodash/cloneDeep.js
var cloneDeep = __webpack_require__(60);
var cloneDeep_default = /*#__PURE__*/__webpack_require__.n(cloneDeep);

// EXTERNAL MODULE: ./node_modules/lodash/merge.js
var merge = __webpack_require__(260);
var merge_default = /*#__PURE__*/__webpack_require__.n(merge);

// CONCATENATED MODULE: ./lib/modules/filteReddit/Filter.js








class Filter_Filter {

	constructor(id, baseCase, conditions, state, undeletable = false) {
		this.refreshThing = thing => {
			if (this.parent) this.parent.refreshThing(thing, this);
		};

		this.matches = fastAsync(function* (thing) {
			const result = yield this.case.evaluate(thing);
			return this.state === !result;
		});

		this.id = id;
		this.baseCase = baseCase;
		this.state = state;
		this.setCase(baseCase.fromConditions(conditions));
		this.undeletable = undeletable;
	}

	createElement() {}

	setParent(parent) {
		this.parent = parent;
	}

	getStateText(state = this.state, cased = this.case) {
		return state === false ? cased.falseText || ` ${this.baseCase.text.toLowerCase()}` : cased.trueText || this.baseCase.text.toLowerCase();
	}

	getSaveValues() {
		if (this.baseCase.variant === 'basic') {
			return { type: this.baseCase.type, state: this.state, conditions: this.case.conditions };
		} else {
			return { type: this.baseCase.type, state: this.state };
		}
	}

	clear() {
		if (this.undeletable) {
			this.update(null, null);
		} else {
			this.state = null;
			if (this.parent) this.parent.removeFilter(this);
		}
	}

	setCase(newCase) {
		this.case = newCase;
		if (this.state !== null) this.case.observe(this);
	}

	update(state, conditions, describeOnly = false) {
		const cased = typeof conditions === 'undefined' ? this.case : this.baseCase.fromConditions(conditions);

		if (describeOnly) {
			cased.validate();
			return `Show only posts which matches "${this.getStateText(state, cased)}"`;
		}

		if (state !== this.state || this.case !== cased) {
			this.state = state;
			this.setCase(cased);
			if (this.parent) this.updatePromise = Promise.all(this.parent.refreshAll(this));
			if (this.parent) this.parent.save();
		}
	}

	async updateByInputConstruction({
		criterion,
		clearFilter,
		reverseActive,
		fromSelected
	}, describeOnly = false) {
		if (clearFilter) {
			if (describeOnly) return 'Clear filter';
			return this.clear();
		}

		let state, conditions;

		if (fromSelected) {
			({ state, conditions } = await this.baseCase.getSelectedEntryValue());
		} else {
			conditions = this.baseCase.criterionToConditions(criterion);
			state = this.state;
		}

		state = reverseActive ? new Map([[false, true], [null, false], [true, false]]).get(state) : new Map([[false, false], [null, true], [true, true]]).get(state);

		return this.update(state, conditions, describeOnly);
	}

	showThingFilterReason(thing) {
		thing.element.setAttribute('filter-reason', this.getStateText(!this.state));

		$('<span>', {
			class: 'res-filter-remove-entry',
			title: JSON.stringify(this.case.conditions, null, '  '),
			click: () => {
				this.update(null);this.refreshThing(thing);
			}
		}).prependTo(thing.element);
	}

	clearThingFilterReason(thing) {
		thing.element.removeAttribute('filter-reason');
		$(thing.element).find('> .res-filter-remove-entry').remove();
	}
}
// CONCATENATED MODULE: ./lib/modules/filteReddit/ExternalFilter.js








class ExternalFilter_ExternalFilter extends Filter_Filter {
	createElement() {
		this.element = string_namespaceObject.html`
			<div class="res-filterline-external-filter" type="${this.baseCase.type}">
				${string_namespaceObject.safe(makeUrlHashLink(filteReddit_module.moduleID, this.baseCase.type, ' ', 'gearIcon'))}
				<div>${this.baseCase.type}</div>
			</div>
		`;
		this.element.appendChild(createElement_namespaceObject.toggleButton(state => {
			this.update(state ? false : null);
		}, null, this.state === false, '', ''));
	}

	async showThingFilterReason(thing) {
		thing.element.setAttribute('filter-reason', `specified by filter ${this.baseCase.type}`);

		if (!Array.isArray(this.case.conditions.of)) throw new Error('Must be a group case');
		const entry = await asyncFind(this.case.conditions.of, v => this.baseCase.fromConditions(v).evaluate(thing));

		$('<span>', {
			class: 'res-filter-remove-entry',
			title: JSON.stringify(entry, null, '  '),
			click: () => {
				removeExternalFilterEntry(this.baseCase.type, entry);
				this.update(this.state, null, false);
			}
		}).prependTo(thing.element);
	}
}
// CONCATENATED MODULE: ./lib/modules/filteReddit/LineFilter.js













class LineFilter_LineFilter extends Filter_Filter {
	constructor(...args) {
		var _temp;

		return _temp = super(...args), this.getBuilder = memoize_default()((filterline, card) => {
			const builderCases = getByContext(filterline.thingType);

			let lastConditions = this.case.conditions;

			if (this.baseCase.variant === 'ondemand') {
				Object.assign(builderCases, getByContext('browse'));

				lastConditions = getCustomFilter(this.baseCase.defaultConditions).body;
			}

			const $builder = drawBuilderBlock(lastConditions, builderCases);

			if (this.baseCase.variant === 'ondemand' || this.baseCase === cases_Group) {
				makeBuilderBlockSortable($builder);
			} else {
				$builder.find('.builderControls, .addBuilderBlock').remove();
			}

			let lastFocus;

			const $builderBlock = $builder.find('> .builderBlock');
			$builderBlock.on('change input', frameThrottle(() => {
				const conditions = readBuilderBlock($builderBlock, builderCases);
				if (!isEqual_default()(lastConditions, conditions)) {
					lastConditions = conditions;
					this.update(this.state, conditions);
					lastFocus = $builder.get(0).contains(document.activeElement) && document.activeElement;
					this.populateHover(card);
					if (lastFocus) lastFocus.focus();
				}
			}));

			return {
				getConditions: () => lastConditions,
				get builder() {
					return $builder.get(0);
				},
				isCaseChanged: () => !isEqual_default()(this.initialConditions, lastConditions)
			};
		}), _temp;
	}

	update(state, conditions, describeOnly) {
		if (this.baseCase.variant === 'ondemand') {
			cases_remove(this.baseCase.type);
			const customFilter = getCustomFilter(this.baseCase.defaultConditions);
			updateCustomFilter(customFilter, conditions);
			this.baseCase = addOndemandCase(customFilter, true);
			conditions = null;
		}

		const message = super.update(state, conditions, describeOnly);
		if (this.element) this.refreshElement();
		return message;
	}

	setInitialConditions() {
		this.initialConditions = cloneDeep_default()(this.baseCase.variant === 'ondemand' ? getCustomFilter(this.baseCase.defaultConditions).body : this.case.conditions);
	}

	setParent(parent) {
		super.setParent(parent);
		this.setInitialConditions();
		this.getBuilder.cache.clear();
	}

	createElement() {
		this.element = string_namespaceObject.html`
			<div class="res-filterline-filter" type="${this.baseCase.type}">
				<div class="res-filterline-filter-name"></div>
			</div>
		`;
		this.inner = this.element.querySelector('.res-filterline-filter-name');
		this.refreshElement();

		this.element.addEventListener('click', () => {
			this.update(this.getNextState());
		});

		this.element.addEventListener('contextmenu', e => {
			this.clear();
			e.preventDefault();
		});

		this.element.addEventListener('mouseenter', () => this.showInfocard());
		this.element.addEventListener('click', () => this.showInfocard());
		this.element.addEventListener('contextmenu', () => this.showInfocard());
	}

	showInfocard(immediately = false) {
		const card = infocard('filterline-filter');
		card.target(this.element).options({ width: 570, openDelay: card.visible || immediately ? 0 : 700, pin: pin.bottom }).populateWith(this.populateHover.bind(this)).begin();
	}

	refreshElement() {
		this.inner.setAttribute('name', this.getStateText());
		this.element.classList.toggle('res-filterline-filter-active', this.state !== null);
	}

	getNextState() {
		if (this.state === null) return true;
		if (this.state === true) return false;
		if (this.state === false) return null;
	}

	async populateHover(card) {
		const { parent: filterline } = this;
		if (!filterline) throw new Error('Filter not attached');

		const redraw = () => this.populateHover(card);

		const head = string_namespaceObject.html`
			<div class="res-filterline-filter-hover-preamble">
				<span>Filter ${this.baseCase.text.toLowerCase()}</span>
				<div class="res-filterline-filter-hover-group" group="case-actions">
					<div class="res-filterline-filter-hover-buttons"></div>
				</div>
			</div>
		`;

		const body = string_namespaceObject.html`
			<div class="res-filterline-filter-hover">
				${this.state !== null ? `${this.state ? 'Showing' : 'Hiding'} posts where:` : 'Match posts where:'}
				<div class="builderItem"></div>
				<div class="res-filterline-filter-hover-notice">${this.baseCase.variant === 'ondemand' && 'By adding browse context conditions such as "Date", "Logged in user", and "Custom toggle", you control where and when this filter is available.'}</div>
				<div class="res-filterline-filter-hover-group" group="state-actions">
					Modify state:
					<div class="res-filterline-filter-hover-buttons"></div>
				</div>
		`;

		card.populate([head, body]);

		const { builder, getConditions, isCaseChanged } = this.getBuilder(filterline, card);
		body.querySelector('.builderItem').appendChild(builder);

		setTimeout(() => {
			if (!builder.contains(document.activeElement)) {
				const e = [...builder.querySelectorAll('input'), ...builder.querySelectorAll('select')].find(e => e.offsetParent);
				if (e) e.focus();
			}
		});

		function addButton(container, text, groupName, action) {
			const button = string_namespaceObject.html`<button class="res-filterline-filter-hover-button" action="${action}">${text}</button>`;
			const group = downcast(container.querySelector(`[group=${groupName}]`), HTMLElement);
			group.hidden = false;
			const buttons = downcast(group.querySelector('.res-filterline-filter-hover-buttons'), HTMLElement);
			buttons.appendChild(button);
			return waitForEvent(button, 'click');
		}

		const update = conditions => {
			if (this.baseCase.variant === 'basic') {
				this.update(this.state, conditions);
			} else if (this.baseCase.variant === 'ondemand') {
				const { name } = conditions;
				if (!name) throw new Error('ondemand requires name');
				this.update(this.state, conditions);
			}

			this.getBuilder.cache.clear();
		};

		if (this.baseCase.variant === 'basic' && this.baseCase === cases_Group) {
			addButton(head, 'To on-demand', 'case-actions', 'to-ondemand').then(() => {
				const { name } = getConditions();
				const conditions = [cases_getConditions('currentLocation'), getConditions()];
				const customFilter = addCustomFilter({
					body: resolveGroup(getGroup('all', conditions, name), false, true),
					ondemand: true
				});
				this.baseCase = addOndemandCase(customFilter, true);
				update(customFilter.body);
			}).then(redraw);
		}

		if (isCaseChanged()) {
			addButton(head, 'Reset change', 'case-actions', 'reset').then(() => {
				update(this.initialConditions);
			}).then(redraw);
		}

		if (this.baseCase.variant === 'ondemand' || this.baseCase === cases_Group) {
			addButton(head, 'Rename', 'case-actions', 'rename').then(() => {
				const name = window.prompt('New filter name:', this.case.trueText);
				if (name) update(Object.assign({}, getConditions(), { name }));
				this.setInitialConditions();
			}).then(redraw);
		}

		addButton(head, this.undeletable ? 'Clear' : 'Remove', 'case-actions', 'clear').then(() => {
			this.clear();
		}).then(() => {
			card.close();
		});

		if (this.state !== null) addButton(body, 'Do nothing', 'state-actions', 'state-null').then(() => {
			this.update(null);
		}).then(redraw);
		if (this.state !== false) addButton(body, 'Hide matching posts', 'state-actions', 'state-false').then(() => {
			this.update(false);
		}).then(redraw);
		if (this.state !== true) addButton(body, 'Show only matching posts', 'state-actions', 'state-true').then(() => {
			this.update(true);
		}).then(redraw);

		if (modules_isRunning(commentNavigator_namespaceObject)) {
			addButton(body, 'Navigate by', 'state-actions', 'navigate-by').then(() => {
				this.update(null);
				updateCustomConditions(getConditions());
				setCategory('custom');
				card.close();
			});
		}

		await this.updatePromise;

		const uncertainMatches = filterline.getFiltered().filter(v => v.filter !== this).filter(v => filterline.getFiltersToTest(v.filter).includes(this));

		const allMatching = filterline.getFiltered(this).concat(this.state === null && [] || (await asyncFilter(uncertainMatches, async thing => await this.matches(thing))));

		if (allMatching.length) {
			body.appendChild(string_namespaceObject.html`
				<div class="res-filterline-filter-hover-group" group="hidden-actions" hidden>
					For posts (${allMatching.length}) hidden by filter:
					<div class="res-filterline-filter-hover-buttons"></div>
				</div>
			`);

			addButton(body, 'Highlight', 'hidden-actions', 'highlight').then(() => {
				for (const e of document.querySelectorAll('.res-filterline-highlight-match')) e.classList.remove('res-filterline-highlight-match');
				for (const thing of allMatching) thing.element.classList.add('res-filterline-highlight-match');
			});

			if (filterline.thingType === 'post') {
				addButton(body, 'Permanently hide', 'hidden-actions', 'native-hide').then(() => {
					filterline.hide(allMatching);
				});
			}
		}

		return [];
	}
}
// CONCATENATED MODULE: ./lib/modules/filteReddit/Filterline.js

























class Filterline_Filterline {

	constructor(storage, thingType) {
		this.things = new Set();
		this.filters = [];
		this.sortedFilters = [];
		this.inertFilters = [];
		this.hiddenThings = [];
		this.showFilterReason = false;
		this.save = idleThrottle(async () => {
			const filters = [...this.filters, ...this.inertFilters].reduce((acc, v) => {
				acc[v.id] = v.getSaveValues();
				return acc;
			}, {});
			await this.storage.deletePath('filters');
			await this.storage.patch({ filters });
		});
		this.refreshThing = keyedMutex(fastAsync(function* (thing, invokedByFilter) {
			const filtersToTest = this.getFiltersToTest(thing.filter, invokedByFilter);
			if (!filtersToTest.length) return;

			const matchedFilter = yield asyncFind(filtersToTest, v => v.state !== null && v.matches(thing));

			if (thing.filter !== matchedFilter) {
				if (this.showFilterReason) this.refreshThingFilterReason(thing, thing.filter, matchedFilter);
				thing.setFilter(matchedFilter);

				if (matchedFilter && selectedThing === thing) {
					frameThrottledMove('closestVisible', { scrollStyle: 'none' }, () => {});
				}

				showImages_refresh();
				this.checkEmptyState();
			}
		}));

		this.checkEmptyState = (() => {
			const showNotification = debounce_default()(once_default()(() => {
				const info = $('<p>').text(i18n('filteRedditEmptyNotificationInfo'));
				const toggle = $('<button>').text(i18n('filteRedditEmptyNotificationToggleShowReason')).click(() => {
					this.toggleShowFilterReason();
				});

				notifications_showNotification({
					moduleID: filteReddit_module.moduleID,
					notificationID: 'everyThingHidden',
					header: i18n('filteRedditEmptyNotificationHeader'),
					message: $('<div>').append(info).append(toggle).get(0),
					closeDelay: Infinity
				});
			}), 4000);

			return throttle_default()(() => {
				if (this.getFiltered().length !== this.things.size) {
					showNotification.cancel();
				} else if (!this.showFilterReason) {
					showNotification();
				}
			}, 100, { leading: false });
		})();

		this.storage = storage;
		this.thingType = thingType;
	}

	isInitialized() {
		return !!this.things.size;
	}

	createElement() {
		const element = this.element = string_namespaceObject.html`
			<div class="res-filterline">
				<div class="res-filterline-preamble"></div>
				<div class="res-filterline-filters">
					<input type="checkbox" checked class="res-filterline-toggle-powered" title="Stop filtering temporarily"></input>
				</div>
			</div>
		`;
		this.preamble = element.querySelector('.res-filterline-preamble');
		this.filterContainer = element.querySelector('.res-filterline-filters');

		this.addFilterElements(this.filters);

		waitForEvent(this.preamble, 'mouseenter', 'click').then(() => this.createDropdown());

		this.poweredElement = downcast(element.querySelector('.res-filterline-toggle-powered'), HTMLInputElement);
		this.poweredElement.addEventListener('change', () => {
			document.body.classList.toggle('res-filters-disabled', !this.poweredElement.checked);
		});
	}

	addFilterElements(filters) {
		for (const filter of filters) {
			if (filter instanceof ExternalFilter_ExternalFilter) continue;
			filter.createElement();
			this.filterContainer.appendChild(filter.element);
		}
	}

	getFiltersOfCase(caseClass) {
		return this.filters.filter(v => v.baseCase === caseClass);
	}

	getPickable() {
		return Object.values(getByContext(this.thingType, false)).filter(v => !v.disabled && v.variant !== 'external');
	}

	createDropdown() {
		const element = string_namespaceObject.html`
			<div class="res-filterline-dropdown">
				<div class="res-filterline-dropdown-other"></div>
				<div class="res-filterline-dropdown-toggles">
					<div class="res-filterline-show-reason">
						<label>
							<input type="checkbox">
							<span>Show filter-reason</span>
						</label>
					</div>
				</div>
				<div class="res-filterline-show-help">
					Usage information
				</div>
			</div>
		`;

		this.preamble.append(element);

		this.preamble.addEventListener('mouseenter', () => {
			infocard('filterline-filter').close();
		});

		function addDetails(summary, className, ...elements) {
			const e = string_namespaceObject.html`<details class="${className}"><summary>${summary}</summary></details>`;
			e.append(...elements);
			element.querySelector('.res-filterline-dropdown-other').append(e);
		}

		addDetails('Modify external filters', 'res-filterline-external', ...this.filters.filter(filter => filter instanceof ExternalFilter_ExternalFilter).map(filter => {
			filter.createElement();return filter.element;
		}));

		const dp = groupBy_default()(without_default()(this.getPickable(), cases_Group), v => v.variant);
		for (const [name, caseClasses] of Object.entries(dp)) {
			addDetails(`New ${name} filter`, `res-filterline-new-${name}`, ...caseClasses.sort((a, b) => a.type.localeCompare(b.type)).map(caseClass => this.createNewFilterElement(caseClass)));
		}

		const _getAsConditions = this.getAsConditions.bind(this);
		addDetails('New complex filter', 'res-filterline-new-group', this.createNewFilterElement(cases_Group, 'Copy active filters', { get conditions() {
				return _getAsConditions();
			} }), ...cases_Group.fields[0].options.map(op => this.createNewFilterElement(cases_Group, `Matches ${op}`, { conditions: { op, of: [] } })));

		addDetails('Use as default', 'res-filterline-set-default', ...defaultFilters.map(({ type, text }) => {
			const e = string_namespaceObject.html`<div class="res-filterline-dropdown-action">${text}</div>`;
			e.addEventListener('click', () => saveFilterlineStateAsDefault(type));
			return e;
		}));

		const showFilterReasonCheckbox = downcast(element.querySelector('.res-filterline-show-reason input'), HTMLInputElement);
		showFilterReasonCheckbox.addEventListener('change', () => {
			this.toggleShowFilterReason(showFilterReasonCheckbox.checked);
		});

		if (this.thingType === 'post' && loggedInUser()) {
			const hideFiltered = string_namespaceObject.html`
				<div class="res-filterline-hide-filtered">
					<label>
						<input type="checkbox" ${this.hiddenThings.length && 'checked'}>
						<span>Hide currently filtered</span>
					</label>
				</div>
			`;
			const checkbox = this.hideCheckbox = downcast(hideFiltered.querySelector('input'), HTMLInputElement);
			checkbox.addEventListener('change', async () => {
				checkbox.disabled = true;
				await (checkbox.checked ? this.hide() : this.unhide());
				checkbox.disabled = false;
			});
			element.querySelector('.res-filterline-dropdown-toggles').append(hideFiltered);
		}

		downcast(element.querySelector('.res-filterline-show-help'), HTMLElement).addEventListener('click', () => {
			showFeatureTip('filterlineVisible');
		});
	}

	createNewFilterElement(caseClass, text = caseClass.text, newOpts) {
		let fromSelected = false;

		const element = string_namespaceObject.html`<div class="res-filterline-dropdown-action res-filterline-filter-new" type="${caseClass.type}">${text}</div>`;
		element.addEventListener('click', () => {
			const existing = caseClass.unique && this.getFiltersOfCase(caseClass)[0];
			let filter;
			if (existing) {
				if (!(existing instanceof LineFilter_LineFilter)) throw new Error();
				filter = existing;
			} else {
				filter = downcast(this.createFilterFromType(caseClass.type, Object.assign({ add: true }, newOpts)), LineFilter_LineFilter);
			}

			filter.updateByInputConstruction({ fromSelected });
			filter.showInfocard(true);
		});

		if (caseClass.thingToCriterion || !caseClass.defaultConditions) {
			const c = string_namespaceObject.html`<div class="res-filterline-filter-new-from-selected" title="From selected entry"></div>`;
			c.addEventListener('click', () => {
				fromSelected = true;
				setTimeout(() => {
					fromSelected = false;
				});
			});
			element.append(c);
		}

		return element;
	}

	getFiltered(byFilter) {
		return Array.from(this.things).filter(thing => byFilter ? thing.filter === byFilter : thing.filter);
	}

	async hide(things = this.getFiltered()) {
		await things.map(thing => thingHide_hide(thing));

		this.hiddenThings.push(...things);

		if (this.hideCheckbox) this.hideCheckbox.checked = !!this.hiddenThings.length;

		notifications_showNotification({
			moduleID: filteReddit_module.moduleID,
			notificationID: 'hideThings',
			message: `Reddit has now hidden ${things.length} things. Undo by unchecking the checkbox. If you want to hide additional things, you need to reload this page.`
		});
	}

	async unhide(things = [...this.hiddenThings]) {
		await things.map(thing => unhide(thing));

		pull_default()(this.hiddenThings, ...things);

		if (this.hideCheckbox) this.hideCheckbox.checked = !!this.hiddenThings.length;

		notifications_showNotification({
			moduleID: filteReddit_module.moduleID,
			notificationID: 'unhideThings',
			message: `${things.length} things are no longer hidden.`
		});
	}

	getAsConditions() {
		const extracted = filterMap(this.filters, v => typeof v.state === 'boolean' && v instanceof LineFilter_LineFilter && [v] || undefined);
		return resolveGroup(getGroup('all', extracted.map(v => v.state ? v.case.conditions : getGroup('none', [v.case.conditions]))), false, true);
	}

	restoreState(filters) {
		for (const [id, { type, state, criterion, conditions, undeletable }] of Object.entries(filters)) {
			try {
				this.createFilterFromType(type, { add: true, id, state, criterion, conditions, undeletable, save: false });
			} catch (e) {
				console.error('Could not create filter', type, 'deleting', e);
				this.storage.deletePath('filters', id);
			}
		}
	}

	getCLI() {
		const deconstruct = val => {
			const [, modifiers, key, criterion] = val.match(/^([^\w]*)(\w*)(.*)/);
			return {
				key,
				criterion: criterion.trim(),
				clearFilter: !!modifiers.match('/'),
				reverseActive: !!modifiers.match('!'),
				asNewFilter: !!modifiers.match('\\+'),
				fromSelected: !!modifiers.match('=')
			};
		};

		const findMatchingCases = val => this.getPickable().filter(({ type }) => type.toLowerCase().match(val.toLowerCase())).sort((a, b) => a.variant.localeCompare(b.variant) || a.type.localeCompare(b.type));

		let filter;

		async function getTip(val) {
			const deconstructed = deconstruct(val);
			const { key, asNewFilter } = deconstructed;
			const bestMatch = key && lodash_sortBy_default()(findMatchingCases(key), ({ type }) => type.toLowerCase().indexOf(key.toLowerCase()))[0];

			let message;

			if (bestMatch) {
				try {
					const lastFilter = last_default()(this.getFiltersOfCase(bestMatch));
					filter = lastFilter && !asNewFilter ? lastFilter : this.createFilterFromType(bestMatch.type);

					const actionDescription = await filter.updateByInputConstruction(deconstructed, true);

					message = `${filter.parent ? `Modify "${filter.getStateText()}"` : 'New filter'}: ${actionDescription}`;
				} catch (e) {
					message = `Error: ${e.message}`;
				}
			} else {
				filter = null;
				message = 'No filter selected.';
			}

			return ['<pre>', 'Syntax: [modifiers] filterName [criterion]', '', message, '', 'Filters:', ...findMatchingCases('').map(v => ` ${bestMatch === v ? `<b>${v.type}</b>` : v.type} ${v.pattern}`), '', 'Modifiers:', ' /  clear the filter', ' !  reverse the active state', ' +  create as new filter', ' =  use the currently selected post\'s data as criterion', '', 'Examples:', ' =postAfter    filter posts older than selected', ' +=!postAfter  new filter, filter posts younger than selected', '</pre>'].join('\n');
		}

		function executeCommand(val) {
			if (!filter) return;
			if (!filter.parent) this.addFilter(filter);
			filter.updateByInputConstruction(deconstruct(val));
			filter = null;
		}

		return { getTip: getTip.bind(this), executeCommand: executeCommand.bind(this) };
	}

	createFilterFromType(type, {
		add,
		criterion,
		conditions,
		id = `~${performance.timing.navigationStart + performance.now()}`,
		save = true,
		state = null,
		undeletable
	} = {}) {
		const caseClass = cases_get(type);
		if (caseClass.unique && this.getFiltersOfCase(caseClass).length) throw new Error('Cannot create new instances of unique filters');

		if (!conditions && typeof criterion !== 'undefined') {
			conditions = caseClass.criterionToConditions(criterion);
		}

		const filter = new (caseClass.variant === 'external' ? ExternalFilter_ExternalFilter : LineFilter_LineFilter)(id, caseClass, conditions, state, undeletable);

		if (add) {
			this.addFilter(filter);
			if (save) this.save();
		}

		return filter;
	}

	addFilter(filter) {
		if (filter.baseCase === cases_Inert || filter.baseCase.disabled) {
			this.inertFilters.push(filter);
			return;
		}

		filter.setParent(this);

		this.filters.push(filter);

		if (this.isInitialized()) this.sortedFilters.push(filter);else this.sortedFilters = lodash_sortBy_default()(this.filters, ({ case: { constructor: { slow = false } } }) => slow);

		if (this.isInitialized()) this.refreshAll(filter);

		if (this.filterContainer) this.addFilterElements([filter]);
	}

	async removeFilter(filter) {
		if (filter.element) filter.element.remove();
		if (this.isInitialized()) await Promise.all(this.refreshAll(filter));
		pull_default()(this.filters, filter);
		pull_default()(this.sortedFilters, filter);
		this.save();
	}

	getActiveFilters() {
		return this.filters.filter(v => v.state !== null);
	}

	hasActiveLineFilters() {
		return !!this.getActiveFilters().find(v => !(v instanceof ExternalFilter_ExternalFilter));
	}

	getFilterPosition(filter) {
		if (!filter) return -1;
		return this.sortedFilters.indexOf(filter);
	}

	getFiltersToTest(currentFilter, invokedByFilter) {
		if (!invokedByFilter) return this.sortedFilters;

		const invokedByFilterIndex = this.getFilterPosition(invokedByFilter);
		const currentFilterIndex = this.getFilterPosition(currentFilter);

		if (currentFilterIndex === -1) {
			return [invokedByFilter];
		} else if (currentFilterIndex === invokedByFilterIndex) {
			return this.sortedFilters.slice(invokedByFilterIndex);
		} else if (currentFilterIndex > invokedByFilterIndex) {
			return compact_default()([invokedByFilter, currentFilter]);
		} else {
			return [];
		}
	}

	refreshAll(invokedByFilter) {
		return Array.from(this.things).map(thing => this.refreshThing(thing, invokedByFilter));
	}

	addThing(thing) {
		this.things.add(thing);
		return this.refreshThing(thing);
	}

	toggleShowFilterReason(newState = !this.showFilterReason) {
		this.showFilterReason = newState;
		this.refreshAllFilterReasons();
		document.body.classList.toggle('res-show-filter-reason', this.showFilterReason);
	}

	refreshThingFilterReason(thing, previousMatch, currentMatch) {
		if (previousMatch) previousMatch.clearThingFilterReason(thing);
		if (currentMatch) currentMatch.clearThingFilterReason(thing);
		if (currentMatch && this.showFilterReason) currentMatch.showThingFilterReason(thing);
	}

	refreshAllFilterReasons() {
		for (const thing of this.things) this.refreshThingFilterReason(thing, undefined, thing.filter);
	}
}
// CONCATENATED MODULE: ./lib/modules/filteReddit.js

































const filteReddit_module = new Module('filteReddit');

filteReddit_module.moduleName = 'filteRedditName';
filteReddit_module.category = 'subredditsCategory';
filteReddit_module.description = 'filteRedditDesc';
filteReddit_module.keywords = ['filterreddit'];
filteReddit_module.options = {
	NSFWfilter: {
		type: 'boolean',
		value: false,
		description: 'filteRedditNSFWfilterDesc',
		title: 'filteRedditNSFWfilterTitle'
	},
	NSFWQuickToggle: {
		type: 'boolean',
		value: true,
		description: 'filteRedditNSFWQuickToggleDesc',
		title: 'filteRedditNSFWQuickToggleTitle',
		advanced: true
	},
	showFilterline: {
		type: 'boolean',
		value: false,
		description: 'filteRedditShowFilterlineDesc',
		title: 'filteRedditShowFilterlineTitle',
		bodyClass: true
	},
	excludeOwnPosts: {
		type: 'boolean',
		value: true,
		description: 'filteRedditExcludeOwnPostsDesc',
		title: 'filteRedditExcludeOwnPostsTitle'
	},
	excludeModqueue: {
		type: 'boolean',
		value: true,
		description: 'filteRedditExcludeModqueueDesc',
		title: 'filteRedditExcludeModqueueTitle'
	},
	excludeUserPages: {
		type: 'boolean',
		value: false,
		description: 'filteRedditExcludeUserPagesDesc',
		title: 'filteRedditExcludeUserPagesTitle'
	},
	keywords: {
		type: 'table',
		addRowText: 'filteRedditAddFilter',
		fields: [{
			key: 'keyword',
			name: 'filteRedditKeyword',
			type: 'text'
		}, {
			key: 'applyTo',
			name: 'filteRedditApplyTo',
			type: 'enum',
			values: [{
				name: 'filteRedditEverywhere',
				value: 'everywhere'
			}, {
				name: 'filteRedditEverywhereBut',
				value: 'exclude'
			}, {
				name: 'filteRedditOnlyOn',
				value: 'include'
			}],
			value: 'everywhere'
		}, {
			key: 'subreddits',
			name: 'subreddits',
			type: 'list',
			listType: 'subreddits'
		}, {
			key: 'unlessKeyword',
			name: 'unlessKeyword',
			type: 'text'
		}],
		value: [],
		description: 'filteRedditKeywordsDesc',
		title: 'filteRedditKeywordsTitle'
	},
	subreddits: {
		type: 'table',
		addRowText: 'filteRedditAddFilter',
		fields: [{
			key: 'subreddit',
			name: 'filteRedditSubredditsSubreddits',
			type: 'text'
		}],
		value: [],
		description: 'filteRedditSubredditsDesc',
		title: 'filteRedditSubredditsTitle',
		onChange() {
			if (filteReddit_module.options.useRedditFilters.value) {
				reconcileNativeFilters();
			}
		}
	},
	filterSubredditsFrom: {
		type: 'enum',
		value: 'everywhere-except-subreddit',
		values: [{
			name: 'filteRedditFilterSubredditsEverywhereButSubreddit',
			value: 'everywhere-except-subreddit'
		}, {
			name: 'filteRedditEverywhere',
			value: 'everywhere'
		}, {
			name: 'filteRedditFilterSubredditsAllPopularAndDomain',
			value: 'legacy'
		}],
		description: 'filteRedditFilterSubredditsFromDesc',
		title: 'filteRedditFilterSubredditsFromTitle'
	},
	useRedditFilters: {
		type: 'boolean',
		value: false,
		description: 'filteRedditUseRedditFiltersDesc',
		title: 'filteRedditUseRedditFiltersTitle',
		onChange() {
			if (filteReddit_module.options.useRedditFilters.value) {
				reconcileNativeFilters();
			}
		}
	},
	forceSyncFilters: {
		type: 'button',
		text: 'filteRedditForceSyncFiltersLabel',
		description: 'filteRedditForceSyncFiltersDesc',
		title: 'filteRedditForceSyncFiltersTitle',
		callback() {
			reconcileNativeFilters({ warnNotLoggedIn: true });
		}
	},
	domains: {
		type: 'table',
		addRowText: 'filteRedditAddFilter',
		fields: [{
			key: 'keyword',
			name: 'filteRedditKeyword',
			type: 'text'
		}, {
			key: 'applyTo',
			name: 'filteRedditApplyTo',
			type: 'enum',
			values: [{
				name: 'filteRedditEverywhere',
				value: 'everywhere'
			}, {
				name: 'filteRedditEverywhereBut',
				value: 'exclude'
			}, {
				name: 'filteRedditOnlyOn',
				value: 'include'
			}],
			value: 'everywhere'
		}, {
			key: 'subreddits',
			name: 'filteRedditSubreddits',
			type: 'list',
			listType: 'subreddits'
		}],
		value: [],
		description: 'filteRedditDomainsDesc',
		title: 'filteRedditDomainsTitle'
	},
	flair: {
		type: 'table',
		addRowText: 'filteRedditAddFilter',
		fields: [{
			key: 'keyword',
			name: 'filteRedditKeyword',
			type: 'text'
		}, {
			key: 'applyTo',
			name: 'filteRedditApplyTo',
			type: 'enum',
			values: [{
				name: 'filteRedditEverywhere',
				value: 'everywhere'
			}, {
				name: 'filteRedditEverywhereBut',
				value: 'exclude'
			}, {
				name: 'filteRedditOnlyOn',
				value: 'include'
			}],
			value: 'everywhere'
		}, {
			key: 'subreddits',
			name: 'filteRedditSubreddits',
			type: 'list',
			listType: 'subreddits'
		}],
		value: [],
		description: 'filteRedditFlairDesc',
		title: 'filteRedditFlairTitle'
	},
	allowNSFW: {
		type: 'table',
		addRowText: 'filteRedditAddSubreddits',
		description: 'filteRedditAllowNSFWDesc',
		title: 'filteRedditAllowNSFWTitle',
		fields: [{
			key: 'subreddits',
			name: 'filteRedditSubreddits',
			type: 'list',
			listType: 'subreddits'
		}, {
			key: 'where',
			name: 'filteRedditAllowNSFWWhere',
			type: 'enum',
			values: [{
				name: 'filteRedditEverywhere',
				value: 'everywhere'
			}, {
				name: 'filteRedditAllowNSFWWhenBrowsingSubreddit',
				value: 'visit'
			}],
			value: 'everywhere'
		}],
		value: []
	},
	customFiltersP: {
		type: 'builder',
		advanced: true,
		description: 'filteRedditCustomFiltersDesc',
		title: 'filteRedditCustomFiltersPTitle',
		value: [],
		addItemText: 'filteRedditAddCustomFilter',
		defaultTemplate() {
			return {
				note: '',
				ver: 2,
				body: cases_getConditions('group'),
				ondemand: false
			};
		},
		get cases() {
			populatePrimitives();return Object.assign({}, getByContext('post'), getByContext('browse'));
		}
	},
	customFiltersC: {
		type: 'builder',
		advanced: true,
		description: 'filteRedditCustomFiltersDesc',
		title: 'filteRedditCustomFiltersCTitle',
		value: [],
		addItemText: 'filteRedditAddCustomFilter',
		defaultTemplate() {
			return {
				note: '',
				ver: 2,
				body: cases_getConditions('group'),
				ondemand: false
			};
		},
		get cases() {
			populatePrimitives();return Object.assign({}, getByContext('comment'), getByContext('browse'));
		}
	}
};

filteReddit_module.include = ['linklist', 'modqueue', 'profile', 'comments', 'commentsLinklist', 'search'];
filteReddit_module.exclude = [/^\/over18\b/i];

filteReddit_module.shouldRun = () => !(filteReddit_module.options.excludeModqueue.value && isPageType('modqueue') || filteReddit_module.options.excludeUserPages.value && isPageType('profile'));

const featureTips = {
	filterline: {
		message: `
RES allows you to easily apply complex filters to post listings and comments. To toggle Filterline, click on the tab.
	`,
		title: 'Filterline',
		position: 6,
		quiet: true
	},
	filterlineVisible: {
		message: snudown_es_markdown(`
* Click once on a filter to enable it (e.g. clicking \`expando\` will only show posts with embedded media).
* Click again to only show posts which do not not match.
* A third click makes the filter inactive.
* To clear a filter, right-click on it.
* **Hover** on it to modify conditions, highlight or permanently hide all matches.

To find more filters and options, hover on icon to the left.

You can use the currently selected post as a basis for a new filter. To do this, click on **=** to the right of the filter name.

**Complex filter** creates filters which matches when \`none\`, \`one\`, \`any\`, or \`all\` of the subfilters matches. Click \`To on-demand\` to make these filters available on other pages.

**Use as default** lets you store the current filters to be used on other pages.

To see why a post is hidden, open dropdown and check **Show filter-reason**. This also gives you the opportunity to remove an external filter so that you don't have to look for it in the settings console.

You can use the command line to manipulate Filterline. Enter it by pressing the key \`f\`.
		`),
		title: 'Filterline  how to use it',
		position: 7,
		options: [{
			moduleID: 'filteReddit',
			key: 'showFilterline'
		}]
	}
};

const pageID = fullLocation();
const filterlineStorage = storage_namespaceObject.wrap(`filterline.${pageID}`, {});
const filteReddit_thingType = isPageType('comments', 'commentsLinklist') ? 'comment' : 'post';
const customFilterVariant = filteReddit_thingType === 'post' ? 'customFiltersP' : 'customFiltersC';

const defaultFilters = [];
if (filteReddit_thingType === 'comment') {
	if (currentSubreddit()) {
		defaultFilters.push({
			type: 'subreddit',
			text: 'This subreddit',
			storage: storage_namespaceObject.wrap(`RESmodules.filteReddit.commentDefault-${String(currentSubreddit())}`, null)
		});
	}
	defaultFilters.push({
		type: 'everywhere',
		text: 'Everywhere',
		storage: storage_namespaceObject.wrap('RESmodules.filteReddit.commentDefault', null)
	});
} else if (filteReddit_thingType === 'post') {
	defaultFilters.push({
		type: 'everywhere',
		text: 'Everywhere',
		storage: storage_namespaceObject.wrap('RESmodules.filteReddit.postDefault', null)
	});
}

async function getDefaultFilters() {
	for (const _ref of defaultFilters) {
		const { storage } = _ref;

		const filters = await storage.get();
		if (filters) return { filters };
	}
}

const initialFilterlineState = reifyPromise((async () => Object.assign({}, ...(await Promise.resolve().then(() => Promise.all([getDefaultFilters(), filterlineStorage.get()])))))());

let nsfwToggle;

filteReddit_module.beforeLoad = fastAsync(function* () {
	updateNsfwBodyClass(filteReddit_module.options.NSFWfilter.value);

	nsfwToggle = new customToggles_Toggle('nsfwMode', i18n('nsfwSwitchToggleText'), filteReddit_module.options.NSFWfilter.value);
	nsfwToggle.onToggle(() => {
		options_set(filteReddit_module, 'NSFWfilter', nsfwToggle.enabled);
	});
	nsfwToggle.onStateChange(() => {
		updateNsfwBodyClass(nsfwToggle.enabled);
	});
	nsfwToggle.addCLI('nsfw');

	createFilterline((yield initialFilterlineState.get()));

	watchForThings(['post'], updateNsfwThingClass, { immediate: true });
	watchForThings([filteReddit_thingType], registerThing, { immediate: true });
});

filteReddit_module.go = () => {
	if (filteReddit_module.options.NSFWQuickToggle.value) {
		nsfwToggle.addMenuItem(i18n('nsfwSwitchToggleTitle'));
	}

	createFilterline().go();

	registerSubredditFilterCommand();
};

function registerThing(thing) {
	if (filteReddit_module.options.excludeOwnPosts.value && loggedInUser() && currentUserProfile() !== loggedInUser() && loggedInUser() === thing.getAuthor()) return;

	return createFilterline().filterline.addThing(thing);
}

const externalFilterSourceMap = new Map();

const createFilterline = once_default()(({
	filters: storedFilters = {},
	visible: initialVisibility = filteReddit_module.options.showFilterline.value
} = {}) => {
	populatePrimitives(['browse', filteReddit_thingType]);
	const filterline = new Filterline_Filterline(filterlineStorage, filteReddit_thingType);

	const filters = {};
	const addDefaultFilter = (type, state) => {
		filters[type] = { type, state, undeletable: true };
	};

	function addExternalFilter(type, getConditions) {
		createAdHoc(type, () => getGroup('any', getConditions()), 'external', filteReddit_thingType);
		addDefaultFilter(type, false);
	}

	function addLineDefaults(types) {
		filterMap(types, v => isUseful(v) ? [v] : undefined).forEach(v => addDefaultFilter(v, null));
	}

	filteReddit_module.options[customFilterVariant].value.filter(({ ondemand }) => ondemand).forEach(v => addOndemandCase(v));

	addExternalFilter(customFilterVariant, () => filteReddit_module.options[customFilterVariant].value.filter(v => !v.ondemand).map(v => {
		externalFilterSourceMap.set(v.body, v);
		return v.body;
	}));

	function addPostFilters() {
		addExternalFilter('keywords', () => getStringMatchConditions('keywords', 'postTitle'));
		addExternalFilter('domains', () => getStringMatchConditions('domains', 'domain', { fullMatch: false }));
		if (filteReddit_module.options.filterSubredditsFrom.value === 'everywhere' || filteReddit_module.options.filterSubredditsFrom.value === 'everywhere-except-subreddit' && !currentSubreddit() || isCurrentSubreddit('all') || isCurrentSubreddit('popular') || currentDomain() || isCurrentMultireddit('me/f/all')) {
			addExternalFilter('subreddits', () => getStringMatchConditions('subreddits', 'subreddit'));
		}
		addExternalFilter('flair', () => getStringMatchConditions('flair', 'linkFlair', { fullMatch: false }));

		addLineDefaults([!filteReddit_module.options.NSFWfilter.value && 'isNSFW', 'isSpoiler', 'isVisited', 'commentsOpened', 'hasExpando', 'score']);
	}

	function addCommentFilters() {
		addLineDefaults(['hasExpando', 'score', 'isRead']);
	}

	if (filteReddit_thingType === 'post') addPostFilters();else if (filteReddit_thingType === 'comment') addCommentFilters();

	if (storedFilters) merge_default()(filters, storedFilters);
	filterline.restoreState(filters);

	let visible = initialVisibility || filterline.hasActiveLineFilters();

	if (visible) {
		bodyClasses_namespaceObject.add('res-filteReddit-filterline-pad-until-ready');
	}

	function go() {
		const insertFilterline = once_default()(() => {
			filterline.createElement();

			if (isPageType('comments')) {
				$(filterline.element).insertBefore(document.querySelector('.comments-page .nestedlisting'));
			} else {
				$(filterline.element).insertBefore(document.querySelector('#siteTable, .search-result-listing'));
			}

			bodyClasses_namespaceObject.remove('res-filteReddit-filterline-pad-until-ready');
		});

		const filterlineTab = createElement_namespaceObject.tabMenuItem({
			text: '',
			title: 'Toggle Filterline visibility',
			className: 'res-toggle-filterline-visibility',
			checked: visible
		});

		filterlineTab.addEventListener('change', ({ detail: newVisibilityState }) => {
			toggleVisibility(newVisibilityState);
			if (visible) scrollToElement(filterline.element, null, { scrollStyle: 'legacy' });
		});

		const ensureVisible = () => {
			if (!visible) filterlineTab.click();
		};

		const { getTip, executeCommand } = filterline.getCLI();
		registerCommand(/(fl|filterline)/, 'fl - modify Filterline', (cmd, val) => getTip(val), (cmd, val) => {
			ensureVisible();executeCommand(val);
		});

		registerCommand(/fp/, 'fp - toggle filtering', () => 'Toggle filtering', () => {
			ensureVisible();filterline.poweredElement.click();
		});

		function toggleVisibility(newVisibilityState) {
			if (newVisibilityState) {
				insertFilterline();
				filterlineTab.removeAttribute('aftercontent');
				addFeatureTip('filterlineVisible', Object.assign({}, featureTips.filterlineVisible, { attachTo: filterline.element }));
			} else if (filterline.hasActiveLineFilters()) {
				filterlineTab.setAttribute('aftercontent', ' (active)');
			}

			bodyClasses_namespaceObject.toggle(newVisibilityState, 'res-filteReddit-show-filterline');

			if (visible !== newVisibilityState) {
				filterlineStorage.patch({ visible: newVisibilityState });
				visible = newVisibilityState;
			}
		}

		addFeatureTip('filterline', Object.assign({}, featureTips.filterline, {
			attachTo: filterlineTab,
			continuation: () => {
				ensureVisible();
				return 'filterlineVisible';
			}
		}));

		toggleVisibility(visible);
	}

	return { filterline, go };
});

function updateNsfwThingClass(thing) {
	if (thing.isNSFW()) {
		if (allowNSFW(thing.getSubreddit(), currentSubreddit())) {
			thing.element.classList.add('allowOver18');
		} else if (filteReddit_module.options.NSFWfilter.value) {
			if (!thing.element.classList.contains('over18')) {
				thing.element.classList.add('over18');
			}
		}
	}
}

function addOndemandCase(customFilter, forceUseful = false) {
	const conditions = resolveGroup(customFilter.body);
	externalFilterSourceMap.set(conditions, customFilter);

	let { name } = customFilter.body;
	while (!name || cases_has(name)) {
		name += randomHash();
		updateCustomFilter(customFilter, { name });
	}

	let cased;
	if (isUseful(conditions.type) || forceUseful) {
		cased = createAdHoc(name, () => conditions, 'ondemand', filteReddit_thingType);
	} else {
		cased = cases_Inert;
	}

	cases_add(name, cased);
	return cased;
}

function addCustomFilter(data) {
	const customFilter = Object.assign({
		note: `From ${fullLocation()}`,
		ver: 2,
		ondemand: false
	}, data);

	options_set(filteReddit_module, customFilterVariant, [customFilter, ...filteReddit_module.options[customFilterVariant].value]);

	return customFilter;
}

function getCustomFilter(entry) {
	const customFilter = externalFilterSourceMap.get(entry);
	if (!customFilter) throw new Error('Could not find customFilter');
	return customFilter;
}

function updateCustomFilter(customFilter, val) {
	const { body } = customFilter;
	Object.assign(body, val);
	options_set(filteReddit_module, customFilterVariant, filteReddit_module.options[customFilterVariant].value);
}

function removeExternalFilterEntry(externalType, entry) {
	const newValueArray = pull_default()(filteReddit_module.options[externalType].value, externalFilterSourceMap.get(entry));
	options_set(filteReddit_module, externalType, newValueArray);
}

async function saveFilterlineStateAsDefault(type) {
	const { storage } = defaultFilters.find(v => v.type === type) || {};
	if (!storage) throw new Error(`Could not find storage for type ${type}`);

	const v = await filterlineStorage.get();
	let { filters } = cloneDeep_default()(v) || {};
	if (isEmpty_default()(filters)) filters = null;
	await storage.set(filters);
	notifications_showNotification('Saved.', 1000);
}

function getStringMatchConditions(externalType, caseType, additionalCriteria) {
	return filteReddit_module.options[externalType].value.map(source => {
		const [matchString = '', applyTo = 'everywhere', applyList = '', except = ''] = Array.isArray(source) ? source : [source];

		let applyToConditions;
		if (applyTo !== 'everywhere') {
			const subreddits = applyList.split(',');

			if (subreddits.findIndex(v => !v) !== -1) {
				console.error('Filter must have subreddits specified', source);
				return { type: 'false' };
			}

			applyToConditions = getGroup(applyTo === 'exclude' ? 'none' : 'any', compact_default()([subreddits.includes('all') ? {
				type: 'currentSub',
				patt: 'all'
			} : null, subreddits.includes('popular') ? {
				type: 'currentSub',
				patt: 'popular'
			} : null, ...subreddits.map(sr => ({
				type: 'subreddit',
				patt: sr
			}))]));
		}

		const conditions = resolveGroup(getGroup('all', compact_default()([applyToConditions || null, Object.assign({
			type: caseType,
			patt: matchString
		}, additionalCriteria), except && except.length && getGroup('none', [Object.assign({
			type: caseType,
			patt: except
		}, additionalCriteria)]) || null])));

		externalFilterSourceMap.set(conditions, source);
		return conditions;
	});
}

function toggleFilter(subreddit) {
	subreddit = subreddit.toLowerCase();

	const filteredReddits = filteReddit_module.options.subreddits.value || [];
	const subredditIndex = filteredReddits.findIndex(reddit => reddit && reddit[0].toLowerCase() === subreddit);

	let message;
	if (subredditIndex !== -1) {
		filteredReddits.splice(subredditIndex, 1);
		message = `No longer filtering submissions from /r/${subreddit}.`;
	} else {
		filteredReddits.push([subreddit, 'everywhere', '']);
		message = `Submissions from /r/${subreddit} will be hidden from listings.`;
	}

	notifications_showNotification({
		moduleID: 'filteReddit',
		notificationID: 'filterSubreddit',
		message
	});

	options_set(filteReddit_module, 'subreddits', filteredReddits);

	return subredditIndex === -1;
}

const filteReddit_regexRegex = /^\/(.*)\/([gim]+)?$/;

const reconcileNativeFilters = (() => {
	const MAX_RETRIES = 5;
	const getTopScore = batch(async requests => {
		const resp = await ajax({
			url: `/r/${requests.map(r => r.sub).join('+')}/top.json`,
			query: { t: 'day', limit: 100 },
			type: 'json'
		});

		if (!resp.data.children.length) {
			return requests.map(() => 0);
		}

		const topScoreBySub = flow_default()(() => resp.data.children.reverse(), keyBy_default()(post => post.data.subreddit.toLowerCase()), fp_mapValues_default()(post => post.data.score))();

		return requests.map(({ sub, depth = 0 }) => {
			const score = topScoreBySub[sub.toLowerCase()];

			if (score !== undefined) {
				return score;
			} else if (depth > MAX_RETRIES) {
				return 0;
			} else {
				return getTopScore({ sub, depth: depth + 1 });
			}
		});
	}, { size: 100, delay: 2000 });

	async function sortByPopularity(subreddits) {
		const scores = await Promise.all(subreddits.map(sub => getTopScore({ sub })));

		return lodash_sortBy_default()(zip_default()(subreddits, scores), ([, score]) => score).map(([sub]) => sub).filter(Boolean).reverse();
	}

	return mutex(async ({ warnNotLoggedIn = false } = {}) => {
		const user = loggedInUser();

		if (!user) {
			if (warnNotLoggedIn) {
				notifications_showNotification({
					moduleID: filteReddit_module.moduleID,
					notificationID: 'filterSyncNotLoggedIn',
					header: 'Filters not synced',
					message: 'You must log in to sync filters.'
				});
			}
			console.warn('Not syncing filters, not logged in...');
			return;
		}

		notifications_showNotification({
			moduleID: filteReddit_module.moduleID,
			notificationID: 'filterSyncStarted',
			message: 'Filter sync started...'
		});

		const { data: { subreddits } } = await ajax({
			url: `/api/filter/user/${user}/f/all`,
			type: 'json'
		});

		const existing = subreddits.map(({ name }) => name.toLowerCase());

		const desired = await asyncFlow(map_default()(([sr]) => sr), filter_default()(sr => !filteReddit_regexRegex.test(sr)), map_default()(name => name.toLowerCase()), sortByPopularity, slice_default()(0, 100))(filteReddit_module.options.subreddits.value);

		const toRemove = difference_default()(existing, desired).length;
		const toAdd = difference_default()(desired, existing).length;

		if (!toRemove && !toAdd) {
			notifications_showNotification({
				moduleID: filteReddit_module.moduleID,
				optionKey: 'useRedditFilters',
				notificationID: 'filterSyncNoneAddedOrRemoved',
				closeDelay: 5000,
				header: 'No filters synced',
				message: `
					Either no subreddit filters were changed, or you have more than 100 subreddits filtered.
					Reddit's native /r/all filtering is limited to 100 subreddits.
				`
			});
			return;
		}

		try {
			await ajax({
				method: 'PUT',
				url: `/api/filter/user/${user}/f/all`,
				data: {
					model: JSON.stringify({
						subreddits: desired.map(name => ({ name }))
					})
				}
			});
		} catch (e) {
			console.error(e);
			notifications_showNotification({
				moduleID: filteReddit_module.moduleID,
				optionKey: 'useRedditFilters',
				notificationID: 'filterSyncError',
				header: 'Error syncing filters',
				message: `Filters could not be synced: ${e}`
			});
			return;
		}

		notifications_showNotification({
			moduleID: filteReddit_module.moduleID,
			optionKey: 'useRedditFilters',
			notificationID: 'filterSyncSuccess',
			header: 'Successfully synced filters',
			message: `Removed ${toRemove} and added ${toAdd} filters.`
		});
	});
})();

const subredditAllowNsfwOption = once_default()(() => indexOptionTable(filteReddit_module.options.allowNSFW, 0, key => key.toLowerCase()));

const allowAllNsfw = memoize_default()(subreddit => {
	const currOptionValue = subredditAllowNsfwOption()[subreddit.toLowerCase()];
	return currOptionValue && currOptionValue[0][1] === 'visit';
});

function allowNSFW(postSubreddit, currSubreddit = currentSubreddit()) {
	if (!filteReddit_module.options.allowNSFW.value || !filteReddit_module.options.allowNSFW.value.length) return false;

	if (currSubreddit && allowAllNsfw(currSubreddit)) {
		return true;
	}

	if (!postSubreddit) postSubreddit = currSubreddit;
	if (!postSubreddit) return false;
	const postOptionValue = subredditAllowNsfwOption()[postSubreddit.toLowerCase()];
	if (postOptionValue) {
		if (postOptionValue[0][1] === 'everywhere') {
			return true;
		} else {
			return (currSubreddit || '').split('+').includes(postSubreddit);
		}
	}
	return false;
}

function updateNsfwBodyClass(filterOn) {
	bodyClasses_namespaceObject.toggle(filterOn, 'hideOver18');
}

function registerSubredditFilterCommand() {
	const getSubreddit = val => val || selectedThing && selectedThing.getSubreddit() || currentSubreddit() || '';

	registerCommand(/^f(?:ilter)?/, 'f[ilter] [subreddit] - toggle subreddit filter', (cmd, val) => {
		const subreddit = getSubreddit(val);
		return `toggle subreddit filter for: ${subreddit}`;
	}, (cmd, val) => {
		const subreddit = getSubreddit(val);
		if (!subreddit) return 'no subreddit specified or post selected';
		toggleFilter(subreddit);
	});
}
// CONCATENATED MODULE: ./lib/modules/hideChildComments.js





const hideChildComments_module = new Module('hideChildComments');

hideChildComments_module.moduleName = 'hideChildCommentsName';
hideChildComments_module.category = 'commentsCategory';
hideChildComments_module.description = 'hideChildCommentsDesc';
hideChildComments_module.options = {
	automatic: {
		type: 'boolean',
		value: false,
		description: 'hideChildCommentsAutomaticDesc',
		title: 'hideChildCommentsAutomaticTitle'
	},
	nested: {
		type: 'boolean',
		value: true,
		description: 'hideChildCommentsNestedDesc',
		title: 'hideChildCommentsNestedTitle'
	},
	hideNested: {
		dependsOn: options => options.nested.value,
		type: 'boolean',
		value: false,
		description: 'hideChildCommentsHideNestedDesc',
		title: 'hideChildCommentsHideNestedTitle'
	}
};
hideChildComments_module.include = ['comments'];

let initialHide, toggleAllButton;

hideChildComments_module.beforeLoad = () => {
	initialHide = hideChildComments_module.options.automatic.value && !/\/comments\/(?:\w+)\/(?:\w+)\/(\w+)/.test(location.pathname);

	watchForThings(['comment'], addToggleChildrenButton);
	watchForThings(['post'], addToggleAllButton);
};

const addToggleAllButton = once_default()(thing => {
	const menu = thing.element.querySelector('ul.buttons');
	if (!menu) return;

	function toggle(action) {
		const includeChildren = hideChildComments_module.options.nested.value && hideChildComments_module.options.hideNested.value;
		const selector = includeChildren ? '.thing.comment' : '.nestedlisting > .thing.comment';
		forEachChunked(document.querySelectorAll(`${selector} > .entry .toggleChildren[action=${action}]`), toggle => {
			toggle.click();
		});

		if (action === 'hide') {
			initialHide = true;
			a.setAttribute('action', 'show');
			a.setAttribute('title', 'Show all comments.');
			a.setAttribute('data-text', 'show all child comments');
		} else {
			initialHide = false;
			a.setAttribute('action', 'hide');
			a.setAttribute('title', 'Show only replies to original poster.');
			a.setAttribute('data-text', 'hide all child comments');
		}
	}

	const li = document.createElement('li');
	const a = document.createElement('a');
	a.setAttribute('href', '#');
	a.setAttribute('class', 'noCtrlF res-toggleAllChildren');
	a.addEventListener('click', e => {
		e.preventDefault();
		toggle(a.getAttribute('action'));
	});
	toggleAllButton = a;

	toggle(initialHide ? 'hide' : 'show');

	li.appendChild(a);
	menu.appendChild(li);
});

function addToggleChildrenButton(comment) {
	if (!hideChildComments_module.options.nested.value && !comment.isTopLevelComment()) return;
	if (!comment.getNumberOfChildren()) return;

	const children = comment.element.querySelector('div.child > .sitetable');
	const menu = comment.element.querySelector('ul.buttons');
	if (!children || !menu) return;

	function toggle(action) {
		if (action === 'hide') {
			children.style.display = 'none';
			a.setAttribute('data-text', `show ${comment.getNumberOfChildren()} child comments`);
			a.setAttribute('action', 'show');
		} else {
			children.style.display = '';
			a.setAttribute('data-text', 'hide child comments');
			a.setAttribute('action', 'hide');
		}

		comment.element.classList.toggle('res-children-hidden', action === 'hide');
	}

	const li = document.createElement('li');
	const a = document.createElement('a');
	a.setAttribute('href', '#');
	a.setAttribute('class', 'toggleChildren noCtrlF');
	a.addEventListener('click', e => {
		e.preventDefault();
		toggle(a.getAttribute('action'));
	});

	const hide = initialHide && (hideChildComments_module.options.hideNested.value || comment.isTopLevelComment());
	toggle(hide ? 'hide' : 'show');

	li.appendChild(a);
	menu.appendChild(li);
}

function toggleAll() {
	const button = toggleAllButton;
	if (!button) throw new Error('Toggle all button not found');
	button.click();
}

function hideChildComments_toggle(thing) {
	const button = thing.entry.querySelector('a.toggleChildren');
	if (!button) throw new Error('Toggle button not found');
	button.click();
}
// CONCATENATED MODULE: ./lib/modules/noParticipation.js








const noParticipation_module = new Module('noParticipation');

const noParticipation_urls = {
	moreinfo: 'https://www.reddit.com/r/NoParticipation/wiki/intro'
};

noParticipation_module.moduleName = 'noPartName';
noParticipation_module.description = 'noPartDesc';
noParticipation_module.category = 'subredditsCategory';
noParticipation_module.options = {
	disableVoteButtons: {
		type: 'boolean',
		value: false,
		description: 'noPartDisableVoteButtonsDesc',
		title: 'noPartDisableVoteButtonsTitle',
		bodyClass: true
	},
	disableCommentTextarea: {
		type: 'boolean',
		value: false,
		description: 'noPartDisableCommentTextareaDesc',
		title: 'noPartDisableCommentTextareaTitle',
		bodyClass: true
	},
	evenIfSubscriber: {
		type: 'boolean',
		value: false,
		description: 'noPartEvenIfSubscriberDesc',
		title: 'noPartEvenIfSubscriberTitle'
	},
	escapeNP: {
		type: 'boolean',
		value: true,
		description: 'noPartEscapeNPDesc',
		title: 'noPartEscapeNPTitle'
	}
};

noParticipation_module.shouldRun = () => /^(?:\w+-)?np(?:-\w+)?\./i.exec(location.hostname);

const boilerplateNotificationText = `
	<p>
		<div class="RES-spoiler">
			<label class="RES-spoiler-title">Hover here for more details</label>
			<div class="RES-spoiler-contents">
				You came to this page by following a <a href="${noParticipation_urls.moreinfo}" target="_blank" rel="noopener noreferer">NP</a> link, so you may be interfering with normal conversation.
				Please respect reddit's <a href="https://reddit.com/rules" target="_blank" rel="noopener noreferer">rules</a> by not commenting or voting. Violating these rules may get you banned.
				<a href="${noParticipation_urls.moreinfo}" target="_blank" rel="noopener noreferer">Find out more</a>
			</div>
		</div>
	</p>
`;

let noParticipationActive;

noParticipation_module.go = () => {
	if (noParticipation_module.options.escapeNP.value) {
		$(document.body).on('mousedown', 'a', removeNpFromLink);
	}

	if (isNPIrrelevant()) {
		notifyNpIrrelevant();
	} else if (loggedInUser()) {
		if (isPageType('comments', 'linklist') && !(document.body.classList.contains('front-page') || document.body.classList.contains('profile-page'))) {
			applyNoParticipationMode();
		} else {
			notifyNpIrrelevant();
		}
	}
};

function removeNpFromLink(e) {
	const target = e.target;

	if (!target.getAttribute('href').startsWith('/') && target.matches('.md a')) return;

	if (target.hostname.endsWith('np.reddit.com')) {
		target.hostname = 'www.reddit.com';
	}
}

function isNPIrrelevant() {
	return !isPageType('comments') || isSubscriber() && !noParticipation_module.options.evenIfSubscriber.value;
}

function isVotingBlocked() {
	return noParticipationActive && noParticipation_module.options.disableVoteButtons.value;
}

function isSubscriber() {
	return document.body.classList.contains('subscriber');
}

function nonNpLocation() {
	const nonNpUrl = new URL(location.href);
	nonNpUrl.hostname = 'www.reddit.com';
	return nonNpUrl.href;
}

function notifyNpIrrelevant() {
	const message = isSubscriber() ? `You're browsing in <a href="${noParticipation_urls.moreinfo}" target="_blank" rel="noopener noreferer">No Participation</a> mode, but you're a subscriber here.` : `You're still browsing in <a href="${noParticipation_urls.moreinfo}" target="_blank" rel="noopener noreferer">No Participation</a> mode, but it's no longer necessary.`;

	notifications_showNotification({
		moduleID: noParticipation_module.moduleID,
		notificationID: 'ok-participation',
		closeDelay: 3000,
		header: 'Okay to Participate',
		message: `${message} <p><a href="${nonNpLocation()}">Click here to return to normal reddit</a></p>`
	});
}

function notifyNpActive() {
	const message = isSubscriber() ? `
			<span class="res-icon">&#xF15A;</span>
			Please think before you comment or vote, and remember the subreddit's rules.
			Although you subscribe to this subreddit, you can still derail a particular thread.
			<p><a href="${nonNpLocation()}">Click here to return to normal reddit.</a></p>
		` : `
			<strong>
				<span class="res-icon">&#xF15A;</span>
				Do not vote or comment.
			</strong>
		`;

	notifications_showNotification({
		moduleID: noParticipation_module.moduleID,
		notificationID: 'no-participation',
		closeDelay: 10000,
		header: 'No Participation',
		message: `${message}${boilerplateNotificationText}`
	});
}

const votedOnButtons = [];

async function notifyNoVote(voteButton) {
	const canUndoVote = voteButton && !voteButton.matches('.upmod, .downmod');

	if (voteButton) votedOnButtons.push(voteButton);

	const notification = await notifications_showNotification({
		moduleID: noParticipation_module.moduleID,
		optionKey: 'disableVoteButtons',
		cooldown: 5000,
		header: 'No Participation',
		message: `
			<strong><span class="res-icon">&#xF15A;</span> Do not vote.</strong>
			${boilerplateNotificationText}
			${canUndoVote ? '<p><button type="button" class="redButton" data-action="revertvote">Undo vote</button></p>' : ''}
		`
	});

	if (notification) {
		$(notification.element).find('[data-action=revertvote]').on('click', () => {
			revertVote(votedOnButtons);
			notification.close();
		});
	}
}

const notifyNoComment = once_default()(() => {
	notifications_showNotification({
		moduleID: noParticipation_module.moduleID,
		optionKey: 'disableCommentTextarea',
		header: 'No Participation',
		message: `<strong><span class="res-icon">&#xF15A;</span> Do not comment.</strong>${boilerplateNotificationText}`
	});
});

function applyNoParticipationMode() {
	noParticipationActive = true;

	notifyNpActive();

	bodyClasses_namespaceObject.add('res-noParticipation');

	watchForVote();

	$(document.body).on('keydown', commentTextareaSelector, e => {
		notifyNoComment();

		if (noParticipation_module.options.disableCommentTextarea.value) {
			downcast(e.target, HTMLTextAreaElement).disabled = true;
		}
	});
}

function watchForVote() {
	$(document.body).on('click', '.arrow', e => {
		if (e.target.classList.contains('up') || e.target.classList.contains('down')) {
			notifyNoVote(e.target);
		}
	});
}

function revertVote(voteButtons) {
	voteButtons.forEach((voteButton, index) => {
		setTimeout(() => {
			if (voteButton.classList.contains('upmod') || voteButton.classList.contains('downmod')) {
				click(voteButton);
			}
		}, index * 2000);
	});

	notifications_showNotification({
		moduleID: noParticipation_module.moduleID,
		optionKey: 'disableVoteButtons',
		header: 'No Participation',
		message: `
			${voteButtons.length > 1 ? 'Your votes are being reverted.' : 'Your vote has been reverted.'}
			Please remember not to vote!
			<p><a href="${noParticipation_urls.moreinfo}" target="_blank" rel="noopener noreferer">Find out more</a></p>
		`
	});
}
// CONCATENATED MODULE: ./lib/modules/saveComments.js











const saveComments_module = new Module('saveComments');

saveComments_module.moduleName = 'saveCommentsName';
saveComments_module.description = 'saveCommentsDesc';
saveComments_module.category = 'commentsCategory';
saveComments_module.exclude = ['submit'];

const savedRe = /\/user\/([\-\w]+)\/saved\/?/i;

const savedCommentStorage = storage_namespaceObject.wrapBlob('RESmodules.saveComments.savedComments', () => {
	throw new Error('Saved comment not found');
});
let savedCommentIDs;

saveComments_module.beforeLoad = async () => {
	savedCommentIDs = new Set(Object.keys((await savedCommentStorage.getAll())));

	watchForThings(['comment'], addSaveLinkToComment);
};

saveComments_module.go = async () => {
	if (savedRe.test(location.pathname)) {
		await drawSavedComments();
		switchTab(location.hash);
	} else if (isPageType('profile')) {
		addTabs({ onSavedPage: false });
	}
};

function getId(thing) {
	return thing.getFullname().split('_').slice(-1)[0];
}

const unsaveElement = (e => () => e().cloneNode(true))(once_default()(() => string_namespaceObject.html`
	<li class="unsaveComments">
		<a class="RES-saved noCtrlF" href="/user/me/saved#comments" data-text="saved-RES"></a>
	</li>
`));
const saveElement = (e => () => e().cloneNode(true))(once_default()(() => {
	$(document.body).on('click', 'li.saveComments', ({ currentTarget }) => {
		const thing = Thing_Thing.checkedFrom(currentTarget);
		saveComment(thing);
		currentTarget.remove();
		addSaveLinkToComment(thing);
	});

	return string_namespaceObject.html`
		<li class="saveComments">
			<a class="RES-save noCtrlF" href="javascript:void 0" title="Save using RES - which is local only, but preserves the full text in case someone edits/deletes it" data-text="save-RES"></a>
		</li>
	`;
}));

function addSaveLinkToComment(thing) {
	const sibling = thing.element.querySelector('ul.buttons .comment-save-button');
	if (!sibling) return;
	sibling.after(savedCommentIDs.has(getId(thing)) ? unsaveElement() : saveElement());
}

function getCommentContent(thing) {
	const content = $(thing.entry.querySelector('div.usertext-body > div.md')).clone();
	content.find('.keyNavAnnotation, .expando-button, .res-expando-box, script').remove();
	return content.html();
}

function saveComment(thing) {
	const id = getId(thing);
	if (savedCommentIDs.has(id)) throw new Error('comment already saved!');

	const permaLink = thing.getCommentPermalink();
	if (!permaLink) throw new Error('Comment lacks permalink');

	savedCommentStorage.set(id, {
		href: permaLink.href,
		username: thing.getAuthor() || '[deleted]',
		comment: getCommentContent(thing),
		timeSaved: new Date().toString()
	});
	savedCommentIDs.add(id);
}

const addTabs = once_default()(({ onSavedPage = true } = {}) => {
	const $reddit = $('#header-bottom-left .tabmenu li').filter((i, e) => {
		const a = e.querySelector('a');
		return a && savedRe.test(a.href);
	});
	$reddit.find('a').attr('href', onSavedPage ? '#links' : '/saved/#links').text('saved - reddit');

	const $res = $('<li>').append($('<a>', {
		href: onSavedPage ? '#comments' : '/saved/#comments',
		text: 'saved - RES'
	}));
	$res.insertAfter($reddit);

	if (onSavedPage) {
		$reddit.add($res).find('a').click(e => {
			switchTab(e.target.hash);
		});
	}

	return { $reddit, $res };
});

function switchTab(tabHash) {
	const $redditSaved = $('#siteTable, .neverEndingReddit');
	const $resSaved = $('#res-saveComments');

	switch (tabHash) {
		case '#comments':
			$redditSaved.hide();
			addTabs().$reddit.removeClass('selected');
			$resSaved.show();
			addTabs().$res.addClass('selected');
			break;
		case '#links':
		default:
			$resSaved.hide();
			addTabs().$res.removeClass('selected');
			$redditSaved.show();
			addTabs().$reddit.addClass('selected');
			break;
	}
}

const savedCommentsTemplate = ({ comments, keyNavTip, moduleDescription }) => string_namespaceObject.html`
	<div id="res-saveComments" class="sitetable linklisting">
		${!comments.length && string_namespaceObject._html`
			<div class="res-module-description md">
				<h1>Saving comments with RES</h1>
				${string_namespaceObject.safe(moduleDescription)}
			</div>
		`}
		${keyNavTip && keyNavTip.map(({ keyNavHash, savePostKey, saveCommentKey, saveRESKey }) => string_namespaceObject._html`
			<div class="res-module-tip infobar">
				<p><i>Keyboard Shortcuts</i> <a class="gearIcon" href="${keyNavHash}" title="RES settings"></a></p>
				<ul>
					<li><b>${savePostKey}</b>: save a submission.</li>
					<li><b>${saveCommentKey}</b>: save a comment (to your reddit account).</li>
					<li><b>${saveRESKey}</b>: save a comment with RES.</li>
				</ul>
			</div>
		`)}
		<div class="res-saveComments-list">
			${comments.map(({ id, link, username, dateTime, date, timeAgo, body }) => string_namespaceObject._html`
				<div class="entry res-savedComment">
					<div class="savedCommentHeader">
						<a href="${link}">
							<b>${username}</b>
							- saved <date title="${dateTime}" datetime="${date}">${timeAgo}</date> ago
						</a>
					</div>
					<div class="savedCommentBody md">${string_namespaceObject.safe(body)}</div>
					<div class="savedCommentFooter">
						<ul class="flat-list buttons">
							<li><a href="${link}">permalink</a></li>
							<li><a class="unsaveComment" href="#" data-unsaveID="${id}">unsave-RES</a></li>
						</ul>
					</div>
				</div>
			`)}
		</div>
	</div>
`;

async function drawSavedComments() {
	const savedComments = await savedCommentStorage.getAll();

	const comments = Object.entries(savedComments).map(([id, { comment, href, username, timeSaved }]) => {
		const date = new Date(timeSaved);
		return {
			id,
			link: href,
			username,
			date: formatDate(date),
			dateTime: formatDateTime(date),
			timeAgo: formatDateDiff(date),
			body: comment.replace(/<(script|iframe|video)(.|\s)*?\/(script|iframe|video)>/g, '')
		};
	});

	const $saveCommentsContent = $(savedCommentsTemplate({
		moduleDescription: i18n(saveComments_module.description),
		keyNavTip: modules_isEnabled(keyboardNav_namespaceObject) && [{
			keyNavHash: makeUrlHash(keyboardNav_module.moduleID, 'savePost'),
			savePostKey: keycode_niceKeyCode(keyboardNav_module.options.savePost.value),
			saveCommentKey: keycode_niceKeyCode(keyboardNav_module.options.saveComment.value),
			saveRESKey: keycode_niceKeyCode(keyboardNav_module.options.saveRES.value)
		}],
		comments
	}));

	$saveCommentsContent.appendTo('body > .content');

	$saveCommentsContent.on('click', '.unsaveComment', e => {
		e.preventDefault();
		unsaveComment($(e.target).attr('data-unsaveID'));
		$(e.target).text('removed');
	});
}

function unsaveComment(id) {
	savedCommentStorage.delete(id);
	savedCommentIDs.delete(id);
}

function showEducationalNotification() {
	notifications_showNotification({
		moduleID: saveComments_module.moduleID,
		optionKey: 'savePost',
		notificationID: 'saveRES-educational',
		closeDelay: 10000,
		cooldown: 3 * WEEK,
		header: 'Saving Posts and Comments',
		message: `
			<p>
				The keyboard shortcuts <b>"${keycode_niceKeyCode(keyboardNav_module.options.savePost.value)}"</b> (posts) and <b>"${keycode_niceKeyCode(keyboardNav_module.options.saveComment.value)}"</b> (comments) will save a post/comment to your reddit account (same as the "save" button).
				It will be accessible from anywhere that you're logged in, but the original text will not be preserved if it is edited or deleted.
			</p>
			<p>
				The keyboard shortcut <b>"${keycode_niceKeyCode(keyboardNav_module.options.saveRES.value)}"</b> will save a comment to RES (same as the "save-RES" button).
				It will only be available locally, but the original text will be preserved if the comment is edited or deleted.
			</p>
			<p>These shortcuts can be changed in the ${makeUrlHashLink(keyboardNav_module.moduleID, 'savePost', 'settings console')}.<p>
		`
	});
}
// CONCATENATED MODULE: ./lib/modules/showParent.js








const showParent_module = new Module('showParent');

showParent_module.moduleName = 'showParentName';
showParent_module.category = 'myAccountCategory';
showParent_module.description = 'showParentDesc';
showParent_module.options = {
	hoverDelay: {
		title: 'showParentHoverDelayTitle',
		type: 'text',
		value: '500',
		description: 'showParentHoverDelayDesc',
		advanced: true
	},
	fadeDelay: {
		title: 'showParentFadeDelayTitle',
		type: 'text',
		value: '200',
		description: 'showParentFadeDelayDesc',
		advanced: true
	},
	fadeSpeed: {
		title: 'showParentFadeSpeedTitle',
		type: 'text',
		value: '0.7',
		description: 'showParentFadeSpeedDesc',
		advanced: true
	},
	direction: {
		title: 'showParentDirectionTitle',
		type: 'enum',
		value: 'down',
		values: [{
			name: 'Above',
			value: 'up'
		}, {
			name: 'Below',
			value: 'down'
		}],
		description: 'showParentDirectionDesc',
		bodyClass: true
	}
};
showParent_module.include = ['comments'];

showParent_module.go = () => {
	$('body').on('mouseenter', '.comment .buttons :not(:first-child) .bylink', function () {
		startHover(this, {
			openDelay: showParent_module.options.hoverDelay.value,
			fadeDelay: showParent_module.options.fadeDelay.value,
			fadeSpeed: showParent_module.options.fadeSpeed.value
		});
	});

	selectedEntry_addListener((selected, unselected) => unselected && infocard(showParent_module.moduleID).close(false), 'beforePaint');
};

function startHover(button, options = {}) {
	infocard(showParent_module.moduleID).target(button).options(options).populateWith(() => showCommentHover(Thing_Thing.checkedFrom(button))).begin();
}

function showParent_handleVoteClick() {
	const $this = $(this);
	const voteClasses = {
		up: 'likes',
		none: 'unvoted',
		down: 'dislikes'
	};
	const id = $this.parent().parent().attr('data-fullname');
	let direction = /(up|down)(?:mod)?/.exec(this.className);

	if (!direction) return;

	direction = direction[1];

	const $targetButton = $(`.content .thing.id-${id}`).children('.midcol').find(`.arrow.${direction}, .arrow.${direction}mod`);

	if ($targetButton.length !== 1) {
		console.error('When attempting to find %s arrow for comment %s %d elements were returned', direction, id, $targetButton.length);
		return;
	}

	function removeClickHandlers(event) {
		event.stopPropagation();
	}

	$targetButton.on('click', removeClickHandlers);
	$targetButton.click();
	$targetButton.off('click', removeClickHandlers);

	const $midcol = $this.parent();

	let startDir = 'none';
	for (const [key, value] of Object.entries(voteClasses)) {
		if ($midcol.hasClass(value)) {
			startDir = key;
			break;
		}
	}

	const newDir = direction === startDir ? 'none' : direction;

	$midcol.parent().children(`.${voteClasses[startDir]}`).removeClass(voteClasses[startDir]).addClass(voteClasses[newDir]);
	$midcol.find('.up, .upmod').toggleClass('upmod', newDir === 'up').toggleClass('up', newDir !== 'up');
	$midcol.find('.down, .downmod').toggleClass('downmod', newDir === 'down').toggleClass('down', newDir !== 'down');
}

function showCommentHover(thing) {
	const direction = showParent_module.options.direction.value;

	let $parents = $(thing.element).parents('.thing').clone();

	if (direction === 'up') {
		$parents = $($parents.get().reverse());
	}

	$parents.addClass('comment parentComment').removeClass('thing even odd');
	$parents.children('.child').remove();
	$parents.each(function () {
		const $this = $(this);

		$this.off('click');

		let id = $this.attr('data-fullname');
		if (id) {
			id = id.slice(3);
			$this.find('> .entry .tagline').append(`<a class="bylink parentlink" href="#${id}">goto comment</a>`);
		}
	});
	$parents.find('.parent').remove();
	$parents.find('.usertext-body').show();
	$parents.find('.flat-list.buttons').remove();
	$parents.find('.usertext-edit').remove();
	$parents.find('.RESUserTag').remove();
	$parents.find('.voteWeight').remove();
	$parents.find('.collapsed').remove();
	$parents.find('.expand').remove();
	$parents.find('form').attr('id', '');
	$parents.find('.arrow').on('click', showParent_handleVoteClick);
	$parents.find('.res-expando-box, .expando-button').remove();
	$parents.find('.keyNavAnnotation').remove();

	const $container = $('<div class="parentCommentWrapper">');
	$container.append($parents);
	$parents.slice(0, -1).after('<div class="parentArrow">reply to</div>');
	return ['Parents', $container];
}
// CONCATENATED MODULE: ./lib/modules/singleClick.js







const singleClick_module = new Module('singleClick');

singleClick_module.moduleName = 'singleClickName';
singleClick_module.category = 'browsingCategory';
singleClick_module.description = 'singleClickDesc';
singleClick_module.options = {
	openOrder: {
		title: 'singleClickOpenOrderTitle',
		type: 'enum',
		values: [{
			name: 'open comments then link',
			value: 'commentsfirst'
		}, {
			name: 'open link then comments',
			value: 'linkfirst'
		}],
		value: 'commentsfirst',
		description: 'singleClickOpenOrderDesc'
	},
	hideLEC: {
		title: 'singleClickHideLECTitle',
		type: 'boolean',
		value: true,
		description: 'singleClickHideLECDesc',
		advanced: true,
		bodyClass: true
	},
	openFrontpage: {
		title: 'singleClickOpenFrontpageTitle',
		type: 'boolean',
		value: false,
		description: 'singleClickOpenFrontpageDesc',
		dependsOn: options => !options.hideLEC.value
	},
	openBackground: {
		title: 'singleClickOpenBackgroundTitle',
		type: 'boolean',
		value: false,
		description: 'singleClickOpenBackgroundDesc'
	}
};
singleClick_module.exclude = ['comments', /^\/subreddits(?:\/|$)/i];

singleClick_module.beforeLoad = () => {
	watchForThings(['post'], applyLinks);
};

singleClick_module.go = () => {
	$(document.body).on('mousedown', '.redditSingleClick', e => {
		if (e.button !== 2) {
			e.preventDefault();

			const thing = Thing_Thing.checkedFrom(e.target);
			const focused = !e.button && !e.ctrlKey && !singleClick_module.options.openBackground.value;

			openTabs(thing, focused);
		}
	});
};

function openTabs(thing, focused) {
	const link = thing.getPostUrl();
	const urls = [link];

	if (thing.isLinkPost()) {
		const comments = thing.getCommentsLink().href;

		if (comments !== link) {
			urls.push(comments);
		}
	} else if (singleClick_module.options.openFrontpage.value) {
		const frontpageLink = thing.getSubredditLink();
		if (frontpageLink && frontpageLink.href !== link) {
			urls.push(frontpageLink.href);
		}
	}

	if (singleClick_module.options.openOrder.value === 'commentsfirst') urls.reverse();

	openNewTabs(focused, ...urls);
}

function applyLinks(thing) {
	for (const ele of thing.element.querySelectorAll('ul.flat-list')) {
		ele.appendChild(string_namespaceObject.html`<li><span class="redditSingleClick"></span></li>`);
	}
}
// CONCATENATED MODULE: ./lib/modules/keyboardNav.js


























const keyboardNav_module = new Module('keyboardNav');

keyboardNav_module.moduleName = 'keyboardNavName';
keyboardNav_module.category = 'browsingCategory';
keyboardNav_module.description = 'keyboardNavDesc';
keyboardNav_module.options = {
	linearScrollStyle: {
		type: 'enum',
		values: [{
			name: 'directional',
			value: 'directional'
		}, {
			name: 'page up/down',
			value: 'page'
		}, {
			name: 'lock to top',
			value: 'top'
		}, {
			name: 'in middle',
			value: 'middle'
		}, {
			name: 'adopt top',
			value: 'adopt'
		}, {
			name: 'legacy',
			value: 'legacy'
		}],
		value: 'directional',
		description: 'keyboardNavLinearScrollStyleDesc',
		title: 'keyboardNavLinearScrollStyleTitle',
		advanced: true
	},
	nonLinearScrollStyle: {
		type: 'enum',
		values: [{
			name: 'directional',
			value: 'directional'
		}, {
			name: 'page up/down',
			value: 'page'
		}, {
			name: 'lock to top',
			value: 'top'
		}, {
			name: 'in middle',
			value: 'middle'
		}, {
			name: 'adopt top',
			value: 'adopt'
		}, {
			name: 'legacy',
			value: 'legacy'
		}],
		value: 'legacy',
		description: 'keyboardNavNonLinearScrollStyleDesc',
		title: 'keyboardNavNonLinearScrollStyleTitle',
		advanced: true
	},
	linkNumbers: {
		type: 'boolean',
		value: true,
		description: 'keyboardNavLinkNumbersDesc',
		title: 'keyboardNavLinkNumbersTitle'
	},
	linkNumberPosition: {
		dependsOn: options => options.linkNumbers.value,
		type: 'enum',
		values: [{
			name: 'Place on right',
			value: 'right'
		}, {
			name: 'Place on left',
			value: 'left'
		}],
		value: 'right',
		description: 'keyboardNavLinkNumberPositionDesc',
		title: 'keyboardNavLinkNumberPositionTitle',
		advanced: true
	},
	linkToggleExpando: {
		dependsOn: options => options.linkNumbers.value,
		type: 'boolean',
		value: true,
		description: 'keyboardNavLinkToggleExpandoDesc',
		title: 'keyboardNavLinkToggleExpandoTitle'
	},
	linkNumberAltModeModifier: {
		dependsOn: options => options.linkNumbers.value,
		type: 'enum',
		values: [{
			name: 'none',
			value: 'none'
		}, {
			name: 'Shift',
			value: 'shift'
		}, {
			name: 'Alt',
			value: 'alt'
		}],
		value: 'alt',
		description: 'keyboardNavLinkNumberAltModeModifierDesc',
		title: 'keyboardNavLinkNumberAltModeModifierTitle',
		advanced: true
	},
	linkNewTab: {
		dependsOn: options => options.linkNumbers.value,
		type: 'boolean',
		value: true,
		description: 'keyboardNavLinkNewTabDesc',
		title: 'keyboardNavLinkNewTabTitle',
		advanced: true
	},
	onHideMoveDown: {
		type: 'boolean',
		value: true,
		description: 'keyboardNavOnHideMoveDownDesc',
		title: 'keyboardNavOnHideMoveDownTitle',
		advanced: true
	},
	onVoteMoveDown: {
		type: 'boolean',
		value: false,
		description: 'keyboardNavOnVoteMoveDownDesc',
		title: 'keyboardNavOnVoteMoveDownTitle',
		advanced: true
	},
	onVoteCommentMoveDown: {
		type: 'boolean',
		value: false,
		description: 'keyboardNavOnVoteCommentMoveDownDesc',
		title: 'keyboardNavOnVoteCommentMoveDownTitle',
		advanced: true
	},
	followLinkNewTabFocus: {
		type: 'boolean',
		value: true,
		description: 'keyboardNavFollowLinkNewTabFocusDesc',
		title: 'keyboardNavFollowLinkNewTabFocusTitle'
	},
	toggleHelp: {
		type: 'keycode',
		value: [191, false, false, true, false],
		description: 'keyboardNavToggleHelpDesc',
		title: 'keyboardNavToggleHelpTitle',
		callback() {
			toggleKeyNavHelp();
		}
	},
	toggleCmdLine: {
		type: 'keycode',
		value: [190, false, false, false, false],
		description: 'keyboardNavToggleCmdLineDesc',
		title: 'keyboardNavToggleCmdLineTitle',
		callback() {
			toggleCmdLine();
		}
	},
	enterFilterCommandLine: {
		type: 'keycode',
		requiresModule: filteReddit_namespaceObject,
		value: [70, false, false, false, false],
		description: 'keyboardNavEnterFilterCommandLineDesc',
		title: 'keyboardNavEnterFilterCommandLineTitle',
		callback() {
			toggleCmdLine(true, 'fl ');
		}
	},
	hide: {
		type: 'keycode',
		include: ['linklist', 'modqueue', 'profile'],
		value: [72, false, false, false, false],
		description: 'keyboardNavHideDesc',
		title: 'keyboardNavHideTitle',
		callback: keyboardNav_hideLink
	},
	moveUp: {
		type: 'keycode',
		include: ['linklist', 'modqueue', 'profile', 'search'],
		value: [75, false, false, false, false],
		description: 'keyboardNavMoveUpDesc',
		title: 'keyboardNavMoveUpTitle',
		callback() {
			move('up', { allowMediaBrowse: true, scrollStyle: keyboardNav_module.options.linearScrollStyle.value });
		}
	},
	moveDown: {
		type: 'keycode',
		include: ['linklist', 'modqueue', 'profile', 'search'],
		value: [74, false, false, false, false],
		description: 'keyboardNavMoveDownDesc',
		title: 'keyboardNavMoveDownTitle',
		callback() {
			move('down', { allowMediaBrowse: true, scrollStyle: keyboardNav_module.options.linearScrollStyle.value }, moveDownFallback);
		}
	},
	moveUpComment: {
		type: 'keycode',
		include: ['comments', 'commentsLinklist', 'inbox'],
		value: [75, false, false, false, false],
		description: 'keyboardNavMoveUpCommentDesc',
		title: 'keyboardNavMoveUpCommentTitle',
		callback() {
			move('up', { scrollStyle: keyboardNav_module.options.linearScrollStyle.value });
		}
	},
	moveDownComment: {
		type: 'keycode',
		include: ['comments', 'commentsLinklist', 'inbox'],
		value: [74, false, false, false, false],
		description: 'keyboardNavMoveDownCommentDesc',
		title: 'keyboardNavMoveDownCommentTitle',
		callback() {
			move('down', { scrollStyle: keyboardNav_module.options.linearScrollStyle.value });
		}
	},
	moveTop: {
		type: 'keycode',
		include: ['linklist', 'commentsLinklist', 'modqueue', 'profile', 'inbox', 'search'],
		value: [75, false, false, true, false],
		description: 'keyboardNavMoveTopDesc',
		title: 'keyboardNavMoveTopTitle',
		callback() {
			move('top', { scrollStyle: keyboardNav_module.options.nonLinearScrollStyle.value });
		}
	},
	moveBottom: {
		type: 'keycode',
		include: ['linklist', 'commentsLinklist', 'modqueue', 'profile', 'inbox', 'search'],
		value: [74, false, false, true, false],
		description: 'keyboardNavMoveBottomDesc',
		title: 'keyboardNavMoveBottomTitle',
		callback() {
			move('bottom', { scrollStyle: keyboardNav_module.options.nonLinearScrollStyle.value });
		}
	},
	moveUpSibling: {
		type: 'keycode',
		include: ['comments'],
		value: [75, false, false, true, false],
		description: 'keyboardNavMoveUpSiblingDesc',
		title: 'keyboardNavMoveUpSiblingTitle',
		callback() {
			move('upSibling', { scrollStyle: keyboardNav_module.options.nonLinearScrollStyle.value });
		}
	},
	moveDownSibling: {
		type: 'keycode',
		include: ['comments'],
		value: [74, false, false, true, false],
		description: 'keyboardNavMoveDownSiblingDesc',
		title: 'keyboardNavMoveDownSiblingTitle',
		callback() {
			move('downSibling', { scrollStyle: keyboardNav_module.options.nonLinearScrollStyle.value });
		}
	},
	moveDownParentSibling: {
		type: 'keycode',
		include: ['comments'],
		value: [74, true, false, false, false],
		description: 'keyboardNavMoveDownParentSiblingDesc',
		title: 'keyboardNavMoveDownParentSiblingTitle',
		callback() {
			move('downParentSibling', { scrollStyle: keyboardNav_module.options.nonLinearScrollStyle.value });
		}
	},
	moveUpThread: {
		type: 'keycode',
		include: ['comments'],
		value: [75, true, false, true, false],
		description: 'keyboardNavMoveUpThreadDesc',
		title: 'keyboardNavMoveUpThreadTitle',
		callback() {
			move('upThread', { scrollStyle: keyboardNav_module.options.nonLinearScrollStyle.value });
		}
	},
	moveDownThread: {
		type: 'keycode',
		include: ['comments'],
		value: [74, true, false, true, false],
		description: 'keyboardNavMoveDownThreadDesc',
		title: 'keyboardNavMoveDownThreadTitle',
		callback() {
			move('downThread', { scrollStyle: keyboardNav_module.options.nonLinearScrollStyle.value });
		}
	},
	moveToTopComment: {
		type: 'keycode',
		include: ['comments'],
		value: [84, false, false, false, false],
		description: 'keyboardNavMoveToTopCommentDesc',
		title: 'keyboardNavMoveToTopCommentTitle',
		callback() {
			move('toTopComment', { scrollStyle: keyboardNav_module.options.nonLinearScrollStyle.value });
		}
	},
	moveToParent: {
		type: 'keycode',
		include: ['comments'],
		value: [80, false, false, false, false],
		description: 'keyboardNavMoveToParentDesc',
		title: 'keyboardNavMoveToParentTitle',
		callback() {
			move('toParent', { scrollStyle: keyboardNav_module.options.nonLinearScrollStyle.value });
		}
	},
	undoMove: {
		type: 'keycode',
		value: [90, false, true, false, false],
		description: 'keyboardNavUndoMoveDesc',
		title: 'keyboardNavUndoMoveTitle',
		callback() {
			move('previous', { scrollStyle: keyboardNav_module.options.nonLinearScrollStyle.value });
		}
	},
	showParents: {
		type: 'keycode',
		requiresModule: showParent_namespaceObject,
		value: [80, false, false, true, false],
		description: 'keyboardNavShowParentsDesc',
		title: 'keyboardNavShowParentsTitle',
		callback(selected = getSelected()) {
			startHover(assertElement(selected.element.querySelector('.buttons .bylink[href^="#"]')));
		}
	},
	followLink: {
		type: 'keycode',
		include: ['linklist', 'modqueue', 'profile', 'comments', 'search'],
		value: [13, false, false, false, false],
		description: 'keyboardNavFollowLinkDesc',
		title: 'keyboardNavFollowLinkTitle',
		callback() {
			followLink();
		}
	},
	followLinkNewTab: {
		type: 'keycode',
		include: ['linklist', 'modqueue', 'profile', 'comments', 'search'],
		value: [13, false, false, true, false],
		description: 'keyboardNavFollowLinkNewTabDesc',
		title: 'keyboardNavFollowLinkNewTabTitle',
		callback() {
			followLink(true);
		}
	},
	toggleExpando: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [88, false, false, false, false],
		description: 'keyboardNavToggleExpandoDesc',
		title: 'keyboardNavToggleExpandoTitle',
		callback(selected = getSelected()) {
			toggleThingExpandos(selected, {
				scrollOnToggle: keyboardNav_module.options.scrollOnExpando.value,
				isUserAction: true
			});
		}
	},
	scrollOnExpando: {
		type: 'boolean',
		value: true,
		description: 'keyboardNavScrollOnExpandoDesc',
		title: 'keyboardNavScrollOnExpandoTitle',
		advanced: true
	},
	imageSizeUp: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [187, false, false, false, false],
		description: 'keyboardNavImageSizeUpDesc',
		title: 'keyboardNavImageSizeUpTitle',
		callback() {
			imageResize({ factor: 1.3 });
		}
	},
	imageSizeDown: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [189, false, false, false, false],
		description: 'keyboardNavImageSizeDownDesc',
		title: 'keyboardNavImageSizeDownTitle',
		callback() {
			imageResize({ factor: 1 / 1.3 });
		}
	},
	imageSizeUpFine: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [187, false, false, true, false],
		description: 'keyboardNavImageSizeUpFineDesc',
		title: 'keyboardNavImageSizeUpFineTitle',
		callback() {
			imageResize({ factor: 1.1 });
		}
	},
	imageSizeDownFine: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [189, false, false, true, false],
		description: 'keyboardNavImageSizeDownFineDesc',
		title: 'keyboardNavImageSizeDownFineTitle',
		callback() {
			imageResize({ factor: 1 / 1.1 });
		}
	},
	imageSizeAnyHeight: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [39, false, false, true, false],
		description: 'keyboardNavImageSizeAnyHeightDesc',
		title: 'keyboardNavImageSizeAnyHeightTitle',
		callback() {
			imageResize({ removeHeightRestriction: true });
		}
	},
	imageMoveUp: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [38, false, true, false, false],
		description: 'keyboardNavImageMoveUpDesc',
		title: 'keyboardNavImageMoveUpTitle',
		callback() {
			imageMove(0, -50);
		}
	},
	imageMoveDown: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [40, false, true, false, false],
		description: 'keyboardNavImageMoveDownDesc',
		title: 'keyboardNavImageMoveDownTitle',
		callback() {
			imageMove(0, 50);
		}
	},
	imageMoveLeft: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [37, false, true, false, false],
		description: 'keyboardNavImageMoveLeftDesc',
		title: 'keyboardNavImageMoveLeftTitle',
		callback() {
			imageMove(-50, 0);
		}
	},
	imageMoveRight: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [39, false, true, false, false],
		description: 'keyboardNavImageMoveRightDesc',
		title: 'keyboardNavImageMoveRightTitle',
		callback() {
			imageMove(50, 0);
		}
	},
	previousGalleryImage: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [219, false, false, false, false],
		description: 'keyboardNavPreviousGalleryImageDesc',
		title: 'keyboardNavPreviousGalleryImageTitle',
		callback() {
			getMostVisibleElementInThingByQuery('.res-gallery .res-gallery-previous', ASSERT).click();
		}
	},
	nextGalleryImage: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [221, false, false, false, false],
		description: 'keyboardNavNextGalleryImageDesc',
		title: 'keyboardNavNextGalleryImageTitle',
		callback() {
			getMostVisibleElementInThingByQuery('.res-gallery .res-gallery-next', ASSERT).click();
		}
	},
	toggleViewImages: {
		type: 'keycode',
		requiresModule: showImages_namespaceObject,
		value: [88, false, false, true, false],
		description: 'keyboardNavToggleViewImagesDesc',
		title: 'keyboardNavToggleViewImagesTitle',
		callback: toggleViewImages
	},
	toggleChildren: {
		type: 'keycode',
		include: ['comments', 'inbox'],
		value: [13, false, false, false, false],
		description: 'keyboardNavToggleChildrenDesc',
		title: 'keyboardNavToggleChildrenTitle',
		callback: toggleChildren
	},
	followComments: {
		type: 'keycode',
		include: ['linklist', 'modqueue', 'profile', 'search'],
		value: [67, false, false, false, false],
		description: 'keyboardNavFollowCommentsDesc',
		title: 'keyboardNavFollowCommentsTitle',
		callback() {
			followComments();
		}
	},
	followCommentsNewTab: {
		type: 'keycode',
		include: ['linklist', 'modqueue', 'profile', 'search'],
		value: [67, false, false, true, false],
		description: 'keyboardNavFollowCommentsNewTabDesc',
		title: 'keyboardNavFollowCommentsNewTabTitle',
		callback() {
			followComments(true);
		}
	},
	followLinkAndCommentsNewTab: {
		type: 'keycode',
		requiresModule: singleClick_namespaceObject,
		value: [76, false, false, false, false],
		description: 'keyboardNavFollowLinkAndCommentsNewTabDesc',
		title: 'keyboardNavFollowLinkAndCommentsNewTabTitle',
		callback() {
			followLinkAndComments();
		}
	},
	followLinkAndCommentsNewTabBG: {
		type: 'keycode',
		requiresModule: singleClick_namespaceObject,
		value: [76, false, false, true, false],
		description: 'keyboardNavFollowLinkAndCommentsNewTabBGDesc',
		title: 'keyboardNavFollowLinkAndCommentsNewTabBGTitle',
		callback() {
			followLinkAndComments(true);
		}
	},
	upVote: {
		type: 'keycode',
		include: ['linklist', 'commentsLinklist', 'modqueue', 'profile', 'comments', 'inbox', 'search'],
		value: [65, false, false, false, false],
		description: 'keyboardNavUpVoteDesc',
		title: 'keyboardNavUpVoteTitle',
		mustBeLoggedIn: true,
		callback() {
			vote('upmod');
		}
	},
	downVote: {
		type: 'keycode',
		include: ['linklist', 'commentsLinklist', 'modqueue', 'profile', 'comments', 'inbox', 'search'],
		value: [90, false, false, false, false],
		description: 'keyboardNavDownVoteDesc',
		title: 'keyboardNavDownVoteTitle',
		mustBeLoggedIn: true,
		callback() {
			vote('downmod');
		}
	},
	upVoteWithoutToggling: {
		type: 'keycode',
		include: ['linklist', 'commentsLinklist', 'modqueue', 'profile', 'comments', 'inbox', 'search'],
		value: [65, false, false, true, false],
		description: 'keyboardNavUpVoteWithoutTogglingDesc',
		title: 'keyboardNavUpVoteWithoutTogglingTitle',
		mustBeLoggedIn: true,
		callback() {
			vote('upmod', true);
		}
	},
	downVoteWithoutToggling: {
		type: 'keycode',
		include: ['linklist', 'commentsLinklist', 'modqueue', 'profile', 'comments', 'inbox', 'search'],
		value: [90, false, false, true, false],
		description: 'keyboardNavDownVoteWithoutTogglingDesc',
		title: 'keyboardNavDownVoteWithoutTogglingTitle',
		mustBeLoggedIn: true,
		callback() {
			vote('downmod', true);
		}
	},
	savePost: {
		type: 'keycode',
		include: ['linklist', 'modqueue', 'profile', 'comments'],
		value: [83, false, false, false, false],
		description: 'keyboardNavSavePostDesc',
		title: 'keyboardNavSavePostTitle',
		mustBeLoggedIn: true,
		callback() {
			click(getFirstElementInThingByQuery('.link-save-button a, .link-unsave-button a', ASSERT));
		}
	},
	saveComment: {
		type: 'keycode',
		include: ['comments', 'commentsLinklist'],
		value: [83, false, false, true, false],
		description: 'keyboardNavSaveCommentDesc',
		title: 'keyboardNavSaveCommentTitle',
		mustBeLoggedIn: true,
		callback() {
			click(getFirstElementInThingByQuery('.comment-save-button > a', ASSERT));
		}
	},
	saveRES: {
		type: 'keycode',
		requiresModule: saveComments_namespaceObject,
		value: [83, false, false, false, false],
		description: 'keyboardNavSaveRESDesc',
		title: 'keyboardNavSaveRESTitle',
		callback() {
			click(getFirstElementInThingByQuery('.saveComments, .unsaveComments', ASSERT));
			showEducationalNotification();
		}
	},
	reply: {
		type: 'keycode',
		include: ['comments', 'inbox'],
		value: [82, false, false, false, false],
		description: 'keyboardNavReplyDesc',
		title: 'keyboardNavReplyTitle',
		mustBeLoggedIn: true,
		callback: reply
	},
	edit: {
		type: 'keycode',
		include: ['comments', 'profile'],
		value: [69, false, false, false, false],
		description: 'keyboardNavEditDesc',
		title: 'keyboardNavEditTitle',
		mustBeLoggedIn: true,
		callback() {
			click(getFirstElementInThingByQuery('.entry .edit-usertext', ASSERT, getSelected()));
		}
	},
	showChildComments: {
		type: 'keycode',
		requiresModule: hideChildComments_namespaceObject,
		value: [67, false, false, false, false],
		description: 'keyboardNavShowChildCommentsDesc',
		title: 'keyboardNavShowChildCommentsTitle',
		callback(selected = getSelected()) {
			hideChildComments_toggle(selected);
		}
	},
	showAllChildComments: {
		type: 'keycode',
		requiresModule: hideChildComments_namespaceObject,
		value: [67, false, false, true, false],
		description: 'keyboardNavShowAllChildCommentsDesc',
		title: 'keyboardNavShowAllChildCommentsTitle',
		callback() {
			toggleAll();
		}
	},
	followPermalink: {
		type: 'keycode',
		include: ['comments', 'commentsLinklist', 'inbox'],
		value: [89, false, false, false, false],
		description: 'keyboardNavFollowPermalinkDesc',
		title: 'keyboardNavFollowPermalinkTitle',
		callback() {
			followPermalink();
		}
	},
	followPermalinkNewTab: {
		type: 'keycode',
		include: ['comments', 'commentsLinklist', 'inbox'],
		value: [89, false, false, true, false],
		description: 'keyboardNavFollowPermalinkNewTabDesc',
		title: 'keyboardNavFollowPermalinkNewTabTitle',
		callback() {
			followPermalink(true);
		}
	},
	followSubreddit: {
		type: 'keycode',
		include: ['linklist', 'modqueue', 'profile', 'search'],
		value: [82, false, false, false, false],
		description: 'keyboardNavFollowSubredditDesc',
		title: 'keyboardNavFollowSubredditTitle',
		callback() {
			followSubreddit();
		}
	},
	followSubredditNewTab: {
		type: 'keycode',
		include: ['linklist', 'modqueue', 'profile', 'search'],
		value: [82, false, false, true, false],
		description: 'keyboardNavFollowSubredditNewTabDesc',
		title: 'keyboardNavFollowSubredditNewTabTitle',
		callback() {
			followSubreddit(true);
		}
	},
	followProfile: {
		type: 'keycode',
		include: ['linklist', 'comments', 'commentsLinklist', 'inbox', 'modqueue', 'search'],
		value: [85, false, false, false, false],
		description: 'keyboardNavFollowProfileDesc',
		title: 'keyboardNavFollowProfileTitle',
		callback() {
			followProfile();
		}
	},
	followProfileNewTab: {
		type: 'keycode',
		include: ['linklist', 'comments', 'commentsLinklist', 'inbox', 'modqueue', 'search'],
		value: [85, false, false, true, false],
		description: 'keyboardNavFollowProfileNewTabDesc',
		title: 'keyboardNavFollowProfileNewTabTitle',
		callback() {
			followProfile(true);
		}
	},
	toggleCommentNavigator: {
		type: 'keycode',
		requiresModule: commentNavigator_namespaceObject,
		value: [78, false, false, false, false],
		description: 'keyboardNavToggleCommentNavigatorDesc',
		title: 'keyboardNavToggleCommentNavigatorTitle',
		callback() {
			commentNavigator_toggle(true);
		}
	},
	commentNavigatorMoveUp: {
		type: 'keycode',
		requiresModule: commentNavigator_namespaceObject,
		value: [38, false, false, true, false],
		description: 'keyboardNavCommentNavigatorMoveUpDesc',
		title: 'keyboardNavCommentNavigatorMoveUpTitle',
		callback() {
			commentNavigator_move('up');
		}
	},
	commentNavigatorMoveDown: {
		type: 'keycode',
		requiresModule: commentNavigator_namespaceObject,
		value: [40, false, false, true, false],
		description: 'keyboardNavCommentNavigatorMoveDownDesc',
		title: 'keyboardNavCommentNavigatorMoveDownTitle',
		callback() {
			commentNavigator_move('down');
		}
	},
	focusOnSearchBox: {
		type: 'keycode',
		value: [191, true, false, false, false],
		description: 'keyboardNavFocusOnSearchBoxDesc',
		title: 'keyboardNavFocusOnSearchBoxTitle',
		callback() {
			document.querySelector('#search input[name="q"]').focus();
		}
	},
	useGoMode: {
		type: 'boolean',
		value: true,
		description: 'keyboardNavUseGoModeDesc',
		title: 'keyboardNavUseGoModeTitle'
	},
	goMode: {
		type: 'keycode',
		value: [71, false, false, false, false],
		description: 'keyboardNavGoModeDesc',
		title: 'keyboardNavGoModeTitle',
		dependsOn: options => options.useGoMode.value,
		callback() {
			if (keyboardNav_module.options.useGoMode.value) toggleGoMode();
		}
	},
	inbox: {
		type: 'keycode',
		value: [73, false, false, false, false],
		description: 'keyboardNavInboxDesc',
		title: 'keyboardNavInboxTitle',
		callback() {
			keyboardNav_navigateTo(false, '/message/inbox/');
		},
		goMode: true
	},
	inboxNewTab: {
		type: 'keycode',
		value: [73, false, false, true, false],
		description: 'keyboardNavInboxNewTabDesc',
		title: 'keyboardNavInboxNewTabTitle',
		callback() {
			keyboardNav_navigateTo(true, '/message/inbox/');
		},
		goMode: true
	},
	modmail: {
		type: 'keycode',
		value: [77, false, false, false, false],
		description: 'keyboardNavModmailDesc',
		title: 'keyboardNavModmailTitle',
		callback() {
			keyboardNav_navigateTo(false, '/message/moderator/');
		},
		goMode: true
	},
	modmailNewTab: {
		type: 'keycode',
		value: [77, false, false, true, false],
		description: 'keyboardNavModmailNewTabDesc',
		title: 'keyboardNavModmailNewTabTitle',
		callback() {
			keyboardNav_navigateTo(true, '/message/moderator/');
		},
		goMode: true
	},
	profile: {
		type: 'keycode',
		value: [85, false, false, false, false],
		description: 'keyboardNavProfileDesc',
		title: 'keyboardNavProfileTitle',
		callback() {
			const user = loggedInUser();
			if (user) keyboardNav_navigateTo(false, `/user/${user}`);
		},
		goMode: true
	},
	profileNewTab: {
		type: 'keycode',
		value: [85, false, false, true, false],
		description: 'keyboardNavProfileNewTabDesc',
		title: 'keyboardNavProfileNewTabTitle',
		callback() {
			const user = loggedInUser();
			if (user) keyboardNav_navigateTo(true, `/user/${user}`);
		},
		goMode: true
	},
	frontPage: {
		type: 'keycode',
		value: [70, false, false, false, false],
		description: 'keyboardNavFrontPageDesc',
		title: 'keyboardNavFrontPageTitle',
		callback() {
			keyboardNav_navigateTo(false, '/');
		},
		goMode: true
	},
	slashAll: {
		type: 'keycode',
		value: [65, true, false, false, false],
		description: 'keyboardNavSlashAllDesc',
		title: 'keyboardNavSlashAllTitle',
		callback() {
			keyboardNav_navigateTo(false, '/r/all');
		},
		goMode: true
	},
	subredditFrontPage: {
		type: 'keycode',
		value: [70, false, false, true, false],
		description: 'keyboardNavsSubredditFrontPageDesc',
		title: 'keyboardNavsSubredditFrontPageTitle',
		callback() {
			const sub = currentSubreddit();
			if (sub) keyboardNav_navigateTo(false, `/r/${sub}`);
		},
		goMode: true
	},
	random: {
		type: 'keycode',
		value: [89, true, false, false, false],
		description: 'keyboardNavRandomDesc',
		title: 'keyboardNavRandomTitle',
		callback() {
			keyboardNav_navigateTo(false, '/r/random');
		},
		goMode: true
	},
	nextPage: {
		type: 'keycode',
		include: ['linklist', 'commentsLinklist', 'modqueue', 'profile', 'inbox'],
		value: [78, false, false, false, false],
		description: 'keyboardNavNextPageDesc',
		title: 'keyboardNavNextPageTitle',
		callback: nextPage,
		goMode: true
	},
	prevPage: {
		type: 'keycode',
		include: ['linklist', 'commentsLinklist', 'modqueue', 'profile', 'inbox'],
		value: [80, false, false, false, false],
		description: 'keyboardNavPrevPageDesc',
		title: 'keyboardNavPrevPageTitle',
		callback: prevPage,
		goMode: true
	},
	overviewLegacy: {
		type: 'keycode',
		include: ['d2x', 'profile'],
		value: [79, false, false, true, false],
		description: 'keyboardNavOverviewLegacyDesc',
		title: 'keyboardNavOverviewLegacyTitle',
		callback() {
			const currentUser = currentUserProfile();
			if (currentUser) keyboardNav_navigateTo(false, `/user/${currentUser}/overview`);
		},
		goMode: true
	},
	profileView: {
		type: 'keycode',
		include: ['d2x', 'profile'],
		value: [80, false, false, true, false],
		description: 'keyboardNavProfileViewDesc',
		title: 'keyboardNavProfileViewTitle',
		callback() {
			const currentUser = currentUserProfile();
			if (currentUser) keyboardNav_navigateTo(false, `/user/${currentUser}`);
		},
		goMode: true
	}
};

keyboardNav_module.beforeLoad = () => {
	keyboardNav_registerCommandLine();

	if (keyboardNav_module.options.linkNumbers.value) {
		selectedEntry_addListener(updateLinkAnnotations, 'beforePaint');
		watchForElements(['selfText'], null, element => {
			const thing = Thing_Thing.from(element);
			if (selectedThing === thing) updateLinkAnnotations(thing);
		});
	}
};

keyboardNav_module.go = () => {
	window.addEventListener('keydown', handleKeyPress, true);
};

function keyboardNav_registerCommandLine() {
	registerCommand(/\d+/, '[number] - navigates to the link with that number (if annotation exists) or rank (link pages)', () => {}, command => {
		const number = parseInt(command, 10);
		const annotation = linkAnnotations[number - 1];
		if (annotation) {
			if (!document.contains(annotation.link)) {
				console.log('Annotation refers to removed link; ignoring');
				return;
			}
			openLink(number - 1);
		} else {
			followLinkByRank(number);
		}
	});
}

let linkAnnotations = [];

function updateLinkAnnotations(selected) {
	for (const _ref of linkAnnotations) {
		const { annotation } = _ref;
		annotation.remove();
	}linkAnnotations = Array.from(selected && selected.entry.querySelectorAll('div.md a:not(.noKeyNav)') || []).filter(link => !isCommentCode(link) && !isEmptyLink(link)).map((link, i) => {
		const number = i + 1;
		const title = number < 10 ? `press ${number} to open link` : number === 10 ? 'press 0 to open link' : `press ${keycode_niceKeyCode(keyboardNav_module.options.toggleCmdLine.value)} then ${number} and Enter to open link`;

		const $annotation = $(string_namespaceObject.html`<span class="noCtrlF keyNavAnnotation" data-text="[${number}]" title="${title}"></span>`);

		if (keyboardNav_module.options.linkNumberPosition.value === 'right') $annotation.insertAfter(link);else $annotation.insertBefore(link);

		return { annotation: $annotation.get(0), link };
	});
}

function toggleKeyNavHelp() {
	const slideSpeed = 400;
	if (!drawHelp().attr('shown')) {
		drawHelp().attr('shown', 'false');
		drawHelp().css({ right: '-350px' });
		drawHelp().show();
	}
	if (drawHelp().attr('shown') === 'true') {
		drawHelp().animate({
			right: '-350px'
		}, slideSpeed);
		drawHelp().attr('shown', 'false');
	} else {
		drawHelp().animate({
			right: '20px'
		}, slideSpeed);
		drawHelp().attr('shown', 'true');
	}
}

const drawHelp = once_default()(() => {
	const keys = filterMap(getActiveCommandOptions(), opt => {
		let keyCode = keycode_niceKeyCode(opt.value);
		if (opt.goMode && keyboardNav_module.options.useGoMode.value) {
			keyCode = `${keycode_niceKeyCode(keyboardNav_module.options.goMode.value)}  ${keyCode}`;
		}

		return [{ keyCode, description: i18n(opt.description) }];
	});

	return $(string_namespaceObject.html`
		<div id="keyHelp">
			<table>
				<thead>
					<tr><th>Key</th><th>Function</th></tr>
				</thead>
				<tbody>
					${keys.map(({ keyCode, description }) => string_namespaceObject._html`
						<tr><td>${keyCode}</td><td>${description}</td></tr>
					`)}
				</tbody>
			</table>
		</div>
	`).appendTo(document.body);
});

function getLinkKeys() {
	const altModeModifier = keyboardNav_module.options.linkNumberAltModeModifier.value;
	const keys = [];

	function addKey(key, index) {
		keys.push({
			value: [key, false, false, false, false],
			callback() {
				openLink(index);
			}
		});

		if (altModeModifier !== 'none') {
			keys.push({
				value: [key, altModeModifier === 'alt', false, altModeModifier === 'shift', false],
				callback() {
					openLink(index, true);
				}
			});
		}
	}

	if (keyboardNav_module.options.linkNumbers.value) {
		[49, 50, 51, 52, 53, 54, 55, 56, 57, 48].forEach(addKey);
		[97, 98, 99, 100, 101, 102, 103, 104, 105, 96].forEach(addKey);
	}

	return keys;
}

const getActiveCommandOptions = once_default()(() => filterMap(Object.values(keyboardNav_module.options), option => {
	if (option.type === 'keycode' && option.callback && (!option.dependsOn || option.dependsOn(keyboardNav_module.options)) && (!option.include || matchesPageLocation(option.include)) && (!option.mustBeLoggedIn || loggedInUser()) && (!option.requiresModule || modules_isRunning(option.requiresModule))) {
		return [option];
	}
}));

const _commandLookup = once_default()(() => {
	const lookup = {};
	for (const option of [...getActiveCommandOptions(), ...getLinkKeys()]) {
		const hash = hashKeyArray(option.value);
		if (!lookup[hash]) {
			lookup[hash] = [];
		}

		lookup[hash].push(option);
	}
	return lookup;
});

function handleKeyPress(e) {
	if (konamiActive()) return;

	if (document.activeElement && ['A', 'BUTTON'].includes(document.activeElement.tagName)) {
		const hasDefaultBehavior = [NAMED_KEYS.Tab, NAMED_KEYS.Enter, NAMED_KEYS.Space].includes(e.key);
		if (hasDefaultBehavior) return;
	} else if (document.activeElement && document.activeElement.tagName !== 'BODY') {
		return;
	}

	const hash = hashKeyEvent(e);
	const options = (_commandLookup()[hash] || []).filter(v => {
		if (v.goMode) return keyboardNav_module.options.useGoMode.value === goModeActive;else return !goModeActive;
	});

	if (options.length) {
		handleCallbacks(options);
		e.preventDefault();
		e.target.blur();
	}
}

async function handleCallbacks(options) {
	if (options.some(v => v.goMode)) {
		if (goModeActive) toggleGoMode();

		if (options.length > 1) {
			const shortcut = keycode_niceKeyCode(options[0].value);
			options = await promptUniqueShortcut(shortcut, options);
		}
	}

	for (const option of options) {
		try {
			option.callback();
		} catch (e) {
			console.error('Could not execute callback', i18n(option.title), e);
		}
	}
}

const promptUniqueShortcut = memoize_default()(async (shortcut, options) => {
	const question = i18n('keyboardNavAmbiguousShortcutPrompt', i18n(keyboardNav_module.moduleName), `<i>${shortcut}</i>`, '<br><br>', `<i>${shortcut}</i>`);
	const optionButtons = options.map(option => [option, $(`<button style="width: 100%; margin-top: 2px;">${i18n(option.description)}</button>`).get(0)]);
	const followUp = i18n('keyboardNavAmbiguousShortcutPromptFollowUp', makeUrlHashLink(keyboardNav_module.moduleID, undefined, i18n(keyboardNav_module.moduleName)));

	const message = $(`<div>${question}</div>`).append(optionButtons.map(([, button]) => button)).append(`<br><br><small>(${followUp})</small>`).get(0);

	const notification = await notifications_showNotification({
		moduleID: keyboardNav_module.moduleID,
		header: 'Ambiguous shortcut',
		message,
		noDisable: true,
		closeDelay: Infinity
	});

	const preservedOption = await Promise.race(optionButtons.map(([option, button]) => waitForEvent(button, 'click').then(() => option)));

	Object.entries(keyboardNav_module.options).filter(([, value]) => value !== preservedOption && options.includes(value)).forEach(([name]) => {
		options_set(keyboardNav_module, name, [-1, false, false, false, false]);
	});

	notification.close();

	return [preservedOption];
});

function getSelected() {
	const selected = selectedThing;
	if (!selected) throw new Error('A entry must be selected');
	if (!selected.isVisible()) throw new Error('Entry must be visible');
	return selected;
}

const ASSERT = true;
const NOASSERT = false;

function assertElement(element) {
	if (!element) throw new Error('Element not available');
	return element;
}

function getFirstElementInThingByQuery(query, assertExistance, thing = getSelected()) {
	const element = thing.entry.querySelector(query);
	return assertExistance ? assertElement(element) : element;
}

function getElementsInThingByQuery(query, assertLength, thing = getSelected()) {
	const elements = Array.from(thing.entry.querySelectorAll(query));
	if (assertLength) assertElement(elements[0]);
	return elements;
}

function getMostVisibleElementInThingByQuery(query, assertLength, thing) {
	return maxBy_default()(getElementsInThingByQuery(query, assertLength, thing), getPercentageVisibleYAxis);
}

function keyboardNav_hideLink(selected = getSelected()) {
	const hide = assertElement(selected.getHideElement());

	if (keyboardNav_module.options.onHideMoveDown.value) {
		move('down', { allowMediaBrowse: true, scrollStyle: 'none' }, moveDownFallback);
	}

	click(hide);
}

function followSubreddit(newWindow = false, selected = getSelected()) {
	const a = downcast(assertElement(selected.getSubredditLink()), HTMLAnchorElement);
	keyboardNav_navigateTo(newWindow, a.href);
}

function followProfile(newWindow = false, selected = getSelected()) {
	keyboardNav_navigateTo(newWindow, selected.getAuthorUrl());
}

function toggleChildren(selected = getSelected()) {
	if (selected.element.classList.contains('link')) return;

	click(assertElement(getFirstElementInThingByQuery('span.deepthread > a', NOASSERT, selected) || getFirstElementInThingByQuery('span.morecomments > a', NOASSERT, selected) || getFirstElementInThingByQuery('a.expand', NOASSERT, selected)));
}

function imageResize({ factor = 1, removeHeightRestriction = false }) {
	const mostVisible = getMostVisibleElementInThingByQuery('.res-media-zoomable', ASSERT);
	if (removeHeightRestriction) mostVisible.style.maxHeight = 'none';
	resizeMedia(mostVisible, mostVisible.clientWidth * factor);
}

function imageMove(deltaX, deltaY) {
	const mostVisible = getMostVisibleElementInThingByQuery('.res-media-movable', ASSERT);
	moveMedia(mostVisible, deltaX, deltaY);
}

function followLink(newWindow = false, selected = getSelected()) {
	if (isPageType('comments') && !selected.element.classList.contains('link')) return;

	const a = selected.getPostLink();
	keyboardNav_navigateTo(newWindow, a.href);
}

function followLinkByRank(num) {
	const target = Thing_Thing.visibleThings().find(v => v.getRank() === num);
	if (!target) throw new Error(`Could not find visible entry at rank ${num}`);
	selectedEntry_select(target);
	followLink();
}

function followPermalink(newWindow = false) {
	const a = downcast(getFirstElementInThingByQuery('a.bylink', ASSERT), HTMLAnchorElement);
	keyboardNav_navigateTo(newWindow, a.href);
}

function followComments(newWindow = false, selected = getSelected()) {
	const a = selected.getCommentsLink();
	keyboardNav_navigateTo(newWindow, a.href);
}

function followLinkAndComments(background = false, selected = getSelected()) {
	openTabs(selected, !background);
}

function vote(way, preventToggle = false, selected = getSelected()) {
	const button = assertElement(way === 'upmod' ? selected.getUpvoteButton() : selected.getDownvoteButton());

	if (button.classList.contains('archived')) {} else if (isVotingBlocked()) {
		notifyNoVote();
	} else if (!preventToggle || !button.classList.contains(way)) {
		click(button);
	}

	if (selected.isComment()) {
		if (keyboardNav_module.options.onVoteCommentMoveDown.value) keyboardNav_module.options.moveDownComment.callback();
	} else {
		if (keyboardNav_module.options.onVoteMoveDown.value) keyboardNav_module.options.moveDown.callback();
	}
}

function reply(selected = getSelected()) {
	if (selected.element.classList.contains('link') && isPageType('comments')) {
		const $target = $('.usertext-edit textarea[name=text]:first');
		if ($target.filter(':visible').length) {
			$target.focus();
			return;
		}
	}

	click(assertElement(getFirstElementInThingByQuery('.buttons a[onclick*=reply]', NOASSERT, selected) || getFirstElementInThingByQuery('.buttons a.comments, .buttons a.bylink', NOASSERT, selected)));
}

function keyboardNav_navigateTo(newWindow, href) {
	if (newWindow) {
		openNewTab(href, keyboardNav_module.options.followLinkNewTabFocus.value);
	} else {
		location.href = href;
	}
}

const goModePanel = once_default()(() => {
	const goModes = getActiveCommandOptions().filter(opt => opt.goMode).map(opt => ({ key: i18n(opt.title), niceKeyCode: keycode_niceKeyCode(opt.value) }));

	return $(string_namespaceObject.html`
		<div id="goModePanel" class="RESDialogSmall">
			<h3>Press a key to go:</h3>
			<div class="RESCloseButton">&times;</div>
			<div class="RESDialogContents">
				<table>
					${goModes.map(({ niceKeyCode, key }) => string_namespaceObject._html`
						<tr>
							<td>${niceKeyCode}</td>
							<td class="arrow">&rarr;</td>
							<td>${key}</td>
						</tr>
					`)}
				</table>
			</div>
		</div>
	`).find('.RESCloseButton').click(toggleGoMode).end();
});

let goModeActive = false;

function toggleGoMode() {
	goModeActive = !goModeActive;
	if (goModeActive) {
		$('body').on('keyup', handleGoModeEscapeKey);
		goModePanel().appendTo(document.body).fadeIn();
	} else {
		goModePanel().fadeOut();
		$('body').off('keyup', handleGoModeEscapeKey);
	}
}

function handleGoModeEscapeKey(event) {
	if (event.key === NAMED_KEYS.Escape) {
		toggleGoMode();
	}
}

function moveDownFallback() {
	const bump = modules_isRunning(neverEndingReddit_namespaceObject) && (!selectedThing || [selectedThing, undefined].includes(last_default()(Thing_Thing.visibleThings())));
	if (bump) return loadNextPage(true);
}

function nextPage() {
	if (modules_isRunning(neverEndingReddit_namespaceObject)) {
		loadNextPage(true);
	} else {
		const nextPrevLinks = getNextPrevLinks();
		location.href = assertElement(nextPrevLinks.next).getAttribute('href');
	}
}

function prevPage() {
	if (!modules_isRunning(neverEndingReddit_namespaceObject)) {
		const nextPrevLinks = getNextPrevLinks();
		location.href = assertElement(nextPrevLinks.prev).getAttribute('href');
	}
}

function openLink(index, altMode = false) {
	const link = linkAnnotations[index] && linkAnnotations[index].link;
	if (!link) throw Error(`Link annotation ${index} is not available`);

	const expando = getLinkExpando(link);
	if (expando && keyboardNav_module.options.linkToggleExpando.value !== altMode) {
		click(expando.button);
	} else if (keyboardNav_module.options.linkNewTab.value) {
		openNewTab(link.href, keyboardNav_module.options.followLinkNewTabFocus.value);
	} else {
		location.href = link.href;
	}
}
// CONCATENATED MODULE: ./lib/modules/RESTips.js
















const RESTips_module = new Module('RESTips');

RESTips_module.moduleName = 'resTipsName';
RESTips_module.category = 'aboutCategory';
RESTips_module.description = 'resTipsDesc';
RESTips_module.options = {
	menuItem: {
		title: 'RESTipsMenuItemTitle',
		type: 'boolean',
		value: true,
		description: 'RESTipsMenuItemDesc'
	},
	dailyTip: {
		title: 'RESTipsDailyTipTitle',
		type: 'boolean',
		value: true,
		description: 'RESTipsDailyTipDesc'
	},
	newFeatureTips: {
		title: 'RESTipsNewFeatureTipsTitle',
		type: 'boolean',
		value: true,
		description: 'RESTipsNewFeatureTipsDesc'
	}
};

const featureTipsStorage = storage_namespaceObject.wrapPrefix('RESTips.featureTips.', () => ({ enabled: true }));
const lastTooltipStorage = storage_namespaceObject.wrap('RESLastToolTip', 0);

RESTips_module.go = () => {
	if (RESTips_module.options.menuItem.value) {
		const $menuItem = $('<div>', {
			id: 'RESTipsMenuItem',
			text: i18n('tipsAndTricks')
		});

		addMenuItem($menuItem, () => {
			showOrdinaryTip('random');
		});
	}
};

let allowFeatureTips;
const RESTips_featureTips = new Map();
const featureTipReadyPromise = new Promise(resolve => {
	allowFeatureTips = () => resolve(true);
});

RESTips_module.afterLoad = async () => {
	const showsDailyTip = RESTips_module.options.dailyTip.value && (await dailyTip());
	if (RESTips_module.options.newFeatureTips.value && !showsDailyTip) allowFeatureTips();
};

const newFeatureTipsCheckbox = once_default()(() => $('<label><input type="checkbox" name="disableNewFeatureTipsCheckbox" checked />Show these tips when new features appear</label>').click(e => options_set(RESTips_module, 'newFeatureTips', e.target.checked)));

const addFeatureTip = memoize_default()(async (id, tip) => {
	tip.onHide = () => {
		featureTipsStorage.set(id, { enabled: false });
	};

	RESTips_featureTips.set(id, tip);

	tips.push(tip);

	if (!tip.quiet && (await featureTipReadyPromise) && (await featureTipsStorage.get(id).then(({ enabled }) => enabled))) showFeatureTip(id);
});

const showFeatureTip = mutex(id => {
	const tip = RESTips_featureTips.get(id);

	if (!tip) {
		console.error('Feature tip is not added', id);
		return;
	}

	if (tip.attachTo instanceof Element && !elementInViewport(tip.attachTo)) {
		console.log('Ignoring feature tip whose attachment element is not visible:', tip);
		return;
	}

	return showTip(tip, {
		title: 'New feature',
		classString: 'res-featureTip',
		buttonCustomHTML: newFeatureTipsCheckbox(),
		buttons: []
	});
});

async function dailyTip() {
	const lastCheck = await lastTooltipStorage.get();
	const now = Date.now();
	const delay = penalizedDelay(RESTips_module.moduleID, 'dailyTip', {
		value: DAY,
		default: DAY
	});
	if (now - lastCheck > delay) {
		lastTooltipStorage.set(now);
		if (lastCheck === 0) {
			await showOrdinaryTip();
		} else {
			alterFeaturePenalty(RESTips_module.moduleID, 'dailyTip', clamp_default()(MAX_PENALTY / tips.length, 3, 8));
			await showOrdinaryTip('random');
		}
		return true;
	}
	return false;
}

function generateContent({ message, keyboard, options }) {
	const description = [];

	if (message) description.push(message);

	if (keyboard) {
		const disabled = !modules_isEnabled(keyboardNav_namespaceObject);
		description.push(`<h2 class="keyboardNav${disabled ? 'keyboardNavDisabled' : ''}">`);
		description.push(`Keyboard Navigation${disabled ? ' (disabled)' : ''}`);
		description.push('</h2>');

		const keyboardTable = createElement_namespaceObject.table(keyboard, generateContentKeyboard);
		if (keyboardTable) description.push(keyboardTable);
	}

	if (options) {
		for (const option of options) {
			description.push('<h2 class="settingsPointer">');
			description.push('<span class="gearIcon"></span> RES Settings');
			description.push('</h2>');

			const optionTable = createElement_namespaceObject.table(option, generateContentOption);
			if (optionTable) description.push(optionTable);
		}
	}

	return $('<div />').html(description.join('\n'));
}

function generateContentKeyboard(keyboardNavOption) {
	const keyCode = keycode_niceKeyCode(keyboardNav_module.options[keyboardNavOption].value);
	if (!keyCode) return false;

	const description = [];
	description.push('<tr>');
	description.push(`<td><code>${keyCode.toLowerCase()}</code></td>`);
	description.push(`<td>${keyboardNavOption}</td>`);
	description.push('</tr><tr>');
	description.push('<td>&nbsp;</td>');
	description.push(`<td>${i18n(keyboardNav_module.options[keyboardNavOption].description)}</td>`);
	description.push('</tr>');

	return description;
}

function generateContentOption(option) {
	const mod = getUnchecked(option.moduleID);
	if (!mod) return false;

	const description = [];

	description.push('<tr>');
	description.push(`<td>${i18n(mod.category)}</td>`);

	description.push('<td>');
	description.push(makeUrlHashLink(option.moduleID, undefined, i18n(mod.moduleName)));
	description.push('</td>');

	description.push('<td>');
	description.push(option.key ? makeUrlHashLink(option.moduleID, option.key) : '&nbsp;');
	description.push('</td>');

	if (option.key && mod.options[option.key]) {
		description.push('</tr><tr>');
		description.push(`<td colspan="3">${i18n(mod.options[option.key].description)}</td>`);
	}
	description.push('</tr>');

	return description;
}

const tips = [{
	message: `
		Welcome to RES, a community-driven unofficial browser extension for Reddit. You can turn on, turn off, or change options for RES features using the gear icon link at the top right.
		<p>For feature requests, or just help getting a question answered, be sure to subscribe to <a href="/r/Enhancement">/r/Enhancement</a>.</p>
		<p>If RES has enhanced your reddit experience, please show your appreciation by <a href="#res:settings/contribute">donating or contributing!</a></p>
		`,
	attachTo: '#openRESPrefs',
	position: 5
}, {
	message: 'Click the tag icon next to a user to tag that user with any name you like - you can also color code the tag.',
	attachTo: '.RESUserTagImage',
	position: 3,
	options: [{ moduleID: 'userTagger' }]
}, {
	message: 'If your RES data gets deleted or you move to a new computer, you can restore it from backup. <br><br><b>Firefox</b> especially sometimes loses your RES settings and data. <br><br><a href="/r/Enhancement/wiki/backing_up_res_settings" target="_blank" rel="noopener noreferer">Learn where RES stores your data and settings</a></p>',
	title: 'Back up your RES data!'
}, {
	message: 'Don\'t forget to subscribe to <a href="/r/Enhancement">/r/Enhancement</a> to keep up to date on the latest versions of RES or suggest features! For bug reports, submit to <a href="/r/RESIssues">/r/RESIssues</a>'
}, {
	message: 'Don\'t want to see posts containing certain keywords? Want to filter out certain subreddits from /r/all? Try the filteReddit module!',
	options: [{ moduleID: 'filteReddit' }]
}, {
	message: 'Keyboard Navigation is one of the most underutilized features in RES. You should try it!',
	options: [{ moduleID: 'keyboardNav' }],
	keyboard: 'toggleHelp'
}, {
	message: 'Did you know you can configure the appearance of a number of things in RES? For example: Selected Entry lets you configure the look of the "selected" box, and commentBoxes lets you configure the borders / shadows.',
	options: [{
		moduleID: 'selectedEntry',
		key: 'setColors'
	}, {
		moduleID: 'commentStyle',
		key: 'commentBoxes'
	}]
}, {
	message: 'Do you subscribe to a ton of subreddits? Give the subreddit tagger a try; it can make your homepage a bit more readable.',
	options: [{
		moduleID: 'subRedditTagger'
	}]
}, {
	message: 'If you haven\'t tried it yet, Keyboard Navigation is great. Just hit ? while browsing for instructions.',
	options: [{
		moduleID: 'keyboardNav'
	}],
	keyboard: 'toggleHelp'
}, {
	message: 'Roll over a user\'s name to get information about them such as their karma, and how long they\'ve been a reddit user.',
	options: [{
		moduleID: 'userInfo',
		key: 'hoverInfo'
	}]
}, {
	message: 'Hover over the "parent" link in comments pages to see the text of the parent being referred to.',
	options: [{
		moduleID: 'showParent'
	}]
}, {
	message: 'You can configure the color and style of the User Highlighter module if you want to change how the highlights look.',
	options: [{
		moduleID: 'userHighlight'
	}]
}, {
	message: 'Not a fan of how comments pages look? You can change the appearance in the Style Tweaks module',
	options: [{
		moduleID: 'styleTweaks'
	}]
}, {
	message: 'Don\'t like the style in a certain subreddit? RES gives you a checkbox to disable styles individually - check the right sidebar!'
}, {
	message: 'Looking for posts by submitter, post with photos, or posts in IAmA form? Try out the comment navigator.'
}, {
	message: 'Have you seen the <a href="/r/Dashboard">RES Dashboard</a>? It allows you to do all sorts of great stuff, like keep track of lower traffic subreddits, and manage your <a href="/r/Dashboard#userTaggerContents">user tags</a> and <a href="/r/Dashboard#newCommentsContents">thread subscriptions</a>!',
	options: [{
		moduleID: 'dashboard'
	}]
}, {
	message: 'Sick of seeing these tips?  They only show up once every 24 hours, but you can disable that in the RES Tips and Tricks preferences.',
	options: [{
		moduleID: 'RESTips'
	}]
}, {
	message: 'Did you know that there is now a "keep me logged in" option in the Account Switcher? Turn it on if you want to stay logged in to Reddit when using the switcher!',
	options: [{
		moduleID: 'accountSwitcher',
		key: 'keepLoggedIn'
	}]
}, {
	message: 'See that little [vw] next to users you\'ve voted on?  That\'s their vote weight - it moves up and down as you vote the same user up / down.',
	options: [{
		moduleID: 'userTagger',
		key: 'vwNumber'
	}]
}];

const dailyTipsCheckbox = once_default()(() => $(`<label> <input type="checkbox" name="disableDailyTipsCheckbox" ${RESTips_module.options.dailyTip.value ? 'checked' : ''} />Show these tips once every 24 hours</label>`).click(e => options_set(RESTips_module, 'dailyTip', e.target.checked)));

let lastTip;

function showOrdinaryTip(change) {
	alterFeaturePenalty(RESTips_module.moduleID, 'dailyTip', 1);

	let currTipIndex = Math.max(tips.indexOf(lastTip), 0);
	let tip;
	while (!tip || tip.attachTo && !$(tip.attachTo).is(':visible')) {
		if (change === 'random') currTipIndex = random_default()(tips.length);else if (change === 'prev') currTipIndex -= 1;else if (change === 'next') currTipIndex += 1;else change = 'next';
		currTipIndex = positiveModulo(currTipIndex, tips.length);
		tip = tips[currTipIndex];
	}

	return showTip(tip, {
		buttons: [{
			name: 'Prev',
			onclick: () => showOrdinaryTip('prev')
		}, {
			name: 'Next',
			onclick: () => showOrdinaryTip('next')
		}],
		onClose() {
			alterFeaturePenalty(RESTips_module.moduleID, 'dailyTip', 4);
		},
		classString: 'res-ordinaryTip',
		buttonCustomHTML: dailyTipsCheckbox(),
		title: 'RES Tips and Tricks'
	});
}

function showTip(tip, guiderObj) {
	const { continuation } = lastTip = tip;
	if (continuation) {
		const origGuiderObj = Object.assign({}, guiderObj);
		const onclick = async () => {
			const upcomingId = continuation();
			let nextTip;
			while (!(nextTip = RESTips_featureTips.get(upcomingId))) {
				await new Promise(r => setTimeout(r, 100));
			}
			showTip(nextTip, origGuiderObj);
		};
		guiderObj.buttons = [...guiderObj.buttons, { name: 'More', onclick }];
	}

	const attachTo = tip.attachTo && $(tip.attachTo).get(0) || null;

	const toggleIncreasedZIndex = state => {
		if (attachTo) attachTo.classList.toggle('restips-increased-z-index', state);
	};

	return new Promise(resolve => {
		jqueryPlugins_guiders.hideAll();
		jqueryPlugins_guiders.createGuider(Object.assign({
			id: `res-guider-${performance.now()}`,
			closeOnEscape: true,
			xButton: true,
			description: generateContent(tip)
		}, guiderObj, tip, {
			onHide() {
				if (tip.onHide) tip.onHide();
				toggleIncreasedZIndex(false);
				resolve();
			},
			attachTo
		}));
		toggleIncreasedZIndex(true);
		jqueryPlugins_guiders.show();
	});
}
// CONCATENATED MODULE: ./lib/modules/announcements.js










const announcements_module = new Module('announcements');

announcements_module.moduleName = 'announcementsName';
announcements_module.category = 'coreCategory';
announcements_module.description = 'announcementsDesc';
announcements_module.hidden = true;

const announcements_subreddit = announcementsSubreddit;
const sourceUrl = `/r/${announcements_subreddit}/new.json?limit=1`;
const viewUrl = `/r/${announcements_subreddit}/new`;

const markedReadDate = storage_namespaceObject.wrap('RESmodules.announcement.markedReadDate', 0);
const lastUnreadDate = storage_namespaceObject.wrap('RESmodules.announcement.lastUnreadDate', 0);
const lastID = storage_namespaceObject.wrap('RESModules.announcement.lastAnnouncementID', null);

const archiveAfter = 31 * DAY;
const pizzazzAfter = 29 * DAY;

const recheckPostAfter = HOUR;

const announcements_now = Date.now();

let $biff;

announcements_module.go = async () => {
	if (isCurrentSubreddit(announcements_subreddit)) {
		setMarkedRead();
	} else {
		const post = await postForNotification();
		if (post) {
			notify(post);
		}
	}
};

async function postForNotification() {
	const post = await getLatestPost();
	if (!post) {
		return false;
	}
	cacheLatestPost(post);

	const result = await shouldNotify(post);
	return result ? post : false;
}

async function shouldNotify(post) {
	const createdDate = post.created_utc * 1000;

	if (createdDate + archiveAfter <= announcements_now) {
		return false;
	}

	if (createdDate <= (await markedReadDate.get())) {
		return false;
	}

	if (!isPostRelevant(post)) {
		return false;
	}

	return true;
}

const notify = once_default()(async post => {
	const url = post.id ? `/${post.id}` : viewUrl;
	const withPizzazz = (await lastUnreadDate.get()) + pizzazzAfter < announcements_now;
	const title = post.author ? i18n('announcementsNewPostByUser', announcements_subreddit, post.author) : i18n('announcementsNewPost', announcements_subreddit);

	addAnnouncementBiff(post, url, title, withPizzazz);

	const hasSeenNotification = await lastUnreadDate.has();
	if (hasSeenNotification) {
		announcements_addMenuItem(post, url, title);
	}
});

async function cacheLatestPost(post) {
	if (post.id !== (await lastID.get())) {
		lastID.set(post.id);
		lastUnreadDate.set(announcements_now);
	}
}

function announcements_addMenuItem(post, url, title = '') {
	const $menuItem = $('<div>', { id: 'RESAnnouncementMenuItem' });
	$('<span class="RESMenuItemButton"></span>').append(createElement_namespaceObject.icon(0xF076, 'span', '', i18n('announcementsMarkAsRead'))).appendTo($menuItem).on('click', e => {
		e.preventDefault();
		e.stopPropagation();

		setMarkedRead();
		e.target.classList.remove('newNotification');
	});
	$('<a>new announcement!</a>').attr({ href: url, title, target: '_blank', rel: 'noopener noreferer' }).on('click', e => {
		e.stopPropagation();
		setMarkedRead();
	}).appendTo($menuItem);
	addMenuItem($menuItem, () => {
		openNewTab(url);
	});
}

function addAnnouncementBiff(post, url, title, withPizzazz) {
	$biff = $('<a id="RESAnnouncementAlert" />').attr({ href: url, target: '_blank' }).append(createElement_namespaceObject.icon(0xF076, 'span', '', title)).on('click', setMarkedRead).appendTo('#header-bottom-right');

	if (withPizzazz) {
		$biff.addClass('important');
	}
}

async function getLatestPost() {
	const { data: { children: [{ data }] } } = await ajax({
		url: sourceUrl,
		type: 'json',
		cacheFor: recheckPostAfter
	});

	return data;
}

function setMarkedRead() {
	markedReadDate.set(announcements_now);
	if ($biff) {
		$biff.remove();
	}
}

function isPostRelevant(post) {
	if (!/chrome|safari|firefox|opera|edge/i.test(post.title)) {
		return true;
	}

	if (post.title.toLowerCase().includes('chrome'.toLowerCase())) {
		return true;
	}

	return false;
}
// EXTERNAL MODULE: ./node_modules/numeral/numeral.js
var numeral = __webpack_require__(259);
var numeral_default = /*#__PURE__*/__webpack_require__.n(numeral);

// CONCATENATED MODULE: ./lib/modules/backupAndRestore/serialization.js


function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function serialize(settings) {
	const object = {
		SCHEMA_VERSION: 2,
		data: settings
	};
	return JSON.stringify(object);
}

function deserialize(string) {
	const object = JSON.parse(string);
	switch (object.SCHEMA_VERSION) {
		default:
			{
				const _ref = object,
				      { SCHEMA_VERSION } = _ref,
				      encoded = _objectWithoutProperties(_ref, ['SCHEMA_VERSION']);
				return mapValues_default()(encoded, (v, k) => {
					try {
						return JSON.parse(v);
					} catch (e) {
						console.warn('Could not parse:', k, 'falling back to raw string.');
						return v;
					}
				});
			}
		case 1:
			{
				const _ref2 = object,
				      { SCHEMA_VERSION } = _ref2,
				      settings = _objectWithoutProperties(_ref2, ['SCHEMA_VERSION']);
				return settings;
			}
		case 2:
			{
				const { data: settings } = object;
				return settings;
			}
	}
}
// CONCATENATED MODULE: ./lib/modules/backupAndRestore/providers/Provider.js

class Provider {

	init({}) {
		return Promise.resolve(this);
	}

	read() {
		throw new Error('unimplemented');
	}

	write(data) {
		throw new Error('unimplemented');
	}
}
Provider.key = 'abstract';
Provider.text = 'Abstract';
Provider.notifyBackupDone = true;
Provider.supportsAutomaticBackups = false;
// CONCATENATED MODULE: ./lib/modules/backupAndRestore/providers/File.js






class File_File extends Provider {

	read() {
		return new Promise((resolve, reject) => {
			const link = document.createElement('input');
			link.type = 'file';
			link.accept = '.resbackup';
			link.addEventListener('change', () => {
				const file = link.files[0];
				const reader = new FileReader();
				reader.onload = () => {
					resolve(reader.result);
				};
				reader.readAsText(file);
			});

			waitForEvent(window, 'mousemove').then(() => setTimeout(() => {
				if (!link.files.length) reject(new Error('No file selected.'));
			}));
			link.click();
		});
	}

	write(data) {
		const blob = new Blob([data], { type: 'application/json' });

		const link = document.createElement('a');
		link.href = URL.createObjectURL(blob);
		const date = new Date();
		link.download = `RES-${date.getUTCFullYear()}-${date.getMonth() + 1}-${date.getDate()}-${Math.round(date.getTime() / 1000)}-${metadata_version.replace(/\./g, '_')}.resbackup`;
		click(link);
		return Promise.resolve();
	}
}
File_File.key = 'file';
File_File.text = 'backupAndRestoreProvidersFile';
File_File.notifyBackupDone = false;
// EXTERNAL MODULE: ./node_modules/js-base64/base64.js
var base64 = __webpack_require__(258);

// CONCATENATED MODULE: ./lib/modules/backupAndRestore/providers/GoogleDrive.js







const FILE = 'res-storage.json';
const FOLDER = 'appDataFolder';

class GoogleDrive_GoogleDrive extends Provider {

	async init({ googleLoginHint }) {
		this.accessToken = await launchAuthFlow({
			domain: `https://accounts.google.com/o/oauth2/v2/auth?login_hint=${googleLoginHint}`,
			clientId: '568759524377-nv0o2u4afuuulkfcjd7f6guf27qkevpt.apps.googleusercontent.com',
			scope: 'https://www.googleapis.com/auth/drive.appdata'
		}, async message => {
			await alert_namespaceObject.open(`
				<p><b>RES needs your permission to backup to Google Drive.</b></p>
				<p>${message}</p>
			`, { cancelable: true });
			await permissions_namespaceObject.request(['https://accounts.google.com/o/oauth2/v2/auth', 'https://content.googleapis.com/drive/v3/*']);
		});

		return this;
	}

	async getExistingFile() {
		const { files: [file] } = await ajax({
			method: 'GET',
			url: 'https://content.googleapis.com/drive/v3/files',
			query: { fields: 'files(id)', q: `name="${FILE}"`, spaces: FOLDER },
			headers: { Authorization: `Bearer ${this.accessToken}` },
			type: 'json'
		});
		return file;
	}

	async getOrCreateFile() {
		const existingFile = await this.getExistingFile();
		if (existingFile) return existingFile;

		return ajax({
			method: 'POST',
			url: 'https://content.googleapis.com/drive/v3/files',
			query: { fields: 'id' },
			data: JSON.stringify({ name: FILE, parents: [FOLDER] }),
			headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${this.accessToken}` },
			type: 'json'
		});
	}

	async read() {
		const file = await this.getExistingFile();
		if (!file) throw new Error('Could not find backup.');
		const data = await ajax({
			method: 'GET',
			url: `https://content.googleapis.com/drive/v3/files/${file.id}`,
			query: { alt: 'media' },
			headers: {
				'x-goog-encode-response-if-executable': 'base64',
				Authorization: `Bearer ${this.accessToken}`
			}
		});
		return base64["Base64"].decode(data);
	}

	async write(data) {
		const { id } = await this.getOrCreateFile();
		await ajax({
			method: 'PATCH',
			url: `https://content.googleapis.com/upload/drive/v3/files/${id}`,
			query: { uploadType: 'media' },
			data,
			headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${this.accessToken}` },
			type: 'json'
		});
	}
}
GoogleDrive_GoogleDrive.key = 'googledrive';
GoogleDrive_GoogleDrive.text = 'Google Drive';
GoogleDrive_GoogleDrive.supportsAutomaticBackups = true;
// CONCATENATED MODULE: ./lib/modules/backupAndRestore/providers/OneDrive.js






const OneDrive_FILE = 'res-storage.json';

class OneDrive_OneDrive extends Provider {

	async init({}) {
		this.accessToken = await launchAuthFlow({
			domain: 'https://login.live.com/oauth20_authorize.srf',
			clientId: 'a1f95f80-0129-475b-9894-dfbb94f5ff1c',
			scope: 'onedrive.appfolder'
		}, async message => {
			await alert_namespaceObject.open(`
				<p><b>RES needs your permission to backup to OneDrive.</b></p>
				<p>${message}</p>
			`, { cancelable: true });
			await permissions_namespaceObject.request(['https://login.live.com/oauth20_authorize.srf']);
		});

		return this;
	}

	async getMetadata() {
		try {
			return await ajax({
				method: 'GET',
				url: `https://api.onedrive.com/v1.0/drive/special/approot:/${OneDrive_FILE}`,

				query: { select: 'id,@content.downloadUrl' },
				headers: { Authorization: `Bearer ${this.accessToken}` },
				type: 'json'
			});
		} catch (e) {
			if (e.status === 404) {
				throw new Error('Could not find backup.');
			} else {
				throw e;
			}
		}
	}

	async read() {
		const file = await this.getMetadata();
		return ajax({
			method: 'GET',
			url: file['@content.downloadUrl']
		});
	}

	async write(data) {
		await ajax({
			method: 'PUT',
			url: `https://api.onedrive.com/v1.0/drive/special/approot:/${OneDrive_FILE}:/content`,
			data,
			headers: { Authorization: `Bearer ${this.accessToken}` },
			type: 'json'
		});
	}
}
OneDrive_OneDrive.key = 'onedrive';
OneDrive_OneDrive.text = 'OneDrive';
OneDrive_OneDrive.supportsAutomaticBackups = true;
// CONCATENATED MODULE: ./lib/modules/backupAndRestore/providers/Dropbox.js






const Dropbox_FILE = '/res-storage.json';

class Dropbox_Dropbox extends Provider {

	async init({}) {
		this.accessToken = await launchAuthFlow({
			domain: 'https://www.dropbox.com/oauth2/authorize',
			clientId: 'tdevom9o5xn0hnt'
		}, async message => {
			await alert_namespaceObject.open(`
				<p><b>RES needs your permission to backup to Dropbox.</b></p>
				<p>${message}</p>
			`, { cancelable: true });
			await permissions_namespaceObject.request(['https://www.dropbox.com/oauth2/authorize']);
		});

		return this;
	}

	async read() {
		try {
			return await ajax({
				method: 'POST',
				url: 'https://content.dropboxapi.com/2/files/download',
				query: { arg: JSON.stringify({ path: Dropbox_FILE }) },
				headers: { Authorization: `Bearer ${this.accessToken}` }
			});
		} catch (e) {
			if (e.status === 409) {
				throw new Error('Could not find backup.');
			} else {
				throw e;
			}
		}
	}

	async write(data) {
		await ajax({
			method: 'POST',
			url: 'https://content.dropboxapi.com/2/files/upload',
			query: { arg: JSON.stringify({ path: Dropbox_FILE, mode: 'overwrite', mute: true }) },
			data,
			headers: { 'Content-Type': 'application/octet-stream', Authorization: `Bearer ${this.accessToken}` },
			type: 'json'
		});
	}
}
Dropbox_Dropbox.key = 'dropbox';
Dropbox_Dropbox.text = 'Dropbox';
Dropbox_Dropbox.supportsAutomaticBackups = true;
// CONCATENATED MODULE: ./lib/modules/backupAndRestore/providers/index.js






// CONCATENATED MODULE: ./lib/modules/backupAndRestore.js











const backupAndRestore_module = new Module('backupAndRestore');

backupAndRestore_module.moduleName = 'backupName';
backupAndRestore_module.category = 'aboutCategory';
backupAndRestore_module.sort = -8;
backupAndRestore_module.alwaysEnabled = true;
backupAndRestore_module.description = 'backupDesc';

backupAndRestore_module.options = {
	backup: {
		type: 'button',
		values: Object.values(providers_namespaceObject).map(p => ({
			text: p.text,
			callback: () => getProvider(p).then(backup)
		})),
		description: 'backupAndRestoreBackupDesc',
		title: 'backupAndRestoreBackupTitle'
	},
	restore: {
		type: 'button',
		values: Object.values(providers_namespaceObject).map(p => ({
			text: p.text,
			callback: () => getProvider(p).then(restore)
		})),
		description: 'backupAndRestoreRestoreDesc',
		title: 'backupAndRestoreRestoreTitle'
	},
	reloadWarning: {
		type: 'enum',
		value: 'warn',
		values: [{
			name: 'backupAndRestoreReloadWarningNone',
			value: 'none'
		}, {
			name: 'backupAndRestoreReloadWarningWarn',
			value: 'warn'
		}, {
			name: 'backupAndRestoreReloadWarningAuto',
			value: 'auto'
		}],
		description: 'backupAndRestoreReloadWarningDesc',
		title: 'backupAndRestoreReloadWarningTitle'
	},
	automaticBackups: {
		type: 'enum',
		value: 'none',
		values: [{
			name: 'backupAndRestoreAutomaticBackupsNone',
			value: 'none'
		}, ...Object.values(providers_namespaceObject).filter(p => p.supportsAutomaticBackups).map(p => ({
			name: p.text,
			value: p.key
		}))],
		description: 'backupAndRestoreAutomaticBackupsDesc',
		title: 'backupAndRestoreAutomaticBackupsTitle',
		onChange() {
			lastCheckStorage.set(0);
			handleAutomaticSync();
		}
	},
	warnBeforeAutomaticRestore: {
		type: 'boolean',
		value: true,
		description: 'backupAndRestoreWarnBeforeAutomaticRestoreDesc',
		title: 'backupAndRestoreWarnBeforeAutomaticRestoreTitle',
		dependsOn: options => options.automaticBackups.value !== 'none'
	},
	googleAccount: {
		type: 'text',
		value: '',
		description: 'backupAndRestoreGoogleAccountDesc',
		title: 'backupAndRestoreGoogleAccountTitle',
		advanced: true
	}
};

backupAndRestore_module.afterLoad = async () => {
	await handleAutomaticSync();
};

function getProvider(providerClass) {
	return new providerClass().init({
		googleLoginHint: backupAndRestore_module.options.googleAccount.value
	});
}

const lastModifiedStorage = storage_namespaceObject.wrapPrefix('backup.lastModified.', () => 0);
const lastCheckStorage = storage_namespaceObject.wrap('backup.lastCheck', 0);

async function handleAutomaticSync() {
	const automaticProviderKey = backupAndRestore_module.options.automaticBackups.value;
	if (automaticProviderKey === 'none') return;

	const providerClass = Object.values(providers_namespaceObject).find(p => p.key === automaticProviderKey);
	if (!providerClass) throw new Error(`Can't find provider with key ${automaticProviderKey}`);

	const now = Date.now();
	const lastCheck = await lastCheckStorage.get();
	if (now - lastCheck < 15 * MINUTE) return;

	if (!(await lastCheckStorage.compareAndSet(lastCheck, now))) return;

	const provider = await getProvider(providerClass);

	let remoteBackup;
	const lastModifiedKey = lastModifiedStorage._keyGen(providerClass.key);
	try {
		remoteBackup = deserialize((await provider.read()));
	} catch (e) {
		console.warn('Failed to read automatic backup:', e);
		remoteBackup = { [lastModifiedKey]: 0 };
	}

	if (remoteBackup[lastModifiedKey] > (await lastModifiedStorage.get(providerClass.key))) {
		await restore(provider, backupAndRestore_module.options.warnBeforeAutomaticRestore.value ? 'automatic' : 'none');
	} else {
		await backup(provider);
	}
}

async function backup(provider) {
	const { key, text, notifyBackupDone } = provider.constructor;

	await lastModifiedStorage.set(key, Date.now());
	const storage = await storage_namespaceObject.getAll();
	await provider.write(serialize(storage));

	if (notifyBackupDone) {
		notifications_showNotification({
			message: i18n('backupAndRestoreSavedNotification', text),
			notificationID: 'backupAndRestoreSaved',
			moduleID: backupAndRestore_module.moduleID,
			closeDelay: 1000
		});
	}
}

async function restore(provider, alertType = 'normal') {
	const { key, name } = provider.constructor;
	const data = await provider.read();
	const storage = deserialize(data);

	const lastModifiedKey = lastModifiedStorage._keyGen(key);
	if (alertType !== 'none') {
		const isAutomatic = alertType === 'automatic';
		const backupDate = storage[lastModifiedKey];
		try {
			await alert_namespaceObject.open(`
			${isAutomatic ? `
				<p><b>${i18n('backupAndRestoreFoundBackup', name)}</b></p>
				<br>
			` : ''}
			<p>${i18n('backupAndRestoreBackupOverwriteWarning')}</p>
			<br>
			${isAutomatic ? `
				<p>${i18n('backupAndRestoreAfterCancel')}</p>
				<br>
			` : ''}
			${backupDate ? `
				<p>${i18n('backupAndRestoreBackupDate', formatDateTime(new Date(backupDate)))}</p>
			` : ''}
			<p>${i18n('backupAndRestoreBackupSize', numeral_default()(data.length).format('0.0 b'))}</p>
		`, { cancelable: true });
		} catch (e) {
			if (isAutomatic) {
				loadSettingsPage(backupAndRestore_module.moduleID, 'automaticBackups');
			}
			return;
		}
	}

	await storage_namespaceObject.setMultiple(storage);

	await lastCheckStorage.set(Date.now());

	alert_namespaceObject.open(i18n('backupAndRestoreImported'));
	warnTabsAboutRestore(backupAndRestore_module.options.reloadWarning.value);

	setTimeout(() => {
		location.hash = '';
		location.reload();
	}, 500);
}

const warnTabsAboutRestore = multicast(operation => {
	switch (operation) {
		case 'warn':
			alert_namespaceObject.open(i18n('backupAndRestoreImportedOtherTabs'), { cancelable: true }).then(() => location.reload(), () => {});
			break;
		case 'auto':
			location.reload();
			break;
		case 'none':
		default:
			break;
	}
}, { name: 'restore-settings-warning', local: false });
// CONCATENATED MODULE: ./lib/modules/commentDepth.js






const commentDepth_module = new Module('commentDepth');

commentDepth_module.moduleName = 'commentDepthName';
commentDepth_module.category = 'commentsCategory';
commentDepth_module.disabledByDefault = true;
commentDepth_module.description = 'commentDepthDesc';

commentDepth_module.options = {
	defaultCommentDepth: {
		type: 'text',
		value: '4',
		description: 'commentDepthDefaultCommentDepthDesc',
		title: 'commentDepthDefaultCommentDepthTitle'
	},
	defaultMinimumComments: {
		type: 'text',
		value: '50',
		description: 'commentDepthDefaultMinimumCommentsDesc',
		title: 'commentDepthDefaultMinimumCommentsTitle'
	},
	commentPermalinks: {
		type: 'boolean',
		value: false,
		description: 'commentDepthCommentPermaLinksDesc',
		title: 'commentDepthCommentPermaLinksTitle'
	},
	commentPermalinksContext: {
		dependsOn: options => options.commentPermalinks.value,
		type: 'boolean',
		value: false,
		description: 'commentDepthCommentPermalinksContextDesc',
		title: 'commentDepthCommentPermalinksContextTitle'
	},
	subredditCommentDepths: {
		type: 'table',
		addRowText: 'commentDepthAddSubreddit',
		fields: [{
			key: 'subreddits',
			name: 'commentDepthSubreddit',
			type: 'list',
			listType: 'subreddits'
		}, {
			key: 'commentDepth',
			name: 'commentDepthCommentDepth',
			type: 'text',
			value: '4'
		}, {
			key: 'minimumComments',
			name: 'commentDepthMinimumComments',
			type: 'text',
			value: '50'
		}],
		value: [],
		description: 'commentDepthSubredditCommentDepthsDesc',
		title: 'commentDepthSubredditCommentDepthsTitle'
	}
};

commentDepth_module.go = () => {
	$(document.body).on('mousedown', 'a[href*="/comments"]', e => {
		const target = e.target;
		const url = new URL(target.href, location.href);

		if (url.searchParams.has('depth')) return;

		if (regexes.commentPermalink.test(url.pathname)) {
			if (!commentDepth_module.options.commentPermalinks.value) return;
			if (!commentDepth_module.options.commentPermalinksContext.value && url.searchParams.has('context')) return;
		}

		const matches = execRegexes.comments(url.pathname);
		if (!matches) return;

		const subreddit = matches[1].toLowerCase();

		const [, commentDepth, minimumComments] = commentDepth_module.options.subredditCommentDepths.value.find(([subreddits]) => subreddits.toLowerCase().split(',').includes(subreddit)) || [null, commentDepth_module.options.defaultCommentDepth.value, commentDepth_module.options.defaultMinimumComments.value];

		if (!parseInt(commentDepth, 10)) return;

		const minimumCount = parseInt(minimumComments, 10);
		if (minimumCount) {
			const thing = Thing_Thing.from(e.target);
			if (thing && thing.isPost() && thing.getCommentCount() < minimumCount) return;
		}

		url.searchParams.set('depth', commentDepth);
		target.removeAttribute('data-inbound-url');
		target.href = url.href;
	});
};
// CONCATENATED MODULE: ./lib/modules/commentHidePersistor.js







const commentHidePersistor_module = new Module('commentHidePersistor');

commentHidePersistor_module.moduleName = 'commentHidePerName';
commentHidePersistor_module.category = 'commentsCategory';
commentHidePersistor_module.description = 'commentHidePerDesc';

commentHidePersistor_module.include = ['comments', 'inbox'];

const commentHidePersistor_currentId = (execRegexes.comments(location.pathname) || [])[2];
const commentHidePersistor_lastCleanStorage = storage_namespaceObject.wrap('RESmodules.commentHidePersistor.lastClean', 0);
const commentHidePersistor_entryStorage = storage_namespaceObject.wrapPrefix('commentHidePersistor.', () => ({
	updateTime: Date.now()
}));

commentHidePersistor_module.beforeLoad = async () => {
	if (!commentHidePersistor_currentId) throw new Error('Could not find comment page id');

	await restoreCommentCollapse();
};

commentHidePersistor_module.go = () => {
	listenToCommentCollapse();
};

commentHidePersistor_module.afterLoad = () => {
	commentHidePersistor_maybePruneOldEntries();
};

async function commentHidePersistor_maybePruneOldEntries() {
	const now = Date.now();
	if (now - (await commentHidePersistor_lastCleanStorage.get()) < 0.25 * DAY) return;
	commentHidePersistor_lastCleanStorage.set(now);

	for (const [id, data] of Object.entries((await commentHidePersistor_entryStorage.getAll()))) {
		if (now - data.updateTime > 7 * DAY) {
			commentHidePersistor_entryStorage.delete(id);
		}
	}
}

async function restoreCommentCollapse() {
	const { collapsedThings } = await commentHidePersistor_entryStorage.get(commentHidePersistor_currentId);
	if (collapsedThings) {
		watchForThings(['comment'], thing => {
			if (collapsedThings.hasOwnProperty(thing.getFullname())) {
				const toggle = thing.getCommentToggleElement();
				if (toggle) click(toggle);
			}
		}, { immediate: true });
	}
}

function listenToCommentCollapse() {
	$(document.body).on('click', 'a.expand', function () {
		const thing = Thing_Thing.from(this);
		if (!thing) return;

		const collapsed = thing.isCollapsed();
		const thingId = thing.getFullname();

		if (collapsed) commentHidePersistor_entryStorage.patch(commentHidePersistor_currentId, { collapsedThings: { [thingId]: true }, updateTime: Date.now() });else commentHidePersistor_entryStorage.deletePath(commentHidePersistor_currentId, 'collapsedThings', thingId);
	});
}
// CONCATENATED MODULE: ./lib/modules/commentPreview.js














const commentPreview_module = new Module('commentPreview');

commentPreview_module.moduleName = 'commentPrevName';
commentPreview_module.category = 'commentsCategory';
commentPreview_module.description = 'commentPrevDesc';
commentPreview_module.options = {
	enableBigEditor: {
		type: 'boolean',
		value: true,
		description: 'commentPreviewEnableBigEditorDesc',
		title: 'commentPreviewEnableBigEditorTitle'
	},
	swapBigEditorLayout: {
		type: 'boolean',
		value: false,
		description: 'commentPreviewSwapBigEditorLayoutDesc',
		title: 'commentPreviewSwapBigEditorLayoutTitle',
		bodyClass: true
	},
	openBigEditor: {
		type: 'keycode',
		value: [69, false, true, false, false],
		description: 'commentPreviewOpenBigEditorDesc',
		title: 'commentPreviewOpenBigEditorTitle'
	},
	draftStyle: {
		type: 'boolean',
		value: true,
		description: 'commentPreviewDraftStyleDesc',
		title: 'commentPreviewDraftStyleTitle',
		advanced: true,
		bodyClass: true
	},
	enableForComments: {
		type: 'boolean',
		value: true,
		description: 'commentPreviewEnableForCommentsDesc',
		title: 'commentPreviewEnableForCommentsTitle',
		advanced: true
	},
	enableForPosts: {
		type: 'boolean',
		value: true,
		description: 'commentPreviewEnableForPostsDesc',
		title: 'commentPreviewEnableForPostsTitle',
		advanced: true
	},
	enableForWiki: {
		type: 'boolean',
		value: true,
		description: 'commentPreviewEnableForWikiDesc',
		title: 'commentPreviewEnableForWikiTitle',
		advanced: true
	},
	enableForSubredditConfig: {
		type: 'boolean',
		value: true,
		description: 'commentPreviewEnableForSubredditConfigDesc',
		title: 'commentPreviewEnableForSubredditConfigTitle',
		advanced: true
	},
	enableForBanMessages: {
		type: 'boolean',
		value: true,
		description: 'commentPreviewEnableForBanMessagesDesc',
		title: 'commentPreviewEnableForBanMessagesTitle',
		advanced: true
	},
	sidebarPreview: {
		type: 'boolean',
		value: true,
		description: 'commentPreviewSidebarPreviewDesc',
		title: 'commentPreviewSidebarPreviewTitle',
		advanced: true
	}
};
commentPreview_module.include = ['comments', 'inbox', 'submit', 'profile', 'modqueue', 'subredditAbout', 'wiki'];
commentPreview_module.exclude = ['d2x', /^\/(?:r\/[\-\w\.]+\/)?wiki\/edit\/config\/automoderator\b/i];

const subredditImages = new Map();
let isWiki, isBan;

commentPreview_module.beforeLoad = () => {
	isWiki = isPageType('wiki');
	isBan = /^https?:\/\/(?:[\-\w\.]+\.)?reddit\.com\/r\/[\-\w\.]+\/about\/banned/i.test(location.href);

	const subreddit = currentSubreddit();
	if (isWiki && subreddit) initWikiImages(subreddit);
};

commentPreview_module.go = () => {
	if (commentPreview_module.options.enableBigEditor.value) {
		$('body').on('click', '.RESBigEditorPop', showBigEditor);

		if (modules_isRunning(keyboardNav_namespaceObject)) {
			$('body').on('keydown', '.usertext-edit textarea, #wiki_page_content', e => {
				if (checkKeysForEvent(e, commentPreview_module.options.openBigEditor.value)) {
					showBigEditor(e);
				}
			});
		}
	}

	$('body').on('submit', 'form', function () {
		$(this).find('.livePreview').hide();
	});

	if (isWiki) {
		attachWikiPreview();
		addBigEditorButton(document.querySelector('.markhelp'));
	} else {
		$(document.body).on('focus', commentTextareaSelector, e => {
			addBigEditorButton(e.target);
			attachPreview(e.target);
		});
	}
};

async function initWikiImages(subreddit) {
	const { data } = await ajax({
		url: `/r/${subreddit}/about/stylesheet.json`,
		type: 'json'
	});

	if (data && data.images) {
		for (const _ref of data.images) {
			const { name, url } = _ref;

			subredditImages.set(name, url);
		}
	}
}

function markdownToHTML(md) {
	if (isBan && md.length) {
		md = generateBanMessage(md, currentSubreddit() || '');
	}

	if (!isWiki) {
		return snudown_es_markdown(md);
	} else {
		const $doc = $('<body>').html(markdownWiki(md));

		for (const img of $doc.find('img')) {
			const src = img.getAttribute('src');
			const imgKey = src && src.startsWith('%%') && src.endsWith('%%') && src.slice('%%'.length, -'%%'.length);
			const resolvedSrc = imgKey && subredditImages.get(imgKey);

			if (resolvedSrc) {
				img.src = resolvedSrc;
			} else {
				img.remove();
			}
		}

		const headerIds = new Map();
		const headers = $doc.find('h1, h2, h3, h4, h5, h6');
		const tocDiv = $('<div>').addClass('toc');
		let $parent = $('<ul>');
		$parent.data('level', 1);
		tocDiv.append($parent);
		let level = 1;
		let previous = 1;
		const prefix = 'wiki';
		headers.each(function () {
			const contents = $(this).text();
			let aid = $('<div>').html(contents).text();
			aid = `${prefix}_${aid.replace(/ /g, '_').toLowerCase()}`;
			aid = aid.replace(/[^\w\.\-]/g, s => `.${s.charCodeAt(0).toString(16).toUpperCase()}`);
			const idNum = (headerIds.get(aid) || 0) + 1;
			headerIds.set(aid, idNum);

			if (idNum > 1) {
				aid += idNum;
			}

			$(this).attr('id', aid);

			const li = $('<li>').addClass(aid);
			const a = $('<a>').attr('href', `#${aid}`).text(contents);
			li.append(a);

			const thisLevel = +this.tagName.slice(-1);
			if (thisLevel > previous) {
				const $newUL = $('<ul>');
				$newUL.data('level', thisLevel);
				$parent.append($newUL);
				$parent = $newUL;
				level++;
			} else if (thisLevel < previous) {
				while (level > 1 && $parent.data('level') > thisLevel) {
					$parent = $parent.parent();
					level--;
				}
			}
			previous = thisLevel;
			$parent.append(li);
		});
		$doc.prepend(tocDiv);
		return $doc.html();
	}
}

function addBigEditorButton(ele) {
	if (!commentPreview_module.options.enableBigEditor.value) return;

	if (ele.hasAttribute('res-bigEditorButton-initialized')) return;
	ele.setAttribute('res-bigEditorButton-initialized', '');

	const bigEditorButton = string_namespaceObject.html`
		<button type="button" class="RESBigEditorPop" tabIndex="3">
			<span class="res-icon res-icon-12">&#xF0A4;</span> big editor
		</button>
	`;

	if (isBan || isWiki) {
		ele.after(bigEditorButton);
	} else {
		const container = ele.closest('.usertext-edit');
		if (!container) return;
		const bottom = container.querySelector('.bottom-area');
		bottom.prepend(bigEditorButton);
	}
}

function attachPreview(ele) {
	switch (ele.getAttribute('res-commentPreview-state')) {
		case 'disabled':
			return;
		case 'enabled':
			break;
		default:
			if (!commentPreview_module.options.enableForComments.value && ele.closest('.commentarea, .message') || !commentPreview_module.options.enableForPosts.value && (isPageType('submit') || ele.closest('.link')) || !commentPreview_module.options.enableForSubredditConfig.value && /^\/r\/[\-\w.]+\/about\/edit/i.test(location.pathname) || !commentPreview_module.options.enableForBanMessages.value && isBan) {
				ele.setAttribute('res-commentPreview-state', 'disabled');
				return;
			} else {
				ele.setAttribute('res-commentPreview-state', 'enabled');
			}
			break;
	}

	const container = ele.closest('.usertext-edit, #banned');
	if (!container) return;

	const preview = container.querySelector('.livePreview') || container.appendChild(makePreviewBox());
	const elements = [preview.querySelector('.RESDialogContents')];
	if (commentPreview_module.options.sidebarPreview.value && ele.getAttribute('name') === 'description') {
		elements.push(document.querySelector('.side .usertext-body .md'));
	}

	$(ele).off('input').on('input', e => onTextareaInput(e, preview, elements));

	setTimeout(() => $(ele).trigger('input'), 1);
}

function attachWikiPreview() {
	if (!commentPreview_module.options.enableForWiki.value) return;

	const preview = makePreviewBox();
	preview.querySelector('.md').classList.add('wiki');
	document.querySelector('#editform > br').after(preview);
	const contents = preview.querySelector('.RESDialogContents');

	$('#wiki_page_content').on('input', e => onTextareaInput(e, preview, [contents]));
}

const onTextareaInput = debounce_default()((e, preview, elements) => {
	const markdownText = downcast(e.target, HTMLTextAreaElement).value;

	if (markdownText.length > 0) {
		preview.style.display = '';

		for (const ele of elements) ele.innerHTML = markdownToHTML(markdownText);
	} else {
		preview.style.display = 'none';
		for (const ele of elements) empty(ele);
	}
}, 250);

function makePreviewBox() {
	return string_namespaceObject.html`
		<div style="display: none" class="RESDialogSmall livePreview">
			<h3>Live Preview</h3>
			${string_namespaceObject.safe(makeUrlHashLink(commentPreview_module.moduleID, undefined, ' ', 'gearIcon'))}
			<div class="md RESDialogContents"></div>
		</div>
	`;
}

let bigTextTarget;

const createBigEditor = once_default()(() => {
	const $editor = $('<div id="BigEditor" style="display: none;">');
	const $left = $('<div class="BELeft RESDialogSmall"><h3>Editor</h3></div>');
	const $contents = $('<div class="RESDialogContents"><textarea id="BigText" name="text" class=""></textarea></div>');
	const $foot = $('<div class="BEFoot">');
	if (!isBan) {
		$foot.append($('<button type="button">save</button>').on('click', () => {
			const len = $('#BigText').val().length;
			const max = $('#BigText').data('max-length');
			if (len > max) {
				$('#BigEditor .errorList .error').hide().filter('.TOO_LONG').text(`this is too long (max: ${max})`).show();
			} else if (len === 0) {
				$('#BigEditor .errorList .error').hide().filter('.NO_TEXT').show();
			} else if (bigTextTarget) {
				bigTextTarget.closest('form').find('input[type=submit], button[type=submit]').get(0).click();
				bigTextTarget.parents('.usertext-edit:first').find('.livePreview .md').html('');
				hideBigEditor(false, true);
			} else {
				$('#BigEditor .errorList .error').hide().filter('.NO_TARGET').show();
			}
		}));
	}
	$foot.append($('<button type="button">close</button>').on('click', () => hideBigEditor()));

	$foot.append($(`
		<span class="errorList">
			<span style="display: none;" class="error NO_TEXT">we need something here</span>
			<span style="display: none;" class="error TOO_LONG">this is too long (max: 10000)</span>
			<span style="display: none;" class="error NO_TARGET">there is no associated textarea</span>
		</span>
	`));

	$contents.append($foot);
	$left.append($contents);

	const $right = $(`
		<div class="BERight RESDialogSmall"><h3>Preview</h3><div class="RESCloseButton RESFadeButton">&#xf04e;</div><div class="RESCloseButton close">X</div>
		<div class="RESDialogContents"><div id="BigPreview" class=" md"></div></div></div>
	`);
	$editor.append($left).append($right);
	if (modules_isRunning(commentTools_namespaceObject)) {
		$contents.prepend(makeEditBar());
	}

	$(document.body).append($editor);

	$('.BERight .RESCloseButton.close').on('click', () => hideBigEditor());
	$('.BERight .RESFadeButton').on('click', function () {
		if (this.isFaded) {
			$('#BigEditor').fadeTo(300, 1.0).css('pointer-events', 'auto');
			$(document.body).addClass('RESScrollLock');
		} else {
			$('#BigEditor').fadeTo(300, 0.3).css('pointer-events', 'none');
			$(document.body).removeClass('RESScrollLock');
		}
		this.isFaded = !this.isFaded;
	});

	$('#BigText').on('input', debounce_default()(() => {
		const text = $('#BigText').val();

		$('#BigPreview').html(markdownToHTML(text));
		if (bigTextTarget) {
			bigTextTarget.val(text);
		}
	}, 250)).on('keydown', e => {
		if (e.key === NAMED_KEYS.Escape) {
			hideBigEditor();
			e.preventDefault();
			return false;
		}
	});

	return $editor;
});

function showBigEditor(e) {
	e.preventDefault();
	createBigEditor().fadeIn(300);
	$('.side').addClass('BESideHide');
	$('body').addClass('RESScrollLock');
	let $baseText;
	if (!isWiki && !isBan) {
		$baseText = $(e.target).parents('.usertext-edit:first').find('textarea');

		const limit = $baseText.attr('data-limit');
		$('#BigText').attr('data-limit', limit);
		$('#BigPreview').removeClass('wiki');
		$('.BERight .RESDialogContents').removeClass('wiki-page-content');
	} else if (isBan) {
		$baseText = $('#ban_message');

		const limit = $baseText.attr('data-limit');
		$('#BigText').attr('data-limit', limit);
		$('#BigPreview').removeClass('wiki');
		$('.BERight .RESDialogContents').removeClass('wiki-page-content');
	} else {
		$baseText = $('#wiki_page_content');
		$('#BigPreview').addClass('wiki');
		$('.BERight .RESDialogContents').addClass('wiki-page-content');
	}

	const markdown = $baseText.val();
	const maxLength = $baseText.data('max-length');
	$('#BigText').data('max-length', maxLength).val(markdown).focus();
	updateCounter($('#BigText')[0]);

	$('#BigPreview').html(markdownToHTML(markdown));
	bigTextTarget = $baseText;

	const dialogTitle = document.querySelector('.BELeft h3');
	let editorWrapperHeight = document.querySelector('.BELeft .RESDialogContents .markdownEditor-wrapper');
	editorWrapperHeight = editorWrapperHeight ? editorWrapperHeight.offsetHeight : 0;
	const dialogFooter = document.querySelector('.BELeft .BEFoot');
	const dialogContentBox = document.querySelector('.BELeft .RESDialogContents');
	dialogContentBox.style.paddingBottom = `${dialogTitle.offsetHeight - 10 + editorWrapperHeight + dialogFooter.offsetHeight}px`;
}

function hideBigEditor(quick, submitted) {
	$('#BigEditor').fadeOut(quick ? 0 : 300);
	$('.side').removeClass('BESideHide');
	$('body').removeClass('RESScrollLock');

	const target = bigTextTarget;
	if (target) {
		target.val($('#BigText').val());
		target.focus();
		if (submitted !== true) {
			target[0].dispatchEvent(new Event('input', { bubbles: true, cancelable: true }));
		}
		bigTextTarget = null;
	}
}

function generateBanMessage(message, subreddit) {
	return [`you have been banned from posting to [/r/${subreddit}](/r/${subreddit}).`, '', 'note from the moderators:', '', message.replace(/^/gm, '> '), '', 'you can contact the moderators regarding your ban by replying to this message. **warning**: using other accounts to circumvent a subreddit ban is considered a violation of reddit\'s [site rules](/rules) and can result in being banned from reddit entirely.'].join('\r\n');
}
// CONCATENATED MODULE: ./lib/modules/commentQuickCollapse.js







const commentQuickCollapse_module = new Module('commentQuickCollapse');

commentQuickCollapse_module.moduleName = 'commentQuickCollapseName';
commentQuickCollapse_module.category = 'commentsCategory';
commentQuickCollapse_module.description = 'commentQuickCollapseDesc';

commentQuickCollapse_module.options = {
	hideCommentsOnHeaderDoubleClick: {
		type: 'boolean',
		value: true,
		description: 'hideCommentsOnHeaderDoubleClickDesc',
		title: 'hideCommentsOnHeaderDoubleClickTitle'
	},
	toggleCommentsOnClickLeftEdge: {
		type: 'boolean',
		value: false,
		bodyClass: true,
		description: 'toggleCommentsOnClickLeftEdgeDesc',
		title: 'toggleCommentsOnClickLeftEdgeTitle'
	},
	leftEdgeColor: {
		dependsOn: options => options.toggleCommentsOnClickLeftEdge.value,
		type: 'color',
		value: '#D1D1D1',
		description: 'toggleCommentsLeftEdgeColorDesc',
		title: 'toggleCommentsLeftEdgeColorTitle'
	},
	leftEdgeHoverColor: {
		dependsOn: options => options.toggleCommentsOnClickLeftEdge.value,
		type: 'color',
		value: '#B1B1B1',
		description: 'toggleCommentsLeftEdgeHoverColorDesc',
		title: 'toggleCommentsLeftEdgeHoverColorTitle'
	},
	leftEdgeCollapsedColor: {
		dependsOn: options => options.toggleCommentsOnClickLeftEdge.value,
		type: 'color',
		value: '#B1B1B1',
		description: 'toggleCommentsLeftEdgeCollapsedColorDesc',
		title: 'toggleCommentsLeftEdgeCollapsedColorTitle'
	},
	leftEdgeWidth: {
		dependsOn: options => options.toggleCommentsOnClickLeftEdge.value,
		type: 'text',
		value: '50',
		description: 'toggleCommentsLeftEdgeWidthDesc',
		title: 'toggleCommentsLeftEdgeWidthTitle'
	},
	hideCollapseButton: {
		dependsOn: options => options.toggleCommentsOnClickLeftEdge.value,
		type: 'boolean',
		value: false,
		bodyClass: true,
		description: 'toggleCommentsLeftEdgeHideButtonDesc',
		title: 'toggleCommentsLeftEdgeHideButtonTitle'
	},
	scrollOnCollapse: {
		type: 'boolean',
		value: false,
		description: 'scrollOnCollapseDesc',
		title: 'scrollOnCollapseTitle'
	}
};

commentQuickCollapse_module.include = ['comments'];

commentQuickCollapse_module.beforeLoad = () => {
	if (commentQuickCollapse_module.options.toggleCommentsOnClickLeftEdge.value) {
		toggleCommentsOnClickLeftEdge();
	}
};

commentQuickCollapse_module.go = () => {
	if (commentQuickCollapse_module.options.hideCommentsOnHeaderDoubleClick.value) {
		hideCommentsOnHeaderDoubleClick();
	}
	if (commentQuickCollapse_module.options.scrollOnCollapse.value) {
		scrollOnCollapse();
	}
};

function hideCommentsOnHeaderDoubleClick() {
	$('.commentarea').on('dblclick', '.tagline', e => {
		const toggleElement = Thing_Thing.checkedFrom(e.target).getCommentToggleElement();
		if (!toggleElement) return;

		toggleElement.click();

		if (window.getSelection()) {
			window.getSelection().removeAllRanges();
		}
	});
}

function toggleCommentsOnClickLeftEdge() {
	const leftEdgeWidth = clamp_default()(parseInt(commentQuickCollapse_module.options.leftEdgeWidth.value, 10), 0, parseInt(commentQuickCollapse_module.options.leftEdgeWidth.default, 10)) / 100;

	addCSS(`
		.commentarea .comment {
			padding-left: ${2.5 * leftEdgeWidth}em !important;
		}

		.commentarea .comment > .entry > .tagline > .expand:hover {
			background-color: ${commentQuickCollapse_module.options.leftEdgeHoverColor.value};
		}

		.commentarea .entry > .tagline > .expand {
			width: ${2 * leftEdgeWidth}em !important;
			background-color: ${commentQuickCollapse_module.options.leftEdgeColor.value};
		}

		.commentarea .collapsed > .entry > .tagline > .expand {
			background-color: ${commentQuickCollapse_module.options.leftEdgeCollapsedColor.value};
		}
	`);
}

function scrollOnCollapse() {
	$(document.body).on('click', '.expand', event => {
		if (click.isProgrammaticEvent(event)) return;

		const thing = Thing_Thing.checkedFrom(event.target);

		if (thing.element.classList.contains('noncollapsed')) return;

		const target = thing.getClosest(Thing_Thing.prototype.getNextSibling, { direction: 'down' });
		if (!target) return;

		selectedEntry_select(target, { scrollStyle: 'adopt', from: thing.entry });
	});
}
// CONCATENATED MODULE: ./lib/modules/commentStyle.js





const commentStyle_module = new Module('commentStyle');

commentStyle_module.moduleName = 'commentStyleName';
commentStyle_module.category = 'appearanceCategory';
commentStyle_module.description = 'commentStyleDesc';
commentStyle_module.options = {
	commentBoxes: {
		type: 'boolean',
		value: true,
		description: 'commentStyleCommentBoxesDesc',
		title: 'commentStyleCommentBoxesTitle',
		bodyClass: 'res-commentBoxes'
	},
	commentRounded: {
		type: 'boolean',
		value: true,
		description: 'commentStyleCommentRoundedDesc',
		title: 'commentStyleCommentRoundedTitle',
		advanced: true,
		dependsOn: options => options.commentBoxes.value,
		bodyClass: 'res-commentBoxes-rounded'
	},
	commentHoverBorder: {
		type: 'boolean',
		value: false,
		description: 'commentStyleCommentHoverBorderDesc',
		title: 'commentStyleCommentHoverBorderTitle',
		advanced: true,
		dependsOn: options => options.commentBoxes.value,
		bodyClass: 'res-commentHoverBorder'
	},
	commentIndent: {
		type: 'text',
		value: '10',
		description: 'commentStyleCommentIndentDesc',
		title: 'commentStyleCommentIndentTitle',
		advanced: true,
		dependsOn: options => options.commentBoxes.value
	},
	continuity: {
		type: 'boolean',
		value: false,
		description: 'commentStyleContinuityDesc',
		title: 'commentStyleContinuityTitle',
		advanced: true,
		dependsOn: options => options.commentBoxes.value,
		bodyClass: 'res-continuity'
	}
};

commentStyle_module.include = ['comments'];

commentStyle_module.exclude = ['d2x'];

commentStyle_module.beforeLoad = () => {
	if (commentStyle_module.options.commentBoxes.value && commentStyle_module.options.commentIndent.value) {
		addCSS(`
			.res-commentBoxes .comment {
				margin-left: ${commentStyle_module.options.commentIndent.value}px !important;
			}
		`);
	}
};
// CONCATENATED MODULE: ./lib/modules/context.js






const context_module = new Module('context');

context_module.moduleName = 'contextName';
context_module.category = 'commentsCategory';
context_module.description = 'contextDesc';
context_module.options = {
	viewFullContext: {
		type: 'boolean',
		value: true,
		description: 'contextViewFullContextDesc',
		title: 'contextViewFullContextTitle'
	},
	defaultContext: {
		type: 'text',
		value: '3',
		description: 'contextDefaultContextDesc',
		title: 'contextDefaultContextTitle'
	}
};

context_module.include = ['comments', 'commentsLinklist', 'inbox', 'profile', 'modqueue'];

context_module.go = () => {
	if (isPageType('comments') && context_module.options.viewFullContext.value) {
		addViewFullContext();
	}

	const defaultContext = parseInt(context_module.options.defaultContext.value, 10);
	if (isPageType('commentsLinklist', 'inbox', 'profile', 'modqueue') && defaultContext >= 0) {
		setDefaultContext(defaultContext);
	}
};

function addViewFullContext() {
	if (location.search !== '?context=10000') {
		const pInfobar = document.querySelector('.infobar:not(#searchexpando) p');
		if (pInfobar) {
			if ($('.sitetable:eq(1) .buttons:first .bylink').length > 1) {
				pInfobar.append('\u00A0', string_namespaceObject.html`<a href="?context=10000">view the full context</a>`, '\u00A0');
			}
		}
	}
}

function setDefaultContext(contextDepth) {
	$(document.body).on('mousedown', 'a.bylink', e => {
		const target = e.target;
		target.href = target.href.replace(/(\?|&|;)context=\d+\b/, `$1context=${contextDepth}`);
	});
}
// CONCATENATED MODULE: ./lib/modules/contribute.js






const contribute_module = new Module('contribute');

contribute_module.moduleName = 'contributeName';
contribute_module.category = 'aboutCategory';
contribute_module.sort = -9;
contribute_module.alwaysEnabled = true;
contribute_module.description = 'contributeDesc';

contribute_module.go = () => {
	addMenuItem(`<div class="RES-donate">${i18n('donateToRES')} &#8679;</div>`, () => {
		openNewTab('https://redditenhancementsuite.com/contribute/');
	});
};
// CONCATENATED MODULE: ./lib/modules/localDate.js





const localDate_module = new Module('localDate');

localDate_module.moduleName = 'localDateName';
localDate_module.category = 'myAccountCategory';
localDate_module.description = 'localDateDesc';

localDate_module.go = () => {
	$('.sitetable, .side').on('mouseenter', 'time', function () {
		const $this = $(this);
		if (!$this.data('originalTitle')) {
			$this.data('originalTitle', $this.attr('title'));
		}
		$this.attr('title', new Date($this.attr('datetime')));
	}).on('mouseleave', 'time', function () {
		const $this = $(this);
		$this.attr('title', $this.data('originalTitle'));
	});
};
// CONCATENATED MODULE: ./lib/modules/logoLink.js





const logoLink_module = new Module('logoLink');

logoLink_module.moduleName = 'logoLinkName';
logoLink_module.category = 'browsingCategory';
logoLink_module.description = 'logoLinkDesc';
logoLink_module.options = {
	redditLogoDestination: {
		type: 'enum',
		value: 'frontpage',
		description: 'logoLinkRedditLogoDestinationDesc',
		title: 'logoLinkRedditLogoDestinationTitle',
		values: [{
			name: 'logoLinkFrontpage',
			value: 'frontpage'
		}, {
			name: 'logoLinkAll',
			value: 'all'
		}, {
			name: 'logoLinkHot',
			value: 'hot'
		}, {
			name: 'logoLinkDashboard',
			value: 'dashboard'
		}, {
			name: 'logoLinkCurrent',
			value: 'subreddit'
		}, {
			name: 'logoLinkMyUserPage',
			value: '/u/me'
		}, {
			name: 'logoLinkInbox',
			value: '/message/inbox'
		}, {
			name: 'logoLinkCustom',
			value: 'custom'
		}]
	},
	customDestination: {
		dependsOn: options => options.redditLogoDestination.value === 'custom',
		type: 'text',
		value: '/',
		description: 'logoLinkCustomDestinationDesc',
		title: 'logoLinkCustomDestinationTitle'
	}
};

logoLink_module.go = () => {
	const redditLogoNode = document.getElementById('header-img-a') || document.getElementById('header-img');
	if (redditLogoNode) {
		const url = getLogoLinkUrl();
		if (url) {
			redditLogoNode.href = url;
		}
	}
};

function getLogoLinkUrl() {
	const destination = logoLink_module.options.redditLogoDestination.value;
	switch (destination) {
		case 'frontpage':
			return false;
		case 'all':
			return '/r/all';
		case 'hot':
			return '/hot';
		case 'dashboard':
			return '/r/Dashboard';
		case 'subreddit':
			return $('.redditname > a').attr('href');
		case 'custom':
			return logoLink_module.options.customDestination.value;
		default:
			return destination;
	}
}
// CONCATENATED MODULE: ./lib/modules/messageMenu.js









const messageMenu_module = new Module('messageMenu');

messageMenu_module.moduleName = 'messageMenuName';
messageMenu_module.category = 'browsingCategory';
messageMenu_module.description = 'messageMenuDesc';

messageMenu_module.options = {
	links: {
		type: 'table',
		addRowText: 'messageMenuAddShortcut',
		fields: [{
			key: 'label',
			name: 'messageMenuLabel',
			type: 'text'
		}, {
			key: 'url',
			name: 'messageMenuUrl',
			type: 'text'
		}],
		value: [['compose', '/message/compose'], ['all', '/message/inbox'], ['unread', '/message/unread'], ['messages', '/message/messages'], ['comment replies', '/message/comments'], ['post replies', '/message/selfreply'], ['/u/ mentions', '/message/mentions']],
		description: 'messageMenuLinksDesc',
		title: 'messageMenuLinksTitle'
	},
	useQuickMessage: {
		type: 'boolean',
		description: 'messageMenuUseQuickMessageDesc',
		title: 'messageMenuUseQuickMessageTitle',
		value: true
	},
	hoverDelay: {
		type: 'text',
		value: '1000',
		description: 'messageMenuHoverDelayDesc',
		title: 'messageMenuHoverDelayTitle',
		advanced: true
	},
	fadeDelay: {
		type: 'text',
		value: '200',
		description: 'messageMenuFadeDelayDesc',
		title: 'messageMenuFadeDelayTitle',
		advanced: true
	},
	fadeSpeed: {
		type: 'text',
		value: '0.7',
		description: 'messageMenuFadeSpeedDesc',
		title: 'messageMenuFadeSpeedTitle',
		advanced: true
	}
};

messageMenu_module.go = () => {
	$('#mail, .mail-count, #NREMail, #NREMailCount').on('mouseover', onMouseOver);
};

function onMouseOver(e) {
	dropdownList(messageMenu_module.moduleID).target(e.target).options({
		openDelay: messageMenu_module.options.hoverDelay.value,
		fadeDelay: messageMenu_module.options.fadeDelay.value,
		fadeSpeed: messageMenu_module.options.fadeSpeed.value
	}).populateWith(populate).begin();
}

const populate = once_default()(() => [messageMenu_module.options.links.value.map(populateItem).reduce((collection, item) => collection.add(item), $()).add(populateItem([`<i>${i18n(messageMenu_module.moduleName)}</i>`, makeUrlHash(messageMenu_module.moduleID)]))]);

function populateItem(link) {
	if (!(link && link.length >= 2)) {
		return $();
	}
	const label = link[0] || '';
	const url = link[1] || '';
	const compose = url.includes('/message/compose');
	const $link = $('<a />').safeHtml(label).attr('href', url);

	if (compose) {
		$link.append('<span class="RESMenuItemButton res-icon">&#xF139;</span>');
	} else if (isSettingsUrl(url)) {
		$link.append('<span class="RESMenuItemButton gearIcon" />');
	}

	if (messageMenu_module.options.useQuickMessage.value && compose) {
		$link.on('click', e => {
			e.target = $(e.target).closest('a').get(0);
			if (onClickMessageLink(e)) {
				e.preventDefault();
			}
		});
	}

	$link.on('click', () => dropdownList(messageMenu_module.moduleID).close());

	return $('<li />').append($link);
}
// CONCATENATED MODULE: ./lib/modules/modhelper.js








const modhelper_module = new Module('modHelper');

modhelper_module.moduleName = 'modhelperName';
modhelper_module.category = 'coreCategory';
modhelper_module.description = 'modhelperDesc';
modhelper_module.hidden = true;
modhelper_module.alwaysEnabled = true;
modhelper_module.go = () => {
	if (isPageType('stylesheet')) {
		doStyleSheetCheck();
	}
};

const modhelper_tips = {
	'no-res-styles': 'It appears you haven\'t done any styling specific to RES.  If you are interested in a quick overview on styling for RES users, please see [our wiki article](/r/Enhancement/wiki/subredditstyling)',
	keyNav: 'Styling `RES-keyNav-activeElement`? This is the element RES uses for Keyboard Navigation - it indicates the currently selected post, and is crucial to RES functionality. If you don\'t like the way it looks with your theme, you may style it however you want, as long as Keyboard Navigation remains usable for your visitors.',
	'keyNav-benice': `It appears that you are hiding \`RES-keyNav-activeElement\`. This negatively affects RES users by rendering keyboard navigation unusable. It's understandable that you may not care for the default appearance, but we politely request that you consider styling it to fit your subreddit, perhaps using a particular background color or border. Even just a one-sided border, e.g. \`border-right: 3px solid blue;\` - thank you for your consideration.\n\n For convenience we've included \`RES-keyNav-activeThing\` which can be used as an alternative to \`RES-keyNav-activeElement\`. It applies to elements with the class \`thing\` as opposed to \`entry\`. If you choose to use this, make sure keyboard navigation is usable when [commentBoxes](${makeUrlHash('styleTweaks', 'commentBoxes')}) is turned off.`,
	nightmode: 'Want your subreddit to be night mode friendly? Please have a look at [the night mode section of our wiki](/r/Enhancement/wiki/subredditstyling#wiki_res_night_mode_and_your_subreddit)'
};

function doStyleSheetCheck() {
	const $stylesheetTextarea = $('.stylesheet-customize-container textarea');
	const stylesheet = $stylesheetTextarea.length ? $($stylesheetTextarea).val() : '';

	createTipPane();
	if (stylesheet.length) {
		if (!stylesheet.includes('.res') && !stylesheet.includes('.RES')) {
			addTipToPane('no-res-styles');
		}
		if (!stylesheet.includes('.res-nightmode')) {
			addTipToPane('nightmode');
		}

		const keyNavIdx = stylesheet.indexOf('.RES-keyNav-activeElement');
		if (keyNavIdx !== -1) {
			let keyNavRule = '';
			let i = keyNavIdx;
			while (i < stylesheet.length) {
				const thisChar = stylesheet.charAt(i);
				keyNavRule += thisChar;
				if (thisChar === '}') {
					i = stylesheet.length;
				}
				i++;
			}
			if ((keyNavRule.includes('transparent') || keyNavRule.includes('background: none') || keyNavRule.includes('background-color: none')) && !keyNavRule.includes('border') && !stylesheet.includes('.RES-keyNav-activeThing')) {
				addTipToPane('keyNav-benice');
			} else {
				addTipToPane('keyNav');
			}
		}
	}
}

let $tipPane, $tipPaneHeader, $tipPaneContents, $tipPaneList;

function createTipPane() {
	const $sheetsDiv = $('div.sheets');

	$tipPane = $('<div>', { id: 'RESStyleSheetTipPane' });
	$tipPaneHeader = $('<div>', {
		id: 'RESStyleSheetTipPane-header',
		class: 'minimized',
		text: 'RES specific styling tips',
		click: toggleTipPane
	});

	const $tipPaneCloseButton = $('<span>', {
		id: 'RESStyleSheetTipPane-close',
		class: 'RESCloseButton',
		html: '&times;',
		title: 'Close for this session',
		click: hideTipPane
	});

	const $tipPaneHeaderSpan = $('<span>', { class: 'details', text: '[click for details]' });

	$tipPaneHeader.append($tipPaneCloseButton).append($tipPaneHeaderSpan);

	$tipPaneContents = $('<div>', { id: 'RESStyleSheetTipPane-contents' });
	$tipPaneList = $('<ul>', { id: 'RESStyleSheetTipPane-list' });
	$tipPaneContents.append($tipPaneList);

	$tipPane.append($tipPaneHeader).append($tipPaneContents);

	$sheetsDiv.before($tipPane);
}

function hideTipPane() {
	sessionStorage.setItem('hideTipPane', 'true');
	$tipPane.hide();
}

function toggleTipPane() {
	if ($tipPaneHeader.hasClass('minimized')) {
		openTipPaneContents();
	} else {
		closeTipPaneContents();
	}
}

function openTipPaneContents() {
	$tipPaneHeader.removeClass('minimized');
	$tipPaneContents.slideDown();
}

function closeTipPaneContents() {
	$tipPaneHeader.addClass('minimized');
	$tipPaneContents.slideUp();
}

function addTipToPane(key) {
	const tipText = modhelper_tips[key];
	const $tip = $('<li>', { html: snudown_es_markdown(tipText) });

	if (!sessionStorage.getItem('hideTipPane')) {
		$tipPane.show();
	}

	$tipPaneList.append($tip);
}
// CONCATENATED MODULE: ./lib/modules/multiredditNavbar.js









const multiredditNavbar_module = new Module('multiredditNavbar');

multiredditNavbar_module.moduleName = 'multiredditNavbarName';
multiredditNavbar_module.description = 'multiredditNavbarDesc';
multiredditNavbar_module.category = 'subredditsCategory';

multiredditNavbar_module.include = ['linklist'];

multiredditNavbar_module.options = {
	sectionMenu: {
		type: 'boolean',
		value: true,
		description: 'multiredditNavbarSectionMenuDesc',
		title: 'multiredditNavbarSectionMenuTitle'
	},
	sectionLinks: {
		dependsOn: options => options.sectionMenu.value,
		type: 'table',
		addRowText: 'multiredditNavbarAddShortcut',
		fields: [{
			key: 'label',
			name: 'multiredditNavbarLabel',
			type: 'text'
		}, {
			key: 'url',
			name: 'multiredditNavbarUrl',
			type: 'text'
		}],
		value: [['new', './new'], ['rising', './rising'], ['controversial', './controversial'], ['top', './top'], ['top this month', './top?t=month'], ['gilded', './gilded'], ['promoted', './ads']],
		description: 'multiredditNavbarSectionLinksDesc',
		title: 'multiredditNavbarSectionLinksTitle'
	},
	hoverDelay: {
		dependsOn: options => options.sectionMenu.value,
		type: 'text',
		value: '1000',
		description: 'multiredditNavbarHoverDelayDesc',
		title: 'multiredditNavbarHoverDelayTitle',
		advanced: true
	},
	fadeDelay: {
		dependsOn: options => options.sectionMenu.value,
		type: 'text',
		value: '200',
		description: 'multiredditNavbarFadeDelayDesc',
		title: 'multiredditNavbarFadeDelayTitle',
		advanced: true
	},
	fadeSpeed: {
		dependsOn: options => options.sectionMenu.value,
		type: 'text',
		value: '0.7',
		description: 'multiredditNavbarFadeSpeedDesc',
		title: 'multiredditNavbarFadeSpeedTitle',
		advanced: true
	}
};

multiredditNavbar_module.go = () => {
	if (multiredditNavbar_module.options.sectionMenu.value) {
		$('.listing-chooser .multis').on('mouseover', 'li', onMouseoverMultiLink);
	}
};

function onMouseoverMultiLink(e) {
	const link = e.currentTarget.querySelector('a[href^="/me/m"]');
	if (!link) {
		return;
	}
	dropdownList(multiredditNavbar_module.moduleID).target(e.currentTarget).options({
		openDelay: penalizedDelay(multiredditNavbar_module.moduleID, 'sectionMenu', multiredditNavbar_module.options.hoverDelay),
		fadeDelay: multiredditNavbar_module.options.fadeDelay.value,
		fadeSpeed: multiredditNavbar_module.options.fadeSpeed.value,
		pin: pin.right,
		offsetWidth: -10,
		offsetHeight: 1,
		bottomPadding: 0
	}).populateWith(() => populateSectionMenu(link.href)).begin();
}

const populateSectionMenu = baseUrl => {
	alterFeaturePenalty(multiredditNavbar_module.moduleID, 'sectionMenu', 5);
	return [multiredditNavbar_module.options.sectionLinks.value.map(link => populateSectionItem(baseUrl, link)).reduce((prev, curr) => curr ? prev.add(curr) : prev, $()).add(populateSectionItem(baseUrl, [`<i>${i18n(multiredditNavbar_module.moduleName)}</i>`, makeUrlHash(multiredditNavbar_module.moduleID, 'sectionMenu')]))];
};

function populateSectionItem(baseUrl, link) {
	if (!(link && link.length >= 2)) {
		return $();
	}

	const label = link[0] || '';
	const url = link[1] || '';
	const $link = $('<a />').safeHtml(label).attr('href', `${baseUrl}${url}`);

	if (isSettingsUrl(url)) {
		$link.append('<span class="RESMenuItemButton gearIcon" />');
	}

	$link.on('click', () => {
		dropdownList(multiredditNavbar_module.moduleID).close();
		alterFeaturePenalty(multiredditNavbar_module.moduleID, 'sectionMenu', -30);
	});

	return $('<li />').append($link);
}
// CONCATENATED MODULE: ./lib/modules/neverEndingComments.js






const neverEndingComments_module = new Module('neverEndingComments');

neverEndingComments_module.moduleName = 'necName';
neverEndingComments_module.category = 'commentsCategory';
neverEndingComments_module.description = 'necDescription';
neverEndingComments_module.options = {
	loadChildComments: {
		type: 'boolean',
		value: false,
		description: 'necLoadChildCommentsDesc',
		title: 'necLoadChildCommentsTitle'
	}
};

neverEndingComments_module.include = ['comments'];

neverEndingComments_module.go = () => {
	window.addEventListener('scroll', debounce_default()(handleScroll, 300));
};

function firstVisibleLoader() {
	const context = neverEndingComments_module.options.loadChildComments.value ? '' : '.nestedlisting > .thing.morechildren';
	const loaders = document.querySelectorAll(`${context} .morecomments a:not([res-clicked])`);

	return Array.from(loaders).find(el => elementInViewport(el));
}

const handleScroll = throttle_default()(() => {
	const link = firstVisibleLoader();
	if (link) {
		link.setAttribute('res-clicked', '');
		link.click();
		handleScroll();
	}
}, 2000);
// CONCATENATED MODULE: ./lib/modules/onboarding.js







const onboarding_module = new Module('onboarding');

onboarding_module.moduleName = 'onboardingName';
onboarding_module.category = 'aboutCategory';
onboarding_module.description = 'onboardingDesc';
onboarding_module.alwaysEnabled = true;

onboarding_module.options = {
	updateNotification: {
		title: 'onboardingUpdateNotificationName',
		description: 'onboardingUpdateNotificationDescription',
		type: 'enum',
		value: 'notification',
		values: [{
			name: 'onboardingUpdateNotifictionReleaseNotes',
			value: 'releaseNotes'
		}, {
			name: 'onboardingUpdateNotifictionNotification',
			value: 'notification'
		}, {
			name: 'onboardingUpdateNotifictionNothing',
			value: 'nothing'
		}]
	},
	patchUpdateNotification: {
		title: 'onboardingPatchUpdateNotificationName',
		description: 'onboardingPatchUpdateNotificationDescription',
		type: 'enum',
		value: 'notification',
		values: [{
			name: 'onboardingUpdateNotifictionReleaseNotes',
			value: 'releaseNotes'
		}, {
			name: 'onboardingUpdateNotifictionNotification',
			value: 'notification'
		}, {
			name: 'onboardingUpdateNotifictionNothing',
			value: 'none'
		}]
	},
	betaUpdateNotification: {
		title: 'onboardingBetaUpdateNotificationName',
		description: 'onboardingBetaUpdateNotificationDescription',
		type: 'enum',
		value: 'releaseNotes',
		values: [{
			name: 'onboardingUpdateNotifictionReleaseNotes',
			value: 'releaseNotes'
		}, {
			name: 'onboardingUpdateNotifictionNotification',
			value: 'notification'
		}, {
			name: 'onboardingUpdateNotifictionNothing',
			value: 'none'
		}]
	}
};

const firstRunStorage = storage_namespaceObject.wrapPrefix('RES.firstRun.', () => null);

onboarding_module.go = async () => {
	if (!(await firstRunStorage.has(metadata_version))) {
		firstRunStorage.set(metadata_version, true);

		const notificationOption = isBeta ? 'betaUpdateNotification' : isPatch ? 'patchUpdateNotification' : 'updateNotification';

		switch (onboarding_module.options[notificationOption].value) {
			case 'releaseNotes':
				openNewTab(updatedURL, false);
				break;
			case 'notification':
				notifications_showNotification({
					moduleID: onboarding_module.moduleID,
					optionKey: notificationOption,
					message: `
						${i18n('onboardingUpgradeMessage', metadata_version)}
						<p><a class="RESNotificationButtonBlue" href="${updatedURL}" target="_blank">
							${i18n('onboardingUpgradeCta')}
						</a></p>
					`.trim(),
					closeDelay: 15000
				});
				break;
			case 'none':
			default:
				console.log(`RES upgraded to v${metadata_version}.`);
				break;
		}
	}
};
// CONCATENATED MODULE: ./lib/modules/pageNavigator.js










const pageNavigator_module = new Module('pageNavigator');

pageNavigator_module.moduleName = 'pageNavName';
pageNavigator_module.category = 'browsingCategory';
pageNavigator_module.description = 'pageNavDesc';
pageNavigator_module.options = {
	toTop: {
		type: 'boolean',
		value: true,
		description: 'pageNavToTopDesc',
		title: 'pageNavToTopTitle'
	},
	toComment: {
		type: 'boolean',
		value: true,
		description: 'pageNavToCommentDesc',
		title: 'pageNavToCommentTitle'
	},
	showLink: {
		type: 'boolean',
		value: true,
		description: 'pageNavShowLinkDesc',
		title: 'pageNavShowLinkTitle'
	},
	showLinkNewTab: {
		type: 'boolean',
		value: true,
		description: 'pageNavShowLinkNewTabDesc',
		title: 'pageNavShowLinkNewTabTitle',
		dependsOn: options => options.showLink.value
	}
};

pageNavigator_module.afterLoad = () => {
	if (pageNavigator_module.options.toComment.value && isPageType('comments')) {
		backToNewCommentArea();
	}
	if (pageNavigator_module.options.toTop.value) {
		backToTop();
	}
	if (pageNavigator_module.options.showLink.value && isPageType('comments')) {
		showLinkTitle();
	}
};

function backToTop() {
	const $backToTop = $(`<a class="pageNavigator res-icon" data-id="top" href="#header" title="${i18n('pageNavToTopTitle')}">&#xF148;</a>`);
	$backToTop.on('click', e => {
		e.preventDefault();
		scrollTo(0, 0);
		move('top');
	});
	addElement($backToTop);
}

const showLinkTitleTemplate = ({ thumbnailSrc, linkId, settingsHash, linkHref, linkNewTab, title, domainHref, domain, time, author, authorHref }) => string_namespaceObject.html`
	<div class="res-show-link hide">
		${thumbnailSrc && string_namespaceObject._html`
			<span class="res-show-link-thumb"><img src="${thumbnailSrc}" alt="thumbnail" /></span>
		`}
		<a href="#${linkId}" class="res-icon toTop" title="Jump to title">&#xF148;</a>
		<a href="${settingsHash}" class="gearIcon" title="Configure this widget"></a>
		<div class="res-show-link-content">
			<div class="res-show-link-header">
				<a href="${linkHref}" ${linkNewTab && string_namespaceObject._html`target="_blank" rel="noopener noreferer"`} class="res-show-link-title">${title}</a>
				<a href="${domainHref}" class="res-show-link-domain">(<span>${domain}</span>)</a>
			</div>
			<div class="res-show-link-tagline">
				Submitted ${time} by
				<a href="${authorHref}" class="res-show-link-author">${author}</a>
			</div>
		</div>
	</div>
`;

function backToNewCommentArea() {
	const commentArea = document.querySelector('.commentarea > form.usertext textarea');
	if (!commentArea || !commentArea.offsetParent) return;
	const $backToNewCommentArea = $(`<a class="pageNavigator res-icon" data-id="addComment" href="#comments" title="${i18n('pageNavToCommentTitle')}">&#xF003;</a>`);
	$backToNewCommentArea.on('click', e => {
		e.preventDefault();
		commentArea.focus();
	});
	addElement($backToNewCommentArea);
}

function showLinkTitle() {
	let $widget;
	const submissionThing = Thing_Thing.checkedFrom(document.querySelector('.thing.link'));
	let belowSubmission = true;
	let baseHeight, hoverHeight;

	function showWidget() {
		$widget.css({ top: getHeaderOffset(true) }).removeClass('hide');
	}

	function hideWidget() {
		$widget.css({ top: -baseHeight }).addClass('hide');
	}

	function renderWidget() {
		return $(showLinkTitleTemplate({
			linkId: submissionThing.element.id,
			thumbnailSrc: submissionThing.getPostThumbnailUrl(),
			linkHref: submissionThing.getTitleUrl(),
			linkNewTab: pageNavigator_module.options.showLinkNewTab.value,
			title: submissionThing.getTitle(),
			domainHref: submissionThing.getPostDomainUrl(),
			domain: submissionThing.getPostDomainText(),
			time: submissionThing.getPostTime(),
			authorHref: submissionThing.getAuthorUrl(),
			author: submissionThing.getAuthor(),
			settingsHash: makeUrlHash(pageNavigator_module.moduleID, 'showLink')
		}));
	}

	const updateWidget = frameThrottle(e => {
		const scrollingUp = e.deltaY < 0;

		if (scrollingUp && belowSubmission) {
			initialize();

			showWidget();
		} else if ($widget) {
			hideWidget();
		}
	});

	const initialize = once_default()(() => {
		$widget = renderWidget().on('mouseenter', () => $widget.css({ height: hoverHeight })).on('mouseleave', () => $widget.css({ height: baseHeight })).appendTo(document.body);

		baseHeight = $widget.get(0).getBoundingClientRect().height;
		hoverHeight = $widget.get(0).scrollHeight;

		new IntersectionObserver(entries => {
			belowSubmission = !entries[0].isIntersecting;
			if (!belowSubmission) hideWidget();
		}, { rootMargin: '100px 0px 0px 0px' }).observe(submissionThing.element);

		window.addEventListener('scroll', () => {
			if (scrollTo.isProgrammaticEvent()) hideWidget();
		});
	});

	window.addEventListener('wheel', updateWidget, { passive: true });
}
// CONCATENATED MODULE: ./lib/modules/troubleshooter.js










const troubleshooter_module = new Module('troubleshooter');

troubleshooter_module.moduleName = 'troubleshooterName';
troubleshooter_module.alwaysEnabled = true;
troubleshooter_module.sort = -7;
troubleshooter_module.description = 'troubleshooterDesc';
troubleshooter_module.category = 'aboutCategory';
troubleshooter_module.options = {
	clearCache: {
		title: 'troubleshooterClearCacheTitle',
		type: 'button',
		text: 'troubleshooterClearLabel',
		callback: clearCache,
		description: 'troubleshooterClearCacheDesc'
	},
	clearTags: {
		title: 'troubleshooterClearTagsTitle',
		type: 'button',
		text: 'troubleshooterClearLabel',
		callback: clearTags,
		description: 'troubleshooterClearTagsDesc'
	},
	resetToFactory: {
		title: 'troubleshooterResetToFactoryTitle',
		type: 'button',
		text: 'troubleshooterResetLabel',
		callback: resetToFactory,
		description: 'troubleshooterResetToFactoryDesc'
	},
	disableRES: {
		title: 'troubleshooterDisableRESTitle',
		type: 'button',
		text: 'troubleshooterDisableLabel',
		callback: disableRES,
		description: 'troubleshooterDisableRESDesc'
	},
	breakpoint: {
		title: 'troubleshooterBreakpointTitle',
		type: 'button',
		text: 'troubleshooterBreakpointLabel',
		callback() {
			debugger;
		},
		description: 'troubleshooterBreakpointDesc'
	},
	testEnvironment: {
		title: 'troubleshooterTestEnvironmentTitle',
		type: 'button',
		text: 'troubleshooterTestEnvironmentLabel',
		callback: testEnvironment,
		description: 'troubleshooterTestEnvironmentDesc'
	},
	testNotifications: {
		title: 'troubleshooterTestNotificationsTitle',
		type: 'button',
		text: 'troubleshooterTestNotificationsLabel',
		callback: testNotifications,
		description: 'troubleshooterTestNotificationsDesc'
	}
};

function clearCache() {
	xhrCache_namespaceObject.clear();
	session_namespaceObject.clear();
	localStorage.removeItem(CACHED_LANG_KEY);
	localStorage.removeItem(CACHED_MESSAGES_TOKEN_KEY);
	localStorage.removeItem(CACHED_MESSAGES_KEY);
	notifications_showNotification(i18n('troubleshooterCachesCleared'), 2500);
}

async function clearTags() {
	const confirm = window.confirm(i18n('troubleshooterAreYouPositive'));
	if (confirm) {
		const tags = await tagStorage.getAll();
		const keysToDelete = [];
		for (const [key, { text, votesUp = 0, votesDown = 0 }] of Object.entries(tags)) {
			if (!text && votesUp <= 1 && votesDown <= 1) {
				keysToDelete.push(key);
			}
		}
		tagStorage.deleteMultiple(keysToDelete);
		notifications_showNotification(i18n('troubleshooterEntriesRemoved', keysToDelete.length), 2500);
	} else {
		notifications_showNotification(i18n('troubleshooterNoActionTaken'), 2500);
	}
}

function resetToFactory() {
	const confirm = window.prompt(i18n('troubleshooterThisWillKillYourSettings', 'trash'));
	if (confirm === 'trash' || confirm === '"trash"') {
		clearCache();
		storage_namespaceObject.clear();
		notifications_showNotification(i18n('troubleshooterSettingsReset'), 2500);
	} else {
		notifications_showNotification(i18n('troubleshooterNoActionTaken'), 2500);
	}
}

function disableRES() {
	sessionStorage.setItem(RES_DISABLED_KEY, 'true');
	window.location.reload();
}

function testNotifications() {
	notifications_showNotification({
		moduleID: troubleshooter_module.moduleID,
		header: 'Template test',
		message: '<p>Hello, FakeUsername</p>'
	});
}

const testMulticast = multicast(val => {
	alert_namespaceObject.open(`Multicast: ${val}`);
}, { name: 'testMulticast', local: false, crossContext: false });

async function testEnvironment() {
	const testKey = '__test__';
	const rows = [];

	try {
		let rand;

		rows.push(`Private browsing: ${String(isPrivateBrowsing())}`, '');

		rand = Math.random();
		rows.push(`Sending multicast: ${rand}`, '');
		testMulticast(rand);

		rand = Math.random();
		rows.push(`Storage.set(): ${rand}`);
		storage_namespaceObject.set(testKey, rand);
		rows.push(`Storage.get(): ${await storage_namespaceObject.get(testKey)}`);
		rows.push(`Storage.has(): ${await storage_namespaceObject.has(testKey)}`);
		rows.push('Storage.delete()');
		storage_namespaceObject.delete(testKey);
		rows.push(`Storage.get(): ${await storage_namespaceObject.get(testKey)}`);
		rows.push(`Storage.has(): ${await storage_namespaceObject.has(testKey)}`, '');

		rand = Math.random();
		rows.push(`Session.set(): ${rand}`);
		session_namespaceObject.set(testKey, rand);
		rows.push(`Session.get(): ${await session_namespaceObject.get(testKey)}`);
		rows.push(`Session.has(): ${await session_namespaceObject.has(testKey)}`);
		rows.push('Session.delete()');
		session_namespaceObject.delete(testKey);
		rows.push(`Session.get(): ${await session_namespaceObject.get(testKey)}`);
		rows.push(`Session.has(): ${await session_namespaceObject.has(testKey)}`, '');

		rand = Math.random();
		const wrapped = storage_namespaceObject.wrap(testKey, 'default');
		rows.push(`wrapped.set(): ${rand}`);
		wrapped.set(rand);
		rows.push(`wrapped.get(): ${await wrapped.get()}`);
		rows.push(`wrapped.has(): ${await wrapped.has()}`);
		rows.push('wrapped.delete()');
		wrapped.delete();
		rows.push(`wrapped.get(): ${await wrapped.get()}`);
		rows.push(`wrapped.has(): ${await wrapped.has()}`, '');

		rand = Math.random();
		const domain = storage_namespaceObject.wrapPrefix(testKey, () => 'default');
		rows.push(`prefix.set(): ${rand}`);
		domain.set('1', rand);
		rows.push(`prefix.get(): ${await domain.get('1')}`);
		rows.push(`prefix.has(): ${await domain.has('1')}`);
		rows.push('prefix.delete()');
		domain.delete('1');
		rows.push(`prefix.get(): ${await domain.get('1')}`);
		rows.push(`prefix.has(): ${await domain.has('1')}`, '');

		rand = Math.random();
		const blob = storage_namespaceObject.wrapBlob(testKey, () => 'default');
		rows.push(`blob.set(): ${rand}`);
		blob.set('1', rand);
		rows.push(`blob.get(): ${await blob.get('1')}`);
		rows.push(`blob.has(): ${await blob.has('1')}`);
		rows.push('blob.delete()');
		blob.delete('1');
		rows.push(`blob.get(): ${await blob.get('1')}`);
		rows.push(`blob.has(): ${await blob.has('1')}`, '');
	} catch (e) {
		rows.push('', `Errored: ${e}`);
		console.error(e);
	}

	alert_namespaceObject.open(rows.join('<br>'));
}
// CONCATENATED MODULE: ./lib/modules/presets.js









const presets_module = new Module('presets');

presets_module.moduleName = 'presetsName';
presets_module.category = 'coreCategory';
presets_module.alwaysEnabled = true;
presets_module.description = 'presetsDesc';

presets_module.options = {
	lite: {
		title: 'presetsLiteTitle',
		description: 'presetsLiteDesc',
		type: 'button',
		text: 'apply preset',
		callback: confirmPreset(() => {
			toggleModules(['notifications', 'hover', 'announcements', 'orangered', 'onboarding', 'selectedEntry', 'showImages', 'submitHelper', 'neverEndingReddit', 'accountSwitcher', 'filteReddit', 'quickMessage', 'subredditInfo', 'userInfo', 'userHighlight', 'searchHelper', 'betteReddit', 'styleTweaks', 'pageNavigator', 'commandLine', 'commentHidePersistor', 'commentTools', 'commentPreview', 'localDate', 'noParticipation'], '*');
		})
	},
	cleanSlate: {
		title: 'presetsCleanSlateTitle',
		description: 'presetsCleanSlateDesc',
		type: 'button',
		text: 'apply preset',
		callback: confirmPreset(() => {
			toggleModules(undefined, '*');
		})
	},
	noPopups: {
		title: 'presetsNoPopupsTitle',
		description: 'presetsNoPopupsDesc',
		type: 'button',
		text: 'apply preset',
		callback: confirmPreset(() => {
			toggleModules(undefined, 'hover RESTips showParent subredditInfo'.split(/[,\s]/));
			toggleOptions(undefined, 'userTagger.hoverInfo'.split(/[,\s]/));
		})
	},
	resetToFactory: troubleshooter_module.options.resetToFactory
};

function confirmPreset(callback) {
	return function () {
		const confirmation = prompt(`Are you sure you want to apply the "${i18n(this.title)}" preset? Type "yes" to continue.`);
		if (/^"?yes"?$/.test(confirmation)) {
			callback();
			const shouldReload = confirm(`Applied preset: ${i18n(this.title)}\nYou must reload the page to see results.\n\nWould you like to reload now?`);
			if (shouldReload) {
				location.reload();
			}
		} else {
			notifications_showNotification({
				moduleID: presets_module.moduleID,
				title: 'Preset cancelled',
				message: 'If you really wanted to apply this preset, make sure to type in "yes" when prompted.'
			});
		}
	};
}

function sanitizeModulesList(unsanitized) {
	let sanitized;
	if (unsanitized === '*') {
		sanitized = allModules();
	} else if (typeof unsanitized === 'string') {
		sanitized = unsanitized.split(/[,\s]/);
	} else if (unsanitized && unsanitized.length) {
		sanitized = unsanitized;
	}
	return sanitized ? [].concat(sanitized) : [];
}

function toggleModules(requestEnable, requestDisable) {
	let enable = sanitizeModulesList(requestEnable);
	let disable = sanitizeModulesList(requestDisable);

	disable = requestEnable !== '*' ? disable.filter(moduleID => !enable.includes(moduleID)) : disable;

	enable = requestDisable !== '*' ? enable.filter(moduleID => !disable.includes(moduleID)) : enable;

	disable.forEach(modId => setEnabled(modId, false));
	enable.forEach(modId => setEnabled(modId, true));
}

function allModules() {
	return modules_all().map(mod => mod.moduleID);
}

function toggleOptions(requestEnable, requestDisable) {
	const enable = requestEnable ? [].concat(requestEnable) : [];
	const disable = requestDisable ? [].concat(requestDisable) : [];

	enable.forEach(option => presets_setOptionValue(true, option));
	disable.forEach(option => presets_setOptionValue(false, option));
}

function presets_setOptionValue(value, path) {
	if (typeof path === 'string') {
		path = path.split('.');
	}
	const [id, optName] = path;
	options_set(id, optName, value);
}
// CONCATENATED MODULE: ./lib/modules/profileNavigator.js










const profileNavigator_module = new Module('profileNavigator');

profileNavigator_module.moduleName = 'profileNavigatorName';
profileNavigator_module.description = 'profileNavigatorDesc';
profileNavigator_module.category = 'myAccountCategory';

profileNavigator_module.options = {
	sectionMenu: {
		title: 'profileNavigatorSectionMenuTitle',
		type: 'boolean',
		value: true,
		description: 'profileNavigatorSectionMenuDesc'
	},
	sectionLinks: {
		title: 'profileNavigatorSectionLinksTitle',
		dependsOn: options => options.sectionMenu.value,
		description: 'profileNavigatorSectionLinksDesc',
		type: 'table',
		addRowText: '+add profile section shortcut',
		fields: [{
			key: 'label',
			name: 'label',
			type: 'text'
		}, {
			key: 'url',
			name: 'url',
			type: 'text'
		}],
		value: [['saved', './saved'], ['comments', './comments'], ['submitted', './submitted'], ['gilded', './gilded'], ['upvoted', './upvoted'], ['downvoted', './downvoted']]
	},
	hoverDelay: {
		title: 'profileNavigatorHoverDelayTitle',
		dependsOn: options => options.sectionMenu.value,
		type: 'text',
		value: '1000',
		description: 'profileNavigatorHoverDelayDesc',
		advanced: true
	},
	fadeDelay: {
		title: 'profileNavigatorFadeDelayTitle',
		dependsOn: options => options.sectionMenu.value,
		type: 'text',
		value: '200',
		description: 'profileNavigatorFadeDelayDesc',
		advanced: true
	},
	fadeSpeed: {
		title: 'profileNavigatorFadeSpeedTitle',
		dependsOn: options => options.sectionMenu.value,
		type: 'text',
		value: '0.7',
		description: 'profileNavigatorFadeSpeedDesc',
		advanced: true
	}
};

profileNavigator_module.go = () => {
	const username = loggedInUser();
	if (profileNavigator_module.options.sectionMenu.value && username) {
		$('#header .user a').on('mouseover', e => onMouseoverProfileLink(username, e));
	}
};

function onMouseoverProfileLink(user, e) {
	dropdownList(profileNavigator_module.moduleID).target(e.target).options({
		openDelay: penalizedDelay(profileNavigator_module.moduleID, 'sectionMenu', profileNavigator_module.options.hoverDelay),
		fadeDelay: profileNavigator_module.options.fadeDelay.value,
		fadeSpeed: profileNavigator_module.options.fadeSpeed.value,
		pin: pin.bottom
	}).populateWith(() => profileNavigator_populateSectionMenu(user)).begin();
}

const profileNavigator_populateSectionMenu = username => {
	alterFeaturePenalty(profileNavigator_module.moduleID, 'sectionMenu', 5);
	return [profileNavigator_module.options.sectionLinks.value.map(link => profileNavigator_populateSectionItem(username, link)).reduce((prev, curr) => prev.add(curr), $()).add(profileNavigator_populateSectionItem('..', [`<i>${i18n(profileNavigator_module.moduleName)}</i>`, makeUrlHash(profileNavigator_module.moduleID, 'sectionMenu')]))];
};

function profileNavigator_populateSectionItem(username, link) {
	if (!(link && link.length >= 2)) {
		return $();
	}

	const label = link[0] || '';
	const url = link[1] || '';
	const $link = $('<a />').safeHtml(label).attr('href', `/user/${username}/${url}`);

	if (isSettingsUrl(url)) {
		$link.append('<span class="RESMenuItemButton gearIcon" />');
	}

	$link.on('click', () => {
		dropdownList(profileNavigator_module.moduleID).close();
		alterFeaturePenalty(profileNavigator_module.moduleID, 'sectionMenu', -30);
	});

	return $('<li />').append($link);
}
// CONCATENATED MODULE: ./lib/modules/profileRedirect.js









const profileRedirect_module = new Module('profileRedirect');

profileRedirect_module.moduleName = 'profileRedirectName';
profileRedirect_module.category = 'usersCategory';
profileRedirect_module.description = 'profileRedirectDesc';
profileRedirect_module.keywords = ['legacy', 'overview'];
profileRedirect_module.include = ['profile', 'profile2x'];

profileRedirect_module.options = {
	fromLandingPage: {
		title: 'profileRedirectFromLandingPageTitle',
		description: 'profileRedirectFromLandingPageDesc',
		keywords: ['legacy', 'overview'],
		type: 'enum',
		value: 'none',
		values: [{
			name: 'Do nothing',
			value: 'none'
		}, {
			name: 'Overview (legacy)',
			value: 'overview'
		}, {
			name: 'Comments',
			value: 'comments'
		}, {
			name: 'Submitted (legacy)',
			value: 'submitted'
		}, {
			name: 'Gilded',
			value: 'gilded'
		}, {
			name: 'Custom',
			value: 'custom'
		}]
	},
	customFromLandingPage: {
		dependsOn: options => options.fromLandingPage.value === 'custom',
		title: 'profileRedirectCustomFromLandingPageTitle',
		description: 'profileRedirectCustomFromLandingPageDesc',
		type: 'text',
		value: ''
	}
};

profileRedirect_module.beforeLoad = function () {
	const [, username, currentSection] = regexes.profile2x.exec(location.pathname) || [];
	if (username && !currentSection) {
		if (profileRedirect_module.options.fromLandingPage.value !== 'none') {
			const preferredSection = profileRedirect_module.options.fromLandingPage.value === 'custom' ? profileRedirect_module.options.customFromLandingPage.value : profileRedirect_module.options.fromLandingPage.value;
			window.location.replace(`/user/${username}/${preferredSection}`);
		} else if (isPageType('profile2x')) {
			const notificationPromise = notifications_showNotification({
				moduleID: profileRedirect_module.moduleID,
				optionKey: 'fromLandingPage',
				header: i18n('profileRedirectFromLandingPageNotificationTitle'),
				message: string_namespaceObject.html`
					<div>
						<p>${i18n('profileRedirectFromLandingPageNotificationText')}</p>
						<p><a class="RESNotificationButtonBlue" href="${makeUrlHash(profileRedirect_module.moduleID, 'fromLandingPage')}">${i18n('profileRedirectFromLandingPageNotificationButton')}</a></p>
					</div>
				`,
				cooldown: WEEK
			});

			notificationPromise.then(notification => {
				$(notification.element).on('click', '.RESNotificationButtonBlue', () => {
					notification.close();
				});
			});
		}
	}
};
// CONCATENATED MODULE: ./lib/modules/redditUserInfo.js




const redditUserInfo_module = new Module('redditUserInfo');

redditUserInfo_module.moduleName = 'redditUserInfoName';
redditUserInfo_module.category = 'usersCategory';
redditUserInfo_module.description = 'redditUserInfoDesc';
redditUserInfo_module.options = {
	hideAuthorTooltip: {
		type: 'boolean',
		value: false,
		description: 'redditUserInfoHideDesc',
		title: 'redditUserInfoHideTitle',
		bodyClass: true
	}
};
// CONCATENATED MODULE: ./lib/modules/searchHelper.js






const searchHelper_module = new Module('searchHelper');

searchHelper_module.moduleName = 'searchHelperName';
searchHelper_module.category = 'browsingCategory';
searchHelper_module.description = 'searchHelperDesc';
searchHelper_module.options = {
	addSearchOptions: {
		title: 'searchHelperAddSearchOptionsTitle',
		type: 'boolean',
		value: true,
		description: 'searchHelperAddSearchOptionsDesc'
	},
	legacySearch: {
		title: 'searchHelperLegacySearchTitle',
		type: 'boolean',
		value: false,
		description: 'searchHelperLegacySearchDesc'
	},
	toggleSearchOptions: {
		title: 'searchHelperToggleSearchOptionsTitle',
		type: 'boolean',
		value: true,
		description: 'searchHelperToggleSearchOptionsDesc',
		advanced: true,
		dependsOn: options => options.legacySearch.value
	},
	hideSearchOptions: {
		title: 'searchHelperHideSearchOptionsTitle',
		type: 'boolean',
		value: false,
		description: 'searchHelperHideSearchOptionsDesc',
		advanced: true,
		dependsOn: options => options.legacySearch.value
	},
	userFilterBySubreddit: {
		title: 'searchHelperUserFilterBySubredditTitle',
		type: 'boolean',
		value: false,
		description: 'searchHelperUserFilterBySubredditDesc'
	},
	searchByFlair: {
		title: 'searchHelperSearchByFlairTitle',
		type: 'boolean',
		value: true,
		description: 'searchHelperSearchByFlairDesc'
	},
	searchPageTabs: {
		title: 'searchHelperSearchPageTabsTitle',
		type: 'boolean',
		value: true,
		description: 'searchHelperSearchPageTabsDesc',
		bodyClass: true
	},
	defaultSearchTab: {
		title: 'searchHelperDefaultSearchTabTitle',
		type: 'enum',
		value: 'subreddits',
		values: [{
			name: 'none',
			value: 'none'
		}, {
			name: 'subreddits',
			value: 'subreddits'
		}, {
			name: 'limit to subreddit',
			value: 'facets'
		}, {
			name: 'refine',
			value: 'options'
		}],
		description: 'searchHelperDefaultSearchTabDesc',
		dependsOn: options => options.searchPageTabs.value,
		advanced: true
	},
	transitionSearchTabs: {
		title: 'searchHelperTransitionSearchTabsTitle',
		type: 'boolean',
		value: true,
		description: 'searchHelperTransitionSearchTabsDesc',
		dependsOn: options => options.searchPageTabs.value,
		advanced: true
	},
	searchBySubreddit: {
		title: 'searchHelperSearchBySubredditTitle',
		type: 'enum',
		value: 'default',
		values: [{
			name: 'default (let reddit manage it)',
			value: 'default'
		}, {
			name: 'always',
			value: 'always'
		}, {
			name: 'never',
			value: 'never'
		}],
		description: 'searchHelperSearchBySubredditDesc'
	}
};

searchHelper_module.go = () => {
	if (searchHelper_module.options.addSearchOptions.value) {
		const searchExpando = document.getElementById('searchexpando');
		if (searchExpando) {
			let searchOptionsHtml = '<label>Sort:<select name="sort"><option value="relevance">relevance</option><option value="new">new</option><option value="hot">hot</option><option value="top">top</option><option value="comments">comments</option></select></label> <label>Time:<select name="t"><option value="all">all time</option><option value="hour">this hour</option><option value="day">today</option><option value="week">this week</option><option value="month">this month</option><option value="year">this year</option></select></label>';
			if ($(searchExpando).find('input[name=restrict_sr]').length) {
				searchOptionsHtml = `<br />${searchOptionsHtml}`;
			}
			$(searchExpando).find('#moresearchinfo').before(searchOptionsHtml);
		}
	}
	if (searchHelper_module.options.legacySearch.value) {
		$('form#search').append('<input type="hidden" name="feature" value="legacy_search" />');
	}
	if (searchHelper_module.options.userFilterBySubreddit.value) {
		const [, userProfile] = location.pathname.match(regexes.profile) || [];
		if (userProfile && document.referrer) {
			const referrer = new URL(document.referrer);
			let match, previousPage;
			if (match = referrer.pathname.match(regexes.subreddit)) {
				previousPage = `r/${match[1]}`;
			} else if (match = referrer.pathname.match(regexes.multireddit)) {
				previousPage = match[1];
			}
			if (previousPage) {
				$('.content[role=main]').prepend(`<div class="infobar"><a href="/${previousPage}/search?q=author:${userProfile} nsfw:no&restrict_sr=on">Search post of ${userProfile} on /${previousPage}</a></div>`);
			}
		}
	}
	const isLegacySearch = document.querySelector('#siteTable');
	if (searchHelper_module.options.toggleSearchOptions.value && isPageType('search') && isLegacySearch) {
		if (searchHelper_module.options.hideSearchOptions.value || location.hash === '#res-hide-options') {
			bodyClasses_namespaceObject.add('res-hide-options');
		}
		$('.content .searchpane').append('<a href="#res-hide-options" class="searchpane-toggle-hide">hide search options</a>');
		$('.content .searchpane ~ .menuarea').prepend('<a href="#res-show-options" class="searchpane-toggle-show">show search options</a>');
		$('.searchpane-toggle-hide').on('click', () => bodyClasses_namespaceObject.add('res-hide-options'));
		$('.searchpane-toggle-show').on('click', () => bodyClasses_namespaceObject.remove('res-hide-options'));
	}
	if (searchHelper_module.options.searchByFlair.value) {
		$('#siteTable').on('mouseenter', '.linkflairlabel:not(.res-flairSearch)', e => {
			const subreddit = Thing_Thing.checkedFrom(e.target).getSubreddit();
			const flair = e.target.title.replace(/\s/g, '+');
			if (flair) {
				e.target.classList.add('res-flairSearch');
				e.target.appendChild(string_namespaceObject.html`<a href="${string_namespaceObject.encode`/r/${subreddit}/search?sort=new&restrict_sr=on&q=flair%3A${flair}`}"></a>`);
			}
		});
	}

	if (searchHelper_module.options.searchPageTabs.value && !isLegacySearch) {
		const $searchTabsEle = $('<ul>', { class: 'res-search-tabs' });
		const searchHeader = document.querySelector('#previoussearch');
		const searchForm = document.querySelector('.content form#search');
		const moreSearchInfo = document.querySelector('#moresearchinfo');
		const searchFacets = document.querySelector('body.search-page .searchfacets');
		const $searchOptions = $('<div>', { class: 'res-search-options' });

		if (!searchForm) {
			return;
		}

		searchForm.removeChild(searchForm.querySelector('#moresearchinfo + p'));

		$searchTabsEle.appendTo(searchHeader);

		const subredditResultListing = document.querySelectorAll('.search-result-listing');
		if (subredditResultListing.length > 1) {
			subredditResultListing[0].classList.add('res-search-subreddits');
		}

		if (moreSearchInfo) {
			$searchOptions.appendTo(searchHeader);
			$(moreSearchInfo).children().appendTo($searchOptions);
		}
		if (searchFacets) {
			$(searchFacets).appendTo(searchHeader);
		}
		if ($('.res-search-subreddits').length) {
			$('.res-search-subreddits').appendTo(searchHeader);
		}

		const searchTabs = {
			subreddits: {
				label: 'subreddits',
				id: 'subs',
				target: '.res-search-subreddits',
				exists: $('.res-search-subreddits').length
			},
			facets: {
				label: 'limit to subreddit',
				id: 'facets',
				target: '.searchfacets',
				exists: searchFacets
			},
			options: {
				label: 'refine',
				id: 'options',
				target: '.res-search-options',
				exists: $searchOptions.get(0)
			}
		};

		for (const searchTab of Object.values(searchTabs)) {
			if (searchTab.exists) {
				$(searchTab.target).addClass('res-search-pane').slideUp(0);

				const $searchTabLi = $('<li>').attr({ class: `res-search-tab-${searchTab.id}` }).appendTo($searchTabsEle);

				$('<a>').attr({ href: '#' }).text(searchTab.label).appendTo($searchTabLi).click(e => searchTabToggle(searchTab.id, searchTab.target, e.target));
			}
		}

		if (searchHelper_module.options.defaultSearchTab.value !== 'none' && searchTabs[searchHelper_module.options.defaultSearchTab.value].exists) {
			searchTabToggle(searchTabs[searchHelper_module.options.defaultSearchTab.value].id, searchTabs[searchHelper_module.options.defaultSearchTab.value].target, null);
		}
	}
};

searchHelper_module.afterLoad = () => {
	if (searchHelper_module.options.searchBySubreddit.value !== 'default' && !isPageType('search')) {
		const restrictSearch = document.querySelector('input[name=restrict_sr]');
		if (restrictSearch) {
				restrictSearch.checked = searchHelper_module.options.searchBySubreddit.value === 'always';
			}
	}
};

function searchTabToggle(tabID, target, source) {
	const transitionSpd = searchHelper_module.options.transitionSearchTabs.value ? 200 : 0;

	const sourceParent = source ? downcast(source.parentNode, HTMLElement) : null;
	const tab = sourceParent || document.querySelector(`.res-search-tabs .res-search-tab-${tabID}`);
	const activeClass = 'res-search-tab-active';
	const openClass = 'res-search-pane-open';

	if (tab.classList.contains(activeClass)) {
		$(target).removeClass(openClass).slideUp(transitionSpd);
		tab.classList.remove(activeClass);
	} else {
		$('.res-search-pane').addClass(openClass).slideUp(transitionSpd);
		$('.res-search-tabs li').removeClass(activeClass);
		$('.res-search-pane').removeClass(openClass);
		tab.classList.add(activeClass);
		const speed = sourceParent ? transitionSpd : 0;
		$(target).addClass(openClass).slideDown(speed);
	}

	return false;
}
// CONCATENATED MODULE: ./lib/modules/showKarma.js






const showKarma_module = new Module('showKarma');

showKarma_module.moduleName = 'showKarmaName';
showKarma_module.category = 'myAccountCategory';
showKarma_module.description = 'showKarmaDesc';
showKarma_module.options = {
	showCommentKarma: {
		title: 'showKarmaShowCommentKarmaTitle',
		type: 'boolean',
		value: true,
		description: 'showKarmaShowCommentKarmaDesc'
	},
	separator: {
		title: 'showKarmaSeparatorTitle',
		type: 'text',
		value: '\u00b7',
		description: 'showKarmaSeparatorDesc',
		advanced: true
	},
	useCommas: {
		title: 'showKarmaUseCommasTitle',
		type: 'boolean',
		value: true,
		description: 'showKarmaUseCommasDesc'
	},
	showGold: {
		title: 'showKarmaShowGoldTitle',
		type: 'boolean',
		value: false,
		description: 'showKarmaShowGoldDesc'
	}
};

showKarma_module.go = async () => {
	const username = loggedInUser();
	if (username) {
		if (showKarma_module.options.showCommentKarma.value) {
			await updateKarmaDiv(username);
		} else {
			formatPostKarma();
		}
		if (showKarma_module.options.showGold.value) {
			updateUserSpan();
		}
	}
};

async function updateKarmaDiv(username) {
	const karmaDiv = document.querySelector('#header-bottom-right .userkarma');

	if (karmaDiv) {
		karmaDiv.title = '';

		const { data } = await getUserInfo();

		let postKarma = data.link_karma;
		let commentKarma = data.comment_karma;

		if (showKarma_module.options.useCommas.value) {
			postKarma = commaNumber(postKarma);
			commentKarma = commaNumber(commentKarma);
		} else {
			postKarma = uncommaNumber(postKarma);
		}

		$(karmaDiv).safeHtml(`<a title="post karma" href="/user/${username}/submitted/">${postKarma}</a>
			${showKarma_module.options.separator.value}
			<a title="comment karma" href="/user/${username}/comments/">${commentKarma}</a>`);
	}
}

async function updateUserSpan() {
	const userSpan = document.querySelector('#header-bottom-right .user');

	if (userSpan) {
		const { data } = await getUserInfo();

		if (data.is_gold) {
			const $gilded = $('<span>', { class: 'gilded-icon' });

			if (data.gold_expiration) {
				const today = new Date();
				const expDate = new Date(data.gold_expiration * 1000);
				$gilded.attr('title', `Until ${formatDate(expDate)} (${formatDateDiff(today, expDate)})`);
			}

			$(userSpan).prepend($gilded);
		}
	}
}

function formatPostKarma(value) {
	const container = document.querySelector('#header-bottom-right .user .userkarma');
	value = typeof value !== 'undefined' ? value : container.textContent;

	if (!showKarma_module.options.useCommas.value) {
		container.textContent = uncommaNumber(value);
	}
}

function commaNumber(value) {
	return formatNumber(value);
}

function uncommaNumber(value) {
	const match = String(value || 0).match(/(\w+)/g);
	return match ? match.join('') : '0';
}
// CONCATENATED MODULE: ./lib/modules/sourceSnudown.js







const sourceSnudown_module = new Module('sourceSnudown');

sourceSnudown_module.moduleName = 'sourceSnudownName';
sourceSnudown_module.description = 'sourceSnudownDesc';
sourceSnudown_module.category = 'commentsCategory';

sourceSnudown_module.beforeLoad = () => {
	watchForThings(['post', 'comment', 'message'], attachViewSourceButton);
};

const sourceButton = (e => () => e().cloneNode(true))(once_default()(() => {
	$(document.body).on('click', 'li.viewSource a', function (e) {
		e.preventDefault();
		viewSource(this);
	}).on('click', '.usertext-edit.viewSource .cancel', function () {
		$(this).parents('.usertext-edit.viewSource').hide();
	});

	return string_namespaceObject.html`
		<li class="viewSource">
			<a class="noCtrlF" href="javascript:void 0" data-text="source"></a>
		</li>
	`;
}));

function attachViewSourceButton(thing) {
	if (thing.isLinkPost()) return;

	const buttons = thing.entry.querySelector('.flat-list.buttons > li.first') || thing.entry.querySelector('.flat-list.buttons > li');
	if (buttons) buttons.after(sourceButton());
}

const viewSource = keyedMutex(async button => {
	const $button = $(button);
	const $buttonList = $button.closest('ul');
	if ($button.data('source-open')) {
		$button.closest('.thing').find('.usertext-edit.viewSource:first').toggle();
	} else {
		const path = $buttonList.find('a.bylink, .first a').get(0).pathname;

		const response = await ajax({
			url: `${path}.json`,
			query: { raw_json: 1 },
			type: 'json'
		});

		const $userTextForm = $('<div class="usertext-edit viewSource"><div><textarea rows="1" cols="1" name="text" readonly></textarea></div><div class="bottom-area"><div class="usertext-buttons"><button type="button" class="cancel">hide</button></div></div></div>');
		$userTextForm.find('textarea').one('dblclick', () => $userTextForm.removeAttr('readonly'));

		let sourceText;

		if (regexes.commentPermalink.test(path)) {
			sourceText = response[1].data.children[0].data.body;
		} else if (regexes.comments.test(path)) {
			sourceText = response[0].data.children[0].data.selftext;
		} else {
			const postId = /\/(\w*)\/?$/.exec(path)[1];
			const data = response.data.children[0].data;
			if (data.id === postId) {
				sourceText = data.body;
			} else {
				sourceText = data.replies.data.children.find(({ data: { id } }) => id === postId).data.body;
			}
		}

		$userTextForm.find('textarea[name=text]').text(sourceText);
		$buttonList.before($userTextForm);
		$(button).data('source-open', true);
	}
});
// CONCATENATED MODULE: ./lib/modules/spamButton.js






const spamButton_module = new Module('spamButton');

spamButton_module.moduleName = 'spamButtonName';
spamButton_module.category = 'submissionsCategory';
spamButton_module.disabledByDefault = true;
spamButton_module.description = 'spamButtonDesc';

spamButton_module.beforeLoad = () => {
	watchForThings(['post', 'comment'], addSpamButton);
};

function addSpamButton(thing) {
	const authorElement = thing.getAuthorElement();
	const authorName = thing.getAuthor();
	if (!authorElement || !authorName || loggedInUser() === authorName) return;

	const list = thing.entry.querySelector('.buttons');
	const spam = document.createElement('li');

	$(list.lastChild).before(spam);

	const a = document.createElement('a');
	a.setAttribute('class', 'option');
	a.setAttribute('title', 'Report this user as a spammer');
	a.href = `/message/compose?to=/r/reddit.com&subject=spam&message=${authorElement.href}`;
	a.target = '_blank';
	a.rel = 'noopener noreferer';
	a.textContent = 'rts';
	spam.appendChild(a);
}
// CONCATENATED MODULE: ./lib/modules/spoilerTags.js




const spoilerTags_module = new Module('spoilerTags');

spoilerTags_module.moduleName = 'spoilerTagsName';
spoilerTags_module.category = 'appearanceCategory';
spoilerTags_module.description = 'spoilerTagsDesc';
spoilerTags_module.include = ['profile'];
spoilerTags_module.bodyClass = true;
spoilerTags_module.options = {
	transition: {
		title: 'spoilerTagsTransitionTitle',
		type: 'boolean',
		value: true,
		description: 'spoilerTagsTransitionDesc',
		bodyClass: true
	}
};
// CONCATENATED MODULE: ./lib/modules/stylesheet.js









const stylesheet_module = new Module('stylesheet');

stylesheet_module.moduleName = 'stylesheetName';
stylesheet_module.description = 'stylesheetDesc';
stylesheet_module.category = 'appearanceCategory';
stylesheet_module.exclude = ['prefs', 'account', 'stylesheet', 'subredditAbout'];

stylesheet_module.options = {
	redditThemes: {
		title: 'stylesheetRedditThemesTitle',
		description: 'stylesheetRedditThemesDesc',
		type: 'button',
		text: 'learn more',
		callback() {
			window.location.href = 'https://www.reddit.com/r/Enhancement/wiki/faq/srstyle#reddit_themes';
		}
	},
	loadStylesheets: {
		title: 'stylesheetLoadStylesheetsTitle',
		type: 'table',
		description: 'stylesheetLoadStylesheetsDesc',
		value: [],
		fields: [{
			key: 'urlOrSubreddit',
			name: 'url or subreddit',
			type: 'text'
		}, {
			key: 'applyTo',
			name: 'applyTo',
			type: 'select',
			values: [{
				name: 'Everywhere',
				value: 'everywhere'
			}, {
				name: 'Everywhere but:',
				value: 'exclude'
			}, {
				name: 'Only on:',
				value: 'include'
			}],
			value: 'everywhere'
		}, {
			key: 'applyToSubreddits',
			name: 'applyToSubreddits',
			type: 'list',
			listType: 'subreddits'
		}, {
			key: 'customToggle',
			name: 'customToggle',
			type: 'select',
			get values() {
				return stylesheet_getToggles();
			},
			value: ''
		}]
	},
	snippets: {
		title: 'stylesheetSnippetsTitle',
		type: 'table',
		description: 'stylesheetSnippetsDesc',
		value: [],
		fields: [{
			key: 'snippet',
			name: 'snippet',
			type: 'textarea'
		}, {
			key: 'applyTo',
			name: 'applyTo',
			type: 'select',
			values: [{
				name: 'Everywhere',
				value: 'everywhere'
			}, {
				name: 'Everywhere but:',
				value: 'exclude'
			}, {
				name: 'Only on:',
				value: 'include'
			}],
			value: 'everywhere'
		}, {
			key: 'applyToSubreddits',
			name: 'applyToSubreddits',
			type: 'list',
			listType: 'subreddits'
		}, {
			key: 'customToggle',
			name: 'customToggle',
			type: 'select',
			get values() {
				return stylesheet_getToggles();
			},
			value: ''
		}]
	},
	bodyClasses: {
		title: 'stylesheetBodyClassesTitle',
		type: 'table',
		description: 'stylesheetBodyClassesDesc',
		value: [],
		fields: [{
			key: 'classes',
			name: 'classes',
			type: 'text'
		}, {
			key: 'applyTo',
			name: 'applyTo',
			type: 'select',
			values: [{
				name: 'Everywhere',
				value: 'everywhere'
			}, {
				name: 'Everywhere but:',
				value: 'exclude'
			}, {
				name: 'Only on:',
				value: 'include'
			}],
			value: 'everywhere'
		}, {
			key: 'applyToSubreddits',
			name: 'applyToSubreddits',
			type: 'list',
			listType: 'subreddits'
		}, {
			key: 'customToggle',
			name: 'customToggle',
			type: 'select',
			get values() {
				return stylesheet_getToggles();
			},
			value: ''
		}]
	},
	subredditClass: {
		title: 'stylesheetSubredditClassTitle',
		type: 'boolean',
		value: true,
		description: 'stylesheetSubredditClassDesc'
	},
	multiredditClass: {
		title: 'stylesheetMultiredditClassTitle',
		type: 'boolean',
		value: true,
		description: 'stylesheetMultiredditClassDesc'
	},
	usernameClass: {
		title: 'stylesheetUsernameClassTitle',
		type: 'boolean',
		value: true,
		description: 'stylesheetUsernameClassDesc'
	},
	loggedInUserClass: {
		title: 'stylesheetLoggedInUserClassTitle',
		type: 'boolean',
		value: false,
		description: 'stylesheetLoggedInUserClassDesc'
	}
};

stylesheet_module.beforeLoad = () => {
	if (stylesheet_module.options.subredditClass.value) {
		applySubredditClass();
	}
	if (stylesheet_module.options.usernameClass.value) {
		applyUsernameClass();
	}
	if (stylesheet_module.options.multiredditClass.value) {
		applyMultiredditClass();
	}

	$(customToggles_module).on('toggle', applyStyles);
	applyStyles();

	function applyStyles() {
		applyBodyClasses();
		loadStylesheets();
		applyCssSnippets();
	}
};

stylesheet_module.go = () => {
	if (stylesheet_module.options.loggedInUserClass.value) {
		applyLoggedInUserClass();
	}
};

function applySubredditClass() {
	let name = currentSubreddit();
	if (name) {
		name = name.toLowerCase();
		bodyClasses_namespaceObject.add(`res-r-${name}`);
	}
}

function applyMultiredditClass() {
	let name = currentMultireddit();
	if (name) {
		name = name.toLowerCase().replace(/\//g, '-');
		bodyClasses_namespaceObject.add(`res-${name}`);
	}
}

function applyUsernameClass() {
	let name = currentUserProfile();
	if (name) {
		name = name.toLowerCase();
		bodyClasses_namespaceObject.add(`res-user-${name}`);
	}
}

function applyLoggedInUserClass() {
	let name = loggedInUser();
	if (name) {
		name = name.toLowerCase();
		bodyClasses_namespaceObject.add(`res-me-${name}`);
	}
}

function applyBodyClasses() {
	const addClasses = stylesheet_module.options.bodyClasses.value.filter(row => shouldApply(row[3], row[1], row[2])).map(row => (row[0] || '').split(/[\s,]/)).reduce((a, b) => a.concat(b), []);

	const removeClasses = stylesheet_module.options.bodyClasses.value.filter(row => !shouldApply(row[3], row[1], row[2])).map(row => (row[0] || '').split(/[\s,]/)).reduce((a, b) => a.concat(b), []);

	bodyClasses_namespaceObject.add(...addClasses);
	bodyClasses_namespaceObject.remove(...removeClasses);
}

const subredditNameRegexp = /^(?:\/?r\/)?([\w_]+)\/?$/;
const urlRegexp = /^(?:https?:\/\/[\w\.]+)?\/\w+/;

const sanitizeStylesheetUrls = filterMap(([url]) => {
	if (subredditNameRegexp.test(url)) {
		return [`/r/${subredditNameRegexp.exec(url)[1]}/stylesheet.css`];
	} else if (urlRegexp.test(url)) {
		return [url];
	}
});

function loadStylesheets() {
	const stylesheetUrls = flow_default()(filter_default()(row => shouldApply(row[3], row[1], row[2])), sanitizeStylesheetUrls)(stylesheet_module.options.loadStylesheets.value);

	stylesheetManager.sync(stylesheetUrls);
}

const stylesheetManager = stylesheetElementManager(url => $('<link rel="stylesheet">').attr('href', url));

function applyCssSnippets() {
	const snippets = stylesheet_module.options.snippets.value.filter(row => shouldApply(row[3], row[1], row[2])).map(([css]) => css);

	snippetManager.sync(snippets);
}

const snippetManager = stylesheetElementManager(css => $('<style>', { text: css }));

function stylesheetElementManager(generateElement) {
	const current = new Map();

	function sync(wantedKeys) {
		const currentKeys = Array.from(current.keys());

		const addElements = difference_default()(wantedKeys, currentKeys).map(x => {
			const $ele = generateElement(x);
			current.set(x, $ele);
			return $ele;
		}).reduce((a, b) => a.add(b), $());

		const removeElements = difference_default()(currentKeys, wantedKeys).map(x => {
			const $ele = current.get(x) || $();
			current.delete(x);
			return $ele;
		}).reduce((a, b) => a.add(b), $());

		addElements.appendTo(document.head || document.documentElement);
		removeElements.remove();
	}

	return { sync };
}

function shouldApply(toggle, applyTo, applyList) {
	if (toggle && !toggleActive(toggle)) return false;

	let subreddit = currentSubreddit();
	if (!subreddit) {
		return applyTo !== 'include';
	}

	subreddit = subreddit.toLowerCase();
	applyList = typeof applyList === 'string' ? applyList.toLowerCase().split(',') : [];

	switch (applyTo) {
		case 'exclude':
			return !(applyList.includes(subreddit) || applyList.includes('all'));
		case 'include':
			return applyList.includes(subreddit) || applyList.includes('all');
		default:
			return true;
	}
}

function stylesheet_getToggles() {
	return [{ name: 'No toggle needed', value: '' }, ...customToggles_getToggles().map(({ key, text }) => ({ name: text, value: key }))];
}
// CONCATENATED MODULE: ./lib/modules/submitHelper.js











const submitHelper_module = new Module('submitHelper');

submitHelper_module.moduleName = 'submitHelperName';
submitHelper_module.category = 'submissionsCategory';
submitHelper_module.description = 'submitHelperDesc';
submitHelper_module.options = {
	warnAlreadySubmitted: {
		title: 'submitHelperWarnAlreadySubmittedTitle',
		type: 'boolean',
		value: true,
		description: 'submitHelperWarnAlreadySubmittedDesc'
	},
	uncheckSendRepliesToInbox: {
		title: 'submitHelperUncheckSendRepliesToInboxTitle',
		type: 'boolean',
		value: false,
		description: 'submitHelperUncheckSendRepliesToInboxDesc'
	},
	focusFormOnLoad: {
		title: 'submitHelperFocusFormOnLoadTitle',
		type: 'boolean',
		value: true,
		description: 'submitHelperFocusFormOnLoadDesc'
	}
};

const $repostWarning = once_default()(() => $(string_namespaceObject.html`
	<div class="spacer" style="display: none">
		<div class="roundfield info-notice">
			<a style="float: right" class="gearIcon" href="${makeUrlHash(submitHelper_module.moduleID, 'warnAlreadySubmitted')}"></a>
			<p>This link was submitted to <a class="subredditLink" href="#"></a>:<span class="time"></span><a class="seeMore" href="#" target="_blank" rel="noopener noreferer">(see more)</a></p>
		</div>
	</div>
`));

let urlField, srField;

submitHelper_module.go = () => {
	if (isPageType('submit') && submitHelper_module.options.warnAlreadySubmitted.value) {
		const urlFieldDiv = document.querySelector('#url-field');
		if (urlFieldDiv) {
			$(urlFieldDiv).parent().after($repostWarning());
			urlField = urlFieldDiv.querySelector('#url');
			srField = document.querySelector('#sr-autocomplete');
			$([srField, urlField]).on('input keydown', debounce_default()(updateRepostWarning, 300));

			$('#suggested-reddits a, #sr-drop-down').on('click', updateRepostWarning);

			const linkButton = document.querySelector('a.link-button');
			const textButton = document.querySelector('a.text-button');
			if (linkButton && textButton) {
				linkButton.addEventListener('click', () => {
					updateRepostWarning();
				});
				textButton.addEventListener('click', () => {
					$repostWarning().hide();
				});
			}
		}
	}

	if (isPageType('submit') && submitHelper_module.options.uncheckSendRepliesToInbox.value) {
		const sendReplies = document.querySelector('#sendreplies');
		if (sendReplies) {
			sendReplies.checked = false;
		}
	}

	if (isPageType('submit') && submitHelper_module.options.focusFormOnLoad.value) {
		$('form.submit [name=url], form.submit [name=title]').filter(':visible').first().focus();
	}

	if (!isPageType('submit')) {
		submitHelper_registerCommandLine();
	}
};

function submitHelper_registerCommandLine() {
	const trailingUrl = /(?:\s+(\w+:\/\/.+))$/;
	const cliParams = /^(?:(?:\/?r\/)?(\w+))?(?:\s+(.*))?$/;

	function commandLineParameters(val) {
		const urlResult = trailingUrl.exec(val);
		const result = cliParams.exec(urlResult ? val.slice(0, val.length - urlResult[0].length) : val);
		return result ? result.slice(1).concat(urlResult ? urlResult[1] : undefined) : [];
	}

	registerCommand(/^p(?:ost)?$/, 'post [subreddit] [title] [url] - submit a post to a subreddit', (command, val) => {
		const [subreddit, title, url] = commandLineParameters(val);
		if (!subreddit) {} else if (url) {
			return `Post ${url} to /r/${subreddit}: ${title}`;
		} else if (title) {
			return `Post to /r/${subreddit}: ${title || ''}`;
		} else if (subreddit) {
			return `Post to /r/${subreddit}`;
		}
	}, (command, val) => {
		const [subreddit, title, url] = commandLineParameters(val);

		const redirect = subreddit ? string_namespaceObject.encode`/r/${subreddit}/submit?title=${title || ''}&url=${url || ''}` : '/submit';

		window.location = redirect;
	});
}

function showRepostWarning(sr, url, date) {
	$repostWarning().find('.subredditLink').attr('href', `/r/${sr}`).text(`/r/${sr}`).end().find('.seeMore').attr('href', string_namespaceObject.encode`/r/${sr}/search?restrict_sr=on&sort=relevance&q=url%3A${url}`).end().find('.time').text(` ${i18n('submitHelperTimeAgo', formatDateDiff(date))} `).end().fadeIn(300);
}

function hideRepostWarning() {
	$repostWarning().fadeOut(300);
}

async function updateRepostWarning() {
	if (!urlField.value) return;
	const stripUrlRe = /^(?:https?:\/\/)?(?:(?:www|i|m)\.)?(.+?)\/?(?:\.\w+)?(?:#[^\/]*)?$/i;
	const subreddit = srField.value;
	const userUrl = stripUrlRe.exec(urlField.value)[1];

	if (subreddit && userUrl) {
		try {
			const { data } = await ajax({
				url: string_namespaceObject.encode`/r/${subreddit}/search.json`,
				query: {
					restrict_sr: 'on',
					sort: 'relevance',
					limit: 1,
					q: `url:${userUrl}`
				},
				type: 'json'
			});

			if (data && data.children.length && data.children[0].data.url.match(stripUrlRe)[1] === userUrl) {
				showRepostWarning(subreddit, userUrl, new Date(data.children[0].data.created_utc * 1000));
			} else {
				hideRepostWarning();
			}
		} catch (e) {
			hideRepostWarning();
			throw e;
		}
	} else {
		hideRepostWarning();
	}
}
// CONCATENATED MODULE: ./lib/modules/subredditInfo.js













const subredditInfo_module = new Module('subredditInfo');

subredditInfo_module.moduleName = 'subredditInfoName';
subredditInfo_module.category = 'subredditsCategory';
subredditInfo_module.description = 'subredditInfoDesc';
subredditInfo_module.options = {
	requireDirectLink: {
		title: 'subredditInfoRequireDirectLinkTitle',
		type: 'boolean',
		value: true,
		description: 'subredditInfoRequireDirectLinkDesc'
	},
	hoverDelay: {
		title: 'subredditInfoHoverDelayTitle',
		type: 'text',
		value: '800',
		description: 'subredditInfoHoverDelayDesc',
		advanced: true
	},
	fadeDelay: {
		title: 'subredditInfoFadeDelayTitle',
		type: 'text',
		value: '200',
		description: 'subredditInfoFadeDelayDesc',
		advanced: true
	},
	fadeSpeed: {
		title: 'subredditInfoFadeSpeedTitle',
		type: 'text',
		value: '0.7',
		description: 'subredditInfoFadeSpeedDesc',
		advanced: true
	}
};

subredditInfo_module.go = () => {
	const linkSelector = ['a.subreddit', 'a.search-subreddit-link', '.md a[href^="/r/"]', '.Post a[href^="/r/"]:not([href*="/comments/"])', '.Comment a[href^="/r/"]:not([href*="/comments/"])', 'a[data-click-id="subreddit"]', !subredditInfo_module.options.requireDirectLink.value && '.md a[href*="reddit.com/r/"]'].filter(x => x).join(', ');

	$(document.body).on('mouseover', linkSelector, subredditInfo_handleMouseOver);
};

function subredditInfo_handleMouseOver(e) {
	const target = downcast(e.target, HTMLAnchorElement);

	const [, subreddit] = regexes.subreddit.exec(target.pathname);

	infocard(subredditInfo_module.moduleID).target(target).options({
		width: 450,
		openDelay: subredditInfo_module.options.hoverDelay.value,
		fadeDelay: subredditInfo_module.options.fadeDelay.value,
		fadeSpeed: subredditInfo_module.options.fadeSpeed.value
	}).populateWith(card => showSubredditInfo(card, subreddit)).begin();
}

async function showSubredditInfo(card, subreddit) {
	const header = string_namespaceObject.html`<div><a href="/r/${subreddit}">/r/${subreddit}</a></div>`;

	if (loggedInUser()) {
		const subscribeToggle = $('<span />').attr('id', 'RESHoverInfoSubscriptionButton').addClass('res-fancy-toggle-button').css('margin-left', '12px').hide().on('click', toggleSubscription);
		updateToggleButton(subscribeToggle[0], false);
		header.appendChild(subscribeToggle[0]);
	}

	card.populate([header]);

	let jsonData;
	try {
		jsonData = await ajax({
			url: `/r/${subreddit.toLowerCase()}/about.json`,
			type: 'json',
			cacheFor: HOUR
		});
	} catch (e) {
		return [null, i18n('subredditInfoErrorLoadingSubredditInfo')];
	}

	if (jsonData.kind !== 't5') {
		return [null, i18n('subredditInfoSubredditNotFound')];
	}

	const d = new Date(jsonData.data.created_utc * 1000);

	const $newBody = $(string_namespaceObject.html`
		<div class="subredditInfoToolTip">
			<div class="subredditLabel">${i18n('subredditInfoSubredditCreated')}</div> <div class="subredditDetail">${formatDate(d)} (${formatDateDiff(d)})</div>
			<div class="subredditLabel">${i18n('subredditInfoSubscribers')}</div> <div class="subredditDetail">${formatNumber(jsonData.data.subscribers)}</div>
			<div class="subredditLabel">${i18n('subredditInfoTitle')}</div> <div class="subredditDetail">${jsonData.data.title}</div>
			<div class="subredditLabel">${i18n('subredditInfoOver18')}</div> <div class="subredditDetail">${jsonData.data.over18 ? i18n('yes') : i18n('no')}</div>
			<div class="clear"></div>
			<div id="subTooltipButtons" class="bottomButtons">
				<div class="clear"></div>
			</div>
		</div>
	`);

	if (modules_isRunning(subredditManager_namespaceObject)) {
		const theSC = document.createElement('span');
		theSC.setAttribute('class', 'res-fancy-toggle-button REStoggle RESshortcut');
		theSC.setAttribute('data-subreddit', jsonData.data.display_name.toLowerCase());
		const idx = mySubredditShortcuts.findIndex(shortcut => shortcut.subreddit.toLowerCase() === jsonData.data.display_name.toLowerCase());
		if (idx !== -1) {
			theSC.textContent = `-${i18n('subredditInfoAddRemoveShortcut')}`;
			theSC.setAttribute('title', i18n('subredditInfoRemoveThisSubredditFromShortcuts'));
			theSC.classList.add('remove');
		} else {
			theSC.textContent = `+${i18n('subredditInfoAddRemoveShortcut')}`;
			theSC.setAttribute('title', i18n('subredditInfoAddThisSubredditToShortcuts'));
		}
		theSC.addEventListener('click', toggleSubredditShortcut);

		$newBody.find('#subTooltipButtons').append(theSC);
	}

	if (modules_isEnabled(dashboard_namespaceObject)) {
		const dashboardToggle = document.createElement('span');
		dashboardToggle.setAttribute('class', 'res-fancy-toggle-button RESDashboardToggle');
		dashboardToggle.setAttribute('data-subreddit', jsonData.data.display_name.toLowerCase());
		const exists = subredditWidgetExists(jsonData.data.display_name);
		if (exists) {
			dashboardToggle.textContent = `-${i18n('subredditInfoAddRemoveDashboard')}`;
			dashboardToggle.setAttribute('title', i18n('subredditInfoRemoveThisSubredditFromDashboard'));
			dashboardToggle.classList.add('remove');
		} else {
			dashboardToggle.textContent = `+${i18n('subredditInfoAddRemoveDashboard')}`;
			dashboardToggle.setAttribute('title', i18n('subredditInfoAddThisSubredditToDashboard'));
		}
		dashboardToggle.addEventListener('click', toggleDashboard);
		$newBody.find('#subTooltipButtons').append(dashboardToggle);
	}

	if (modules_isEnabled(filteReddit_namespaceObject)) {
		const filterToggle = document.createElement('span');
		filterToggle.setAttribute('class', 'res-fancy-toggle-button RESFilterToggle');
		const subredditNameLowercase = jsonData.data.display_name.toLowerCase();
		const filteredReddits = filteReddit_module.options.subreddits.value;
		const exists = filteredReddits.some(reddit => reddit && reddit[0].toLowerCase() === subredditNameLowercase);
		if (exists) {
			filterToggle.textContent = `-${i18n('subredditInfoAddRemoveFilter')}`;
			filterToggle.setAttribute('title', i18n('subredditInfoStopFilteringFromAllAndDomain'));
			filterToggle.classList.add('remove');
		} else {
			filterToggle.textContent = `+${i18n('subredditInfoAddRemoveFilter')}`;
			filterToggle.setAttribute('title', i18n('subredditInfoFilterFromAllAndDomain'));
		}
		filterToggle.addEventListener('click', e => {
			const added = toggleFilter(subredditNameLowercase);

			if (added) {
				e.target.setAttribute('title', i18n('subredditInfoStopFilteringThisSubredditFromAllAndDomain'));
				e.target.textContent = `-${i18n('subredditInfoAddRemoveFilter')}`;
				e.target.classList.add('remove');
			} else {
				e.target.setAttribute('title', i18n('subredditInfoFilterThisSubredditFromAllAndDomain'));
				e.target.textContent = `+${i18n('subredditInfoAddRemoveFilter')}`;
				e.target.classList.remove('remove');
			}
		});
		$newBody.find('#subTooltipButtons').append(filterToggle);
	}

	if (loggedInUser()) {
		const subscribed = !!jsonData.data.user_is_subscriber;
		const $subscribeToggle = $('#RESHoverInfoSubscriptionButton');
		$subscribeToggle.attr('data-subreddit', jsonData.data.display_name.toLowerCase());
		updateToggleButton($subscribeToggle[0], subscribed);
		if (modules_isEnabled(subredditManager_namespaceObject)) {
			$subscribeToggle.after((await getMultiCounts(jsonData.data.display_name)));
		}
		$subscribeToggle.fadeIn('fast');
	}

	return [null, $newBody];
}

function updateToggleButton(toggleButton, subscribed) {
	if (subscribed) {
		toggleButton.textContent = `-${i18n('subredditInfoUnsubscribe')}`;
		toggleButton.classList.add('remove');
	} else {
		toggleButton.textContent = `+${i18n('subredditInfoSubscribe')}`;
		toggleButton.classList.remove('remove');
	}
}

async function toggleSubscription(e) {
	const subscribeToggle = e.target;
	const subreddit = subscribeToggle.getAttribute('data-subreddit').toLowerCase();
	const { data: subredditData } = await ajax({
		url: `/r/${subreddit}/about.json`,
		type: 'json',
		cacheFor: HOUR
	});
	const subscribing = !subredditData.user_is_subscriber;

	updateToggleButton(subscribeToggle, subscribing);

	subscribeToSubreddit(subredditData.name, subscribing);

	ajax.invalidate({ url: `/r/${subreddit}/about.json` });
}
// CONCATENATED MODULE: ./lib/modules/subredditTagger.js






const subredditTagger_module = new Module('subRedditTagger');

subredditTagger_module.moduleName = 'subredditTaggerName';
subredditTagger_module.category = 'subredditsCategory';
subredditTagger_module.description = 'subredditTaggerDesc';
subredditTagger_module.options = {
	subReddits: {
		title: 'subRedditTaggerSubRedditsTitle',
		type: 'table',
		addRowText: '+add tag',
		fields: [{
			key: 'subreddit',
			name: 'subreddit',
			type: 'text'
		}, {
			key: 'doesntContain',
			name: 'doesntContain',
			type: 'text'
		}, {
			key: 'tag',
			name: 'tag',
			type: 'text'
		}],
		value: [],
		description: 'subRedditTaggerSubRedditsDesc'
	}
};

const SRTDoesntContain = new Map();
const SRTTagWith = new Map();

subredditTagger_module.beforeLoad = () => {
	watchForThings(['post'], scanTitle);
};

subredditTagger_module.go = () => {
	loadSRTRules();
};

function loadSRTRules() {
	for (const [subreddit, doesntContain, tagWith] of subredditTagger_module.options.subReddits.value) {
		SRTDoesntContain.set(subreddit.toLowerCase(), doesntContain);
		SRTTagWith.set(subreddit.toLowerCase(), tagWith);
	}
}

function scanTitle(thing) {
	const tagToAdd = getTag(thing);
	if (tagToAdd !== undefined) {
		const tagText = $('<span>').append(escapeHTML(tagToAdd)).append('&nbsp;');
		$(thing.getTitleElement()).parent().prepend(tagText);
	}
}

function getTag(thing) {
	let hasTag = false;

	const thisSubReddit = (thing.getSubreddit() || '').toLowerCase();
	if (thisSubReddit && SRTTagWith.has(thisSubReddit)) {
		let thisString = SRTDoesntContain.get(thisSubReddit);
		if (thisString === undefined || thisString === '') {
			thisString = `[${thisSubReddit}]`;
			SRTDoesntContain.set(thisSubReddit, thisString);
		}
		hasTag = thing.getTitle().includes(thisString) || thing.getPostFlairText().includes(thisString);
	}

	if (!hasTag) {
		return SRTTagWith.get(thisSubReddit);
	}
}
// CONCATENATED MODULE: ./lib/modules/tableTools.js






const tableTools_module = new Module('tableTools');

tableTools_module.moduleName = 'tableToolsName';
tableTools_module.category = 'productivityCategory';
tableTools_module.description = 'tableToolsDesc';
tableTools_module.options = {
	sort: {
		title: 'tableToolsSortTitle',
		type: 'boolean',
		value: true,
		description: 'tableToolsSortDesc',
		bodyClass: true
	}
};

tableTools_module.shouldRun = () => !isCurrentSubreddit('dashboard');

tableTools_module.go = () => {
	if (tableTools_module.options.sort.value) {
		$(document).on('click', '.md th', e => sortTableColumn(e.currentTarget));
	}
};

function sortTableColumn(target) {
	const $columnHeader = $(target);
	const table = $columnHeader.closest('table');
	const rows = table.find('tr:gt(0)').toArray();
	const column = $columnHeader.index();

	rows.sort(sortFunction(column));
	$columnHeader.siblings().removeClass('sort-desc sort-asc');
	if ($columnHeader.hasClass('sort-asc')) {
		rows.reverse();
		$columnHeader.removeClass('sort-asc');
		$columnHeader.addClass('sort-desc');
	} else {
		$columnHeader.removeClass('sort-desc');
		$columnHeader.addClass('sort-asc');
	}
	table.append(rows);
}

function sortFunction(column) {
	return (rowA, rowB) => {
		const a = getCellValue(rowA, column);
		const b = getCellValue(rowB, column);
		return isNumeric(a) && isNumeric(b) ? +a - +b : a.localeCompare(b);
	};
}

function isNumeric(n) {
	const num = parseFloat(n);
	return !Number.isNaN(num) && Number.isFinite(num);
}

function getCellValue(row, column) {
	return $(row).children('td').eq(column).text();
}
// CONCATENATED MODULE: ./lib/modules/temporaryDropdownLinks.js






const temporaryDropdownLinks_module = new Module('temporaryDropdownLinks');
temporaryDropdownLinks_module.moduleName = 'temporaryDropdownLinksName';
temporaryDropdownLinks_module.category = 'browsingCategory';
temporaryDropdownLinks_module.description = 'temporaryDropdownLinksDesc';
temporaryDropdownLinks_module.options = {
	always: {
		type: 'boolean',
		value: false,
		description: 'temporaryDropdownLinksAlwaysDesc',
		title: 'temporaryDropdownLinksAlwaysTitle'
	}
};
temporaryDropdownLinks_module.include = [/\/(?:top|controversial)\/$/];

temporaryDropdownLinks_module.go = () => {
	setupMenu();
};

function setupMenu() {
	const mutateChoice = temporaryDropdownLinks_module.options.always.value ? removeListener : appendTemporaryButton;
	for (const choice of document.querySelectorAll('.menuarea .drop-choices a.choice')) {
		const form = choice.closest('form');
		if (!form) continue;
		const { name, value } = downcast(form.querySelector('input'), HTMLInputElement);
		if (name && value) {
			mutateChoice(choice, name, value);
		}
	}
}

function removeListener(choice, name, value) {
	choice.search = `?${name}=${value}`;
	choice.removeAttribute('onclick');
}

function appendTemporaryButton(choice, name, value) {
	const url = new URL(choice.href);
	url.searchParams.set(name, value);
	const link = string_namespaceObject.html`
		<a class="RES-dropdown-button" href="${url.href}">${i18n('temporaryDropdownLinksTemporarily')}</a>
	`;
	link.addEventListener('click', e => e.stopPropagation());
	choice.appendChild(link);
}
// CONCATENATED MODULE: ./lib/modules/userbarHider.js









const userbarHider_module = new Module('userbarHider');

userbarHider_module.moduleName = 'userbarHiderName';
userbarHider_module.description = 'userbarHiderDesc';
userbarHider_module.category = 'myAccountCategory';
userbarHider_module.disabledByDefault = true;

userbarHider_module.options = {
	userbarState: {
		title: 'userbarHiderUserbarStateTitle',
		type: 'enum',
		values: [{
			name: 'Visible',
			value: 'visible'
		}, {
			name: 'Hidden',
			value: 'hidden'
		}],
		value: 'visible',
		description: 'userbarHiderUserbarStateDesc'
	},
	toggleButtonState: {
		title: 'userbarHiderToggleButtonStateTitle',
		type: 'enum',
		values: [{
			name: 'Visible',
			value: 'visible'
		}, {
			name: 'Hidden',
			value: 'hidden'
		}],
		value: 'visible',
		description: 'userbarHiderToggleButtonStateDesc',
		advanced: true
	}
};

let userbarHider_userbar, $userbarToggle;

userbarHider_module.go = () => {
	userbarHider();
};

function userbarHider() {
	userbarHider_userbar = document.getElementById('header-bottom-right');
	if (userbarHider_userbar) {
		if (userbarHider_module.options.toggleButtonState.value === 'visible' || userbarHider_module.options.userbarState.value === 'hidden') {
			addToggleButton();
		}
		if (userbarHider_module.options.userbarState.value === 'hidden') {
			updateUserBar();
			notifications_showNotification({
				moduleID: userbarHider_module.moduleID,
				optionKey: 'userbarState',
				cooldown: 24 * 60 * 60 * 1000,
				header: i18n('userbarHiderUserBarHidden'),
				message: i18n('userbarHiderContentHiddenNotification', '')
			});
		}
	}
}

function toggleUserBar() {
	const userbarHidden = userbarHider_module.options.userbarState.value === 'hidden';
	updateUserbarStateOption(!userbarHidden);
	updateUserBar();
}

function updateUserBar() {
	const userbarHidden = userbarHider_module.options.userbarState.value === 'hidden';

	userbarHider_updateToggleButton(userbarHidden);
	toggleUserbarElementsDisplay(userbarHidden);
}

function addToggleButton() {
	$userbarToggle = $('<div>', {
		id: 'userbarToggle',
		title: i18n('userbarHiderToggleUserbar'),
		click: () => toggleUserBar()
	}).prependTo(userbarHider_userbar);

	document.querySelector('#header-bottom-right').classList.add('res-userbar-toggle');

	userbarHider_updateToggleButton(false);
}

function userbarHider_updateToggleButton(userbarHidden) {
	$userbarToggle.toggleClass('userbarHide', !userbarHidden).toggleClass('userbarShow', userbarHidden).html(userbarHidden ? '&laquo;' : '&raquo;');
}

function toggleUserbarElementsDisplay(userbarHidden) {
	const elements = $(userbarHider_userbar).children().not($userbarToggle);

	if (userbarHidden) {
		closeAccountMenu();
		elements.css('display', 'none');
	} else {
		elements.css('display', '');
	}
}

function updateUserbarStateOption(userbarHidden) {
	options_set(userbarHider_module, 'userbarState', userbarHidden ? 'hidden' : 'visible');
}
// CONCATENATED MODULE: ./lib/modules/version.js








const version_module = new Module('version');

version_module.moduleName = 'versionName';
version_module.category = 'aboutCategory';
version_module.description = 'versionDesc';
version_module.alwaysEnabled = true;
version_module.hidden = true;

const concurrentInstallWiki = '/r/Enhancement/wiki/tutorials/concurrent_installs';

version_module.beforeLoad = () => {
	addVersionClasses();
};

version_module.go = () => {
	reportVersion();
};

version_module.afterLoad = () => {
	avoidConcurrentInstalls();
};

function addVersionClasses() {
	bodyClasses_namespaceObject.add('res');
	const versionComponents = metadata_version.split('.');
	for (const i of range(0, versionComponents.length)) {
		bodyClasses_namespaceObject.add(`res-v${versionComponents.slice(0, i + 1).join('-')}`);
	}
}

function reportVersion() {
	$('<div>', {
		id: 'RESConsoleVersion',
		style: 'display: none;',
		text: metadata_version,
		'data-id': getExtensionId()
	}).appendTo(document.body);
}

function avoidConcurrentInstalls() {
	const installs = Array.from(document.querySelectorAll('#RESConsoleVersion'));

	const concurrentInstalls = uniqBy_default()(installs, e => e.getAttribute('data-id') || Math.random()).map(e => e.textContent);

	if (concurrentInstalls.length > 1) {
		bodyClasses_namespaceObject.add('res-concurrent-installs');
		document.body.appendChild(string_namespaceObject.html`
			<div id="res-concurrent-installs">
				<p>You have enabled multiple versions of Reddit Enhancement Suite:</p>
				<ul>
					${concurrentInstalls.map(v => string_namespaceObject._html`
						<li>${v}</li>
					`)}
				</ul>
				<p>You should enable only one. <a href="${concurrentInstallWiki}">Find out how!</a>
			</div>
		`);
	}
}
// EXTERNAL MODULE: ./node_modules/lodash/first.js
var lodash_first = __webpack_require__(257);
var first_default = /*#__PURE__*/__webpack_require__.n(lodash_first);

// CONCATENATED MODULE: ./lib/modules/voteEnhancements.js







const voteEnhancements_module = new Module('voteEnhancements');

voteEnhancements_module.moduleName = 'voteEnhancementsName';
voteEnhancements_module.category = 'appearanceCategory';
voteEnhancements_module.description = 'voteEnhancementsDesc';
voteEnhancements_module.options = {
	highlightScores: {
		title: 'voteEnhancementsHighlightScoresTitle',
		type: 'boolean',
		value: true,
		description: 'voteEnhancementsHighlightScoresDesc',
		bodyClass: true
	},
	colorLinkScore: {
		title: 'voteEnhancementsColorLinkScoreTitle',
		type: 'enum',
		values: [{
			name: 'No coloration',
			value: 'none'
		}, {
			name: 'Automatic coloration',
			value: 'automatic'
		}, {
			name: 'User-defined coloration',
			value: 'user'
		}],
		value: 'none',
		description: 'voteEnhancementsColorLinkScoreDesc',
		bodyClass: true
	},
	userDefinedLinkColoration: {
		title: 'voteEnhancementsUserDefinedLinkColorationTitle',
		dependsOn: options => options.colorLinkScore.value === 'user',
		type: 'table',
		addRowText: '+add threshold',
		fields: [{
			key: 'score',
			name: 'score',
			type: 'text'
		}, {
			key: 'color',
			name: 'color',
			type: 'color'
		}],
		value: [[0, '#5f99cf'], [10, '#F2B035'], [50, '#FF4500'], [100, '#D92B2B']],
		description: 'voteEnhancementsUserDefinedLinkColorationDesc',
		sort(a, b) {
			a[0] = parseInt(a[0], 10);
			b[0] = parseInt(b[0], 10);
			if (a[0] < b[0]) {
				return -1;
			}
			if (a[0] > b[0]) {
				return 1;
			}
			return 0;
		}
	},
	colorCommentScore: {
		title: 'voteEnhancementsColorCommentScoreTitle',
		type: 'enum',
		values: [{
			name: 'No coloration',
			value: 'none'
		}, {
			name: 'Automatic coloration',
			value: 'automatic'
		}, {
			name: 'Reddit Classic',
			value: 'simple'
		}, {
			name: 'User-defined coloration',
			value: 'user'
		}],
		value: 'none',
		description: 'voteEnhancementsColorCommentScoreDesc'
	},
	userDefinedCommentColoration: {
		title: 'voteEnhancementsUserDefinedCommentColorationTitle',
		dependsOn: options => options.colorCommentScore.value === 'user',
		type: 'table',
		addRowText: '+add threshold',
		fields: [{
			key: 'score',
			name: 'score',
			type: 'text'
		}, {
			key: 'color',
			name: 'color',
			type: 'color'
		}],
		value: [[0, '#5f99cf'], [10, '#F2B035'], [50, '#FF4500'], [100, '#D92B2B']],
		description: 'voteEnhancementsUserDefinedCommentColorationDesc',
		sort(a, b) {
			a[0] = parseInt(a[0], 10);
			b[0] = parseInt(b[0], 10);
			if (a[0] < b[0]) {
				return -1;
			}
			if (a[0] > b[0]) {
				return 1;
			}
			return 0;
		}
	},
	interpolateScoreColor: {
		title: 'voteEnhancementsInterpolateScoreColorTitle',
		type: 'boolean',
		value: true,
		description: 'voteEnhancementsInterpolateScoreColorDesc',
		advanced: true
	},
	highlightControversial: {
		title: 'voteEnhancementsHighlightControversialTitle',
		type: 'boolean',
		value: true,
		description: 'voteEnhancementsHighlightControversialDesc'
	},
	highlightControversialColor: {
		title: 'voteEnhancementsHighlightControversialColorTitle',
		dependsOn: options => options.highlightControversial.value,
		advanced: true,
		type: 'color',
		value: '#cc0000',
		description: 'voteEnhancementsHighlightControversialColorDesc'
	}
};
voteEnhancements_module.include = ['comments', 'commentsLinklist', 'linklist', 'modqueue', 'profile', 'inbox'];

voteEnhancements_module.beforeLoad = () => {
	if (voteEnhancements_module.options.colorLinkScore.value !== 'none') {
		watchForThings(['post'], applyLinkScoreColor);
	}
	if (voteEnhancements_module.options.colorCommentScore.value !== 'none') {
		watchForThings(['comment'], applyCommentScoreColor);
	}
};

voteEnhancements_module.go = () => {
	if (voteEnhancements_module.options.highlightControversial.value) {
		highlightControversial();
	}
};

function interpolateScoreColor(score, colors, defaultColor) {
	if (!colors.length) return defaultColor;

	const augmented = [[-Infinity, first_default()(colors)[1]], ...colors, [Infinity, last_default()(colors)[1]]];

	for (const [[lowBound, lowColor], [highBound, highColor]] of zip(augmented.slice(0, -1), augmented.slice(1))) {
		if (score >= lowBound && score < highBound) {
			if (voteEnhancements_module.options.interpolateScoreColor.value) {
				return colorFromArray(zipWith_default()(colorToArray(lowColor), colorToArray(highColor), (lowVal, highVal) => Math.round(projectInto(lowBound, highBound, lowVal, highVal, score))));
			} else {
				return score < 0 ? highColor : lowColor;
			}
		}
	}

	return defaultColor;
}

function getLinkScoreColor(score) {
	if (voteEnhancements_module.options.colorLinkScore.value === 'automatic') {
		return `hsl(${180 + 360 * (1 - 100 / (150 + score))}, 75%,50%)`;
	} else {
		return interpolateScoreColor(score, voteEnhancements_module.options.userDefinedLinkColoration.value, '#c6c6c6');
	}
}

function getCommentScoreColor(score) {
	if (voteEnhancements_module.options.colorCommentScore.value === 'automatic') {
		return `hsl(${180 + 360 * (1 - 50 / (100 + score))}, 75%,50%)`;
	} else {
		let colors;
		if (voteEnhancements_module.options.colorCommentScore.value === 'user') {
			colors = voteEnhancements_module.options.userDefinedCommentColoration.value;
		} else if (voteEnhancements_module.options.colorCommentScore.value === 'simple') {
			colors = [[0, '#9494FF'], [1, '#888'], [2, '#FF8B60']];
		} else {
			return false;
		}

		return interpolateScoreColor(score, colors, '#888');
	}
}

function applyLinkScoreColor(thing) {
	const score = thing.getScore();
	const rankEle = thing.getRankElement();
	const color = typeof score === 'number' && getLinkScoreColor(score);

	if (rankEle && color) {
		rankEle.style.background = color;
	}
}

function applyCommentScoreColor(thing) {
	for (const [scoreEle, score] of thing.getAllScoreElements()) {
		const color = getCommentScoreColor(score);

		if (color) {
			scoreEle.style.color = color;
		}
	}
}

function highlightControversial() {
	const color = voteEnhancements_module.options.highlightControversialColor.value || voteEnhancements_module.options.highlightControversialColor.default;
	addCSS(`
		.comment.controversial > .entry .score::after {
			color: ${color};
		}
	`);
}
// CONCATENATED MODULE: ./lib/modules/xPostLinks.js







const xPostLinks_module = new Module('xPostLinks');

xPostLinks_module.moduleName = 'xPostLinksName';
xPostLinks_module.category = 'submissionsCategory';
xPostLinks_module.description = 'xPostLinksDesc';

xPostLinks_module.include = ['linklist', 'modqueue', 'comments', 'profile', 'search'];

xPostLinks_module.exclude = ['d2x'];

xPostLinks_module.beforeLoad = () => {
	watchForThings(['post'], createLinks);
};

const xpostRe = /(?:x|cross)[\s-]?post\S*(.+)/i;
const xpostFromRe = /^(?:\s+\S+)?\s+\/?(\w{2,20}\b)(?:[\)\]}]|\S*$)/i;
const subredditRe = /r\/(\w{2,20}\b)/i;

function parseSubreddit(title) {
	const [, xpostString] = xpostRe.exec(title) || [];

	if (!xpostString) return false;

	const [, sub] = subredditRe.exec(xpostString) || xpostFromRe.exec(xpostString) || [];

	return sub;
}

function appendToTagline(sub, thing) {
	$().add($(thing.getSubredditLink()).prev()).add(thing.getUserattrsElement() || '').first().after(string_namespaceObject.escape` ${i18n('xPostLinksXpostedFrom')} `, $('<a>', {
		class: 'subreddit hover',
		href: `/r/${sub}`,
		text: `/r/${sub}`
	}));
}

function createLinks(thing) {
	const sub = parseSubreddit(thing.getTitle());
	if (sub) appendToTagline(sub, thing);
}
// CONCATENATED MODULE: ./node_modules/sibling-loader?import=module!./lib/modules/about.js
/* generated by sibling-loader */














































































/* harmony default export */ var about = ({ "RESTips.js": RESTips_module, "about.js": about_module, "accountSwitcher.js": accountSwitcher_module, "announcements.js": announcements_module, "backupAndRestore.js": backupAndRestore_module, "betteReddit.js": betteReddit_module, "commandLine.js": commandLine_module, "commentDepth.js": commentDepth_module, "commentHidePersistor.js": commentHidePersistor_module, "commentNavigator.js": commentNavigator_module, "commentPreview.js": commentPreview_module, "commentQuickCollapse.js": commentQuickCollapse_module, "commentStyle.js": commentStyle_module, "commentTools.js": commentTools_module, "context.js": context_module, "contribute.js": contribute_module, "customToggles.js": customToggles_module, "dashboard.js": dashboard_module, "easterEgg.js": easterEgg_module, "filteReddit.js": filteReddit_module, "floater.js": floater_module, "hideChildComments.js": hideChildComments_module, "hover.js": hover_module, "keyboardNav.js": keyboardNav_module, "localDate.js": localDate_module, "logoLink.js": logoLink_module, "menu.js": menu_module, "messageMenu.js": messageMenu_module, "modhelper.js": modhelper_module, "multiredditNavbar.js": multiredditNavbar_module, "neverEndingComments.js": neverEndingComments_module, "neverEndingReddit.js": neverEndingReddit_module, "newCommentCount.js": newCommentCount_module, "nightMode.js": nightMode_module, "noParticipation.js": noParticipation_module, "notifications.js": notifications_module, "onboarding.js": onboarding_module, "orangered.js": orangered_module, "pageNavigator.js": pageNavigator_module, "penaltyBox.js": penaltyBox_module, "presets.js": presets_module, "profileNavigator.js": profileNavigator_module, "profileRedirect.js": profileRedirect_module, "quickMessage.js": quickMessage_module, "readComments.js": readComments_module, "redditUserInfo.js": redditUserInfo_module, "saveComments.js": saveComments_module, "search.js": search_module, "searchHelper.js": searchHelper_module, "selectedEntry.js": selectedEntry_module, "settingsConsole.js": settingsConsole_module, "settingsNavigation.js": settingsNavigation_module, "showImages.js": showImages_module, "showKarma.js": showKarma_module, "showParent.js": showParent_module, "singleClick.js": singleClick_module, "sourceSnudown.js": sourceSnudown_module, "spamButton.js": spamButton_module, "spoilerTags.js": spoilerTags_module, "styleTweaks.js": styleTweaks_module, "stylesheet.js": stylesheet_module, "submitHelper.js": submitHelper_module, "submitIssue.js": submitIssue_module, "subredditInfo.js": subredditInfo_module, "subredditManager.js": subredditManager_module, "subredditTagger.js": subredditTagger_module, "tableTools.js": tableTools_module, "temporaryDropdownLinks.js": temporaryDropdownLinks_module, "troubleshooter.js": troubleshooter_module, "userHighlight.js": userHighlight_module, "userInfo.js": userInfo_module, "userTagger.js": userTagger_module, "userbarHider.js": userbarHider_module, "usernameHider.js": usernameHider_module, "version.js": version_module, "voteEnhancements.js": voteEnhancements_module, "wheelBrowse.js": wheelBrowse_module, "xPostLinks.js": xPostLinks_module });
// CONCATENATED MODULE: ./lib/core/modules/modules.js











const modulePrefsStorage = storage_namespaceObject.wrapBlob('RES.modulePrefs', () => {
	throw new Error('Default module enabled state should never be accessed');
});

const modules_enabled = new Map();

const modules_modules = flow_default()(() => Object.values(about), map_default()(mod => downcast(mod, Module)), keyBy_default()(mod => mod.moduleID))();

async function _loadModulePrefs() {
	const storedPrefs = await modulePrefsStorage.getAll();

	for (const [id, module] of Object.entries(modules_modules)) {
		if (module.alwaysEnabled) {
			modules_enabled.set(id, true);
		} else if (storedPrefs.hasOwnProperty(id)) {
			modules_enabled.set(id, storedPrefs[id]);
		} else {
			modules_enabled.set(id, !module.disabledByDefault);
		}
	}
}

const ERRORED_KEY = Symbol('errored');
async function _runModuleStage(stage, { skipEnabledCheck = false } = {}) {
	await Promise.all(modules_all().filter(module => module[stage] && !module[ERRORED_KEY] && (skipEnabledCheck || modules_isRunning(module))).map(async module => {
		const tag = markStart();
		try {
			const fn = module[stage];
			await fn();
		} catch (e) {
			module[ERRORED_KEY] = true;
			console.error('Error in module:', module.moduleID, 'during:', stage);
			console.error(e);
		}
		markEnd(tag, `${module.moduleID} (${stage})`);
	}));
}

function setEnabled(opaqueId, enable) {
	const module = modules_get(opaqueId);

	modules_enabled.set(module.moduleID, enable);
	modulePrefsStorage.set(module.moduleID, enable);
	module.onToggle(enable);
}

function modules_all() {
	return Object.values(modules_modules);
}

function modules_isEnabled(opaqueId) {
	return !!modules_enabled.get(modules_get(opaqueId).moduleID);
}

function modules_isRunning(opaqueId) {
	const module = modules_get(opaqueId);
	return modules_isEnabled(module) && matchesPageLocation(module.include, module.exclude) && module.shouldRun();
}

function modules_get(opaqueId) {
	if (!opaqueId) {
		throw new TypeError(`Expected module, moduleID, or namespace; found: ${opaqueId}`);
	}

	if (typeof opaqueId === 'string') {
		return modules_modules_get(opaqueId);
	} else if (opaqueId.module) {
		return modules_modules_get(opaqueId.module.moduleID);
	} else {
		return modules_modules_get(opaqueId.moduleID);
	}
}

function modules_modules_get(id) {
	const mod = getUnchecked(id);
	if (!mod) throw new Error(`Module "${id}" not found.`);
	return mod;
}

function getUnchecked(id) {
	return modules_modules[id];
}

function getByCategory(category) {
	return modules_all().filter(module => !module.hidden).filter(module => module.category === category).sort((a, b) => {
		const sortComparison = (a.sort || 0) - (b.sort || 0);
		if (sortComparison !== 0) {
			return sortComparison;
		}

		return i18n(a.moduleName).toLowerCase() > i18n(b.moduleName).toLowerCase() ? 1 : -1;
	});
}
// CONCATENATED MODULE: ./lib/core/modules/index.js



// CONCATENATED MODULE: ./lib/core/options/options.js












const moduleOptionsStorage = storage_namespaceObject.wrapPrefix('RESoptions.', () => ({}));

async function _loadModuleOptions() {
	const allOptions = await moduleOptionsStorage.getMultipleNullable(modules_all().map(mod => mod.moduleID));

	for (const mod of modules_all()) {
		_initOptions(mod, allOptions[mod.moduleID]);
	}
}

const _initOptions = memoize_default()((module, storedOptions) => {
	if (isEmpty_default()(module.options)) {
		return;
	}

	for (const opt of Object.values(module.options)) {
		opt.default = opt.value;
	}

	if (!storedOptions) {
		return;
	}

	for (const [key, storedValue] of Object.entries(storedOptions)) {
		if (!storedValue) continue;

		if (!module.options[key]) continue;

		module.options[key].value = storedValue.value;
	}
}, module => module.moduleID);

const loadRaw = flow_default()(opaqueId => modules_get(opaqueId), memoize_default()(module => moduleOptionsStorage.get(module.moduleID), module => module.moduleID));

function options_set(opaqueId, optionKey, value) {
	if (/_[\d]+$/.test(optionKey)) {
		optionKey = optionKey.replace(/_[\d]+$/, '');
	}

	const module = modules_get(opaqueId);

	if (!module.options[optionKey]) {
		console.warn('Could not find option', module.moduleID, optionKey);
		return false;
	}

	module.options[optionKey].value = value;
	moduleOptionsStorage.patch(module.moduleID, { [optionKey]: { value } });

	if (module.options[optionKey].onChange) {
		module.options[optionKey].onChange();
	}

	return true;
}

function getModified() {
	return filterMap(modules_all(), module => {
		const { moduleID, options } = module;

		const enabledByDefault = !module.disabledByDefault;
		const isEnabled = modules_isEnabled(module);
		const moduleStatusChanged = enabledByDefault !== isEnabled;

		const modifiedOptions = isEnabled ? omitBy_default()(options, v => isEqual_default()(v.value, v.default)) : {};

		if (!isEmpty_default()(modifiedOptions) || moduleStatusChanged) {
			return [{
				moduleID,
				modifiedOptions,
				moduleStatus: moduleStatusChanged ? `${enabledByDefault ? 'on' : 'off'}  ${isEnabled ? 'on' : 'off'}` : ''
			}];
		}
	});
}

function getModifiedText(types = ['text', 'boolean', 'enum']) {
	const lines = [];
	let optionMaxLength = 0;
	let moduleMaxLength = 0;

	for (const _ref of getModified()) {
		const { moduleID, modifiedOptions, moduleStatus } = _ref;

		moduleMaxLength = Math.max(moduleMaxLength, moduleID.length);
		optionMaxLength = Math.max(optionMaxLength, ...Object.keys(modifiedOptions).map(v => v.length));

		lines.push(() => [`    ${moduleID.padEnd(moduleMaxLength)} ${moduleStatus}`, ...Object.entries(modifiedOptions).filter(([, { type }]) => types.includes(type)).map(([key, value]) => `      ${key.padEnd(optionMaxLength)}\t${JSON.stringify(value.default)}  ${JSON.stringify(value.value)}`)]);
	}

	return flatten_default()(lines.map(v => v())).join('\n');
}
// CONCATENATED MODULE: ./lib/core/modules/bodyClasses.js






function _addModuleBodyClasses() {
	for (const module of modules_all()) {
		if (!modules_isRunning(module)) continue;

		if (module.bodyClass) bodyClasses_namespaceObject.add(`res-${module.moduleID}`);

		for (const [optId, opt] of Object.entries(module.options)) {
			if (!(opt.bodyClass && opt.value)) continue;

			opt;

			if (opt.dependsOn && !opt.dependsOn(module.options)) continue;

			let cls = typeof opt.bodyClass === 'string' ? opt.bodyClass : `res-${module.moduleID}-${optId}`;

			if (opt.type === 'enum') {
				cls += `-${opt.value.replace(/\s/g, '_')}`;
			}

			bodyClasses_namespaceObject.add(cls);
		}
	}
}
// EXTERNAL MODULE: ./node_modules/lodash/takeRightWhile.js
var takeRightWhile = __webpack_require__(256);
var takeRightWhile_default = /*#__PURE__*/__webpack_require__.n(takeRightWhile);

// EXTERNAL MODULE: ./node_modules/lodash/mapKeys.js
var mapKeys = __webpack_require__(64);
var mapKeys_default = /*#__PURE__*/__webpack_require__.n(mapKeys);

// CONCATENATED MODULE: ./lib/core/migrate/migrators.js





async function updateOption(moduleID, optionName, formerDefaultValue, valueOrFunction) {
	try {
		const options = await loadRaw(moduleID);
		const option = options && options[optionName];

		if (!option) return;

		if (!optionMatchesFormerDefaultValue(option, formerDefaultValue)) return;

		const newValue = updateValue(option.value, valueOrFunction);

		if (typeof newValue !== 'undefined') {
			await options_set(moduleID, optionName, newValue);
		}
	} catch (e) {
		console.error(`Couldn't migrate ${moduleID}::${optionName} from`, formerDefaultValue, 'to/via', valueOrFunction, e);
	}
}

async function forceUpdateOption(moduleID, optionName, valueOrFunction) {
	try {
		const options = await loadRaw(moduleID);
		const option = options && options[optionName];

		if (!option) return;

		const newValue = updateValue(option.value, valueOrFunction);

		if (typeof newValue !== 'undefined') {
			await options_set(moduleID, optionName, newValue);
		}
	} catch (e) {
		console.error(`Couldn't migrate ${moduleID}::${optionName} to`, valueOrFunction, e);
	}
}

async function moveOption(oldModuleID, oldOptionName, newModuleID, newOptionName, valueOrFunction) {
	try {
		const options = await loadRaw(oldModuleID);
		const option = options && options[oldOptionName];

		if (!option) return;

		const newValue = updateValue(option.value, valueOrFunction);

		if (typeof newValue !== 'undefined') {
			await options_set(newModuleID, newOptionName, newValue);
		}
	} catch (e) {
		console.error(`Couldn't migrate ${oldModuleID}::${oldOptionName} to ${newModuleID}::${newOptionName} via`, valueOrFunction, e);
	}
}

async function moveStorageToOption(oldKey, newModuleID, newOptionName, valueOrFunction) {
	const oldValue = await storage_namespaceObject.get(oldKey);

	if (oldValue === null) {
		return;
	}

	const newValue = updateValue(oldValue, valueOrFunction);

	try {
		if (typeof newValue !== 'undefined') {
			await options_set(newModuleID, newOptionName, newValue);
		}
	} catch (e) {
		console.error(`Couldn't migrate storage ${oldKey} to ${newModuleID}::${newOptionName} via`, valueOrFunction, e);
	}
}

function optionMatchesFormerDefaultValue(option, formerDefaultValue) {
	if (!option) {
		option = {
			type: 'legacy',
			value: undefined
		};
	}
	const oldValue = option.value;

	if (oldValue && option.type === 'keycode' && option.value.length === 4) {
		oldValue.push(false);
	}

	return isEqual_default()(formerDefaultValue, oldValue);
}

function updateValue(oldValue, valueOrFunction) {
	if (typeof valueOrFunction === 'function') {
		return valueOrFunction(oldValue);
	} else if (typeof valueOrFunction !== 'undefined') {
		return valueOrFunction;
	} else {
		return oldValue;
	}
}
// CONCATENATED MODULE: ./lib/core/migrate/migrate.js











const migrations = [{
	versionNumber: 'legacyMigrators',
	async go() {
		await moveStorageToOption('RESmodules.styleTweaks.userbarState', 'userbarHider', 'userbarState');

		const macroVersion = await storage_namespaceObject.get('RESmodules.commentTools.macroDataVersion');
		if (macroVersion === null || macroVersion === 0) {
			const previewOptions = await storage_namespaceObject.get('RESoptions.commentPreview');
			if (previewOptions !== null) {
				if (typeof previewOptions.commentingAs !== 'undefined') {
					await forceUpdateOption('commentTools', 'commentingAs', previewOptions.commentingAs.value);
				}
				if (typeof previewOptions.keyboardShortcuts !== 'undefined') {
					await forceUpdateOption('commentTools', 'keyboardShortcuts', previewOptions.keyboardShortcuts.value);
				}
				if (typeof previewOptions.subredditAutocomplete !== 'undefined') {
					await forceUpdateOption('commentTools', 'subredditAutocomplete', previewOptions.subredditAutocomplete.value);
				}
				if (typeof previewOptions.macros !== 'undefined') {
					previewOptions.macros.value.forEach(macro => {
						while (macro.length < 4) {
							macro.push('');
						}
					});
					await forceUpdateOption('commentTools', 'macros', previewOptions.macros.value);
				}
			}
		}
		if (macroVersion === 1) {
			await forceUpdateOption('commentTools', 'macros', macros => (macros || []).map(macro => {
				while (macro.length < 4) {
					macro.push('');
				}
				return macro;
			}));
		}

		const storedComments = await storage_namespaceObject.get('RESmodules.saveComments.savedComments');
		if (Array.isArray(storedComments)) {
			const newFormat = {};
			for (const storedComment of storedComments) {
				const urlSplit = storedComment.href.split('/');
				const thisID = urlSplit[urlSplit.length - 1];
				newFormat[thisID] = storedComment;
			}
			storage_namespaceObject.set('RESmodules.saveComments.savedComments', newFormat);
		}
	}
}, {
	versionNumber: '4.5.0.0',
	async go() {
		await moveOption('betteReddit', 'searchSubredditByDefault', 'searchHelper', 'searchSubredditByDefault');

		await moveOption('styleTweaks', 'lightSwitch', 'nightMode', 'nightSwitch');
		await moveOption('styleTweaks', 'lightOrDark', 'nightMode', 'nightModeOn', value => value === 'dark');
		await moveOption('styleTweaks', 'useSubredditStyleInDarkMode', 'nightMode', 'useSubredditStyles');

		await moveStorageToOption('RESmodules.styleTweaks.nightModeWhitelist', 'nightMode', 'subredditStylesWhitelist', value => {
			try {
				return JSON.parse(value || '').join(',');
			} catch (e) {
				return '';
			}
		});

		try {
			const userTags = (await storage_namespaceObject.get('RESmodules.userTagger.tags')) || {};
			updateTagStorageCaseInsensitive(userTags);
		} catch (e) {
			console.error('Could not migrate user tags, please post this error to /r/RESissues', e);
		}

		await forceUpdateOption('filteReddit', 'subreddits', subreddits => (subreddits || []).map(subreddit => {
			const check = subreddit[0];
			if (check.startsWith('/r/')) {
				subreddit[0] = check.substr(3);
			}
			return subreddit;
		}));

		function updateTagStorageCaseInsensitive(tags) {
			const usernames = Object.keys(tags);

			for (const username of usernames) {
				const lower = username.toLowerCase();
				if (lower === username) continue;

				const destination = tags[lower] = tags[lower] || {};
				const source = tags[username];

				if (source.votes) {
					destination.votes = (parseInt(destination.votes, 10) || 0) + (parseInt(source.votes, 10) || 0);
				}
				if (source.color && (!destination.color || destination.color === 'none')) {
					destination.color = source.color;
				}

				if (source.tag) {
					destination.tag = destination.tag ? `${destination.tag} | ` : '';
					destination.tag += source.tag;
				}

				if (source.ignore) {
					destination.ignore = source.ignore;
				}

				if (source.link) {
					if (destination.link) {
						destination.tag = destination.tag ? `${destination.tag} | ` : '';
						destination.tag += source.link;
					} else {
						destination.link = source.link;
					}
				}

				delete tags[username];
			}

			storage_namespaceObject.set('RESmodules.userTagger.tags', tags);
			storage_namespaceObject.set('RESmodules.userTagger.casefix', true);
		}
	}
}, {
	versionNumber: '4.5.0.2',
	async go() {
		await updateOption('keyboardNav', 'imageMoveUp', [38, false, false, true, false], [38, false, true, false, false]);
		await updateOption('keyboardNav', 'imageMoveDown', [40, false, false, true, false], [40, false, true, false, false]);
		await updateOption('keyboardNav', 'imageMoveLeft', [37, false, false, true, false], [37, false, true, false, false]);
		await updateOption('keyboardNav', 'imageMoveRight', [39, false, false, true, false], [39, false, true, false, false]);
	}
}, {
	versionNumber: '4.5.0.3',
	go() {}
}, {
	versionNumber: '4.5.1',
	async go() {
		await forceUpdateOption('voteEnhancements', 'colorCommentScore', value => {
			if (typeof value === 'string') {
				return value;
			}

			return value ? 'automatic' : 'none';
		});

		const notificationsOptions = await loadRaw('notifications');
		const sticky = notificationsOptions && notificationsOptions.sticky.value;
		const keyNavOptions = await loadRaw('keyboardNav');
		const fg = keyNavOptions && keyNavOptions.focusFGColorNight.value;
		const bg = keyNavOptions && keyNavOptions.focusBGColorNight.value;
		const test = document.createElement('div');

		if (sticky === 'perNotification') {
			await forceUpdateOption('notifications', 'sticky', 'notificationType');
		}

		test.style.color = fg || '';
		test.style.backgroundColor = bg || '';
		const fgCalculated = test.style.color;
		const bgCalculated = test.style.backgroundColor;
		if (fg === bg || fgCalculated === bgCalculated) {
			await forceUpdateOption('keyboardNav', 'focusBGColorNight', '#373737');
			await forceUpdateOption('keyboardNav', 'focusFGColorNight', '#DDDDDD');
		}

		await moveOption('settingsNavigation', 'showAdvancedOptions', 'settingsNavigation', 'showAllOptions', true);
		await moveOption('settingsNavigation', 'showAdvancedOptionsAlert', 'settingsNavigation', 'showAllOptionsAlert');
	}
}, {
	versionNumber: '4.5.3',
	async go() {
		await updateOption('searchHelper', 'addSubmitButton', true, false);
		await moveOption('keyboardNav', 'save', 'keyboardNav', 'savePost');
		await moveOption('keyboardNav', 'save', 'keyboardNav', 'saveRES');
	}
}, {
	versionNumber: '4.5.4',
	async go() {
		await forceUpdateOption('filteReddit', 'keywords', values => {
			for (const value of values || []) {
				if (value && value[3] === 'undefined') {
					value[3] = '';
				}
			}

			return values;
		});
		await updateOption('quickMessage', 'quickModeratorMessage', false, true);
	}
}, {
	versionNumber: '4.5.5',
	async go() {
		const keyNavOptions = await loadRaw('keyboardNav');
		if (keyNavOptions && keyNavOptions.scrollTop && keyNavOptions.scrollTop.value) {
			await updateOption('keyboardNav', 'scrollStyle', 'directional', 'top');
		}
		await moveOption('betteReddit', 'uncheckSendRepliesToInbox', 'submitHelper', 'uncheckSendRepliesToInbox');
		await moveOption('keyboardNav', 'openBigEditor', 'commentPreview', 'openBigEditor');
		await moveOption('keyboardNav', 'autoSelectOnScroll', 'selectedEntry', 'autoSelectOnScroll');
		await moveOption('keyboardNav', 'clickFocus', 'selectedEntry', 'selectOnClick');
		await moveOption('keyboardNav', 'addFocusBGColor', 'selectedEntry', 'addFocusBGColor');
		await moveOption('keyboardNav', 'focusBGColor', 'selectedEntry', 'focusBGColor');
		await moveOption('keyboardNav', 'focusBGColorNight', 'selectedEntry', 'focusBGColorNight');
		await moveOption('keyboardNav', 'focusFGColorNight', 'selectedEntry', 'focusFGColorNight');
		await moveOption('keyboardNav', 'addFocusBorder', 'selectedEntry', 'addFocusBorder');
		await moveOption('keyboardNav', 'focusBorder', 'selectedEntry', 'focusBorder');
		await moveOption('keyboardNav', 'focusBorderNight', 'selectedEntry', 'focusBorderNight');

		function updateFadeSpeed(value) {
			if (value === undefined || value === null || isNaN(value) || value < 0 || value > 1) {
				return '0.7';
			} else {
				return (1 - value).toFixed(2);
			}
		}

		await forceUpdateOption('hover', 'fadeSpeed', updateFadeSpeed);
		await forceUpdateOption('showParent', 'fadeSpeed', updateFadeSpeed);
		await forceUpdateOption('subredditInfo', 'fadeSpeed', updateFadeSpeed);
		await forceUpdateOption('userTagger', 'fadeSpeed', updateFadeSpeed);

		await forceUpdateOption('commentTools', 'macros', value => [['reddiquette', '[reddiquette](/wiki/reddiquette) '], ['Promote RES', '[Reddit Enhancement Suite](https://redditenhancementsuite.com "also /r/Enhancement") '], ['Current timestamp', '{{now}} '], ...(value || [])]);

		await moveOption('betteReddit', 'showUnreadCount', 'orangered', 'showUnreadCount');
		await moveOption('betteReddit', 'retroUnreadCount', 'orangered', 'retroUnreadCount');
		await moveOption('betteReddit', 'showUnreadCountInFavicon', 'orangered', 'showUnreadCountInFavicon');
		await moveOption('betteReddit', 'unreadLinksToInbox', 'orangered', 'unreadLinksToInbox');
		await moveOption('betteReddit', 'hideModMail', 'orangered', 'hideModMail');

		await moveOption('quickMessage', 'quickModeratorMessage', 'quickMessage', 'handleSideLinks');

		await updateOption('showKarma', 'useCommas', false, true);

		await moveOption('keyboardNav', 'moveDown', 'keyboardNav', 'moveDownComment');
		await moveOption('keyboardNav', 'moveUp', 'keyboardNav', 'moveUpComment');

		await moveOption('userTagger', 'hoverInfo', 'userInfo', 'hoverInfo');
		await moveOption('userTagger', 'useQuickMessage', 'userInfo', 'useQuickMessage');
		await moveOption('userTagger', 'hoverDelay', 'userInfo', 'hoverDelay');
		await moveOption('userTagger', 'fadeDelay', 'userInfo', 'fadeDelay');
		await moveOption('userTagger', 'fadeSpeed', 'userInfo', 'fadeSpeed');
		await moveOption('userTagger', 'gildComments', 'userInfo', 'gildComments');
		await moveOption('userTagger', 'highlightButton', 'userInfo', 'highlightButton');
		await moveOption('userTagger', 'highlightColor', 'userInfo', 'highlightColor');
		await moveOption('userTagger', 'highlightColorHover', 'userInfo', 'highlightColorHover');
		await moveOption('userTagger', 'USDateFormat', 'userInfo', 'USDateFormat');

		await forceUpdateOption('notifications', 'notificationTypes', rows => uniqBy_default()(rows, ([modId, notificationId]) => `${modId}###${notificationId}`));
	}
}, {
	versionNumber: '4.7.0-scrubCaches',
	async go() {
		const cacheKeyParts = ['RESmodules.neverEndingReddit.lastPage', 'RESmodules.neverEndingReddit.lastVisibleIndex', 'RESUtils.cache', 'RESUtils.moderatedSubCache', 'RESUtils.sendFromCache', 'RESUtils.userInfoCache', 'RESmodules.keyboardNavLastIndex', 'RESmodules.selectedThing.lastSelectedCache', 'TBCache.', 'Toolbox.', 'RESmodules.betteReddit.msgCount.lastCheck', 'RESmodules.subredditManager.subreddits.', 'RESmodules.subredditManager.mySubredditList'];

		await (await storage_namespaceObject.keys()).filter(key => cacheKeyParts.some(part => key.includes(part))).map(key => storage_namespaceObject.delete(key));
	}
}, {
	versionNumber: '4.7.0-voteWeight',
	async go() {
		await moveOption('userTagger', 'colorUser', 'userTagger', 'trackVoteWeight');
	}
}, {
	versionNumber: '4.7.0-commentStyle',
	async go() {
		await moveOption('styleTweaks', 'commentBoxes', 'commentStyle', 'commentBoxes');
		await moveOption('styleTweaks', 'commentRounded', 'commentStyle', 'commentRounded');
		await moveOption('styleTweaks', 'commentHoverBorder', 'commentStyle', 'commentHoverBorder');
		await moveOption('styleTweaks', 'commentIndent', 'commentStyle', 'commentIndent');
		await moveOption('styleTweaks', 'continuity', 'commentStyle', 'continuity');
	}
}, {
	versionNumber: '4.7.0-keyboardNav-scrollStyle-better-name',
	async go() {
		await moveOption('keyboardNav', 'scrollStyle', 'keyboardNav', 'linearScrollStyle');
	}
}, {
	versionNumber: '4.7.0-hideLEC',
	async go() {
		await updateOption('singleClick', 'hideLEC', false, true);
	}
}, {
	versionNumber: '4.7.0-showImages-siteModuleIDs',
	async go() {
		await moveOption('showImages', 'display uploadly', 'showImages', 'display_uploadly');
		await moveOption('showImages', 'display eroshare', 'showImages', 'display_eroshare');
		await moveOption('showImages', 'display iLoopit - gif maker', 'showImages', 'display_iloopit');
		await moveOption('showImages', 'display Coub', 'showImages', 'display_coub');
		await moveOption('showImages', 'display LiveCap', 'showImages', 'display_livecap');
		await moveOption('showImages', 'display twitter', 'showImages', 'display_twitter');
		await moveOption('showImages', 'display futurism', 'showImages', 'display_futurism');
		await moveOption('showImages', 'display gfycat', 'showImages', 'display_gfycat');
		await moveOption('showImages', 'display gifyoutube', 'showImages', 'display_gifs');
		await moveOption('showImages', 'display vidble', 'showImages', 'display_vidble');
		await moveOption('showImages', 'display fitbamob', 'showImages', 'display_fitbamob');
		await moveOption('showImages', 'display giflike', 'showImages', 'display_giflike');
		await moveOption('showImages', 'display CtrlV.in', 'showImages', 'display_ctrlv');
		await moveOption('showImages', 'display snag.gy', 'showImages', 'display_snag');
		await moveOption('showImages', 'display picshd', 'showImages', 'display_picshd');
		await moveOption('showImages', 'display min.us', 'showImages', 'display_minus');
		await moveOption('showImages', 'display fiveHundredPx', 'showImages', 'display_fiveHundredPx');
		await moveOption('showImages', 'display flickr', 'showImages', 'display_flickr');
		await moveOption('showImages', 'display steam', 'showImages', 'display_steam');
		await moveOption('showImages', 'display deviantART', 'showImages', 'display_deviantart');
		await moveOption('showImages', 'display tumblr', 'showImages', 'display_tumblr');
		await moveOption('showImages', 'display memecrunch', 'showImages', 'display_memecrunch');
		await moveOption('showImages', 'display imgflip', 'showImages', 'display_imgflip');
		await moveOption('showImages', 'display livememe', 'showImages', 'display_livememe');
		await moveOption('showImages', 'display makeameme', 'showImages', 'display_makeameme');
		await moveOption('showImages', 'display memegen', 'showImages', 'display_memegen');
		await moveOption('showImages', 'display redditbooru', 'showImages', 'display_redditbooru');
		await moveOption('showImages', 'display youtube', 'showImages', 'display_youtube');
		await moveOption('showImages', 'display vimeo', 'showImages', 'display_vimeo');
		await moveOption('showImages', 'display soundcloud', 'showImages', 'display_soundcloud');
		await moveOption('showImages', 'display clyp', 'showImages', 'display_clyp');
		await moveOption('showImages', 'display memedad', 'showImages', 'display_memedad');
		await moveOption('showImages', 'display ridewithgps', 'showImages', 'display_ridewithgps');
		await moveOption('showImages', 'display photobucket', 'showImages', 'display_photobucket');
		await moveOption('showImages', 'display giphy', 'showImages', 'display_giphy');
		await moveOption('showImages', 'display streamable', 'showImages', 'display_streamable');
		await moveOption('showImages', 'display qwipit', 'showImages', 'display_qwipit');
		await moveOption('showImages', 'display radd.it', 'showImages', 'display_raddit');
		await moveOption('showImages', 'display pastebin', 'showImages', 'display_pastebin');
		await moveOption('showImages', 'display github gists', 'showImages', 'display_github');
		await moveOption('showImages', 'display Microsoft OneDrive', 'showImages', 'display_onedrive');
		await moveOption('showImages', 'display Oddshot', 'showImages', 'display_oddshot');
		await moveOption('showImages', 'display Miiverse', 'showImages', 'display_miiverse');
		await moveOption('showImages', 'display swirl', 'showImages', 'display_swirl');
	}
}, {
	versionNumber: '4.7.1-changeDefaultImageMaxSizeRetry',
	async go() {
		await updateOption('showImages', 'maxWidth', 640, '100%');
		await updateOption('showImages', 'maxHeight', 480, '80%');
		await updateOption('showImages', 'maxWidth', '640', '100%');
		await updateOption('showImages', 'maxHeight', '480', '80%');
	}
}, {
	versionNumber: '4.7.4-galleryFilmstripGranularity',
	async go() {
		await moveOption('showImages', 'dontLoadAlbumsBiggerThan', 'showImages', 'filmstripLoadIncrement');
	}
}, {
	versionNumber: '4.7.8-ner-hide-dupes',
	async go() {
		await updateOption('neverEndingReddit', 'hideDupes', 'fade', 'hide');
	}
}, {
	versionNumber: '5.0.1-disable-redditmedia-lookup',
	async go() {
		await forceUpdateOption('showImages', 'expandoCommentRedirects', 'nothing');
	}
}, {
	versionNumber: '5.0.2-reenable-redditmedia-expando',
	async go() {
		await updateOption('showImages', 'expandoCommentRedirects', 'nothing', 'expando');
	}
}, {
	versionNumber: '5.1.1-remove-multiredditnavbar-sectionlinks-workaround',
	async go() {
		await forceUpdateOption('multiredditNavbar', 'sectionLinks', sectionLinks => {
			if (!sectionLinks) return;
			for (const row of sectionLinks) {
				row[1] = row[1].replace(/^\.\.\//, './');
			}
		});
	}
}, {
	versionNumber: '5.3.1-enable-hardIgnore',
	async go() {
		await forceUpdateOption('userTagger', 'hardIgnore', true);
	}
}, {
	versionNumber: '5.3.5-remove-updates-css',
	async go() {
		await forceUpdateOption('stylesheet', 'loadStylesheets', rows => rows && rows.filter(row => row[0] !== 'https://cdn.redditenhancementsuite.com/updates.css'));

		const hideFloatingPauseButton = 'res-neverEndingReddit-hideFloatingPauseButton';
		await moveOption('stylesheet', 'bodyClasses', 'neverEndingReddit', 'showPauseButton', rows => !!rows && rows.every(row => row[0] !== hideFloatingPauseButton));
		await forceUpdateOption('stylesheet', 'bodyClasses', rows => rows && rows.filter(row => row[0] !== hideFloatingPauseButton));

		let shouldHideTagline = false;
		await forceUpdateOption('stylesheet', 'bodyClasses', rows => {
			if (!rows) return [];
			const filteredRows = rows.filter(row => row[0] !== 'res-hide-tagline-frontpage');
			shouldHideTagline = filteredRows.length < rows.length;
			return filteredRows;
		});
		if (shouldHideTagline) {
			forceUpdateOption('stylesheet', 'snippets', rows => [...(rows || []), ['/* migrated from res-hide-tagline-frontpage */ .front-page .tagline { display: none; }', 'everywhere']]);
		}
	}
}, {
	versionNumber: '5.3.6-enable-hideUnvotable',
	async go() {
		await forceUpdateOption('styleTweaks', 'hideUnvotable', true);
	}
}, {
	versionNumber: '5.3.7-automaticNightMode-to-enum',
	async go() {
		await forceUpdateOption('nightMode', 'automaticNightMode', value => value === true ? 'user' : 'none');
	}
}, {
	versionNumber: '5.5.0-commentLinks-rename',
	async go() {
		await moveOption('keyboardNav', 'commentsLinkNumbers', 'keyboardNav', 'linkNumbers');
		await moveOption('keyboardNav', 'commentsLinkNumberPosition', 'keyboardNav', 'linkNumberPosition');
		await moveOption('keyboardNav', 'commentsLinkToggleExpando', 'keyboardNav', 'linkToggleExpando');
		await moveOption('keyboardNav', 'commentsLinkNewTab', 'keyboardNav', 'linkNewTab');
	}
}, {
	versionNumber: '5.5.1-maxSize-to-string',
	async go() {
		const toString = x => x ? String(x) : '';
		await forceUpdateOption('showImages', 'maxWidth', toString);
		await forceUpdateOption('showImages', 'maxHeight', toString);
	}
}, {
	versionNumber: '5.5.3-disable-userbarHider',
	async go() {
		const notificationsOptions = await loadRaw('notifications');
		if (!notificationsOptions || !notificationsOptions.notificationTypes || !notificationsOptions.notificationTypes.value || !notificationsOptions.notificationTypes.value.some(([modId, notificationId]) => modId === 'userbarHider' && notificationId === 'userbarState')) {
			setEnabled('userbarHider', false);
		}
	}
}, {
	versionNumber: '5.5.11-update-notifications',
	async go() {
		await updateOption('onboarding', 'updateNotification', 'releaseNotes', 'notification');
	}
}, {
	versionNumber: '5.6.1-shard-tags',
	async go() {
		const tags = (await storage_namespaceObject.get('RESmodules.userTagger.tags')) || {};
		const remappedTags = mapKeys_default()(tags, (v, k) => `tag.${k.toLowerCase()}`);
		await storage_namespaceObject.setMultiple(remappedTags);
	}
}, {
	versionNumber: '5.6.2-remove-old-tags',
	async go() {
		await storage_namespaceObject.delete('RESmodules.userTagger.tags');
	}
}, {
	versionNumber: '5.7.0-keyboardNav-showImages-decoupling',
	async go() {
		await moveOption('keyboardNav', 'mediaBrowseMode', 'showImages', 'mediaBrowse');
	}
}, {
	versionNumber: '5.7.1-shard-newCommentCount',
	async go() {
		const entries = (await storage_namespaceObject.get('RESmodules.newCommentCount.counts')) || {};
		const remappedEntries = mapKeys_default()(entries, (v, k) => `newCommentCount.${k}`);
		await storage_namespaceObject.setMultiple(remappedEntries);
		await storage_namespaceObject.delete('RESmodules.newCommentCount.counts');
	}
}, {
	versionNumber: '5.7.3-commandLine-menu-opening',
	async go() {
		await moveOption('commandLine', 'launchFromMenuButton', 'RESMenu', 'gearIconClickAction', launchFromMenu => launchFromMenu ? 'openCommandLine' : 'toggleMenuNoHover');
	}
}, {
	versionNumber: '5.7.4-shard-commentHidePersistor',
	async go() {
		const { hiddenThings } = (await storage_namespaceObject.get('RESmodules.commentHidePersistor.hidePersistor')) || {};
		if (!hiddenThings) return;
		const remappedEntries = Object.entries(hiddenThings).reduce((acc, [k, v]) => {
			const page = (execRegexes.comments(k) || [])[2];
			const collapsedThings = v.reduce((acc, k) => (acc[k] = true) && acc, {});
			if (page && v.length) acc[`commentHidePersistor.${page}`] = { updateTime: Date.now(), collapsedThings };
			return acc;
		}, {});
		await storage_namespaceObject.setMultiple(remappedEntries);
		await storage_namespaceObject.delete('RESmodules.commentHidePersistor.hidePersistor');
	}
}, {
	versionNumber: '5.8.2-unshard-newCommentCount-subscriptions',
	async go() {
		const subscriptions = {};
		for (const [key, val] of Object.entries((await storage_namespaceObject.getAll()))) {
			if (!key.startsWith('newCommentCount.')) continue;
			if (val.subscriptionDate) subscriptions[key] = val;
		}
		storage_namespaceObject.set('RESmodules.newCommentCount.subscriptions', subscriptions);
	}
}, {
	versionNumber: '5.9.1-userTagger-refresh',
	async go() {
		let tags = await storage_namespaceObject.wrapPrefix('tag.', () => ({})).getAll();
		for (const tag of Object.values(tags)) {
			if (tag.votes > 0) tag.votesUp = tag.votes;
			if (tag.votes < 0) tag.votesDown = -tag.votes;
			Reflect.deleteProperty(tag, 'votes');
			if (tag.tag) tag.text = tag.tag;
			Reflect.deleteProperty(tag, 'tag');
			if (tag.ignore) tag.ignored = tag.ignore;
			Reflect.deleteProperty(tag, 'ignore');
		}
		tags = mapKeys_default()(tags, (v, k) => `tag.${k}`);
		await storage_namespaceObject.setMultiple(tags);
	}
}, {
	versionNumber: '5.9.1-selectedEntry',
	async go() {
		await moveOption('selectedEntry', 'addFocusBGColor', 'selectedEntry', 'setColors');
		await moveOption('selectedEntry', 'focusBGColor', 'selectedEntry', 'backgroundColor');
		await moveOption('selectedEntry', 'focusBGColorNight', 'selectedEntry', 'backgroundColorNight');
		await moveOption('selectedEntry', 'focusFGColorNight', 'selectedEntry', 'textColorNight');
		await moveOption('selectedEntry', 'addFocusBorder', 'selectedEntry', 'addOutline');
		await moveOption('selectedEntry', 'focusBorder', 'selectedEntry', 'outlineStyle');
		await moveOption('selectedEntry', 'focusBorderNight', 'selectedEntry', 'outlineStyleNight');

		if (((await storage_namespaceObject.get('RES.modulePrefs')) || { selectedEntry: true }).selectedEntry === false) {
			await options_set('selectedEntry', 'setColors', false);
			await options_set('selectedEntry', 'addLine', true);
		}
	}
}, {
	versionNumber: '5.9-no-option-spaces',
	async go() {
		await moveOption('showImages', 'prefer RES albums', 'showImages', 'preferResAlbums');
	}
}, {
	versionNumber: '5.9.2-numbers-to-strings',
	async go() {
		function stringify(x) {
			if (typeof x === 'number') return x.toString();
			return x;
		}

		await forceUpdateOption('betteReddit', 'hideLinkFadeDelay', stringify);
		await forceUpdateOption('commentDepth', 'defaultCommentDepth', stringify);
		await forceUpdateOption('commentDepth', 'defaultMinimumComments', stringify);
		await forceUpdateOption('commentStyle', 'commentIndent', stringify);
		await forceUpdateOption('context', 'defaultContext', stringify);
		await forceUpdateOption('dashboard', 'defaultPosts', stringify);
		await forceUpdateOption('dashboard', 'tagsPerPage', stringify);
		await forceUpdateOption('hover', 'openDelay', stringify);
		await forceUpdateOption('hover', 'fadeDelay', stringify);
		await forceUpdateOption('hover', 'fadeSpeed', stringify);
		await forceUpdateOption('hover', 'width', stringify);
		await forceUpdateOption('messageMenu', 'hoverDelay', stringify);
		await forceUpdateOption('messageMenu', 'fadeDelay', stringify);
		await forceUpdateOption('messageMenu', 'fadeSpeed', stringify);
		await forceUpdateOption('multiredditNavbar', 'hoverDelay', stringify);
		await forceUpdateOption('multiredditNavbar', 'fadeDelay', stringify);
		await forceUpdateOption('multiredditNavbar', 'fadeSpeed', stringify);
		await forceUpdateOption('neverEndingReddit', 'pauseAfterEvery', stringify);
		await forceUpdateOption('newCommentCount', 'cleanComments', stringify);
		await forceUpdateOption('newCommentCount', 'subscriptionLength', stringify);
		await forceUpdateOption('nightMode', 'nightModeOverrideHours', stringify);
		await forceUpdateOption('notifications', 'closeDelay', stringify);
		await forceUpdateOption('notifications', 'fadeOutLength', stringify);
		await forceUpdateOption('profileNavigator', 'hoverDelay', stringify);
		await forceUpdateOption('profileNavigator', 'fadeDelay', stringify);
		await forceUpdateOption('profileNavigator', 'fadeSpeed', stringify);
		await forceUpdateOption('showImages', 'browsePreloadCount', stringify);
		await forceUpdateOption('showImages', 'galleryPreloadCount', stringify);
		await forceUpdateOption('showImages', 'bufferScreens', stringify);
		await forceUpdateOption('showImages', 'selfTextMaxHeight', stringify);
		await forceUpdateOption('showImages', 'commentMaxHeight', stringify);
		await forceUpdateOption('showImages', 'filmstripLoadIncrement', stringify);
		await forceUpdateOption('showImages', 'useSlideshowWhenLargerThan', stringify);
		await forceUpdateOption('showImages', 'maxSimultaneousPlaying', stringify);
		await forceUpdateOption('showParent', 'hoverDelay', stringify);
		await forceUpdateOption('showParent', 'fadeDelay', stringify);
		await forceUpdateOption('showParent', 'fadeSpeed', stringify);
		await forceUpdateOption('styleTweaks', 'highlightTopLevelSize', stringify);
		await forceUpdateOption('subredditInfo', 'hoverDelay', stringify);
		await forceUpdateOption('subredditInfo', 'fadeDelay', stringify);
		await forceUpdateOption('subredditInfo', 'fadeSpeed', stringify);
		await forceUpdateOption('subredditManager', 'shortcutDropdownDelay', stringify);
		await forceUpdateOption('subredditManager', 'shortcutEditDropdownDelay', stringify);
		await forceUpdateOption('userInfo', 'hoverDelay', stringify);
		await forceUpdateOption('userInfo', 'fadeDelay', stringify);
		await forceUpdateOption('userInfo', 'fadeSpeed', stringify);
	}
}, {
	versionNumber: '5.9-filteReddit-customFilter',
	async go() {
		function convertPatt(type, patt, key) {
			if (typeof patt !== 'string' || !patt.length || /^\/(.*)\/([gim]+)?$/.test(patt)) return;
			if (type === 'postTitle') {
				return { [key]: `/${patt}/i` };
			} else if (['subreddit', 'domain', 'userFlair', 'linkFlair', 'username'].includes(type)) {
				return { [key]: `/^(${patt})\$/i` };
			}
		}

		const entries = {};
		const f = await storage_namespaceObject.wrapPrefix('RESmodules.filteReddit.', () => ({})).getAll();
		for (const [k, v] of Object.entries(f)) {
			if (typeof v === 'boolean') continue;
			const visible = f[`filterlineVisibility.${k}`] || false;
			const entry = entries[`filterline.${k}`] = { filters: {}, visible };
			for (const [id, { criterion, state, key }] of Object.entries(v.filters || {})) {
				const type = key;
				entry.filters[id] = Object.assign({ type, state, criterion }, convertPatt(type, criterion, 'criterion'));
			}
		}
		await storage_namespaceObject.setMultiple(entries);

		const { customFilters } = (await loadRaw('filteReddit')) || {};
		if (customFilters) {
			for (const _ref of customFilters.value || []) {
				const { body } = _ref;

				body.of.forEach(function traverseAndUpdate(v) {
					if (v.type === 'group') v.of.forEach(traverseAndUpdate);else Object.assign(v, convertPatt(v.type, v.patt, 'patt'));
				});
			}
			await options_set('filteReddit', 'customFiltersP', customFilters.value);
		}
	}
}];

async function migrate() {
	await forEachSeq((await getMigrationsToRun()), async currentMigration => {
		await currentMigration.go();

		setLastMigratedVersion(currentMigration.versionNumber);
	});

	setLastMigratedVersion(last_default()(migrations).versionNumber);
}

async function getMigrationsToRun() {
	const lastMigratedVersion = await getLastMigratedVersion();

	if (lastMigratedVersion === false) return [];

	return takeRightWhile_default()(migrations, ({ versionNumber }) => versionNumber !== lastMigratedVersion);
}

async function getLastMigratedVersion() {
	const RESOptionsVersion = await storage_namespaceObject.get('RESOptionsVersion');

	if (typeof RESOptionsVersion === 'undefined') {
		console.warn('RESOptionsVersion was undefined');
		return false;
	} else if (RESOptionsVersion !== null) {
		if (/^\d$/.test(RESOptionsVersion)) {
			const legacyOptionVersionMapping = ['4.5.0.0', '4.5.0.1'];
			return legacyOptionVersionMapping[RESOptionsVersion - 1];
		} else if (!migrations.map(m => m.versionNumber).includes(RESOptionsVersion)) {
			console.warn(`Couldn't find a migration matching RESOptionsVersion = ${RESOptionsVersion}`);
			return false;
		} else {
			return RESOptionsVersion;
		}
	} else if (await storage_namespaceObject.has('RES.firstRun.4.5.0.2')) {
		return '4.5.0.2';
	} else if ((await storage_namespaceObject.has('RES.firstRun.4.3.2.1')) || (await storage_namespaceObject.has('RES.firstRun.4.3.1.2')) || (await storage_namespaceObject.has('RES.firstRun.4.3.0.3')) || (await storage_namespaceObject.has('RES.firstRun.4.2.0.2')) || (await storage_namespaceObject.has('RES.firstRun.4.1.5'))) {
		return null;
	} else {
		return false;
	}
}

function setLastMigratedVersion(value) {
	if (value) {
		storage_namespaceObject.set('RESOptionsVersion', value);
	}
}
// CONCATENATED MODULE: ./lib/core/migrate/index.js



// CONCATENATED MODULE: ./lib/core/init.js










let init_start;

function init() {
	if (sessionStorage.getItem(RES_DISABLED_KEY)) return;

	init_start();
}

const sourceLoaded = new Promise(resolve => init_start = resolve);

const bodyStart = sourceLoaded.then(() => Promise.race([waitForChild(document.documentElement, 'body'), waitFor(() => document.body, 100), contentLoaded]));

const bodyReady = bodyStart.then(() => Promise.race([waitFor(() => document.body, 10).then(body => waitForChild(body, '.debuginfo')), contentLoaded]));

const contentLoaded = sourceLoaded.then(() => Promise.race([waitForEvent(window, 'DOMContentLoaded', 'load'), waitFor(() => document.readyState === 'interactive' || document.readyState === 'complete', 500)]));

const loadComplete = contentLoaded.then(() => Promise.race([waitForEvent(window, 'load'), waitFor(() => document.readyState === 'complete', 500)]));

const loadI18n = sourceLoaded.then(() => _loadI18n());

const runMigrations = loadI18n.then(() => migrate());

const loadDynamicOptions = loadI18n.then(() => _runModuleStage('loadDynamicOptions', { skipEnabledCheck: true }));

const loadOptions = loadDynamicOptions.then(() => Promise.all([_loadModuleOptions(), _loadModulePrefs()]));

const addModuleBodyClasses = loadOptions.then(() => _addModuleBodyClasses());

const init_always = loadOptions.then(() => _runModuleStage('always', { skipEnabledCheck: true }));

const beforeLoad = loadOptions.then(() => _runModuleStage('beforeLoad'));

const init_go = Promise.all([beforeLoad, bodyReady]).then(() => {
	initObservers();
	return Promise.all([newSitetable(document.body), _runModuleStage('go')]);
});

const afterLoad = Promise.all([init_go, loadComplete]).then(() => _runModuleStage('afterLoad'));

bodyStart.then(() => bodyClasses_namespaceObject.add());
// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--5-0!./lib/foreground.entry.js







init();

/***/ }),
/* 282 */
/***/ (function(module, exports) {

var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=='[object Array]';};

/***/ }),
/* 283 */
/***/ (function(module, exports) {

exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias;}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity;}else{m=m+Math.pow(2,mLen);e=e-eBias;}return(s?-1:1)*m*Math.pow(2,e-mLen);};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax;}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2;}if(e+eBias>=1){value+=rt/c;}else{value+=rt*Math.pow(2,1-eBias);}if(value*c>=2){e++;c/=2;}if(e+eBias>=eMax){m=0;e=eMax;}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias;}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0;}}for(;mLen>=8;buffer[offset+i]=m&0xff,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&0xff,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128;};

/***/ }),
/* 284 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=='undefined'?Uint8Array:Array;var code='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i;}revLookup['-'.charCodeAt(0)]=62;revLookup['_'.charCodeAt(0)]=63;function placeHoldersCount(b64){var len=b64.length;if(len%4>0){throw new Error('Invalid string. Length must be a multiple of 4');}return b64[len-2]==='='?2:b64[len-1]==='='?1:0;}function byteLength(b64){return b64.length*3/4-placeHoldersCount(b64);}function toByteArray(b64){var i,l,tmp,placeHolders,arr;var len=b64.length;placeHolders=placeHoldersCount(b64);arr=new Arr(len*3/4-placeHolders);l=placeHolders>0?len-4:len;var L=0;for(i=0;i<l;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[L++]=tmp>>16&0xFF;arr[L++]=tmp>>8&0xFF;arr[L++]=tmp&0xFF;}if(placeHolders===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[L++]=tmp&0xFF;}else if(placeHolders===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[L++]=tmp>>8&0xFF;arr[L++]=tmp&0xFF;}return arr;}function tripletToBase64(num){return lookup[num>>18&0x3F]+lookup[num>>12&0x3F]+lookup[num>>6&0x3F]+lookup[num&0x3F];}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&0xFF0000)+(uint8[i+1]<<8&0xFF00)+(uint8[i+2]&0xFF);output.push(tripletToBase64(tmp));}return output.join('');}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var output='';var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength));}if(extraBytes===1){tmp=uint8[len-1];output+=lookup[tmp>>2];output+=lookup[tmp<<4&0x3F];output+='==';}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];output+=lookup[tmp>>10];output+=lookup[tmp>>4&0x3F];output+=lookup[tmp<<2&0x3F];output+='=';}parts.push(output);return parts.join('');}

/***/ }),
/* 285 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var base64=__webpack_require__(284);var ieee754=__webpack_require__(283);var isArray=__webpack_require__(282);exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global.TYPED_ARRAY_SUPPORT!==undefined?global.TYPED_ARRAY_SUPPORT:typedArraySupport();exports.kMaxLength=kMaxLength();function typedArraySupport(){try{var arr=new Uint8Array(1);arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42;}};return arr.foo()===42&&typeof arr.subarray==='function'&&arr.subarray(1,1).byteLength===0;}catch(e){return false;}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?0x7fffffff:0x3fffffff;}function createBuffer(that,length){if(kMaxLength()<length){throw new RangeError('Invalid typed array length');}if(Buffer.TYPED_ARRAY_SUPPORT){that=new Uint8Array(length);that.__proto__=Buffer.prototype;}else{if(that===null){that=new Buffer(length);}that.length=length;}return that;}function Buffer(arg,encodingOrOffset,length){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer)){return new Buffer(arg,encodingOrOffset,length);}if(typeof arg==='number'){if(typeof encodingOrOffset==='string'){throw new Error('If encoding is specified then the first argument must be a string');}return allocUnsafe(this,arg);}return from(this,arg,encodingOrOffset,length);}Buffer.poolSize=8192;Buffer._augment=function(arr){arr.__proto__=Buffer.prototype;return arr;};function from(that,value,encodingOrOffset,length){if(typeof value==='number'){throw new TypeError('"value" argument must not be a number');}if(typeof ArrayBuffer!=='undefined'&&value instanceof ArrayBuffer){return fromArrayBuffer(that,value,encodingOrOffset,length);}if(typeof value==='string'){return fromString(that,value,encodingOrOffset);}return fromObject(that,value);}Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length);};if(Buffer.TYPED_ARRAY_SUPPORT){Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array;if(typeof Symbol!=='undefined'&&Symbol.species&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true});}}function assertSize(size){if(typeof size!=='number'){throw new TypeError('"size" argument must be a number');}else if(size<0){throw new RangeError('"size" argument must not be negative');}}function alloc(that,size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(that,size);}if(fill!==undefined){return typeof encoding==='string'?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill);}return createBuffer(that,size);}Buffer.alloc=function(size,fill,encoding){return alloc(null,size,fill,encoding);};function allocUnsafe(that,size){assertSize(size);that=createBuffer(that,size<0?0:checked(size)|0);if(!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<size;++i){that[i]=0;}}return that;}Buffer.allocUnsafe=function(size){return allocUnsafe(null,size);};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size);};function fromString(that,string,encoding){if(typeof encoding!=='string'||encoding===''){encoding='utf8';}if(!Buffer.isEncoding(encoding)){throw new TypeError('"encoding" must be a valid string encoding');}var length=byteLength(string,encoding)|0;that=createBuffer(that,length);var actual=that.write(string,encoding);if(actual!==length){that=that.slice(0,actual);}return that;}function fromArrayLike(that,array){var length=array.length<0?0:checked(array.length)|0;that=createBuffer(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255;}return that;}function fromArrayBuffer(that,array,byteOffset,length){array.byteLength;if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError('\'offset\' is out of bounds');}if(array.byteLength<byteOffset+(length||0)){throw new RangeError('\'length\' is out of bounds');}if(byteOffset===undefined&&length===undefined){array=new Uint8Array(array);}else if(length===undefined){array=new Uint8Array(array,byteOffset);}else{array=new Uint8Array(array,byteOffset,length);}if(Buffer.TYPED_ARRAY_SUPPORT){that=array;that.__proto__=Buffer.prototype;}else{that=fromArrayLike(that,array);}return that;}function fromObject(that,obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;that=createBuffer(that,len);if(that.length===0){return that;}obj.copy(that,0,0,len);return that;}if(obj){if(typeof ArrayBuffer!=='undefined'&&obj.buffer instanceof ArrayBuffer||'length'in obj){if(typeof obj.length!=='number'||isnan(obj.length)){return createBuffer(that,0);}return fromArrayLike(that,obj);}if(obj.type==='Buffer'&&isArray(obj.data)){return fromArrayLike(that,obj.data);}}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');}function checked(length){if(length>=kMaxLength()){throw new RangeError('Attempt to allocate Buffer larger than maximum '+'size: 0x'+kMaxLength().toString(16)+' bytes');}return length|0;}function SlowBuffer(length){if(+length!=length){length=0;}return Buffer.alloc(+length);}Buffer.isBuffer=function isBuffer(b){return!!(b!=null&&b._isBuffer);};Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError('Arguments must be Buffers');}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break;}}if(x<y)return-1;if(y<x)return 1;return 0;};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return true;default:return false;}};Buffer.concat=function concat(list,length){if(!isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers');}if(list.length===0){return Buffer.alloc(0);}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length;}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers');}buf.copy(buffer,pos);pos+=buf.length;}return buffer;};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length;}if(typeof ArrayBuffer!=='undefined'&&typeof ArrayBuffer.isView==='function'&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer)){return string.byteLength;}if(typeof string!=='string'){string=''+string;}var len=string.length;if(len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case'ascii':case'latin1':case'binary':return len;case'utf8':case'utf-8':case undefined:return utf8ToBytes(string).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return len*2;case'hex':return len>>>1;case'base64':return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(''+encoding).toLowerCase();loweredCase=true;}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0;}if(start>this.length){return'';}if(end===undefined||end>this.length){end=this.length;}if(end<=0){return'';}end>>>=0;start>>>=0;if(end<=start){return'';}if(!encoding)encoding='utf8';while(true){switch(encoding){case'hex':return hexSlice(this,start,end);case'utf8':case'utf-8':return utf8Slice(this,start,end);case'ascii':return asciiSlice(this,start,end);case'latin1':case'binary':return latin1Slice(this,start,end);case'base64':return base64Slice(this,start,end);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError('Unknown encoding: '+encoding);encoding=(encoding+'').toLowerCase();loweredCase=true;}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i;}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError('Buffer size must be a multiple of 16-bits');}for(var i=0;i<len;i+=2){swap(this,i,i+1);}return this;};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError('Buffer size must be a multiple of 32-bits');}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2);}return this;};Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError('Buffer size must be a multiple of 64-bits');}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4);}return this;};Buffer.prototype.toString=function toString(){var length=this.length|0;if(length===0)return'';if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments);};Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError('Argument must be a Buffer');if(this===b)return true;return Buffer.compare(this,b)===0;};Buffer.prototype.inspect=function inspect(){var str='';var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString('hex',0,max).match(/.{2}/g).join(' ');if(this.length>max)str+=' ... ';}return'<Buffer '+str+'>';};Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target)){throw new TypeError('Argument must be a Buffer');}if(start===undefined){start=0;}if(end===undefined){end=target?target.length:0;}if(thisStart===undefined){thisStart=0;}if(thisEnd===undefined){thisEnd=this.length;}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError('out of range index');}if(thisStart>=thisEnd&&start>=end){return 0;}if(thisStart>=thisEnd){return-1;}if(start>=end){return 1;}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break;}}if(x<y)return-1;if(y<x)return 1;return 0;};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==='string'){encoding=byteOffset;byteOffset=0;}else if(byteOffset>0x7fffffff){byteOffset=0x7fffffff;}else if(byteOffset<-0x80000000){byteOffset=-0x80000000;}byteOffset=+byteOffset;if(isNaN(byteOffset)){byteOffset=dir?0:buffer.length-1;}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1;}else if(byteOffset<0){if(dir)byteOffset=0;else return-1;}if(typeof val==='string'){val=Buffer.from(val,encoding);}if(Buffer.isBuffer(val)){if(val.length===0){return-1;}return arrayIndexOf(buffer,val,byteOffset,encoding,dir);}else if(typeof val==='number'){val=val&0xFF;if(Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==='function'){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset);}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset);}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir);}throw new TypeError('val must be string, number or Buffer');}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==='ucs2'||encoding==='ucs-2'||encoding==='utf16le'||encoding==='utf-16le'){if(arr.length<2||val.length<2){return-1;}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2;}}function read(buf,i){if(indexSize===1){return buf[i];}else{return buf.readUInt16BE(i*indexSize);}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize;}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1;}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break;}}if(found)return i;}}return-1;}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1;};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true);};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false);};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining;}else{length=Number(length);if(length>remaining){length=remaining;}}var strLen=string.length;if(strLen%2!==0)throw new TypeError('Invalid hex string');if(length>strLen/2){length=strLen/2;}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed;}return i;}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length);}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length);}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length);}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length);}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length);}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding='utf8';length=this.length;offset=0;}else if(length===undefined&&typeof offset==='string'){encoding=offset;length=this.length;offset=0;}else if(isFinite(offset)){offset=offset|0;if(isFinite(length)){length=length|0;if(encoding===undefined)encoding='utf8';}else{encoding=length;length=undefined;}}else{throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError('Attempt to write outside buffer bounds');}if(!encoding)encoding='utf8';var loweredCase=false;for(;;){switch(encoding){case'hex':return hexWrite(this,string,offset,length);case'utf8':case'utf-8':return utf8Write(this,string,offset,length);case'ascii':return asciiWrite(this,string,offset,length);case'latin1':case'binary':return latin1Write(this,string,offset,length);case'base64':return base64Write(this,string,offset,length);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError('Unknown encoding: '+encoding);encoding=(''+encoding).toLowerCase();loweredCase=true;}}};Buffer.prototype.toJSON=function toJSON(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)};};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf);}else{return base64.fromByteArray(buf.slice(start,end));}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>0xEF?4:firstByte>0xDF?3:firstByte>0xBF?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<0x80){codePoint=firstByte;}break;case 2:secondByte=buf[i+1];if((secondByte&0xC0)===0x80){tempCodePoint=(firstByte&0x1F)<<0x6|secondByte&0x3F;if(tempCodePoint>0x7F){codePoint=tempCodePoint;}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&0xC0)===0x80&&(thirdByte&0xC0)===0x80){tempCodePoint=(firstByte&0xF)<<0xC|(secondByte&0x3F)<<0x6|thirdByte&0x3F;if(tempCodePoint>0x7FF&&(tempCodePoint<0xD800||tempCodePoint>0xDFFF)){codePoint=tempCodePoint;}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&0xC0)===0x80&&(thirdByte&0xC0)===0x80&&(fourthByte&0xC0)===0x80){tempCodePoint=(firstByte&0xF)<<0x12|(secondByte&0x3F)<<0xC|(thirdByte&0x3F)<<0x6|fourthByte&0x3F;if(tempCodePoint>0xFFFF&&tempCodePoint<0x110000){codePoint=tempCodePoint;}}}}if(codePoint===null){codePoint=0xFFFD;bytesPerSequence=1;}else if(codePoint>0xFFFF){codePoint-=0x10000;res.push(codePoint>>>10&0x3FF|0xD800);codePoint=0xDC00|codePoint&0x3FF;}res.push(codePoint);i+=bytesPerSequence;}return decodeCodePointsArray(res);}var MAX_ARGUMENTS_LENGTH=0x1000;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints);}var res='';var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));}return res;}function asciiSlice(buf,start,end){var ret='';end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&0x7F);}return ret;}function latin1Slice(buf,start,end){var ret='';end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]);}return ret;}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out='';for(var i=start;i<end;++i){out+=toHex(buf[i]);}return out;}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res='';for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256);}return res;}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0;}else if(start>len){start=len;}if(end<0){end+=len;if(end<0)end=0;}else if(end>len){end=len;}if(end<start)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=this.subarray(start,end);newBuf.__proto__=Buffer.prototype;}else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined);for(var i=0;i<sliceLen;++i){newBuf[i]=this[i+start];}}return newBuf;};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError('offset is not uint');if(offset+ext>length)throw new RangeError('Trying to access beyond buffer length');}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=0x100)){val+=this[offset+i]*mul;}return val;};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert){checkOffset(offset,byteLength,this.length);}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=0x100)){val+=this[offset+--byteLength]*mul;}return val;};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset];};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8;};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1];};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*0x1000000;};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*0x1000000+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3]);};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=0x100)){val+=this[offset+i]*mul;}mul*=0x80;if(val>=mul)val-=Math.pow(2,8*byteLength);return val;};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=0x100)){val+=this[offset+--i]*mul;}mul*=0x80;if(val>=mul)val-=Math.pow(2,8*byteLength);return val;};Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&0x80))return this[offset];return(0xff-this[offset]+1)*-1;};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&0x8000?val|0xFFFF0000:val;};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&0x8000?val|0xFFFF0000:val;};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24;};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3];};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4);};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4);};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8);};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8);};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError('Index out of range');}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0);}var mul=1;var i=0;this[offset]=value&0xFF;while(++i<byteLength&&(mul*=0x100)){this[offset+i]=value/mul&0xFF;}return offset+byteLength;};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0);}var i=byteLength-1;var mul=1;this[offset+i]=value&0xFF;while(--i>=0&&(mul*=0x100)){this[offset+i]=value/mul&0xFF;}return offset+byteLength;};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,0xff,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value&0xff;return offset+1;};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=0xffff+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i){buf[offset+i]=(value&0xff<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8;}}Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,0xffff,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&0xff;this[offset+1]=value>>>8;}else{objectWriteUInt16(this,value,offset,true);}return offset+2;};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,0xffff,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&0xff;}else{objectWriteUInt16(this,value,offset,false);}return offset+2;};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=0xffffffff+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&0xff;}}Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,0xffffffff,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&0xff;}else{objectWriteUInt32(this,value,offset,true);}return offset+4;};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,0xffffffff,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&0xff;}else{objectWriteUInt32(this,value,offset,false);}return offset+4;};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit);}var i=0;var mul=1;var sub=0;this[offset]=value&0xFF;while(++i<byteLength&&(mul*=0x100)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1;}this[offset+i]=(value/mul>>0)-sub&0xFF;}return offset+byteLength;};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit);}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&0xFF;while(--i>=0&&(mul*=0x100)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1;}this[offset+i]=(value/mul>>0)-sub&0xFF;}return offset+byteLength;};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,0x7f,-0x80);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=0xff+value+1;this[offset]=value&0xff;return offset+1;};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,0x7fff,-0x8000);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&0xff;this[offset+1]=value>>>8;}else{objectWriteUInt16(this,value,offset,true);}return offset+2;};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,0x7fff,-0x8000);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&0xff;}else{objectWriteUInt16(this,value,offset,false);}return offset+2;};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,0x7fffffff,-0x80000000);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&0xff;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24;}else{objectWriteUInt32(this,value,offset,true);}return offset+4;};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,0x7fffffff,-0x80000000);if(value<0)value=0xffffffff+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&0xff;}else{objectWriteUInt32(this,value,offset,false);}return offset+4;};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError('Index out of range');if(offset<0)throw new RangeError('Index out of range');}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e+38,-3.4028234663852886e+38);}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4;}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert);};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert);};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157E+308,-1.7976931348623157E+308);}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8;}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert);};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert);};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError('targetStart out of bounds');}if(start<0||start>=this.length)throw new RangeError('sourceStart out of bounds');if(end<0)throw new RangeError('sourceEnd out of bounds');if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start;}var len=end-start;var i;if(this===target&&start<targetStart&&targetStart<end){for(i=len-1;i>=0;--i){target[i+targetStart]=this[i+start];}}else if(len<1000||!Buffer.TYPED_ARRAY_SUPPORT){for(i=0;i<len;++i){target[i+targetStart]=this[i+start];}}else{Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);}return len;};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==='string'){if(typeof start==='string'){encoding=start;start=0;end=this.length;}else if(typeof end==='string'){encoding=end;end=this.length;}if(val.length===1){var code=val.charCodeAt(0);if(code<256){val=code;}}if(encoding!==undefined&&typeof encoding!=='string'){throw new TypeError('encoding must be a string');}if(typeof encoding==='string'&&!Buffer.isEncoding(encoding)){throw new TypeError('Unknown encoding: '+encoding);}}else if(typeof val==='number'){val=val&255;}if(start<0||this.length<start||this.length<end){throw new RangeError('Out of range index');}if(end<=start){return this;}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==='number'){for(i=start;i<end;++i){this[i]=val;}}else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString());var len=bytes.length;for(i=0;i<end-start;++i){this[i+start]=bytes[i%len];}}return this;};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,'');if(str.length<2)return'';while(str.length%4!==0){str=str+'=';}return str;}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,'');}function toHex(n){if(n<16)return'0'+n.toString(16);return n.toString(16);}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>0xD7FF&&codePoint<0xE000){if(!leadSurrogate){if(codePoint>0xDBFF){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);continue;}else if(i+1===length){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);continue;}leadSurrogate=codePoint;continue;}if(codePoint<0xDC00){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);leadSurrogate=codePoint;continue;}codePoint=(leadSurrogate-0xD800<<10|codePoint-0xDC00)+0x10000;}else if(leadSurrogate){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD);}leadSurrogate=null;if(codePoint<0x80){if((units-=1)<0)break;bytes.push(codePoint);}else if(codePoint<0x800){if((units-=2)<0)break;bytes.push(codePoint>>0x6|0xC0,codePoint&0x3F|0x80);}else if(codePoint<0x10000){if((units-=3)<0)break;bytes.push(codePoint>>0xC|0xE0,codePoint>>0x6&0x3F|0x80,codePoint&0x3F|0x80);}else if(codePoint<0x110000){if((units-=4)<0)break;bytes.push(codePoint>>0x12|0xF0,codePoint>>0xC&0x3F|0x80,codePoint>>0x6&0x3F|0x80,codePoint&0x3F|0x80);}else{throw new Error('Invalid code point');}}return bytes;}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&0xFF);}return byteArray;}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi);}return byteArray;}function base64ToBytes(str){return base64.toByteArray(base64clean(str));}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i];}return i;}function isnan(val){return val!==val;}

/***/ }),
/* 286 */
/***/ (function(module, exports, __webpack_require__) {

var copyObject=__webpack_require__(23),keysIn=__webpack_require__(46);function toPlainObject(value){return copyObject(value,keysIn(value));}module.exports=toPlainObject;

/***/ }),
/* 287 */
/***/ (function(module, exports, __webpack_require__) {

var root=__webpack_require__(18);var Uint8Array=root.Uint8Array;module.exports=Uint8Array;

/***/ }),
/* 288 */
/***/ (function(module, exports, __webpack_require__) {

var Uint8Array=__webpack_require__(287);function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result;}module.exports=cloneArrayBuffer;

/***/ }),
/* 289 */
/***/ (function(module, exports, __webpack_require__) {

var cloneArrayBuffer=__webpack_require__(288);function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length);}module.exports=cloneTypedArray;

/***/ }),
/* 290 */
/***/ (function(module, exports, __webpack_require__) {

var assignMergeValue=__webpack_require__(93),cloneBuffer=__webpack_require__(111),cloneTypedArray=__webpack_require__(289),copyArray=__webpack_require__(37),initCloneObject=__webpack_require__(108),isArguments=__webpack_require__(44),isArray=__webpack_require__(6),isArrayLikeObject=__webpack_require__(33),isBuffer=__webpack_require__(35),isFunction=__webpack_require__(49),isObject=__webpack_require__(9),isPlainObject=__webpack_require__(106),isTypedArray=__webpack_require__(48),safeGet=__webpack_require__(92),toPlainObject=__webpack_require__(286);function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return;}var newValue=customizer?customizer(objValue,srcValue,key+'',object,source,stack):undefined;var isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;if(isArr||isBuff||isTyped){if(isArray(objValue)){newValue=objValue;}else if(isArrayLikeObject(objValue)){newValue=copyArray(objValue);}else if(isBuff){isCommon=false;newValue=cloneBuffer(srcValue,true);}else if(isTyped){isCommon=false;newValue=cloneTypedArray(srcValue,true);}else{newValue=[];}}else if(isPlainObject(srcValue)||isArguments(srcValue)){newValue=objValue;if(isArguments(objValue)){newValue=toPlainObject(objValue);}else if(!isObject(objValue)||srcIndex&&isFunction(objValue)){newValue=initCloneObject(srcValue);}}else{isCommon=false;}}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack['delete'](srcValue);}assignMergeValue(object,key,newValue);}module.exports=baseMergeDeep;

/***/ }),
/* 291 */
/***/ (function(module, exports, __webpack_require__) {

var Stack=__webpack_require__(70),assignMergeValue=__webpack_require__(93),baseFor=__webpack_require__(113),baseMergeDeep=__webpack_require__(290),isObject=__webpack_require__(9),keysIn=__webpack_require__(46),safeGet=__webpack_require__(92);function baseMerge(object,source,srcIndex,customizer,stack){if(object===source){return;}baseFor(source,function(srcValue,key){if(isObject(srcValue)){stack||(stack=new Stack());baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);}else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+'',object,source,stack):undefined;if(newValue===undefined){newValue=srcValue;}assignMergeValue(object,key,newValue);}},keysIn);}module.exports=baseMerge;

/***/ }),
/* 292 */
/***/ (function(module, exports, __webpack_require__) {

var baseSlice=__webpack_require__(52),isIterateeCall=__webpack_require__(43),toInteger=__webpack_require__(25);function slice(array,start,end){var length=array==null?0:array.length;if(!length){return[];}if(end&&typeof end!='number'&&isIterateeCall(array,start,end)){start=0;end=length;}else{start=start==null?0:toInteger(start);end=end===undefined?length:toInteger(end);}return baseSlice(array,start,end);}module.exports=slice;

/***/ }),
/* 293 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var forEach=__webpack_require__(96).forEach;module.exports=function(options){options=options||{};var reporter=options.reporter;var batchProcessor=options.batchProcessor;var getState=options.stateHandler.getState;var hasState=options.stateHandler.hasState;var idHandler=options.idHandler;if(!batchProcessor){throw new Error("Missing required dependency: batchProcessor");}if(!reporter){throw new Error("Missing required dependency: reporter.");}var scrollbarSizes=getScrollbarSizes();var styleId="erd_scroll_detection_scrollbar_style";var detectionContainerClass="erd_scroll_detection_container";injectScrollStyle(styleId,detectionContainerClass);function getScrollbarSizes(){var width=500;var height=500;var child=document.createElement("div");child.style.cssText="position: absolute; width: "+width*2+"px; height: "+height*2+"px; visibility: hidden; margin: 0; padding: 0;";var container=document.createElement("div");container.style.cssText="position: absolute; width: "+width+"px; height: "+height+"px; overflow: scroll; visibility: none; top: "+-width*3+"px; left: "+-height*3+"px; visibility: hidden; margin: 0; padding: 0;";container.appendChild(child);document.body.insertBefore(container,document.body.firstChild);var widthSize=width-container.clientWidth;var heightSize=height-container.clientHeight;document.body.removeChild(container);return{width:widthSize,height:heightSize};}function injectScrollStyle(styleId,containerClass){function injectStyle(style,method){method=method||function(element){document.head.appendChild(element);};var styleElement=document.createElement("style");styleElement.innerHTML=style;styleElement.id=styleId;method(styleElement);return styleElement;}if(!document.getElementById(styleId)){var containerAnimationClass=containerClass+"_animation";var containerAnimationActiveClass=containerClass+"_animation_active";var style="/* Created by the element-resize-detector library. */\n";style+="."+containerClass+" > div::-webkit-scrollbar { display: none; }\n\n";style+="."+containerAnimationActiveClass+" { -webkit-animation-duration: 0.1s; animation-duration: 0.1s; -webkit-animation-name: "+containerAnimationClass+"; animation-name: "+containerAnimationClass+"; }\n";style+="@-webkit-keyframes "+containerAnimationClass+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n";style+="@keyframes "+containerAnimationClass+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }";injectStyle(style);}}function addAnimationClass(element){element.className+=" "+detectionContainerClass+"_animation_active";}function addEvent(el,name,cb){if(el.addEventListener){el.addEventListener(name,cb);}else if(el.attachEvent){el.attachEvent("on"+name,cb);}else{return reporter.error("[scroll] Don't know how to add event listeners.");}}function removeEvent(el,name,cb){if(el.removeEventListener){el.removeEventListener(name,cb);}else if(el.detachEvent){el.detachEvent("on"+name,cb);}else{return reporter.error("[scroll] Don't know how to remove event listeners.");}}function getExpandElement(element){return getState(element).container.childNodes[0].childNodes[0].childNodes[0];}function getShrinkElement(element){return getState(element).container.childNodes[0].childNodes[0].childNodes[1];}function addListener(element,listener){var listeners=getState(element).listeners;if(!listeners.push){throw new Error("Cannot add listener to an element that is not detectable.");}getState(element).listeners.push(listener);}function makeDetectable(options,element,callback){if(!callback){callback=element;element=options;options=null;}options=options||{};function debug(){if(options.debug){var args=Array.prototype.slice.call(arguments);args.unshift(idHandler.get(element),"Scroll: ");if(reporter.log.apply){reporter.log.apply(null,args);}else{for(var i=0;i<args.length;i++){reporter.log(args[i]);}}}}function isDetached(element){function isInDocument(element){return element===element.ownerDocument.body||element.ownerDocument.body.contains(element);}if(!isInDocument(element)){return true;}if(getComputedStyle(element)===null){return true;}return false;}function isUnrendered(element){var container=getState(element).container.childNodes[0];var style=getComputedStyle(container);return!style.width||style.width.indexOf("px")===-1;}function getStyle(){var elementStyle=getComputedStyle(element);var style={};style.position=elementStyle.position;style.width=element.offsetWidth;style.height=element.offsetHeight;style.top=elementStyle.top;style.right=elementStyle.right;style.bottom=elementStyle.bottom;style.left=elementStyle.left;style.widthCSS=elementStyle.width;style.heightCSS=elementStyle.height;return style;}function storeStartSize(){var style=getStyle();getState(element).startSize={width:style.width,height:style.height};debug("Element start size",getState(element).startSize);}function initListeners(){getState(element).listeners=[];}function storeStyle(){debug("storeStyle invoked.");if(!getState(element)){debug("Aborting because element has been uninstalled");return;}var style=getStyle();getState(element).style=style;}function storeCurrentSize(element,width,height){getState(element).lastWidth=width;getState(element).lastHeight=height;}function getExpandChildElement(element){return getExpandElement(element).childNodes[0];}function getWidthOffset(){return 2*scrollbarSizes.width+1;}function getHeightOffset(){return 2*scrollbarSizes.height+1;}function getExpandWidth(width){return width+10+getWidthOffset();}function getExpandHeight(height){return height+10+getHeightOffset();}function getShrinkWidth(width){return width*2+getWidthOffset();}function getShrinkHeight(height){return height*2+getHeightOffset();}function positionScrollbars(element,width,height){var expand=getExpandElement(element);var shrink=getShrinkElement(element);var expandWidth=getExpandWidth(width);var expandHeight=getExpandHeight(height);var shrinkWidth=getShrinkWidth(width);var shrinkHeight=getShrinkHeight(height);expand.scrollLeft=expandWidth;expand.scrollTop=expandHeight;shrink.scrollLeft=shrinkWidth;shrink.scrollTop=shrinkHeight;}function injectContainerElement(){var container=getState(element).container;if(!container){container=document.createElement("div");container.className=detectionContainerClass;container.style.cssText="visibility: hidden; display: inline; width: 0px; height: 0px; z-index: -1; overflow: hidden; margin: 0; padding: 0;";getState(element).container=container;addAnimationClass(container);element.appendChild(container);var onAnimationStart=function(){getState(element).onRendered&&getState(element).onRendered();};addEvent(container,"animationstart",onAnimationStart);getState(element).onAnimationStart=onAnimationStart;}return container;}function injectScrollElements(){function alterPositionStyles(){var style=getState(element).style;if(style.position==="static"){element.style.position="relative";var removeRelativeStyles=function(reporter,element,style,property){function getNumericalValue(value){return value.replace(/[^-\d\.]/g,"");}var value=style[property];if(value!=="auto"&&getNumericalValue(value)!=="0"){reporter.warn("An element that is positioned static has style."+property+"="+value+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+property+" will be set to 0. Element: ",element);element.style[property]=0;}};removeRelativeStyles(reporter,element,style,"top");removeRelativeStyles(reporter,element,style,"right");removeRelativeStyles(reporter,element,style,"bottom");removeRelativeStyles(reporter,element,style,"left");}}function getLeftTopBottomRightCssText(left,top,bottom,right){left=!left?"0":left+"px";top=!top?"0":top+"px";bottom=!bottom?"0":bottom+"px";right=!right?"0":right+"px";return"left: "+left+"; top: "+top+"; right: "+right+"; bottom: "+bottom+";";}debug("Injecting elements");if(!getState(element)){debug("Aborting because element has been uninstalled");return;}alterPositionStyles();var rootContainer=getState(element).container;if(!rootContainer){rootContainer=injectContainerElement();}var scrollbarWidth=scrollbarSizes.width;var scrollbarHeight=scrollbarSizes.height;var containerContainerStyle="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; width: 100%; height: 100%; left: 0px; top: 0px;";var containerStyle="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; "+getLeftTopBottomRightCssText(-(1+scrollbarWidth),-(1+scrollbarHeight),-scrollbarHeight,-scrollbarWidth);var expandStyle="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;";var shrinkStyle="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;";var expandChildStyle="position: absolute; left: 0; top: 0;";var shrinkChildStyle="position: absolute; width: 200%; height: 200%;";var containerContainer=document.createElement("div");var container=document.createElement("div");var expand=document.createElement("div");var expandChild=document.createElement("div");var shrink=document.createElement("div");var shrinkChild=document.createElement("div");containerContainer.dir="ltr";containerContainer.style.cssText=containerContainerStyle;containerContainer.className=detectionContainerClass;container.className=detectionContainerClass;container.style.cssText=containerStyle;expand.style.cssText=expandStyle;expandChild.style.cssText=expandChildStyle;shrink.style.cssText=shrinkStyle;shrinkChild.style.cssText=shrinkChildStyle;expand.appendChild(expandChild);shrink.appendChild(shrinkChild);container.appendChild(expand);container.appendChild(shrink);containerContainer.appendChild(container);rootContainer.appendChild(containerContainer);function onExpandScroll(){getState(element).onExpand&&getState(element).onExpand();}function onShrinkScroll(){getState(element).onShrink&&getState(element).onShrink();}addEvent(expand,"scroll",onExpandScroll);addEvent(shrink,"scroll",onShrinkScroll);getState(element).onExpandScroll=onExpandScroll;getState(element).onShrinkScroll=onShrinkScroll;}function registerListenersAndPositionElements(){function updateChildSizes(element,width,height){var expandChild=getExpandChildElement(element);var expandWidth=getExpandWidth(width);var expandHeight=getExpandHeight(height);expandChild.style.width=expandWidth+"px";expandChild.style.height=expandHeight+"px";}function updateDetectorElements(done){var width=element.offsetWidth;var height=element.offsetHeight;debug("Storing current size",width,height);storeCurrentSize(element,width,height);batchProcessor.add(0,function performUpdateChildSizes(){if(!getState(element)){debug("Aborting because element has been uninstalled");return;}if(!areElementsInjected()){debug("Aborting because element container has not been initialized");return;}if(options.debug){var w=element.offsetWidth;var h=element.offsetHeight;if(w!==width||h!==height){reporter.warn(idHandler.get(element),"Scroll: Size changed before updating detector elements.");}}updateChildSizes(element,width,height);});batchProcessor.add(1,function updateScrollbars(){if(!getState(element)){debug("Aborting because element has been uninstalled");return;}if(!areElementsInjected()){debug("Aborting because element container has not been initialized");return;}positionScrollbars(element,width,height);});if(done){batchProcessor.add(2,function(){if(!getState(element)){debug("Aborting because element has been uninstalled");return;}if(!areElementsInjected()){debug("Aborting because element container has not been initialized");return;}done();});}}function areElementsInjected(){return!!getState(element).container;}function notifyListenersIfNeeded(){function isFirstNotify(){return getState(element).lastNotifiedWidth===undefined;}debug("notifyListenersIfNeeded invoked");var state=getState(element);if(isFirstNotify()&&state.lastWidth===state.startSize.width&&state.lastHeight===state.startSize.height){return debug("Not notifying: Size is the same as the start size, and there has been no notification yet.");}if(state.lastWidth===state.lastNotifiedWidth&&state.lastHeight===state.lastNotifiedHeight){return debug("Not notifying: Size already notified");}debug("Current size not notified, notifying...");state.lastNotifiedWidth=state.lastWidth;state.lastNotifiedHeight=state.lastHeight;forEach(getState(element).listeners,function(listener){listener(element);});}function handleRender(){debug("startanimation triggered.");if(isUnrendered(element)){debug("Ignoring since element is still unrendered...");return;}debug("Element rendered.");var expand=getExpandElement(element);var shrink=getShrinkElement(element);if(expand.scrollLeft===0||expand.scrollTop===0||shrink.scrollLeft===0||shrink.scrollTop===0){debug("Scrollbars out of sync. Updating detector elements...");updateDetectorElements(notifyListenersIfNeeded);}}function handleScroll(){debug("Scroll detected.");if(isUnrendered(element)){debug("Scroll event fired while unrendered. Ignoring...");return;}var width=element.offsetWidth;var height=element.offsetHeight;if(width!==getState(element).lastWidth||height!==getState(element).lastHeight){debug("Element size changed.");updateDetectorElements(notifyListenersIfNeeded);}else{debug("Element size has not changed ("+width+"x"+height+").");}}debug("registerListenersAndPositionElements invoked.");if(!getState(element)){debug("Aborting because element has been uninstalled");return;}getState(element).onRendered=handleRender;getState(element).onExpand=handleScroll;getState(element).onShrink=handleScroll;var style=getState(element).style;updateChildSizes(element,style.width,style.height);}function finalizeDomMutation(){debug("finalizeDomMutation invoked.");if(!getState(element)){debug("Aborting because element has been uninstalled");return;}var style=getState(element).style;storeCurrentSize(element,style.width,style.height);positionScrollbars(element,style.width,style.height);}function ready(){callback(element);}function install(){debug("Installing...");initListeners();storeStartSize();batchProcessor.add(0,storeStyle);batchProcessor.add(1,injectScrollElements);batchProcessor.add(2,registerListenersAndPositionElements);batchProcessor.add(3,finalizeDomMutation);batchProcessor.add(4,ready);}debug("Making detectable...");if(isDetached(element)){debug("Element is detached");injectContainerElement();debug("Waiting until element is attached...");getState(element).onRendered=function(){debug("Element is now attached");install();};}else{install();}}function uninstall(element){var state=getState(element);if(!state){return;}state.onExpandScroll&&removeEvent(getExpandElement(element),"scroll",state.onExpandScroll);state.onShrinkScroll&&removeEvent(getShrinkElement(element),"scroll",state.onShrinkScroll);state.onAnimationStart&&removeEvent(state.container,"animationstart",state.onAnimationStart);state.container&&element.removeChild(state.container);}return{makeDetectable:makeDetectable,addListener:addListener,uninstall:uninstall};};

/***/ }),
/* 294 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var browserDetector=__webpack_require__(95);module.exports=function(options){options=options||{};var reporter=options.reporter;var batchProcessor=options.batchProcessor;var getState=options.stateHandler.getState;if(!reporter){throw new Error("Missing required dependency: reporter.");}function addListener(element,listener){if(!getObject(element)){throw new Error("Element is not detectable by this strategy.");}function listenerProxy(){listener(element);}if(browserDetector.isIE(8)){getState(element).object={proxy:listenerProxy};element.attachEvent("onresize",listenerProxy);}else{var object=getObject(element);object.contentDocument.defaultView.addEventListener("resize",listenerProxy);}}function makeDetectable(options,element,callback){if(!callback){callback=element;element=options;options=null;}options=options||{};var debug=options.debug;function injectObject(element,callback){var OBJECT_STYLE="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; padding: 0; margin: 0; opacity: 0; z-index: -1000; pointer-events: none;";var positionCheckPerformed=false;var style=window.getComputedStyle(element);var width=element.offsetWidth;var height=element.offsetHeight;getState(element).startSize={width:width,height:height};function mutateDom(){function alterPositionStyles(){if(style.position==="static"){element.style.position="relative";var removeRelativeStyles=function(reporter,element,style,property){function getNumericalValue(value){return value.replace(/[^-\d\.]/g,"");}var value=style[property];if(value!=="auto"&&getNumericalValue(value)!=="0"){reporter.warn("An element that is positioned static has style."+property+"="+value+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+property+" will be set to 0. Element: ",element);element.style[property]=0;}};removeRelativeStyles(reporter,element,style,"top");removeRelativeStyles(reporter,element,style,"right");removeRelativeStyles(reporter,element,style,"bottom");removeRelativeStyles(reporter,element,style,"left");}}function onObjectLoad(){if(!positionCheckPerformed){alterPositionStyles();}function getDocument(element,callback){if(!element.contentDocument){setTimeout(function checkForObjectDocument(){getDocument(element,callback);},100);return;}callback(element.contentDocument);}var objectElement=this;getDocument(objectElement,function onObjectDocumentReady(objectDocument){callback(element);});}if(style.position!==""){alterPositionStyles(style);positionCheckPerformed=true;}var object=document.createElement("object");object.style.cssText=OBJECT_STYLE;object.tabIndex=-1;object.type="text/html";object.onload=onObjectLoad;if(!browserDetector.isIE()){object.data="about:blank";}element.appendChild(object);getState(element).object=object;if(browserDetector.isIE()){object.data="about:blank";}}if(batchProcessor){batchProcessor.add(mutateDom);}else{mutateDom();}}if(browserDetector.isIE(8)){callback(element);}else{injectObject(element,callback);}}function getObject(element){return getState(element).object;}function uninstall(element){if(browserDetector.isIE(8)){element.detachEvent("onresize",getState(element).object.proxy);}else{element.removeChild(getObject(element));}delete getState(element).object;}return{makeDetectable:makeDetectable,addListener:addListener,uninstall:uninstall};};

/***/ }),
/* 295 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var prop="_erd";function initState(element){element[prop]={};return getState(element);}function getState(element){return element[prop];}function cleanState(element){delete element[prop];}module.exports={initState:initState,getState:getState,cleanState:cleanState};

/***/ }),
/* 296 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var utils=module.exports={};utils.getOption=getOption;function getOption(options,name,defaultValue){var value=options[name];if((value===undefined||value===null)&&defaultValue!==undefined){return defaultValue;}return value;}

/***/ }),
/* 297 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var utils=__webpack_require__(296);module.exports=function batchProcessorMaker(options){options=options||{};var reporter=options.reporter;var asyncProcess=utils.getOption(options,"async",true);var autoProcess=utils.getOption(options,"auto",true);if(autoProcess&&!asyncProcess){reporter&&reporter.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true.");asyncProcess=true;}var batch=Batch();var asyncFrameHandler;var isProcessing=false;function addFunction(level,fn){if(!isProcessing&&autoProcess&&asyncProcess&&batch.size()===0){processBatchAsync();}batch.add(level,fn);}function processBatch(){isProcessing=true;while(batch.size()){var processingBatch=batch;batch=Batch();processingBatch.process();}isProcessing=false;}function forceProcessBatch(localAsyncProcess){if(isProcessing){return;}if(localAsyncProcess===undefined){localAsyncProcess=asyncProcess;}if(asyncFrameHandler){cancelFrame(asyncFrameHandler);asyncFrameHandler=null;}if(localAsyncProcess){processBatchAsync();}else{processBatch();}}function processBatchAsync(){asyncFrameHandler=requestFrame(processBatch);}function cancelFrame(listener){var cancel=clearTimeout;return cancel(listener);}function requestFrame(callback){var raf=function(fn){return setTimeout(fn,0);};return raf(callback);}return{add:addFunction,force:forceProcessBatch};};function Batch(){var batch={};var size=0;var topLevel=0;var bottomLevel=0;function add(level,fn){if(!fn){fn=level;level=0;}if(level>topLevel){topLevel=level;}else if(level<bottomLevel){bottomLevel=level;}if(!batch[level]){batch[level]=[];}batch[level].push(fn);size++;}function process(){for(var level=bottomLevel;level<=topLevel;level++){var fns=batch[level];for(var i=0;i<fns.length;i++){var fn=fns[i];fn();}}}function getSize(){return size;}return{add:add,process:process,size:getSize};}

/***/ }),
/* 298 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
module.exports=function(quiet){function noop(){}var reporter={log:noop,warn:noop,error:noop};if(!quiet&&window.console){var attachFunction=function(reporter,name){reporter[name]=function reporterProxy(){var f=console[name];if(f.apply){f.apply(console,arguments);}else{for(var i=0;i<arguments.length;i++){f(arguments[i]);}}};};attachFunction(reporter,"log");attachFunction(reporter,"warn");attachFunction(reporter,"error");}return reporter;};

/***/ }),
/* 299 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
module.exports=function(options){var idGenerator=options.idGenerator;var getState=options.stateHandler.getState;function getId(element){var state=getState(element);if(state&&state.id!==undefined){return state.id;}return null;}function setId(element){var state=getState(element);if(!state){throw new Error("setId required the element to have a resize detection state.");}var id=idGenerator.generate();state.id=id;return id;}return{get:getId,set:setId};};

/***/ }),
/* 300 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
module.exports=function(){var idCount=1;function generate(){return idCount++;}return{generate:generate};};

/***/ }),
/* 301 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
module.exports=function(idHandler){var eventListeners={};function getListeners(element){var id=idHandler.get(element);if(id===undefined){return[];}return eventListeners[id]||[];}function addListener(element,listener){var id=idHandler.get(element);if(!eventListeners[id]){eventListeners[id]=[];}eventListeners[id].push(listener);}function removeListener(element,listener){var listeners=getListeners(element);for(var i=0,len=listeners.length;i<len;++i){if(listeners[i]===listener){listeners.splice(i,1);break;}}}function removeAllListeners(element){var listeners=getListeners(element);if(!listeners){return;}listeners.length=0;}return{get:getListeners,add:addListener,removeListener:removeListener,removeAllListeners:removeAllListeners};};

/***/ }),
/* 302 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
module.exports=function(options){var getState=options.stateHandler.getState;function isDetectable(element){var state=getState(element);return state&&!!state.isDetectable;}function markAsDetectable(element){getState(element).isDetectable=true;}function isBusy(element){return!!getState(element).busy;}function markBusy(element,busy){getState(element).busy=!!busy;}return{isDetectable:isDetectable,markAsDetectable:markAsDetectable,isBusy:isBusy,markBusy:markBusy};};

/***/ }),
/* 303 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var forEach=__webpack_require__(96).forEach;var elementUtilsMaker=__webpack_require__(302);var listenerHandlerMaker=__webpack_require__(301);var idGeneratorMaker=__webpack_require__(300);var idHandlerMaker=__webpack_require__(299);var reporterMaker=__webpack_require__(298);var browserDetector=__webpack_require__(95);var batchProcessorMaker=__webpack_require__(297);var stateHandler=__webpack_require__(295);var objectStrategyMaker=__webpack_require__(294);var scrollStrategyMaker=__webpack_require__(293);function isCollection(obj){return Array.isArray(obj)||obj.length!==undefined;}function toArray(collection){if(!Array.isArray(collection)){var array=[];forEach(collection,function(obj){array.push(obj);});return array;}else{return collection;}}function isElement(obj){return obj&&obj.nodeType===1;}module.exports=function(options){options=options||{};var idHandler;if(options.idHandler){idHandler={get:function(element){return options.idHandler.get(element,true);},set:options.idHandler.set};}else{var idGenerator=idGeneratorMaker();var defaultIdHandler=idHandlerMaker({idGenerator:idGenerator,stateHandler:stateHandler});idHandler=defaultIdHandler;}var reporter=options.reporter;if(!reporter){var quiet=reporter===false;reporter=reporterMaker(quiet);}var batchProcessor=getOption(options,"batchProcessor",batchProcessorMaker({reporter:reporter}));var globalOptions={};globalOptions.callOnAdd=!!getOption(options,"callOnAdd",true);globalOptions.debug=!!getOption(options,"debug",false);var eventListenerHandler=listenerHandlerMaker(idHandler);var elementUtils=elementUtilsMaker({stateHandler:stateHandler});var detectionStrategy;var desiredStrategy=getOption(options,"strategy","object");var strategyOptions={reporter:reporter,batchProcessor:batchProcessor,stateHandler:stateHandler,idHandler:idHandler};if(desiredStrategy==="scroll"){if(browserDetector.isLegacyOpera()){reporter.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy.");desiredStrategy="object";}else if(browserDetector.isIE(9)){reporter.warn("Scroll strategy is not supported on IE9. Changing to object strategy.");desiredStrategy="object";}}if(desiredStrategy==="scroll"){detectionStrategy=scrollStrategyMaker(strategyOptions);}else if(desiredStrategy==="object"){detectionStrategy=objectStrategyMaker(strategyOptions);}else{throw new Error("Invalid strategy name: "+desiredStrategy);}var onReadyCallbacks={};function listenTo(options,elements,listener){function onResizeCallback(element){var listeners=eventListenerHandler.get(element);forEach(listeners,function callListenerProxy(listener){listener(element);});}function addListener(callOnAdd,element,listener){eventListenerHandler.add(element,listener);if(callOnAdd){listener(element);}}if(!listener){listener=elements;elements=options;options={};}if(!elements){throw new Error("At least one element required.");}if(!listener){throw new Error("Listener required.");}if(isElement(elements)){elements=[elements];}else if(isCollection(elements)){elements=toArray(elements);}else{return reporter.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");}var elementsReady=0;var callOnAdd=getOption(options,"callOnAdd",globalOptions.callOnAdd);var onReadyCallback=getOption(options,"onReady",function noop(){});var debug=getOption(options,"debug",globalOptions.debug);forEach(elements,function attachListenerToElement(element){if(!stateHandler.getState(element)){stateHandler.initState(element);idHandler.set(element);}var id=idHandler.get(element);debug&&reporter.log("Attaching listener to element",id,element);if(!elementUtils.isDetectable(element)){debug&&reporter.log(id,"Not detectable.");if(elementUtils.isBusy(element)){debug&&reporter.log(id,"System busy making it detectable");addListener(callOnAdd,element,listener);onReadyCallbacks[id]=onReadyCallbacks[id]||[];onReadyCallbacks[id].push(function onReady(){elementsReady++;if(elementsReady===elements.length){onReadyCallback();}});return;}debug&&reporter.log(id,"Making detectable...");elementUtils.markBusy(element,true);return detectionStrategy.makeDetectable({debug:debug},element,function onElementDetectable(element){debug&&reporter.log(id,"onElementDetectable");if(stateHandler.getState(element)){elementUtils.markAsDetectable(element);elementUtils.markBusy(element,false);detectionStrategy.addListener(element,onResizeCallback);addListener(callOnAdd,element,listener);var state=stateHandler.getState(element);if(state&&state.startSize){var width=element.offsetWidth;var height=element.offsetHeight;if(state.startSize.width!==width||state.startSize.height!==height){onResizeCallback(element);}}if(onReadyCallbacks[id]){forEach(onReadyCallbacks[id],function(callback){callback();});}}else{debug&&reporter.log(id,"Element uninstalled before being detectable.");}delete onReadyCallbacks[id];elementsReady++;if(elementsReady===elements.length){onReadyCallback();}});}debug&&reporter.log(id,"Already detecable, adding listener.");addListener(callOnAdd,element,listener);elementsReady++;});if(elementsReady===elements.length){onReadyCallback();}}function uninstall(elements){if(!elements){return reporter.error("At least one element is required.");}if(isElement(elements)){elements=[elements];}else if(isCollection(elements)){elements=toArray(elements);}else{return reporter.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");}forEach(elements,function(element){eventListenerHandler.removeAllListeners(element);detectionStrategy.uninstall(element);stateHandler.cleanState(element);});}return{listenTo:listenTo,removeListener:eventListenerHandler.removeListener,removeAllListeners:eventListenerHandler.removeAllListeners,uninstall:uninstall};};function getOption(options,name,defaultValue){var value=options[name];if((value===undefined||value===null)&&defaultValue!==undefined){return defaultValue;}return value;}

/***/ }),
/* 304 */
/***/ (function(module, exports, __webpack_require__) {

var isArrayLikeObject=__webpack_require__(33);function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[];}module.exports=castArrayLikeObject;

/***/ }),
/* 305 */
/***/ (function(module, exports, __webpack_require__) {

var SetCache=__webpack_require__(42),arrayIncludes=__webpack_require__(66),arrayIncludesWith=__webpack_require__(65),arrayMap=__webpack_require__(15),baseUnary=__webpack_require__(57),cacheHas=__webpack_require__(41);var nativeMin=Math.min;function baseIntersection(arrays,iteratee,comparator){var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=Infinity,result=[];while(othIndex--){var array=arrays[othIndex];if(othIndex&&iteratee){array=arrayMap(array,baseUnary(iteratee));}maxLength=nativeMin(array.length,maxLength);caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined;}array=arrays[0];var index=-1,seen=caches[0];outer:while(++index<length&&result.length<maxLength){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){othIndex=othLength;while(--othIndex){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator))){continue outer;}}if(seen){seen.push(computed);}result.push(value);}}return result;}module.exports=baseIntersection;

/***/ }),
/* 306 */
/***/ (function(module, exports) {

function stubArray(){return[];}module.exports=stubArray;

/***/ }),
/* 307 */
/***/ (function(module, exports) {

function noop(){}module.exports=noop;

/***/ }),
/* 308 */
/***/ (function(module, exports) {

function baseGt(value,other){return value>other;}module.exports=baseGt;

/***/ }),
/* 309 */
/***/ (function(module, exports, __webpack_require__) {

var isSymbol=__webpack_require__(53);function baseExtremum(array,iteratee,comparator){var index=-1,length=array.length;while(++index<length){var value=array[index],current=iteratee(value);if(current!=null&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed))){var computed=current,result=value;}}return result;}module.exports=baseExtremum;

/***/ }),
/* 310 */
/***/ (function(module, exports) {

function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index;}}return-1;}module.exports=baseFindIndex;

/***/ }),
/* 311 */
/***/ (function(module, exports, __webpack_require__) {

var baseFindIndex=__webpack_require__(310),baseIteratee=__webpack_require__(5),toInteger=__webpack_require__(25);var nativeMax=Math.max;function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1;}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0);}return baseFindIndex(array,baseIteratee(predicate,3),index);}module.exports=findIndex;

/***/ }),
/* 312 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee=__webpack_require__(5),isArrayLike=__webpack_require__(67),keys=__webpack_require__(51);function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=baseIteratee(predicate,3);collection=keys(collection);predicate=function(key){return iteratee(iterable[key],key,iterable);};}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined;};}module.exports=createFind;

/***/ }),
/* 313 */
/***/ (function(module, exports) {

function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false;}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object));};}module.exports=matchesStrictComparable;

/***/ }),
/* 314 */
/***/ (function(module, exports, __webpack_require__) {

var isObject=__webpack_require__(9);function isStrictComparable(value){return value===value&&!isObject(value);}module.exports=isStrictComparable;

/***/ }),
/* 315 */
/***/ (function(module, exports, __webpack_require__) {

var baseGet=__webpack_require__(77);function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result;}module.exports=get;

/***/ }),
/* 316 */
/***/ (function(module, exports, __webpack_require__) {

var baseIsEqual=__webpack_require__(99),get=__webpack_require__(315),hasIn=__webpack_require__(100),isKey=__webpack_require__(115),isStrictComparable=__webpack_require__(314),matchesStrictComparable=__webpack_require__(313),toKey=__webpack_require__(24);var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue);}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG);};}module.exports=baseMatchesProperty;

/***/ }),
/* 317 */
/***/ (function(module, exports) {

function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value;}}return result;}module.exports=arrayFilter;

/***/ }),
/* 318 */
/***/ (function(module, exports) {

function baseClamp(number,lower,upper){if(number===number){if(upper!==undefined){number=number<=upper?number:upper;}if(lower!==undefined){number=number>=lower?number:lower;}}return number;}module.exports=baseClamp;

/***/ }),
/* 319 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 320 */
/***/ (function(module, exports) {

var nativeFloor=Math.floor,nativeRandom=Math.random;function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1));}module.exports=baseRandom;

/***/ }),
/* 321 */
/***/ (function(module, exports) {

var FUNC_ERROR_TEXT='Expected a function';function negate(predicate){if(typeof predicate!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2]);}return!predicate.apply(this,args);};}module.exports=negate;

/***/ }),
/* 322 */
/***/ (function(module, exports, __webpack_require__) {

var getAllKeys=__webpack_require__(110);var COMPARE_PARTIAL_FLAG=1;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false;}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false;}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other;}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break;}skipCtor||(skipCtor=key=='constructor');}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&'constructor'in object&&'constructor'in other&&!(typeof objCtor=='function'&&objCtor instanceof objCtor&&typeof othCtor=='function'&&othCtor instanceof othCtor)){result=false;}}stack['delete'](object);stack['delete'](other);return result;}module.exports=equalObjects;

/***/ }),
/* 323 */
/***/ (function(module, exports) {

function eq(value,other){return value===other||value!==value&&other!==other;}module.exports=eq;

/***/ }),
/* 324 */
/***/ (function(module, exports) {

function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true;}}return false;}module.exports=arraySome;

/***/ }),
/* 325 */
/***/ (function(module, exports, __webpack_require__) {

var SetCache=__webpack_require__(42),arraySome=__webpack_require__(324),cacheHas=__webpack_require__(41);var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false;}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other;}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache():undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);}if(compared!==undefined){if(compared){continue;}result=false;break;}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex);}})){result=false;break;}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break;}}stack['delete'](array);stack['delete'](other);return result;}module.exports=equalArrays;

/***/ }),
/* 326 */
/***/ (function(module, exports, __webpack_require__) {

var Stack=__webpack_require__(70),equalArrays=__webpack_require__(325),equalByTag=__webpack_require__(323),equalObjects=__webpack_require__(322),getTag=__webpack_require__(45),isArray=__webpack_require__(6),isBuffer=__webpack_require__(35),isTypedArray=__webpack_require__(48);var COMPARE_PARTIAL_FLAG=1;var argsTag='[object Arguments]',arrayTag='[object Array]',objectTag='[object Object]';var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false;}objIsArr=true;objIsObj=false;}if(isSameTag&&!objIsObj){stack||(stack=new Stack());return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,'__wrapped__'),othIsWrapped=othIsObj&&hasOwnProperty.call(other,'__wrapped__');if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack());return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack);}}if(!isSameTag){return false;}stack||(stack=new Stack());return equalObjects(object,other,bitmask,customizer,equalFunc,stack);}module.exports=baseIsEqualDeep;

/***/ }),
/* 327 */
/***/ (function(module, exports, __webpack_require__) {

var isSymbol=__webpack_require__(53);function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=value===null,valIsReflexive=value===value,valIsSymbol=isSymbol(value);var othIsDefined=other!==undefined,othIsNull=other===null,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive){return 1;}if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive){return-1;}}return 0;}module.exports=compareAscending;

/***/ }),
/* 328 */
/***/ (function(module, exports, __webpack_require__) {

var compareAscending=__webpack_require__(327);function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result;}var order=orders[index];return result*(order=='desc'?-1:1);}}return object.index-other.index;}module.exports=compareMultiple;

/***/ }),
/* 329 */
/***/ (function(module, exports) {

function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value;}return array;}module.exports=baseSortBy;

/***/ }),
/* 330 */
/***/ (function(module, exports) {

function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array);}return result;}module.exports=arrayMap;

/***/ }),
/* 331 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap=__webpack_require__(15),baseIteratee=__webpack_require__(5),baseMap=__webpack_require__(330),baseSortBy=__webpack_require__(329),baseUnary=__webpack_require__(57),compareMultiple=__webpack_require__(328),identity=__webpack_require__(127);function baseOrderBy(collection,iteratees,orders){var index=-1;iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(baseIteratee));var result=baseMap(collection,function(value,key,collection){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value);});return{'criteria':criteria,'index':++index,'value':value};});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders);});}module.exports=baseOrderBy;

/***/ }),
/* 332 */
/***/ (function(module, exports) {

function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array);}return result;}module.exports=arrayMap;

/***/ }),
/* 333 */
/***/ (function(module, exports) {



var guiders = function ($) {
  var guiders = $.guiders = {};

  guiders.version = "2.0.0";

  guiders._defaultSettings = {
    attachTo: null,
    autoFocus: false,
    buttons: [{ name: "Close" }],
    buttonCustomHTML: "",
    classString: null,
    closeOnEscape: false,
    description: "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
    highlight: null,
    isHashable: true,
    maxWidth: null,
    offset: {
      top: null,
      left: null
    },
    onClose: null,
    onHide: null,
    onShow: null,
    overlay: false,
    position: 0,
    shouldSkip: function () {},
    title: "Sample title goes here",
    width: 400,
    xButton: false };

  guiders._htmlSkeleton = ["<div class='guider'>", "  <div class='guiders_content'>", "    <h1 class='guiders_title'></h1>", "    <div class='guiders_close'></div>", "    <p class='guiders_description'></p>", "    <div class='guiders_buttons_container'>", "    </div>", "  </div>", "  <div class='guiders_arrow'>", "  </div>", "</div>"].join("");

  guiders._arrowSize = 42;
  guiders._backButtonTitle = "Back";
  guiders._buttonAttributes = { "href": "javascript:void(0);" };
  guiders._buttonClassName = "guiders_button";
  guiders._buttonClickEvent = "click touch";
  guiders._buttonElement = "<a></a>";
  guiders._closeButtonTitle = "Close";
  guiders._currentGuiderID = null;
  guiders._fixedOrAbsolute = "fixed";
  guiders._guiders = {};
  guiders._lastCreatedGuiderID = null;
  guiders._nextButtonTitle = "Next";
  guiders._offsetNameMapping = {
    "topLeft": 11,
    "top": 12,
    "topRight": 1,
    "rightTop": 2,
    "right": 3,
    "rightBottom": 4,
    "bottomRight": 5,
    "bottom": 6,
    "bottomLeft": 7,
    "leftBottom": 8,
    "left": 9,
    "leftTop": 10
  };
  guiders._windowHeight = 0;

  var ieBrowserMatch = navigator.userAgent.match(/MSIE\s([\d.]+)/);
  guiders._isIE = ieBrowserMatch && ieBrowserMatch.length > 1;
  guiders._ieVersion = ieBrowserMatch && ieBrowserMatch.length > 1 ? Number(ieBrowserMatch[1]) : -1;

  guiders._addButtons = function (myGuider) {
    var guiderButtonsContainer = myGuider.elem.find(".guiders_buttons_container");

    if (myGuider.buttons === null || myGuider.buttons.length === 0) {
      guiderButtonsContainer.remove();
      return;
    }

    for (var i = myGuider.buttons.length - 1; i >= 0; i--) {
      var thisButton = myGuider.buttons[i];
      var thisButtonElem = $(guiders._buttonElement, $.extend({ "class": guiders._buttonClassName, "html": thisButton.name }, guiders._buttonAttributes, thisButton.html || {}));

      if (typeof thisButton.classString !== "undefined" && thisButton.classString !== null) {
        thisButtonElem.addClass(thisButton.classString);
      }

      guiderButtonsContainer.append(thisButtonElem);

      var thisButtonName = thisButton.name.toLowerCase();
      if (thisButton.onclick) {
        thisButtonElem.bind(guiders._buttonClickEvent, thisButton.onclick);
      } else {
        switch (thisButtonName) {
          case guiders._closeButtonTitle.toLowerCase():
            thisButtonElem.bind(guiders._buttonClickEvent, function () {
              guiders.hideAll();
              if (myGuider.onClose) {
                myGuider.onClose(myGuider, false);
              }
              $("body").trigger("guidersClose");
            });
            break;
          case guiders._nextButtonTitle.toLowerCase():
            thisButtonElem.bind(guiders._buttonClickEvent, function () {
              !myGuider.elem.data("locked") && guiders.next();
            });
            break;
          case guiders._backButtonTitle.toLowerCase():
            thisButtonElem.bind(guiders._buttonClickEvent, function () {
              !myGuider.elem.data("locked") && guiders.prev();
            });
            break;
        }
      }
    }

    if (myGuider.buttonCustomHTML !== "") {
      var myCustomHTML = $(myGuider.buttonCustomHTML);
      myGuider.elem.find(".guiders_buttons_container").append(myCustomHTML);
    }

    if (myGuider.buttons.length === 0) {
      guiderButtonsContainer.remove();
    }
  };

  guiders._addXButton = function (myGuider) {
    var xButtonContainer = myGuider.elem.find(".guiders_close");
    var xButton = $("<div></div>", {
      "class": "guiders_x_button",
      "role": "button"
    });
    xButtonContainer.append(xButton);
    xButton.click(function () {
      guiders.hideAll();
      if (myGuider.onClose) {
        myGuider.onClose(myGuider, true);
      }
      $("body").trigger("guidersClose");
    });
  };

  guiders._attach = function (myGuider) {
    if (typeof myGuider !== 'object') {
      return;
    }

    var attachTo = $(myGuider.attachTo);

    var myHeight = myGuider.elem.innerHeight();
    var myWidth = myGuider.elem.innerWidth();

    if (myGuider.position === 0 || attachTo.length === 0) {
      var fixedOrAbsolute = "fixed";
      if (guiders._isIE && guiders._ieVersion < 9) {
        fixedOrAbsolute = "absolute";
      }
      myGuider.elem.css("position", fixedOrAbsolute);
      myGuider.elem.css("top", ($(window).height() - myHeight) / 3 + "px");
      myGuider.elem.css("left", ($(window).width() - myWidth) / 2 + "px");
      return;
    }

    var base = attachTo.offset();
    var top = base.top;
    var left = base.left;

    var topMarginOfBody = $("body").outerHeight(true) - $("body").outerHeight(false);
    top -= topMarginOfBody;

    if (guiders._offsetNameMapping[myGuider.position]) {
      myGuider.position = guiders._offsetNameMapping[myGuider.position];
    }

    var attachToHeight = attachTo.innerHeight();
    var attachToWidth = attachTo.innerWidth();
    var bufferOffset = 0.9 * guiders._arrowSize;

    var offsetMap = {
      1: [-bufferOffset - myHeight, attachToWidth - myWidth],
      2: [0, bufferOffset + attachToWidth],
      3: [attachToHeight / 2 - myHeight / 2, bufferOffset + attachToWidth],
      4: [attachToHeight - myHeight, bufferOffset + attachToWidth],
      5: [bufferOffset + attachToHeight, attachToWidth - myWidth],
      6: [bufferOffset + attachToHeight, attachToWidth / 2 - myWidth / 2],
      7: [bufferOffset + attachToHeight, 0],
      8: [attachToHeight - myHeight, -myWidth - bufferOffset],
      9: [attachToHeight / 2 - myHeight / 2, -myWidth - bufferOffset],
      10: [0, -myWidth - bufferOffset],
      11: [-bufferOffset - myHeight, 0],
      12: [-bufferOffset - myHeight, attachToWidth / 2 - myWidth / 2]
    };

    var offset = offsetMap[myGuider.position];
    top += offset[0];
    left += offset[1];

    var positionType = "absolute";

    if (attachTo.css("position") === "fixed" && guiders._fixedOrAbsolute === "fixed") {
      positionType = "fixed";
      top -= $(window).scrollTop();
      left -= $(window).scrollLeft();
    }

    if (myGuider.offset.top !== null) {
      top += myGuider.offset.top;
    }
    if (myGuider.offset.left !== null) {
      left += myGuider.offset.left;
    }

    guiders._styleArrow(myGuider);

    myGuider.elem.css({
      "position": positionType,
      "top": top,
      "left": left
    });

    return myGuider;
  };

  guiders._dehighlightElement = function (selector) {
    $(selector).removeClass('guiders_highlight');
  };

  guiders._hideOverlay = function () {
    $("#guiders_overlay").fadeOut("fast");
  };

  guiders._highlightElement = function (selector) {
    $(selector).addClass('guiders_highlight');
  };

  guiders._initializeOverlay = function () {
    if ($("#guiders_overlay").length === 0) {
      $("<div id='guiders_overlay'></div>").hide().appendTo("body");
    }
  };

  guiders._showOverlay = function (myGuider) {
    $("#guiders_overlay").fadeIn("fast", function () {
      if (this.style.removeAttribute) {
        this.style.removeAttribute("filter");
      }
    });
    if (guiders._isIE) {
      $("#guiders_overlay").css("position", "absolute");
    }
  };

  guiders._styleArrow = function (myGuider) {
    var position = myGuider.position || 0;
    if (!position) {
      return;
    }
    var myGuiderArrow = $(myGuider.elem.find(".guiders_arrow"));
    var newClass = {
      1: "guiders_arrow_down",
      2: "guiders_arrow_left",
      3: "guiders_arrow_left",
      4: "guiders_arrow_left",
      5: "guiders_arrow_up",
      6: "guiders_arrow_up",
      7: "guiders_arrow_up",
      8: "guiders_arrow_right",
      9: "guiders_arrow_right",
      10: "guiders_arrow_right",
      11: "guiders_arrow_down",
      12: "guiders_arrow_down"
    };
    myGuiderArrow.addClass(newClass[position]);

    var myHeight = myGuider.elem.innerHeight();
    var myWidth = myGuider.elem.innerWidth();
    var arrowOffset = guiders._arrowSize / 2;
    var positionMap = {
      1: ["right", arrowOffset],
      2: ["top", arrowOffset],
      3: ["top", myHeight / 2 - arrowOffset],
      4: ["bottom", arrowOffset],
      5: ["right", arrowOffset],
      6: ["left", myWidth / 2 - arrowOffset],
      7: ["left", arrowOffset],
      8: ["bottom", arrowOffset],
      9: ["top", myHeight / 2 - arrowOffset],
      10: ["top", arrowOffset],
      11: ["left", arrowOffset],
      12: ["left", myWidth / 2 - arrowOffset]
    };
    var position = positionMap[myGuider.position];
    myGuiderArrow.css(position[0], position[1] + "px");
  };

  guiders._showIfHashed = function (myGuider) {
    var GUIDER_HASH_TAG = "guider=";
    var hashIndex = window.location.hash.indexOf(GUIDER_HASH_TAG);
    if (hashIndex !== -1) {
      var hashGuiderId = window.location.hash.substr(hashIndex + GUIDER_HASH_TAG.length);
      if (myGuider.id.toLowerCase() === hashGuiderId.toLowerCase()) {
        guiders.show(myGuider.id);
      }
    }
  };

  guiders._updatePositionOnResize = function () {
    var _resizing = undefined;
    $(window).resize(function () {
      if (typeof _resizing !== "undefined") {
        clearTimeout(_resizing);
      }
      _resizing = setTimeout(function () {
        _resizing = undefined;
        if (typeof guiders !== "undefined") {
          guiders.reposition();
        }
      }, 20);
    });
  };
  guiders._updatePositionOnResize();

  guiders._unwireEscape = function (myGuider) {
    $(document).unbind("keydown");
  };

  guiders._wireEscape = function (myGuider) {
    $(document).keydown(function (event) {
      if (event.keyCode == 27 || event.which == 27) {
        guiders.hideAll();
        if (myGuider.onClose) {
          myGuider.onClose(myGuider, true);
        }
        $("body").trigger("guidersClose");
        return false;
      }
    });
  };

  guiders.createGuider = function (passedSettings) {
    if (passedSettings === null || passedSettings === undefined) {
      passedSettings = {};
    }

    var myGuider = $.extend({}, guiders._defaultSettings, passedSettings);
    myGuider.id = myGuider.id || "guider_random_" + String(Math.floor(Math.random() * 1000));

    var guiderElement = $("#" + myGuider.id);
    if (!guiderElement.length) {
      guiderElement = $(guiders._htmlSkeleton);
    }

    myGuider.elem = guiderElement;
    if (typeof myGuider.classString !== "undefined" && myGuider.classString !== null) {
      myGuider.elem.addClass(myGuider.classString);
    }

    if (Number(myGuider.width) === myGuider.width) {
      myGuider.width = String(myGuider.width) + "px";
    }
    if (Number(myGuider.maxWidth) === myGuider.maxWidth) {
      myGuider.maxWidth = String(myGuider.maxWidth) + "px";
    }
    myGuider.elem.css("width", myGuider.width);
    myGuider.elem.css("maxWidth", myGuider.maxWidth);

    var guiderTitleContainer = guiderElement.find(".guiders_title");
    guiderTitleContainer.html(myGuider.title);

    guiderElement.find(".guiders_description").html(myGuider.description);

    guiders._addButtons(myGuider);

    if (myGuider.xButton) {
      guiders._addXButton(myGuider);
    }

    guiderElement.hide();
    guiderElement.appendTo("body");
    guiderElement.attr("id", myGuider.id);

    if (typeof myGuider.attachTo !== "undefined" && myGuider !== null) {
      guiders._attach(myGuider);
    }

    guiders._initializeOverlay();

    guiders._guiders[myGuider.id] = myGuider;
    if (guiders._lastCreatedGuiderID != null) {
      myGuider.prev = guiders._lastCreatedGuiderID;
    }
    guiders._lastCreatedGuiderID = myGuider.id;

    if (myGuider.isHashable) {
      guiders._showIfHashed(myGuider);
    }

    return guiders;
  };

  guiders.get = function (id) {
    if (typeof guiders._guiders[id] === "undefined") {
      return null;
    }
    return guiders._guiders[id] || null;
  };

  guiders.getCurrentGuider = function () {
    return guiders._guiders[guiders._currentGuiderID] || null;
  };

  guiders.hideAll = function (omitHidingOverlay, next) {
    next = next || false;

    $(".guider:visible").each(function (index, elem) {
      var myGuider = guiders.get($(elem).attr('id'));
      if (myGuider.onHide) {
        myGuider.onHide(myGuider, next);
      }
    });
    $(".guider").fadeOut("fast");
    var currentGuider = guiders._guiders[guiders._currentGuiderID];
    if (currentGuider && currentGuider.highlight) {
      guiders._dehighlightElement(currentGuider.highlight);
    }
    if (!(typeof omitHidingOverlay !== "undefined" && omitHidingOverlay === true)) {
      guiders._hideOverlay();
    }
    return guiders;
  };

  guiders.next = function () {
    var currentGuider = guiders._guiders[guiders._currentGuiderID];
    if (typeof currentGuider === "undefined") {
      return null;
    }
    currentGuider.elem.data("locked", true);

    var nextGuiderId = currentGuider.next || null;
    if (nextGuiderId !== null && nextGuiderId !== "") {
      var nextGuider = guiders.get(nextGuiderId);
      var omitHidingOverlay = nextGuider.overlay ? true : false;
      guiders.hideAll(omitHidingOverlay, true);
      if (currentGuider && currentGuider.highlight) {
        guiders._dehighlightElement(currentGuider.highlight);
      }

      if (nextGuider.shouldSkip && nextGuider.shouldSkip()) {
        guiders._currentGuiderID = nextGuider.id;
        guiders.next();
        return guiders.getCurrentGuider();
      } else {
        guiders.show(nextGuiderId);
        return guiders.getCurrentGuider();
      }
    }
  };

  guiders.prev = function () {
    var currentGuider = guiders._guiders[guiders._currentGuiderID];
    if (typeof currentGuider === "undefined") {
      return null;
    }
    if (currentGuider.prev === null) {
      return null;
    }

    var prevGuider = guiders._guiders[currentGuider.prev];
    prevGuider.elem.data("locked", true);

    var prevGuiderId = prevGuider.id || null;
    if (prevGuiderId !== null && prevGuiderId !== "") {
      var myGuider = guiders.get(prevGuiderId);
      var omitHidingOverlay = myGuider.overlay ? true : false;
      guiders.hideAll(omitHidingOverlay, true);
      if (prevGuider && prevGuider.highlight) {
        guiders._dehighlightElement(prevGuider.highlight);
      }
      guiders.show(prevGuiderId);
      return myGuider;
    }
  };

  guiders.reposition = function () {
    var currentGuider = guiders._guiders[guiders._currentGuiderID];
    guiders._attach(currentGuider);
  };

  guiders.scrollToCurrent = function () {
    var currentGuider = guiders._guiders[guiders._currentGuiderID];
    if (typeof currentGuider === "undefined") {
      return;
    }

    var windowHeight = guiders._windowHeight;
    var scrollHeight = $(window).scrollTop();
    var guiderOffset = currentGuider.elem.offset();
    var guiderElemHeight = currentGuider.elem.height();

    var scrollToHeight = Math.round(Math.max(guiderOffset.top + guiderElemHeight / 2 - windowHeight / 2, 0));
    window.scrollTo(0, scrollToHeight);
  };

  guiders.show = function (id) {
    if (!id && guiders._lastCreatedGuiderID) {
      id = guiders._lastCreatedGuiderID;
    }

    var myGuider = guiders.get(id);
    if (myGuider.overlay) {
      guiders._showOverlay(myGuider);

      if (myGuider.highlight && myGuider.attachTo) {
        guiders._highlightElement(myGuider.attachTo);
      }
    }

    if (myGuider.closeOnEscape) {
      guiders._wireEscape(myGuider);
    } else {
      guiders._unwireEscape(myGuider);
    }

    if (myGuider.onShow) {
      myGuider.onShow(myGuider);
    }
    guiders._attach(myGuider);
    myGuider.elem.fadeIn("fast").data("locked", false);

    guiders._currentGuiderID = id;

    var windowHeight = guiders._windowHeight = $(window).height();
    var scrollHeight = $(window).scrollTop();
    var guiderOffset = myGuider.elem.offset();
    var guiderElemHeight = myGuider.elem.height();

    var isGuiderBelow = scrollHeight + windowHeight < guiderOffset.top + guiderElemHeight;
    var isGuiderAbove = guiderOffset.top < scrollHeight;

    if (myGuider.autoFocus && (isGuiderBelow || isGuiderAbove)) {
      setTimeout(guiders.scrollToCurrent, 10);
    }

    $(myGuider.elem).trigger("guiders.show");

    return guiders;
  };

  $.fn.guider = function (passedOptions) {
    passedOptions = passedOptions || {};
    var options = $.extend({}, passedOptions);
    options.id = $(this).attr("id");

    var buttons = [];
    $(this).find(".guiders_buttons_container").children().each(function () {
      var buttonOptions = {
        name: $(this).html(),
        classString: $(this).attr("class")
      };
      if ($(this).attr("data-onclick")) {
        var functionName = $(this).attr("data-onclick");
        buttonOptions.onclick = function () {
          window[functionName]();
        };
      }
      $(this).remove();
      buttons.push(buttonOptions);
    });
    options.buttons = buttons;

    title = $(this).find(".guiders_title").html();
    if (title) {
      options.title = title;
    }

    description = $(this).find(".guiders_description").html();
    if (description) {
      options.description = description;
    }

    for (var optionName in guiders._defaultSettings) {
      if (!guiders._defaultSettings.hasOwnProperty(optionName)) {
        continue;
      }

      var optionValue = $(this).attr("data-" + optionName);
      if (optionValue === undefined || optionValue === null) {
        continue;
      }

      if (optionValue == "true") {
        optionValue = true;
      } else if (optionValue == "false") {
        optionValue = false;
      }

      options[optionName] = optionValue;
    }

    guiders.createGuider(options);
    return this;
  };

  return guiders;
}.call(this, jQuery);

/***/ }),
/* 334 */
/***/ (function(module, exports) {



!function ($, pluginName) {

	var defaults = {
		padding: 40,
		triggerClass: pluginName,
		topClass: pluginName + '-top',
		bottomClass: pluginName + '-bottom',
		speed: 3
	};

	function setTimer(data, func) {
		if (data.timer > 0) {
			clearTimeout(data.timer);
			data.timer = 0;
		}
		if (func) {
			data.timer = setInterval(func, $.fx.interval);
		}
	}

	function stopScrolling() {
		var data = $(this).data(pluginName);
		$(data.triggers).remove();
		setTimer(data, null);
		$(this).removeData(pluginName);
		return this;
	}

	$.fn[pluginName] = function (opts) {
		if (opts === 'stop') return this.map(stopScrolling);
		var options = $.extend({}, defaults, opts);
		return this.map(function () {
			var $this = $(this);
			var top = $('<div>').addClass(options.topClass)[0],
			    bottom = $('<div>').addClass(options.bottomClass)[0],
			    triggers = [top, bottom];

			var data = {
				options: options,
				timer: 0,
				top: top,
				bottom: bottom,
				triggers: triggers
			};
			$this.data('edgescroll', data);

			$(triggers).addClass(options.triggerClass).css({
				height: options.padding,
				position: this == window ? 'fixed' : 'absolute'
			});

			$(this == window ? document.body : this).append(triggers);

			$(triggers).hover(function (e) {
				var that = this;
				setTimer(data, function () {
					var delta = (that == top ? -1 : 1) * options.speed;
					$this.scrollTop($this.scrollTop() + delta);
				});
			}, function (e) {
				setTimer(data, null);
			});

			return this;
		});
	};
}(jQuery, 'edgescroll');

/***/ }),
/* 335 */
/***/ (function(module, exports) {

!function(a){function b(a){return String(null===a||void 0===a?"":a);}function c(a){return b(a).replace(i,function(a){return h[a];});}var d={method:"GET",queryParam:"q",searchDelay:300,minChars:1,propertyToSearch:"name",jsonContainer:null,contentType:"json",excludeCurrent:!1,excludeCurrentParameter:"x",prePopulate:null,processPrePopulate:!1,hintText:"Type in a search term",noResultsText:"No results",searchingText:"Searching...",deleteText:"&#215;",animateDropdown:!0,placeholder:null,theme:null,zindex:999,resultsLimit:null,enableHTML:!1,resultsFormatter:function(a){var b=a[this.propertyToSearch];return"<li>"+(this.enableHTML?b:c(b))+"</li>";},tokenFormatter:function(a){var b=a[this.propertyToSearch];return"<li><p>"+(this.enableHTML?b:c(b))+"</p></li>";},tokenLimit:null,tokenDelimiter:",",preventDuplicates:!1,tokenValue:"id",allowFreeTagging:!1,allowTabOut:!1,autoSelectFirstResult:!1,onResult:null,onCachedResult:null,onAdd:null,onFreeTaggingAdd:null,onDelete:null,onReady:null,idPrefix:"token-input-",disabled:!1},e={tokenList:"token-input-list",token:"token-input-token",tokenReadOnly:"token-input-token-readonly",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-input-token",focused:"token-input-focused",disabled:"token-input-disabled"},f={BEFORE:0,AFTER:1,END:2},g={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUMPAD_ENTER:108,COMMA:188},h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},i=/[&<>"'\/]/g,j={init:function(b,c){var e=a.extend({},d,c||{});return this.each(function(){a(this).data("settings",e),a(this).data("tokenInputObject",new a.TokenList(this,b,e));});},clear:function(){return this.data("tokenInputObject").clear(),this;},add:function(a){return this.data("tokenInputObject").add(a),this;},remove:function(a){return this.data("tokenInputObject").remove(a),this;},get:function(){return this.data("tokenInputObject").getTokens();},toggleDisabled:function(a){return this.data("tokenInputObject").toggleDisabled(a),this;},setOptions:function(b){return a(this).data("settings",a.extend({},a(this).data("settings"),b||{})),this;},destroy:function(){if(this.data("tokenInputObject")){this.data("tokenInputObject").clear();var a=this,b=this.parent();return b.empty(),a.show(),b.append(a),a;}}};a.fn.tokenInput=function(a){return j[a]?j[a].apply(this,Array.prototype.slice.call(arguments,1)):j.init.apply(this,arguments);},a.TokenList=function(b,d,h){function i(d){return a(b).data("settings").enableHTML?d:c(d);}function j(c){a(b).data("settings").disabled="boolean"==typeof c?c:!a(b).data("settings").disabled,P.attr("disabled",a(b).data("settings").disabled),U.toggleClass(a(b).data("settings").classes.disabled,a(b).data("settings").disabled),R&&q(a(R),f.END),Q.attr("disabled",a(b).data("settings").disabled);}function k(){return null!==a(b).data("settings").tokenLimit&&N>=a(b).data("settings").tokenLimit?(P.hide(),void u()):void 0;}function l(){if(L!==(L=P.val())){var a=U.width()-P.offset().left-U.offset().left;X.html(c(L)||c(h.placeholder)),P.width(Math.min(U.width(),Math.max(a,X.width()+30)));}}function m(){var c=a.trim(P.val()),d=c.split(a(b).data("settings").tokenDelimiter);a.each(d,function(c,d){if(d){a.isFunction(a(b).data("settings").onFreeTaggingAdd)&&(d=a(b).data("settings").onFreeTaggingAdd.call(Q,d));var e={};e[a(b).data("settings").tokenValue]=e[a(b).data("settings").propertyToSearch]=d,o(e);}});}function n(c){var d=a(a(b).data("settings").tokenFormatter(c)),e=c.readonly===!0?!0:!1;e&&d.addClass(a(b).data("settings").classes.tokenReadOnly),d.addClass(a(b).data("settings").classes.token).insertBefore(V),e||a("<span>"+a(b).data("settings").deleteText+"</span>").addClass(a(b).data("settings").classes.tokenDelete).appendTo(d).click(function(){return a(b).data("settings").disabled?void 0:(s(a(this).parent()),Q.change(),!1);});var f=c;return a.data(d.get(0),"tokeninput",c),M=M.slice(0,S).concat([f]).concat(M.slice(S)),S++,t(M,Q),N+=1,null!==a(b).data("settings").tokenLimit&&N>=a(b).data("settings").tokenLimit&&(P.hide(),u()),d;}function o(c){var d=a(b).data("settings").onAdd;if(N>0&&a(b).data("settings").preventDuplicates){var e=null;if(U.children().each(function(){var b=a(this),d=a.data(b.get(0),"tokeninput");return d&&d[h.tokenValue]===c[h.tokenValue]?(e=b,!1):void 0;}),e)return p(e),V.insertAfter(e),void I(P);}P.width(1),(null==a(b).data("settings").tokenLimit||N<a(b).data("settings").tokenLimit)&&(n(c),P.attr("placeholder",null),k()),P.val(""),u(),a.isFunction(d)&&d.call(Q,c);}function p(c){a(b).data("settings").disabled||(c.addClass(a(b).data("settings").classes.selectedToken),R=c.get(0),P.val(""),u());}function q(c,d){c.removeClass(a(b).data("settings").classes.selectedToken),R=null,d===f.BEFORE?(V.insertBefore(c),S--):d===f.AFTER?(V.insertAfter(c),S++):(V.appendTo(U),S=N),I(P);}function r(b){var c=R;R&&q(a(R),f.END),c===b.get(0)?q(b,f.END):p(b);}function s(c){var d=a.data(c.get(0),"tokeninput"),e=a(b).data("settings").onDelete,f=c.prevAll().length;f>S&&f--,c.remove(),R=null,I(P),M=M.slice(0,f).concat(M.slice(f+1)),0==M.length&&P.attr("placeholder",h.placeholder),S>f&&S--,t(M,Q),N-=1,null!==a(b).data("settings").tokenLimit&&(P.show().val(""),I(P)),a.isFunction(e)&&e.call(Q,d);}function t(c,d){var e=a.map(c,function(c){return"function"==typeof a(b).data("settings").tokenValue?a(b).data("settings").tokenValue.call(this,c):c[a(b).data("settings").tokenValue];});d.val(e.join(a(b).data("settings").tokenDelimiter));}function u(){W.hide().empty(),T=null;}function v(){W.css({position:"absolute",top:U.offset().top+U.outerHeight(!0),left:U.offset().left,width:U.width(),"z-index":a(b).data("settings").zindex}).show();}function w(){a(b).data("settings").searchingText&&(W.html("<p>"+i(a(b).data("settings").searchingText)+"</p>"),v());}function x(){a(b).data("settings").hintText&&(W.html("<p>"+i(a(b).data("settings").hintText)+"</p>"),v());}function y(a){return a.replace(Z,"\\$&");}function z(a,b){return a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+y(b)+")(?![^<>]*>)(?![^&;]+;)","gi"),function(a,b){return"<b>"+i(b)+"</b>";});}function A(a,b,c){return a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+y(b)+")(?![^<>]*>)(?![^&;]+;)","g"),z(b,c));}function B(c){if(a(b).data("settings").excludeCurrent){var d=a(b).data("tokenInputObject").getTokens(),e=[];d.length&&(a.each(c,function(c,f){var g=!0;a.each(d,function(c,d){return f[a(b).data("settings").propertyToSearch]==d[a(b).data("settings").propertyToSearch]?(g=!1,!1):void 0;}),g&&e.push(f);}),c=e);}return c;}function C(c,d){if(d=B(d),d&&d.length){W.empty();var e=a("<ul/>").appendTo(W).mouseover(function(b){D(a(b.target).closest("li"));}).mousedown(function(b){return o(a(b.target).closest("li").data("tokeninput")),Q.change(),!1;}).hide();a(b).data("settings").resultsLimit&&d.length>a(b).data("settings").resultsLimit&&(d=d.slice(0,a(b).data("settings").resultsLimit)),a.each(d,function(d,f){var g=a(b).data("settings").resultsFormatter(f);g=A(g,f[a(b).data("settings").propertyToSearch],c),g=a(g).appendTo(e),g.addClass(d%2?a(b).data("settings").classes.dropdownItem:a(b).data("settings").classes.dropdownItem2),0===d&&a(b).data("settings").autoSelectFirstResult&&D(g),a.data(g.get(0),"tokeninput",f);}),v(),a(b).data("settings").animateDropdown?e.slideDown("fast"):e.show();}else a(b).data("settings").noResultsText&&(W.html("<p>"+i(a(b).data("settings").noResultsText)+"</p>"),v());}function D(c){c&&(T&&E(a(T)),c.addClass(a(b).data("settings").classes.selectedDropdownItem),T=c.get(0));}function E(c){c.removeClass(a(b).data("settings").classes.selectedDropdownItem),T=null;}function F(){var c=P.val();c&&c.length&&(R&&q(a(R),f.AFTER),c.length>=a(b).data("settings").minChars?(w(),clearTimeout(K),K=setTimeout(function(){G(c);},a(b).data("settings").searchDelay)):u());}function G(c){var d=c+H(),e=O.get(d);if(e)a.isFunction(a(b).data("settings").onCachedResult)&&(e=a(b).data("settings").onCachedResult.call(Q,e)),C(c,e);else if(a(b).data("settings").url){var f=H(),g={};if(g.data={},f.indexOf("?")>-1){var i=f.split("?");g.url=i[0];var j=i[1].split("&");a.each(j,function(a,b){var c=b.split("=");g.data[c[0]]=c[1];});}else g.url=f;if(g.data[a(b).data("settings").queryParam]=c,g.type=a(b).data("settings").method,g.dataType=a(b).data("settings").contentType,a(b).data("settings").crossDomain&&(g.dataType="jsonp"),a(b).data("settings").excludeCurrent){var k=a(b).data("tokenInputObject").getTokens(),l=a.map(k,function(c){return"function"==typeof a(b).data("settings").tokenValue?a(b).data("settings").tokenValue.call(this,c):c[a(b).data("settings").tokenValue];});g.data[a(b).data("settings").excludeCurrentParameter]=l.join(a(b).data("settings").tokenDelimiter);}g.success=function(e){O.add(d,a(b).data("settings").jsonContainer?e[a(b).data("settings").jsonContainer]:e),a.isFunction(a(b).data("settings").onResult)&&(e=a(b).data("settings").onResult.call(Q,e)),P.val()===c&&C(c,a(b).data("settings").jsonContainer?e[a(b).data("settings").jsonContainer]:e);},h.onSend&&h.onSend(g),a.ajax(g);}else if(a(b).data("settings").local_data){var m=a.grep(a(b).data("settings").local_data,function(d){return d[a(b).data("settings").propertyToSearch].toLowerCase().indexOf(c.toLowerCase())>-1;});O.add(d,m),a.isFunction(a(b).data("settings").onResult)&&(m=a(b).data("settings").onResult.call(Q,m)),C(c,m);}}function H(){var c=a(b).data("settings").url;return"function"==typeof a(b).data("settings").url&&(c=a(b).data("settings").url.call(a(b).data("settings"))),c;}function I(a){setTimeout(function(){a.focus();},50);}if("string"==typeof d||"function"==typeof d){a(b).data("settings").url=d;var J=H();void 0===a(b).data("settings").crossDomain&&"string"==typeof J&&(a(b).data("settings").crossDomain=-1===J.indexOf("://")?!1:location.href.split(/\/+/g)[1]!==J.split(/\/+/g)[1]);}else"object"==typeof d&&(a(b).data("settings").local_data=d);a(b).data("settings").classes?a(b).data("settings").classes=a.extend({},e,a(b).data("settings").classes):a(b).data("settings").theme?(a(b).data("settings").classes={},a.each(e,function(c,d){a(b).data("settings").classes[c]=d+"-"+a(b).data("settings").theme;})):a(b).data("settings").classes=e;var K,L,M=[],N=0,O=new a.TokenList.Cache(),P=a('<input type="text" autocomplete="off" autocapitalize="off"/>').css({outline:"none"}).attr("id",a(b).data("settings").idPrefix+b.id).focus(function(){return a(b).data("settings").disabled?!1:((null===a(b).data("settings").tokenLimit||a(b).data("settings").tokenLimit!==N)&&x(),void U.addClass(a(b).data("settings").classes.focused));}).blur(function(){u(),a(b).data("settings").allowFreeTagging&&m(),a(this).val(""),U.removeClass(a(b).data("settings").classes.focused);}).bind("keyup keydown blur update",l).keydown(function(c){var d,e;switch(c.keyCode){case g.LEFT:case g.RIGHT:case g.UP:case g.DOWN:if(0===this.value.length)d=V.prev(),e=V.next(),d.length&&d.get(0)===R||e.length&&e.get(0)===R?c.keyCode===g.LEFT||c.keyCode===g.UP?q(a(R),f.BEFORE):q(a(R),f.AFTER):c.keyCode!==g.LEFT&&c.keyCode!==g.UP||!d.length?c.keyCode!==g.RIGHT&&c.keyCode!==g.DOWN||!e.length||p(a(e.get(0))):p(a(d.get(0)));else{var h=null;c.keyCode===g.DOWN||c.keyCode===g.RIGHT?(h=a(W).find("li").first(),T&&(h=a(T).next())):(h=a(W).find("li").last(),T&&(h=a(T).prev())),D(h);}break;case g.BACKSPACE:if(d=V.prev(),0===this.value.length)return R?(s(a(R)),Q.change()):d.length&&p(a(d.get(0))),!1;1===a(this).val().length?u():setTimeout(function(){F();},5);break;case g.TAB:case g.ENTER:case g.NUMPAD_ENTER:case g.COMMA:if(T)o(a(T).data("tokeninput")),Q.change();else{if(a(b).data("settings").allowFreeTagging){if(a(b).data("settings").allowTabOut&&""===a(this).val())return!0;m();}else if(a(this).val(""),a(b).data("settings").allowTabOut)return!0;c.stopPropagation(),c.preventDefault();}return!1;case g.ESCAPE:return u(),!0;default:String.fromCharCode(c.which)&&setTimeout(function(){F();},5);}});h.placeholder&&P.attr("placeholder",h.placeholder);var Q=a(b).hide().val("").focus(function(){I(P);}).blur(function(){return P.blur(),Q;}),R=null,S=0,T=null,U=a("<ul />").addClass(a(b).data("settings").classes.tokenList).click(function(b){var c=a(b.target).closest("li");c&&c.get(0)&&a.data(c.get(0),"tokeninput")?r(c):(R&&q(a(R),f.END),I(P));}).mouseover(function(c){var d=a(c.target).closest("li");d&&R!==this&&d.addClass(a(b).data("settings").classes.highlightedToken);}).mouseout(function(c){var d=a(c.target).closest("li");d&&R!==this&&d.removeClass(a(b).data("settings").classes.highlightedToken);}).insertBefore(Q),V=a("<li />").addClass(a(b).data("settings").classes.inputToken).appendTo(U).append(P),W=a("<div/>").addClass(a(b).data("settings").classes.dropdown).appendTo("body").hide(),X=a("<tester/>").insertAfter(P).css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:P.css("fontSize"),fontFamily:P.css("fontFamily"),fontWeight:P.css("fontWeight"),letterSpacing:P.css("letterSpacing"),whiteSpace:"nowrap"});Q.val("");var Y=a(b).data("settings").prePopulate||Q.data("pre");a(b).data("settings").processPrePopulate&&a.isFunction(a(b).data("settings").onResult)&&(Y=a(b).data("settings").onResult.call(Q,Y)),Y&&Y.length&&a.each(Y,function(a,b){n(b),k(),P.attr("placeholder",null);}),a(b).data("settings").disabled&&j(!0),"function"==typeof a(b).data("settings").onReady&&a(b).data("settings").onReady.call(),this.clear=function(){U.children("li").each(function(){0===a(this).children("input").length&&s(a(this));});},this.add=function(a){o(a);},this.remove=function(b){U.children("li").each(function(){if(0===a(this).children("input").length){var c=a(this).data("tokeninput"),d=!0;for(var e in b)if(b[e]!==c[e]){d=!1;break;}d&&s(a(this));}});},this.getTokens=function(){return M;},this.toggleDisabled=function(a){j(a);},l();var Z=new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g");},a.TokenList.Cache=function(b){var c,d,e={},f=0;c=a.extend({max_size:500},b),d=function(){e={},f=0;},this.add=function(a,b){f>c.max_size&&d(),e[a]||(f+=1),e[a]=b;},this.get=function(a){return e[a];};};}(jQuery);

/***/ }),
/* 336 */
/***/ (function(module, exports) {

!function($,window,pluginName,undefined){var containerDefaults={drag:true,drop:true,exclude:"",nested:true,vertical:true},groupDefaults={afterMove:function($placeholder,container,$closestItemOrContainer){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",isValidTarget:function($item,container){return true;},onCancel:function($item,container,_super,event){},onDrag:function($item,position,_super,event){$item.css(position);},onDragStart:function($item,container,_super,event){$item.css({height:$item.outerHeight(),width:$item.outerWidth()});$item.addClass(container.group.options.draggedClass);$("body").addClass(container.group.options.bodyClass);},onDrop:function($item,container,_super,event){$item.removeClass(container.group.options.draggedClass).removeAttr("style");$("body").removeClass(container.group.options.bodyClass);},onMousedown:function($item,_super,event){if(!event.target.nodeName.match(/^(input|select|textarea)$/i)){event.preventDefault();return true;}},placeholderClass:"placeholder",placeholder:'<li class="placeholder"></li>',pullPlaceholder:true,serialize:function($parent,$children,parentIsContainer){var result=$.extend({},$parent.data());if(parentIsContainer)return[$children];else if($children[0]){result.children=$children;}delete result.subContainers;delete result.sortable;return result;},tolerance:0},containerGroups={},groupCounter=0,emptyBox={left:0,top:0,bottom:0,right:0},eventNames={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},subContainerKey="subContainers";function d(a,b){var x=Math.max(0,a[0]-b[0],b[0]-a[1]),y=Math.max(0,a[2]-b[1],b[1]-a[3]);return x+y;}function setDimensions(array,dimensions,tolerance,useOffset){var i=array.length,offsetMethod=useOffset?"offset":"position";tolerance=tolerance||0;while(i--){var el=array[i].el?array[i].el:$(array[i]),pos=el[offsetMethod]();pos.left+=parseInt(el.css('margin-left'),10);pos.top+=parseInt(el.css('margin-top'),10);dimensions[i]=[pos.left-tolerance,pos.left+el.outerWidth()+tolerance,pos.top-tolerance,pos.top+el.outerHeight()+tolerance];}}function getRelativePosition(pointer,element){var offset=element.offset();return{left:pointer.left-offset.left,top:pointer.top-offset.top};}function sortByDistanceDesc(dimensions,pointer,lastPointer){pointer=[pointer.left,pointer.top];lastPointer=lastPointer&&[lastPointer.left,lastPointer.top];var dim,i=dimensions.length,distances=[];while(i--){dim=dimensions[i];distances[i]=[i,d(dim,pointer),lastPointer&&d(dim,lastPointer)];}distances=distances.sort(function(a,b){return b[1]-a[1]||b[2]-a[2]||b[0]-a[0];});return distances;}function ContainerGroup(options){this.options=$.extend({},groupDefaults,options);this.containers=[];if(!this.options.rootGroup){this.scrollProxy=$.proxy(this.scroll,this);this.dragProxy=$.proxy(this.drag,this);this.dropProxy=$.proxy(this.drop,this);this.placeholder=$(this.options.placeholder);if(!options.isValidTarget)this.options.isValidTarget=undefined;}}ContainerGroup.get=function(options){if(!containerGroups[options.group]){if(options.group===undefined)options.group=groupCounter++;containerGroups[options.group]=new ContainerGroup(options);}return containerGroups[options.group];};ContainerGroup.prototype={dragInit:function(e,itemContainer){this.$document=$(itemContainer.el[0].ownerDocument);var closestItem=$(e.target).closest(this.options.itemSelector);if(closestItem.length){this.item=closestItem;this.itemContainer=itemContainer;if(this.item.is(this.options.exclude)||!this.options.onMousedown(this.item,groupDefaults.onMousedown,e)){return;}this.setPointer(e);this.toggleListeners('on');this.setupDelayTimer();this.dragInitDone=true;}},drag:function(e){if(!this.dragging){if(!this.distanceMet(e)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,groupDefaults.onDragStart,e);this.item.before(this.placeholder);this.dragging=true;}this.setPointer(e);this.options.onDrag(this.item,getRelativePosition(this.pointer,this.item.offsetParent()),groupDefaults.onDrag,e);var p=this.getPointer(e),box=this.sameResultBox,t=this.options.tolerance;if(!box||box.top-t>p.top||box.bottom+t<p.top||box.left-t>p.left||box.right+t<p.left)if(!this.searchValidTarget()){this.placeholder.detach();this.lastAppendedItem=undefined;}},drop:function(e){this.toggleListeners('off');this.dragInitDone=false;if(this.dragging){if(this.placeholder.closest("html")[0]){this.placeholder.before(this.item).detach();}else{this.options.onCancel(this.item,this.itemContainer,groupDefaults.onCancel,e);}this.options.onDrop(this.item,this.getContainer(this.item),groupDefaults.onDrop,e);this.clearDimensions();this.clearOffsetParent();this.lastAppendedItem=this.sameResultBox=undefined;this.dragging=false;}},searchValidTarget:function(pointer,lastPointer){if(!pointer){pointer=this.relativePointer||this.pointer;lastPointer=this.lastRelativePointer||this.lastPointer;}var distances=sortByDistanceDesc(this.getContainerDimensions(),pointer,lastPointer),i=distances.length;while(i--){var index=distances[i][0],distance=distances[i][1];if(!distance||this.options.pullPlaceholder){var container=this.containers[index];if(!container.disabled){if(!this.$getOffsetParent()){var offsetParent=container.getItemOffsetParent();pointer=getRelativePosition(pointer,offsetParent);lastPointer=getRelativePosition(lastPointer,offsetParent);}if(container.searchValidTarget(pointer,lastPointer))return true;}}}if(this.sameResultBox)this.sameResultBox=undefined;},movePlaceholder:function(container,item,method,sameResultBox){var lastAppendedItem=this.lastAppendedItem;if(!sameResultBox&&lastAppendedItem&&lastAppendedItem[0]===item[0])return;item[method](this.placeholder);this.lastAppendedItem=item;this.sameResultBox=sameResultBox;this.options.afterMove(this.placeholder,container,item);},getContainerDimensions:function(){if(!this.containerDimensions)setDimensions(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent());return this.containerDimensions;},getContainer:function(element){return element.closest(this.options.containerSelector).data(pluginName);},$getOffsetParent:function(){if(this.offsetParent===undefined){var i=this.containers.length-1,offsetParent=this.containers[i].getItemOffsetParent();if(!this.options.rootGroup){while(i--){if(offsetParent[0]!=this.containers[i].getItemOffsetParent()[0]){offsetParent=false;break;}}}this.offsetParent=offsetParent;}return this.offsetParent;},setPointer:function(e){var pointer=this.getPointer(e);if(this.$getOffsetParent()){var relativePointer=getRelativePosition(pointer,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer;this.relativePointer=relativePointer;}this.lastPointer=this.pointer;this.pointer=pointer;},distanceMet:function(e){var currentPointer=this.getPointer(e);return Math.max(Math.abs(this.pointer.left-currentPointer.left),Math.abs(this.pointer.top-currentPointer.top))>=this.options.distance;},getPointer:function(e){var o=e.originalEvent||e.originalEvent.touches&&e.originalEvent.touches[0];return{left:e.pageX||o.pageX,top:e.pageY||o.pageY};},setupDelayTimer:function(){var that=this;this.delayMet=!this.options.delay;if(!this.delayMet){clearTimeout(this._mouseDelayTimer);this._mouseDelayTimer=setTimeout(function(){that.delayMet=true;},this.options.delay);}},scroll:function(e){this.clearDimensions();this.clearOffsetParent();},toggleListeners:function(method){var that=this,events=['drag','drop','scroll'];$.each(events,function(i,event){that.$document[method](eventNames[event],that[event+'Proxy']);});},clearOffsetParent:function(){this.offsetParent=undefined;},clearDimensions:function(){this.traverse(function(object){object._clearDimensions();});},traverse:function(callback){callback(this);var i=this.containers.length;while(i--){this.containers[i].traverse(callback);}},_clearDimensions:function(){this.containerDimensions=undefined;},_destroy:function(){containerGroups[this.options.group]=undefined;}};function Container(element,options){this.el=element;this.options=$.extend({},containerDefaults,options);this.group=ContainerGroup.get(this.options);this.rootGroup=this.options.rootGroup||this.group;this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var itemPath=this.rootGroup.options.itemPath;this.target=itemPath?this.el.find(itemPath):this.el;this.target.on(eventNames.start,this.handle,$.proxy(this.dragInit,this));if(this.options.drop)this.group.containers.push(this);}Container.prototype={dragInit:function(e){var rootGroup=this.rootGroup;if(!this.disabled&&!rootGroup.dragInitDone&&this.options.drag&&this.isValidDrag(e)){rootGroup.dragInit(e,this);}},isValidDrag:function(e){return e.which==1||e.type=="touchstart"&&e.originalEvent.touches.length==1;},searchValidTarget:function(pointer,lastPointer){var distances=sortByDistanceDesc(this.getItemDimensions(),pointer,lastPointer),i=distances.length,rootGroup=this.rootGroup,validTarget=!rootGroup.options.isValidTarget||rootGroup.options.isValidTarget(rootGroup.item,this);if(!i&&validTarget){rootGroup.movePlaceholder(this,this.target,"append");return true;}else while(i--){var index=distances[i][0],distance=distances[i][1];if(!distance&&this.hasChildGroup(index)){var found=this.getContainerGroup(index).searchValidTarget(pointer,lastPointer);if(found)return true;}else if(validTarget){this.movePlaceholder(index,pointer);return true;}}},movePlaceholder:function(index,pointer){var item=$(this.items[index]),dim=this.itemDimensions[index],method="after",width=item.outerWidth(),height=item.outerHeight(),offset=item.offset(),sameResultBox={left:offset.left,right:offset.left+width,top:offset.top,bottom:offset.top+height};if(this.options.vertical){var yCenter=(dim[2]+dim[3])/2,inUpperHalf=pointer.top<=yCenter;if(inUpperHalf){method="before";sameResultBox.bottom-=height/2;}else sameResultBox.top+=height/2;}else{var xCenter=(dim[0]+dim[1])/2,inLeftHalf=pointer.left<=xCenter;if(inLeftHalf){method="before";sameResultBox.right-=width/2;}else sameResultBox.left+=width/2;}if(this.hasChildGroup(index))sameResultBox=emptyBox;this.rootGroup.movePlaceholder(this,item,method,sameResultBox);},getItemDimensions:function(){if(!this.itemDimensions){this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get();setDimensions(this.items,this.itemDimensions=[],this.options.tolerance);}return this.itemDimensions;},getItemOffsetParent:function(){var offsetParent,el=this.el;if(el.css("position")==="relative"||el.css("position")==="absolute"||el.css("position")==="fixed")offsetParent=el;else offsetParent=el.offsetParent();return offsetParent;},hasChildGroup:function(index){return this.options.nested&&this.getContainerGroup(index);},getContainerGroup:function(index){var childGroup=$.data(this.items[index],subContainerKey);if(childGroup===undefined){var childContainers=this.$getChildren(this.items[index],"container");childGroup=false;if(childContainers[0]){var options=$.extend({},this.options,{rootGroup:this.rootGroup,group:groupCounter++});childGroup=childContainers[pluginName](options).data(pluginName).group;}$.data(this.items[index],subContainerKey,childGroup);}return childGroup;},$getChildren:function(parent,type){var options=this.rootGroup.options,path=options[type+"Path"],selector=options[type+"Selector"];parent=$(parent);if(path)parent=parent.find(path);return parent.children(selector);},_serialize:function(parent,isContainer){var that=this,childType=isContainer?"item":"container",children=this.$getChildren(parent,childType).not(this.options.exclude).map(function(){return that._serialize($(this),!isContainer);}).get();return this.rootGroup.options.serialize(parent,children,isContainer);},traverse:function(callback){$.each(this.items||[],function(item){var group=$.data(this,subContainerKey);if(group)group.traverse(callback);});callback(this);},_clearDimensions:function(){this.itemDimensions=undefined;},_destroy:function(){var that=this;this.target.off(eventNames.start,this.handle);this.el.removeData(pluginName);if(this.options.drop)this.group.containers=$.grep(this.group.containers,function(val){return val!=that;});$.each(this.items||[],function(){$.removeData(this,subContainerKey);});}};var API={enable:function(){this.traverse(function(object){object.disabled=false;});},disable:function(){this.traverse(function(object){object.disabled=true;});},serialize:function(){return this._serialize(this.el,true);},refresh:function(){this.traverse(function(object){object._clearDimensions();});},destroy:function(){this.traverse(function(object){object._destroy();});}};$.extend(Container.prototype,API);$.fn[pluginName]=function(methodOrOptions){var args=Array.prototype.slice.call(arguments,1);return this.map(function(){var $t=$(this),object=$t.data(pluginName);if(object&&API[methodOrOptions])return API[methodOrOptions].apply(object,args)||this;else if(!object&&(methodOrOptions===undefined||typeof methodOrOptions==="object"))$t.data(pluginName,new Container($t,methodOrOptions));return this;});};}(jQuery,window,'sortable');

/***/ }),
/* 337 */
/***/ (function(module, exports, __webpack_require__) {

var castPath=__webpack_require__(36),isArguments=__webpack_require__(44),isArray=__webpack_require__(6),isIndex=__webpack_require__(54),isLength=__webpack_require__(103),toKey=__webpack_require__(24);function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break;}object=object[key];}if(result||++index!=length){return result;}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object));}module.exports=hasPath;

/***/ }),
/* 338 */
/***/ (function(module, exports) {

function baseHasIn(object,key){return object!=null&&key in Object(object);}module.exports=baseHasIn;

/***/ }),
/* 339 */
/***/ (function(module, exports, __webpack_require__) {

var assignValue=__webpack_require__(71),castPath=__webpack_require__(36),isIndex=__webpack_require__(54),isObject=__webpack_require__(9),toKey=__webpack_require__(24);function baseSet(object,path,value,customizer){if(!isObject(object)){return object;}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{};}}assignValue(nested,key,newValue);nested=nested[key];}return object;}module.exports=baseSet;

/***/ }),
/* 340 */
/***/ (function(module, exports, __webpack_require__) {

var basePickBy=__webpack_require__(101),hasIn=__webpack_require__(100);function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path);});}module.exports=basePick;

/***/ }),
/* 341 */
/***/ (function(module, exports) {

/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */
module.exports = __webpack_amd_options__;

/* WEBPACK VAR INJECTION */}.call(this, {}))

/***/ }),
/* 342 */
/***/ (function(module, exports) {

module.exports = function() {
	throw new Error("define cannot be used indirect");
};


/***/ }),
/* 343 */
/***/ (function(module, exports) {

function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index);}return result;}module.exports=baseTimes;

/***/ }),
/* 344 */
/***/ (function(module, exports) {

function baseProperty(key){return function(object){return object==null?undefined:object[key];};}module.exports=baseProperty;

/***/ }),
/* 345 */
/***/ (function(module, exports) {

function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value;}}return result;}module.exports=arrayFilter;

/***/ }),
/* 346 */
/***/ (function(module, exports, __webpack_require__) {

var apply=__webpack_require__(58),arrayMap=__webpack_require__(15),unzip=__webpack_require__(104);function unzipWith(array,iteratee){if(!(array&&array.length)){return[];}var result=unzip(array);if(iteratee==null){return result;}return arrayMap(result,function(group){return apply(iteratee,undefined,group);});}module.exports=unzipWith;

/***/ }),
/* 347 */
/***/ (function(module, exports) {

function stubString(){return'';}module.exports=stubString;

/***/ }),
/* 348 */
/***/ (function(module, exports) {

function noop(){}module.exports=noop;

/***/ }),
/* 349 */
/***/ (function(module, exports, __webpack_require__) {

var LodashWrapper=__webpack_require__(348),flatRest=__webpack_require__(69),getData=__webpack_require__(116),getFuncName=__webpack_require__(347),isArray=__webpack_require__(6),isLaziable=__webpack_require__(121);var FUNC_ERROR_TEXT='Expected a function';var WRAP_CURRY_FLAG=8,WRAP_PARTIAL_FLAG=32,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256;function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;if(fromRight){funcs.reverse();}while(index--){var func=funcs[index];if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}if(prereq&&!wrapper&&getFuncName(func)=='wrapper'){var wrapper=new LodashWrapper([],true);}}index=wrapper?index:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=='wrapper'?getData(func):undefined;if(data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3]);}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func);}}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value)){return wrapper.plant(value).value();}var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length){result=funcs[index].call(this,result);}return result;};});}module.exports=createFlow;

/***/ }),
/* 350 */
/***/ (function(module, exports, __webpack_require__) {

var createFlow=__webpack_require__(349);var flow=createFlow();module.exports=flow;

/***/ }),
/* 351 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap=__webpack_require__(15),copyArray=__webpack_require__(37),isArray=__webpack_require__(6),isSymbol=__webpack_require__(53),stringToPath=__webpack_require__(114),toKey=__webpack_require__(24),toString=__webpack_require__(78);function toPath(value){if(isArray(value)){return arrayMap(value,toKey);}return isSymbol(value)?[value]:copyArray(stringToPath(toString(value)));}module.exports=toPath;

/***/ }),
/* 352 */
/***/ (function(module, exports, __webpack_require__) {

var root=__webpack_require__(18);var Symbol=root.Symbol;module.exports=Symbol;

/***/ }),
/* 353 */
/***/ (function(module, exports, __webpack_require__) {

var Symbol=__webpack_require__(352),isArguments=__webpack_require__(44),isArray=__webpack_require__(6);var spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined;function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol]);}module.exports=isFlattenable;

/***/ }),
/* 354 */
/***/ (function(module, exports) {

function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index];}return array;}module.exports=arrayPush;

/***/ }),
/* 355 */
/***/ (function(module, exports, __webpack_require__) {

var createWrap=__webpack_require__(56),flatRest=__webpack_require__(69);var WRAP_REARG_FLAG=256;var rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined,undefined,undefined,indexes);});module.exports=rearg;

/***/ }),
/* 356 */
/***/ (function(module, exports, __webpack_require__) {

var baseClone=__webpack_require__(47),baseIteratee=__webpack_require__(5);var CLONE_DEEP_FLAG=1;function iteratee(func){return baseIteratee(typeof func=='function'?func:baseClone(func,CLONE_DEEP_FLAG));}module.exports=iteratee;

/***/ }),
/* 357 */
/***/ (function(module, exports, __webpack_require__) {

var getTag=__webpack_require__(45),isObjectLike=__webpack_require__(34);var weakMapTag='[object WeakMap]';function isWeakMap(value){return isObjectLike(value)&&getTag(value)==weakMapTag;}module.exports=isWeakMap;

/***/ }),
/* 358 */
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag=__webpack_require__(73),isObjectLike=__webpack_require__(34),isPlainObject=__webpack_require__(106);var domExcTag='[object DOMException]',errorTag='[object Error]';function isError(value){if(!isObjectLike(value)){return false;}var tag=baseGetTag(value);return tag==errorTag||tag==domExcTag||typeof value.message=='string'&&typeof value.name=='string'&&!isPlainObject(value);}module.exports=isError;

/***/ }),
/* 359 */
/***/ (function(module, exports, __webpack_require__) {

var createWrap=__webpack_require__(56);var WRAP_CURRY_FLAG=8;function curry(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curry.placeholder;return result;}curry.placeholder={};module.exports=curry;

/***/ }),
/* 360 */
/***/ (function(module, exports) {

function stubFalse(){return false;}module.exports=stubFalse;

/***/ }),
/* 361 */
/***/ (function(module, exports) {

function stubFalse(){return false;}module.exports=stubFalse;

/***/ }),
/* 362 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 363 */
/***/ (function(module, exports) {

var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=='string'&&hasOwnProperty.call(array,'index')){result.index=array.index;result.input=array.input;}return result;}module.exports=initCloneArray;

/***/ }),
/* 364 */
/***/ (function(module, exports) {

function stubArray(){return[];}module.exports=stubArray;

/***/ }),
/* 365 */
/***/ (function(module, exports, __webpack_require__) {

var copyObject=__webpack_require__(23),getSymbolsIn=__webpack_require__(364);function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object);}module.exports=copySymbolsIn;

/***/ }),
/* 366 */
/***/ (function(module, exports) {

function stubArray(){return[];}module.exports=stubArray;

/***/ }),
/* 367 */
/***/ (function(module, exports, __webpack_require__) {

var copyObject=__webpack_require__(23),getSymbols=__webpack_require__(366);function copySymbols(source,object){return copyObject(source,getSymbols(source),object);}module.exports=copySymbols;

/***/ }),
/* 368 */
/***/ (function(module, exports, __webpack_require__) {

var copyObject=__webpack_require__(23),keysIn=__webpack_require__(46);function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object);}module.exports=baseAssignIn;

/***/ }),
/* 369 */
/***/ (function(module, exports, __webpack_require__) {

var baseClone=__webpack_require__(47);var CLONE_SYMBOLS_FLAG=4;function clone(value){return baseClone(value,CLONE_SYMBOLS_FLAG);}module.exports=clone;

/***/ }),
/* 370 */
/***/ (function(module, exports) {

function getValue(object,key){return object==null?undefined:object[key];}module.exports=getValue;

/***/ }),
/* 371 */
/***/ (function(module, exports, __webpack_require__) {

var getNative=__webpack_require__(370);var defineProperty=function(){try{var func=getNative(Object,'defineProperty');func({},'',{});return func;}catch(e){}}();module.exports=defineProperty;

/***/ }),
/* 372 */
/***/ (function(module, exports, __webpack_require__) {

var createWrap=__webpack_require__(56);var WRAP_ARY_FLAG=128;function ary(func,n,guard){n=guard?undefined:n;n=func&&n==null?func.length:n;return createWrap(func,WRAP_ARY_FLAG,undefined,undefined,undefined,undefined,n);}module.exports=ary;

/***/ }),
/* 373 */
/***/ (function(module, exports, __webpack_require__) {

module.exports={'ary':__webpack_require__(372),'assign':__webpack_require__(112),'clone':__webpack_require__(369),'curry':__webpack_require__(359),'forEach':__webpack_require__(76),'isArray':__webpack_require__(6),'isError':__webpack_require__(358),'isFunction':__webpack_require__(49),'isWeakMap':__webpack_require__(357),'iteratee':__webpack_require__(356),'keys':__webpack_require__(105),'rearg':__webpack_require__(355),'toInteger':__webpack_require__(25),'toPath':__webpack_require__(351)};

/***/ }),
/* 374 */
/***/ (function(module, exports) {

exports.aliasToReal={'each':'forEach','eachRight':'forEachRight','entries':'toPairs','entriesIn':'toPairsIn','extend':'assignIn','extendAll':'assignInAll','extendAllWith':'assignInAllWith','extendWith':'assignInWith','first':'head','conforms':'conformsTo','matches':'isMatch','property':'get','__':'placeholder','F':'stubFalse','T':'stubTrue','all':'every','allPass':'overEvery','always':'constant','any':'some','anyPass':'overSome','apply':'spread','assoc':'set','assocPath':'set','complement':'negate','compose':'flowRight','contains':'includes','dissoc':'unset','dissocPath':'unset','dropLast':'dropRight','dropLastWhile':'dropRightWhile','equals':'isEqual','identical':'eq','indexBy':'keyBy','init':'initial','invertObj':'invert','juxt':'over','omitAll':'omit','nAry':'ary','path':'get','pathEq':'matchesProperty','pathOr':'getOr','paths':'at','pickAll':'pick','pipe':'flow','pluck':'map','prop':'get','propEq':'matchesProperty','propOr':'getOr','props':'at','symmetricDifference':'xor','symmetricDifferenceBy':'xorBy','symmetricDifferenceWith':'xorWith','takeLast':'takeRight','takeLastWhile':'takeRightWhile','unapply':'rest','unnest':'flatten','useWith':'overArgs','where':'conformsTo','whereEq':'isMatch','zipObj':'zipObject'};exports.aryMethod={'1':['assignAll','assignInAll','attempt','castArray','ceil','create','curry','curryRight','defaultsAll','defaultsDeepAll','floor','flow','flowRight','fromPairs','invert','iteratee','memoize','method','mergeAll','methodOf','mixin','nthArg','over','overEvery','overSome','rest','reverse','round','runInContext','spread','template','trim','trimEnd','trimStart','uniqueId','words','zipAll'],'2':['add','after','ary','assign','assignAllWith','assignIn','assignInAllWith','at','before','bind','bindAll','bindKey','chunk','cloneDeepWith','cloneWith','concat','conformsTo','countBy','curryN','curryRightN','debounce','defaults','defaultsDeep','defaultTo','delay','difference','divide','drop','dropRight','dropRightWhile','dropWhile','endsWith','eq','every','filter','find','findIndex','findKey','findLast','findLastIndex','findLastKey','flatMap','flatMapDeep','flattenDepth','forEach','forEachRight','forIn','forInRight','forOwn','forOwnRight','get','groupBy','gt','gte','has','hasIn','includes','indexOf','intersection','invertBy','invoke','invokeMap','isEqual','isMatch','join','keyBy','lastIndexOf','lt','lte','map','mapKeys','mapValues','matchesProperty','maxBy','meanBy','merge','mergeAllWith','minBy','multiply','nth','omit','omitBy','overArgs','pad','padEnd','padStart','parseInt','partial','partialRight','partition','pick','pickBy','propertyOf','pull','pullAll','pullAt','random','range','rangeRight','rearg','reject','remove','repeat','restFrom','result','sampleSize','some','sortBy','sortedIndex','sortedIndexOf','sortedLastIndex','sortedLastIndexOf','sortedUniqBy','split','spreadFrom','startsWith','subtract','sumBy','take','takeRight','takeRightWhile','takeWhile','tap','throttle','thru','times','trimChars','trimCharsEnd','trimCharsStart','truncate','union','uniqBy','uniqWith','unset','unzipWith','without','wrap','xor','zip','zipObject','zipObjectDeep'],'3':['assignInWith','assignWith','clamp','differenceBy','differenceWith','findFrom','findIndexFrom','findLastFrom','findLastIndexFrom','getOr','includesFrom','indexOfFrom','inRange','intersectionBy','intersectionWith','invokeArgs','invokeArgsMap','isEqualWith','isMatchWith','flatMapDepth','lastIndexOfFrom','mergeWith','orderBy','padChars','padCharsEnd','padCharsStart','pullAllBy','pullAllWith','rangeStep','rangeStepRight','reduce','reduceRight','replace','set','slice','sortedIndexBy','sortedLastIndexBy','transform','unionBy','unionWith','update','xorBy','xorWith','zipWith'],'4':['fill','setWith','updateWith']};exports.aryRearg={'2':[1,0],'3':[2,0,1],'4':[3,2,0,1]};exports.iterateeAry={'dropRightWhile':1,'dropWhile':1,'every':1,'filter':1,'find':1,'findFrom':1,'findIndex':1,'findIndexFrom':1,'findKey':1,'findLast':1,'findLastFrom':1,'findLastIndex':1,'findLastIndexFrom':1,'findLastKey':1,'flatMap':1,'flatMapDeep':1,'flatMapDepth':1,'forEach':1,'forEachRight':1,'forIn':1,'forInRight':1,'forOwn':1,'forOwnRight':1,'map':1,'mapKeys':1,'mapValues':1,'partition':1,'reduce':2,'reduceRight':2,'reject':1,'remove':1,'some':1,'takeRightWhile':1,'takeWhile':1,'times':1,'transform':2};exports.iterateeRearg={'mapKeys':[1],'reduceRight':[1,0]};exports.methodRearg={'assignInAllWith':[1,0],'assignInWith':[1,2,0],'assignAllWith':[1,0],'assignWith':[1,2,0],'differenceBy':[1,2,0],'differenceWith':[1,2,0],'getOr':[2,1,0],'intersectionBy':[1,2,0],'intersectionWith':[1,2,0],'isEqualWith':[1,2,0],'isMatchWith':[2,1,0],'mergeAllWith':[1,0],'mergeWith':[1,2,0],'padChars':[2,1,0],'padCharsEnd':[2,1,0],'padCharsStart':[2,1,0],'pullAllBy':[2,1,0],'pullAllWith':[2,1,0],'rangeStep':[1,2,0],'rangeStepRight':[1,2,0],'setWith':[3,1,2,0],'sortedIndexBy':[2,1,0],'sortedLastIndexBy':[2,1,0],'unionBy':[1,2,0],'unionWith':[1,2,0],'updateWith':[3,1,2,0],'xorBy':[1,2,0],'xorWith':[1,2,0],'zipWith':[1,2,0]};exports.methodSpread={'assignAll':{'start':0},'assignAllWith':{'start':0},'assignInAll':{'start':0},'assignInAllWith':{'start':0},'defaultsAll':{'start':0},'defaultsDeepAll':{'start':0},'invokeArgs':{'start':2},'invokeArgsMap':{'start':2},'mergeAll':{'start':0},'mergeAllWith':{'start':0},'partial':{'start':1},'partialRight':{'start':1},'without':{'start':1},'zipAll':{'start':0}};exports.mutate={'array':{'fill':true,'pull':true,'pullAll':true,'pullAllBy':true,'pullAllWith':true,'pullAt':true,'remove':true,'reverse':true},'object':{'assign':true,'assignAll':true,'assignAllWith':true,'assignIn':true,'assignInAll':true,'assignInAllWith':true,'assignInWith':true,'assignWith':true,'defaults':true,'defaultsAll':true,'defaultsDeep':true,'defaultsDeepAll':true,'merge':true,'mergeAll':true,'mergeAllWith':true,'mergeWith':true},'set':{'set':true,'setWith':true,'unset':true,'update':true,'updateWith':true}};exports.placeholder={'bind':true,'bindKey':true,'curry':true,'curryRight':true,'partial':true,'partialRight':true};exports.realToAlias=function(){var hasOwnProperty=Object.prototype.hasOwnProperty,object=exports.aliasToReal,result={};for(var key in object){var value=object[key];if(hasOwnProperty.call(result,value)){result[value].push(key);}else{result[value]=[key];}}return result;}();exports.remap={'assignAll':'assign','assignAllWith':'assignWith','assignInAll':'assignIn','assignInAllWith':'assignInWith','curryN':'curry','curryRightN':'curryRight','defaultsAll':'defaults','defaultsDeepAll':'defaultsDeep','findFrom':'find','findIndexFrom':'findIndex','findLastFrom':'findLast','findLastIndexFrom':'findLastIndex','getOr':'get','includesFrom':'includes','indexOfFrom':'indexOf','invokeArgs':'invoke','invokeArgsMap':'invokeMap','lastIndexOfFrom':'lastIndexOf','mergeAll':'merge','mergeAllWith':'mergeWith','padChars':'pad','padCharsEnd':'padEnd','padCharsStart':'padStart','propertyOf':'get','rangeStep':'range','rangeStepRight':'rangeRight','restFrom':'rest','spreadFrom':'spread','trimChars':'trim','trimCharsEnd':'trimEnd','trimCharsStart':'trimStart','zipAll':'zip'};exports.skipFixed={'castArray':true,'flow':true,'flowRight':true,'iteratee':true,'mixin':true,'rearg':true,'runInContext':true};exports.skipRearg={'add':true,'assign':true,'assignIn':true,'bind':true,'bindKey':true,'concat':true,'difference':true,'divide':true,'eq':true,'gt':true,'gte':true,'isEqual':true,'lt':true,'lte':true,'matchesProperty':true,'merge':true,'multiply':true,'overArgs':true,'partial':true,'partialRight':true,'propertyOf':true,'random':true,'range':true,'rangeRight':true,'subtract':true,'zip':true,'zipObject':true,'zipObjectDeep':true};

/***/ }),
/* 375 */
/***/ (function(module, exports, __webpack_require__) {

var mapping=__webpack_require__(374),fallbackHolder=__webpack_require__(14);var push=Array.prototype.push;function baseArity(func,n){return n==2?function(a,b){return func.apply(undefined,arguments);}:function(a){return func.apply(undefined,arguments);};}function baseAry(func,n){return n==2?function(a,b){return func(a,b);}:function(a){return func(a);};}function cloneArray(array){var length=array?array.length:0,result=Array(length);while(length--){result[length]=array[length];}return result;}function createCloner(func){return function(object){return func({},object);};}function flatSpread(func,start){return function(){var length=arguments.length,lastIndex=length-1,args=Array(length);while(length--){args[length]=arguments[length];}var array=args[start],otherArgs=args.slice(0,start);if(array){push.apply(otherArgs,array);}if(start!=lastIndex){push.apply(otherArgs,args.slice(start+1));}return func.apply(this,otherArgs);};}function wrapImmutable(func,cloner){return function(){var length=arguments.length;if(!length){return;}var args=Array(length);while(length--){args[length]=arguments[length];}var result=args[0]=cloner.apply(undefined,args);func.apply(undefined,args);return result;};}function baseConvert(util,name,func,options){var setPlaceholder,isLib=typeof name=='function',isObj=name===Object(name);if(isObj){options=func;func=name;name=undefined;}if(func==null){throw new TypeError();}options||(options={});var config={'cap':'cap'in options?options.cap:true,'curry':'curry'in options?options.curry:true,'fixed':'fixed'in options?options.fixed:true,'immutable':'immutable'in options?options.immutable:true,'rearg':'rearg'in options?options.rearg:true};var forceCurry='curry'in options&&options.curry,forceFixed='fixed'in options&&options.fixed,forceRearg='rearg'in options&&options.rearg,placeholder=isLib?func:fallbackHolder,pristine=isLib?func.runInContext():undefined;var helpers=isLib?func:{'ary':util.ary,'assign':util.assign,'clone':util.clone,'curry':util.curry,'forEach':util.forEach,'isArray':util.isArray,'isError':util.isError,'isFunction':util.isFunction,'isWeakMap':util.isWeakMap,'iteratee':util.iteratee,'keys':util.keys,'rearg':util.rearg,'toInteger':util.toInteger,'toPath':util.toPath};var ary=helpers.ary,assign=helpers.assign,clone=helpers.clone,curry=helpers.curry,each=helpers.forEach,isArray=helpers.isArray,isError=helpers.isError,isFunction=helpers.isFunction,isWeakMap=helpers.isWeakMap,keys=helpers.keys,rearg=helpers.rearg,toInteger=helpers.toInteger,toPath=helpers.toPath;var aryMethodKeys=keys(mapping.aryMethod);var wrappers={'castArray':function(castArray){return function(){var value=arguments[0];return isArray(value)?castArray(cloneArray(value)):castArray.apply(undefined,arguments);};},'iteratee':function(iteratee){return function(){var func=arguments[0],arity=arguments[1],result=iteratee(func,arity),length=result.length;if(config.cap&&typeof arity=='number'){arity=arity>2?arity-2:1;return length&&length<=arity?result:baseAry(result,arity);}return result;};},'mixin':function(mixin){return function(source){var func=this;if(!isFunction(func)){return mixin(func,Object(source));}var pairs=[];each(keys(source),function(key){if(isFunction(source[key])){pairs.push([key,func.prototype[key]]);}});mixin(func,Object(source));each(pairs,function(pair){var value=pair[1];if(isFunction(value)){func.prototype[pair[0]]=value;}else{delete func.prototype[pair[0]];}});return func;};},'nthArg':function(nthArg){return function(n){var arity=n<0?1:toInteger(n)+1;return curry(nthArg(n),arity);};},'rearg':function(rearg){return function(func,indexes){var arity=indexes?indexes.length:0;return curry(rearg(func,indexes),arity);};},'runInContext':function(runInContext){return function(context){return baseConvert(util,runInContext(context),options);};}};function castCap(name,func){if(config.cap){var indexes=mapping.iterateeRearg[name];if(indexes){return iterateeRearg(func,indexes);}var n=!isLib&&mapping.iterateeAry[name];if(n){return iterateeAry(func,n);}}return func;}function castCurry(name,func,n){return forceCurry||config.curry&&n>1?curry(func,n):func;}function castFixed(name,func,n){if(config.fixed&&(forceFixed||!mapping.skipFixed[name])){var data=mapping.methodSpread[name],start=data&&data.start;return start===undefined?ary(func,n):flatSpread(func,start);}return func;}function castRearg(name,func,n){return config.rearg&&n>1&&(forceRearg||!mapping.skipRearg[name])?rearg(func,mapping.methodRearg[name]||mapping.aryRearg[n]):func;}function cloneByPath(object,path){path=toPath(path);var index=-1,length=path.length,lastIndex=length-1,result=clone(Object(object)),nested=result;while(nested!=null&&++index<length){var key=path[index],value=nested[key];if(value!=null&&!(isFunction(value)||isError(value)||isWeakMap(value))){nested[key]=clone(index==lastIndex?value:Object(value));}nested=nested[key];}return result;}function convertLib(options){return _.runInContext.convert(options)(undefined);}function createConverter(name,func){var realName=mapping.aliasToReal[name]||name,methodName=mapping.remap[realName]||realName,oldOptions=options;return function(options){var newUtil=isLib?pristine:helpers,newFunc=isLib?pristine[methodName]:func,newOptions=assign(assign({},oldOptions),options);return baseConvert(newUtil,realName,newFunc,newOptions);};}function iterateeAry(func,n){return overArg(func,function(func){return typeof func=='function'?baseAry(func,n):func;});}function iterateeRearg(func,indexes){return overArg(func,function(func){var n=indexes.length;return baseArity(rearg(baseAry(func,n),indexes),n);});}function overArg(func,transform){return function(){var length=arguments.length;if(!length){return func();}var args=Array(length);while(length--){args[length]=arguments[length];}var index=config.rearg?0:length-1;args[index]=transform(args[index]);return func.apply(undefined,args);};}function wrap(name,func){var result,realName=mapping.aliasToReal[name]||name,wrapped=func,wrapper=wrappers[realName];if(wrapper){wrapped=wrapper(func);}else if(config.immutable){if(mapping.mutate.array[realName]){wrapped=wrapImmutable(func,cloneArray);}else if(mapping.mutate.object[realName]){wrapped=wrapImmutable(func,createCloner(func));}else if(mapping.mutate.set[realName]){wrapped=wrapImmutable(func,cloneByPath);}}each(aryMethodKeys,function(aryKey){each(mapping.aryMethod[aryKey],function(otherName){if(realName==otherName){var data=mapping.methodSpread[realName],afterRearg=data&&data.afterRearg;result=afterRearg?castFixed(realName,castRearg(realName,wrapped,aryKey),aryKey):castRearg(realName,castFixed(realName,wrapped,aryKey),aryKey);result=castCap(realName,result);result=castCurry(realName,result,aryKey);return false;}});return!result;});result||(result=wrapped);if(result==func){result=forceCurry?curry(result,1):function(){return func.apply(this,arguments);};}result.convert=createConverter(realName,func);if(mapping.placeholder[realName]){setPlaceholder=true;result.placeholder=func.placeholder=placeholder;}return result;}if(!isObj){return wrap(name,func);}var _=func;var pairs=[];each(aryMethodKeys,function(aryKey){each(mapping.aryMethod[aryKey],function(key){var func=_[mapping.remap[key]||key];if(func){pairs.push([key,wrap(key,func)]);}});});each(keys(_),function(key){var func=_[key];if(typeof func=='function'){var length=pairs.length;while(length--){if(pairs[length][0]==key){return;}}func.convert=createConverter(key,func);pairs.push([key,func]);}});each(pairs,function(pair){_[pair[0]]=pair[1];});_.convert=convertLib;if(setPlaceholder){_.placeholder=placeholder;}each(keys(_),function(key){each(mapping.realToAlias[key]||[],function(alias){_[alias]=_[key];});});return _;}module.exports=baseConvert;

/***/ }),
/* 376 */
/***/ (function(module, exports) {

function arrayAggregator(array,setter,iteratee,accumulator){var index=-1,length=array==null?0:array.length;while(++index<length){var value=array[index];setter(accumulator,value,iteratee(value),array);}return accumulator;}module.exports=arrayAggregator;

/***/ }),
/* 377 */
/***/ (function(module, exports) {

function arrayAggregator(array,setter,iteratee,accumulator){var index=-1,length=array==null?0:array.length;while(++index<length){var value=array[index];setter(accumulator,value,iteratee(value),array);}return accumulator;}module.exports=arrayAggregator;

/***/ }),
/* 378 */
/***/ (function(module, exports) {

function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break;}}return object;};}module.exports=createBaseFor;

/***/ }),
/* 379 */
/***/ (function(module, exports, __webpack_require__) {

var baseGet=__webpack_require__(77),baseSlice=__webpack_require__(52);function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1));}module.exports=parent;

/***/ }),
/* 380 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 381 */
/***/ (function(module, exports, __webpack_require__) {

var castPath=__webpack_require__(36),last=__webpack_require__(8),parent=__webpack_require__(379),toKey=__webpack_require__(24);function baseUnset(object,path){path=castPath(path,object);object=parent(object,path);return object==null||delete object[toKey(last(path))];}module.exports=baseUnset;

/***/ }),
/* 382 */
/***/ (function(module, exports, __webpack_require__) {

var baseUnset=__webpack_require__(381),isIndex=__webpack_require__(54);var arrayProto=Array.prototype;var splice=arrayProto.splice;function basePullAt(array,indexes){var length=array?indexes.length:0,lastIndex=length-1;while(length--){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;if(isIndex(index)){splice.call(array,index,1);}else{baseUnset(array,index);}}}return array;}module.exports=basePullAt;

/***/ }),
/* 383 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 384 */
/***/ (function(module, exports, __webpack_require__) {

var apply=__webpack_require__(58),createCtor=__webpack_require__(55),root=__webpack_require__(18);var WRAP_BIND_FLAG=1;function createPartial(func,bitmask,thisArg,partials){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex];}while(argsLength--){args[leftIndex++]=arguments[++argsIndex];}return apply(fn,isBind?thisArg:this,args);}return wrapper;}module.exports=createPartial;

/***/ }),
/* 385 */
/***/ (function(module, exports, __webpack_require__) {

var copyArray=__webpack_require__(37),isIndex=__webpack_require__(54);var nativeMin=Math.min;function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined;}return array;}module.exports=reorder;

/***/ }),
/* 386 */
/***/ (function(module, exports) {

function countHolders(array,placeholder){var length=array.length,result=0;while(length--){if(array[length]===placeholder){++result;}}return result;}module.exports=countHolders;

/***/ }),
/* 387 */
/***/ (function(module, exports) {

var nativeMax=Math.max;function composeArgsRight(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;while(++argsIndex<rangeLength){result[argsIndex]=args[argsIndex];}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex];}while(++holdersIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[offset+holders[holdersIndex]]=args[argsIndex++];}}return result;}module.exports=composeArgsRight;

/***/ }),
/* 388 */
/***/ (function(module, exports) {

var nativeMax=Math.max;function composeArgs(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex];}while(++argsIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[holders[argsIndex]]=args[argsIndex];}}while(rangeLength--){result[leftIndex++]=args[argsIndex++];}return result;}module.exports=composeArgs;

/***/ }),
/* 389 */
/***/ (function(module, exports, __webpack_require__) {

var apply=__webpack_require__(58),createCtor=__webpack_require__(55),createHybrid=__webpack_require__(123),createRecurry=__webpack_require__(122),getHolder=__webpack_require__(118),replaceHolders=__webpack_require__(117),root=__webpack_require__(18);function createCurry(func,bitmask,arity){var Ctor=createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);while(index--){args[index]=arguments[index];}var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);length-=holders.length;if(length<arity){return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length);}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return apply(fn,this,args);}return wrapper;}module.exports=createCurry;

/***/ }),
/* 390 */
/***/ (function(module, exports, __webpack_require__) {

var createCtor=__webpack_require__(55),root=__webpack_require__(18);var WRAP_BIND_FLAG=1;function createBind(func,bitmask,thisArg){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments);}return wrapper;}module.exports=createBind;

/***/ }),
/* 391 */
/***/ (function(module, exports) {

function identity(value){return value;}module.exports=identity;

/***/ }),
/* 392 */
/***/ (function(module, exports) {

var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;module.exports=freeGlobal;

/***/ }),
/* 393 */
/***/ (function(module, exports, __webpack_require__) {

var root=__webpack_require__(18);var now=function(){return root.Date.now();};module.exports=now;

/***/ }),
/* 394 */
/***/ (function(module, exports) {

function baseIndexOfWith(array,value,fromIndex,comparator){var index=fromIndex-1,length=array.length;while(++index<length){if(comparator(array[index],value)){return index;}}return-1;}module.exports=baseIndexOfWith;

/***/ }),
/* 395 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap=__webpack_require__(15),baseIndexOf=__webpack_require__(80),baseIndexOfWith=__webpack_require__(394),baseUnary=__webpack_require__(57),copyArray=__webpack_require__(37);var arrayProto=Array.prototype;var splice=arrayProto.splice;function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;if(array===values){values=copyArray(values);}if(iteratee){seen=arrayMap(array,baseUnary(iteratee));}while(++index<length){var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;while((fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1){if(seen!==array){splice.call(seen,fromIndex,1);}splice.call(array,fromIndex,1);}}return array;}module.exports=basePullAll;

/***/ }),
/* 396 */
/***/ (function(module, exports, __webpack_require__) {

var basePullAll=__webpack_require__(395);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array;}module.exports=pullAll;

/***/ }),
/* 397 */
/***/ (function(module, exports, __webpack_require__) {

var listCacheClear=__webpack_require__(132),listCacheDelete=__webpack_require__(131),listCacheGet=__webpack_require__(130),listCacheHas=__webpack_require__(129),listCacheSet=__webpack_require__(128);function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache;

/***/ }),
/* 398 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": 255,
	"./af.js": 255,
	"./ar": 254,
	"./ar-dz": 253,
	"./ar-dz.js": 253,
	"./ar-kw": 252,
	"./ar-kw.js": 252,
	"./ar-ly": 251,
	"./ar-ly.js": 251,
	"./ar-ma": 250,
	"./ar-ma.js": 250,
	"./ar-sa": 249,
	"./ar-sa.js": 249,
	"./ar-tn": 248,
	"./ar-tn.js": 248,
	"./ar.js": 254,
	"./az": 247,
	"./az.js": 247,
	"./be": 246,
	"./be.js": 246,
	"./bg": 245,
	"./bg.js": 245,
	"./bm": 244,
	"./bm.js": 244,
	"./bn": 243,
	"./bn.js": 243,
	"./bo": 242,
	"./bo.js": 242,
	"./br": 241,
	"./br.js": 241,
	"./bs": 240,
	"./bs.js": 240,
	"./ca": 239,
	"./ca.js": 239,
	"./cs": 238,
	"./cs.js": 238,
	"./cv": 237,
	"./cv.js": 237,
	"./cy": 236,
	"./cy.js": 236,
	"./da": 235,
	"./da.js": 235,
	"./de": 234,
	"./de-at": 233,
	"./de-at.js": 233,
	"./de-ch": 232,
	"./de-ch.js": 232,
	"./de.js": 234,
	"./dv": 231,
	"./dv.js": 231,
	"./el": 230,
	"./el.js": 230,
	"./en-au": 229,
	"./en-au.js": 229,
	"./en-ca": 228,
	"./en-ca.js": 228,
	"./en-gb": 227,
	"./en-gb.js": 227,
	"./en-ie": 226,
	"./en-ie.js": 226,
	"./en-il": 225,
	"./en-il.js": 225,
	"./en-nz": 224,
	"./en-nz.js": 224,
	"./eo": 223,
	"./eo.js": 223,
	"./es": 222,
	"./es-do": 221,
	"./es-do.js": 221,
	"./es-us": 220,
	"./es-us.js": 220,
	"./es.js": 222,
	"./et": 219,
	"./et.js": 219,
	"./eu": 218,
	"./eu.js": 218,
	"./fa": 217,
	"./fa.js": 217,
	"./fi": 216,
	"./fi.js": 216,
	"./fo": 215,
	"./fo.js": 215,
	"./fr": 214,
	"./fr-ca": 213,
	"./fr-ca.js": 213,
	"./fr-ch": 212,
	"./fr-ch.js": 212,
	"./fr.js": 214,
	"./fy": 211,
	"./fy.js": 211,
	"./gd": 210,
	"./gd.js": 210,
	"./gl": 209,
	"./gl.js": 209,
	"./gom-latn": 208,
	"./gom-latn.js": 208,
	"./gu": 207,
	"./gu.js": 207,
	"./he": 206,
	"./he.js": 206,
	"./hi": 205,
	"./hi.js": 205,
	"./hr": 204,
	"./hr.js": 204,
	"./hu": 203,
	"./hu.js": 203,
	"./hy-am": 202,
	"./hy-am.js": 202,
	"./id": 201,
	"./id.js": 201,
	"./is": 200,
	"./is.js": 200,
	"./it": 199,
	"./it.js": 199,
	"./ja": 198,
	"./ja.js": 198,
	"./jv": 197,
	"./jv.js": 197,
	"./ka": 196,
	"./ka.js": 196,
	"./kk": 195,
	"./kk.js": 195,
	"./km": 194,
	"./km.js": 194,
	"./kn": 193,
	"./kn.js": 193,
	"./ko": 192,
	"./ko.js": 192,
	"./ky": 191,
	"./ky.js": 191,
	"./lb": 190,
	"./lb.js": 190,
	"./lo": 189,
	"./lo.js": 189,
	"./lt": 188,
	"./lt.js": 188,
	"./lv": 187,
	"./lv.js": 187,
	"./me": 186,
	"./me.js": 186,
	"./mi": 185,
	"./mi.js": 185,
	"./mk": 184,
	"./mk.js": 184,
	"./ml": 183,
	"./ml.js": 183,
	"./mn": 182,
	"./mn.js": 182,
	"./mr": 181,
	"./mr.js": 181,
	"./ms": 180,
	"./ms-my": 179,
	"./ms-my.js": 179,
	"./ms.js": 180,
	"./mt": 178,
	"./mt.js": 178,
	"./my": 177,
	"./my.js": 177,
	"./nb": 176,
	"./nb.js": 176,
	"./ne": 175,
	"./ne.js": 175,
	"./nl": 174,
	"./nl-be": 173,
	"./nl-be.js": 173,
	"./nl.js": 174,
	"./nn": 172,
	"./nn.js": 172,
	"./pa-in": 171,
	"./pa-in.js": 171,
	"./pl": 170,
	"./pl.js": 170,
	"./pt": 169,
	"./pt-br": 168,
	"./pt-br.js": 168,
	"./pt.js": 169,
	"./ro": 167,
	"./ro.js": 167,
	"./ru": 166,
	"./ru.js": 166,
	"./sd": 165,
	"./sd.js": 165,
	"./se": 164,
	"./se.js": 164,
	"./si": 163,
	"./si.js": 163,
	"./sk": 162,
	"./sk.js": 162,
	"./sl": 161,
	"./sl.js": 161,
	"./sq": 160,
	"./sq.js": 160,
	"./sr": 159,
	"./sr-cyrl": 158,
	"./sr-cyrl.js": 158,
	"./sr.js": 159,
	"./ss": 157,
	"./ss.js": 157,
	"./sv": 156,
	"./sv.js": 156,
	"./sw": 155,
	"./sw.js": 155,
	"./ta": 154,
	"./ta.js": 154,
	"./te": 153,
	"./te.js": 153,
	"./tet": 152,
	"./tet.js": 152,
	"./tg": 151,
	"./tg.js": 151,
	"./th": 150,
	"./th.js": 150,
	"./tl-ph": 149,
	"./tl-ph.js": 149,
	"./tlh": 148,
	"./tlh.js": 148,
	"./tr": 147,
	"./tr.js": 147,
	"./tzl": 146,
	"./tzl.js": 146,
	"./tzm": 145,
	"./tzm-latn": 144,
	"./tzm-latn.js": 144,
	"./tzm.js": 145,
	"./ug-cn": 143,
	"./ug-cn.js": 143,
	"./uk": 142,
	"./uk.js": 142,
	"./ur": 141,
	"./ur.js": 141,
	"./uz": 140,
	"./uz-latn": 139,
	"./uz-latn.js": 139,
	"./uz.js": 140,
	"./vi": 138,
	"./vi.js": 138,
	"./x-pseudo": 137,
	"./x-pseudo.js": 137,
	"./yo": 136,
	"./yo.js": 136,
	"./zh-cn": 135,
	"./zh-cn.js": 135,
	"./zh-hk": 134,
	"./zh-hk.js": 134,
	"./zh-tw": 133,
	"./zh-tw.js": 133
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	var module = __webpack_require__(id);
	return module;
}
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) { // check for number or string
		var e = new Error('Cannot find module "' + req + '".');
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return id;
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 398;

/***/ }),
/* 399 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger=__webpack_require__(25);var FUNC_ERROR_TEXT='Expected a function';function before(n,func){var result;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}n=toInteger(n);return function(){if(--n>0){result=func.apply(this,arguments);}if(n<=1){func=undefined;}return result;};}module.exports=before;

/***/ }),
/* 400 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "LICENSE";

/***/ })
/******/ ]);
//# sourceMappingURL=foreground.entry.js.map